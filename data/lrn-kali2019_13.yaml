- en: Network Penetration Testing - Gaining Access
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络渗透测试 - 获取访问权限
- en: Gaining access to a system and network is one of the most critical phases during
    a penetration test. This phase tests both the penetration tester's skill set and
    the security controls of the target system and network. The penetration tester
    must always think about all the possible ways in which they can break into the
    target by exploiting various security flaws.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 获取对系统和网络的访问权限是渗透测试中最关键的阶段之一。这一阶段测试了渗透测试员的技能和目标系统和网络的安全控制。渗透测试员必须始终考虑他们可以利用各种安全漏洞来攻击目标的所有可能方式。
- en: Without gaining access to a corporate network, you will not be able to perform
    any sort of network penetration and exfiltrate data. The purpose of a penetration
    test is to simulate real-world attacks that a real hacker with malicious intent
    would perform. This means gaining unauthorized entry to a corporate network and
    compromising systems.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有进入企业网络，你将无法进行任何形式的网络渗透和数据外泄。渗透测试的目的是模拟真实世界中具有恶意意图的真正黑客会执行的攻击。这意味着未经授权地进入企业网络并破坏系统。
- en: As an upcoming cybersecurity professional/penetration tester, you will learn
    how to compromise wireless networks, exploit the Linux and Windows operating systems,
    take advantage of remote access services, and retrieve user account credentials
    to gain access to a system and network. Additionally, you'll learn about various
    countermeasures for securing a wireless network from cyber threats.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名即将成为网络安全专业人员/渗透测试员，你将学习如何破解无线网络，利用Linux和Windows操作系统，利用远程访问服务，并获取用户帐户凭据以访问系统和网络。此外，你还将学习有关保护无线网络免受网络威胁的各种对策。
- en: 'In this chapter, we will be covering the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Gaining access
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取访问权限
- en: '**Wired Equivalent Privacy** (**WEP**) cracking'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**有线等效隐私**（**WEP**）破解'
- en: '**Wi-Fi Protected Access** (**WPA**) cracking'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Wi-Fi Protected Access**（**WPA**）破解'
- en: Securing your wireless network
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保护您的无线网络
- en: Configuring wireless security settings
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置无线安全设置
- en: Exploiting vulnerable perimeter systems
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用脆弱的外围系统
- en: Penetration testing Citrix and **Remote Desktop Protocol** (**RDP**)-based remote
    access systems
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 渗透测试Citrix和基于**远程桌面协议**（**RDP**）的远程访问系统
- en: PWN boxes and other tools
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PWN盒和其他工具
- en: Bypassing **Network Access Control** (**NAC**)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绕过**网络访问控制**（**NAC**）
- en: Technical requirements
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the instructions in this chapter, please ensure that you
    meet the following hardware and software requirements:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 要按照本章的说明进行操作，请确保满足以下硬件和软件要求：
- en: Kali Linux
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux
- en: Windows 7
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 7
- en: Wireless router
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线路由器
- en: Gaining access
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取访问权限
- en: Penetration testing and ethical hacking is an exciting topic. Everyone is always
    excited to hack another system, whether it's a computer or even a wireless network.
    The previous chapters focused on gathering enough intelligence on a target prior
    to launching an attack. The exploitation phase of hacking and penetration testing
    can sometimes be challenging.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试和道德黑客是一个令人兴奋的话题。每个人都总是兴奋地想要黑入另一个系统，无论是计算机还是无线网络。之前的章节侧重于在发动攻击之前对目标进行足够的情报收集。黑客和渗透测试的利用阶段有时可能会具有挑战性。
- en: It's very important to gather as many details as possible about the target.
    Such background work helps us to determine approximate exploits and a payload
    we can launch against a target system or network. Sometimes, when you launch an
    exploit that's intended for a particular operating system, it may not work, and
    this can be frustrating. One tactic you can adopt is to target the low-hanging
    fruits on a network—that is, attempt to exploit and gain access to systems and
    devices that seem easier and vulnerable to TCP/IP protocols that can be easily
    exploited.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 收集有关目标的尽可能多的细节非常重要。这样的背景工作有助于我们确定可以针对目标系统或网络发动的近似利用和有效载荷。有时，当你发动一个针对特定操作系统的利用时，它可能不起作用，这可能会令人沮丧。你可以采取的一种策略是针对网络上的低
    hanging fruits——也就是尝试利用和获取对易受攻击的系统和设备的访问权限，这些系统和设备对TCP/IP协议易受攻击。
- en: An example is the **vsftpd** service, which we explored in the previous chapters
    and used to gain entry to the target via a shell interface. Another example is
    the **EternalBlue** vulnerability, which is found on the Windows operating system.
    During your scanning phase, be sure to perform an extensive vulnerability assessment
    on all the devices on your target network.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 一个例子是我们在之前的章节中探讨过并用来通过shell界面进入目标的**vsftpd**服务。另一个例子是在Windows操作系统上发现的**EternalBlue**漏洞。在扫描阶段期间，一定要对目标网络上的所有设备进行全面的漏洞评估。
- en: Begin by exploiting targets that seem to be the most vulnerable and, hence,
    easy to exploit, and then move on to those that are less vulnerable and thus more
    difficult to exploit. To put this into context, imagine appearing for a written
    examination. The question paper has a lot of challenging questions that need to
    be answered within a given time period. In such a scenario, it's always wise to
    answer easier questions first and then move on to the tougher ones. This will
    give you more time to answer questions that you are more likely to get correct
    and maximize the marks that you will score in the exam.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 首先利用看起来最脆弱、因此易于利用的目标，然后转向那些不太脆弱、因此更难利用的目标。举个例子，想象一下参加笔试。试卷上有很多需要在规定时间内回答的具有挑战性的问题。在这种情况下，明智的做法是先回答较容易的问题，然后再回答更困难的问题。这样可以给你更多时间回答你更有可能答对的问题，并最大限度地提高你在考试中得分的机会。
- en: 'There are many methods and techniques a penetration tester can apply to gain
    access to systems, such as the following:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试员可以应用许多方法和技术来获取对系统的访问权限，例如以下方法：
- en: Online and offline password cracking
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在线和离线密码破解
- en: Cracking the **pre-shared key** (**PSK**) on a wireless network
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解无线网络上的**预共享密钥**（**PSK**）
- en: Social engineering
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社会工程
- en: Performing a **Man-in-the-Middle** (**MITM**) attack
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行**中间人**（**MITM**）攻击
- en: Performing a brute-force attack on application layer protocols
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对应用层协议执行暴力破解攻击
- en: During the gaining-access phase, a penetration tester usually performs various
    types of attack that will assist them in gaining entry to a network. Usually,
    you start by performing online or offline password cracking. Once you've obtained
    a valid username and password, the next step is to access the victim's system
    and escalate your user privileges. Obtaining a higher level of user privilege
    will allow for the execution of any application and tasks on the compromised machine.
    Hiding files such as malicious code is designed to ensure that a hidden backdoor
    is created and that logic bombs (a type of virus that contains a set of instructions
    triggered by a user's action) have been planted. Lastly, when disconnecting from
    a compromised machine, it's always wise to cover your tracks. Covering your tracks
    is the last phase in penetration testing and focuses on removing any log files
    and evidence indicating that an attacker was present on the system or network.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在获取访问权限阶段，渗透测试人员通常执行各种类型的攻击，以帮助他们进入网络。通常，您首先执行在线或离线密码破解。一旦获得有效的用户名和密码，下一步就是访问受害者的系统并提升用户权限。获得更高级别的用户权限将允许在受损机器上执行任何应用程序和任务。隐藏文件，如恶意代码，旨在确保创建隐藏的后门，并且已经植入逻辑炸弹（一种包含一组由用户操作触发的指令的病毒）。最后，在断开与受损机器的连接时，总是明智地掩盖您的踪迹。掩盖您的踪迹是渗透测试的最后阶段，重点是删除任何表明攻击者曾在系统或网络上出现的日志文件和证据。
- en: 'The following is a typical flowchart for gaining access to a system:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是获得系统访问权限的典型流程图：
- en: '![](img/796f50d7-3ee1-487a-87ba-620eb285c8fe.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/796f50d7-3ee1-487a-87ba-620eb285c8fe.png)'
- en: In the upcoming sections, we will take a look at various methods we can use
    in order to gain entry to a target system.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将看看我们可以使用的各种方法，以便进入目标系统。
- en: WEP cracking
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: WEP破解
- en: By using wireless networking, users with an IEEE 802.11-compatible device such
    as a laptop are able to connect to a wireless access point. This will let them
    access the resources on the local network, just like they would when connected
    physically using a wire. Wireless networking provides a lot of convenience to
    a user, whether at home or in a corporate environment.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用无线网络，具有IEEE 802.11兼容设备（如笔记本电脑）的用户可以连接到无线接入点。这将使他们能够访问本地网络上的资源，就像他们使用有线连接时一样。无线网络为用户提供了很多便利，无论是在家中还是在企业环境中。
- en: By default, a wireless network is open, thus allowing anyone with a laptop or
    smartphone to establish a connection. This creates a concern about user privacy
    and security. The WEP encryption standard was used in the early generations of
    wireless networking and is still implemented by users at home and by IT administrators.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，无线网络是开放的，因此允许任何具有笔记本电脑或智能手机的人建立连接。这引发了用户隐私和安全方面的担忧。WEP加密标准在无线网络的早期发展阶段被使用，并且仍然被家庭用户和IT管理员实施。
- en: The WEP encryption standard uses the **Rivest Cipher 4** (**RC4**) encryption
    cipher, which uses a **40-bit key** for data encryption. When it was developed,
    this was considered very secure, but, by 2002, multiple security weaknesses had
    been found in the standard. An attacker would be able to obtain the encryption
    key within a few hours. Using the 40-bit key, an attacker could capture and decrypt
    traffic very quickly, which compromised the confidentiality of the WEP encryption
    standard. In modern cryptographic standards, a larger encryption key is used to
    prevent such attacks on data encryption.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: WEP加密标准使用**Rivest Cipher 4**（**RC4**）加密密码，用于数据加密的**40位密钥**。在开发时，这被认为是非常安全的，但到了2002年，标准中发现了多个安全漏洞。攻击者可以在几小时内获得加密密钥。使用40位密钥，攻击者可以非常快速地捕获和解密流量，这损害了WEP加密标准的机密性。在现代密码标准中，使用更大的加密密钥以防止对数据加密的此类攻击。
- en: As a cybersecurity professional in the field of offensive security, it's important
    to understand the techniques you should apply when performing WEP cracking using
    Kali Linux.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 作为攻击性安全领域的网络安全专业人员，了解在使用Kali Linux执行WEP破解时应用的技术是很重要的。
- en: 'Perform the following steps to accomplish this:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来完成此操作：
- en: 'Enable monitoring mode on your wireless adapter with the following command:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令在无线适配器上启用监视模式：
- en: '[PRE0]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Perform wireless sniffing on nearby access points until you have discovered
    your target:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在附近的接入点上执行无线嗅探，直到发现目标：
- en: '[PRE1]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Once you've found your target, make a note of its BSSID, channel, and ESSID
    values.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 找到目标后，记下其BSSID、频道和ESSID值。
- en: Stop `airodump-ng` using *Ctrl* + *C* on your keyboard after obtaining the details,
    and then proceed to the next step.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在获取详细信息后，使用键盘上的*Ctrl* + *C*停止`airodump-ng`，然后继续下一步。
- en: 'Attempt a packet capture for the target wireless network:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试捕获目标无线网络的数据包：
- en: '[PRE2]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Let''s look at what some of these commands do:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看一些这些命令的作用：
- en: '`--bssid`: Allows you to specify a particular access point by using its BSSID
    value (media access control address of the access point)'
  id: totrans-49
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--bssid`：允许您通过使用其BSSID值（接入点的媒体访问控制地址）指定特定接入点'
- en: '`-c`: Allows you to set the wireless radios so that they listen on a specific
    channel'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-c`：允许您设置无线电，使其监听特定频道'
- en: '`-w`: Specific to the output location and filename'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-w`：特定于输出位置和文件名'
- en: Perform a deauthentication attack on the target.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对目标执行去认证攻击。
- en: 'Performing a deauthentication attack on the target access point will force
    any connected clients to disassociate. Once the clients are disconnected, they
    will automatically attempt to reconnect to the access point. In doing so, you
    are attempting to capture the WEP key during the clients'' attempt to reauthenticate:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 对目标接入点执行去认证攻击将迫使任何连接的客户端取消关联。一旦客户端断开连接，它们将自动尝试重新连接到接入点。通过这样做，您正在尝试在客户端尝试重新认证时捕获WEP密钥：
- en: '[PRE3]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: When you have captured the WEP key (you'll see the notification on the window
    running `airodump-ng`), you can stop the deauthentication attack.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 当您捕获到WEP密钥（您将在运行`airodump-ng`的窗口上看到通知）时，您可以停止去认证攻击。
- en: Next, let's attempt to crack the WEP and retrieve the secret key.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们尝试破解WEP并检索秘钥。
- en: 'Once you''ve captured sufficient data on the target wireless network, stop
    `airodump-ng`. Using the `ls -l` command on the Terminal, you''ll see a `.cap`
    file. In a new Terminal window, execute the following command:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您在目标无线网络上捕获了足够的数据，请停止`airodump-ng`。在终端上使用`ls -l`命令，您会看到一个`.cap`文件。在新的终端窗口中，执行以下命令：
- en: '[PRE4]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Additionally, you can use the following simple command to achieve the same
    task:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您可以使用以下简单命令来实现相同的任务：
- en: '[PRE5]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following screenshot is an example of the expected output:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图是预期输出的示例：
- en: '![](img/a7901ba9-ca30-49e4-86ba-74cc0751c482.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a7901ba9-ca30-49e4-86ba-74cc0751c482.png)'
- en: However, your WEP key will be different based on the value that was set by the
    administrator of the wireless access point. The output key is given in hexadecimal
    format, so you can now take this hex-based key and use it to access the target
    access point.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，您的WEP密钥将根据无线接入点的管理员设置的值而有所不同。输出密钥以十六进制格式给出，因此您现在可以使用这个基于十六进制的密钥来访问目标接入点。
- en: Having completed this section, you are now able to perform WEP cracking on wireless
    networks. In the next section, we will take a deep dive into how to perform WPA
    cracking techniques.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节后，您现在可以对无线网络执行WEP破解。在下一节中，我们将深入探讨如何执行WPA破解技术。
- en: WPA cracking
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: WPA破解
- en: Given the security vulnerabilities found in WEP, WPA was created in 2002 as
    an improved wireless security standard for IEEE 802.11 networks. WPA uses the
    **Temporal Key Integrity Protocol** (**TKIP**), which applies the RC4 encryption
    cipher suite for data privacy between the wireless access point and client devices.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于WEP中发现的安全漏洞，WPA于2002年作为IEEE 802.11网络的改进无线安全标准而创建。WPA使用**临时密钥完整性协议**（**TKIP**），该协议应用RC4加密密码套件，用于无线接入点和客户设备之间的数据隐私。
- en: Furthermore, **Wi-Fi Protected Access 2** (**WPA2**) was later developed to
    solve security flaws in its predecessor. WPA2 uses the **Advanced Encryption Standard**
    (**AES**) for data encryption as opposed to the RC4 cipher. Additionally, WPA2
    implemented **Counter Mode with Cipher Block Chaining Message** **Authentication
    Code Protocol** (**CCMP**), which replaced TKIP.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，**Wi-Fi保护访问2**（**WPA2**）后来被开发用于解决其前身的安全漏洞。WPA2使用**高级加密标准**（**AES**）进行数据加密，而不是RC4密码。此外，WPA2实施了**计数器模式与密码块链接消息认证码协议**（**CCMP**），取代了TKIP。
- en: 'Now, let''s get into the fun part, cracking WPA to gain entry to a target wireless
    network:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们进入有趣的部分，破解WPA以进入目标无线网络：
- en: 'Enable monitoring mode on your wireless adapter:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在无线适配器上启用监视模式：
- en: '[PRE6]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Perform wireless sniffing on a nearby access point until you have discovered
    your target:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对附近的接入点进行无线嗅探，直到发现您的目标：
- en: '[PRE7]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Once you have found your target, take note of its BSSID, channel, and ESSID
    values. Stop `airodump-ng` after obtaining the details, and then proceed to the
    next step.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦找到目标，请记下其BSSID、信道和ESSID值。在获取详细信息后停止`airodump-ng`，然后继续下一步。
- en: 'Attempt a packet capture for the target wireless network:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试捕获目标无线网络的数据包：
- en: '[PRE8]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Perform a deauthentication attack on the target.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对目标进行去认证攻击。
- en: 'Performing a deauthentication attack on the target access point will force
    any connected clients to disassociate. Once the clients are disconnected, they
    will automatically attempt to reconnect to the access point. In doing so, you
    are attempting to capture the WEP key during the clients'' attempt to reauthenticate:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 对目标接入点进行去认证攻击将强制任何连接的客户端取消关联。一旦客户端断开连接，它们将自动尝试重新连接到接入点。通过这样做，您正在尝试在客户端尝试重新认证时捕获WEP密钥：
- en: '[PRE9]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'When you have captured the WPA handshake, as shown in the following screenshot,
    you can stop the deauthentication attack:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 当您捕获到WPA握手时，如下面的屏幕截图所示，您可以停止去认证攻击：
- en: '![](img/4a2da0c5-c84d-47ea-b804-4e508f497c46.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4a2da0c5-c84d-47ea-b804-4e508f497c46.png)'
- en: Using *Ctrl* + *C*, stop the deauthentication attack and proceed to the next
    step.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用*Ctrl* + *C*停止去认证攻击，并继续下一步。
- en: 'To crack the WPA, we are going to use a word list. Using **crunch**, you can
    generate your own custom password word list. Additionally, the following are the
    locations of various word lists that are already pre-installed on Kali Linux:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要破解WPA，我们将使用一个字典列表。使用**crunch**，您可以生成自己的自定义密码字典列表。此外，以下是Kali Linux上已预安装的各种字典列表的位置：
- en: '![](img/294f7162-e739-4c43-b8b2-a1d0c0886a87.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](img/294f7162-e739-4c43-b8b2-a1d0c0886a87.png)'
- en: Once you have found a suitable word list, we can use the `aircrack-ng` tool
    with the `-w` parameter to specify a word list of our choice.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦找到合适的字典列表，我们可以使用`aircrack-ng`工具和`-w`参数指定我们选择的字典列表。
- en: 'To begin your password cracking for WPA, use the following command:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始WPA的密码破解，请使用以下命令：
- en: '[PRE10]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '`aircrack-ng` will attempt to perform a dictionary attack using the specific
    word list and will stop when the **key** is found, as shown in the following screenshot:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '`aircrack-ng`将尝试使用特定字典攻击列表，并在找到**密钥**时停止，如下面的屏幕截图所示：'
- en: '![](img/49ada9bd-1b9a-43c1-b3f9-5087bb7a54b0.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/49ada9bd-1b9a-43c1-b3f9-5087bb7a54b0.png)'
- en: Sometimes, a word list may not contain the password, and the result may not
    be fruitful. Create a custom word list using the **crunch** tool, or try using
    a word list from the `SecLists` GitHub repository at [https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists).
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，字典列表可能不包含密码，结果可能不尽人意。使用**crunch**工具创建自定义字典列表，或尝试使用`SecLists` GitHub存储库中的字典列表[https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists)。
- en: Now that you have completed this section on cracking wireless security, let's
    take a look at the following section, which covers how to secure your wireless
    network against cyber attacks.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经完成了关于破解无线安全的部分，让我们来看看下一节，它涵盖了如何保护您的无线网络免受网络攻击。
- en: Securing your network from the aforementioned attacks
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保护您的网络免受上述攻击
- en: As you saw in the previous section, a penetration tester or malicious hacker
    can attempt to hack your wireless network and obtain the secret key (password).
    Whether you're a student taking a computer security course, an IT professional,
    or simply an enthusiast, the topics covered in this section are some methods and
    techniques that you can use to secure your network from such attacks.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在上一节中看到的，渗透测试人员或恶意黑客可以尝试黑客入侵您的无线网络并获取秘钥（密码）。无论您是一名学生正在学习计算机安全课程，还是一名IT专业人士，或者只是一个爱好者，本节涵盖的主题是一些可以用来保护您的网络免受此类攻击的方法和技术。
- en: 'In the following sections, we will cover the following topics:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将涵盖以下主题：
- en: SSID management
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SSID管理
- en: MAC filtering
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MAC过滤
- en: The power level of antennas
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 天线的功率级别
- en: Strong passwords
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强密码
- en: Securing enterprise wireless networks
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保护企业无线网络
- en: Let's dive in!
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: SSID management
  id: totrans-100
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SSID管理
- en: When you buy a new access point or wireless router, the default **service set
    identifier** (**SSID**) is usually that of the manufacturer. For example, the
    default SSID (wireless network name) for a new Linksys access point would contain
    the name `Linksys` as its SSID. Many manufacturers do this to help the user quickly
    identify their wireless network when setting up a new access point. However, many
    individuals and organizations use the default SSID.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 购买新的接入点或无线路由器时，默认的服务集标识符（SSID）通常是制造商的名称。例如，新Linksys接入点的默认SSID（无线网络名称）将包含`Linksys`作为其SSID。许多制造商这样做是为了帮助用户在设置新接入点时快速识别他们的无线网络。然而，许多个人和组织使用默认的SSID。
- en: Leaving the default SSID as it is can be a security concern. Let's say you acquire
    a new Linksys access point for your home or organization, and, during the setup
    process, you decide to leave the default configurations for the device SSID. The
    word `Linksys` would be part of the network name. As a penetration tester who
    is performing wireless scanning for nearby access points, seeing a manufacturer's
    name can help profile the device and research specific exploits for the `Linksys`
    AP.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 保持默认的SSID不变可能会带来安全问题。假设您为家庭或组织获得了一个新的Linksys接入点，并且在设置过程中决定保持设备SSID的默认配置。单词`Linksys`将成为网络名称的一部分。作为进行附近接入点无线扫描的渗透测试人员，看到制造商的名称可以帮助对设备进行概括，并研究`Linksys`
    AP的特定漏洞。
- en: 'Imagine seeing the word `Netgear` while scanning for wireless access points.
    You can simply do a Google search for a list of known security vulnerabilities
    and misconfigurations on this particular brand, as shown in the following screenshot:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下在扫描无线接入点时看到`Netgear`这个词。您可以简单地搜索一下这个特定品牌已知的安全漏洞和配置错误的列表，如下图所示：
- en: '![](img/eb1d2f1a-8608-48ef-9a5e-bda1afa92ab3.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb1d2f1a-8608-48ef-9a5e-bda1afa92ab3.png)'
- en: To put it simply, you should not use any sort of name that may attract hackers
    or give away the identity of the access point and the organization. I often see
    companies create SSIDs with the name of their organization and, at times, incorporate
    the purpose of the SSID as part of the name.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 简而言之，您不应该使用任何可能吸引黑客或泄露接入点和组织身份的名称。我经常看到公司使用他们的组织名称创建SSID，并且有时将SSID的目的作为名称的一部分。
- en: An example of this is using the name `CompanyName_Admin`. Any penetration tester
    who is performing any sort of wireless security audit will target such networks
    initially.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 一个例子是使用名称`CompanyName_Admin`。任何进行任何无线安全审计的渗透测试人员最初都会针对这样的网络。
- en: Hiding an SSID is good practice, but it can still be discovered using wireless
    sniffing techniques such as `airodump-ng`, as outlined in the previous sections.
    Additionally, on a Windows-based system, you can use **NetStumbler** ([www.netstumbler.com](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwidnMDXmfjiAhVFTd8KHTPZAS8QFjAAegQIABAB&url=http%3A%2F%2Fwww.netstumbler.com%2Fdownloads%2F&usg=AOvVaw1txhDBmLy67I3rlfCDYpX8))
    and **inSSIDer** ([https://www.metageek.com/products/inssider/](https://www.metageek.com/products/inssider/)).
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 隐藏SSID是一个好的做法，但仍然可以使用无线嗅探技术（如`airodump-ng`）来发现，正如前面的章节中所概述的。此外，在基于Windows的系统上，您可以使用NetStumbler（[www.netstumbler.com](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwidnMDXmfjiAhVFTd8KHTPZAS8QFjAAegQIABAB&url=http%3A%2F%2Fwww.netstumbler.com%2Fdownloads%2F&usg=AOvVaw1txhDBmLy67I3rlfCDYpX8)）和inSSIDer（[https://www.metageek.com/products/inssider/](https://www.metageek.com/products/inssider/)）。
- en: In the next section, we will discuss the purpose of MAC filtering on a wireless
    network.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将讨论无线网络上MAC过滤的目的。
- en: MAC filtering
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: MAC过滤
- en: Each managed access point and its wireless router provides a basic type of access
    control for connected devices. Enabling MAC filtering on an access point allows
    you to specify a list of permitted and restricted devices that can, and cannot,
    connect to the access point. However, there are techniques, all of which were
    covered in the previous chapter, that allow a penetration tester to capture a
    list of authorized devices (their MAC addresses) and perform spoofing to gain
    unauthorized access. However, this feature should still be applied, since having
    some sort of security is better than having no security at all on your network.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 每个受控接入点及其无线路由器为连接设备提供基本类型的访问控制。在接入点上启用MAC过滤允许您指定允许和禁止连接到接入点的设备的列表。然而，有一些技术，所有这些都在前一章中涵盖过，允许渗透测试人员捕获授权设备的列表（它们的MAC地址）并执行欺骗以获取未经授权的访问。然而，仍应应用此功能，因为在您的网络上有某种安全性总比没有安全性要好。
- en: In the next section, we will cover the concept of power levels in antennas.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将介绍天线功率级别的概念。
- en: Power levels for antennas
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 天线功率级别
- en: Some access points have a feature within their operating system or firmware
    that allows you to manually adjust power levels on the antennas. By lowering the
    power level on the antenna, the broadcast range of the wireless signal will reduce
    in radius. Setting the power levels to 100% will ensure there is maximum coverage
    for the signal. This feature can be handy if you're concerned about others being
    able to see and intercept your data on the wireless network.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 一些接入点在其操作系统或固件中具有一个功能，允许您手动调整天线的功率级别。通过降低天线的功率级别，无线信号的广播范围将减小。将功率级别设置为100%将确保信号具有最大覆盖范围。如果您担心其他人能够在无线网络上看到并拦截您的数据，这个功能可能会很有用。
- en: Now that we have an understanding of the role power levels play on antennas,
    we will cover the essentials of creating strong passwords.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们了解了功率级别在天线上的作用，接下来我们将介绍创建强密码的基本要点。
- en: Strong passwords
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 强密码
- en: 'Cracking a user password usually depends on the complexity of the password
    itself. Many users tend to set simple and easy-to-remember passphrases on their
    devices, especially on a wireless network. However, a complex password will create
    difficulties for the penetration tester or hacker. Complex passwords have the
    following characteristics:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 破解用户密码通常取决于密码本身的复杂性。许多用户倾向于在其设备上设置简单易记的口令，特别是在无线网络上。然而，复杂的密码会给渗透测试人员或黑客带来困难。复杂密码具有以下特点：
- en: They contain uppercase characters
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们包含大写字符
- en: They contain lowercase characters
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们包含小写字符
- en: They contain numbers
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们包含数字
- en: They contain specific symbols
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们包含特定符号
- en: They are over 12 characters in length
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们的长度超过12个字符
- en: They do not contain a name
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不包含姓名
- en: They do not contain a date of birth
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不包含出生日期
- en: They do not contain a vehicle's plate number
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它们不包含车辆的车牌号码
- en: 'The following is an example of a complex password generated by **LastPass**
    ([www.lastpass.com](http://www.lastpass.com)), a password manager:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是由**LastPass**（[www.lastpass.com](http://www.lastpass.com)）生成的复杂密码的示例：
- en: '![](img/dc788631-cd18-459b-b1e6-75dfe2bb6611.png)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dc788631-cd18-459b-b1e6-75dfe2bb6611.png)'
- en: The idea is to ensure that nobody can guess or compromise your password easily.
    If a malicious user is able to compromise another person's user credentials, the
    attacker can wreak havoc on the victim's network and/or personal life.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 目的是确保没有人能够轻易猜测或破坏您的密码。如果恶意用户能够破坏另一个人的用户凭据，攻击者可以对受害者的网络和/或个人生活造成严重破坏。
- en: In the following section, we will describe techniques that can be implemented
    on an enterprise network to improve its security posture.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分，我们将描述可以在企业网络上实施的技术，以改善其安全状况。
- en: Securing enterprise wireless networks
  id: totrans-129
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保护企业无线网络
- en: 'An enterprise wireless network should use the following as techniques to reduce
    the risk of wireless network attacks:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 企业无线网络应该使用以下技术来减少无线网络攻击的风险：
- en: Implement a **wireless intrusion prevention system** (**WIPS**) on each wireless
    network owned and managed by the organization.
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在组织拥有和管理的每个无线网络上实施**无线入侵防范系统**（**WIPS**）。
- en: Ensure that all wired and wireless devices have the latest firmware and patches
    installed.
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保所有有线和无线设备都安装了最新的固件和补丁。
- en: Ensure that devices and configurations are compliant with the **National Institute
    of Standards and Technology** (**NIST**). Take a look at the *Establishing Wireless
    Robust Security Networks* section in the NIST framework at [https://csrc.nist.gov/publications/detail/sp/800-97/final](https://csrc.nist.gov/publications/detail/sp/800-97/final)
    for more information.
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保设备和配置符合**国家标准和技术研究所**（**NIST**）的要求。查看NIST框架中的*建立无线强大安全网络*部分，了解更多信息：[https://csrc.nist.gov/publications/detail/sp/800-97/final](https://csrc.nist.gov/publications/detail/sp/800-97/final)
- en: Whenever possible, implement multi-factor authentication to access the corporate
    network.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 尽可能实施多因素身份验证来访问企业网络。
- en: Implement the **Extensible Authentication Protocol** (**EAP**)—**Transport Layer
    Security** (**TLS**) certificate-based method to ensure the confidentiality and
    authenticity of wireless communication.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施**可扩展认证协议**（**EAP**）—**传输层安全**（**TLS**）基于证书的方法，以确保无线通信的机密性和真实性。
- en: Use WPA2-Enterprise with AES encryption.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用带有AES加密的WPA2-企业版。
- en: Implement an isolated guest wireless network.
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施一个独立的访客无线网络。
- en: Implementing these techniques and controls can help reduce the security risks
    on an enterprise network. In the following section, we will cover the steps we
    need to follow in order to configure and secure a wireless network.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 实施这些技术和控制措施可以帮助减少企业网络上的安全风险。在接下来的部分，我们将介绍配置和保护无线网络所需遵循的步骤。
- en: Configuring wireless security settings to secure your network
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置无线安全设置以保护您的网络
- en: In this section, we'll discuss how to configure your wireless security features
    on your access point and wireless router so that you can secure your network.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论如何在接入点和无线路由器上配置无线安全功能，以便您可以保护您的网络。
- en: For this exercise, I am using a Linksys EA6350 wireless router. Please note
    that all wireless routers and access points have the same features within their
    management interface; however, the **graphical user interface** (**GUI**) for
    each manufacturer and device may vary.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我使用的是Linksys EA6350无线路由器。请注意，所有无线路由器和接入点在其管理界面中具有相同的功能；但是，每个制造商和设备的**图形用户界面**（**GUI**）可能会有所不同。
- en: Let's get started!
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: You'll need to log in to your access point or wireless router.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您需要登录您的接入点或无线路由器。
- en: 'Once logged in, click on the **Wireless** tab within the user interface. Here,
    you''ll be able to change the network name (SSID), set a complex password, set
    a security mode, and broadcast the SSID, as shown in the following screenshot:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，点击用户界面中的**无线**选项卡。在这里，您可以更改网络名称（SSID），设置复杂密码，设置安全模式，并广播SSID，如下图所示：
- en: '![](img/f3b35409-f934-4158-b618-0230245cb37a.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3b35409-f934-4158-b618-0230245cb37a.png)'
- en: 'Using the following guidelines will assist in improving the security posture
    of your wireless network:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下准则将有助于提高无线网络的安全性：
- en: Change the SSID (network name) to something that won't attract prying eyes.
  id: totrans-147
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将SSID（网络名称）更改为不会引起注意的内容。
- en: Hide (broadcast) the SSID.
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 隐藏（广播）SSID。
- en: Create a complex password. If you're having difficulties, try using an online
    password generator.
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个复杂的密码。如果遇到困难，请尝试使用在线密码生成器。
- en: 'Each modern access point and wireless router allows various security modes,
    such as the following:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 每个现代接入点和无线路由器都允许使用各种安全模式，例如以下内容：
- en: '**None**: Disables authentication.'
  id: totrans-151
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无**：禁用认证。'
- en: '**WEP**: Uses the WEP encryption standard.'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WEP**：使用WEP加密标准。'
- en: '**WPA Personal**: Uses the WPA encryption standard and allows you to set a
    **pre-shared key** (**PSK**) on the access point. Therefore, any device that requires
    access to the wireless network will be required to provide the PSK.'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WPA个人**：使用WPA加密标准，并允许您在接入点上设置**预共享密钥**（**PSK**）。因此，任何需要访问无线网络的设备都需要提供PSK。'
- en: '**WPA Enterprise**: This mode applies the WPA encryption standard, but note
    that the access point stores user credentials in WPA Personal. WPA Enterprise
    queries a central **authentication, authorization, and accounting** (**AAA**)
    server to verify user access on the wireless network.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WPA企业**：此模式应用WPA加密标准，但请注意，接入点将用户凭据存储在WPA个人中。WPA企业查询中央**认证、授权和计费**（**AAA**）服务器，以验证用户在无线网络上的访问。'
- en: '**WPA2 Personal**: Uses the WPA2 encryption standard.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WPA2个人**：使用WPA2加密标准。'
- en: '**WPA2 Enterprise**: Uses the WPA2 encryption standard with the AAA server.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WPA2企业**：使用WPA2加密标准与AAA服务器。'
- en: You can choose to disable the SSID broadcast to cloak your network.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以选择禁用SSID广播以隐藏您的网络。
- en: Next, you should see another sub-tab that allows you to configure **MAC filtering**.
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您应该看到另一个子选项卡，允许您配置**MAC过滤**。
- en: 'Enable the MAC filtering feature. Once enabled, you''ll have the option to
    add MAC addresses to an allow or deny list, as shown in the following screenshot:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用MAC过滤功能。一旦启用，您将有选项将MAC地址添加到允许或拒绝列表中，如下面的屏幕截图所示：
- en: '![](img/1d433110-1f30-400c-b9c5-803663dc8e82.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1d433110-1f30-400c-b9c5-803663dc8e82.png)'
- en: 'Lastly, disable the **Wi-Fi Protected Setup** feature, as shown in the following
    screenshot:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，禁用**Wi-Fi Protected Setup**功能，如下面的屏幕截图所示：
- en: '![](img/e46571b8-224c-45b9-8f97-6ceb26f3b28f.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e46571b8-224c-45b9-8f97-6ceb26f3b28f.png)'
- en: WPS has known security vulnerabilities and should not be used in secure environments.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: WPS存在已知的安全漏洞，不应在安全环境中使用。
- en: Having completed this exercise, you are now able to configure and set up a wireless
    network. In the next section, we will look at the essentials of exploiting perimeter
    systems.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了这个练习，现在您可以配置和设置无线网络。在下一节中，我们将看看如何利用外围系统的基本要点。
- en: Exploiting vulnerable perimeter systems with Metasploit
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用Metasploit攻击易受攻击的外围系统
- en: Exploiting target systems on a network can sometimes be a challenging task.
    Exploits are simply pieces of code that are designed to take advantage of a security
    vulnerability (weakness). In [Chapter 5](474024a2-84fc-4fb6-b1b7-bd64ce91ef0c.xhtml),
    *Passive Information Gathering*, [Chapter 6](a7554e9e-076d-45b8-b0fa-3b02ac270e24.xhtml),
    *Active Information Gathering*, and [Chapter 7](075f58ca-ff2a-48c7-9b90-17ddd4e408c9.xhtml),
    *Working with Vulnerability Scanners*, we took a n in-depth look at establishing
    security flaws in target systems using various tools such as Nmap and Nessus.
    In this section, we are going to leverage the information and skill set we have
    developed thus far and perform exploitation using the Metasploit framework.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络上利用目标系统有时可能是一项具有挑战性的任务。利用程序只是设计用来利用安全漏洞（弱点）的代码片段。在[第5章](474024a2-84fc-4fb6-b1b7-bd64ce91ef0c.xhtml)中，*被动信息收集*，[第6章](a7554e9e-076d-45b8-b0fa-3b02ac270e24.xhtml)中，*主动信息收集*，和[第7章](075f58ca-ff2a-48c7-9b90-17ddd4e408c9.xhtml)中，*使用漏洞扫描器*，我们深入研究了使用各种工具如Nmap和Nessus在目标系统中建立安全漏洞。在本节中，我们将利用迄今为止已经开发的信息和技能，并使用Metasploit框架进行利用。
- en: 'During this exercise, we''ll be using our Kali Linux machine as the attacker,
    and the Metasploitable machine as the target. Let''s get started:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 在本练习中，我们将使用我们的Kali Linux机器作为攻击者，Metasploitable机器作为目标。让我们开始吧：
- en: 'Let''s perform a **service version scan** on the target using Nmap. This will
    help us to determine the ports, protocols, and service versions that are running.
    Execute the **`nmap -sV <target IP addr>`** command:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们使用Nmap对目标进行**服务版本扫描**。这将帮助我们确定正在运行的端口、协议和服务版本。执行**`nmap -sV <目标IP地址>`**命令：
- en: '![](img/80890eef-14a0-427b-8839-8c3bd729cfb3.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/80890eef-14a0-427b-8839-8c3bd729cfb3.png)'
- en: As we can see, there are many services on the target.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，目标上有许多服务。
- en: 'Start the **Metasploit** framework by enabling the **PostgreSQL** database
    service. Then, initialize the Metasploit framework and execute the following commands
    within a Terminal window:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过启用**PostgreSQL**数据库服务来启动**Metasploit**框架。然后，在终端窗口内初始化Metasploit框架并执行以下命令：
- en: '[PRE11]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: The Metasploit framework should take a minute or two to initialize. When it's
    ready, you'll be presented with a fun welcome banner and the **command-line interface**
    (**CLI**).
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit框架应该需要一两分钟来初始化。当准备好时，您将看到一个有趣的欢迎横幅和**命令行界面**（**CLI**）。
- en: Based on our Nmap results, port `21` is open and is running the **File Transfer
    Protocol** (**FTP**). By performing the service version scan, we are able to determine
    whether it's running a **vsftpd 2.3.4** daemon. On your Metasploit interface,
    you can search for modules (scanners, exploits, and so on) using the `search`
    command, followed by a keyword or string.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们的Nmap结果，端口`21`是开放的，并且正在运行**文件传输协议**（**FTP**）。通过执行服务版本扫描，我们能够确定它是否正在运行**vsftpd
    2.3.4**守护程序。在您的Metasploit界面上，您可以使用`search`命令，后跟关键字或字符串，搜索模块（扫描程序，利用程序等）。
- en: 'On your Metasploit console, search for any useful modules that may help us
    compromise the FTP server on the target machine by running the following command:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的Metasploit控制台上，通过运行以下命令搜索任何有用的模块，以帮助我们破坏目标机器上的FTP服务器：
- en: '[PRE12]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Metasploit will provide us with a list of results that meet the search criteria.
    You should see the console return a Unix-based exploit called `vsftpd_234_backdoor`.
    To use this exploit on our target, use the following sequence of commands:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Metasploit将为我们提供符合搜索条件的结果列表。您应该看到控制台返回一个名为`vsftpd_234_backdoor`的基于Unix的利用。要在我们的目标上使用此利用，使用以下一系列命令：
- en: '[PRE13]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Within my lab environment, the target is using the `10.10.10.100` IP address.
    Please ensure that you verify the IP address of your target device before setting
    the `RHOSTS` (remote hosts) value on Metasploit. Additionally, there are many
    modules that will require you to set a remote target. You can use the `setg` command
    to set the target globally.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在我的实验室环境中，目标使用`10.10.10.100` IP地址。在设置`RHOSTS`（远程主机）值之前，请确保验证目标设备的IP地址。此外，许多模块将要求您设置远程目标。您可以使用`setg`命令全局设置目标。
- en: 'Execute the `exploit` command. Metasploit will attempt to push the exploit
    code to the target. Once successful, a shell is created. A shell allows us to
    remotely perform commands from our attacker machine on the target, as shown in
    the following screenshot:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行`exploit`命令。Metasploit将尝试将利用代码推送到目标。一旦成功，将创建一个shell。shell允许我们从攻击者机器上远程执行命令到目标上，如下图所示：
- en: '![](img/3a1e0848-b25b-4f21-843c-94d39b60b94b.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3a1e0848-b25b-4f21-843c-94d39b60b94b.png)'
- en: 'At this point, any command that''s executed on the console will be executed
    on the target. Execute the `uname -a` command to verify and print the system information:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一点上，任何在控制台上执行的命令都将在目标上执行。执行`uname -a`命令来验证并打印系统信息：
- en: '![](img/481363eb-6936-42b7-89f4-7baeac5cad09.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/481363eb-6936-42b7-89f4-7baeac5cad09.png)'
- en: Often, when performing a simple port scan on both public-facing and internal
    systems, port `23` is usually open for remote management. However, port `23` is
    the default port that's used for the Telnet protocol. Telnet is an insecure protocol
    that allows a user to remotely access a machine over a network and all traffic
    passing between the user. Any Telnet-enabled device is unencrypted and is susceptible
    to MITM attacks where an attacker can capture user credentials quite easily.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，在对公共和内部系统进行简单的端口扫描时，端口`23`通常是用于远程管理的开放端口。但是，端口`23`是Telnet协议使用的默认端口。Telnet是一种不安全的协议，允许用户通过网络远程访问计算机，并且所有通过用户之间传递的流量都是未加密的。任何启用Telnet的设备都容易受到中间人攻击，攻击者可以轻松捕获用户凭据。
- en: 'Let''s use the `search` command to find a useful module to check for valid
    user credentials on a Telnet-enabled device. To begin, use the following command:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们使用`search`命令查找一个有用的模块，以检查Telnet启用设备上的有效用户凭据。首先，使用以下命令：
- en: '[PRE14]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'As usual, a list of results that comply with the search criteria will be presented
    on the console. For this exercise, we are going to use a specific scanner to check
    for validated user accounts:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通常，将与搜索条件相符的结果列表呈现在控制台上。在这个练习中，我们将使用特定的扫描程序来检查验证的用户帐户：
- en: '[PRE15]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Next, set your remote host(s):'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，设置您的远程主机：
- en: '[PRE16]'
  id: totrans-190
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'If you have a word list containing different usernames, use the following command
    (specify the file path):'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您有包含不同用户名的单词列表，请使用以下命令（指定文件路径）：
- en: '[PRE17]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Optionally, if you have a password list, use the following command:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有密码列表，可以选择使用以下命令：
- en: '[PRE18]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'However, if you do not have any word lists, that''s OK. You can specify an
    individual username and password using the following commands:'
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 但是，如果您没有任何单词列表，也没关系。您可以使用以下命令指定单个用户名和密码：
- en: '[PRE19]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Once you''re done, use the `run` command to execute the `auxiliary` module:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，使用`run`命令执行`auxiliary`模块：
- en: '[PRE20]'
  id: totrans-198
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Be sure to wait a few seconds for the scanner to start. Sometimes, you won't
    see results appear immediately on the screen.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 确保等待几秒钟让扫描器启动。有时，您不会立即在屏幕上看到结果出现。
- en: We use the `run` command to execute an `auxiliary` module, and the `exploit`
    command to execute an exploit within Metasploit.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用`run`命令执行`auxiliary`模块，使用`exploit`命令在Metasploit中执行利用。
- en: 'The following screenshot indicates that a valid username and password were
    found:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图表明找到了有效的用户名和密码：
- en: '![](img/9ee80d39-2897-4f46-937d-54fbad916663.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9ee80d39-2897-4f46-937d-54fbad916663.png)'
- en: 'As we''ve already mentioned, you can use **crunch** to generate custom word
    lists to your liking. Additionally, a set of word lists is located in the `/usr/share`
    directory in Kali Linux:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们已经提到的，您可以使用**crunch**生成符合您喜好的自定义单词列表。此外，在Kali Linux的`/usr/share`目录中有一组单词列表：
- en: '![](img/586929c6-bddc-4a2c-a4a0-0aa19aa9f797.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/586929c6-bddc-4a2c-a4a0-0aa19aa9f797.png)'
- en: Remember that, when performing a password attack or attempting to discover valid
    user credentials, the task can be very time-consuming and may not always be in
    your favor. However, this illustrates the importance of the reconnaissance (information-gathering)
    phase of penetration testing. The more details we are able to gather about the
    target, the more we'll be able to narrow down a wide range of attacks to specific
    ones for a particular system or network infrastructure.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，在进行密码攻击或尝试发现有效的用户凭据时，任务可能非常耗时，而且可能并不总是对您有利。然而，这说明了渗透测试中侦察（信息收集）阶段的重要性。我们能够收集有关目标的更多细节，我们就能够将广泛的攻击范围缩小到特定系统或网络基础设施的特定攻击。
- en: Next, we are going to attempt exploitation and gain access to a target system,
    that is, Microsoft Windows.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将尝试利用并访问目标系统，即Microsoft Windows。
- en: EternalBlue exploitation
  id: totrans-207
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 永恒之蓝利用
- en: 'Let''s attempt to exploit a Windows system and get a shell. For this exercise,
    a Windows 7, 8, 8.1, or 10 operating system can be used as the target/victim machine.
    The following is a diagram of my lab topology displaying the IP assignments for
    the attacker and victim machines:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试利用Windows系统并获取shell。对于这个练习，可以使用Windows 7、8、8.1或10操作系统作为目标/受害机器。以下是我实验室拓扑的图表，显示了攻击者和受害者机器的IP分配：
- en: '![](img/67e797b6-45f1-407b-b863-2accfe1856d8.png)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![](img/67e797b6-45f1-407b-b863-2accfe1856d8.png)'
- en: 'If your IP scheme is different, ensure that you record the IP addresses of
    each machine before continuing, as you''ll need them. Let''s get started:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的IP方案不同，请确保在继续之前记录每台机器的IP地址，因为您将需要它们。让我们开始吧：
- en: 'First, let''s attempt to run a vulnerability scan on the target Windows system.
    The following snippet is the result of using the `nmap --script vuln 10.10.10.19`
    command:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，让我们尝试在目标Windows系统上运行漏洞扫描。以下代码片段是使用`nmap --script vuln 10.10.10.19`命令的结果：
- en: '![](img/a0b55f75-b93e-4433-8764-caf919d82e4b.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a0b55f75-b93e-4433-8764-caf919d82e4b.png)'
- en: The highlighted area indicates that our target is vulnerable to a remote code
    execution attack for the Microsoft security bulletin ID `ms17-010`, known as **EternalBlue**.
    Further research into this vulnerability tells us that the target is vulnerable
    to exploits by WannaCry, Petya, and other malware.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 突出显示的区域表明我们的目标对于Microsoft安全公告ID `ms17-010`，也就是**EternalBlue**，存在远程代码执行攻击的漏洞。对这个漏洞的进一步研究告诉我们，目标容易受到WannaCry、Petya和其他恶意软件的利用。
- en: The EternalBlue vulnerability allows an attacker to perform remote code execution
    on a Microsoft SMBv1 server.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: EternalBlue漏洞允许攻击者对Microsoft SMBv1服务器执行远程代码执行。
- en: 'Within the **Metasploit Framework** (**MSF**) console, use the `search ms17-010`
    command to filter the results for EternalBlue exploits, as shown in the following
    screenshot:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**Metasploit Framework**（**MSF**）控制台中，使用`search ms17-010`命令来过滤EternalBlue漏洞的结果，如下面的屏幕截图所示：
- en: '![](img/f11fbd64-e7a5-47d2-8c1e-dacc5ca11f97.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f11fbd64-e7a5-47d2-8c1e-dacc5ca11f97.png)'
- en: 'The MSF console returned a few results. We will use the `ms-17-010_eternalblue`
    exploit and the **Meterpreter reverse TCP payload** to attempt a reverse connection
    (reverse shell) from the victim''s machine back to our attacker machine. To achieve
    this task, use the following commands, as shown in the following screenshot:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MSF控制台返回了一些结果。我们将使用`ms-17-010_eternalblue`漏洞和**Meterpreter反向TCP有效载荷**来尝试从受害者的机器返回到我们的攻击者机器的反向连接（反向shell）。为了完成这个任务，使用以下命令，如下面的屏幕截图所示：
- en: '![](img/f2b9dc69-f563-4fd6-ab2e-9032a1ec1f9b.png)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f2b9dc69-f563-4fd6-ab2e-9032a1ec1f9b.png)'
- en: After executing the exploit, you'll now have a `meterpreter` shell. The `meterpreter`
    shell will allow you to communicate seamlessly between your attacker machine and
    the victim's operating system.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行漏洞利用后，您现在将拥有一个`meterpreter` shell。`meterpreter` shell将允许您在攻击者机器和受害者操作系统之间无缝通信。
- en: According to SANS ([www.sans.org](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=2ahUKEwjjwcul2N3iAhUpTt8KHZ-9CJUQFjABegQICxAE&url=https%3A%2F%2Fwww.sans.org%2Fsecurity-resources%2Fsec560%2Fmisc_tools_sheet_v1.pdf&usg=AOvVaw0RrqNTtD6wrNTYHi-YFz2N)),
    Meterpreter is a payload within the Metasploit framework that provides control
    over an exploited target system, by running as a DLL that's been loaded inside
    any process on a target machine.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 根据SANS（[www.sans.org](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&uact=8&ved=2ahUKEwjjwcul2N3iAhUpTt8KHZ-9CJUQFjABegQICxAE&url=https%3A%2F%2Fwww.sans.org%2Fsecurity-resources%2Fsec560%2Fmisc_tools_sheet_v1.pdf&usg=AOvVaw0RrqNTtD6wrNTYHi-YFz2N))，Meterpreter是Metasploit框架中的有效载荷，它通过作为已加载到目标机器上的任何进程内的DLL来运行，从而对被利用的目标系统进行控制。
- en: 'Using the `hashdump` command, you''ll be able to retrieve the password hashes
    of all locally stored user accounts on the victim''s machine:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`hashdump`命令，您将能够检索受害者机器上所有本地存储的用户帐户的密码哈希：
- en: '![](img/c78932a7-61ec-4eb4-9c66-7732adac0843.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c78932a7-61ec-4eb4-9c66-7732adac0843.png)'
- en: The usernames of the accounts are always displayed in plain text, as shown in
    the preceding screenshot.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 帐户的用户名始终以明文显示，如前面的屏幕截图所示。
- en: 'The `hashdump` command within Meterpreter is used to retrieve user accounts
    within a Windows system. A user account is made up of three components: the **security
    ID** (**SID**), username, and password. The password is converted into an NTLM
    hash and stored in newer versions of Windows. In an older version of Windows,
    such as Windows XP, the password is stored using the **LAN Manager** (**LM**).
    Therefore, the Windows operating system never actually stores the password for
    a user account; it stores the hash value instead.'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 在Meterpreter中的`hashdump`命令用于检索Windows系统中的用户帐户。用户帐户由三个组件组成：**安全ID**（**SID**）、用户名和密码。密码被转换为NTLM哈希并存储在较新版本的Windows中。在较旧版本的Windows中，如Windows
    XP，密码使用**LAN Manager**（**LM**）存储。因此，Windows操作系统实际上从不存储用户帐户的密码；它存储哈希值。
- en: 'The following are some useful commands that we can use within the `meterpreter`
    shell:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们可以在`meterpreter` shell中使用的一些有用的命令：
- en: '`screenshot`: Captures a screenshot of the victim''s desktop'
  id: totrans-226
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`screenshot`：捕获受害者桌面的屏幕截图'
- en: '`getsystem`: Attempts an escalation of privileges on the target'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`getsystem`：尝试提升目标的特权'
- en: '`clearev`: Clears event logs'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`clearev`：清除事件日志'
- en: '`sysinfo`: Gathers information about the target'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sysinfo`：收集有关目标的信息'
- en: 'To obtain a shell on the victim''s machine, type `shell` and press *Enter*:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在受害者的机器上获取shell，请键入`shell`并按*Enter*：
- en: '![](img/a2eac98e-3c3b-4867-abcb-a657577493bb.png)'
  id: totrans-231
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a2eac98e-3c3b-4867-abcb-a657577493bb.png)'
- en: You'll now have a Windows Command Prompt interface on your Kali Linux machine.
    Now you'll be able to execute Windows commands remotely.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您将在Kali Linux机器上拥有Windows命令提示符界面。现在您将能够远程执行Windows命令。
- en: Now that we have covered exploitation briefly, let's gain access using remote
    access systems.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经简要介绍了利用，让我们使用远程访问系统获取访问权限。
- en: Penetration testing Citrix and RDP-based remote access systems
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 渗透测试Citrix和基于RDP的远程访问系统
- en: 'In this section, we will take a look at performing penetration testing on two
    popular remote access systems in most IT environments: Citrix and Microsoft''s
    **Remote Desktop Protocol** (**RDP**).'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将研究在大多数IT环境中执行对两种流行的远程访问系统Citrix和Microsoft的**远程桌面协议**（**RDP**）的渗透测试。
- en: Let's take a deep dive into Citrix and RDP penetration testing and gaining access.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入研究Citrix和RDP的渗透测试和获取访问权限。
- en: Citrix penetration testing
  id: totrans-237
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Citrix渗透测试
- en: Most of us have probably heard about Microsoft's RDP, which allows a user to
    remotely access another Windows machine across a network within a **graphical
    user interface** (**GUI**). Citrix is like RDP, but a lot better in terms of performance
    while providing an interactive user interface.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 我们中的大多数人可能已经听说过Microsoft的RDP，它允许用户在网络中远程访问另一台Windows机器，并提供了一个**图形用户界面**（**GUI**）。Citrix就像RDP，但在性能方面更好，同时提供交互式用户界面。
- en: 'Many organizations use Citrix services and products to efficiently distribute
    access to applications within an organization. An example of using Citrix is running
    applications within an organization''s private data center. Using Citrix, IT administrators
    can provide access to the users of those applications. Each user would require
    a modern web browser to access a virtual desktop interface or centrally access
    applications in the data center. This method eliminates the need to install software
    applications on each employee''s computer. Let''s get started:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 许多组织使用Citrix服务和产品有效地在组织内分发对应用程序的访问。使用Citrix的一个例子是在组织的私人数据中心内运行应用程序。使用Citrix，IT管理员可以为这些应用程序的用户提供访问权限。每个用户都需要一个现代的Web浏览器来访问虚拟桌面界面或在数据中心中集中访问应用程序。这种方法消除了在每个员工的计算机上安装软件应用程序的需要。让我们开始吧：
- en: 'We can use the Nmap NSE script, `citrix-enum-apps`, to discover and extract
    applications. The following is an example of using the script in Nmap:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以使用Nmap NSE脚本`citrix-enum-apps`来发现和提取应用程序。以下是在Nmap中使用脚本的示例：
- en: '[PRE21]'
  id: totrans-241
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: Additionally, you can specify `-p 1604` since the Citrix WinFrame uses both
    TCP and UDP port `1604`.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，您可以指定`-p 1604`，因为Citrix WinFrame使用TCP和UDP端口`1604`。
- en: 'Once you''ve found a Citrix machine, you can attempt to connect to published
    applications by logging on using the following URL:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到Citrix机器后，您可以尝试使用以下URL登录以连接到发布的应用程序：
- en: '[PRE22]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: Once you're logged in, click on an application to download a `launch.ica` file
    to your desktop. Once the file has been downloaded, open the file using Notepad
    or another text editor.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，单击一个应用程序以下载`launch.ica`文件到您的桌面。下载完成后，使用记事本或其他文本编辑器打开文件。
- en: Look for a parameter called `InitialProgram` that points to the `LIFE UAT` application.
    Change the parameter to `InitialProgram=explorer.exe` and save the file.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 寻找一个名为`InitialProgram`的参数，指向`LIFE UAT`应用程序。将参数更改为`InitialProgram=explorer.exe`并保存文件。
- en: Double-click on the newly saved file to open the explorer for the Citrix server.
    This will provide us with the capability to read the `lan/auth/login.aspx` file
    and other sensitive files.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击新保存的文件以打开Citrix服务器的资源管理器。这将使我们能够读取`lan/auth/login.aspx`文件和其他敏感文件。
- en: Once you have a Citrix Terminal, the environment may be restricted (blank screen).
    Open **Task Manager** and click on **File** | **New Task**. The new task window
    will open. Type `explorer.exe` and click **OK**.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你有了Citrix终端，环境可能会受限（空白屏幕）。打开**任务管理器**，然后单击**文件** | **新任务**。新任务窗口将打开。输入`explorer.exe`，然后单击**确定**。
- en: Within Windows Explorer, navigate to the directory holding all `.aspx` files
    to confirm you are on the Citrix server.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Windows资源管理器中，导航到包含所有`.aspx`文件的目录，以确认您位于Citrix服务器上。
- en: This technique allows a user to break out of the **Citrix** virtualized environment.
    In the next section, we will perform penetration testing on Microsoft RDP and
    attempt to gain access.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术允许用户跳出**Citrix**虚拟化环境。在下一节中，我们将对Microsoft RDP执行渗透测试并尝试获取访问权限。
- en: Now that you have completed this section, let's attempt to exploit one of the
    most popular remote access services in an enterprise environment, Microsoft's
    RDP.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经完成了本节，让我们尝试利用企业环境中最流行的远程访问服务之一，Microsoft的RDP。
- en: Breaking into RDP
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: RDP入侵
- en: Microsoft's RDP provides a GUI for the user to establish a connection to a Windows-based
    system over the network. Quite often, system administrators enable the RDP service
    on their client and server machines in an organization for easy access. With RDP
    enabled on a device, a system administrator does not need to physically go to
    the geographic location of a system to check its configurations or make adjustments
    to the operating system. All they have to do is simply log on using RDP. This
    protocol makes the job of IT professionals a bit easier and more efficient.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft的RDP为用户提供了一个图形界面，用于在网络上与基于Windows的系统建立连接。很多时候，系统管理员在组织中的客户端和服务器机器上启用RDP服务，以便轻松访问。启用设备上的RDP后，系统管理员无需亲自前往系统的地理位置来检查其配置或对操作系统进行调整。他们只需使用RDP登录即可。这种协议使IT专业人员的工作变得更加简单和高效。
- en: 'The protocol was designed for remote access. However, as a penetration tester,
    we can take advantage of systems that have RDP enabled by attempting to discover
    valid user credentials for target systems. Let''s get started:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 该协议是为远程访问而设计的。但是，作为渗透测试人员，我们可以利用启用了RDP的系统，尝试发现目标系统的有效用户凭据。让我们开始吧：
- en: 'To begin, we can use Nmap to scan a network while searching for any device
    that has RDP enabled. RDP uses port `3389` on Windows, and so we can use the following
    Nmap command to scan a target:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们可以使用Nmap扫描网络，同时搜索启用了RDP的任何设备。Windows上的RDP使用端口`3389`，因此我们可以使用以下Nmap命令来扫描目标：
- en: '[PRE23]'
  id: totrans-256
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following screenshot indicates a system that has port `3389` open and is
    running `Microsoft Terminal Services`:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了一个打开端口`3389`并运行`Microsoft Terminal Services`的系统：
- en: '![](img/098e69ff-fbd1-483b-b980-d7cd80b77747.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![](img/098e69ff-fbd1-483b-b980-d7cd80b77747.png)'
- en: 'Now that we have found a suitable target, we can perform a dictionary attack
    on the live target. Using **Ncrack** (an offline password-cracking tool), we can
    use a list of possible usernames (`usernames.txt`) and passwords (`custom_list.txt`),
    as shown in the following screenshot:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经找到了一个合适的目标，我们可以对活动目标进行字典攻击。使用**Ncrack**（一种离线密码破解工具），我们可以使用可能的用户名列表（`usernames.txt`）和密码列表（`custom_list.txt`），如下面的屏幕截图所示：
- en: '![](img/d3968035-9976-4a54-8adb-420ac02a95ad.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d3968035-9976-4a54-8adb-420ac02a95ad.png)'
- en: 'The following are descriptions of each of the switches used in the preceding
    snippet:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在前面片段中使用的每个开关的描述：
- en: '`-v`: Increases the verbosity of the output on the Terminal.'
  id: totrans-262
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-v`：增加终端输出的详细程度。'
- en: '`-T (0-5)`: Adjusts the timing of the attack. The higher the number, the faster
    the attack is.'
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-T (0-5)`：调整攻击的时间。数字越大，攻击速度越快。'
- en: '`-U`: Allows you to specify a list of usernames.'
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-U`：允许您指定用户名列表。'
- en: '`--user`: Allows you to specify usernames, each separated by a comma.'
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--user`：允许您指定用户名，每个用逗号分隔。'
- en: '`-P`: Allows you to specify a list of passwords.'
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-P`：允许您指定密码列表。'
- en: '`--pass`: Allows you to specify passwords, each separated by a comma.'
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--pass`：允许您指定密码，每个用逗号分隔。'
- en: '`service://host`: Ncrack uses this format to specify a service and a target
    device.'
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`service://host`：Ncrack使用此格式来指定服务和目标设备。'
- en: As you saw, **Ncrack** was able to find a valid username and password combination
    for the target (`10.10.10.19`). Thus, having obtained the user's credentials,
    it's now simple to use them to our advantage.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，**Ncrack**能够找到目标（`10.10.10.19`）的有效用户名和密码组合。因此，一旦获得了用户的凭据，现在就可以简单地利用它们来使我们受益。
- en: At this point, once you've obtained a valid user account, the next step is to
    actually log in to the target using the RDP and other network services (Telnet,
    SSH, VNC, and so on) you found running on the target system.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这一点上，一旦您获得了有效的用户帐户，下一步就是实际登录到目标系统，使用您在目标系统上找到的RDP和其他网络服务（Telnet、SSH、VNC等）。
- en: 'Another **online password cracking** tool we could use is **Hydra**. To use
    Hydra to perform the same task we just did with Ncrack, you can execute the following
    command:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个**在线密码破解**工具我们可以使用是**Hydra**。要使用Hydra执行与Ncrack相同的任务，可以执行以下命令：
- en: '[PRE24]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Note that the RDP module within Hydra may not work on modern versions of Windows.
    Further information on Hydra can be found on its official GitHub repository at
    [https://github.com/vanhauser-thc/thc-hydra](https://github.com/vanhauser-thc/thc-hydra).
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，Hydra中的RDP模块可能无法在现代Windows版本上工作。有关Hydra的更多信息，请访问其官方GitHub存储库[https://github.com/vanhauser-thc/thc-hydra](https://github.com/vanhauser-thc/thc-hydra)。
- en: 'Upon receiving a `meterpreter` shell in **Metasploit**, the following are some
    useful commands to help you capture keystrokes and the victim''s screen:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 在**Metasploit**中收到`meterpreter` shell后，以下是一些有用的命令，可以帮助您捕获按键和受害者的屏幕：
- en: '`screenshare`: This command is used to watch the remote victim''s desktop in
    real time.'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`screenshare`：此命令用于实时观看远程受害者的桌面。'
- en: '`screenshot`: Takes a picture of the victim''s desktop.'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`screenshot`：拍摄受害者的桌面照片。'
- en: '`keyscan_start`: Starts keylogging using Meterpreter.'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`keyscan_start`：使用Meterpreter开始键盘记录。'
- en: '`keyscan_stop`: Stops keylogging.'
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`keyscan_stop`：停止键盘记录。'
- en: '`keyscan_dump`: Produces a dump of the keystrokes captured.'
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`keyscan_dump`：生成捕获的按键的转储。'
- en: 'The following screenshot shows a live screen view of a victim''s desktop after
    executing the `screenshare` command in Meterpreter:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了在Meterpreter中执行`screenshare`命令后，受害者桌面的实时视图：
- en: '![](img/1be861d2-4175-4fac-abdb-d20fb1aa743c.png)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1be861d2-4175-4fac-abdb-d20fb1aa743c.png)'
- en: As you can see, it's quite scary what a real hacker can do once they have gained
    access to a network or system.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，一旦真正的黑客进入网络或系统，他们可以做的事情是相当可怕的。
- en: You're now able to detect and exploit the EternalBlue vulnerability in the Windows
    operating system. Next, we'll take a look at leveraging user credentials for our
    benefit.
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在可以检测和利用Windows操作系统中的EternalBlue漏洞。接下来，我们将看看如何利用用户凭据来使我们受益。
- en: Leveraging user credentials
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用用户凭据
- en: 'Now that we have obtained user credentials for a target Microsoft Windows system,
    let''s attempt to connect remotely. For this exercise, we are going to use the
    **rdesktop** client, which is already pre-installed within Kali Linux. Let''s
    get started:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经为目标Microsoft Windows系统获得了用户凭据，让我们尝试远程连接。在这个练习中，我们将使用已经预先安装在Kali Linux中的**rdesktop**客户端。让我们开始：
- en: '**rdesktop** is an open source protocol that''s used for remote administration,
    similarly to Microsoft''s RDP.'
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: '**rdesktop**是一种用于远程管理的开源协议，类似于Microsoft的RDP。'
- en: 'To use rdesktop, open a new Terminal window and use the following syntax:'
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用rdesktop，请打开一个新的终端窗口，并使用以下语法：
- en: '[PRE25]'
  id: totrans-288
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The following snippet is an example of using the rdesktop tool with all the
    necessary details:'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 以下片段是使用rdesktop工具的示例，包括所有必要的细节：
- en: '![](img/30161b19-e9e4-42b8-b3dc-e58739d66993.png)'
  id: totrans-290
  prefs: []
  type: TYPE_IMG
  zh: '![](img/30161b19-e9e4-42b8-b3dc-e58739d66993.png)'
- en: 'Once you''ve executed the command, rdesktop will attempt to establish a remote
    connection to the target device. Once successful, rdesktop will provide a new
    window with the target''s user interface, as shown in the following screenshot:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您执行了命令，rdesktop将尝试与目标设备建立远程连接。一旦成功，rdesktop将提供一个新窗口，显示目标的用户界面，如下面的屏幕截图所示：
- en: '![](img/85f8e609-6326-462d-85c9-f59daa8037da.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![](img/85f8e609-6326-462d-85c9-f59daa8037da.png)'
- en: At this point, we have successfully gained entry to the target operating system
    and have control over it.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一点上，我们已经成功进入了目标操作系统，并对其进行了控制。
- en: 'If your attacker system does not have the rdesktop tool, it can be found at
    its official GitHub repository: [https://github.com/rdesktop/rdesktop](https://github.com/rdesktop/rdesktop).
    For further information on rdesktop, please go to its official website at [www.rdesktop.org](http://www.rdesktop.org).'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的攻击者系统没有rdesktop工具，可以在其官方GitHub存储库找到：[https://github.com/rdesktop/rdesktop](https://github.com/rdesktop/rdesktop)。有关rdesktop的更多信息，请访问其官方网站[www.rdesktop.org](http://www.rdesktop.org)。
- en: As you saw, we can simply use native tools within Kali Linux with the victim's
    credentials to access resources, systems, and networks during a penetration test.
    In the next section, we'll dive into network implants.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，我们可以简单地使用Kali Linux中的本机工具和受害者的凭据来在渗透测试期间访问资源、系统和网络。在下一节中，我们将深入探讨网络植入物。
- en: Plugging PWN boxes and other tools directly into a network
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 直接将PWN盒和其他工具插入网络
- en: 'Quite often, penetration testers tend to plant a tiny, special box within an
    organization''s network. These are known as network implants, and are sometimes
    referred to as PWN boxes. Network implants allow an attacker to establish a connection
    from the internet to a corporate network, by connecting to the implant tool as
    shown in the following screenshot:'
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试人员经常倾向于在组织的网络中放置一个微小的特殊盒子。这些被称为网络植入物，有时也被称为PWN盒。网络植入物允许攻击者通过连接到植入工具来建立从互联网到企业网络的连接，如下面的屏幕截图所示：
- en: '![](img/cd9bf0fa-5a58-490d-8282-98b8edab69b0.png)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cd9bf0fa-5a58-490d-8282-98b8edab69b0.png)'
- en: 'The following is a photo of a network implant that can be inserted to intercept
    network traffic. This device is capable of capturing live packets and storing
    them on a USB flash drive. It has remote access capabilities that can allow a
    penetration tester or system administrator to remotely access the device, thereby
    allowing the user to remotely perform various tasks on the network. This little
    device is called the **Packet Squirrel**, and was created by Hak5:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个可以插入以拦截网络流量的网络植入物的照片。这个设备能够捕获实时数据包并将它们存储在USB闪存驱动器上。它具有远程访问功能，可以允许渗透测试人员或系统管理员远程访问设备，从而允许用户在网络上远程执行各种任务。这个小设备被称为**Packet
    Squirrel**，由Hak5创建：
- en: '![](img/951bc163-942d-4e8b-a238-a1bc8216f1cc.png)'
  id: totrans-300
  prefs: []
  type: TYPE_IMG
  zh: '![](img/951bc163-942d-4e8b-a238-a1bc8216f1cc.png)'
- en: 'Additionally, there''s another device that looks like a USB Ethernet adapter.
    This so-called Ethernet adapter is also another network implant that allows a
    penetration tester to remotely access a network and perform various tasks, such
    as scanning, exploitation, and attack pivoting. This little device is called the
    **LAN Turtle**, another amazing piece of gear that was produced by Hak5:'
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还有另一种看起来像USB以太网适配器的设备。这个所谓的以太网适配器也是另一种网络植入物，可以让渗透测试人员远程访问网络并执行各种任务，如扫描、利用和攻击枢纽。这个小设备被称为**LAN
    Turtle**，又是Hak5生产的另一件令人惊叹的装备：
- en: '![](img/4235dc6c-a9b6-4c4b-a3f1-358125036ff8.png)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4235dc6c-a9b6-4c4b-a3f1-358125036ff8.png)'
- en: 'Over the past few years, the **Raspberry Pi** ([www.raspberrypi.org](http://www.raspberrypi.org))
    was introduced to the world of computing. Today, many institutions, organizations,
    and households use the Raspberry Pi for many projects, from learning, to programming,
    to home security monitoring systems. The possibilities are endless with this little
    credit card-sized computer:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去的几年里，**Raspberry Pi**（[www.raspberrypi.org](http://www.raspberrypi.org)）被引入到计算机世界。今天，许多机构、组织和家庭都在许多项目中使用Raspberry
    Pi，从学习、编程到家庭安全监控系统。这个信用卡大小的小型计算机有无限的可能性：
- en: '![](img/d9b80e5f-db68-40d0-941f-b245c29b6bcb.png)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d9b80e5f-db68-40d0-941f-b245c29b6bcb.png)'
- en: However, there are many operating systems that are currently available to the
    Raspberry Pi, one of which is the Kali Linux ARM image ([https://www.offensive-security.com/kali-linux-arm-images/](https://www.offensive-security.com/kali-linux-arm-images/)).
    Imagine the possibilities of loading Kali Linux into this portable device, planting
    it into an organization's network, and setting up remote access. The results of
    such a scenario would be grave if it were perpetrated by a real attacker, but
    a penetration tester would be able to help their client a great deal by showing
    them how vulnerable they are to attacks launched from within the internal network.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，目前有许多操作系统可用于Raspberry Pi，其中之一是Kali Linux ARM镜像（[https://www.offensive-security.com/kali-linux-arm-images/](https://www.offensive-security.com/kali-linux-arm-images/)）。想象一下将Kali
    Linux加载到这个便携设备中，将其植入到组织的网络中，并设置远程访问的可能性。如果这种情况是由真正的攻击者实施的，结果将是严重的，但渗透测试人员可以通过向客户展示他们对内部网络发起的攻击有多么脆弱来帮助他们很多。
- en: There are so many devices and gadgets that facilitate penetration testing that
    the possibilities are limitless. In the next section, we will be covering the
    fundamentals of NAC.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 有很多设备和小工具可以促进渗透测试，可能性是无限的。在下一节中，我们将介绍NAC的基础知识。
- en: Bypassing NAC
  id: totrans-307
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 绕过NAC
- en: NAC is a system that's designed to control access and ensure compliance. It
    uses a set of processes and technologies that are focused on controlling who and
    what is able to access a network and its resources. NAC does this by authorizing
    devices that have a level of compliance to operate on a corporate network.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: NAC是一个旨在控制访问和确保合规性的系统。它使用一套过程和技术，专注于控制谁和什么能够访问网络及其资源。NAC通过授权符合一定合规标准的设备在企业网络上运行来实现这一点。
- en: Once a device is connected, the NAC server is able to profile and check whether
    the connected device has met the standard of compliance before allowing access
    to the network resources, security policies, and controls, which are configured
    to ensure that there is some form of restriction that prevents non-compliant devices
    from obtaining network access.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦设备连接，NAC服务器就能够对设备进行配置文件和检查，以确定连接的设备是否符合合规标准，然后允许访问网络资源、安全策略和控制，这些都是配置的，以确保有一定形式的限制，防止不符合规定的设备获取网络访问权限。
- en: 'IEEE 802.1x is the NAC standard for both LAN (wired) and WLAN (wireless) networks.
    Within an 802.1x network, there are three main components:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: IEEE 802.1x是LAN（有线）和WLAN（无线）网络的NAC标准。在802.1x网络中，有三个主要组件：
- en: '**Authentication server**: The authentication server is the device that handles
    **authentication, authorization, and accounting** (**AAA**) services on a network.
    This is where user accounts are created and stored, and where privileges and policies
    are applied. The authentication server runs either **Remote Authentication Dial-In
    User Service** (**RADIUS**) or **Terminal Access Controller Access-Control System
    Plus** (**TACACS+**) as its protocol.'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**认证服务器**: 认证服务器是处理网络上的**认证、授权和计费**（**AAA**）服务的设备。这是创建和存储用户帐户以及应用特权和策略的地方。认证服务器运行**远程认证拨号用户服务**（**RADIUS**）或**终端访问控制器访问控制系统加**（**TACACS+**）作为其协议。'
- en: '**Authenticator**: This is typically the network device that you are attempting
    to access, whether it be for administration purposes or to simply access the network.
    Such devices can be a wireless router/access point or a network switch.'
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**认证器**: 这通常是您尝试访问的网络设备，无论是出于管理目的还是仅仅是访问网络。这些设备可以是无线路由器/接入点或网络交换机。'
- en: '**Supplicant**: The supplicant is the client device, such as a smartphone or
    laptop computer, that wants to access the network. The supplicant connects to
    the network (wired or wireless) and is prompted with an authentication login window
    provided by the authenticator. When the user submits their user credentials, the
    authenticator queries the authentication server to verify the user and determine
    what policies and privileges to apply while the user is logged on to the network.'
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Supplicant**: Supplicant是客户端设备，如智能手机或笔记本电脑，希望访问网络。Supplicant连接到网络（有线或无线），并收到认证登录窗口，由认证器提供。当用户提交其用户凭据时，认证器会查询认证服务器，以验证用户并确定用户登录到网络时应用的策略和权限。'
- en: Bypassing an NAC system can be somewhat challenging. During the course of this
    chapter and the previous chapter, we took a look at how to gather user credentials
    and spoof the identity of our attacker machine (Kali Linux). Using the MAC address
    and user credentials of a valid user on a target network will provide you with
    some sort of access to the secure network.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 绕过NAC系统可能有些挑战。在本章和上一章的课程中，我们看了如何收集用户凭据并欺骗我们的攻击者机器（Kali Linux）的身份。使用目标网络上有效用户的MAC地址和用户凭据将为您提供对安全网络的某种访问权限。
- en: However, NAC servers are capable of profiling the operating system and anti-malware
    protection on all connected devices. If your system does not satisfy compliance
    requirements, this can trigger a red flag or not allow access based on policies.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，NAC服务器能够对所有连接设备上的操作系统和反恶意软件保护进行配置文件化。如果您的系统不符合合规要求，这可能会触发红旗，或者根据策略不允许访问。
- en: Summary
  id: totrans-316
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we were able to cover a lot of practical content, such as breaking
    both WEP and WPA wireless encryption standards to recover the key (passphrase).
    Having exploited wireless security, best practices were discussed and demonstrated
    so that we can secure wireless networks from potential hackers.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们能够涵盖了许多实用内容，例如破解WEP和WPA无线加密标准以恢复密钥（密码）。在利用无线安全性之后，我们讨论并演示了最佳实践，以便我们可以保护无线网络免受潜在黑客的攻击。
- en: Furthermore, a practical approach to penetration testing on both Microsoft's
    RDP and Citrix services was covered. Lastly, we covered the uses of various network
    implants and how they can maintain remote access to a corporate network.
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还介绍了对微软的RDP和Citrix服务进行渗透测试的实际方法。最后，我们讨论了各种网络植入物的用途，以及它们如何可以保持对企业网络的远程访问。
- en: You now have the skills to gain access to a wireless network, perform exploitation
    on target systems, and gain access to both the Linux and Windows operating systems.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在具备了访问无线网络、对目标系统进行利用以及访问Linux和Windows操作系统的技能。
- en: In [Chapter 11](ca54b243-2f79-48cd-bb5c-e25e1c891ee0.xhtml), *Network Penetration
    Testing - Post-Connection Attacks*, we'll explore various tools in the post-connection
    phase.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第11章](ca54b243-2f79-48cd-bb5c-e25e1c891ee0.xhtml)中，*网络渗透测试-连接后攻击*，我们将探讨连接后阶段的各种工具。
- en: Questions
  id: totrans-321
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What algorithm does WPA2 use for data encryption?
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: WPA2使用什么算法进行数据加密？
- en: What Nmap script is used to discover servers running Citrix applications?
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用于发现运行Citrix应用程序的服务器的Nmap脚本是什么？
- en: What is the default port that Microsoft's RDP uses?
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 微软的RDP使用的默认端口是什么？
- en: What are some password cracking tools within Kali Linux?
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kali Linux中有哪些密码破解工具？
- en: What device is typically used to store all user accounts and policies?
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通常用于存储所有用户帐户和策略的设备是什么？
- en: Which command can be used to find a module in Metasploit?
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Metasploit中，可以使用哪个命令来查找模块？
- en: What is the standard for NAC?
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: NAC的标准是什么？
- en: Further reading
  id: totrans-329
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'The following are some additional recommended reading resources:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些推荐阅读资源：
- en: '**Metasploit Unleashed**: [https://www.offensive-security.com/metasploit-unleashed/](https://www.offensive-security.com/metasploit-unleashed/)'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Metasploit Unleashed**: [https://www.offensive-security.com/metasploit-unleashed/](https://www.offensive-security.com/metasploit-unleashed/)'
- en: '**Additional security tools**: [https://sectools.org/](https://sectools.org/)'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**其他安全工具**: [https://sectools.org/](https://sectools.org/)'
