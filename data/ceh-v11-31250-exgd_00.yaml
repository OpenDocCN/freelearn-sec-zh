- en: '*Chapter 3*: Reconnaissance – A Deeper Dive'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第 3 章*：侦察——深入探讨'
- en: Did you know that most organizations give away *intel* for free! I know, right?!
    During the *reconnaissance* stage, it's important to know that by virtue of the
    internet *being the internet*, there's so much data freely available online that
    it makes the job of an attack extremely easy. This type of intel is often referred
    to as **open source intelligence**, or, if you want to sound like the cool kids,
    you say **OSINT**.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 你知道吗，大多数组织免费提供*情报*！我知道，对吧？！在*侦察*阶段，重要的是要知道，由于互联网*就是互联网*，网上有大量免费的数据，这使得攻击者的工作变得极其简单。这种类型的情报通常被称为**开放源代码情报**，或者，如果你想显得酷一点，可以说**OSINT**。
- en: 'In this chapter, we''ll cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Investigating the target's website
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调查目标网站
- en: The Wayback Machine
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wayback Machine
- en: What organizations give away for free
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 组织免费提供的内容
- en: Employees – the weakest link
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 员工——最薄弱的环节
- en: Reconnaissance countermeasures
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 侦察对策
- en: Investigating the target's website
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调查目标网站
- en: Let's look at how to conduct reconnaissance on a target's website and how we
    can make use of other research sites. When you're doing reconnaissance, the target
    website is often where you'll land after a quick online search. That's where you'll
    learn the business's exact functions, location, contact information, clients,
    who the leadership team is, and sometimes, way more than that. You'll want to
    pay close attention to everything on the website.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下如何对目标网站进行侦察，以及如何利用其他研究网站。当你进行侦察时，目标网站通常是你在快速在线搜索后首先会访问的地方。在那里，你可以了解到该公司的确切功能、位置、联系信息、客户、领导团队成员，甚至更多。你需要特别注意网站上的所有内容。
- en: '![Figure 3.1 – Investigating a website](Images/B17486_03_01.jpg)'
  id: totrans-10
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.1 – 调查一个网站](Images/B17486_03_01.jpg)'
- en: Figure 3.1 – Investigating a website
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.1 – 调查一个网站
- en: In *Figure 3.1*, we can see a couple of pieces of information on this main page.
    First, on the left side, they've provided information on how to set up **Microsoft**
    **Outlook** with their particular email product. I already clicked through and
    saw how to set up via **Microsoft** **Exchange 2003**, where they also gave me
    the **Simple Mail Transfer Protocol** (**SMTP**) servers they utilize. Later,
    I'll describe how we can use that information to do banner grabs to identify the
    email server.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在*图 3.1*中，我们可以看到这个主页上的几条信息。首先，在左侧，他们提供了如何将**Microsoft** **Outlook**与他们的特定电子邮件产品进行设置的信息。我已经点击并查看了如何通过**Microsoft**
    **Exchange 2003**进行设置，在那里他们还给了我他们使用的**简单邮件传输协议**（**SMTP**）服务器。稍后，我会描述如何利用这些信息进行横幅抓取，以识别电子邮件服务器。
- en: We can also see that they use remote assistance software. When you see that
    an organization utilizes third-party software, it's a good idea to do some vulnerability
    research to find out whether there are any issues with that product that could
    get you into the target's system. There are also links everywhere on the page
    – for example, the **Help for Sending Email** link highlighted in *Figure 3.1*.
    Explore all the links. They may have helpful information.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以看到他们使用了远程协助软件。当你看到一个组织使用第三方软件时，进行一些漏洞研究是个好主意，看看该产品是否存在任何可能让你进入目标系统的问题。页面上到处都有链接——例如，*图
    3.1*中突出的**发送电子邮件帮助**链接。探索所有链接，它们可能会提供有用的信息。
- en: This company got bought out by another company (you can see that they've linked
    to the letter they mailed to all their current customers). Read that letter –
    it may discuss any new platforms they're utilizing.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这家公司被另一家公司收购了（你可以看到他们已经将他们寄给所有现有客户的信件链接了）。阅读这封信——它可能讨论了他们正在使用的任何新平台。
- en: 'Let''s look at another target site in *Figure 3.2*. First, look at all the
    posts they''ve linked to – for example, **Business Connectivity: Big Data is Everywhere**.
    Some of their additional posts might be valuable to us; they might discuss details
    about the history of the company and other information we want to know. Even if
    it''s historical, it may give us a clue for how we approach the phases after reconnaissance.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看*图 3.2*中的另一个目标网站。首先，看看他们链接的所有帖子——例如，**商业连接：大数据无处不在**。他们的一些额外帖子可能对我们有价值；它们可能讨论了公司的历史以及我们想要了解的其他信息。即使是历史性的内容，它也可能为我们提供在侦察之后如何进行的线索。
- en: '![Figure 3.2 – Investigating another target site](Images/B17486_03_02.jpg)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.2 – 调查另一个目标网站](Images/B17486_03_02.jpg)'
- en: Figure 3.2 – Investigating another target site
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.2 – 调查另一个目标网站
- en: This company has given us a lot of valuable information. They provided direct
    links to their **Facebook** and **Twitter** accounts. They have a chat service
    listed here. If you see something like that, find out what chat service they're
    utilizing and do vulnerability research on it.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这家公司给了我们很多有价值的信息。他们提供了他们的**Facebook**和**Twitter**账户的直接链接。这里列出了一个聊天服务。如果你看到这样的东西，找出他们使用的是什么聊天服务，并对它进行漏洞研究。
- en: Check the bottom of the page – and I mean the *very bottom*. People tend to
    overlook the legal imprint and privacy policy, but you should take note of it
    if it's there. Websites also typically name their web designer at the bottom,
    as we see in *Figure 3.2*. Do some research on that company because they could
    be hosting multiple targets we may want to exploit.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 查看页面底部——我指的是*非常底部*。人们往往忽视法律声明和隐私政策，但如果它们在那儿，你应该注意。网站通常也会在底部标明他们的网页设计公司，就像我们在*图3.2*中看到的那样。对这个公司做一些研究，因为他们可能托管着我们可能想要攻击的多个目标。
- en: 'Look at links to form-based pages, like a *contact* or *support* page. In *Figure
    3.3*, since this is an email-based form, it could show the information they don''t
    intend for anyone to see. View the page''s source information/code to see the
    HTML, ASPX, or whatever it is they''re using:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 查看指向基于表单的页面的链接，比如*联系方式*或*支持*页面。在*图3.3*中，由于这是一个基于电子邮件的表单，它可能显示出他们不打算让任何人看到的信息。查看页面的源信息/代码，看看他们使用的是HTML、ASPX，还是其他什么东西：
- en: '![Figure 3.3 – Email-based page](Images/B17486_03_03.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图3.3 – 基于电子邮件的页面](Images/B17486_03_03.jpg)'
- en: Figure 3.3 – Email-based page
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.3 – 基于电子邮件的页面
- en: Inside that code, we might see some identifying comments that developers typically
    insert for their own memory. You'd be amazed at what we find inside of the page
    source code, as you don't see it in the web page itself. It's hidden – at least,
    hidden to the average user.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在代码中，我们可能会看到一些开发人员通常为自己记忆插入的标识性注释。你会惊讶于我们在页面源代码中发现的内容，因为这些内容在网页本身是看不见的。它是隐藏的——至少对普通用户来说是隐藏的。
- en: Many companies post things they think are completely innocuous, but a hacker
    looks at information differently from how a consumer does. For example, most companies
    have a page titled *About our staff*. Sometimes, they have links to their employees'
    emails, or they have photos of them and links to their social media accounts.
    Social media accounts will be particularly important because sometimes people
    share too much when they think no one is looking. They might even share details
    about their work projects. Therefore, it is important to do your due diligence
    when looking into employees (I'll show you how to do that later).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 许多公司发布一些他们认为完全无害的信息，但黑客看待信息的方式与消费者不同。例如，大多数公司有一个标题为*关于我们的员工*的页面。有时，他们会链接到员工的电子邮件，或者他们会有员工的照片和社交媒体账户链接。社交媒体账户尤其重要，因为有时人们在认为没人看时分享得太多。他们甚至可能分享关于自己工作项目的细节。因此，在调查员工时，做足功课非常重要（稍后我会告诉你如何做到这一点）。
- en: Some sites have dedicated forums or even **internet relay chat** (**IRC**) (especially
    if we're looking at an organization with a lot of nerds, as you see on **HackThisSite.org**).
    Look at what people are talking about. If they have IRC statistics or quotes,
    look at those. We could start a social engineering attack by contacting somebody
    in this company and saying something like, "*Hey, what's it like working there?
    I'm thinking about applying.*"
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一些网站有专门的论坛，甚至有**互联网中继聊天**（**IRC**）（尤其是当我们看到一个有很多极客的组织时，像**HackThisSite.org**）。看看人们在聊什么。如果他们有IRC统计数据或引用，看看那些内容。我们可以通过联系公司里的某个人，开始一次社交工程攻击，比如说，“*嘿，那里工作怎么样？我在考虑申请。*”
- en: To really dig into the website, ethical hackers often use a program called **HTTrack**
    ([https://www.httrack.com/](https://www.httrack.com/)). It downloads a copy of
    any given website to your hard drive, including some of the backend code. Just
    think about the possibilities there. Using HTTrack, we can see exactly how this
    page is laid out, which might give us more information, such as whether they're
    saving their images to a different location. This is a very easy program to run.
    Simply create a project, categorize it, and assign a folder on your hard drive
    for it to download to.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要深入研究一个网站，伦理黑客通常使用一个叫做**HTTrack**的程序（[https://www.httrack.com/](https://www.httrack.com/)）。它会将任何给定网站的副本下载到你的硬盘上，包括一些后台代码。想想看，这里有什么可能性。使用HTTrack，我们可以准确地看到页面是如何布局的，这可能会给我们更多信息，比如它们是否将图像保存到不同的位置。这个程序非常容易运行。只需创建一个项目，进行分类，然后为它指定一个硬盘文件夹进行下载。
- en: '![Figure 3.4 – HTTrack website copier](Images/B17486_03_04.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.4 – HTTrack网站复制器](Images/B17486_03_04.jpg)'
- en: Figure 3.4 – HTTrack website copier
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.4 – HTTrack网站复制器
- en: 'As you can see in *Figure 3.5*, you have the option to **Download web site**(**s**),
    as well as the option to **Download web site**(**s**) + **questions**, which means
    you get to decide whether to download its associated links. Or, you could download
    the site into separate files. There is even an option that finds and downloads
    all ZIP files on a site:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 如*图 3.5*所示，您可以选择**下载网站**（**s**），还可以选择**下载网站**（**s**）+ **问题**，这意味着您可以决定是否下载其关联的链接。或者，您可以将网站下载为单独的文件。甚至还有一个选项可以查找并下载网站上的所有ZIP文件：
- en: '![Figure 3.5 – HTTrack, downloading the site](Images/B17486_03_05.jpg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.5 – HTTrack，下载网站](Images/B17486_03_05.jpg)'
- en: Figure 3.5 – HTTrack, downloading the site
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.5 – HTTrack，下载网站
- en: There are plenty of options that we can configure to get exactly the information
    we need (just click **Set options…**). For example, what do we want to scan for?
    By default, the program looks for images and CSS pages. Note that we're probably
    not interested in advertisements, so we can exclude them from the download.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以配置许多选项来准确获取所需的信息（只需点击**设置选项…**）。例如，我们想要扫描什么内容？默认情况下，程序会寻找图片和CSS页面。请注意，我们可能对广告不感兴趣，因此可以将其从下载中排除。
- en: Another thing that's important to remember is to change your browser ID and
    accept cookies.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个需要记住的重要事项是更改浏览器ID并接受Cookies。
- en: Make them think a different browser is hitting their server (this option is
    under **Browser ID**). Throw them off the trail. Make it seem like you're using
    a **Linux** box even though you're running a **Microsoft** box. If you're going
    through this with me, download the site (**HackThisSite.org**).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 让他们认为是另一个浏览器访问了他们的服务器（这个选项在**浏览器ID**下）。让他们迷惑。即使你在使用**Microsoft**设备，也要让它看起来像是使用**Linux**设备。如果你和我一起操作，下载网站（**HackThisSite.org**）。
- en: In the past, I've found **Microsoft** **Excel** spreadsheets on a site. I have
    even found password files. Regardless of whether you find those kinds of files,
    it's important to have a good understanding of how the target's site is laid out.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 过去，我曾在某个网站上找到**Microsoft** **Excel**表格。甚至还找到过密码文件。无论是否找到这些类型的文件，了解目标网站的布局非常重要。
- en: Another tool we can use to map out this system and possibly even expose things
    is a **link extractor** utility. This utility usually goes through a given website
    and tries to extract both internal and external URLs for it. To find one that
    works for you, you can just search **Google** for **link extractor**. In *Figure
    3.6*, I'm using the one at **Webmaster-Toolkit** ([https://webmasterstoolkit.com/](https://webmasterstoolkit.com/)).
    All you have to do is type in the web address of the site you're targeting and
    hit **Extract the Links**. Seeing all the different links used on this website
    could help us figure out the server infrastructure. Some of the links could even
    provide other ways into the environment.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个我们可以用来绘制这个系统并可能暴露信息的工具是**链接提取器**工具。该工具通常会浏览给定的网站，并尝试提取其中的内部和外部URL。要找到适合您的工具，您可以直接在**Google**中搜索**链接提取器**。在*图
    3.6*中，我使用的是**Webmaster-Toolkit**中的工具（[https://webmasterstoolkit.com/](https://webmasterstoolkit.com/)）。您只需输入您目标网站的Web地址，然后点击**提取链接**。查看网站上使用的所有不同链接可能有助于我们搞清楚服务器的基础设施。有些链接甚至可能提供进入该环境的其他方式。
- en: '![Figure 3.6 – Using the Link Extractor tool from the webmaster toolkit'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.6 – 使用网站管理员工具包中的链接提取工具](Images/B17486_03_06.jpg)'
- en: '](Images/B17486_03_06.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_06.jpg)'
- en: Figure 3.6 – Using the Link Extractor tool from the webmaster toolkit
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.6 – 使用网站管理员工具包中的链接提取工具
- en: 'After extracting the links, the result is as follows:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 提取链接后，结果如下：
- en: '![Figure 3.7 – Result of the link search](Images/B17486_03_07.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.7 – 链接搜索结果](Images/B17486_03_07.jpg)'
- en: Figure 3.7 – Result of the link search
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.7 – 链接搜索结果
- en: When looking at these results, make sure to check whether they expose anything,
    for example, **extranet.wayneenterprises.com** or maybe **mail.wayneenterprises.com**.
    The famous keywords to look for are **email** or **restricted**. I'm sure you
    can think of a few others on your own as well.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在查看这些结果时，请确保检查是否暴露了任何信息，例如，**extranet.wayneenterprises.com**或**mail.wayneenterprises.com**。常见的关键字是**email**或**restricted**。我相信你自己也能想到其他一些关键词。
- en: Advanced DNS tricks
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级DNS技巧
- en: Let's go a little deeper into **nslookup.io**. One type of DNS record is called
    an **SOA**, or **Start of Authority**. An SOA stores a record or information that's
    important about a domain or a zone containing adminstrative information that could
    be helpful to you.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更深入地了解**nslookup.io**。一种DNS记录叫做**SOA**，即**授权起始**。SOA存储的是关于域名或包含管理信息的区域的重要记录，这些信息可能对你有帮助。
- en: 'Follow these steps:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤操作：
- en: Just like before, type **set type=soa**. This type looks for the authoritative
    server.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 就像之前一样，输入**set type=soa**。这个类型查找的是权威服务器。
- en: Enter the target URL (in our example, this will be **hackthissite.org**).
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入目标URL（在我们的示例中，这将是**hackthissite.org**）。
- en: 'Exit nslookup. The screen should look like the following:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 退出nslookup。屏幕应该显示如下内容：
- en: '![Figure 3.8 – nslookup, looking for the authoritative server'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.8 – nslookup，查找权威服务器'
- en: '](Images/B17486_03_08.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_08.jpg)'
- en: Figure 3.8 – nslookup, looking for the authoritative server
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.8 – nslookup，查找权威服务器
- en: Ping the URL that was identified as the SOA to get the IP address (**ns1.hackthissite.org**).
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Ping一下被识别为SOA的URL，以获取IP地址（**ns1.hackthissite.org**）。
- en: Once you've got the IP address, go back into nslookup and change the DNS server
    you're using with the **server [IP address of SOA]** command. That means that
    nslookup will use this DNS server to do the resolution.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你得到IP地址，返回nslookup并使用**server [SOA的IP地址]**命令更改你正在使用的DNS服务器。这意味着nslookup将使用这个DNS服务器进行解析。
- en: Next, change the type to find any address by typing **set type=any**.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，改变类型以查找任何地址，输入**set type=any**。
- en: Type **ls -d [target site or hackthissite.org]**.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入**ls -d [目标网站或hackthissite.org]**。
- en: '![Figure 3.9 – nslookup, finding any site by type](Images/B17486_03_09.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![图3.9 – nslookup，通过类型查找任何网站](Images/B17486_03_09.jpg)'
- en: Figure 3.9 – nslookup, finding any site by type
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.9 – nslookup，通过类型查找任何网站
- en: That final step will execute what is referred to as a **zone transfer**, which
    will tell the authoritative DNS server to send us a list of every single computer
    name or DNS name linked to an IP address. It shows the MX records and the **A**
    records. It shows whether there's a **www** or an FTP (maybe it's FTP1 or FTP2).
    This is a very easy way to pull all the server names out. Again, all we're doing
    is executing a normal, expected command against their own DNS server. Most secured
    DNS servers today only allow zone transfers to take place between specific IP
    addresses or computer names. However, don't think that will totally protect you
    – I could easily spoof the IP or computer name.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步将执行所谓的**区域传输**，这会告诉权威DNS服务器将每个与IP地址相关的计算机名称或DNS名称的列表发送给我们。它显示MX记录和**A**记录，显示是否存在**www**或FTP（可能是FTP1或FTP2）。这是一种非常简单的方法来提取所有服务器名称。再强调一遍，我们所做的只是对他们的DNS服务器执行一个正常的、预期的命令。如今，大多数安全的DNS服务器仅允许特定IP地址或计算机名称之间进行区域传输。但是，不要以为这会完全保护你——我可以轻易地伪造IP或计算机名称。
- en: Let's set the type back to return the mail server information (**set type=mx**).
    Take a look at the MX preference number. This number represents the order in which
    the server responds (the lower the number, the higher the priority).
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们将类型设置回以返回邮件服务器信息（**set type=mx**）。看看MX优先级号码。这个数字表示服务器响应的顺序（数字越小，优先级越高）。
- en: '![Figure 3.10 – nslookup, looking for mail server information](Images/B17486_03_10.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图3.10 – nslookup，查找邮件服务器信息](Images/B17486_03_10.jpg)'
- en: Figure 3.10 – nslookup, looking for mail server information
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.10 – nslookup，查找邮件服务器信息
- en: In the preceding example, I am looking at MX records for **HackThisSite.org**
    again. From this results list, we can see that their primary mail server is **ASPMX.L.GOOGLE.COM**.
    We can also see that they've got a couple of redundant servers here (the lower
    priority **GOOGLEMAIL** servers). Often, when you perform a zone transfer, you're
    able to see the **TTL** (**time to live**). If the TTL is set too long, such as
    **3600** (which is 1 hour), we could poison their DNS.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的例子中，我再次查看**HackThisSite.org**的MX记录。从这个结果列表中，我们可以看到他们的主邮件服务器是**ASPMX.L.GOOGLE.COM**。我们还可以看到他们有几个冗余服务器（优先级较低的**GOOGLEMAIL**服务器）。通常，当你执行区域传输时，你可以看到**TTL**（**生存时间**）。如果TTL设置得太长，例如**3600**（即1小时），我们就可能污染他们的DNS。
- en: What does it mean to *poison* their DNS? It means that I change the IP address
    (or hostname) to direct you away from legitimate servers and toward fake ones.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 将他们的DNS“*污染*”是什么意思？这意味着我更改了IP地址（或主机名），将你从合法服务器引导到虚假服务器。
- en: Let me demonstrate with an example. The equivalent in an attack scenario would
    be to do this to their server to infect their DNS. First, I'll play with a file
    on my system.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 让我通过一个例子来演示。在攻击场景中，等同于对他们的服务器进行操作来感染他们的 DNS。首先，我会操作我系统中的一个文件。
- en: 'Let''s go into my Windows directory, **System32\drivers\etc**, and open in
    **Windows** **Notepad** a file in there called **HOSTS**. All computers look at
    this file (**HOSTS**) before they move on to sending a request to their DNS servers.
    I''m going to emulate a DNS poison attack using this file (technically, this is
    a DNS poison attack, but most of the later Windows operating systems set this
    file as **read only**, so it''s only the administrator who can do modifications).
    I''m going to take the IP address of **yahoo.com** and make it equal to **google.com**.
    If I saved this file, every time I tried to go to [google.com](http://google.com),
    my computer would go to this IP address (Yahoo''s):'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进入我的 Windows 目录，**System32\drivers\etc**，并在 **Windows** **记事本** 中打开其中一个名为
    **HOSTS** 的文件。所有计算机在发送请求到 DNS 服务器之前都会查看此文件（**HOSTS**）。我要用这个文件模拟一个 DNS 欺骗攻击（从技术上讲，这是一个
    DNS 欺骗攻击，但大多数后来的 Windows 操作系统将此文件设置为**只读**，因此只有管理员才能进行修改）。我将**yahoo.com**的 IP
    地址改为**google.com**。如果我保存了此文件，每次我尝试访问 [google.com](http://google.com) 时，我的计算机都会访问该
    IP 地址（Yahoo 的 IP）：
- en: '![Figure 3.11 – Changing the IP address of Yahoo to Google''s](Images/B17486_03_11.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.11 – 将 Yahoo 的 IP 地址更改为 Google 的 IP 地址](Images/B17486_03_11.jpg)'
- en: Figure 3.11 – Changing the IP address of Yahoo to Google's
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.11 – 将 Yahoo 的 IP 地址更改为 Google 的 IP 地址
- en: The concept of poisoning a DNS is to redirect any traffic to an alternate IP
    address (at least for a little while). For example, I would make it so that every
    time an employee tries to access **Citibank**, they go to my IP address, where
    I would have a website very similar to Citibank's that prompts the user to enter
    their username and password. Then I would forward the user to the real Citibank
    site after capturing their login information (insert evil laugh).
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 欺骗的概念是将所有流量重定向到另一个 IP 地址（至少在一段时间内）。例如，我会让每当员工尝试访问**花旗银行**时，他们会访问我的 IP 地址，在那里我会设置一个非常类似花旗银行的网页，提示用户输入他们的用户名和密码。然后，在捕获他们的登录信息后，我会将用户转发到真正的花旗银行网站（插入邪恶的笑声）。
- en: All this research will be vital when you're working on a penetration test for
    an organization. Remember that for each of these sources, you need to look at
    them from a hacker's perspective – not from the perspective of a normal end user.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 这些研究在你为一个组织进行渗透测试时至关重要。记住，对于每个这些来源，你需要从黑客的角度来看待它们，而不是从普通终端用户的角度来看。
- en: Netcraft
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Netcraft
- en: 'There are several tools out there that can help you with reconnaissance and
    footprinting. **Sam Spade** is one that''s talked about a lot:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种工具可以帮助你进行侦察和足迹分析。**Sam Spade** 是其中一个讨论很多的工具：
- en: '![Figure 3.12 – Sam Spade](Images/B17486_03_12.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.12 – Sam Spade](Images/B17486_03_12.jpg)'
- en: Figure 3.12 – Sam Spade
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.12 – Sam Spade
- en: It's an application that adds a **graphical user interface** (**GUI**) to a
    lot of the reconnaissance tools we've been talking about thus far. While people
    use it as a vulnerability scanner to help secure their systems, attackers also
    frequently use it to find vulnerabilities.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个将**图形用户界面**（**GUI**）添加到我们到目前为止讨论的许多侦察工具中的应用程序。虽然人们将其用作漏洞扫描器来帮助保护他们的系统，攻击者也经常利用它来寻找漏洞。
- en: While Sam Spade is an application that can be traced back to you (by IP), **Netcraft**
    is an online tool that looks at public-facing sites and helps to discover external
    servers. In some cases, it also looks at operating systems and even applications
    that are running on those servers via a banner grab. This last part is what usually
    scares people the most when they learn about NetCraft. Try it out for yourself
    at [https://www.netcraft.com/](https://www.netcraft.com/).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然 Sam Spade 是一个可以追踪到你的应用程序（通过 IP 地址），**Netcraft** 是一个在线工具，它查看面向公众的站点并帮助发现外部服务器。在某些情况下，它还会查看操作系统，甚至通过横幅抓取检查在这些服务器上运行的应用程序。这个部分通常是当人们了解
    NetCraft 时最让人害怕的部分。你可以自己尝试访问 [https://www.netcraft.com/](https://www.netcraft.com/)。
- en: A **banner grab** is simply identifying a system by looking at what ports are
    open and how the system responds to a request to said ports. A Windows server
    responds to a request on port **80** a little differently than a Linux box. Those
    differences are what help services (and some tools) to identify the target system.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: '**Banner抓取**就是通过查看哪些端口是开放的，系统如何响应对这些端口的请求来识别系统。Windows服务器在端口**80**上的响应与Linux服务器有所不同。这些差异帮助服务（和一些工具）识别目标系统。'
- en: Netcraft is intended to secure an environment by exposing any problems or vulnerabilities
    and then fixing them. As an attacker, this is something I will make use of. Netcraft
    has a variety of services that are focused on helping you secure your environment,
    but its primary use for us is in finding out the web server a site is using.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: Netcraft旨在通过暴露任何问题或漏洞并加以修复来确保环境的安全。作为攻击者，这是我会利用的东西。Netcraft提供了多种服务，专注于帮助你确保环境安全，但它对我们来说的主要用途是找出网站使用的Web服务器。
- en: '![Figure 3.13 – Finding out the web server of a site using Netcraft'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.13 – 使用Netcraft查找网站的Web服务器'
- en: '](Images/B17486_03_13.jpg)'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_13.jpg)'
- en: Figure 3.13 – Finding out the web server of a site using Netcraft
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.13 – 使用Netcraft查找网站的Web服务器
- en: 'Let''s pull up Netcraft and try it on our favorite – **HackThisSite.org**.
    You can see they give us quite a bit of background information here:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们打开Netcraft，试试我们最喜欢的网站——**HackThisSite.org**。你可以看到它给了我们相当多的背景信息：
- en: '![Figure 3.14 – Trying Netcraft on HackThisSite.org'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.14 – 在HackThisSite.org上试用Netcraft'
- en: '](Images/B17486_03_14.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_14.jpg)'
- en: Figure 3.14 – Trying Netcraft on HackThisSite.org
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.14 – 在HackThisSite.org上试用Netcraft
- en: It has extracted some keywords that they utilize. It's given us the site's IP
    address, including its IPv6 address and the domain registrar. We can also see
    the hosting history, which shows us that they are using a load balancer based
    off FreeBSD, which (if not patched properly) could be a great target. Netcraft
    also shows us their web tracks and the server-side technologies they're using,
    such as PHP, SSL, JavaScript, and CSS.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 它提取了一些他们使用的关键词。它给了我们该网站的IP地址，包括其IPv6地址和域名注册商。我们还可以看到托管历史，这显示他们使用的是基于FreeBSD的负载均衡器，（如果没有正确修补）可能是一个很好的攻击目标。Netcraft还展示了他们的网络轨迹以及他们使用的服务器端技术，如PHP、SSL、JavaScript和CSS。
- en: '![Figure 3.15 – Web tracks shown by Netcraft'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.15 – Netcraft显示的Web轨迹'
- en: '](Images/B17486_03_15.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_15.jpg)'
- en: Figure 3.15 – Web tracks shown by Netcraft
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.15 – Netcraft显示的Web轨迹
- en: 'More information is shown in the following screenshot:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了更多信息：
- en: '![Figure 3.16 – More information](Images/B17486_03_16.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![图3.16 – 更多信息](Images/B17486_03_16.jpg)'
- en: Figure 3.16 – More information
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.16 – 更多信息
- en: What are they using to see which web browser their users are utilizing to access
    their website? As you can see, we can learn a lot of information with this tool.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 他们使用什么工具来查看用户访问他们网站时使用的浏览器？如你所见，我们可以通过这个工具学到很多信息。
- en: 'When I test it with my old site (**utahwisp.com**), it gives us the site''s
    hosting history, including the IP address, web server, and operating system. If
    you are conducting a penetration test on your organization''s infrastructure,
    this will be quite useful because it''s great at pulling up what server and web
    server service you''re using:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 当我用我的旧网站（**utahwisp.com**）进行测试时，它给了我们该网站的托管历史，包括IP地址、Web服务器和操作系统。如果你正在进行对自己组织基础设施的渗透测试，这将非常有用，因为它能够很好地展示你所使用的服务器和Web服务器服务：
- en: '![Figure 3.17 – Testing utahwisp.com](Images/B17486_03_17.jpg)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![图3.17 – 测试utahwisp.com](Images/B17486_03_17.jpg)'
- en: Figure 3.17 – Testing utahwisp.com
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.17 – 测试utahwisp.com
- en: One other nice thing about Netcraft is that it shows you a *Netcraft risk rating*.
    Zero out of 10 is a great rating for security, but that doesn't mean it's not
    hackable. Obviously, them revealing this information exposes quite a bit to an
    attacker. There are a lot of tools created for legitimate purposes, such as Netcraft,
    that attackers can capitalize on just by shifting their perspective.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Netcraft的另一个优点是它会显示*Netcraft风险评级*。0分（满分10分）是一个非常好的安全评级，但这并不意味着它不可被攻击。显然，他们公开这些信息对攻击者来说暴露了很多东西。许多为合法目的创建的工具，比如Netcraft，攻击者只要转换一下角度就能利用。
- en: The Wayback Machine
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Wayback Machine（时光机）
- en: 'At this point, the internet has been around for quite some time, and there
    are a number of retired web pages and websites. **The Wayback Machine** ([https://archive.org/web/web.php](https://archive.org/web/web.php))
    allows us to view previous versions of websites that may not even exist anymore.
    Think of it as *the* archive of the internet. Once we find the older version of
    our target site, we can scan for *historical data* that people didn''t mean to
    expose. Now, before I got my start in security, I had no idea this tool was out
    there, but it''s really interesting to use for fun as well (you know, like showing
    your kids what **Amazon** used to look like):'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，互联网已经存在了相当长一段时间，许多网站和网页已经被淘汰。**Wayback Machine**（[https://archive.org/web/web.php](https://archive.org/web/web.php)）允许我们查看可能已经不存在的旧版本网站。可以把它看作是*互联网的档案馆*。一旦我们找到了目标网站的旧版本，就可以扫描出*历史数据*，这些数据可能是人们无意间泄露的。现在，在我开始从事安全工作之前，我根本不知道这个工具的存在，但它真的很有趣，可以当做娱乐工具使用（比如，向孩子们展示**亚马逊**以前的模样）：
- en: '![Figure 3.18 – The Wayback Machine home page](Images/B17486_03_18.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.18 – Wayback Machine 主页](Images/B17486_03_18.jpg)'
- en: Figure 3.18 – The Wayback Machine home page
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.18 – Wayback Machine 主页
- en: 'You can see here that they have saved over *456 billion* web pages. The Wayback
    Machine goes through websites and detects any changes – if it detects a change,
    it makes a note and caches that information. As an example, I''ll use my old company''s
    website. The site is no longer being maintained, but you can see there was some
    activity in 2003\. There is one snapshot of my site from January 10, 2003:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在这里看到他们已经保存了超过*4560亿*个网页。Wayback Machine 会扫描网站并检测任何变化——如果它检测到变化，它会记录并缓存该信息。举个例子，我会用我之前公司的官网。该网站现在已经不再维护，但你可以看到在
    2003 年时还曾有一些活动。这里有一个来自 2003 年 1 月 10 日的快照：
- en: '![Figure 3.19 – The Wayback Machine change history of utahwisp.com'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.19 – Wayback Machine 展示 utahwisp.com 的变更历史'
- en: '](Images/B17486_03_19.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_19.jpg)'
- en: Figure 3.19 – The Wayback Machine change history of utahwisp.com
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.19 – Wayback Machine 展示 utahwisp.com 的变更历史
- en: In the snapshot, you can see my web development skills. My prowess was considerable.
    This is back in the days when we used Notepad. I think by then I'd moved up to
    **HotDog**, which was one of the first WYSIWYG environments for web design.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在快照中，你可以看到我的网页开发技能。我当时的能力相当强。这是那个时代我们还在使用记事本的时期。我想到那时我已经转到**HotDog**，它是最早的所见即所得（WYSIWYG）网页设计工具之一。
- en: 'What can we find here that would be useful for our purposes? We can find the
    purpose and messaging of the organization, where it''s located, contact information,
    such as a cell phone number, and information about the email options available,
    including a login page. Note that this is just an example – your target will still
    be operational, so a lot of the infrastructure is probably still in place:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里我们可以找到哪些对我们有用的信息呢？我们可以找到该组织的目的和信息传递，所在位置，联系方式，如手机号码，以及有关电子邮件选项的信息，包括登录页面。请注意，这只是一个例子——你的目标网站仍然在运行，所以很多基础设施可能仍然完好：
- en: '![Figure 3.20 – More information from Wayback Machine'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.20 – Wayback Machine 更多信息'
- en: '](Images/B17486_03_20.jpg)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_20.jpg)'
- en: Figure 3.20 – More information from Wayback Machine
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.20 – Wayback Machine 更多信息
- en: When companies first built their web pages (especially back in the day), they
    listed all kinds of information. They didn't think it was a security risk. That
    means, if we go back and look at previous versions of their website, it could
    expose quite a bit, for example, employee or leadership personal information.
    There may even be a press release section where they announced that they're moving
    to **Microsoft** **Server 2000** and looking toward moving to **2008**. Even when
    people think they've removed historical information from a website, there's always
    a record of it somewhere.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 当公司最初建立他们的网站时（尤其是在过去），他们列出了各种信息。他们并未认为这是一种安全风险。这意味着，如果我们回去查看他们网站的旧版本，可能会暴露出很多信息，例如员工或领导层的个人信息。甚至可能有一个新闻发布区，宣布他们正在迁移到**Microsoft**
    **Server 2000**，并且计划迁移到**2008**。即使人们认为他们已经删除了网站上的历史信息，总是能在某个地方找到记录。
- en: What organizations give away for free
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 组织免费提供的内容
- en: When I was about 25 years old, there was a radio station, *The Q*, in the city
    where I lived that was holding a big contest that included giving away a big prize
    package. They would hide this big wooden Q every day, which was about a foot by
    a foot in depth and in height (30 x 30 cm) and about 2 inches (5 cm) thick, and
    give out clues for where to find it. If you found the Q, you won a prize package
    that could include a couple of four-wheelers, a trip to Hawaii, TVs, tons of stuff.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 当我大约25岁时，曾在我居住的城市有一个广播电台，*The Q*，他们举办了一场大型比赛，其中包括赠送一个丰厚的奖品包。他们每天都会藏一个大木字母Q，这个字母Q大约有一英尺见方（30
    x 30 cm），厚度大约是2英寸（5 cm），并提供线索指引在哪里可以找到它。如果你找到了这个Q，你就能赢得一个奖品包，可能包括几辆四轮车、一趟去夏威夷的旅行、电视、很多其他的东西。
- en: I was tracking the clues that they gave out each day, and I thought I knew where
    it was, so I looked around for hours in this huge park. After about three or four
    hours, I gave up. It turned out that I was about 25 feet (8 meters) away from
    it when I gave up. I still regret that today. It's the same thing here with reconnaissance
    – you've got to look *everywhere*, despite the massive amounts of information
    that become available to you.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 我每天跟踪他们发布的线索，觉得我知道它在哪里，于是我在这个巨大的公园里找了好几个小时。大约三四个小时后，我放弃了。结果，我离它大约25英尺（8米）的地方就放弃了。直到今天，我依然为此感到遗憾。侦察工作也是如此——你必须*到处*寻找，尽管会有大量信息呈现给你。
- en: The more you try to find out about your target, the more you're going to find.
    Victor Hugo, the famous author of *Les Miserables*, once said, "*Perseverance,
    secret of all triumphs*" – this is especially true for reconnaissance.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 你越是努力去了解目标，你就越能发现更多信息。著名作家*《悲惨世界》*的作者维克多·雨果曾说过：“*坚韧不拔，是所有胜利的秘密*”——这在侦察过程中尤其真实。
- en: In this section, we'll look at what else you can find out about your target.
    We'll look into the information they're publishing that can be useful for us as
    ethical hackers. That includes job sites, promotional materials, social media,
    and email.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将了解你还能发现关于目标的哪些信息。我们将探讨他们发布的可能对我们作为道德黑客有用的信息。这包括招聘网站、宣传材料、社交媒体和电子邮件。
- en: Job sites
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 招聘网站
- en: Job sites give us so much information. I'm not just talking about standard job
    sites – we'll also get information from company-run job sites, including the career
    pages included on the corporate website.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 招聘网站给了我们大量的信息。我不仅仅指的是标准的招聘网站——我们还会从公司运营的招聘网站获取信息，包括公司网站上的职业页面。
- en: When we start looking at a well-known job site, we start searching by job title
    or technologies. Companies might inadvertently expose the different technologies
    they're using when they advertise for specific jobs, even if it's for a temporary
    project. I'll be doing these very specific searches since I'm not actually going
    to target a company, but you will also want to look at all the job vacancies that
    your target organization has advertised online.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们开始查看一个著名的招聘网站时，我们会按职位名称或技术来搜索。公司在为特定职位招聘时，可能会不经意地暴露出他们正在使用的不同技术，即使这是一个临时项目的招聘。我会进行这些非常具体的搜索，因为我并不打算直接针对某个公司，但你也会想要查看目标组织在线上发布的所有职位空缺。
- en: Remember that you are not looking at this as a potential employee or the employer.
    Look at it through the eyes of an attacker.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，你不是以潜在员工或雇主的身份来看待这些信息的，要从攻击者的角度去看待它。
- en: I'll use **Monster** ([https://www.monster.com/](https://www.monster.com/))
    as an example. Start by looking for some technical positions, such as **systems
    engineer**. In the following example, based on the qualifications they're looking
    for, we can see that they're using **Microsoft** **Active Directory**, **Windows**
    **Server 2008**, **VMware**, and **Hyper-V**.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 我将以**Monster**（[https://www.monster.com/](https://www.monster.com/)）为例。首先查看一些技术类职位，比如**系统工程师**。在下面的例子中，根据他们要求的资格，我们可以看到他们正在使用**Microsoft**
    **Active Directory**、**Windows** **Server 2008**、**VMware**和**Hyper-V**。
- en: They're also looking for someone with knowledge of **Cisco**, which means we
    can infer what kind of routers and switches they're probably utilizing. They also
    mention the **SolarWinds** and **Spotlight** monitoring tools, so now we know
    what type of monitoring tools they're using internally. Once you get this information,
    you'll want to investigate the architecture of each component and see whether
    there are any vulnerabilities, or better yet, you might see any security systems
    that you'll need to avoid.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 他们还在寻找具有**Cisco**知识的人，这意味着我们可以推测他们可能在使用什么样的路由器和交换机。他们还提到了**SolarWinds**和**Spotlight**监控工具，所以现在我们知道他们内部使用了什么类型的监控工具。一旦你获得了这些信息，你将需要调查每个组件的架构，看看是否存在任何漏洞，或者更好的是，你可能会看到需要避免的安全系统。
- en: '![Figure 3.21 – Job requirement for a systems engineer'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.21 – 系统工程师的职位要求](Images/B17486_03_21.jpg)'
- en: '](Images/B17486_03_21.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_21.jpg)'
- en: Figure 3.21 – Job requirement for a systems engineer
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.21 – 系统工程师的职位要求
- en: Let's try searching a different way – by keyword. Find people who are looking
    for someone who knows something about some outdated servers. Let's go with **server
    2003**, for example.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们尝试换一种方式搜索——通过关键词。寻找那些需要知道过时服务器的人的职位。比如我们可以试试**server 2003**。
- en: '![Figure 3.22 – Searching with the "server 2003" keyword on Monster](Images/B17486_03_22.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.22 – 在 Monster 上搜索 "server 2003" 关键词](Images/B17486_03_22.jpg)'
- en: Figure 3.22 – Searching with the "server 2003" keyword on Monster
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.22 – 在 Monster 上搜索 "server 2003" 关键词
- en: Once again, we'll look at a recruiting agency's job posting. They request experience
    working with **Microsoft** **SharePoint 2010** authentication and permissions
    models, as well as administering SQL. So, there we have information about the
    backend. They are also looking for someone with experience with **Visual Studio
    .NET**, and it looks like they have both intranet and internet portals that are
    being hosted by SharePoint. All these systems are way outdated, and it would surprise
    you how many organizations out there are still running systems this old. If they
    weren't, I wouldn't be so busy!
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们再次来看一个招聘机构的职位发布。他们要求有**Microsoft** **SharePoint 2010** 认证和权限模型的工作经验，并且有 SQL
    管理经验。所以，我们可以获得关于后端的相关信息。他们还希望招聘具有**Visual Studio .NET**经验的人，看起来他们有内网和互联网门户网站，这些都由
    SharePoint 托管。所有这些系统都已经过时了，令人惊讶的是，仍然有很多组织在运行如此陈旧的系统。如果它们不是这样，我也不会这么忙！
- en: '![Figure 3.23 – Job requirements of a SharePoint administrator](Images/B17486_03_23.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.23 – SharePoint 管理员的职位要求](Images/B17486_03_23.jpg)'
- en: Figure 3.23 – Job requirements of a SharePoint administrator
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.23 – SharePoint 管理员的职位要求
- en: The same thing can be done by looking at other job sites, such as **DICE** ([https://www.dice.com/](https://www.dice.com/)),
    **Indeed** ([https://www.indeed.com/](https://www.indeed.com/)), and more. Pay
    special attention to the jobs that your target advertises, as these will give
    you valuable insight into the systems they're running and their overall network
    architecture. You might even get a sense of what security controls they have in
    place. For example, what type of **intrusion detection system** (**IDS**) do they
    have installed?
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以通过查看其他招聘网站来做到这一点，例如**DICE**（[https://www.dice.com/](https://www.dice.com/)）、**Indeed**（[https://www.indeed.com/](https://www.indeed.com/)）等。特别注意你目标公司的招聘职位，这些职位可以为你提供关于他们运行的系统和整体网络架构的宝贵见解。你甚至可以了解他们可能采用的安全控制措施。例如，他们安装了什么类型的**入侵检测系统**（**IDS**）？
- en: Can you see now why job sites make me all giddy inside? They can give us a plethora
    of information, and this makes our job so easy.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你能理解为什么招聘网站让我感到兴奋了吗？它们可以提供大量的信息，这使得我们的工作变得轻松。
- en: Marketing and customer support
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 市场营销和客户支持
- en: 'We can learn so much just by looking at the organization''s social networking
    profile. As demonstrated in the previous section, recruiters and job sites can
    provide valuable information, such as the platforms or systems the target is using.
    We can also take note of how they support their users because that can be important
    for a social engineering attack. For example, I could call a random employee:
    "*Hey Jim, this is Fred in the IT department. I just reset your account, and I
    need to make sure that your password is going to work correctly and log you in.
    What''s your password, really quick?*"'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过查看组织的社交网络资料学到很多东西。正如前面一节所示，招聘人员和求职网站可以提供有价值的信息，例如目标使用的平台或系统。我们还可以注意他们如何支持用户，因为这对于社会工程攻击来说可能很重要。例如，我可以打电话给某个随机员工：“*嘿，吉姆，我是IT部门的弗雷德。我刚刚重置了你的账户，需要确保你的密码能够正常工作并让你登录。能告诉我一下你的密码吗？*”
- en: If the user support is done via email, I can spoof an email and make it look
    like it's coming from their IT department. Or better yet, a **CEO fraud email
    attack**, where an attacker (after reconning a company) poses as an executive,
    creates an emergency issue, and requests money from someone in accounting or their
    assistant to be transferred to a specific account. We can also look at the user
    surveys the target puts out to collect feedback, as the questions they ask might
    give us an insight into their business strategies.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 如果用户支持是通过电子邮件进行的，我可以伪造一封电子邮件，让它看起来像是来自他们的IT部门。或者更好的是，进行一次**CEO欺诈邮件攻击**，攻击者（在对公司进行侦察后）冒充高管，制造紧急问题，要求会计人员或他们的助理将款项转账到特定账户。我们还可以查看目标发布的用户调查，以收集反馈，因为他们提出的问题可能会为我们提供关于他们商业战略的洞察。
- en: If we start looking at the products they're promoting, that should also give
    us some information about their product specifications. To use this in practice,
    if I notice a particular target uses a given piece of software, I will backtrack
    and find out all I can about that software.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们开始关注他们正在推广的产品，这也应该为我们提供一些关于其产品规格的信息。在实际应用中，如果我注意到一个特定目标使用了某个软件，我会追溯并尽可能多地了解该软件的相关信息。
- en: In our culture, we are sharing way too much information, both personally and
    from a business perspective. Social networking environments such as **Twitter**,
    **Facebook**, **LinkedIn**, and even **Google+** are now used for marketing and
    personal purposes. This combination can expose information with very tangible
    consequences. Hopefully, if you're reading this, you understand that if you post
    something, you can't take it back, and it doesn't matter if you delete it immediately.
    We've seen thousands of people lose their jobs because of the things that they've
    posted online. Likewise, we've also seen a lot of companies lose money because
    of this.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的文化中，我们分享了过多的信息，无论是个人方面还是商业角度。社交网络环境，如**Twitter**、**Facebook**、**LinkedIn**，甚至**Google+**，现在都被用于营销和个人用途。这种结合可能会暴露出具有非常具体后果的信息。希望如果你正在阅读这些内容，你明白如果你发布了某些东西，你是无法撤回的，即使你立即删除也无济于事。我们已经看到成千上万的人因为在网上发布了不当内容而失去了工作。同样，我们也看到很多公司因为这个原因而亏损。
- en: Let's look at some of the different methods we can use to mine these social
    sites for our target's data. Obviously, start by looking around (from an attacker's
    perspective) and see what you can find. Look at their previous posts. Look at
    photos being uploaded or posted. Check out employees' personal sites. It's shocking
    how few people put controls on their websites.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看可以用来挖掘这些社交网站来获取目标数据的几种不同方法。显然，首先从攻击者的角度进行观察，看看能找到什么。查看他们的之前发布的帖子，看看上传或发布的照片，检查员工的个人网站。令人震惊的是，很少有人对自己的网站设置控制措施。
- en: Financial and competitive analysis data
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 财务和竞争分析数据
- en: Businesses often conduct competitive analyses to assess their competitors or
    to figure out their market strategy. As attackers, we can use services that are
    intended for business analysis for somewhat more nefarious purposes.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 企业经常进行竞争分析，以评估他们的竞争对手或制定市场战略。作为攻击者，我们可以利用那些本来是为商业分析而提供的服务，来达到一些更为不道德的目的。
- en: There are many sites out there we could use, but I'm going to focus on some
    of the more popular ones, such as **Yahoo** **Finance**, **Google** **Finance**,
    **CNN**, **MSNBC**, **MarketWatch**, **The Wall Street Transcript**, and more.
    Several of them provide information such as the market value of a company's shares,
    the company profile, and its major competitors. All this information may be helpful
    in future penetration testing, especially for social engineering attacks.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多网站可以使用，但我将专注于一些更受欢迎的网站，如**雅虎金融**，**谷歌金融**，**CNN**，**MSNBC**，**MarketWatch**，**华尔街传讯**等等。其中一些网站提供公司股票市值、公司概况及其主要竞争对手等信息。所有这些信息在未来的渗透测试中可能都会有所帮助，尤其是在社会工程攻击方面。
- en: You can get this information through tools that allow for competitor analysis,
    or by setting up email alerts for updates to a specific company's profile. For
    example, if Microsoft posts something about the new **HoloLens**, or if Google
    posts something about ending **Gmail**, you obviously want to be notified about
    this kind of information. You'll have to register for those services, but it's
    a good way of monitoring what's going on with the company.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过允许竞争对手分析的工具获取此信息，或者通过设置电子邮件提醒以更新特定公司的概况。例如，如果微软发布有关新**HoloLens**的信息，或者如果谷歌发布有关结束**Gmail**的信息，您显然希望得到此类信息的通知。您将需要注册这些服务，但这是监视公司动态的一种好方法。
- en: Competitive analysis tools allow businesses to discover information about *competitors*.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 竞争分析工具允许企业发现关于*竞争对手*的信息。
- en: Attackers utilize these services to find out basic company information, such
    as when and how it was founded, or its leadership, location, and products. Many
    of these tools don't just provide analysis of competitors; they might also provide
    analyses of their products, their customer base, their suppliers, and more. They
    use the same techniques that we've already gone over to gather that information.
    They then charge money for it and give you a nice formatted report with patents,
    trademarks, catalogs, customers, vendor interviews, press releases, annual reports,
    and more. They basically go out and do all the spying for you, and there's nothing
    illegal about that.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者利用这些服务来获取关于公司的基本信息，例如成立时间、领导、位置和产品等。许多这些工具不仅提供竞争对手的分析，还可能提供他们的产品、客户群体、供应商等的分析。他们使用我们已经讨论过的相同技术来收集这些信息。然后他们收费，并为您提供一个带有专利、商标、目录、客户、供应商访谈、新闻稿、年度报告等详细报告。他们基本上替您出去做了所有的间谍工作，这是完全合法的。
- en: Employees – the weakest link
  id: totrans-146
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 员工 - 最薄弱的环节
- en: Have you ever lost something and it ended up being right in front of you? This
    usually happens with my glasses. I'll be looking everywhere for them and running
    around the house saying, "*Anybody seen my glasses?*" And my wife will turn to
    me and say, "*They're on top of your head.*"
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 你有没有遇到过找东西找了很久，结果就在你眼前的情况？这通常发生在我的眼镜上。我会到处找它们，跑遍整个房子说，“*有人看到我的眼镜吗？*”我的妻子会转过头对我说，“*它们就在你头顶上*。”
- en: 'It''s the same concept with different reconnaissance techniques. Some of the
    data that we gather in the reconnaissance phase is incredibly easy to find. In
    fact, a lot of the information can be found through online services that we''re
    probably already using:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 同样的概念，使用不同的侦察技术。我们在侦察阶段收集的一些数据非常容易找到。事实上，许多信息可以通过我们可能已经在使用的在线服务找到：
- en: '![Figure 3.24 – Online services where information can be gathered'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.24 – 可收集信息的在线服务'
- en: '](Images/B17486_03_24.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_24.jpg)'
- en: Figure 3.24 – Online services where information can be gathered
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.24 – 可收集信息的在线服务
- en: The employee side is where things get scary. For example, if an employee plays
    games, that may show us their interests and hobbies (not that I think that somebody
    sits at home with a hammer and crushes candy). This information provides us with
    a good sense of what people are familiar with, which could help us out with passwords
    in the future.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 员工方面是令人担忧的地方。例如，如果员工玩游戏，这可能展示出他们的兴趣和爱好（不是说有人坐在家里拿着锤子砸糖果）。这些信息为我们提供了人们熟悉的事物的良好感知，这可能在未来的密码破解中对我们有所帮助。
- en: To take it to the next level, you can create a fake persona and start interacting
    with the target. For example, if you're a big fan of a particular gaming console,
    you could try to get into the forums where they're talking about doing repairs.
    You could even ask your target a few questions to start and build a relationship.
    This is a small taste of what *social engineering* is – another method for us
    to gather information.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要更进一步，你可以创建一个虚假的身份并开始与目标互动。例如，如果你是某个游戏机的超级粉丝，你可以尝试进入他们讨论维修的论坛。你甚至可以先问目标几个问题，建立关系。这就是*社会工程*的一个小小尝试——我们收集信息的另一种方法。
- en: 'What photos are they sharing? From these photos, we could find out some things:
    who their family members are; where the picture was taken; if they go to that
    place frequently. Today, smartphones even tag photos with **GPS** (**Global Positioning
    System**) coordinates, making it much easier to find out where someone is. We
    can glean even more information from the backgrounds of the photos – this could
    be their street address, a sports league they''re in, or the school their kids
    attend. I know that''s a little family-related, but it can be dangerous. I''m
    very protective about families and I hope you guys can recognize the problem with
    posting seemingly harmless information about your kids.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 他们分享了哪些照片？从这些照片中，我们可能会发现一些信息：谁是他们的家庭成员；照片拍摄的地点；他们是否经常去那个地方。如今，智能手机甚至会用**GPS**（**全球定位系统**）坐标标记照片，使得了解某人所在位置变得更加容易。我们还可以从照片的背景中提取更多信息——这可能是他们的街道地址、他们所在的体育联赛，或是他们孩子就读的学校。我知道这些是和家庭相关的，但也可能很危险。我对家庭非常保护，也希望你们能意识到发布看似无害的关于你孩子的信息是有问题的。
- en: Employees might post pictures of them at the local bar on the weekends, revealing
    where they go to hang out with friends. Now, we know where to go to meet people
    that work for that organization.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 员工可能会发布他们在周末去本地酒吧的照片，揭示了他们和朋友们聚会的地点。现在，我们知道去哪里可以遇到在该组织工作的人员。
- en: Who are they connected to in their friend list? This could give us some potential
    additional targets. But more often, it's important for answering security questions.
    One of the security questions we get all the time when trying to reset a password
    is, *Who was your childhood best friend?* We might be able to figure that out
    just from interactions on social media. If that doesn't work, we could deploy
    a minor social engineering attack. For example, if I see that Bruce Wayne is friends
    with Clark Kent, I could send Bruce Wayne a spoofed email from Clark Kent asking
    about additional information that I might need for an attack.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 他们与谁在好友列表中有联系？这可能为我们提供一些潜在的额外目标。但更常见的是，这对于回答安全问题非常重要。我们在尝试重置密码时经常遇到的一个安全问题是，*你小时候最好的朋友是谁？*
    我们可能仅通过社交媒体上的互动就能弄清楚这一点。如果这不奏效，我们可以实施一个小规模的社会工程攻击。例如，如果我看到布鲁斯·韦恩和克拉克·肯特是朋友，我可以给布鲁斯·韦恩发送一封伪造的电子邮件，声称是克拉克·肯特发来的，询问我在攻击过程中可能需要的其他信息。
- en: Does the target often post their location or what they're doing? For example,
    Bruce Wayne says he's going to Metropolis this week. For us, the attackers, that
    means he's out of Gotham City, and the banks are wide open for me to rob because
    he's not there to protect them. Did the target post their phone number on their
    profile? Do they have strict privacy settings in place?
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 目标是否经常发布他们的位置或正在做的事情？例如，布鲁斯·韦恩说他本周要去大都市。对于我们这些攻击者来说，这意味着他离开了哥谭市，银行在他不在的情况下完全暴露，我可以轻松抢劫。目标是否在个人资料上发布了他们的电话号码？他们是否设置了严格的隐私保护措施？
- en: 'Think of security this way: I could be the safest driver in the world, but
    a drunk driver could still crash into me. Likewise, I can do everything I can
    to block people from getting to my information, but my best friend might have
    a profile that''s wide open. If we''ve interacted online, that could expose some
    additional information about me, like my friends or hometown.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 从这个角度看待安全：我可能是世界上最安全的司机，但酒驾的人仍然可能撞上我。同样，我可以尽一切努力阻止别人获取我的信息，但我的最好的朋友可能有一个公开的个人资料。如果我们曾在线互动，那可能会暴露一些关于我的额外信息，比如我的朋友或家乡。
- en: Facebook
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Facebook
- en: 'According to **Tech Crunch**, approximately 2 billion users log in to Facebook
    every month. That''s around 1.3 billion logins daily:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 根据**Tech Crunch**的报道，约有20亿用户每月登录Facebook。每天大约有13亿次登录：
- en: '[https://techcrunch.com/2017/06/27/facebook-2-billion-users/](https://techcrunch.com/2017/06/27/facebook-2-billion-users/)'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://techcrunch.com/2017/06/27/facebook-2-billion-users/](https://techcrunch.com/2017/06/27/facebook-2-billion-users/)'
- en: Over 300 million photos are uploaded daily. And when people go to Facebook,
    they spend 20 minutes per visit, on average. Facebook is an inextricable part
    of daily life. This means this site is not only valuable for reconnaissance, but
    is also useful for the *attack* stage. There are as many as 85 million fake profiles.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 每天上传超过3亿张照片。当人们访问Facebook时，平均每次停留时间为20分钟。Facebook已成为日常生活中不可分割的一部分。这意味着这个网站不仅对侦察有价值，而且对*攻击*阶段也很有用。假冒账户多达8500万个。
- en: 'Let''s look at some of the information we can extrapolate out of a Facebook
    page – John Wayne''s to be precise. I''ve found his Facebook page, and he''s been
    doing some posting, which is kind of bizarre:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下从Facebook页面中可以提取的信息——以约翰·韦恩为例。我找到了他的Facebook页面，他确实有发布一些内容，这有点怪异：
- en: '![Figure 3.25 – Facebook page of John Wayne'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.25 – 约翰·韦恩的Facebook页面'
- en: '](Images/B17486_03_25.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_25.jpg)'
- en: Figure 3.25 – Facebook page of John Wayne
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.25 – 约翰·韦恩的Facebook页面
- en: People will put all kinds of personal information on their Facebook pages because
    we're often unaware that seemingly trivial data can be very revealing in the wrong
    hands. From these pages, and specifically from John Wayne's page, we know his
    personal website, when he went on a business trip, what airline he likes, his
    birthday, his personal achievements, his parents' names, where he's lived, his
    pets' names, his high school, hobbies, and more. We can find out who his friends
    are based on who posts comments on his photos. When he's tagged in a photo, we
    can look at the buildings in the background to see whether we can identify where
    he is. Is his car in the picture? Can you see a license plate number? He posted
    a picture of him and his daughter, so now we know her name and roughly when she
    was born.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 人们会在Facebook页面上发布各种个人信息，因为我们常常没有意识到看似微不足道的数据在错误的人手中会变得非常暴露。从这些页面，特别是从约翰·韦恩的页面上，我们可以得知他的网站、他出差的时间、他喜欢的航空公司、他的生日、个人成就、父母的名字、他住过的地方、宠物的名字、高中、爱好等等。我们还可以通过评论他照片的人来找出谁是他的朋友。当他被标记在一张照片中时，我们可以查看背景中的建筑物，看看能否辨认出他的位置。照片里有他的车吗？能看到车牌号码吗？他发布了一张和女儿的合照，现在我们知道了她的名字以及她大致的出生时间。
- en: As you can see, people tend to put a lot of information online – even for deceased
    celebrities. What does that say about their interest in sharing personal data
    on the internet?
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，人们倾向于在线发布大量信息——即使是已故名人的信息。这说明了什么？它反映出人们对在互联网上分享个人数据的兴趣。
- en: LinkedIn
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: LinkedIn
- en: LinkedIn, designed for business relationships, is also a popular social media
    platform. It has approximately 13 million companies currently listed and a total
    of 467 million users. Let's go over what we could discover with LinkedIn.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: LinkedIn，作为一个专为商业关系设计的平台，还是一个受欢迎的社交媒体平台。目前大约有1300万家公司在其平台上列出，总用户数为4.67亿人。让我们来看看在LinkedIn上我们可以发现什么。
- en: 'The key information you should record in your **Target Information Profile**
    (**TIP**) from LinkedIn is as follows:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该在LinkedIn上记录的**目标信息档案**（**TIP**）的关键信息如下：
- en: Current and past employment data
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当前和过去的就业数据
- en: Educational information, certifications, and skills
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 教育信息、认证和技能
- en: Personal interests, contact information, and location
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 个人兴趣、联系信息和位置
- en: Notable connections and groups they may be a part of
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他们可能参与的显著连接和群组
- en: For example, you can look at the technical skills listed, see where the target
    got their education, and investigate that particular program for more details
    about their abilities. As mentioned before in the *Job sites* section, we're able
    to see what type of platforms the target is used to working with, which may give
    us a sense of what their current employer is using (if that's what we're going
    after). Don't ignore the groups that people join – we're often able to see what
    someone is struggling with because people tend to join groups to help them with
    specific projects or issues they've encountered.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可以查看列出的技术技能，看看目标的教育背景，调查该项目以获取更多关于他们能力的细节。正如之前在*招聘网站*部分提到的，我们能够看到目标习惯使用哪些平台，这可能帮助我们了解他们当前雇主正在使用的工具（如果这是我们关注的对象）。不要忽视人们加入的群组——我们常常能看到某人在群组中的讨论，因为人们往往会加入一些帮助他们解决特定项目或问题的群组。
- en: We will also be able to gather more information if we are connected to the person.
    In some cases, people will accept LinkedIn connection requests just to build their
    professional network. Because this is a professional platform where people don't
    generally share very personal thoughts, even fewer are concerned about the information
    they may expose through this site.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们与某人有联系，我们还可以收集到更多的信息。在某些情况下，人们会接受LinkedIn的连接请求，仅仅是为了建立他们的职业网络。因为这是一个专业平台，人们通常不会分享非常个人化的想法，所以更少有人会担心他们通过这个网站暴露的信息。
- en: 'Let me show you an example using my own profile:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 让我用我自己的个人资料给你举个例子：
- en: '![Figure 3.26 – A LinkedIn page showing the Experience section'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.26 – 显示经验部分的LinkedIn页面](Images/B17486_03_26.jpg)'
- en: '](Images/B17486_03_26.jpg)'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_26.jpg)'
- en: Figure 3.26 – A LinkedIn page showing the Experience section
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.26 – 显示经验部分的LinkedIn页面
- en: In some cases, you can estimate the network infrastructure of a person's current
    employer based on their past experiences. As we go through this profile, you can
    see here that I worked for *My Mentored Learning, Inc*. That's my existing company
    that I use when I go out and teach. We also have *New Horizons* out of Salt Lake
    City. There's *UtahWISP* and *Advanced Technical Training* (another training center).
    Look especially at the certifications that I've listed in *Figure 3.27*. I'd say
    right away that this person knows something about Microsoft Servers, Exchange,
    SharePoint, and Systems Center. In a real-life scenario, you could infer that
    I'm also using that experience (and potentially those specific technologies) in
    my current job.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，你可以根据一个人过去的经历来估算他们当前雇主的网络基础设施。随着我们浏览这个档案，你可以看到我曾为*My Mentored Learning,
    Inc*工作。这是我现在的公司，当我出去讲课时会用到它。我们还有位于盐湖城的*New Horizons*。还有*UtahWISP*和*Advanced Technical
    Training*（另一个培训中心）。特别要看一下我在*图 3.27*中列出的认证。我可以马上说，这个人对微软服务器、Exchange、SharePoint和系统中心有一定了解。在现实生活中，你可以推测我在当前的工作中也使用了这些经验（并可能是这些特定技术）。
- en: '![Figure 3.27 – Licenses & certifications section](Images/B17486_03_27.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.27 – 许可证与认证部分](Images/B17486_03_27.jpg)'
- en: Figure 3.27 – Licenses & certifications section
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.27 – 许可证与认证部分
- en: Researching people
  id: totrans-185
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 研究人员
- en: By now, you know how employees might provide valuable information for our reconnaissance.
    That could be because they share too much on social media, their skills, and past
    employment history, or maybe one of them *is the vulnerability* we want to target
    with a social engineering attack.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经知道了员工如何为我们的侦察提供有价值的信息。这可能是因为他们在社交媒体上分享了太多信息，分享了他们的技能和过去的工作经历，或者其中某个人*就是我们想要通过社会工程攻击来瞄准的弱点*。
- en: Overall, we are trying to create a profile of each person. Even seemingly innocuous
    information may be helpful because people often base their passwords on things
    that they reveal online. Look for information such as job title, hobbies, whether
    they're involved in any type of charitable work, or anything that may be of interest.
    We also want to try to collect things such as phone numbers, home addresses, email
    addresses, and possibly bank or credit card details.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 总体而言，我们试图为每个人创建一个档案。即使是看似无害的信息也可能有用，因为人们经常根据他们在线上透露的内容来设定密码。要查找的信息包括职位、爱好、是否参与任何类型的慈善工作，或其他任何可能感兴趣的信息。我们还希望尽量收集诸如电话号码、家庭地址、电子邮件地址，以及可能的银行或信用卡信息。
- en: To find those things, most people will use third-party products. There are obvious
    sources, such as personal blogs or social media, but there are also dedicated
    online search products for finding this type of information. These include sites
    such as **PeopleLookup** ([https://www.peoplelookup.com/](https://www.peoplelookup.com/)),
    **AnyWho** ([https://www.anywho.com/whitepages](https://www.anywho.com/whitepages)),
    and **CheckPeople** ([https://www.checkpeople.com/](https://www.checkpeople.com/)).
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 为了找到这些信息，大多数人会使用第三方产品。有一些显而易见的来源，如个人博客或社交媒体，但也有一些专门的在线搜索产品，用于查找这类信息。这些包括**PeopleLookup**
    ([https://www.peoplelookup.com/](https://www.peoplelookup.com/))、**AnyWho** ([https://www.anywho.com/whitepages](https://www.anywho.com/whitepages))
    和 **CheckPeople** ([https://www.checkpeople.com/](https://www.checkpeople.com/))
    等网站。
- en: '![Figure 3.28 – Looking up people on PeopleSmart](Images/B17486_03_28.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![图 3.28 – 在PeopleSmart上查找人](Images/B17486_03_28.jpg)'
- en: Figure 3.28 – Looking up people on PeopleSmart
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.28 – 在PeopleSmart上查找人
- en: I used myself as an example and searched with **PeopleSmart**. All I had to
    do was enter my name and the city of Salt Lake City, Utah, and hit **Search**.
    These types of websites search public records, as well as court records, and make
    them accessible to the average person. It's all already out there, but they've
    made it easy for us to get a hold of it. Note that most of these are paid services
    and require a little more information. But even with the free version, I can see
    my old phone number and address. You may want to take this to the next level by
    finding the addresses on **Google** **Maps** so you understand where this person
    lives. Again, the purpose of this is to give you some hints and details that you
    will add to your database of information or your TIP.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我以自己为例，使用**PeopleSmart**进行搜索。我只需输入我的姓名和犹他州盐湖城，然后点击**搜索**。这些网站搜索公共记录以及法院记录，并使其对普通人可访问。这些信息已经公开，但他们让我们很容易获取。请注意，大多数这些是付费服务，需要更多信息。但即使是免费版本，我也可以看到我的旧电话号码和地址。您可能希望通过在**Google**
    **Maps**上找到地址，了解这个人住在哪里。再次强调，这样做的目的是为您提供一些提示和细节，以便将其添加到您的信息数据库或您的TIP中。
- en: Pro-Tip
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 专业提示
- en: Many of these search engines, such as Google and Yahoo, will provide notifications
    on updates. If someone changes something on that website, you could be notified
    of those updates. Trust me – attackers are already doing that to see when you
    post a new job.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 许多搜索引擎，如谷歌和雅虎，会提供更新通知。如果有人在该网站上做出更改，您可能会收到这些更新的通知。相信我 - 攻击者已经在这样做，以查看您何时发布新工作。
- en: Social engineering
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 社会工程学
- en: I define *hacking* as getting a device to do something outside of what it was
    designed to do. That's exactly what social engineering attacks accomplish, or,
    as I like to call it, *human hacking*.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 我将*黑客*定义为让设备执行超出其设计范围的操作。这正是社会工程攻击所实现的，或者，正如我所称之的，*人类黑客*。
- en: By default, humans are not designed to give up personal information. We know
    it's wrong, but we continue exposing information about ourselves because people
    or services convince us that we should somehow trust them (this is called *gaining
    the target's confidence*).
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，人类不是为了泄露个人信息而设计的。我们知道这是错误的，但我们继续暴露关于自己的信息，因为人们或服务说服我们应该以某种方式信任他们（这被称为*获得目标的信任*）。
- en: Information
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 信息
- en: A **McAfee** documentary ([https://www.youtube.com/watch?v=yzU82Ul96pU](https://www.youtube.com/watch?v=yzU82Ul96pU))
    from a few years ago perfectly illustrates the power of social engineering. It
    describes one of the most famous social engineering attacks that targeted a woman
    based solely on the fact that she visited a genealogy website. A group of people
    pretended to be related to her and preyed on her emotions (a hallmark of social
    engineering). They claimed that they were trying to escape a bad situation and
    needed money to do so. She ended up giving them over $500,000\. Ultimately, this
    was revealed by a gray hat hacker who investigated the extent of the damage by
    hacking her again to see how the attackers had targeted her ([https://www.youtube.com/watch?v=F9GylhWsVc8](https://www.youtube.com/watch?v=F9GylhWsVc8)).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 几年前的一部**麦克菲**纪录片([https://www.youtube.com/watch?v=yzU82Ul96pU](https://www.youtube.com/watch?v=yzU82Ul96pU))完美地展示了社会工程学的力量。它描述了一个针对一名女性的最著名的社会工程攻击，仅仅基于她访问家谱网站的事实。一群人假装与她有关系，利用她的情感（社会工程学的特点）。他们声称他们试图摆脱困境，需要钱来做到这一点。最终，她给了他们超过$500,000。最终，这被一名灰帽黑客揭露，他通过再次黑客攻击她来调查袭击的程度，看看攻击者是如何针对她的([https://www.youtube.com/watch?v=F9GylhWsVc8](https://www.youtube.com/watch?v=F9GylhWsVc8))。
- en: So, how is this typically done? One of the most basic methods is **dumpster
    diving**. Surprisingly, this is what it sounds like. You can find a lot of information
    about someone in their trash can. A great example of this was back in the days
    when Microsoft was under investigation by the US Department of Justice about how
    they were implementing **Internet Explorer**. You can read about it at [http://www.newsweek.com/diving-bills-trash-161599](http://www.newsweek.com/diving-bills-trash-161599).
    **Sun Microsystems** hired people to go and dumpster dive at Microsoft's location.
    Because trash is not considered company property, they pulled out some reports
    showing some of Microsoft's questionable behavior.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，这通常是如何实现的呢？其中一种最基本的方法是**垃圾桶潜水**。令人惊讶的是，这正如它听起来的那样。你可以从某人的垃圾桶中找到很多信息。一个很好的例子是，在微软被美国司法部调查其如何实施**Internet
    Explorer**时。你可以在[http://www.newsweek.com/diving-bills-trash-161599](http://www.newsweek.com/diving-bills-trash-161599)上阅读相关内容。**Sun
    Microsystems**雇佣了人员到微软所在地进行垃圾桶潜水。因为垃圾不被视为公司财产，他们从中找出了一些报告，显示了微软的一些可疑行为。
- en: We can also **eavesdrop** on a target. Eavesdropping could include **physical
    listening** (like when you listen to the person in the cubicle next to you), **digital
    eavesdropping** (via email, for example), or so-called **shoulder surfing** (secretly
    watching what people are doing).
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也可以**窃听**目标。窃听可能包括**物理监听**（例如，听隔壁隔间的人说话）、**数字窃听**（比如通过电子邮件）或者所谓的**肩窥**（偷偷观察别人正在做什么）。
- en: I try to protect against the latter as much as I can. In fact, my wife thinks
    I'm crazy because whenever I'm out and about and have to swipe my debit card,
    before I type in my PIN code, I physically turn around and make sure no one is
    trying to shoulder surf. There are also digital methods of shoulder surfing –
    where people use their cell phones to capture images. I'm very suspicious of people
    who are on their cell phones that are right behind me in a checkout line because,
    even if they have the phone up to their ear, their camera could be recording my
    PIN. The same principle can apply to passwords, so be mindful of typing your password
    into your phone in a public place.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 我尽量保护自己免受这种情况的影响。事实上，我的妻子觉得我疯了，因为每当我外出并需要刷借记卡时，在输入密码前，我都会转过身来，确保没有人在旁边偷窥。有些数字方式的肩窥也存在——例如人们用手机拍照。我对那些站在我后面，拿着手机的人非常警觉，因为即便他们把手机放在耳边，他们的摄像头也可能在录制我的密码。相同的原则也适用于密码输入，所以在公共场所输入密码时要特别小心。
- en: Eavesdropping can also be dangerous because it may allow people to more convincingly
    impersonate an employee of an organization that you are legitimately involved
    with. Perhaps you take a phone call in your local grocery store, and you're complaining
    about your bank, Citibank. A scammer might hear you and then call you up and say
    that Citibank has an issue and is calling people up asking them to confirm their
    identities. In that way, they're using minor details about you to get you to reveal
    potentially valuable information about yourself or someone you know.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 窃听也可能是危险的，因为它可能让人更有说服力地冒充你合法关联的组织中的员工。也许你在当地的超市接到电话，抱怨你的银行——花旗银行。一个骗子可能听到了你的抱怨，然后打电话给你，说花旗银行有问题，并正在联系客户确认身份。通过这种方式，他们利用你的一些小细节来让你泄露可能有价值的个人信息，或者你认识的人的信息。
- en: You've got mail = I've got you!
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 你有邮件 = 我抓住你了！
- en: Another great tool for gathering intelligence is *email*. We can track when
    an email has been read, if it has been forwarded, the time spent reading it, any
    links visited, the types of servers being used, the OS the recipient is using,
    and more. There's a lot of information embedded in emails.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个收集情报的好工具是*电子邮件*。我们可以追踪电子邮件何时被阅读、是否被转发、阅读时长、访问的链接、使用的服务器类型、收件人所用的操作系统等等。电子邮件中嵌入了大量信息。
- en: 'Let me give you an example:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 让我给你举个例子：
- en: '![Figure 3.29 – Information embedded in an email'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 3.29 – 电子邮件中嵌入的信息'
- en: '](Images/B17486_03_29.jpg)'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_29.jpg)'
- en: Figure 3.29 – Information embedded in an email
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 图 3.29 – 电子邮件中嵌入的信息
- en: This is an email header I got from *Thrifty Car Rental* – a typical email advertisement
    about some upcoming car rental stuff. Look at this header information – it's available
    for every email. Back in the old days when we didn't have Outlook, a lot of this
    technical information was listed at the beginning of all your emails. Now it's
    hidden, but you can still expose it by looking at advanced headings (typically).
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我从*Thrifty Car Rental*收到的一封邮件头部——一封典型的关于即将到来的汽车租赁活动的广告邮件。看看这个邮件头部信息——每封邮件都会有这些信息。早在没有Outlook的年代，很多技术性信息都会列在所有邮件的开头。现在这些信息被隐藏了，但你仍然可以通过查看高级头部来显示它（通常是这样）。
- en: From the header alone, we can see who the email was sent to, the date and time
    that it was sent, the server it came from, the sender's IP address, and even the
    authentication system being used by the sender. That means if we want to obtain
    the name of one of Thrifty's email servers, all we have to do is sign up for emails
    from them.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 从邮件头部，我们可以看到邮件发送的对象、发送的日期和时间、邮件来源的服务器、发件人的IP地址，甚至发件人使用的认证系统。这意味着，如果我们想获得Thrifty的某个邮件服务器的名称，我们只需注册接收他们的邮件即可。
- en: There are several tools that we can use to gather information from emails that
    are completely invisible to email recipients. **Email Lookup** ([https://www.ipaddresslocation.org/](https://www.ipaddresslocation.org/))
    by **IPAddresslocation.org** scans the headers for you. If you want to track what's
    going on with a particular piece of email, you can use **eMailTrackerPro** ([http://www.emailtrackerpro.com/](http://www.emailtrackerpro.com/)).
    It will show you a map of the likely location of the sender and some WHOIS information.
    **PoliteMail** ([https://www.politemail.com/](https://www.politemail.com/)) is
    a tool you can use with Outlook. It creates a map that shows all the different
    email servers that a particular email hopped through.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个工具可以用来收集邮件中的信息，这些信息对于邮件接收者来说是完全不可见的。**Email Lookup** ([https://www.ipaddresslocation.org/](https://www.ipaddresslocation.org/))
    由**IPAddresslocation.org**提供，可以扫描邮件头部。如果你想追踪某一封邮件的情况，你可以使用**eMailTrackerPro**
    ([http://www.emailtrackerpro.com/](http://www.emailtrackerpro.com/))。它会显示发件人可能位置的地图和一些WHOIS信息。**PoliteMail**
    ([https://www.politemail.com/](https://www.politemail.com/))是一个可以和Outlook配合使用的工具。它会创建一个地图，显示特定邮件经过的不同邮件服务器。
- en: '**DidTheyReadIt** ([http://www.didtheyreadit.com/](http://www.didtheyreadit.com/))
    is another application or tool that you can use to find out whether an email recipient
    read an email or whether they just deleted it right away. **ReadNotify** ([https://www.readnotify.com/](https://www.readnotify.com/))
    can tell you when your email is opened, if it was reopened, if the recipient forwarded
    it to somebody else, and if so, who it was forwarded to. This one also has a nice
    GUI.'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '**DidTheyReadIt** ([http://www.didtheyreadit.com/](http://www.didtheyreadit.com/))
    是另一个应用程序或工具，可以帮助你判断邮件接收者是否阅读了邮件，或者他们是否直接删除了邮件。**ReadNotify** ([https://www.readnotify.com/](https://www.readnotify.com/))
    可以告诉你邮件何时被打开，是否重新打开，接收者是否转发给其他人，如果是的话，转发给了谁。这个工具还带有一个漂亮的图形界面。'
- en: These kinds of services are especially popular in the sales and marketing sector
    – they want to know when you've opened a message, clicked a link in it, and even
    how long you spent reading it. If you're working for a company, the marketing
    team may already have access to these tools.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 这类服务在销售和营销领域尤其流行——他们想知道你何时打开了邮件，点击了其中的链接，甚至你花了多长时间阅读它。如果你为某家公司工作，营销团队可能已经有权访问这些工具。
- en: Today, based on reverse lookup, most email servers drop an email if they believe
    a header has been forged. When an email comes in, the server asks, *What's the
    name of the email server this came from, and what's the IP address in the header*.
    Then it does a reverse lookup to see whether those are still true statements because
    most of the time, when someone is forging a header or spoofing the email address,
    that information won't match up and your email server will drop it. Using these
    types of tools helps security professionals to see whether their email systems
    are susceptible to different types of reconnaissance.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，基于反向查找，大多数邮件服务器如果认为邮件头部被伪造，会将邮件丢弃。当一封邮件到达时，服务器会问，*这封邮件来自哪个邮件服务器，它的IP地址在邮件头中是什么*。然后它会进行反向查找，看看这些信息是否依然有效，因为大多数时候，当有人伪造邮件头部或伪装邮件地址时，这些信息无法匹配，邮件服务器会将其丢弃。使用这些工具可以帮助安全专家查看他们的邮件系统是否容易受到不同类型侦察的攻击。
- en: 'A great example of this is, as I mentioned previously, countless corporations
    falling victim to CEO fraud emails. Attackers spoofed corporate email accounts
    and impersonated executives to fool employees in accounting or HR into executing
    unauthorized wire transfers or sending out confidential tax information, as seen
    in this article:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 一个很好的例子是，正如我之前提到的，许多公司都成为了CEO诈骗邮件的受害者。攻击者伪造了公司电子邮件账户，冒充高管，欺骗财务或人力资源员工执行未经授权的电汇或发送机密税务信息，正如这篇文章所展示的：
- en: '[https://krebsonsecurity.com/2016/04/fbi-2-3-billion-lost-to-ceo-email-scams/](https://krebsonsecurity.com/2016/04/fbi-2-3-billion-lost-to-ceo-email-scams/)'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://krebsonsecurity.com/2016/04/fbi-2-3-billion-lost-to-ceo-email-scams/](https://krebsonsecurity.com/2016/04/fbi-2-3-billion-lost-to-ceo-email-scams/)'
- en: Reconnaissance countermeasures
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 侦察对策
- en: One of my favorite movies is *The Hunt for Red October*. When the torpedoes
    are coming in, Sean Connery yells, "*Release the countermeasures!*" And this is
    exactly what we need to do here. We need to understand the *countermeasures for
    reconnaissance* and what we need to be looking for when performing penetration
    tests (pen tests). You might know GI Joe's famous quote, "*Knowing is half the
    battle.*" This also applies to us. Knowing what you are exposing and knowing what
    the attacker is capable of is half the battle.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 我最喜欢的电影之一是 *《红色警戒》*。当鱼雷飞来时，肖恩·康纳利大喊：“*释放对策！*”而这正是我们在这里需要做的。我们需要了解 *侦察的对策*，以及在进行渗透测试（pen
    test）时需要关注的内容。你可能知道GI Joe的名言：“*知道就是半场胜利。*”这同样适用于我们。了解你暴露了什么，知道攻击者能做什么，才是半场胜利。
- en: In this section, I'll show you how to put your shields up and implement those
    countermeasures, as well as some best practices for reconnaissance. I'll also
    show you how to set up for a pen test and the actual workflow of what you should
    be tracking when doing reconnaissance.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我将展示如何设置防护措施并实施这些对策，同时介绍一些侦察的最佳实践。我还会展示如何进行渗透测试的准备工作以及进行侦察时应跟踪的实际工作流程。
- en: Countermeasures
  id: totrans-220
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 对策
- en: So, how do you defend yourself against the kind of reconnaissance techniques
    we reviewed earlier?
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如何防御我们之前回顾的那种侦察技术呢？
- en: The first thing you need to do is make sure you have configured your routers
    to not respond to certain types of traffic. In other words, ensure they don't
    identify themselves.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，你需要确保已经配置好路由器，使其不会响应某些类型的流量。换句话说，确保它们不会自我标识。
- en: Here's a fun exercise. What's the default **SSID** (**Service Set Identifier**)
    on the **Linksys** router? Oh, that's right, it's **Linksys**. What I like to
    do is take that Linksys router and change the SSID to **D-Link** – because that's
    the default broadcast for a D-Link router. That's misdirection. When an attacker
    comes, they're going to try to launch D-Link attacks at my router and not ones
    for Linksys. So, please, configure your routers to not give out information they
    shouldn't be.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的练习。**Linksys**路由器的默认 **SSID**（**服务集标识符**）是什么？哦，没错，是**Linksys**。我喜欢做的事情是把这个Linksys路由器的SSID改成
    **D-Link**——因为这是D-Link路由器的默认广播名称。这就是误导。当攻击者来时，他们会尝试对我的路由器发起D-Link攻击，而不是Linksys的攻击。所以，请确保你的路由器不会泄露不该泄露的信息。
- en: 'Here are a few tips for protecting yourself:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 这里有一些保护自己的建议：
- en: Make sure that you use some kind of IDS.
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你使用某种IDS（入侵检测系统）。
- en: When you deploy your web servers, don't leave them with the default configurations/settings.
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在部署你的Web服务器时，不要让它们保持默认的配置/设置。
- en: Get rid of *powered by…* because it can give away too much information (you
    saw that earlier when we went through Google hacking techniques).
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 去掉 *powered by...*，因为它可能泄露过多信息（你在我们之前讨论的谷歌黑客技术中已经看到过）。
- en: Enforce security policies. That includes training employees to adhere to the
    policies so they don't respond to someone calling them up and saying, "*Hey, this
    is Billy Bob down at the IT department, I need to reset your password – can you
    tell me what it is currently?*"
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强制执行安全策略。这包括对员工进行培训，确保他们遵守这些政策，以免在有人打电话给他们时就信以为真：“*嘿，我是IT部门的Billy Bob，我需要重置你的密码——你能告诉我目前是什么密码吗？*”
- en: Implement (and enforce) security policies on servers. Just having them and not
    enforcing them is like a parent threatening to ground a kid and not following
    through.
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在服务器上实施（并强制执行）安全策略。仅仅有这些策略却不执行，就像父母威胁要禁足孩子，但没有付诸实践。
- en: Do some reconnaissance on yourself.
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对自己进行一些侦察。
- en: Close unused ports, and if you do have open ports, whitelist them.
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关闭未使用的端口，如果有开放的端口，进行白名单配置。
- en: Disable unnecessary services on web servers. Microsoft has a **Best Practice
    Analyzer** (**BPA**) tool that will go through and tell you what services aren't
    needed that you have turned on based on the role of that server.
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 禁用Web服务器上不必要的服务。微软有一个**最佳实践分析器**（**BPA**）工具，它会检查并告诉你哪些服务是不需要的，取决于服务器的角色。
- en: Prevent search engines from caching. There's a file you can create called a
    **robot.txt** file. This file tells Google which folders and files not to crawl
    or index. The only downside to this is that (you're going to laugh at this one)
    I can use Google to find websites that have **robot.txt** files in them.
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止搜索引擎缓存。你可以创建一个叫做**robot.txt**的文件。这个文件告诉Google哪些文件夹和文件不需要爬取或索引。唯一的缺点是（你会笑这个）我可以使用Google来查找那些包含**robot.txt**文件的网站。
- en: Disable directory listings in order to prevent people from learning the OS or
    doing directory traversal.
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 禁用目录列表，以防止人们了解操作系统或进行目录遍历。
- en: 'Configure the internal and external DNS (separately):'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置内部和外部DNS（分别进行）：
- en: For example, if your public-facing site is **gotham.com**, make sure your internal
    DNS environment is not also **gotham.com**.
  id: totrans-236
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如，如果你的公开网站是**gotham.com**，确保你的内部DNS环境也不是**gotham.com**。
- en: Restrict input types (such as pipes, commas, and colons). This will be even
    clearer if you watch videos on SQL injection, as restricting your input types
    is what's going to save your bacon.
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制输入类型（如管道符、逗号和冒号）。如果你观看SQL注入的视频，你会更清楚这一点，因为限制输入类型就是拯救你一命的关键。
- en: Avoid cross-linking on your site (linking to other pages within your website).
    That just helps Google.
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 避免在你的网站上进行交叉链接（链接到网站内部的其他页面）。这样只会帮助Google。
- en: Always remember – humans are the weakest link. In fact, my favorite quote is,
    "*There is no patch for human stupidity.*" There was a report that the IRS started
    a big push to train all their employees on how to avoid social engineering attacks.
    Within 30 days, they pen tested them, and 65% of their employees gave up their
    information. Train your employees and help them set up encryption or stronger
    passwords. Send out updates through an organizational newsletter if you've got
    one. It pays off.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 永远记住——人类是最弱的环节。实际上，我最喜欢的一句话是，“*人类愚蠢没有补丁*。”有报告指出，美国国税局（IRS）开始大力推动培训所有员工如何避免社交工程攻击。在30天内，他们进行了渗透测试，65%的员工泄露了他们的信息。培训你的员工，并帮助他们设置加密或更强的密码。如果你有组织的通讯，可以通过它发布更新。这会带来回报。
- en: 'Now, I know that reconnaissance can be overwhelming as far as remembering what
    to look for, so I''ve got a great solution for you. Wander over to the **OSINT
    Framework** ([https://osintframework.com/](https://osintframework.com/)). As its
    name implies (*Open Source Intel*), this site will help you cover all your bases
    during your research by using open source (or publicly available) intel. Plus,
    it might give you some other ideas of where to find more intel on your target:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我知道侦察可能让人感到不知所措，尤其是要记住该寻找什么，所以我为你准备了一个很好的解决方案。去看看**OSINT框架**（[https://osintframework.com/](https://osintframework.com/)）。正如它的名字所示（*开源情报*），这个网站将帮助你在研究过程中利用开源（或公开可用的）情报，覆盖所有基础。此外，它可能还会给你一些新的想法，帮助你在目标上找到更多的情报：
- en: '![Figure 3.30 – OSINT Framework'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '![图3.30 – OSINT框架'
- en: '](Images/B17486_03_30.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17486_03_30.jpg)'
- en: Figure 3.30 – OSINT Framework
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 图3.30 – OSINT框架
- en: With that, we have come to the end of this chapter. Congratulations on completing
    it successfully.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 这样，我们就结束了本章内容。恭喜你成功完成了这一章。
- en: Summary
  id: totrans-245
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Our quest led us to investigate how attackers gather information from their
    target's website to know the target's exact business functions, important contact
    information, clients and partners, the management team, and so on. We learned
    how to use WHOIS, the command-line interface, ping and DNS, and SOA to gather
    information. We learned about more tools that help with reconnaissance and footprinting,
    such as Sam Spade, Netcraft, and the Wayback Machine.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的探索让我们调查了攻击者如何从目标网站收集信息，以了解目标的业务功能、重要联系信息、客户和合作伙伴、管理团队等。我们学习了如何使用WHOIS、命令行接口、ping和DNS、SOA来收集信息。我们还学习了更多帮助进行侦察和足迹分析的工具，如Sam
    Spade、Netcraft和Wayback Machine。
- en: We saw how what the information organizations give away for free can reveal
    a ton of vulnerabilities. So do job sites, marketing materials, customer support,
    social networking profiles, and financial and competitive analysis data.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 我们看到组织所提供的免费信息如何揭示出大量的漏洞。工作网站、营销材料、客户支持、社交网络资料以及财务和竞争分析数据也能揭示许多问题。
- en: We also discussed employees as the weakest link. Their hobbies, the things they
    share or post online, the places they go to after work, what they buy, and more
    all give attackers the clues they need. We then discussed how attackers use these
    clues to join the groups their targets frequent, befriend them or their friends
    on Facebook, connect on LinkedIn, and/or find a way to socially engineer them.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还讨论了员工作为最薄弱环节的问题。他们的兴趣爱好、在线分享或发布的内容、下班后去的地方、购买的物品等，都为攻击者提供了所需的线索。接着，我们讨论了攻击者如何利用这些线索，加入目标常去的群组，成为他们或他们朋友的
    Facebook 朋友，在 LinkedIn 上建立联系，和/或找到方法进行社会工程学攻击。
- en: In the *People search* section, we learned how to profile people using third-party
    products such as PeopleLookUp, Anywho, and CheckPeople.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 在*人员搜索*部分，我们学习了如何使用第三方产品（如 PeopleLookUp、Anywho 和 CheckPeople）来进行人员画像。
- en: Now that we've done some reconnaissance, our next step is to start scanning
    the networks we've discovered. We'll do this to find live targets and understand
    the infrastructure of the target organization. Scanning is done via various techniques
    – some passive, and others active.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经进行了初步侦察，下一步是开始扫描我们发现的网络。我们将通过扫描来寻找活跃的目标，并了解目标组织的基础设施。扫描可以通过多种技术进行——有些是被动的，有些是主动的。
- en: Questions
  id: totrans-251
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'As we conclude, here is a list of questions for you to test your knowledge
    regarding this chapter''s material. You will find the answers in the *Assessments*
    section of the *Appendix*:'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 结束时，这里有一系列问题，供你测试自己对本章内容的掌握情况。你可以在*附录*中的*评估*部分找到答案：
- en: Which information may be gathered using nslookup?
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 nslookup 可以收集哪些信息？
- en: A DNS server location
  id: totrans-254
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: DNS 服务器位置
- en: Hostnames and IP addresses
  id: totrans-255
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 主机名和 IP 地址
- en: WHOIS intel
  id: totrans-256
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: WHOIS 情报
- en: A nameserver and operating systems
  id: totrans-257
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 域名服务器和操作系统
- en: Which of the following is the most accurate description of footprinting?
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下哪项最准确地描述了足迹分析？
- en: Investigating a target
  id: totrans-259
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 调查目标
- en: Enumeration of services
  id: totrans-260
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务枚举
- en: Discovery of services
  id: totrans-261
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 服务发现
- en: Dialogue with people
  id: totrans-262
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与人对话
- en: Which record will disclose details about a domain's mail server?
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个记录会透露关于域名邮件服务器的详细信息？
- en: Q
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Q
- en: MS
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: MS
- en: MX
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: MX
- en: A
  id: totrans-267
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: A
- en: What alternative options do you have if you can't collect enough information
    from a target directly?
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你无法直接从目标收集到足够的信息，你有哪些替代选择？
- en: Social engineering
  id: totrans-269
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 社会工程学
- en: EDGAR
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: EDGAR
- en: Competitive analysis
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 竞争分析
- en: Scanning
  id: totrans-272
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描
