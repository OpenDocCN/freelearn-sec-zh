- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 序言
- en: As more organizations around the world migrate their data and their workloads
    to the cloud, engineering teams as well as security professionals face the complex
    task of securing production environments against an increasing number of cloud-related
    threats and risks. This has led to a surge in demand for security professionals
    capable of attacking and defending cloud applications and systems. Security professionals
    seeking career growth and looking to excel in their careers should learn how to
    set up various types of vulnerable-by-design lab environments in the cloud to
    sharpen their skills even further.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 随着全球越来越多的组织将其数据和工作负载迁移到云端，工程团队以及安全专业人士面临着在生产环境中防范日益增多的与云相关的威胁和风险的复杂任务。这导致了对能够攻击和防御云应用程序和系统的安全专业人员的需求激增。寻求职业发展并希望在职业生涯中脱颖而出的安全专业人士应该学会如何在云中建立各种类型的易受攻击的实验环境，以进一步磨练他们的技能。
- en: I have written this book to help you and other professionals design, build,
    and automate penetration testing lab environments running on **Amazon Web Services**
    (**AWS**), **Microsoft Azure**, and **Google Cloud Platform** (**GCP**). You will
    learn how to automate the preparation and configuration of cloud resources using
    **Infrastructure-as-Code** (**IaC**) solutions and strategies. You will have the
    opportunity to harness the potential of **generative AI** tools to significantly
    accelerate the process of building and automating vulnerable-by-design lab environments.
    In addition to these, you will learn how to use various offensive security tools
    and techniques to validate and test the vulnerabilities and misconfigurations
    in our cloud-based labs.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我写这本书是为了帮助您和其他专业人士设计、构建和自动化运行在**亚马逊网络服务**（**AWS**）、**微软Azure**和**谷歌云平台**（**GCP**）上的渗透测试实验室环境。您将学习如何使用**基础设施即代码**（**IaC**）解决方案和策略自动化准备和配置云资源。您将有机会利用**生成式人工智能**工具的潜力，显著加速构建和自动化易受攻击的实验环境的过程。除此之外，您还将学习如何使用各种攻击性安全工具和技术来验证和测试我们基于云的实验室中的漏洞和配置错误。
- en: By the end of this book, you should be able to build and automate various types
    of penetration testing labs in multiple cloud platforms where you can practice
    and experiment with different types of attacks and techniques.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 通过本书，您应该能够在多个云平台上构建和自动化各种类型的渗透测试实验室，从而可以练习和尝试不同类型的攻击和技术。
- en: Who this book is for
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合对象
- en: This book is intended for security engineers, cloud engineers, and aspiring
    security professionals who want to learn more about penetration testing, cloud
    security, and infrastructure automation. It highlights the use of **Infrastructure-as-Code**
    solutions, along with **Generative AI** tools, to accelerate the preparation of
    vulnerable-by-design lab environments on **AWS**, **Azure**, and **GCP**. If you
    are planning to advance your career in cloud security and you want to learn how
    to manage the complexity, costs, and risks associated with building and managing
    hacking lab environments in the cloud, then this book is for you.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书旨在面向安全工程师、云工程师和有志于学习更多有关渗透测试、云安全和基础设施自动化的安全专业人士。它强调了使用**基础设施即代码**解决方案以及**生成式人工智能**工具，加速在**AWS**、**Azure**和**GCP**上准备易受攻击的实验环境。如果您计划在云安全领域发展自己的职业，并希望学习如何管理在云中构建和管理黑客实验环境所涉及的复杂性、成本和风险，那么这本书适合您。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖内容
- en: '*[Chapter 1](B19755_01.xhtml)*, *Getting Started with Penetration Testing Labs
    in the Cloud*, introduces the key concepts to help you get started with building
    penetration testing labs in the cloud. In this chapter, we will also examine the
    considerations and risks involved when building these vulnerable-by-design labs
    in the cloud.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第1章](B19755_01.xhtml)*，*开始使用云中的渗透测试实验室*，介绍了帮助您开始构建云中渗透测试实验室的关键概念。在本章中，我们还将研究在云中构建这些易受攻击的实验环境时涉及的考虑因素和风险。'
- en: '*[Chapter 2](B19755_02.xhtml)*, *Preparing Our First Vulnerable Cloud Lab Environment*,
    allows you to get your feet wet by setting up and configuring your first vulnerable
    lab environment in the cloud.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第2章](B19755_02.xhtml)*，*准备我们的第一个易受攻击的云实验室环境*，让您通过在云中设置和配置您的第一个易受攻击的实验环境来入门。'
- en: '*[Chapter 3](B19755_03.xhtml)*, *Succeeding with Infrastructure-as-Code Tools
    and Strategies*, details how you can use IaC solutions to build your penetration
    testing lab environments automatically.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第3章](B19755_03.xhtml)*, *成功使用基础设施即代码工具和策略*，详细介绍了如何使用IaC解决方案自动构建渗透测试实验室环境。'
- en: '*[Chapter 4](B19755_04.xhtml)*, *Setting Up Isolated Penetration Testing Lab
    Environments on GCP*, shows you how to isolate and protect vulnerable lab resources
    from unauthorized external attacks using a properly configured network environment.
    Inside this secure network environment, we will set up a target VM instance that
    hosts an intentionally vulnerable web application called the OWASP Juice Shop.
    In addition to this, we will launch an attacker VM instance and configure it with
    browser-based access to its desktop environment.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第4章](B19755_04.xhtml)*, *在GCP上设置隔离渗透测试实验室环境*，展示了如何使用正确配置的网络环境将脆弱的实验室资源与外部未授权攻击隔离和保护。在这个安全的网络环境中，我们将设置一个目标虚拟机实例，托管一个故意存在漏洞的Web应用程序，名为OWASP
    Juice Shop。除此之外，我们还将启动一个攻击者虚拟机实例，并将其配置为通过浏览器访问其桌面环境。'
- en: '*[Chapter 5](B19755_05.xhtml)*, *Setting Up Isolated Penetration Testing Lab
    Environments on Azure*, presents how to set up and automate an isolated penetration
    testing lab environment on Azure. In this chapter, we will build a lab where we
    can practice container breakout techniques to gain unauthorized access to the
    host system. In addition to this, we will look at how managed identities in Azure
    can be abused to gain unauthorized access to other cloud resources.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第5章](B19755_05.xhtml)*, *在Azure上设置隔离渗透测试实验室环境*，介绍了如何在Azure上设置和自动化一个隔离的渗透测试实验室环境。在本章中，我们将构建一个实验室，练习容器突破技术，以便未经授权访问主机系统。此外，我们还将讨论如何滥用Azure中的托管身份，以获得对其他云资源的未授权访问。'
- en: '*[Chapter 6](B19755_06.xhtml)*, *Setting Up Isolated Penetration Testing Lab
    Environments on AWS*, focuses on how to build and automate the preparation of
    an isolated penetration testing lab environment on AWS. In this chapter, we will
    prepare a lab setup where we can practice pivoting techniques that can be used
    to access internal systems and networks using the initially compromised machine.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第6章](B19755_06.xhtml)*, *在AWS上设置隔离渗透测试实验室环境*，重点讲解如何在AWS上构建和自动化隔离的渗透测试实验室环境的准备工作。在本章中，我们将准备一个实验室环境，练习可以使用初始被攻破的机器访问内部系统和网络的枢纽技术。'
- en: '*[Chapter 7](B19755_07.xhtml)*, *Designing and Building an IAM Privilege Escalation
    Lab*, demonstrates how to set up a vulnerable lab environment for IAM privilege
    escalation on AWS. In this chapter, we also have our first look into how we can
    use generative AI solutions to generate code for use in penetration testing simulations.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第7章](B19755_07.xhtml)*, *设计和构建IAM权限提升实验室*，展示了如何在AWS上设置一个脆弱的IAM权限提升实验室环境。在本章中，我们还将首次了解如何使用生成性AI解决方案生成代码，用于渗透测试模拟。'
- en: '*[Chapter 8](B19755_08.xhtml)*, *Designing and Building a Vulnerable Active
    Directory Lab*, focuses on how to set up a vulnerable Active Directory lab on
    Azure. Here, we’ll also learn how to use various tools such as Kerbrute, Impacket,
    and John the Ripper to validate and assess whether the penetration testing lab
    environment has been set up and (mis)configured correctly.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第8章](B19755_08.xhtml)*, *设计和构建脆弱的Active Directory实验室*，重点讲解如何在Azure上设置一个脆弱的Active
    Directory实验室。在这里，我们还将学习如何使用各种工具，如Kerbrute、Impacket和John the Ripper，来验证和评估渗透测试实验室环境是否已正确设置和（误）配置。'
- en: '*[Chapter 9](B19755_09.xhtml)*, *Recommended Strategies and Best Practices*,
    presents the best practices and techniques for improving and enhancing the lab
    environments discussed in the previous chapters. In this chapter, we’ll also dive
    a bit deeper into how we can use generative AI tools for IaC template code creation,
    infrastructure cost estimation, and automation script development.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '*[第9章](B19755_09.xhtml)*, *推荐的策略和最佳实践*，介绍了改善和增强前几章中讨论的实验室环境的最佳实践和技术。在本章中，我们还将深入探讨如何使用生成性AI工具来创建IaC模板代码、进行基础设施成本估算和开发自动化脚本。'
- en: To get the most out of this book
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了最大化本书的学习效果
- en: You will need an AWS account, a Microsoft Azure account, a GCP account, and
    a ChatGPT (i.e., OpenAI) account, along with a stable internet connection to complete
    the hands-on solutions in this book.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要一个AWS账户、一个Microsoft Azure账户、一个GCP账户以及一个ChatGPT（即OpenAI）账户，并且需要稳定的互联网连接，才能完成本书中的动手实验。
- en: '| **Software/hardware covered in** **the book** | **Operating** **system requirements**
    |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| **本书中涵盖的软件/硬件** | **操作系统要求** |'
- en: '| Chrome/Firefox/Safari/Edge/Opera (or another alternative) | Windows/macOS/Linux
    |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| Chrome/Firefox/Safari/Edge/Opera（或其他替代浏览器） | Windows/macOS/Linux |'
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book’s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting** **of code.**'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果你使用的是本书的数字版，我们建议你自己输入代码或通过本书的 GitHub 仓库访问代码（下一节将提供相关链接）。这样做可以帮助你避免与复制粘贴代码相关的潜在错误**
    **。**'
- en: Download the example code files
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/Building-and-Automating-Penetration-Testing-Labs-in-the-Cloud](https://github.com/PacktPublishing/Building-and-Automating-Penetration-Testing-Labs-in-the-Cloud).
    If there’s an update to the code, it will be updated in the GitHub repository.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从 GitHub 下载本书的示例代码文件，链接为 [https://github.com/PacktPublishing/Building-and-Automating-Penetration-Testing-Labs-in-the-Cloud](https://github.com/PacktPublishing/Building-and-Automating-Penetration-Testing-Labs-in-the-Cloud)。如果代码有更新，它会在
    GitHub 仓库中更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还有其他来自丰富书籍和视频目录的代码包，可以在 [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)
    上找到。快来看看吧！
- en: Conventions used
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '**Code in text**: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: “Make sure to replace **<ATTACKER VM PUBLIC IP ADDRESS>**
    with the **attacker_vm_public_ip** output value after running the **terraform
    apply** command in an earlier step.”'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '**文中的代码**：表示文本中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账号。例如：“确保将**<ATTACKER
    VM PUBLIC IP ADDRESS>**替换为运行**terraform apply**命令后得到的**attacker_vm_public_ip**输出值。”'
- en: 'A block of code is set as follows:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块如下所示：
- en: '[PRE0]'
  id: totrans-28
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起你对代码块中特定部分的注意时，相关的行或项目会以粗体显示：
- en: '[PRE1]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    “In the last tab (**EC2 serial console**), click the **Connect** button to access
    the instance via the EC2 serial console.”'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要词汇或屏幕上显示的词语。例如，菜单或对话框中的词汇会以**粗体**显示。示例：“在最后一个标签页（**EC2 串行控制台**）中，点击**连接**按钮通过
    EC2 串行控制台访问实例。”'
- en: Tips or important notes
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 如下所示。
- en: Get in touch
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at [customercare@packtpub.com](mailto:customercare@packtpub.com) and
    mention the book title in the subject of your message.'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果你对本书的任何部分有疑问，请通过电子邮件与我们联系：[customercare@packtpub.com](mailto:customercare@packtpub.com)，并在邮件主题中提及书名。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误表**：尽管我们已尽最大努力确保内容的准确性，但难免会出现错误。如果你在本书中发现任何错误，我们非常感谢你向我们报告。请访问 [www.packtpub.com/support/errata](https://www.packtpub.com/support/errata)
    并填写表格。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packtpub.com](mailto:copyright@packtpub.com)
    with a link to the material.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果你在互联网上发现我们的作品的非法复制版本，烦请提供该材料的地址或网站名称。请通过 [copyright@packtpub.com](mailto:copyright@packtpub.com)
    与我们联系，并附上该材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](https://authors.packtpub.com).'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您擅长某个话题，并且有兴趣撰写或参与书籍的创作，请访问 [authors.packtpub.com](https://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you’ve read *Building and Automating Penetration Testing Labs in the Cloud*,
    we’d love to hear your thoughts! Please [click here to go straight to the Amazon
    review page](https://packt.link/r/1837632391) for this book and share your feedback.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在阅读完*《云端渗透测试实验室的构建与自动化》*后，我们非常希望听到您的反馈！请[点击这里直接进入亚马逊的评论页面](https://packt.link/r/1837632391)并分享您的想法。
- en: Your review is important to us and the tech community and will help us make
    sure we’re delivering excellent quality content.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评价对我们和技术社区非常重要，将帮助我们确保提供高质量的内容。
- en: Download a free PDF copy of this book
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载本书的免费PDF副本
- en: Thanks for purchasing this book!
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 感谢购买本书！
- en: Do you like to read on the go but are unable to carry your print books everywhere?
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 您是否喜欢在路上阅读，但又无法随身携带纸质书籍？
- en: Is your eBook purchase not compatible with the device of your choice?
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 您的电子书购买是否与您选择的设备不兼容？
- en: Don’t worry, now with every Packt book you get a DRM-free PDF version of that
    book at no cost.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 不用担心，现在购买每本Packt书籍，您都会免费获得该书的无DRM PDF版本。
- en: Read anywhere, any place, on any device. Search, copy, and paste code from your
    favorite technical books directly into your application.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在任何地方、任何设备上随时阅读。搜索、复制并将您最喜欢的技术书籍中的代码直接粘贴到您的应用程序中。
- en: The perks don’t stop there, you can get exclusive access to discounts, newsletters,
    and great free content in your inbox daily
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 福利不仅仅是这些，您还可以获得独家的折扣、新闻通讯以及每天直接发送到您邮箱的精彩免费内容。
- en: 'Follow these simple steps to get the benefits:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 按照这些简单的步骤来获取福利：
- en: Scan the QR code or visit the link below
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描二维码或访问以下链接
- en: '![](image/B19755_QR_Free_PDF.jpg)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](image/B19755_QR_Free_PDF.jpg)'
- en: '[https://packt.link/free-ebook/9781837632398](https://packt.link/free-ebook/9781837632398)'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://packt.link/free-ebook/9781837632398](https://packt.link/free-ebook/9781837632398)'
- en: Submit your proof of purchase
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提交您的购买凭证
- en: That’s it! We’ll send your free PDF and other benefits to your email directly
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 就是这样！我们会直接通过电子邮件向您发送免费的PDF和其他福利。
- en: 'Part 1: A Gentle Introduction to Vulnerable-by-Design Environments'
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1部分：易受攻击设计环境简明介绍
- en: In this part, you will be introduced to the key concepts around how to build
    and automate penetration testing labs in the cloud.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分将介绍如何在云端构建和自动化渗透测试实验室的关键概念。
- en: 'This part contains the following chapters:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 本部分包含以下章节：
- en: '*[Chapter 1](B19755_01.xhtml)*, *Getting Started with Penetration Testing Labs
    in the Cloud*'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*[第1章](B19755_01.xhtml)*，*云端渗透测试实验室入门*'
- en: '*[Chapter 2](B19755_02.xhtml)*, *Preparing Our First Vulnerable Cloud Lab Environment*'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*[第2章](B19755_02.xhtml)*，*准备我们的第一个易受攻击的云实验室环境*'
- en: '*[Chapter 3](B19755_03.xhtml)*, *Succeeding with Infrastructur**e as C**ode
    Tools and Strategies*'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*[第3章](B19755_03.xhtml)*，*成功使用基础设施即代码工具和策略*'
