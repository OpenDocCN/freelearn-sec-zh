- en: Chapter 1. Understanding Wireless Network Security and Risks
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章：理解无线网络安全性和风险
- en: In this chapter, we are going to review which wireless technologies allow data
    transfer, focusing on the Wi-Fi technology as the most important one for building
    our own penetration testing lab. As it is a very important topic for building
    a highly secure lab, we will also review the common Wi-Fi security mechanisms
    and their security risks in conjunction with an overview of the typical wireless
    attack methodology.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将回顾哪些无线技术允许数据传输，重点介绍Wi-Fi技术，因为它是构建我们自己的渗透测试实验室中最重要的技术。由于这是构建高安全性实验室的一个非常重要的话题，我们还将回顾常见的Wi-Fi安全机制及其安全风险，并概述典型的无线攻击方法。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Understanding wireless environment and threats
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解无线环境和威胁
- en: Common WLAN protection mechanisms and their flaws
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常见WLAN保护机制及其缺陷
- en: Getting familiar with the Wi-Fi attack workflow
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉Wi-Fi攻击流程
- en: Understanding wireless environment and threats
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解无线环境和威胁
- en: As the first and the key step towards understanding wireless security and building
    a highly secure wireless lab, the nature of wireless media and its place in the
    modern life should be understood. In this section, we will be reviewing the main
    specifics and threats of wireless networking.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 作为理解无线安全性和构建高安全性无线实验室的第一步和关键步骤，应当理解无线媒介的性质及其在现代生活中的作用。在本节中，我们将回顾无线网络的主要特点和威胁。
- en: Wired networks use cables for data transmission, thus considered a "controlled"
    environment, protected by a physical level of security. In order to gain access
    to a wired network, an attacker would need to overcome any physical security systems
    to access buildings or other controlled zones and also overcome logical security
    systems, such as firewalls and **intrusion detection/prevention systems** (**IDPS**).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 有线网络通过电缆进行数据传输，因此被视为“受控”环境，受到物理安全级别的保护。为了访问有线网络，攻击者需要克服任何物理安全系统，进入建筑物或其他受控区域，并且还需要克服逻辑安全系统，如防火墙和**入侵检测/预防系统**（**IDPS**）。
- en: In the case of wireless networks, there is an open environment used with almost
    complete lack of control. Providing the security level equivalent to physical
    security in wired networks is not that easy nowadays. Wireless network segments
    can become available from another floor of the same building, neighboring buildings,
    or even outside—only signal strength limits physical borders of a wireless network.
    Therefore, unlike wired networks where connection points are known, a wireless
    network can be accessed from anywhere—as long as the signal is strong enough.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在无线网络的情况下，环境是开放的，几乎没有控制。如今，提供相当于有线网络物理安全的安全级别并不容易。无线网络的信号可以从同一建筑的另一层、邻近建筑，甚至外部接收到——无线网络的物理边界仅由信号强度限制。因此，与有线网络中连接点已知不同，无线网络可以从任何地方访问——只要信号足够强。
- en: An overview of wireless technologies
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 无线技术概览
- en: Nowadays, various technologies are used for wireless data communications. They
    differ in used media, frequency bands, bandwidth, encoding methods, scopes of
    application, and other characteristics. Let's start by defining the term **wireless
    communications**. We would say it is a remote communication between two or more
    devices according to certain rules or specifications without establishing a physical
    connection via cables or wires.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，各种技术被用于无线数据通信。它们在所使用的媒介、频段、带宽、编码方法、应用范围和其他特性上有所不同。让我们从定义**无线通信**这一术语开始。我们认为，它是指根据特定规则或规格，在没有通过电缆或线缆建立物理连接的情况下，两台或多台设备之间的远程通信。
- en: 'In order to understand our definition more clearly, let''s define the characteristics
    that can be assigned to the discussed method of communication:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更清晰地理解我们的定义，让我们定义可以赋予所讨论的通信方法的特征：
- en: '**Topology**:'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拓扑结构**：'
- en: Point-to-point
  id: totrans-14
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点对点
- en: Point-to-multipoints
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点对多点
- en: '**Use cases**:'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用场景**：'
- en: 'Corporate infrastructure: Office and technological'
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 企业基础设施：办公和技术
- en: Providing a service
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提供服务
- en: Personal usage
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 个人使用
- en: '**Range**:'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**范围**：'
- en: '**Wireless personal area networks** (**WPAN**): Bluetooth, IrDA, and RFID'
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无线个人区域网络**（**WPAN**）：蓝牙、红外线（IrDA）和射频识别（RFID）'
- en: '**Wireless local area networks** (**WLAN**): Wi-Fi'
  id: totrans-22
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无线局域网**（**WLAN**）：Wi-Fi'
- en: '**Wireless metropolitan area networks** (**WMAN**) and **wireless wide area
    networks** (**WWAN**): WiMAX, GSM, and UMTS'
  id: totrans-23
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**无线城域网**（**WMAN**）和**无线广域网**（**WWAN**）：WiMAX、GSM和UMTS'
- en: '**Speed**:'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**速度**：'
- en: 1 Mbit/s for WPAN
  id: totrans-25
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: WPAN的1 Mbit/s
- en: 54 Mbit/s for WLAN
  id: totrans-26
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: WLAN的54 Mbit/s
- en: 300 Mbit/s for WMAN
  id: totrans-27
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: WMAN的300 Mbit/s
- en: 15 Mbit/s for WWAN
  id: totrans-28
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: WWAN的15 Mbit/s
- en: 'A brief but very capacious way of mapping the two most important characteristics
    of wireless technologies (the data transmission speed and the range) is depicted
    in the following diagram:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表简洁而直观地映射了无线技术的两个最重要特性（数据传输速度和覆盖范围）：
- en: '![An overview of wireless technologies](../images/00002.jpeg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![无线技术概览](../images/00002.jpeg)'
- en: The classification of wireless communications based on range and data transfer
    speed
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 基于覆盖范围和数据传输速度的无线通信分类
- en: As we now have a clear definition, we can proceed to look at some of the types
    of wireless data transfer technologies and their specifics.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有了明确的定义，可以继续探讨一些无线数据传输技术及其特点。
- en: Let's start with the mobile cellular communication, which is probably the most
    common type of wireless data transmission nowadays. Cellular communication is
    a mobile network—a type of mobile communication that is based on the cellular
    network. The key feature is that the overall coverage area is divided into cells.
    Cells partially overlap and together form a network. A network comprises separate
    base stations operating in the same frequency band and each covering its own area
    (cell) with a radio signal and switching equipment. Cells have unique IDs allowing
    to determine the current locations of subscribers and provide connection continuity
    when a person is moving from a coverage area of one base station into a range
    of another one.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从移动蜂窝通信开始，这是现在最常见的一种无线数据传输方式。蜂窝通信是一种移动网络——基于蜂窝网络的一种移动通信。其关键特性是整个覆盖区域被划分为多个小区。小区之间部分重叠，共同形成一个网络。网络由多个基站组成，这些基站在相同频段内运行，各自覆盖自己的区域（小区）并提供无线信号和交换设备。小区具有唯一的ID，能够确定用户的当前位置，并在用户从一个基站的覆盖区域移动到另一个基站的覆盖范围时，保持连接的连续性。
- en: 'The history of mobile communications began in the middle of the 20th century
    and has passed four major milestones in its development until and the present
    time:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 移动通信的历史始于20世纪中期，发展至今经历了四个主要的里程碑：
- en: '**1G** (**G** is short for generation): Analog cellular communication (based
    on AMPS, NAMPS, and NMT-450 standards)'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**1G**（**G**代表代）：模拟蜂窝通信（基于AMPS、NAMPS和NMT-450标准）'
- en: '**2G**: Digital cellular communication (GSM and CDMA)'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**2G**：数字蜂窝通信（GSM和CDMA）'
- en: '**3G**: Broadband digital cellular communication (UMTS)'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**3G**：宽带数字蜂窝通信（UMTS）'
- en: '**4G**: Cellular mobile communication with high demands (LTE)'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**4G**：满足高需求的蜂窝移动通信（LTE）'
- en: Currently, the most forward-looking solutions are UMTS and LTE. Both data transmission
    standards have been inherited from GSM and allow us to transmit voice or data
    and provide a set of various services. The distinctive feature of these standards
    compared with the older generations is the ability to transfer data at a higher
    speed (up to 21 Mbit/s for incoming data in case of UMTS and up to 300 Mbit/s
    for incoming data in case of LTE). These speeds allow working on the Internet
    in comfortable conditions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，最具前瞻性的解决方案是UMTS和LTE。这两种数据传输标准继承了GSM，并能够传输语音或数据，提供各种服务。这些标准与旧一代相比的独特之处在于能够以更高的速度传输数据（UMTS的入站数据速度可达21
    Mbit/s，LTE的入站数据速度可达300 Mbit/s）。这些速度使得在互联网上的工作变得更加舒适。
- en: Since there is a large amount of existing standards and a lot of differences
    between the government requirements, various frequencies for data transmission
    and information protection techniques based on different encryption algorithms
    can be used in different countries and industries.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 由于存在大量现有标准，并且不同国家和行业的政府要求存在差异，因此可以在不同国家和行业使用基于不同加密算法的各种频率进行数据传输和信息保护。
- en: 'The next wireless technology that we are going to review is Bluetooth (representative
    of WPAN). Bluetooth allows information exchange between personal devices such
    as mobile phones, personal computers, tablets, input devices (microphones, keyboards,
    and joysticks), and output devices (printers and headsets). Bluetooth operates
    in the free and widely available radio frequencies (between 2.4 to 2.485 GHz)
    for short-range communication at a distance of typically up to 10 meters (but
    there are exceptions) between devices and supports two types of connection: point-to-point
    and point-to-multipoint.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们要回顾的无线技术是蓝牙（WPAN的代表）。蓝牙允许在个人设备之间交换信息，如手机、个人电脑、平板电脑、输入设备（麦克风、键盘和游戏手柄）以及输出设备（打印机和耳机）。蓝牙在免费且广泛可用的无线电频率（2.4至2.485
    GHz之间）上工作，用于短距离通信，典型距离为最多10米（但也有例外），并支持两种连接方式：点对点和点对多点。
- en: 'Bluetooth has a multilevel architecture consisting of the main protocol and
    a set of auxiliary protocols that implement the following:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 蓝牙具有多层架构，包括主协议和一组辅助协议，这些协议实现以下功能：
- en: Creating and managing a radio connection between two devices
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在两个设备之间创建和管理无线连接
- en: Discovering services provided by devices and determining parameters
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现设备提供的服务并确定参数
- en: Creating a virtual serial data stream and emulating RS-232 control signals
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建虚拟串行数据流并模拟RS-232控制信号
- en: Data transmission from another protocol stack
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从其他协议栈传输数据
- en: Managing high-level services like audio distribution
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理高层服务，如音频分配
- en: 'In addition to protocols that implement these functionalities, the Bluetooth
    protocol stack also contains protocols such as:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 除了实现这些功能的协议外，蓝牙协议栈还包含以下协议：
- en: '**PPP** (**Point-to-Point Protocol**)'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PPP**（**点对点协议**）'
- en: '**TCP/IP**'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**TCP/IP**'
- en: '**OBEX** (**Object Exchange Protocol**)'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OBEX**（**对象交换协议**）'
- en: '**WAE** (**Wireless Application Environment**)'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WAE**（**无线应用环境**）'
- en: '**WAP** (**Wireless Application Protocol**)'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WAP**（**无线应用协议**）'
- en: Another interesting way of wireless data transmission is using waves of light.
    There is a group of standards describing protocols of physical and logical levels
    of data transmission using infrared light waves as environment. It is known as
    **IrDA** (**Infrared Data Association**). Usually, implementation of this interaction
    is an emitter (infrared light-emitting diode) and a receiver (photodiode) located
    on each side of the link.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种有趣的无线数据传输方式是利用光波。描述使用红外光波作为环境进行数据传输的物理和逻辑层协议的标准组被称为**IrDA**（**红外数据协会**）。通常，这种交互的实现方式是发射器（红外发光二极管）和接收器（光二极管）位于连接的两侧。
- en: This technology became especially popular in the late 1990s. Nowadays, it has
    almost entirely replaced by more modern methods of communication such as Wi-Fi
    and Bluetooth. But it is still used in remote controllers of home appliances and
    usually these devices have one-way connection (one side has an emitter only and
    the other side has a receiver only).
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这种技术在1990年代末期变得特别流行。如今，它几乎完全被更现代的通信方式，如Wi-Fi和蓝牙所取代。但它仍然在家电的遥控器中使用，通常这些设备具有单向连接（一个端有发射器，另一个端有接收器）。
- en: 'The main reasons for the rejection of IrDA were the following:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 放弃IrDA的主要原因如下：
- en: Limited distance of connection
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制连接的距离
- en: Direct visibility requirements
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接可见性要求
- en: Low speed of data transmission (in the later revisions of the standard, speed
    was increased but even the high-speed versions are not popular now)
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据传输速度较慢（在标准的后期修订版本中，速度有所提升，但即使是高速版本现在也不太流行）
- en: Another example of wireless optics as data transmission is **Free Space Optics**
    (**FSO**). This exotic technology uses an infrared laser as the information carrier,
    and it is used for long-distance communications in open spaces. The disadvantage
    of this system, as in the case of IrDA, is the direct visibility requirement that
    is highly dependent on weather.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种无线光学数据传输的例子是**自由空间光学**（**FSO**）。这种独特的技术使用红外激光作为信息载体，用于开阔空间中的远程通信。与IrDA类似，这个系统的缺点是直接可见性要求，这一要求高度依赖于天气状况。
- en: 'Usually FSO is used:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 通常FSO被使用：
- en: When cabling is not possible or too costly
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当布线不可行或成本过高时
- en: When you require a private link that is not receptive to radio interference
    and does not create any (for example, at airports)
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 当你需要一个不受无线干扰的私人连接，并且不会造成任何干扰时（例如，在机场）
- en: Going back to wireless data transmission using a radio signal, we need to review
    the IEEE 802.11 standards family, also known as Wi-Fi (Wi-Fi is a trademark of
    Wi-Fi Alliance for wireless networks based on IEEE 802.11 standards family).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 回到使用无线电信号进行无线数据传输，我们需要回顾IEEE 802.11标准系列，也称为Wi-Fi（Wi-Fi是Wi-Fi联盟针对基于IEEE 802.11标准系列的无线网络的商标）。
- en: 'The family of IEEE 802.11 contains a few dozen standards, but we will directly
    take a look at the ones designed for data transmission, omitting the auxiliary
    ones:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: IEEE 802.11系列包含几十种标准，但我们将直接查看专为数据传输设计的标准，省略辅助性标准：
- en: '**802.11**: This is the original standard approved in 1997, and it describes
    transmission at 2.4 GHz frequency with 1 Mbit/s and 2 Mbit/s speeds.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11**：这是1997年批准的原始标准，描述了在2.4 GHz频率下以1 Mbit/s和2 Mbit/s速度进行传输。'
- en: '**802.11b**: This is an improvement to 802.11 to support higher speeds (up
    to 5.5 Mbit/s and 11 Mbit/s). It was approved in 1999.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11b**：这是对802.11的改进，支持更高的速度（最高5.5 Mbit/s和11 Mbit/s）。它于1999年批准。'
- en: '**802.11a**: This is the standard approved in 1999 and used since 2001\. This
    standard allows us to work at 5 GHz frequency with 54 Mbit/s speed.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11a**：这是1999年批准的标准，自2001年起开始使用。该标准允许我们在5 GHz频率下以54 Mbit/s的速度工作。'
- en: '**802.11g**: This allows us to transfer data at 2.4 GHz frequency with 54 Mbit/s
    speed. It was approved in 2003.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11g**：该标准允许我们以54 Mbit/s的速度在2.4 GHz频率下传输数据。它于2003年批准。'
- en: '**802.11n**: This was approved in 2009\. This standard increases the speed
    of data transmission up to 600 Mbit/s at 2.4 to 2.5 GHz or 5 GHz frequencies.
    The standard is backwards-compatible with 802.11 a/b/g.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11n**：该标准于2009年批准。此标准将数据传输速度提高到最高600 Mbit/s，在2.4至2.5 GHz或5 GHz频率范围内工作。该标准向后兼容802.11
    a/b/g。'
- en: '**802.11ac and 802.11ad**: These standards were approved in 2014\. They allow
    data transfer at the speed up to 7 Gbit/s and have additional working frequency
    (60 GHz).'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**802.11ac和802.11ad**：这些标准于2014年批准。它们允许以最高7 Gbit/s的速度进行数据传输，并具有额外的工作频率（60 GHz）。'
- en: IEEE 802.11 is used for data transmission via radio within a range of 100 meters.
    Typically, the IEEE 802.11 network consists of at least one access point and at
    least one client, but it is possible to connect two clients in a point-to-point
    (ad hoc) mode. In case of point-to-point connection, the access point is not used
    and clients are connected directly to each other.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: IEEE 802.11用于在100米范围内通过无线电进行数据传输。通常，IEEE 802.11网络由至少一个接入点和至少一个客户端组成，但也可以通过点对点（ad
    hoc）模式连接两个客户端。在点对点连接的情况下，不使用接入点，客户端直接相互连接。
- en: Due to the fact that IEEE 802.11 applies to WLAN and provides high-speed data
    transfer for a local area, solutions based on IEEE 802.11 are ideal to solve "the
    last mile" problem. IEEE 802.11 allows us to reduce costs of deploying and expanding
    local networks and also provides network access in difficult-to-reach places,
    such as outdoors or inside buildings that have historical value.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 由于IEEE 802.11适用于WLAN并为局域网提供高速数据传输，基于IEEE 802.11的解决方案是解决“最后一公里”问题的理想选择。IEEE 802.11使我们能够降低部署和扩展局域网的成本，同时在难以到达的地方提供网络接入，如户外或具有历史价值的建筑内部。
- en: An overview of wireless threats
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 无线威胁概述
- en: Considering the specifics mentioned in the previous section, let's state the
    most common wireless threats.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到前一部分提到的特性，下面列出最常见的无线威胁。
- en: In case of a radio signal as a transmission environment and in the case of a
    wired connection, there are a lot of threats, each with their own specifics.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在无线电信号作为传输环境和有线连接的情况下，存在许多威胁，每种威胁都有其特定的特点。
- en: The first threat in our list is information gathering. It usually begins with
    reconnaissance and mostly depends on the distance from the victim because of the
    radio waves nature—you don't need to connect to another network device to receive
    radio waves generated by that device. The result of reconnaissance can give answers
    about locations of network objects and users, what devices and technologies are
    being used, and so on. Usually, the captured network traffic contains important
    information. Traffic analysis can be done by checking the network packages data,
    the pattern of network packages, and running sessions between members of connections
    (access points and their clients). Also, it should be noted that the wireless
    network control packets (service traffic) are not encrypted. Besides, it is very
    difficult to distinguish between information collecting user and legal participant
    of the network. The fact that the radio signal coverage can go outside of a controlled
    zone creates easy opportunities for the realization of information gathering risk.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 我们列表中的第一个威胁是信息收集。信息收集通常从侦察开始，主要依赖于与受害者的距离，这是由于无线电波的特性——你不需要连接到另一个网络设备就能接收该设备发出的无线电波。侦察的结果可以提供关于网络对象和用户的位置、所使用的设备和技术等信息。通常，捕获的网络流量包含重要信息。通过检查网络数据包、数据包模式以及连接成员之间的会话（接入点及其客户端），可以进行流量分析。还应注意，无线网络控制数据包（服务流量）是未加密的。此外，很难区分信息收集的用户和网络中的合法参与者。无线信号覆盖范围可能超出受控区域，这为信息收集风险的实现提供了便捷的机会。
- en: The second threat is problems in settings of network devices, such as using
    weak encryption keys or authentication methods with known vulnerabilities. Potential
    attackers primarily exploit these disadvantages. Incorrectly configured access
    points may become the cause of breaking into an entire corporate network. In addition,
    in the case of a corporate network, it is difficult to track using unauthorized
    access points; for example, a typical employee can bring an unregistered access
    point and connect it to a corporate network. This creates a serious threat not
    only to the wireless network, but also to the entire company's infrastructure.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 第二个威胁是网络设备设置中的问题，例如使用弱加密密钥或存在已知漏洞的认证方法。潜在的攻击者主要利用这些弱点。不正确配置的接入点可能成为突破整个公司网络的原因。此外，在企业网络的情况下，很难追踪未经授权的接入点；例如，普通员工可以带着未注册的接入点连接到公司网络。这不仅对无线网络构成严重威胁，而且对整个公司的基础设施也带来威胁。
- en: Incorrectly configured wireless clients are an even greater threat than incorrectly
    configured access points. Such devices are on the move and often they are not
    specifically configured to reduce the risk or use default settings.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 配置错误的无线客户端比配置错误的接入点带来的威胁更大。这些设备是移动的，且通常没有专门配置来减少风险，或者仍然使用默认设置。
- en: Following the previous point, the next threat is breaking the encryption. Attackers
    are well informed about the flaws of the widely used encryption algorithms, and
    for example, in the case of the WEP protocol, they can retrieve a pre-shared key
    from a client in less than 10 minutes.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 接着前一点，下一种威胁是破解加密。攻击者对广泛使用的加密算法的漏洞了如指掌，例如在WEP协议的情况下，他们可以在不到10分钟的时间内从客户端获取预共享密钥。
- en: The fourth threat facing wireless networks is the difficulty in tracking actions
    of a user. As already noted, the wireless devices are not "tied" to the network
    and can change their point of connection to the network. Incorrectly configuring
    the wireless client can automatically connect to the nearest wireless network.
    This mechanism allows attackers to switch the unsuspecting user host on an attacker's
    device instead of a legitimate access point to perform vulnerability scanning,
    phishing attacks, or man-in-the-middle attacks. Furthermore, if a user simultaneously
    connects to a wired network, it becomes a convenient entry point to a corporate
    network.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 面对无线网络的第四个威胁是追踪用户行为的困难。正如前面所提到的，无线设备并不“绑定”于网络，可以更改连接网络的点。无线客户端的配置错误可能会使其自动连接到最近的无线网络。这一机制使得攻击者能够将毫无戒心的用户设备切换到攻击者的设备上，而不是合法的接入点，从而进行漏洞扫描、钓鱼攻击或中间人攻击。此外，如果用户同时连接到有线网络，这也成为了进入企业网络的一个便捷入口。
- en: Impersonating a user is a serious threat to any network, not just wireless.
    However, in the case of wireless communication, determining the authenticity of
    the user is more difficult. There are network identifiers (SSID) and filtering
    MAC addresses in place, but both are broadcasted in clear text in service packets
    and can be intercepted. Impersonation allows attackers to insert wrong frames
    to authorized communications and carry out an attack on a corporate infrastructure.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 冒充用户是对任何网络的重大威胁，不仅仅是无线网络。然而，在无线通信的情况下，验证用户身份更加困难。网络标识符（SSID）和 MAC 地址过滤存在，但它们都会以明文形式广播在服务包中，容易被截获。冒充身份使攻击者能够向授权通信中插入错误帧，并对企业基础设施进行攻击。
- en: The fact that many laptop users prefer switching to WLANs if they are dissatisfied
    with the quality of the wired network service (weak connection, URL-filtering,
    or port-filtering) increases the risk. In most cases, operating systems do it
    automatically when a wired network is down.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 许多笔记本电脑用户如果对有线网络服务质量（如连接弱、URL 过滤或端口过滤）不满意，倾向于切换到 WLAN，这增加了风险。在大多数情况下，当有线网络断开时，操作系统会自动进行切换。
- en: The last threat that we would like to mention is **Denial of Service** (**DoS**).
    The aim of a typical DoS attack is the violation of network service availability
    or a complete blocking of an authorized client access. Such an attack can be carried
    out, for example, by flooding a network with de-authentication or "junk" packets
    sent from a spoofed address. Tracking an attack source in this case is not an
    easy task. In addition, there is a possibility to organize a DoS attack on the
    physical level, running a fairly powerful jammer in the special frequency range.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 我们想提到的最后一个威胁是 **拒绝服务** (**DoS**)。典型 DoS 攻击的目的是破坏网络服务的可用性或完全阻止授权客户端的访问。例如，可以通过从伪造的地址发送去认证或“垃圾”包来淹没网络，从而发起攻击。在这种情况下，追踪攻击源并不是一项容易的任务。此外，还存在在物理层上组织
    DoS 攻击的可能性，通过在特定频率范围内运行一个强大的干扰器。
- en: Wi-Fi media specifics
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Wi-Fi 媒体特性
- en: Despite the wide variety of wireless technologies, the overwhelming majority
    of corporate and personal networking communications are based on Wi-Fi technology
    and this is the reason why we are going deep into this certain type of wireless
    technology.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管无线技术种类繁多，但绝大多数企业和个人网络通信基于 Wi-Fi 技术，这也是我们深入探讨这种无线技术的原因。
- en: Wi-Fi is prone to all threats mentioned earlier that are common for all the
    wireless technologies—the absence of any cables or other physical connections
    between clients and network devices creates great mobility for users, but also
    become the root cause for the most of Wi-Fi security flaws and challenges. This
    is both the main advantage and the main disadvantage of WLANs.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi 容易受到前面提到的所有无线技术常见的威胁—没有任何电缆或其他物理连接在客户端与网络设备之间，虽然为用户提供了极大的移动性，但也成为了大多数
    Wi-Fi 安全缺陷和挑战的根源。这既是 WLAN 的主要优势，也是其主要劣势。
- en: The first specification of Wi-Fi, the 802.11 standard, regulates operation of
    the equipment at a center frequency of 2.4 GHz with a maximum speed of up to 2
    Mbit/s and was approved in 1997.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个 Wi-Fi 规范，即 802.11 标准，规范了在 2.4 GHz 中心频率下操作的设备，最大速度可达 2 Mbit/s，并于 1997 年获得批准。
- en: The standards of the 802.11 family regulate architectures of networks and devices,
    and describe the first and second of seven layers of the OSI model, along with
    the interaction protocols. The standards specify the base frequency, modulation
    techniques, and spread spectrum at the physical level.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 802.11 系列标准规范了网络和设备的架构，并描述了 OSI 模型的前两层，以及交互协议。标准规定了物理层的基础频率、调制技术和扩频技术。
- en: 'The IEEE 802.11 standards strictly regulate only the two lower levels of the
    OSI model: the physical and data link layers that determine the specific features
    of local networks. The upper OSI levels are the same in wireless and wired LANs:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: IEEE 802.11 标准严格规范了 OSI 模型的前两层：物理层和数据链路层，它们决定了局域网的具体特性。OSI 模型的上层在无线和有线局域网中是相同的：
- en: '![Wi-Fi media specifics](../images/00003.jpeg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![Wi-Fi 媒体特性](../images/00003.jpeg)'
- en: Levels of the OSI model
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: OSI 模型层次
- en: 'The need to distinguish features of various LANs is reflected by separating
    the data link layer into two sublayers: **Logical Link Control** (**LLC**) and
    **Media Access Control** (**MAC**). The MAC layer provides correct sharing of
    the overall environment. After gaining access to the environment it may use the
    higher LLC, which implements the functions of the interface with an adjacent network
    layer. In the 802.11 standard, MAC is similar to the implementation of Ethernet
    networks. The fundamental difference is that the 802.11 uses a half-duplex transceiver
    and cannot detect collisions during communication sessions. MAC uses a special
    protocol **Carrier Sense Multiple Access with Collision Avoidance** (**CSMA/CA**)
    in the 802.11 standard or the **distributed coordination function** (**DCF**).
    Moreover, 802.11 MAC supports two modes of energy consumption: continuous operation
    mode and the saving mode.'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 区分各种局域网特征的需求通过将数据链路层分为两个子层来体现：**逻辑链路控制**（**LLC**）和**媒体访问控制**（**MAC**）。MAC层提供了正确共享整体环境的功能。在获得对环境的访问权限后，它可以使用更高层次的LLC，LLC实现与相邻网络层接口的功能。在802.11标准中，MAC类似于以太网网络的实现。根本区别在于，802.11使用半双工收发器，无法在通信会话中检测到碰撞。MAC在802.11标准中使用一种特殊的协议——**载波监听多路访问与冲突避免**（**CSMA/CA**）或**分布式协调功能**（**DCF**）。此外，802.11
    MAC支持两种能量消耗模式：连续工作模式和节能模式。
- en: The 802.11 standard was updated to the standard 802.11b version in 1999, which
    operates on the same main frequency of 2.4 GHz with a maximum speed of up to 22
    Mbit/s.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 802.11标准在1999年更新为标准802.11b版本，工作在相同的2.4 GHz主频率下，最大速度可达22 Mbit/s。
- en: The base architecture, ideology, and characteristics of the new 802.11b standard
    are similar to the original version of 802.11, and only the physical layer with
    a higher access speed and data transmission layer have been changed.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 新的802.11b标准的基本架构、理念和特点与原始版本的802.11类似，只有具有更高接入速度和数据传输层的物理层发生了变化。
- en: The standard also introduces error corrections and the possibility to work in
    conditions of strong interference and weak signal. For this purpose, the standard
    describes automatic methods of data transmission speed modification based on current
    signal strength and interference. The development of the Wi-Fi technology has
    drastically increased the number of different wireless devices in the world and
    created the problem of interference and congestion at the 2.4 GHz band due to
    the fact that such devices as microwave ovens, mobile phones and Bluetooth equipment
    noticeably influence each other.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 该标准还引入了错误修正，并且能够在强干扰和弱信号的条件下工作。为此，标准描述了基于当前信号强度和干扰的自动数据传输速率调整方法。Wi-Fi技术的发展大大增加了全球各种无线设备的数量，并且由于微波炉、手机和蓝牙设备等设备相互影响，造成了2.4
    GHz频段的干扰和拥堵问题。
- en: The 802.11a standard (operating on a 5 GHz frequency band) was developed to
    unload the 2.4 GHz band. There are fewer sources of interference in the new range
    comparing to the 2.4 GHz band and the average level of noise is much lower. The
    802.11a standard uses two basic frequencies around 5 GHz and a maximum data transfer
    rate of up to 54 Mbit/s.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 802.11a标准（在5 GHz频段上工作）旨在减轻2.4 GHz频段的负载。与2.4 GHz频段相比，新频段的干扰源较少，噪声水平也明显较低。802.11a标准使用了围绕5
    GHz的两个基本频率，最大数据传输速率为54 Mbit/s。
- en: 'It should be mentioned that the 5 GHz band is adjacent to the frequencies that
    are partly used for satellite and microwave communications. To eliminate interference
    between Wi-Fi equipment and the other departmental systems, the **European Telecommunications
    Standards Institute** (**ETSI**) has developed two additional protocols: **Dynamic
    Frequency Selection** (**DFS**) and **Transmit Power Control** (**TPC**). Wi-Fi
    devices can automatically change frequency channels or decrease transmission power
    in the case of conflict on the carrier frequencies using these protocols.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 需要提到的是，5 GHz频段邻近部分用于卫星和微波通信的频率。为消除Wi-Fi设备与其他部门系统之间的干扰，**欧洲电信标准化协会**（**ETSI**）开发了两个附加协议：**动态频率选择**（**DFS**）和**传输功率控制**（**TPC**）。Wi-Fi设备可以使用这些协议，在出现载波频率冲突时自动更换频率通道或减少传输功率。
- en: The next step in the development of Wi-Fi is the standard 802.11g, approved
    in 2003\. 802.11g is an improved version of 802.11b and is designed for devices
    operating at frequencies of 2.4 GHz with a maximum speed of 54 Mbit/s.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: Wi-Fi发展的下一个步骤是802.11g标准，该标准在2003年获得批准。802.11g是802.11b的改进版本，专为在2.4 GHz频率下运行、最大速度为54
    Mbit/s的设备设计。
- en: Now, the 802.11n standard has become the most widely used Wi-Fi technology.
    The developers have attempted to combine all the good features that were implemented
    in the previous versions in this new one. The 802.11n standard is designed for
    equipment operating at center frequencies of 2.4 GHz to 5 GHz as quickly as possible
    up to 600 Mbit/s. This standard was approved by the IEEE in September 2009\. The
    standard is based on the technology of MIMO-OFDM. In IEEE, the maximum data rate
    of 802.11n is several times greater than the previous ones. This is achieved by
    doubling the width of the channel from 20 MHz to 40 MHz and due to implementation
    of MIMO technology with multiple antennas.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，802.11n标准已成为最广泛使用的Wi-Fi技术。开发人员试图将之前版本中实现的所有优良特性集成到这个新版本中。802.11n标准设计用于在2.4
    GHz到5 GHz的中心频率下运行的设备，最高速度可达600 Mbit/s。该标准于2009年9月由IEEE批准。该标准基于MIMO-OFDM技术。在IEEE标准中，802.11n的最大数据传输速率是之前标准的几倍。这是通过将信道宽度从20
    MHz扩展到40 MHz，并采用MIMO技术（使用多个天线）实现的。
- en: The last standard, which is rapidly gaining popularity, is 802.11ac. It is a
    wireless network standard adopted in January 2014\. It operates in the 5 GHz frequency
    band and is backward compatible with IEEE 802.11n.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一项标准，即目前迅速流行的802.11ac，是一种无线网络标准，采用于2014年1月。它在5 GHz频段上运行，并且向后兼容IEEE 802.11n标准。
- en: This standard allows us to significantly expand the network bandwidth from 433
    Mbit/s to 6.77 Gb/s at an 8x MU-MIMO-antenna. This is the most significant innovation
    with respect to IEEE 802.11n. In addition, significantly less energy is used,
    which extends the battery life of mobile devices.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 该标准使我们能够显著扩展网络带宽，从433 Mbit/s提升到在8x MU-MIMO天线下达到6.77 Gb/s。这是相对于IEEE 802.11n的最重要创新。此外，使用的能量大幅减少，这延长了移动设备的电池寿命。
- en: 'A summary of the technical information is presented in the following table:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 技术信息的摘要如下表所示：
- en: '| Standard | Frequencies, MHz | Channels | Speeds, Mbit/s | Power, mW |'
  id: totrans-104
  prefs: []
  type: TYPE_TB
  zh: '| 标准 | 频率，MHz | 通道 | 速度，Mbit/s | 功率，mW |'
- en: '| --- | --- | --- | --- | --- |'
  id: totrans-105
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- | --- | --- |'
- en: '| 802.11 | 2400-2483,5 | 20 | 1; 2 | 100 |'
  id: totrans-106
  prefs: []
  type: TYPE_TB
  zh: '| 802.11 | 2400-2483,5 | 20 | 1; 2 | 100 |'
- en: '| 802.11b | 2400-2483,5 | 13 | 1; 2; 5,5; 11; 22 | 100 |'
  id: totrans-107
  prefs: []
  type: TYPE_TB
  zh: '| 802.11b | 2400-2483,5 | 13 | 1; 2; 5,5; 11; 22 | 100 |'
- en: '| 802.11a | 5150-5350 | 20 | 6; 9; 12; 18; 24; 36; 48; 54; 108 | 100 |'
  id: totrans-108
  prefs: []
  type: TYPE_TB
  zh: '| 802.11a | 5150-5350 | 20 | 6; 9; 12; 18; 24; 36; 48; 54; 108 | 100 |'
- en: '| 5650-6425 | 1000 |'
  id: totrans-109
  prefs: []
  type: TYPE_TB
  zh: '| 5650-6425 | 1000 |'
- en: '| 802.11g | 2400-2483,5 | 13 | 1; 2; 5,5; 6; 9; 11; 12; 18; 22; 24; 33; 36;
    48; 54; 108 | 250 |'
  id: totrans-110
  prefs: []
  type: TYPE_TB
  zh: '| 802.11g | 2400-2483,5 | 13 | 1; 2; 5,5; 6; 9; 11; 12; 18; 22; 24; 33; 36;
    48; 54; 108 | 250 |'
- en: '| 802.11n | 2400-2483,5 | - | 150 | 250 |'
  id: totrans-111
  prefs: []
  type: TYPE_TB
  zh: '| 802.11n | 2400-2483,5 | - | 150 | 250 |'
- en: '| 5150-5350 | 100 |'
  id: totrans-112
  prefs: []
  type: TYPE_TB
  zh: '| 5150-5350 | 100 |'
- en: '| 5650-6425 | 1000 |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '| 5650-6425 | 1000 |'
- en: '| 802.11ac | 5170-5905 | - | 433 | 500 |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| 802.11ac | 5170-5905 | - | 433 | 500 |'
- en: Common WLAN protection mechanisms and their flaws
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 常见的WLAN保护机制及其缺陷
- en: 'To be able to protect a wireless network, it is crucial to clearly understand
    which protection mechanisms exist and which security flaws they have. This topic
    will be useful not only for those readers who are new to Wi-Fi security, but also
    as a refresher for experienced security specialists. Understanding this topic
    will help you understand one of the important aspects of this book: you should
    properly plan the security of your wireless penetration testing lab.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够保护无线网络，理解现有的保护机制及其安全缺陷至关重要。本话题不仅对Wi-Fi安全新手有帮助，也为经验丰富的安全专家提供了复习材料。理解这一主题将帮助你了解本书中的一个重要方面：你应该妥善规划无线渗透测试实验室的安全性。
- en: Hiding SSID
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 隐藏SSID
- en: 'Let''s start with one of the common mistakes made by network administrators:
    relying only on security by obscurity. In the frames of the current subject, it
    means using a hidden WLAN **SSID** (short for **service set identification**)
    or simply a WLAN name.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从网络管理员常犯的一个错误开始：仅依赖“安全通过隐蔽”这种方式。在当前话题的框架下，这意味着使用隐藏的WLAN **SSID**（即**服务集标识符**）或简单的WLAN名称。
- en: Hidden SSID means that a WLAN does not send its SSID in broadcast beacons advertising
    itself and doesn't respond to broadcast probe requests, thus making itself unavailable
    in the list of networks on Wi-Fi-enabled devices. It also means that normal users
    do not see the WLAN in their available networks list.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 隐藏 SSID 意味着 WLAN 不会在广播信标中发送其 SSID 以进行自我广告，也不会响应广播探测请求，从而使其在 Wi-Fi 启用设备的网络列表中不可用。这也意味着普通用户在其可用网络列表中看不到该
    WLAN。
- en: But the lack of WLAN advertising does not mean that an SSID is never transmitted
    in the air—it is actually transmitted in plaintext with a lot of packets between
    access points and devices connected to them, regardless of the security type used.
    Therefore, SSIDs are always available for all the Wi-Fi network interfaces in
    a range and are visible to any attacker using various passive sniffing tools.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，缺少 WLAN 广播并不意味着 SSID 永远不会在空中传输——它实际上以明文的形式通过大量的数据包在接入点和连接到它们的设备之间传输，无论使用的是什么安全类型。因此，SSID
    总是对所有范围内的 Wi-Fi 网络接口可用，并且对任何使用各种被动嗅探工具的攻击者可见。
- en: MAC filtering
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: MAC 过滤
- en: To be honest, MAC filtering cannot even be considered as a security or protection
    mechanism for a wireless network, but it is still called so in various sources.
    So let's clarify why we cannot call it a security feature.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 说实话，MAC 过滤甚至不能被认为是无线网络的安全或保护机制，但在各种来源中仍然被称为如此。那么，让我们澄清一下为什么我们不能将其称为安全特性。
- en: 'Basically, MAC filtering means allowing only those devices that have MAC addresses
    from a pre-defined list to connect to a WLAN, and not allowing connections from
    other devices. MAC addresses are transmitted unencrypted in Wi-Fi and are extremely
    easy for an attacker to intercept without even being noticed (refer to the following
    screenshot):'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 基本上，MAC 过滤意味着只允许那些 MAC 地址在预定义列表中的设备连接到 WLAN，而不允许其他设备连接。MAC 地址在 Wi-Fi 中以未加密的方式传输，攻击者极其容易在不被察觉的情况下截获这些地址（请参见以下截图）：
- en: '![MAC filtering](../images/00004.jpeg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![MAC 过滤](../images/00004.jpeg)'
- en: An example of a wireless traffic sniffing tool easily revealing MAC addresses
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 一个无线流量嗅探工具轻松揭示 MAC 地址的示例
- en: Keeping in mind the extreme simplicity of changing a physical address (MAC address)
    of a network interface, it becomes obvious why MAC filtering should not be treated
    as a reliable security mechanism.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到更改网络接口的物理地址（MAC 地址）极其简单，显然，MAC 过滤不应被视为一个可靠的安全机制。
- en: Tip
  id: totrans-127
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: MAC filtering can be used to support other security mechanisms, but it should
    not be used as the only security measure for a WLAN.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: MAC 过滤可以用来支持其他安全机制，但不应仅作为 WLAN 的唯一安全措施。
- en: WEP
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: WEP
- en: '**Wired equivalent privacy** (**WEP**) was born almost 20 years ago at the
    same time as the Wi-Fi technology and was integrated as a security mechanism for
    the IEEE 802.11 standard.'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '**有线等效隐私** (**WEP**) 出现于近20年前，与 Wi-Fi 技术同时诞生，并被集成为 IEEE 802.11 标准的安全机制。'
- en: As often happens with new technologies, it soon became clear that WEP contained
    weaknesses in design and was unable to provide reliable security for wireless
    networks. Several attack techniques were developed by security researchers that
    allowed them to crack a WEP key in a reasonable amount of time and use it to connect
    to a WLAN or intercept network communications between WLAN and client devices.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 正如新技术经常发生的那样，很快就显现出 WEP 设计中的弱点，它无法为无线网络提供可靠的安全性。安全研究人员开发了几种攻击技术，使他们能够在合理的时间内破解
    WEP 密钥，并利用该密钥连接 WLAN 或者拦截 WLAN 和客户端设备之间的网络通信。
- en: Let's briefly review how WEP encryption works and why is it so easy to break.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们简要回顾一下 WEP 加密是如何工作的，以及为什么它如此容易被破解。
- en: 'WEP uses so-called **initialization vectors** (**IV**) concatenated with a
    WLAN''s shared key to encrypt transmitted packets. After encrypting a network
    packet, an IV is added to a packet as it is and sent to a receiving side, for
    example, an access point. This process is depicted in the following flowchart:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: WEP 使用所谓的 **初始化向量** (**IV**) 与 WLAN 的共享密钥连接，以加密传输的数据包。加密网络数据包后，IV 被直接添加到数据包中，并发送到接收端，例如接入点。这个过程在以下流程图中展示：
- en: '![WEP](../images/00005.jpeg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![WEP](../images/00005.jpeg)'
- en: The WEP encryption process
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: WEP 加密过程
- en: An attacker just needs to collect enough IVs, which is also a trivial task using
    additional reply attacks to force victims to generate more IVs.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者只需要收集足够的 IV，这也是一个简单的任务，可以通过额外的重放攻击迫使受害者生成更多的 IV。
- en: Even worse, there are attack techniques that allow an attacker to penetrate
    WEP-protected WLANs even without connected clients, which makes those WLANs vulnerable
    by default.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 更糟糕的是，有一些攻击技术允许攻击者即使没有连接的客户端，也能渗透WEP保护的WLAN，这使得这些WLAN默认情况下是脆弱的。
- en: Additionally, WEP does not have a cryptographic integrity control, which also
    makes it vulnerable to attacks on confidentiality.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，WEP没有密码完整性控制，这也使其容易受到对机密性的攻击。
- en: 'There are numerous ways an attacker can abuse a WEP-protected WLAN, for example:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者有许多方式可以滥用WEP保护的WLAN，例如：
- en: Decrypt network traffic using passive sniffing and statistical cryptanalysis
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用被动嗅探和统计密码分析解密网络流量
- en: Decrypt network traffic using active attacks (reply attack, for example)
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用主动攻击（例如重放攻击）解密网络流量
- en: Traffic injection attacks
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 流量注入攻击
- en: Unauthorized WLAN access
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 未经授权的WLAN访问
- en: Although WEP was officially superseded by the WPA technology in 2003, it can
    still be sometimes found in private home networks and even in some corporate networks
    (mostly belonging to small companies nowadays).
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管WEP在2003年已被WPA技术正式取代，但它仍然可以在某些私人家庭网络中找到，甚至在一些企业网络中（现在大多属于小公司）。
- en: But this security technology has become very rare and will not be used in future,
    largely due to awareness in corporate networks and because manufacturers no longer
    activate WEP by default on new devices.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 但是这种安全技术已经变得非常罕见，并且在未来不会再被使用，主要是由于企业网络中的意识提升，以及制造商不再在新设备中默认启用WEP。
- en: In our humble opinion, device manufacturers should not include WEP support in
    their new devices to avoid its usage and increase their customers' security.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们谦虚的看法中，设备制造商不应在新设备中包括WEP支持，以避免其使用并提高客户的安全性。
- en: Note
  id: totrans-147
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: From the security specialist's point of view, WEP should never be used to protect
    a WLAN, but it can be used for Wi-Fi security training purposes.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 从安全专家的角度来看，WEP永远不应被用来保护WLAN，但可以用于Wi-Fi安全培训目的。
- en: Regardless of the security type in use, shared keys always add an additional
    security risk; users often tend to share keys, thus increasing the risk of compromising
    the key and reducing accountability for key privacy.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 无论使用何种安全类型，共享密钥始终会增加额外的安全风险；用户往往倾向于共享密钥，从而增加了密钥泄露的风险，并减少了对密钥隐私的责任。
- en: Moreover, the more devices use the same key, the greater the amount of traffic
    becomes suitable for an attacker during cryptanalytic attacks, increasing their
    performance and chances of success. This risk can be minimized by using personal
    identifiers (key, certificate) for users and devices.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，使用相同密钥的设备越多，攻击者在密码分析攻击中的适用流量就越大，从而提高了攻击性能和成功的机会。通过为用户和设备使用个人标识符（密钥、证书），可以最小化此风险。
- en: WPA/WPA2
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: WPA/WPA2
- en: 'Due to numerous WEP security flaws, the next generation of Wi-Fi security mechanisms
    became available in 2003: Wi-Fi Protected Access (WPA). It was announced as an
    intermediate solution until WPA2 became available and contained significant security
    improvements over WEP.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 由于WEP存在众多安全漏洞，下一代Wi-Fi安全机制于2003年推出：Wi-Fi保护访问（WPA）。它被宣布为WPA2发布之前的中间解决方案，并且在安全性方面比WEP有显著提升。
- en: 'Those improvements include:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 这些改进包括：
- en: '**Stronger encryption**: The new standards use longer encryption keys than
    WEP (256-bit versus 64- and 128-bit) and became capable of utilizing the **Advanced
    Encryption Standard** (**AES**) algorithm.'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更强的加密**：新标准使用比WEP更长的加密密钥（256位与64位和128位），并能够使用**高级加密标准**（**AES**）算法。'
- en: '**Cryptographic integrity control**: WPA uses an algorithm called Michael instead
    of CRC used in WEP. This is supposed to prevent altering data packets on the fly
    and prevents resending sniffed packets.'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码完整性控制**：WPA使用一种名为Michael的算法，而不是WEP中使用的CRC。这是为了防止数据包在传输过程中被篡改，并防止重新发送被嗅探到的数据包。'
- en: '**Usage of temporary keys**: The **Temporal Key Integrity Protocol** (**TKIP**)
    automatically changes the encryption keys generated for every packet. This is
    a major improvement over the static WEP where encryption keys could be entered
    manually in an AP config. TKIP also operates RC4, but the way it is used was improved.'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**临时密钥的使用**：**临时密钥完整性协议**（**TKIP**）会自动为每个数据包更改加密密钥。这是对静态WEP的重大改进，后者的加密密钥可以手动输入到AP配置中。TKIP也使用RC4，但其使用方式得到了改进。'
- en: '**Support for client authentication**: The capability to use dedicated authentication
    servers for user and device authentication made WPA suitable for use in large
    enterprise networks.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**客户端认证支持**：使用专用认证服务器进行用户和设备认证使得 WPA 适用于大型企业网络。'
- en: The support for the cryptographically strong AES algorithm was implemented in
    WPA, but it was not set as mandatory, only optional.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: WPA 中实现了密码强度强大的 AES 算法，但并未设置为强制使用，仅作为可选。
- en: Although WPA was a significant improvement over WEP, it was a temporary solution
    before WPA2 was released in 2004 and became mandatory for all new Wi-Fi devices.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管 WPA 是对 WEP 的重要改进，在 WPA2 于 2004 年发布并成为所有新型 Wi-Fi 设备的强制性解决方案之前，它仍然是一个临时解决方案。
- en: 'WPA2 works very similarly to WPA and the main differences between WPA and WPA2
    are in the algorithms used to provide security:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: WPA2 与 WPA 工作原理非常相似，WPA 和 WPA2 的主要区别在于用于提供安全性的算法：
- en: AES became the mandatory algorithm for encryption in WPA2 instead of the default
    RC4 in WPA
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 WPA2 中，AES 成为了默认的加密算法，取代了 WPA 中的默认 RC4。
- en: TKIP used in WPA was replaced by Counter Cipher Mode with Block **Chaining Message
    Authentication Code Protocol** (**CCMP**)
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WPA 中使用的 TKIP 已被块**链消息认证码协议**（**CCMP**）取代
- en: 'Because of the very similar workflows, WPA and WPA2 are also vulnerable to
    the similar or the same attacks and are usually known as and written as one word,
    WPA/WPA2\. Both WPA and WPA2 can work in two modes: **pre-shared key** (**PSK**)
    or personal mode and enterprise mode.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 由于工作流程非常相似，WPA 和 WPA2 也容易受到类似的攻击，通常被称为 WPA/WPA2，有时写成一个词。WPA 和 WPA2 都可以在两种模式下工作：**预共享密钥**（**PSK**）或个人模式以及企业模式。
- en: Pre-shared key mode
  id: totrans-164
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 预共享密钥模式
- en: Pre-shared key or personal mode was intended for home and small office use where
    networks have low complexity. We are more than sure that all our readers have
    met this mode and that most of you use it at home to connect your laptops, mobile
    phones, tablets, and so on to home networks.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 预共享密钥或个人模式旨在用于家庭和小办公室网络，这些网络复杂度较低。我们非常确定，我们的所有读者都遇到过这种模式，并且大多数人在家中使用它连接笔记本电脑、手机、平板电脑等到家庭网络。
- en: 'The general idea of PSK mode is using the same secret key on an access point
    and on a client device to authenticate the device and establish an encrypted connection
    for networking. The process of WPA/WPA2 authentication using a PSK consists of
    four phases and is also called a **4-way handshake**. It is depicted in the following
    diagram:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: PSK 模式的基本思想是在接入点和客户端设备上使用相同的秘密密钥来对设备进行认证，并建立用于网络连接的加密连接。使用 PSK 的 WPA/WPA2 认证过程包括四个阶段，也称为**4
    次握手**。它在以下图表中有所描述：
- en: '![Pre-shared key mode](../images/00006.jpeg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![预共享密钥模式](../images/00006.jpeg)'
- en: WPA/WPA2 4-way handshake
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: WPA/WPA2 4 次握手
- en: The main WPA/WPA2 flaw in PSK mode is the possibility to sniff a whole 4-way
    handshake and to brute force a security key offline without any interaction with
    a target WLAN. Generally, the security of a WLAN mostly depends on the complexity
    of the chosen PSK.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: PSK 模式下的 WPA/WPA2 主要缺陷是可以嗅探整个 4 次握手过程，并且可以在离线状态下对安全密钥进行暴力破解，无需与目标 WLAN 进行任何交互。一般来说，WLAN
    的安全性主要取决于所选 PSK 的复杂性。
- en: 'Computing a **PMK** (short for **primary master key**) used in 4-way handshakes
    (refer to the handshake diagram) is a very time-consuming process compared to
    other computing operations and computing hundreds of thousands of them can take
    a very long time. But in the case of a short and low complexity PSK being in use,
    a brute-force attack does not take long even on a not-so-powerful computer. If
    a key is complex and long enough, cracking it can take much longer, but still
    there are ways to speed up this process:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 计算用于 4 次握手中的**PMK**（主要主密钥）是一个非常耗时的过程，与其他计算操作相比，计算数十万个 PMK 可能需要很长时间。但是，在使用短且低复杂度的
    PSK 的情况下，即使在性能不强的计算机上，暴力破解也不会花费太多时间。如果密钥复杂且足够长，破解时间可能会长得多，但仍然有方法可以加速这个过程：
- en: Using powerful computers with **CUDA** (short for **Compute Unified Device Architecture**),
    which allows a software to directly communicate with GPUs for computing. As GPUs
    are natively designed to perform mathematical operations and do them much faster
    than CPUs, the process of cracking works several times faster with CUDA.
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用支持**CUDA**（简称**Compute Unified Device Architecture**）的强大计算机，使软件能够直接与 GPU 进行通信。由于
    GPU 本来就是为执行数学运算而设计的，并且比 CPU 快得多，使用 CUDA 进行破解的过程比使用 CPU 快几倍。
- en: Using rainbow tables that contain pairs of various PSKs and their corresponding
    precomputed hashes. They save a lot of time for an attacker because the cracking
    software just searches for a value from an intercepted 4-way handshake in rainbow
    tables and returns a key corresponding to the given PMK if there was a match,
    instead of computing PMKs for every possible character combination. Because WLAN
    SSIDs are used in 4-way handshakes analogous to a cryptographic salt, PMKs for
    the same key will differ for different SSIDs. This limits the application of rainbow
    tables to a number of the most popular SSIDs.
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用包含各种PSK及其对应预计算哈希值的彩虹表。这为攻击者节省了大量时间，因为破解软件只需从拦截到的4-way握手中搜索一个值，如果匹配，就返回与给定PMK对应的密钥，而不是为每一种可能的字符组合计算PMK。由于WLAN
    SSID在4-way握手中类似于加密盐，针对同一密钥的PMK会因不同的SSID而不同。这限制了彩虹表的应用范围，只能用于一些最流行的SSID。
- en: Using cloud computing is another way to speed up the cracking process, but it
    usually costs additional money. The more computing power an attacker can rent
    (or get through another ways), the faster the process is. There are also online
    cloud-cracking services available on the Internet for various cracking purposes
    including cracking 4-way handshakes.
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用云计算是加速破解过程的另一种方式，但通常需要额外的费用。攻击者能够租用的计算能力越强（或通过其他方式获得的计算能力），破解过程就越快。网络上也有提供各种破解用途的在线云破解服务，包括破解4-way握手。
- en: Furthermore, as with WEP, the more users know a WPA/WPA2 PSK, the greater the
    risk of compromise—that's why it is also not an option for big complex corporate
    networks.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，像WEP一样，WPA/WPA2 PSK的用户越多，泄露的风险就越大——这也是它不适用于大型复杂企业网络的原因。
- en: Note
  id: totrans-175
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: WPA/WPA2 PSK mode provides the sufficient level of security for home and small
    office networks only when a key is long and complex enough and is used with a
    unique (or at least not popular) WLAN SSID.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: WPA/WPA2 PSK模式仅在密钥足够长且复杂，并且与独特的（或至少不常见的）WLAN SSID一起使用时，才能为家庭和小型办公网络提供足够的安全性。
- en: Enterprise mode
  id: totrans-177
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 企业模式
- en: 'As already mentioned in the previous section, using shared keys poses a security
    risk and in the case of WPA/WPA2 highly relies on a key length and complexity.
    But there are several factors in enterprise networks that should be taken into
    account when talking about WLAN infrastructure: flexibility, manageability, and
    accountability.'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，使用共享密钥存在安全风险，而在WPA/WPA2中，密钥长度和复杂性是高度依赖的。但在企业网络中，有几个因素需要考虑：灵活性、可管理性和可追溯性。
- en: 'There are various components that implement those functions in big networks,
    but in the context of our topic, we are mostly interested in two of them: **AAA**
    (short for **authentication, authorization, and accounting**) servers and wireless
    controllers.'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在大型网络中，实施这些功能的组件有很多，但在我们讨论的主题中，我们主要关注其中的两个：**AAA**（**认证、授权和计费**）服务器和无线控制器。
- en: 'WPA-Enterprise or 802.1x mode was designed for enterprise networks where a
    high security level is needed and the use of an AAA server is required. In most
    cases, a RADIUS server is used as an AAA server and the following **EAP** (**Extensible
    Authentication Protocol**) types are supported (and several more, depending on
    a wireless device) with WPA/WPA2 to perform authentication:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: WPA-Enterprise或802.1x模式是为企业网络设计的，这些网络需要高安全级别，并要求使用AAA服务器。在大多数情况下，RADIUS服务器被用作AAA服务器，以下**EAP**（**可扩展认证协议**）类型与WPA/WPA2一起支持（以及其他若干类型，具体取决于无线设备），用于执行认证：
- en: EAP-TLS
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: EAP-TLS
- en: EAP-TTLS/MSCHAPv2
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: EAP-TTLS/MSCHAPv2
- en: PEAPv0/EAP-MSCHAPv2
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PEAPv0/EAP-MSCHAPv2
- en: PEAPv1/EAP-GTC
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PEAPv1/EAP-GTC
- en: PEAP-TLS
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PEAP-TLS
- en: EAP-FAST
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: EAP-FAST
- en: 'You can find a simplified WPA-Enterprise authentication workflow in the following
    diagram:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在下图中找到简化的WPA-Enterprise认证工作流程：
- en: '![Enterprise mode](../images/00007.jpeg)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![企业模式](../images/00007.jpeg)'
- en: WPA-Enterprise authentication
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: WPA-Enterprise认证
- en: Depending on an EAP-type configuration, WPA-Enterprise can provide various authentication
    options.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 根据EAP类型配置，WPA-Enterprise可以提供多种认证选项。
- en: The most popular EAP type (based on our own experience in numerous pentests)
    is PEAPv0/MSCHAPv2, which is relatively easily integrated with existing Microsoft
    Active Directory infrastructures and is relatively easy to manage. But this type
    of WPA protection is relatively easy to defeat by stealing and brute-forcing user
    credentials with a rogue access point.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 最流行的 EAP 类型（基于我们在多个渗透测试中的经验）是 PEAPv0/MSCHAPv2，它与现有的 Microsoft Active Directory
    基础设施相对容易集成，并且管理相对简单。但这种 WPA 保护方法相对容易被恶意接入点通过窃取和暴力破解用户凭证所击败。
- en: The most secure EAP type (at least, when configured and managed correctly) is
    EAP-TLS, which employs certificate-based authentication for both users and authentication
    servers. During this type of authentication, clients also check server's identity
    and a successful attack with a rogue access point becomes possible only if there
    are errors in configuration or insecurities in certificate maintenance and distribution.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 最安全的 EAP 类型（至少在正确配置和管理的情况下）是 EAP-TLS，它采用基于证书的身份验证，适用于用户和身份验证服务器。在这种身份验证类型下，客户端还会验证服务器的身份，只有当配置出现错误或证书管理和分发存在安全隐患时，才可能通过恶意接入点发起成功的攻击。
- en: Note
  id: totrans-193
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It is recommended to protect enterprise WLANs with WPA-Enterprise in EAP-TLS
    mode with mutual client and server certificate-based authentication. But this
    type of security requires additional work and resources.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 建议使用 WPA-Enterprise 的 EAP-TLS 模式，并进行客户端和服务器证书的双向身份验证来保护企业 WLAN。然而，这种安全方式需要额外的工作和资源。
- en: WPS
  id: totrans-195
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: WPS
- en: '**Wi-Fi Protected Setup** (**WPS**) is actually not a security mechanism, but
    a key exchange mechanism which plays an important role in establishing connections
    between devices and access points. It was developed to make the process of connecting
    a device to an access point easier, but it turned out to be one of the biggest
    holes in modern WLANs if activated.'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '**Wi-Fi 受保护设置**（**WPS**）实际上并不是一种安全机制，而是一种密钥交换机制，它在设备和接入点之间建立连接时起着重要作用。它的设计目的是简化设备与接入点之间的连接过程，但如果启用它，结果证明它是现代
    WLAN 中最大的漏洞之一。'
- en: 'WPS works with WPA/WPA2-PSK and allows devices to connect to WLANs with one
    of the following methods:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: WPS 与 WPA/WPA2-PSK 一起工作，允许设备通过以下方式之一连接到 WLAN：
- en: '**PIN**: Entering a PIN on a device. A PIN is usually printed on a sticker
    at the back of a Wi-Fi access point.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PIN**：在设备上输入 PIN。PIN 通常打印在 Wi-Fi 接入点背面的贴纸上。'
- en: '**Push button**: Special buttons should be pushed on both an access point and
    a client device during the connection phase. Buttons on devices can be physical
    and virtual.'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**按键方法**：在连接阶段，应该在接入点和客户端设备上同时按下特定按钮。设备上的按钮可以是物理的，也可以是虚拟的。'
- en: '**NFC**: A client should bring a device close to an access point to utilize
    the Near Field Communication technology.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**NFC**：客户端应将设备靠近接入点以利用近场通信技术。'
- en: '**USB drive**: Necessary connection information exchange between an access
    point and a device is done using a USB drive.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**USB 驱动器**：接入点和设备之间的必要连接信息交换通过 USB 驱动器完成。'
- en: Because WPS PINs are very short and their first and second parts are validated
    separately, an online brute-force attack on a PIN can be done in several hours
    allowing an attacker to connect to a WLAN.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 WPS PIN 非常短，并且其第一部分和第二部分是分开验证的，因此对 PIN 进行在线暴力破解可以在几个小时内完成，从而允许攻击者连接到 WLAN。
- en: Furthermore, the possibility of offline PIN cracking was found in 2014, which
    allows attackers to crack pins in 1 to 30 seconds, but it works only on certain
    devices.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，2014 年发现了离线 PIN 破解的可能性，攻击者可以在 1 到 30 秒内破解 PIN 码，但这一攻击只对某些设备有效。
- en: You should also not forget that a person who is not permitted to connect to
    a WLAN but who can physically access a Wi-Fi router or access point can also read
    and use a PIN or connect via the push button method.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该记住，虽然一个人未被允许连接到 WLAN，但如果他可以物理访问 Wi-Fi 路由器或接入点，仍然可以读取和使用 PIN 码或通过按键方法进行连接。
- en: Getting familiar with the Wi-Fi attack workflow
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 熟悉 Wi-Fi 攻击的工作流程
- en: In our opinion (and we hope you agree with us), planning and building a secure
    WLAN is not possible without the understanding of various attack methods and their
    workflow. In this topic, we will give you an overview of how attackers work when
    they are hacking WLANs.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们看来（希望你同意），规划和构建一个安全的 WLAN 是不可能的，除非对各种攻击方法及其工作流程有足够的理解。在本主题中，我们将概述攻击者在攻击 WLAN
    时的工作方式。
- en: General Wi-Fi attack methodology
  id: totrans-207
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 一般 Wi-Fi 攻击方法
- en: 'After refreshing our knowledge about wireless threats and Wi-Fi security mechanisms,
    let''s have a look at the attack methodology used by attackers in the real world.
    Of course, as with all other types of network attack, wireless attack workflows
    depend on certain situations and targets, but they still align with the following
    general sequence in almost all cases:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 在复习无线威胁和Wi-Fi安全机制的知识之后，让我们来看看攻击者在现实世界中使用的攻击方法。当然，像所有其他类型的网络攻击一样，无线攻击的工作流程依赖于特定的情况和目标，但在几乎所有情况下，它们仍然遵循以下一般顺序：
- en: The first step is *planning*. Normally, attackers need to plan what are they
    going to attack, how can they do it, which tools are necessary for the task, when
    is the best time and place to attack certain targets, and which configuration
    templates will be useful so that they can be prepared in advance. White-hat hackers
    or penetration testers need to set schedules and coordinate project plans with
    their customers, choose contact persons on the customer side, define project deliverables,
    and do other organizational work if required. As with every penetration testing
    project, the better a project was planned (and we can use the word "project" for
    black-hat hackers' tasks), the greater the chances of a successful result.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是*规划*。通常，攻击者需要规划他们将要攻击的对象，如何进行攻击，任务需要哪些工具，攻击某些目标的最佳时间和地点，以及哪些配置模板将是有用的，以便提前做好准备。白帽黑客或渗透测试人员需要制定时间表并与客户协调项目计划，选择客户方的联系人，定义项目交付物，并在需要时进行其他组织工作。与每一个渗透测试项目一样，项目规划得越好（我们也可以用“项目”这个词来描述黑帽黑客的任务），成功的概率就越大。
- en: The next step is *surveying*. Getting as accurate as possible and as much as
    possible information about a target is crucial for a successful hack, especially
    in uncommon network infrastructures. To hack a WLAN or its wireless clients, an
    attacker would normally collect at least SSIDs or MAC addresses of access points
    and clients and information about the security type in use. It is also very helpful
    for an attacker to understand if WPS is enabled on a target access point. All
    that data allows attackers not only to set proper configs and choose the right
    options for their tools, but also to choose appropriate attack types and conditions
    for a certain WLAN or Wi-Fi client. All collected information, especially non-technical
    (for example, company and department names, brands, or employee names), can also
    become useful at the cracking phase to build dictionaries for brute-force attacks.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是*调查*。尽可能准确并尽可能多地获取关于目标的信息，对于成功的攻击至关重要，特别是在不常见的网络基础设施中。要攻击WLAN或其无线客户端，攻击者通常会收集至少访问点和客户端的SSID或MAC地址，以及正在使用的安全类型信息。了解目标访问点是否启用了WPS对攻击者来说也非常有帮助。所有这些数据不仅帮助攻击者为其工具设置正确的配置和选择适当的选项，还能帮助他们选择适合特定WLAN或Wi-Fi客户端的攻击类型和条件。所有收集的信息，尤其是非技术性的信息（例如公司和部门名称、品牌或员工姓名），也可以在破解阶段用来构建字典，以便进行暴力破解攻击。
- en: Depending on the type of security and attacker's luck, data collected at the
    survey phase can even make the active attack phase unnecessary and allow an attacker
    to proceed directly with the *cracking* phase. The *active attacks* phase involves
    active interaction between an attacker and targets (WLANs and Wi-Fi clients).
    At this phase, attackers have to create conditions necessary for a chosen attack
    type and execute it. It includes sending various Wi-Fi management and control
    frames and installing rogue access points. If an attacker wants to cause a denial
    of service in a target WLAN as a goal, such attacks are also executed at this
    phase. Some of active attacks are essential for successfully hacking a WLAN, but
    some of them are intended to just speed up hacking and can be omitted to avoid
    causing alarm on various **wireless intrusion detection/prevention systems** (**WIDPS**),
    which can possibly be installed in a target network. Thus, the active attacks
    phase can be called optional.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据安全类型和攻击者的运气，在调查阶段收集的数据甚至可以使主动攻击阶段变得不必要，直接进入*破解*阶段。*主动攻击*阶段涉及攻击者与目标（WLAN和Wi-Fi客户端）之间的主动互动。在这个阶段，攻击者必须创造选择的攻击类型所需的条件并执行攻击。它包括发送各种Wi-Fi管理和控制帧，以及安装伪造的访问点。如果攻击者的目标是导致目标WLAN的服务拒绝，那么此类攻击也会在这个阶段执行。一些主动攻击对于成功攻击WLAN是必不可少的，但有些攻击仅仅是为了加速攻击过程，可以省略，以避免触发各种**无线入侵检测/防御系统**（**WIDPS**），这些系统可能已经安装在目标网络中。因此，主动攻击阶段可以称为可选阶段。
- en: Cracking is another important phase where an attacker cracks 4-way handshakes,
    WEP data, NTLM hashes, and so on, which were intercepted at the previous phases.
    There are plenty of various free and commercial tools and services including cloud
    cracking services. In the case of success at this phase, an attacker gets the
    target WLAN's secret(s) and can proceed with connecting to the WLAN, decrypt intercepted
    traffic, and so on.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 破解是另一个重要阶段，攻击者在该阶段破解之前阶段截获的4次握手、WEP数据、NTLM哈希等信息。有许多各种免费的和商业化的工具和服务，包括云破解服务。如果此阶段成功，攻击者将获得目标WLAN的秘密，并可以继续连接到WLAN，解密截获的流量等等。
- en: The active attacking phase
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 主动攻击阶段
- en: Let's have a closer look at the most interesting parts of the active attack
    phase—WPA-PSK and WPA-Enterprise attacks—in the following sections.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在接下来的章节中详细了解主动攻击阶段中最有趣的部分——WPA-PSK和WPA-Enterprise攻击。
- en: WPA-PSK attacks
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: WPA-PSK攻击
- en: As both WPA and WPA2 are based on the 4-way handshake, attacking them doesn't
    differ—an attacker needs to sniff a 4-way handshake in a moment, establishing
    a connection between an access point and an arbitrary wireless client and brute
    forcing a matching PSK. It does not matter whose handshake is intercepted, because
    all clients use the same PSK for a given target WLAN.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 由于WPA和WPA2都基于4次握手，因此攻击它们并没有区别——攻击者需要嗅探到4次握手的瞬间，建立一个接入点和任意无线客户端之间的连接，并强行破解匹配的PSK。无论截获的是哪个握手都无关紧要，因为所有客户端在给定的目标WLAN中使用相同的PSK。
- en: Sometimes, attackers have to wait long until a device connects to a WLAN to
    intercept a 4-way handshake and of course they would like to speed up the process
    when possible. For that purpose, they force an already connected device to disconnect
    from the access point sending control frames (deauthentication attack) on behalf
    of a target access point. When a device receives such a frame, it disconnects
    from the WLAN and tries to reconnect again if the "automatic reconnect" feature
    is enabled (it is enabled by default on most devices), thus performing another
    4-way handshake that can be intercepted by an attacker.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，攻击者需要等待设备连接到WLAN以便拦截4次握手，当然，他们希望尽可能加速这一过程。为此，他们通过向目标接入点发送控制帧（去认证攻击）迫使已连接的设备与接入点断开连接。当设备收到此类帧时，它会从WLAN断开连接，并在启用“自动重新连接”功能时（大多数设备默认启用）尝试重新连接，从而进行另一次4次握手，攻击者可以拦截该握手。
- en: Another possibility to hack a WPA-PSK protected network is to crack a WPS PIN
    if WPS is enabled on a target WLAN.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种攻击WPA-PSK保护网络的方式是破解WPS PIN码（如果目标WLAN启用了WPS）。
- en: Enterprise WLAN attacks
  id: totrans-219
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 企业WLAN攻击
- en: Attacking becomes a little bit more complicated if WPA-Enterprise security is
    in place, but could be executed in several minutes by a properly prepared attacker
    by imitating a legitimate access point with a RADIUS server and by gathering user
    credentials for further analysis (cracking).
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如果启用了WPA-Enterprise安全性，攻击会变得稍微复杂一些，但经过适当准备的攻击者可以通过模仿具有RADIUS服务器的合法接入点，并收集用户凭证进行进一步分析（破解），在几分钟内完成攻击。
- en: To settle this attack, an attacker needs to install a rogue access point with
    an SSID identical to the target WLAN's SSID and set other parameters (like EAP
    type) similar to the target WLAN to increase chances of success and reduce the
    probability of the attack to be quickly detected.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实施此攻击，攻击者需要安装一个伪造接入点，SSID与目标WLAN的SSID相同，并将其他参数（如EAP类型）设置为与目标WLAN相似，以增加成功的机会，并减少攻击被迅速发现的概率。
- en: Most user Wi-Fi devices choose an access point for a connection to a certain
    WLAN by a signal strength—they connect to that one which has the strongest signal.
    That is why an attacker needs to use a powerful Wi-Fi interface for a rogue access
    point to override signals from legitimate ones and make devices connect to the
    rogue access point.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数用户的Wi-Fi设备根据信号强度选择连接到某个WLAN的接入点——它们会连接到信号最强的那个。因此，攻击者需要使用强大的Wi-Fi接口来伪造接入点，覆盖合法接入点的信号，迫使设备连接到伪造接入点。
- en: A RADIUS server used during such attacks should have the capability to record
    authentication data, NTLM hashes, for example.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种攻击过程中使用的RADIUS服务器应具有记录认证数据的能力，例如NTLM哈希。
- en: From a user perspective, being attacked in such way looks like just being unable
    to connect to a WLAN for an unknown reason and could even be not seen if a user
    is not using a device at that moment and is just passing by a rogue access point.
    It is worth mentioning that classic physical security or wireless IDPS solutions
    are not always effective in such cases. An attacker or a penetration tester can
    install a rogue access point outside of the range of a target WLAN. It will allow
    the hacker to attack user devices without the need to get into a physically controlled
    area (for example, an office building), thus making the rogue access point unreachable
    and invisible for wireless IDPS systems. Such a place could be a bus or train
    station, parking lot, or a café where a lot of users of a target WLAN go with
    their Wi-Fi devices.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 从用户的角度来看，以这种方式遭受攻击的表现就像是由于某种未知原因无法连接到WLAN，甚至如果用户此时没有使用设备而仅仅是经过一个恶意接入点时，也可能看不到任何异常。值得一提的是，传统的物理安全或无线IDPS解决方案在这种情况下并不总是有效。攻击者或渗透测试人员可以在目标WLAN的范围外安装一个恶意接入点，这将使黑客能够攻击用户设备，而无需进入物理控制区域（例如办公楼），从而使恶意接入点对于无线IDPS系统来说无法接触且不可见。这样的地点可以是公交车站、火车站、停车场或是许多目标WLAN用户带着Wi-Fi设备前往的咖啡馆。
- en: Unlike WPA-PSK with only one key shared between all WLAN users, the Enterprise
    mode employs personified credentials for each user whose credentials could be
    more or less complex depending only on a certain user. That is why it is better
    to collect as many user credentials and hashes as possible, thus increasing the
    chances of successful cracking.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 与WPA-PSK（仅在所有WLAN用户之间共享一个密钥）不同，企业模式为每个用户使用个性化的凭据，而这些凭据的复杂性取决于特定用户。因此，收集尽可能多的用户凭据和哈希值是更好的做法，从而增加成功破解的机会。
- en: Summary
  id: totrans-226
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we reviewed which wireless technologies are used to transfer
    data and especially highlighted the Wi-Fi technology as the technology that we
    will employ to provide network access to our penetration testing lab.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们回顾了用于传输数据的无线技术，并特别强调了Wi-Fi技术，因为我们将使用它来为我们的渗透测试实验室提供网络访问。
- en: During our journey through this chapter, we also looked at the security mechanisms
    that are used to secure access to wireless networks, their typical threads, and
    common misconfigurations that lead to security breaches and allow attackers to
    harm corporate and private wireless networks.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们本章的旅程中，我们还了解了用于保护无线网络访问的安全机制，它们的典型威胁以及常见的错误配置，这些配置导致安全漏洞并使攻击者能够破坏企业和私人无线网络。
- en: The brief attack methodology overview has given us a general understanding of
    how attackers normally act during wireless attacks and how they bypass common
    security mechanisms by exploiting certain flaws in those mechanisms.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 简要的攻击方法概述让我们对攻击者在无线攻击过程中通常如何行动以及如何通过利用某些安全机制中的漏洞绕过常见的安全防护措施有了一个大致的了解。
- en: We also saw that the most secure and preferable way to protect a wireless network
    is to use WPA2-Enterprise security along with a mutual client and server authentication,
    which we are going to implement in our penetration testing lab.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还看到，保护无线网络最安全且最推荐的方式是使用WPA2-Enterprise安全协议，并结合客户端和服务器的相互身份验证，我们将在渗透测试实验室中实现这一点。
- en: Now, we are ready to proceed with building a wireless lab protected from the
    flaws listed previously. In the next chapter, we are going to help you to first
    determine the tasks that a lab should fulfill for you and then we will guide you
    through the whole lab planning process. The guidance is organized in such a way
    that you can decide which lab components and technologies you need to implement
    based on your own requirements.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经准备好继续构建一个免受前述漏洞影响的无线实验室。在下一章，我们将帮助你首先确定实验室需要为你完成的任务，然后我们将指导你完成整个实验室规划过程。指导内容的组织方式使你可以根据自己的需求决定需要实现哪些实验室组件和技术。
