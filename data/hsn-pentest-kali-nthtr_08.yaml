- en: Clearing Tracks and Removing Evidence from a Target
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 清除目标上的痕迹和移除证据
- en: One of the most important aspects during a penetration test is to ensure there
    isn’t any trace of a compromise on the system. Like a hacker, your goal may be
    to compromise a target system or network, however, it is very important when terminating
    the connection or exiting the victim’s system that there isn’t any log or residual
    data left behind. Furthermore, during a penetration test, additional data may
    be generated that leaves a trace on the system and network.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试过程中最重要的一个方面是确保系统上没有任何被入侵的痕迹。就像黑客一样，你的目标可能是入侵目标系统或网络，然而，在终止连接或退出受害者系统时，确保没有任何日志或残留数据留下是非常重要的。此外，在渗透测试期间，可能会生成额外的数据，这些数据会在系统和网络上留下痕迹。
- en: 'In this chapter, we will be covering the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Clearing logs on Windows
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清除Windows上的日志
- en: Clearing logs on Linux
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 清除Linux上的日志
- en: Deleting files from the target
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从目标中删除文件
- en: Let's dive In!
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入研究一下！
- en: Clearing tracks
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 清除痕迹
- en: The field of cybersecurity is growing at an exponential rate; the need for professionals
    to help combat and protect organizations and citizens from both cyber threats
    and threat actors are in extremely high demand. A cyber-attack can be anything
    from a phishing email, malware infection, and even ransomware attacks; the cybersecurity
    organizations and certification bodies, such as EC-Council and GIAC, saw the need
    for forensics in the digital world as assists in investigations to determine what
    happened, how the attack took place, the threat actors, and many more details
    that can assist the prosecution in a court of law.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 网络安全领域正以指数级增长；需要专业人员来帮助打击和保护组织和公民免受网络威胁和威胁行为者的需求非常高。网络攻击可以是任何来自网络钓鱼邮件、恶意软件感染，甚至勒索软件攻击；网络安全组织和认证机构，如EC-Council和GIAC，认识到数字世界中取证对于调查是多么重要，以确定发生了什么事情，攻击是如何发生的，威胁行为者等等细节，这些都可以帮助检察机关在法庭上进行起诉。
- en: In cybersecurity, a security incident is an event that is triggered by an organization’s
    system or network that indicates a compromise. An example of a security incident
    is a malicious file running on an employee’s computer. The anti-malware protection
    software will detect and trigger an alert for investigation.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络安全领域，安全事件是由组织的系统或网络触发的事件，表明存在被入侵的迹象。安全事件的一个例子是员工计算机上运行的恶意文件。反恶意软件保护软件将检测并触发警报以进行调查。
- en: 'The field of digital forensics opened the door for many new jobs, such as First
    Responder, Incident Handler, Cyber Forensics Investigator, and Malware Researcher.
    Each of these titles has a common goal: to determine how the system was compromised
    by a threat actor. For any action done on a system, whether by a user or an application,
    a system log message is generated and stored for accountability purposes. During
    a forensic investigation, the examiner usually attempts to retrieve the logs from
    the system. The log messages will indicate the entire history of a security incident.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 数字取证领域为许多新工作打开了大门，例如第一响应者、事件处理者、网络取证调查员和恶意软件研究员。这些职称都有一个共同的目标：确定系统是如何被威胁行为者入侵的。对于系统上的任何操作，无论是用户还是应用程序，都会生成并存储系统日志消息以供核算目的。在取证调查期间，检查员通常会尝试从系统中检索日志。日志消息将指示安全事件的整个历史。
- en: Types of logs and their locations
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 日志类型及其位置
- en: During this section, we will discuss the various types of logs a penetration
    tester should consider removing and where these logs can be found.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论渗透测试人员应考虑删除的各种类型的日志以及这些日志的位置。
- en: DHCP server logs
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DHCP服务器日志
- en: 'These logs keep an accountability of IP address assignment on the network.
    This log stores all the transactions that have taken place between a potential
    DHCP client and the DHCP server. Most importantly, the **media access control**
    (**MAC**) addresses of the clients will be stored within the log messages. The
    following are the locations of DHCP server logs:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这些日志保留了网络上IP地址分配的记录。此日志存储了潜在的DHCP客户端和DHCP服务器之间发生的所有交易。最重要的是，客户端的**媒体访问控制**（**MAC**）地址将存储在日志消息中。以下是DHCP服务器日志的位置：
- en: DHCP logs are stored within the `%SystemRoot%\System32\dhcp` directory of a
    Windows system.
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows系统中的DHCP日志存储在`%SystemRoot%\System32\dhcp`目录中。
- en: On Linux, to see the DHCP logs, we can use the `cat /var/log/syslog | grep -Ei
    'dhcp'` command.
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Linux上，要查看DHCP日志，我们可以使用`cat /var/log/syslog | grep -Ei 'dhcp'`命令。
- en: Syslog messages
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Syslog消息
- en: When a cyber-attack occurs within an organization, whether it’s an MITM or a
    system acting as a zombie machine which is part of a botnet army an investigation
    is performed. Forensics Investigators perform their investigation and analysis
    not only on computers, laptops, and servers, but also on the network. For every
    session or transaction that occurs across a network, devices such as firewalls,
    intrusion-detection/prevention systems (IDS/IPS), and other network security appliances
    generate logs for all traffic. Devices uses the **Syslog** protocol and framework
    to generate log messages in a uniform format with all the necessary details a
    network professional would need and understand.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 当组织内发生网络攻击时，无论是中间人攻击还是系统充当僵尸机器并成为僵尸网络的一部分，都会进行调查。取证调查员不仅对计算机、笔记本电脑和服务器进行调查和分析，还对网络进行调查。对于网络上发生的每个会话或交易，诸如防火墙、入侵检测/防御系统（IDS/IPS）和其他网络安全设备都会为所有流量生成日志。设备使用**Syslog**协议和框架以统一格式生成日志消息，其中包含网络专业人员所需和理解的所有必要细节。
- en: Syslogs are located at `/var/log/syslog` on Linux systems.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux系统上，Syslog位于`/var/log/syslog`。
- en: Packet analysis
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据包分析
- en: 'Further, looking  into network forensics, investigators perform packet analysis,
    observing any anomalies on the network segment. Packet analysis allows an investigator
    to determine the following:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，深入研究网络取证，调查员进行数据包分析，观察网络段上的任何异常情况。数据包分析允许调查员确定以下内容：
- en: Origin of the attack
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击来源
- en: Files uploaded and downloaded
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上传和下载的文件
- en: Type of traffic on the network
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络上的流量类型
- en: Time of the attack
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击时间
- en: Extracted artifacts, such as files
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提取的文物，如文件
- en: URLs and domains
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: URL和域名
- en: Victim machines during the attack
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击期间的受害机器
- en: Telemetry information
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 遥测信息
- en: Web server logs
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Web服务器日志
- en: 'These logs store log messages of all web activities between the web server
    and the client web browser. The following are the locations of each web server:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 这些日志存储了Web服务器和客户端Web浏览器之间的所有Web活动的日志消息。以下是每个Web服务器的位置：
- en: '**Internet Information Server** (**IIS**) log files are located in `%SystemDrive%\inetpub\logs\LogFiles`.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Internet Information Server** (**IIS**)日志文件位于`%SystemDrive%\inetpub\logs\LogFiles`。'
- en: Apache in Red Hat, CentOS, and Fedora logs are stored in `**/**var/log/httpd/access_log`
    and `/var/log/httpd/error_log`.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Red Hat、CentOS和Fedora中的Apache日志存储在`**/**var/log/httpd/access_log`和`/var/log/httpd/error_log`中。
- en: For Debian and Ubuntu systems, the Apache web server logs can be found at `/var/log/apache2/access_log`
    and `/var/log/apache2/error_log`.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对于Debian和Ubuntu系统，Apache Web服务器日志可以在`/var/log/apache2/access_log`和`/var/log/apache2/error_log`中找到。
- en: FreeBSD Apache logs are located at `/var/log/httpd-access.log` and `/var/log/httpd-error.log`.
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: FreeBSD Apache日志位于`/var/log/httpd-access.log`和`/var/log/httpd-error.log`。
- en: Database logs
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据库日志
- en: During a penetration test, you may be tasked to manipulate a target database,
    whether to create, modify, remove, or extract information. In doing so, the databases
    generate their own set of log messages.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试期间，您可能会被要求操纵目标数据库，无论是创建、修改、删除还是提取信息。在这样做的过程中，数据库会生成自己的一套日志消息。
- en: The database logs for a Microsoft SQL Server can be found at `\\Microsoft SQL
    Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\*.MDF` and `\\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\*.LDF`.
    An investigator may check the error logs on the database for any suspicious activities,
    these can be found at `\\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\LOG\ERRORLOG`.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft SQL Server的数据库日志可以在`\\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\*.MDF`和`\\Microsoft
    SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA\*.LDF`找到。调查人员可以检查数据库的错误日志以查找任何可疑活动，这些可以在`\\Microsoft
    SQL Server\MSSQL11.MSSQLSERVER\MSSQL\LOG\ERRORLOG`找到。
- en: Event logs
  id: totrans-39
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 事件日志
- en: Event logs are a record of actions taken on a system with and without user intervention.
    Security logs for events if a user has successfully accessed the system or even
    failed log-in attempt, application logging of starting or terminating a program
    on an operating system. Event logs keep a record of everything that happens on
    a system, from the point it's powered on until it's turned off.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 事件日志是对系统上采取的行动的记录，无论是否有用户干预。事件日志记录了用户是否成功访问系统或登录尝试失败的安全日志，应用程序日志记录了操作系统上启动或终止程序的情况。事件日志记录了系统上发生的一切，从开机到关机。
- en: 'In the Windows 10 operating system, event logs are stored within the following
    key location in the registry:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows 10操作系统中，事件日志存储在注册表中的以下位置：
- en: '`HKLM\System\ControlSet00x\Services\EventLog`'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '`HKLM\System\ControlSet00x\Services\EventLog`'
- en: 'To view a list of available event logs on Windows 10, use the `wevtutil el`
    command:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看Windows 10上可用的事件日志列表，使用`wevtutil el`命令：
- en: '![image](img/a392aab8-7002-4693-915d-e479f46307c8.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/a392aab8-7002-4693-915d-e479f46307c8.png)'
- en: 'Furthermore, using the `wevtutil gl <name of log>` command will present configuration
    information about the selected log:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，使用`wevtutil gl <name of log>`命令将呈现所选日志的配置信息：
- en: '![image](img/f3840542-feae-4164-bfc3-b04003c82440.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/f3840542-feae-4164-bfc3-b04003c82440.png)'
- en: 'Additionally, the Windows system logs are stored in `C:\Windows\System32\winevt\Logs` on
    a local system:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Windows系统日志存储在本地系统的`C:\Windows\System32\winevt\Logs`中：
- en: '![image](img/b2c9109c-87e2-4dd1-9214-94fcd19b01f7.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/b2c9109c-87e2-4dd1-9214-94fcd19b01f7.png)'
- en: Simply modifying or removing the log files stored within these locations will present
    a challenge to a Forensics Investigation team; it becomes difficult to determine
    the actual sequence of the attack and reduces the chances of being caught.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 简单地修改或删除这些位置存储的日志文件将对取证调查团队构成挑战；难以确定攻击的实际顺序，并降低被抓到的机会。
- en: Clearing logs on Windows
  id: totrans-50
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Windows上清除日志
- en: 'Within the Windows operating system, the **Event Viewer** is an application
    that presents all **Application**, **Security**, **Setup**, and **System logs**
    within a single dashboard. To access **Event Viewer**, click **Start** | **Windows
    Administrative Tools** | **Event Viewer**:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows操作系统中，**Event Viewer**是一个应用程序，它在一个仪表板中呈现了所有**Application**、**Security**、**Setup**和**System
    logs**。要访问**Event Viewer**，点击**Start** | **Windows Administrative Tools** | **Event
    Viewer**：
- en: '![image](img/07089bb5-fae6-4a21-945e-5a106e308ed4.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/07089bb5-fae6-4a21-945e-5a106e308ed4.png)'
- en: For another method of opening **Event Viewer** on Windows, simply press Windows +
    *R* on the keyboard to open the **Run** prompt, then type `eventvwr.msc` and click
    **OK**.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows上打开**Event Viewer**的另一种方法是，只需在键盘上按Windows + *R*，打开**Run**提示，然后键入`eventvwr.msc`并单击**OK**。
- en: From the **Event Viewer** window, logs can be cleared simply by selecting the
    **Clear Log** feature on the **Action** pane. To clear logs for a particular category,
    such as all logs that reside within the **Application** group, simply right-click
    on the group name and choose **Clear Log**.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 从**Event Viewer**窗口，可以通过在**Action**窗格上选择**Clear Log**功能来清除日志。要清除特定类别的日志，例如所有位于**Application**组中的日志，只需右键单击组名，然后选择**Clear
    Log**。
- en: Using PowerShell to clear logs in Windows
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用PowerShell在Windows上清除日志
- en: PowerShell is a very powerful command-line interface that gives a system administrator
    a lot of control on a system for rapidly executing and automating operations and
    tasks in Windows, MacOS, and Linux operating systems.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: PowerShell是一个非常强大的命令行界面，可以让系统管理员在Windows、MacOS和Linux操作系统上快速执行和自动化操作和任务。
- en: 'To begin, click on the Windows accent, which is the start icon in the bottom-left
    corner on your desktop and type `powershell`. The Windows PowerShell application
    will appear, simply click on it to engage as shown in the following screenshot:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，点击Windows图标，即桌面左下角的开始图标，然后键入`powershell`。Windows PowerShell应用程序将出现，只需点击它以进行操作，如下图所示：
- en: '![image](img/f5588bde-1cf1-441f-b8cc-2f04873ecd34.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/f5588bde-1cf1-441f-b8cc-2f04873ecd34.png)'
- en: Ensure you run **Windows PowerShell** as Administrator. Running a program or
    application with Administrator privileges will remove any sort of restriction
    a standard user will encounter. These restrictions will include security privileges.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您以**Windows PowerShell**管理员身份运行。以管理员权限运行程序或应用程序将消除标准用户遇到的任何限制。这些限制将包括安全权限。
- en: 'Now, let''s do a few exercises to clear logs:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们做一些练习来清除日志：
- en: '**Exercise 1: Clearing all Event Logs**'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**练习1：清除所有事件日志**'
- en: 'Using the `wevtutil el | Foreach-Object {wevtutil cl “$_”}` command will clear
    the event logs on Windows:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`wevtutil el | Foreach-Object {wevtutil cl “$_”}`命令将清除Windows上的事件日志：
- en: '![image](img/18306cbf-5ffe-4d46-abc3-d25973b95f12.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/18306cbf-5ffe-4d46-abc3-d25973b95f12.png)'
- en: 'After executing the command, the logs are now wiped, as seen in **Event Viewer**:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 执行命令后，日志现在已被清除，如**事件查看器**中所见：
- en: '![image](img/7305b559-8d97-4d8e-a5f5-4c3f0dcf4bbf.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/7305b559-8d97-4d8e-a5f5-4c3f0dcf4bbf.png)'
- en: '**Exercise 2: Clearing Specific Logs from a computer**'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**练习2：从计算机中清除特定日志**'
- en: 'The `Clear-EventLog` command allows an administrator to clear/wipe all the
    log messages from a specific event category. The syntax for using this command
    is `Clear-EventLog <LogName>`:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '`Clear-EventLog`命令允许管理员清除/擦除特定事件类别的所有日志消息。使用此命令的语法是`Clear-EventLog <LogName>`：'
- en: '![image](img/b556c25d-84cd-40bd-8798-4de4c6f62712.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/b556c25d-84cd-40bd-8798-4de4c6f62712.png)'
- en: If you recall, using the `wevtutil el` command will provide you with a list
    of log categories on your system.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您回忆起，使用`wevtutil el`命令将为您提供系统上日志类别的列表。
- en: 'Using the `Get-Help` parameter followed by the `Clear-EventLog`cmdlet will
    provide you with additional options:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`Get-Help`参数后跟`Clear-EventLog`cmdlet将为您提供其他选项：
- en: '![image](img/bd92de68-dff3-437b-bfb5-755b7c6361f9.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/bd92de68-dff3-437b-bfb5-755b7c6361f9.png)'
- en: We have concluded our PowerShell exercises. We are going to take a look at using
    the command prompt to clear logs in the next section.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了PowerShell练习。接下来我们将看看如何使用命令提示符来清除下一节中的日志。
- en: Using the command prompt to clear logs in Windows
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用命令提示符在Windows中清除日志
- en: 'In this section, we are going to take a look at using the command prompt to
    clear logs on a Windows operating system:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将看看如何使用命令提示符来清除Windows操作系统上的日志：
- en: '**Exercise 1: Clearing individual logs**'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**练习1：清除单个日志**'
- en: 'Previously, we used the `wevtutil el` command on the Windows command prompt
    to view a list of log types/categories. We can use `wevtutil cl` followed by a
    specific log to wipe/clear the entries within the log category:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以前，我们在Windows命令提示符上使用`wevtutil el`命令来查看日志类型/类别的列表。我们可以使用`wevtutil cl`后跟特定日志来擦除/清除日志类别中的条目：
- en: '![image](img/799f115a-6ac5-49ff-b4f3-15564a198233.png)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/799f115a-6ac5-49ff-b4f3-15564a198233.png)'
- en: 'Additionally, the `clear-log` syntax can be used as a substitute for `cl`:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，`clear-log`语法可以用作`cl`的替代：
- en: '![image](img/51e88a58-7bec-4d64-8b54-b1d1c1a11382.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/51e88a58-7bec-4d64-8b54-b1d1c1a11382.png)'
- en: '**Exercise 2: Clearing all logs using a single script**'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**练习2：使用单个脚本清除所有日志**'
- en: 'When we ran the `wevtutil el` command, we saw a long list of event log categories.
    However, clearing each category is quite time-consuming, so use the following
    script to clear each category upon execution:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们运行`wevtutil el`命令时，我们看到了一个很长的事件日志类别列表。然而，清除每个类别是非常耗时的，因此在执行时使用以下脚本清除每个类别：
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![image](img/1608a511-f18a-48d0-9015-9def24fa98f5.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/1608a511-f18a-48d0-9015-9def24fa98f5.png)'
- en: As we can see in the preceding screenshot, after executing our command, each
    log file is being cleared. In the next section, we are going to discuss methods
    for clearing logs in Linux.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，在执行我们的命令后，每个日志文件都被清除了。在下一节中，我们将讨论在Linux中清除日志的方法。
- en: Clearing logs in Linux
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Linux中清除日志
- en: 'As with all operating systems, logs are also generated and stored on Linux-based
    systems. Log files are the records of all activities that took place on a system.
    The following are the general locations of the Linux log files:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 与所有操作系统一样，Linux系统上也会生成和存储日志。日志文件是系统上发生的所有活动的记录。以下是Linux日志文件的一般位置：
- en: '![image](img/351aa78d-a51f-421c-a64a-98db4a0412ea.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/351aa78d-a51f-421c-a64a-98db4a0412ea.png)'
- en: '![image](img/ae25c5fe-4da6-4f63-b66c-cd758c511956.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/ae25c5fe-4da6-4f63-b66c-cd758c511956.png)'
- en: 'The following are additional log locations on Linux systems:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Linux系统上的其他日志位置：
- en: '**Example 1: Clearing logs using null**'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**示例1：使用null清除日志**'
- en: In this example, we are going to use null, a non-existent object, to remove
    the contents of a file. We are going to clear the logs of the Apache `access.log`
    file on a Linux system. A null object is an entity without any attributes or characteristics
    in an operating system.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，我们将使用null，一个不存在的对象，来删除文件的内容。我们将清除Linux系统上Apache `access.log`文件的日志。空对象是操作系统中没有任何属性或特征的实体。
- en: 'To discover the location of a file, use the `locate` command followed by the
    filename. In this exercise, we use the `locate access.log` command to show us
    the location of all files that contain the `access.log` string sequence:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 要发现文件的位置，请使用`locate`命令后跟文件名。在这个练习中，我们使用`locate access.log`命令来显示包含`access.log`字符串序列的所有文件的位置：
- en: '![image](img/eb252872-29bb-4454-9214-386e545aaf6c.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/eb252872-29bb-4454-9214-386e545aaf6c.png)'
- en: Additionally, we can use discover files that belong to a package in Linux and
    filter our search using the `locate apache2 | grep “access.log”` command.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们可以使用`locate apache2 | grep “access.log”`命令来发现属于Linux包的文件并过滤我们的搜索。
- en: 'Next, we are going to use the `cat` command followed by the file pathway to
    determine whether there are any log entries:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将使用`cat`命令后跟文件路径来确定是否有任何日志条目：
- en: '![image](img/43e696e4-6eb2-4717-93bd-03c53dc74d32.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/43e696e4-6eb2-4717-93bd-03c53dc74d32.png)'
- en: 'As we can see, the previous screenshot contains entries within the `access.log`
    file. Additional, we use the `du –sh <filename>` command to determine the file
    size; if it''s 0 KB the file is empty, if the file size is greater than 0 KB,
    the file contains entries:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，前面的屏幕截图中包含了`access.log`文件中的条目。此外，我们使用`du –sh <filename>`命令来确定文件大小；如果是0
    KB，则文件为空，如果文件大小大于0 KB，则文件包含条目：
- en: '![image](img/36c8d2d2-ed6d-48d6-84c9-80ca959cd9a1.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/36c8d2d2-ed6d-48d6-84c9-80ca959cd9a1.png)'
- en: 'Now we are going to change directory to the location of the `access.log` file
    using the `cd /var/log/access.log` command and redirect null to the file:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用`cd /var/log/access.log`命令切换到`access.log`文件的位置，并将null重定向到文件：
- en: '![image](img/09cdce3d-5034-4d11-ac55-e592082368a4.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/09cdce3d-5034-4d11-ac55-e592082368a4.png)'
- en: 'If we use the `cat` command on the file once more, we see there are no entries
    and the file size is 0 KB:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们再次对文件使用`cat`命令，我们会看到没有条目，文件大小为0 KB：
- en: '![image](img/f6ef0b61-e2f4-4282-a797-5563b5d14950.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/f6ef0b61-e2f4-4282-a797-5563b5d14950.png)'
- en: '**Exercise 2: Clearing logs using the True utility**'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**练习2：使用True实用程序清除日志**'
- en: 'Another technique to clear/remove logs from a file is using the `True` utility.
    We have generated some traffic to our web server, as you can see in the following
    screenshot:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种清除/删除文件中日志的技术是使用`True`实用程序。我们已经向我们的Web服务器生成了一些流量，如下面的屏幕截图所示：
- en: '![image](img/27c36585-0b45-4078-b36f-b6d2cf947915.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/27c36585-0b45-4078-b36f-b6d2cf947915.png)'
- en: 'Currently, our file size is at 8 KB:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，我们的文件大小为8 KB：
- en: '![image](img/a697f3c6-b5ec-4fa1-923a-4f719bb5d3a6.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/a697f3c6-b5ec-4fa1-923a-4f719bb5d3a6.png)'
- en: 'Using the `true` command followed by the filename or path with file will erase
    the entries:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`true`命令后跟文件名或带有文件的路径将擦除条目：
- en: '![image](img/1f029af0-fddb-4411-bdeb-bac795a9b8ff.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/1f029af0-fddb-4411-bdeb-bac795a9b8ff.png)'
- en: The `true` command/utility has a description that says it does no work or nothing,
    successfully.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '`true`命令/实用程序有一个描述，说它不做任何工作或什么都不做，成功。'
- en: 'We can verify now that there are no entries within the file and the file size
    is 0 KB:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在可以验证文件中没有条目，文件大小为0 KB：
- en: '![image](img/bdb26759-64ac-49c0-a7a6-317389d866e7.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/bdb26759-64ac-49c0-a7a6-317389d866e7.png)'
- en: '**Using Meterpreter to clear Windows logs**'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Meterpreter清除Windows日志**'
- en: Within the Metasploit framework, there exists a very advanced and dynamically-extensible
    payload known as **Meterpreter**. Using this utility during the exploitation phase
    of a penetration test it will allow you to execute the stager payloads on the
    target system which can create bind or even reverse shells between the target
    and the attacker's machine.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 在Metasploit框架中，存在一个非常先进和动态可扩展的有效载荷，称为**Meterpreter**。在渗透测试的利用阶段使用这个实用程序，它将允许您在目标系统上执行分段有效载荷，这可以在目标系统和攻击者的机器之间创建绑定甚至反向shell。
- en: Metasploit is an exploitation-development framework created by Rapid7 ([www.rapid7.com](http://www.rapid7.com)).
    It allows penetration testers to gather information about a target, discover vulnerabilities,
    create and deliver exploits and payloads onto a target, and create backdoors.
    It's like a penetration tester toolkit for discovering and exploiting vulnerabilities.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit是由Rapid7创建的一个开发框架（[www.rapid7.com](http://www.rapid7.com)）。它允许渗透测试人员收集有关目标的信息，发现漏洞，创建和传递利用和有效载荷到目标，并创建后门。这就像一个渗透测试人员的工具包，用于发现和利用漏洞。
- en: 'Meterpreter is designed to be stealthy, powerful, and extensible. Once a system
    has been successfully exploited, you can use the `clearev` command to clear the
    following logs of `Application`, `System`, and `Security`:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: Meterpreter旨在具有隐秘性、强大性和可扩展性。一旦成功利用了系统，您可以使用`clearev`命令清除以下日志：`Application`，`System`和`Security`：
- en: '![image](img/dd590168-af56-41d4-8f24-ae25b4a4aac3.png)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![image](img/dd590168-af56-41d4-8f24-ae25b4a4aac3.png)'
- en: As we can see in the preceding screenshot, Meterpreter is clearing the logs
    of each category on the target system. The number of entries cleared is also listed.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，Meterpreter正在清除目标系统上每个类别的日志。清除的条目数也列出。
- en: Summary
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we discussed ways of being stealthy during a penetration test,
    while simulating attacks on a targeted system and network. We discussed various
    types of logs and their locations. Further, we looked at a few scenarios where
    we used various techniques to clear logs on both Windows and Linux operating systems.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了在渗透测试期间保持隐秘的方法，同时模拟对目标系统和网络的攻击。我们讨论了各种类型的日志及其位置。此外，我们看了一些场景，我们在其中使用各种技术清除了Windows和Linux操作系统上的日志。
- en: In the next chapter, we will cover *Packet Sniffing and Traffic Analysis*. We'll
    use different techniques to capture traffic and conduct analysis using various
    tools to obtain confidential information.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将介绍*数据包嗅探和流量分析*。我们将使用不同的技术来捕获流量，并使用各种工具进行分析，以获取机密信息。
