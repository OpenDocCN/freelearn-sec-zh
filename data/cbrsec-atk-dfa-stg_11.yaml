- en: Active Sensors
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**主动传感器**'
- en: Now that your network is segmented, you need to actively monitor to detect suspicious
    activities and threats, and take actions based on that. Your security posture
    won't be fully completed if you don't have a good detection system, which means
    having the right sensors distributed across the network, monitoring the activities.
    The Blue Team should take advantages of modern detection technologies that create
    a profile of the user and computer to better understand anomalies and deviations
    in normal operations, and take preventative actions.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您的网络已被分段，您需要主动监控以检测可疑活动和威胁，并根据此采取行动。如果没有良好的检测系统，您的安全防护将不完全，这意味着您需要在网络中分布合适的传感器来监控活动。蓝队应该利用现代检测技术，这些技术能够为用户和计算机创建一个配置文件，更好地理解异常和偏离正常操作的行为，并采取预防措施。
- en: 'In this chapter, we are going to cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Detection capabilities
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测能力**'
- en: Intrusion detection systems
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**入侵检测系统**'
- en: Intrusion prevention systems
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**入侵防御系统**'
- en: Behavior analytics on-premises
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地行为分析
- en: Behavior analytics in a hybrid cloud
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 混合云中的行为分析
- en: Detection capabilities
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**检测能力**'
- en: 'The current threat landscape demands a new approach to detection systems, relying
    on the traditional complexity to fine-tuning initial rules, thresholds, baselines
    and still deal with lots of false positives is becoming unacceptable for many
    organizations. When preparing to defend against attackers, the Blue Team must
    leverage a series of techniques that include:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 当前的威胁态势要求对检测系统采取新的方法，依赖于传统的复杂性来微调初始规则、阈值、基线，并且仍然面临大量的误报，对于许多组织来说，这已变得不可接受。在准备防御攻击者时，蓝队必须利用一系列技术，包括：
- en: Data correlation from multiple data sources
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自多个数据源的数据关联
- en: Profiling
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**性能分析**'
- en: Behavior analytics
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**行为分析**'
- en: Anomaly detection
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常检测
- en: Activity evaluation
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 活动评估
- en: Machine learning
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**机器学习**'
- en: It is important to emphasize that some of the traditional security controls,
    such as protocol analysis and signature-based antimalware, still have their space
    in the line of defense, but to combat legacy threats. You shouldn't uninstall
    your anti-malware software just because it doesn't have machine learning capability,
    it is still one level of protection to your host. Remember the defense in depth
    approach that we discussed in the last chapter? Think of this protection as one
    layer of defense, and now you need to aggregate the other layers to enhance your
    security posture.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 需要强调的是，一些传统的安全控制措施，如协议分析和基于签名的反恶意软件，仍然在防线中占有一席之地，但它们主要用于应对传统威胁。您不应该仅仅因为反恶意软件软件没有机器学习功能就卸载它，它仍然是对您的主机的一层保护。记得我们在上一章中讨论的“深度防御”方法吗？把这种保护看作是防御的一层，现在您需要汇聚其他层次来增强您的安全防护。
- en: 'On the other hand, the traditional defender mindset that focuses on monitoring
    only high profile users is over and you can''t have this approach anymore. Current
    threat detections must look across all user accounts, profile them, and understand
    their normal behavior. Current threat actors will be looking to compromise the
    regular user, stay dormant in the network, continue the invasion by moving laterally,
    and escalate privileges. For this reason, the Blue Team must have detection mechanisms
    in place that can identify these behaviors across all devices, locations, and
    raise alerts based on the **Data Correlation**, as shown in the following diagram:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 另一方面，传统的防御者思维方式——仅关注高权限用户的监控——已经过时，您不能再采取这种方法。当前的威胁检测必须覆盖所有用户账户，进行配置文件分析，并理解他们的正常行为。当前的威胁行为者将尝试妥协普通用户，保持在网络中潜伏，继续通过横向移动进行入侵，并提升权限。因此，蓝队必须有检测机制，能够识别所有设备、位置上的这些行为，并根据**数据关联**发出警报，正如下图所示：
- en: '![](assets/22ccaa38-e0f5-4462-9185-a98c6188d30d.png)'
  id: totrans-18
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/22ccaa38-e0f5-4462-9185-a98c6188d30d.png)'
- en: When you contextualize the data, you naturally reduce the amount of false positives,
    and give a more meaningful result to the investigator.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 当您对数据进行上下文化时，您自然会减少误报的数量，并为调查员提供更有意义的结果。
- en: Indicators of compromise
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**妥协指标**'
- en: When talking about detection, it is important to talk about **Indicators of
    Compromise** (**IoC**). When new threats are found in the wild, they usually have
    a pattern of behavior and they leave their footprint in the target system.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在谈论检测时，重要的是要提到**妥协指标**（**IoC**）。当新威胁在实际环境中被发现时，它们通常具有一定的行为模式，并且会在目标系统中留下痕迹。
- en: 'For example, Petya ransomware ran the following commands in the target system
    to reschedule a restart:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，Petya 勒索软件在目标系统上运行以下命令来重新安排重启：
- en: '[PRE0]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Another Petya IoC is the local network scan on ports TCP `139` and TCP `445`.
    These are important indications that there is an attack taking place on the target
    system and, based on this footprint, Petya is the one to blame. Detection systems
    will be able to gather these indicators of compromise and raise alerts when an
    attack happens. Using Azure Security Center as an example, some hours after the
    Petya outbreak, Security Center automatically updates its detection engine and
    was able to warn users that their machine was compromised, as shown in the following
    screenshot:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个 Petya IoC 是在 TCP `139` 和 TCP `445` 端口上的本地网络扫描。这些是表明目标系统正在受到攻击的重要迹象，并且根据这些足迹，可以将责任归咎于
    Petya。检测系统将能够收集这些妥协指标，并在攻击发生时发出警报。以 Azure 安全中心为例，在 Petya 爆发后的几个小时，安全中心自动更新了其检测引擎，并能够警告用户他们的机器已被攻破，如下图所示：
- en: '![](assets/f1c3b520-6845-4868-80c5-980c64effdcb.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/f1c3b520-6845-4868-80c5-980c64effdcb.png)'
- en: 'You can sign up with OpenIOC ([http://openioc.org](http://openioc.org)) to
    retrieve information regarding new IoC and also contribute to the community. By
    using their IoC Editor (consult the reference section for the URL to download
    this tool), you can create your own IoC or you can review an existing IoC. The
    example that follows shows the IoC Editor showing the DUQU Trojan IoC:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过 OpenIOC ([http://openioc.org](http://openioc.org)) 注册账号，获取有关新 IoC 的信息，并为社区做出贡献。通过使用他们的
    IoC 编辑器（请查阅参考部分以获取下载该工具的网址），你可以创建自己的 IoC，或者查看现有的 IoC。下面的示例展示了 IoC 编辑器显示的 DUQU
    木马 IoC：
- en: '![](assets/a8ed021e-cfce-400d-b484-91a470057cd1.png)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/a8ed021e-cfce-400d-b484-91a470057cd1.png)'
- en: If you look in the right lower pane, you will see all the indications of compromise,
    and logic operators (in this case most are AND) that compare each sequence and
    only return positive if everything is true. The Blue Team should always be aware
    of the latest threats, and IoC.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你查看右下角的窗格，你将看到所有的妥协迹象，以及逻辑运算符（在这种情况下，大多数是 AND），这些运算符将每个序列进行比较，只有在所有条件都为真时才会返回正结果。蓝队应该始终关注最新的威胁和
    IoC。
- en: You can use the following PowerShell command to download an IoC from OpenIOC,
    for the example below you are downloading the IoC for Zeus threat: `wget "http://openioc.org/iocs/72669174-dd77-4a4e-82ed-99a96784f36e.ioc"
    -outfile "72669174-dd77-4a4e-82ed-99a96784f36e.ioc"`
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以使用以下 PowerShell 命令从 OpenIOC 下载 IoC，下面的示例展示了如何下载 Zeus 威胁的 IoC：`wget "http://openioc.org/iocs/72669174-dd77-4a4e-82ed-99a96784f36e.ioc"
    -outfile "72669174-dd77-4a4e-82ed-99a96784f36e.ioc"`
- en: Intrusion detection systems
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入侵检测系统
- en: 'As the name implies, an **intrusion detection system** (**IDS**) is responsible
    for detecting a potential intrusion and trigger an alert. What can be done with
    this alert depends on the IDS policy. When creating an IDS Policy you need to
    answer the following questions:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 正如其名称所示，**入侵检测系统**（**IDS**）负责检测潜在的入侵并触发警报。如何处理该警报取决于 IDS 策略。在创建 IDS 策略时，你需要回答以下问题：
- en: Who should be monitoring the IDS?
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 谁应该负责监控 IDS？
- en: Who should have administrative access to the IDS?
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 谁应该拥有 IDS 的管理员访问权限？
- en: How incidents will be handled based on the alerts generated by the IDS?
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件将如何根据 IDS 生成的警报来处理？
- en: What's the IDS update policy?
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IDS 的更新策略是什么？
- en: Where should we install the IDS?
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们应该在哪里安装 IDS？
- en: 'These are just some examples of initial questions that should help in planning
    the IDS adoption. When searching for IDS, you can also consult a list of vendors
    at ICSA Labs Certified Products ([www.icsalabs.com](http://www.icsalabs.com))
    for more vendor-specific information. Regardless of the brand, a typical **IDS**
    has the capabilities shown in the following diagram:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这些只是一些初步问题的示例，有助于规划 IDS 的采纳。在搜索 IDS 时，你还可以查阅 ICSA Labs 认证产品列表 ([www.icsalabs.com](http://www.icsalabs.com))
    以获取更多厂商特定的信息。不论品牌如何，一个典型的**IDS**具有以下示意图所示的功能：
- en: '![](assets/5330d5c0-bee9-495e-9163-3cc06be2d846.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/5330d5c0-bee9-495e-9163-3cc06be2d846.png)'
- en: While these are some core capabilities, the amount of features will really vary
    according to the vendor and the method used by the IDS. The signature-based IDS
    will query a database of previous attack's signatures (footprints) and known system
    vulnerabilities to verify what was identified is a threat and if an alert must
    be triggered. Since this is a database of signatures, it requires constant update
    in order to have the latest version. The behavior-based IDS works by creating
    a baseline of patterns based on what it learned from the system. Once it learns
    the normal behavior, it becomes easier to identify deviations from normal activity.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这些是一些核心功能，但功能的数量会根据供应商和IDS使用的方法有所不同。基于签名的IDS会查询先前攻击的签名（足迹）和已知的系统漏洞数据库，以验证所识别的内容是否为威胁，并且是否需要触发警报。由于这是一个签名数据库，因此需要不断更新，以确保使用最新版本。基于行为的IDS通过根据从系统中学到的内容创建模式基线来工作。一旦它学习了正常行为，就能更容易识别出偏离正常活动的情况。
- en: An IDS alert is any type of user notification to bring awareness about a potential
    intrusion activity.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: IDS警报是任何类型的用户通知，用于提醒潜在的入侵活动。
- en: 'IDS can be host-based, as known as host-based intrusion detection system (**HIDS**),
    where the IDS mechanism will only detect an intrusion''s attempt against a particular
    host, or it can be a **network-based intrusion detection**** system** (**NIDS**),
    where it detects intrusion for the network segment that the NIDS is installed.
    This means that in the NIDS case, the placement becomes critical in order to gather
    valuable traffic. This is where the Blue Team should work closely with the IT
    Infrastructure team to ensure that the IDS is installed in strategic places across
    the network. Prioritize the following network segments when planning the NIDS
    placement:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: IDS可以是基于主机的，也就是所谓的主机入侵检测系统（**HIDS**），其中IDS机制仅检测特定主机的入侵尝试，或者它可以是**基于网络的入侵检测系统**（**NIDS**），它检测安装NIDS的网络分段的入侵。这意味着在NIDS的情况下，位置变得至关重要，以便收集有价值的流量。在这里，蓝队应与IT基础设施团队密切合作，确保IDS安装在网络中的战略位置。在规划NIDS放置时，优先考虑以下网络分段：
- en: DMZ/Perimeter
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DMZ/边界
- en: Core corporate network
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 核心企业网络
- en: Wireless network
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线网络
- en: Virtualization network
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟化网络
- en: Other critical network segments
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他关键网络分段
- en: These sensors will be listening to the traffic, which means it won't be consuming
    too much network bandwidth.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这些传感器将监听流量，这意味着它们不会消耗太多的网络带宽。
- en: 'The diagram that follows has an example of where to put the **IDS**:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了**IDS**的放置示例：
- en: '![](assets/5d39db15-0fca-4448-ae29-b153e587ec81.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/5d39db15-0fca-4448-ae29-b153e587ec81.png)'
- en: Notice that, in this case, an **IDS** (which in reality here is a NIDS) was
    added to each segment (leveraging a SPAN port on the network switch). Is it always
    like that? Absolutely not! It will vary according to your company's needs. The
    Blue Team must be aware of the company's constraints and help identify the best
    location where these devices should be installed.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在这种情况下，**IDS**（实际上是NIDS）已添加到每个分段中（利用网络交换机上的SPAN端口）。这总是这样吗？绝对不是！它将根据公司需求而有所不同。蓝队必须了解公司的约束条件，并帮助确定这些设备应安装的最佳位置。
- en: Intrusion prevention system
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入侵预防系统
- en: An **intrusion prevention system** (**IPS**) uses the same concept of an IDS,
    but, as the name says, it prevents the intrusion by taking a corrective action.
    This action will be customized by the IPS administrator in partnership with the
    Blue Team.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**入侵预防系统**（**IPS**）使用与IDS相同的概念，但正如名称所示，它通过采取纠正措施来防止入侵。此措施将由IPS管理员与蓝队合作定制。'
- en: 'The same way IDS is available for hosts (HIDS) and network (NIDS), IPS is also
    available for both as HIPS and NIPS. The NIPS placement within your network is
    critical and the same guidelines that were previously mentioned, are applicable
    here. You should also consider placing the NIPS inline with traffic in order to
    be able to take corrective actions. IPS detection can usually operate in one or
    more of the following modes:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 就像IDS可以应用于主机（HIDS）和网络（NIDS）一样，IPS也可以应用于这两者，分别是HIPS和NIPS。NIPS在网络中的位置至关重要，之前提到的相同准则在这里也适用。你还应该考虑将NIPS放置在流量的内联位置，以便能够采取纠正措施。IPS检测通常可以在以下一种或多种模式下运行：
- en: Rule-based
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于规则
- en: Anomaly-based
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于异常
- en: Rule-based detection
  id: totrans-56
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于规则的检测
- en: While operating this mode, the IPS will compare the traffic with a set of rules
    and try to verify if the traffic matches the rule. This is very useful when you
    need to deploy a new rule to block an attempt to exploit a vulnerability. NIPS
    systems, such as **Snort**, are able to block threats by leveraging rule-based
    detection. For example, the Snort rule Sid `1-42329` is able to detect the `Win.Trojan.Doublepulsar`
    variant.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在此模式下操作时，IPS会将流量与一组规则进行比较，并尝试验证流量是否符合规则。当你需要部署新规则以阻止利用漏洞的尝试时，这非常有用。像**Snort**这样的NIPS系统，能够通过基于规则的检测来阻止威胁。例如，Snort规则Sid
    `1-42329`能够检测到`Win.Trojan.Doublepulsar`变体。
- en: Snort rules are located under `etc/snort/rules` and you can download other rules
    from [https://www.snort.org/downloads/#rule-downloads](https://www.snort.org/downloads/#rule-downloads).
    When the Blue Team is going through an exercise with the Red Team, chances are
    that new rules must be created according to the traffic pattern and the attempts
    that the Red Team is making to infiltrate the system. Sometimes you need multiple
    rules to mitigate a threat, for example, the rules `42340` (Microsoft Windows
    SMB anonymous session IPC share access attempt), `41978` (Microsoft Windows SMB
    remote code execution attempt), and `42329-42332` (`Win.Trojan.Doublepulsar` variant)
    can be used to detect WannaCry ransomware. The same applies for other IPS, such
    as Cisco IPS that has signatures `7958/0` and `7958/1`, created to handle WannaCry.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Snort规则位于`etc/snort/rules`文件夹下，你可以从[https://www.snort.org/downloads/#rule-downloads](https://www.snort.org/downloads/#rule-downloads)下载其他规则。当蓝队与红队进行演练时，很可能需要根据流量模式和红队渗透系统的尝试创建新规则。有时候你需要多个规则来缓解某个威胁，例如，规则`42340`（Microsoft
    Windows SMB匿名会话IPC共享访问尝试）、`41978`（Microsoft Windows SMB远程代码执行尝试）和`42329-42332`（`Win.Trojan.Doublepulsar`变体）可以用来检测WannaCry勒索病毒。其他IPS也适用，例如，Cisco
    IPS拥有`7958/0`和`7958/1`签名，用于处理WannaCry。
- en: Subscribe to the Snort blog to receive updates regarding new rules at [http://blog.snort.org](http://blog.snort.org).
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 订阅Snort博客以获取关于新规则的更新：[http://blog.snort.org](http://blog.snort.org)。
- en: The advantage of using an open source NIPS, such as Snort, is that when a new
    threat is available in the wild, the community usually responds pretty fast with
    with a new rule to detect the threat. For example, when Petya ransomware was detected,
    the community created a rule, and posted at GitHub (you can see this rule here
    [https://goo.gl/mLtnFM](https://goo.gl/mLtnFM)). Although vendors and the security
    community are really fast to publish new rules, the Blue Team should be watching
    for new IoCs, and create NIPS rules based on these IoCs.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 使用开源NIPS（例如Snort）的一个优势是，当新威胁在野外出现时，社区通常会迅速响应，发布新的规则来检测该威胁。例如，当Petya勒索病毒被检测到时，社区创建了一条规则，并发布在GitHub上（你可以在这里查看该规则：[https://goo.gl/mLtnFM](https://goo.gl/mLtnFM)）。尽管厂商和安全社区非常迅速地发布新规则，蓝队仍应密切关注新的IoC，并根据这些IoC创建NIPS规则。
- en: Anomaly-based detection
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于异常的检测
- en: The anomaly, in this case, is based on what the IPS categorize as anomalous,
    this classification is usually based on heuristics or a set of rules. One variation
    of this is called statistical anomaly detection, which takes samples of network
    traffic at random times, and performs a comparison with a baseline. If this sample
    fits outside of the baseline, an action is taken (alert followed by action).
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，异常是基于IPS所归类为异常的内容，这一分类通常基于启发式算法或一组规则。其中一种变体被称为统计异常检测，它会在随机时间采样网络流量，并与基准进行比较。如果该样本超出了基准范围，则会采取措施（警报并跟随执行动作）。
- en: Behavior analytics on-premises
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本地环境中的行为分析
- en: For the vast majority of the companies currently in the market, the core business
    still happens on-premises. There is where the critical data is located, the majority
    of the users are working, and the key assets are located. As you know, we covered
    attack strategies in the first part of this book; the attacker tends to silently
    infiltrate your on-premises network, move laterally, escalate privilege, and maintain
    connectivity with command and control until he is able to execute his mission.
    For this reason, having behavior analytics on-premises is imperative to quickly
    break the attack kill chain.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 对于目前市场上绝大多数公司来说，核心业务仍然发生在本地环境中。这里是关键数据的存储位置，大多数用户的工作地点，以及关键资产的所在地。正如你所知，我们在本书的第一部分讨论了攻击策略；攻击者往往会悄悄渗透进你的本地网络，横向移动，提升权限，并与指挥控制保持连接，直到他能够执行他的任务。因此，在本地环境中实施行为分析对于迅速打破攻击链至关重要。
- en: According to Gartner, it is primordial to understand how users behave, and by
    tracking legitimate processes, organizations can enlist **User and Entity Behavior
    Analytics** (**UEBA**) to spot security breaches. There are many advantages in
    using an UEBA to detect attacks, but one of the most important ones is the capability
    to detect attacks in the early stages and take corrective action to contain the
    attack.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 根据Gartner的说法，理解用户行为至关重要，通过跟踪合法的流程，组织可以利用**用户和实体行为分析**（**UEBA**）来发现安全漏洞。使用UEBA来检测攻击有很多优势，其中最重要的一点是能够在攻击的早期阶段检测到并采取纠正措施来遏制攻击。
- en: 'The following diagram shows an example of how **UEBA** looks across different
    entities in order to take a decision if an alert must be triggered or not:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了**UEBA**如何在不同实体之间进行分析，以决定是否需要触发警报：
- en: '![](assets/5ee46226-827a-4cb2-a4b7-4b6deedd2249.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/5ee46226-827a-4cb2-a4b7-4b6deedd2249.png)'
- en: Without having a system that can look broadly to all data and make correlations
    not only on the traffic pattern, but also on a user's profile, the chances of
    having a false positive increase. What happens nowadays is when you use your credit
    card in a place that you ahve never been before and in a geographic location that
    you don't constantly go. If your credit card has monitoring protection, someone
    will call you to validate that transaction; this happens because the system understands
    your credit card usage pattern, it knows the places that you visited before, the
    locations that you bought, and even an average of what you usually spend. When
    you deviate from all these patterns that are interconnected, the system triggers
    an alert and the action that is taken is to have someone call you to double check
    if this is really you doing that transaction. Notice that in this scenario, you
    are acting quickly in the early stage, because the credit card company put that
    transaction on hold until they get your validation.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有一个能够全面查看所有数据并进行关联的系统，不仅仅是基于流量模式，还基于用户的个人资料，误报的可能性会增加。如今，当你在一个以前从未去过的地方使用信用卡，且地理位置也不同于你常去的地方时，通常会发生这种情况。如果你的信用卡有监控保护，某人会打电话给你确认这笔交易；这是因为系统了解你的信用卡使用模式，知道你以前访问过哪些地方，在哪些位置进行了消费，甚至你通常的消费水平。当你偏离这些相互关联的模式时，系统会触发警报，采取的措施是打电话给你，核实这笔交易是否真的是你本人进行的。注意，在这个场景中，你是在早期阶段就快速采取了行动，因为信用卡公司会暂停这笔交易，直到得到你的验证。
- en: 'The same thing happens when you have an UEBA system on premises. The system
    knows what servers your users usually access, what shares they usually visit,
    what operating system they usually use to access these resources, and the user''s
    geo-location. The following figure shows an example of this type of detection
    coming from Microsoft **Advanced Threat Analytics** (**ATA**), which uses behavior
    analytics to detect suspicious behavior:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 当你在本地部署一个UEBA系统时，会发生类似的情况。该系统知道用户通常访问哪些服务器，通常访问哪些共享文件夹，通常使用什么操作系统来访问这些资源，以及用户的地理位置。下图展示了来自微软**高级威胁分析**（**ATA**）的这类检测示例，ATA利用行为分析来检测可疑行为：
- en: '![](assets/3319109c-9711-4a91-a92a-4fd025a8502e.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/3319109c-9711-4a91-a92a-4fd025a8502e.png)'
- en: Notice that, in this case, the message is pretty clear, it says that the Administrator
    didn't perform these activities in the last month and not in correlation with
    other accounts within the organization. This alert is not something that can be
    ignored, because it is contextualized, which means it looks to the data that was
    collected in different angles to create a correlation and make a decision if an
    alert should be raised or not.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，在这种情况下，信息非常明确，系统提示管理员在过去一个月内没有进行这些活动，并且与组织内其他帐户没有关联。这一警报不是可以忽视的，因为它是有情境的，这意味着它从不同的角度分析所收集的数据，建立关联，以决定是否应该触发警报。
- en: 'Having a UEBA system on-premises can help the Blue Team to be more proactive,
    and have more tangible data to accurately react. The UEBA system is composed of
    multiple modules and another module is the advanced threat detection, which looks
    for known vulnerabilities and attack patterns. The following figure shows Microsoft
    ATA detecting a pass-the-ticket attack:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在本地部署UEBA系统可以帮助蓝队更加主动，拥有更有力的数据以便准确反应。UEBA系统由多个模块组成，其中一个模块是高级威胁检测，它用于寻找已知的漏洞和攻击模式。下图展示了微软ATA检测到“通行证票证攻击”（pass-the-ticket攻击）的情况：
- en: '![](assets/030c2343-bf7c-435f-b28e-577934684727.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/030c2343-bf7c-435f-b28e-577934684727.png)'
- en: 'Since there are different ways to perform this attack, advanced threat detection
    can''t look just for the signature, it needs to look for the attack pattern and
    what the attacker is trying to do; this is way more powerful than using a signature-based
    system. It also looks for suspicious behavior coming from regular users that are
    not supposed to be doing certain tasks, for example if a regular user tries to
    run `NetSess.exe` tool against the local domain, Microsoft ATA will consider this
    a SMB session enumeration, which from the attacker''s perspective, is usually
    done during the reconnaissance phase. For this reason, an alert is raised as shown
    in the following screenshot:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 由于执行此攻击的方式有很多种，先进的威胁检测不能仅仅依赖于签名，它需要识别攻击模式和攻击者试图做的事情；这比使用基于签名的系统要强大得多。它还会监测来自正常用户的可疑行为，尤其是那些不应执行某些任务的用户，例如，如果普通用户试图针对本地域运行
    `NetSess.exe` 工具，Microsoft ATA 会将其视为 SMB 会话枚举，而从攻击者的角度来看，这通常发生在侦察阶段。因此，会弹出警报，如下所示的截图所示：
- en: '![](assets/80ca1ed5-2677-4463-946e-e3ce2b7721ec.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/80ca1ed5-2677-4463-946e-e3ce2b7721ec.png)'
- en: Attackers will not only exploit vulnerabilities, but also take advantage of
    misconfigurations in the target system, such as bad protocol implementation and
    lack of hardening. For this reason, the UEBA system will also detect systems that
    are lacking a secure configuration.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者不仅会利用漏洞，还会利用目标系统中的配置错误，如不良的协议实现和缺乏加固。因此，UEBA 系统还会检测缺乏安全配置的系统。
- en: 'The following example shows Microsoft Advanced Threat Analytics detecting a
    service that is exposing account credentials because it is using LDAP without
    encryption:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 以下示例展示了 Microsoft Advanced Threat Analytics 检测到一个暴露账户凭证的服务，因为它使用了未加密的 LDAP：
- en: '![](assets/2a3a1a4b-2261-43ab-9e85-0f766b88d8ad.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/2a3a1a4b-2261-43ab-9e85-0f766b88d8ad.png)'
- en: Device placement
  id: totrans-79
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设备部署
- en: Using the same principles that were previously discussed in the IDS section,
    the location where you will install your UEBA will vary according to the company's
    needs and the vendor's requirements. The Microsoft ATA that was used in the examples
    explained in the previous section requires that you use port mirroring with the
    domain controller (DC). ATA will have no impact in the network bandwidth since
    it will be only listening to the DC traffic. Other solutions might require a different
    approach; for this reason, it is important to plan according to the solution that
    you purchased for your environment.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 使用之前在 IDS 部分讨论过的相同原则，安装 UEBA 的位置将根据公司的需求和供应商的要求有所不同。在前一节中解释的 Microsoft ATA 示例要求您使用与域控制器（DC）的端口镜像。ATA
    不会对网络带宽产生影响，因为它仅监听 DC 流量。其他解决方案可能需要不同的方法；因此，按照您为环境购买的解决方案进行规划非常重要。
- en: Behavior analytics in a hybrid cloud
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 混合云中的行为分析
- en: When the Blue Team needs to create countermeasures to secure a hybrid environment,
    the team needs to expand their view of the current threat landscape, and perform
    an assessment in order to validate continuous connectivity with the cloud and
    check the impact on overall security posture. In a hybrid cloud, most companies
    will opt to use an IaaS model and, although IaaS adoption is growing, the security
    aspect of it is still the main concern, according to an Oracle survey on IaaS
    Adoption. According to the same report, *longer term IaaS users suggest the technology
    ultimately makes a positive impact on security*. In reality, it does have a positive
    impact and that's where the Blue Team should focus their efforts on improving
    their overall detection. The intent is to leverage hybrid cloud capabilities to
    benefit the overall security posture. The first step is to establish a good partnership
    with your cloud provider and understand what security capabilities they have,
    and how these security capabilities can be used in a hybrid environment. This
    is important, because some capabilities are only available in the cloud, and not
    on-premises.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 当蓝队需要创建应对措施以保护混合环境时，团队需要扩展他们对当前威胁态势的视野，并进行评估，以验证与云的持续连接并检查对整体安全态势的影响。在混合云中，大多数公司将选择使用IaaS模型，尽管IaaS的采用在增长，但根据Oracle对IaaS采用的调查，安全性仍然是主要关注点。根据同一份报告，*长期使用IaaS的用户表示该技术最终对安全产生了积极影响*。实际上，它确实产生了积极影响，这也是蓝队应该集中精力提升整体检测能力的地方。目标是利用混合云能力来提升整体安全态势。第一步是与云服务提供商建立良好的合作伙伴关系，了解他们具备哪些安全能力，以及如何在混合环境中利用这些安全能力。这一点很重要，因为某些能力仅在云中可用，而在本地则不可用。
- en: Read the article *Cloud security can enhance your overall security posture*
    to better understand some benefits of cloud computing for security.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读文章*云安全可以提升你的整体安全态势*，更好地理解云计算在安全方面的一些好处。
- en: You can get the article from: [http://go2l.ink/SecPosture](http://go2l.ink/SecPosture).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过以下链接获取文章：[http://go2l.ink/SecPosture](http://go2l.ink/SecPosture)。
- en: Azure Security Center
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Azure安全中心
- en: 'The reason we are using Azure Security Center to monitor hybrid environment
    is because the Security Center agent can be installed on a computer (Windows or
    Linux) on-premises, in a VM running in Azure, or in AWS. This flexibility is important
    and centralized management is important for the Blue Team. Security Center leverages
    security intelligence and advanced analytics to detect threats more quickly and
    reduce false positives. In an ideal scenario, the Blue Team will use a single
    pane of glass to visualize alerts and suspicious activities across all workloads.
    The core topology looks similar to the one shown in the following figure:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们之所以使用Azure安全中心来监控混合环境，是因为安全中心代理可以安装在本地计算机（Windows或Linux）、在Azure中运行的虚拟机或AWS中。这种灵活性对于蓝队至关重要，集中管理对蓝队也非常重要。安全中心利用安全智能和高级分析来更快地检测威胁并减少误报。在理想情况下，蓝队将使用一个统一的界面来可视化所有工作负载中的警报和可疑活动。核心拓扑结构看起来类似于下图所示：
- en: '![](assets/645a3263-3ca9-4faf-9058-8c3df96bb48e.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/645a3263-3ca9-4faf-9058-8c3df96bb48e.png)'
- en: 'When the Security Center is installed on these computers, it will collect **Event
    Tracing for Windows** (**ETW**) traces, operating system log events, running processes,
    machine name, IP addresses, and logged in users. These events are sent to Azure,
    and stored in your private workspace storage. Security Center will analyze this
    data using the following methods:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 当安全中心安装在这些计算机上时，它将收集**Windows事件追踪**（**ETW**）追踪、操作系统日志事件、正在运行的进程、计算机名称、IP地址和登录用户。这些事件会被发送到Azure，并存储在你的私有工作区存储中。安全中心将使用以下方法分析这些数据：
- en: Threat intelligence
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 威胁情报
- en: Behavioral analytics
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 行为分析
- en: Anomaly detection
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 异常检测
- en: 'Once this data is evaluated, Security Center will trigger an alert based on
    priority and add in the dashboard, as shown in the following screenshot:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦这些数据被评估，安全中心将根据优先级触发警报，并将其添加到仪表板中，如下图所示：
- en: '![](assets/dd5f2aab-62db-425f-942d-94820ca2fe12.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/dd5f2aab-62db-425f-942d-94820ca2fe12.png)'
- en: 'Notice that the first alert has a different icon and it is called Security
    incident detected. This happens because it was identified and two or more attacks
    are part of the same attack campaign against a specific resource. This means that,
    instead of having someone from the Blue Team to scavenge the data to find correlation
    between events, Security Center does that automatically and provides the relevant
    alerts for you to analyze. When you click on this alert, you will see the following
    page:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，第一个警报有一个不同的图标，并且被称为“检测到安全事件”。之所以出现这种情况，是因为它被识别为两个或更多攻击属于针对特定资源的同一攻击活动。这意味着，不再需要蓝队成员手动筛选数据来查找事件之间的关联，安全中心会自动执行这一过程，并为您提供相关警报以供分析。当您点击此警报时，您将看到以下页面：
- en: '![](assets/9f1a0533-a5a3-4bd5-89f6-c1dd341b7290.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/9f1a0533-a5a3-4bd5-89f6-c1dd341b7290.png)'
- en: At the bottom of this page, you can see all three attacks (in order of occurrence)
    that took place against VM1 and the severity level assigned by Security Center.
    One important observation about the advantage of using behavior analytics to detect
    threats, is the third alert (Multiple Domain Accounts Queried). The command that
    was executed to raise this alert was a simple `*net user <username> /domain*`;
    however, to make the decision that this is a suspicious, it needs to look at the
    normal behavior for the user that executed this command and cross-reference this
    information with other data that when analyzed in context, will be categorized
    as suspicious. As you can see in this example, hackers are leveraging built-in
    system tools and native command line interface to perform their attack; for this
    reason, it is paramount to have a command line logging tool.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 在本页面的底部，您可以看到所有三次攻击（按发生顺序）针对 VM1 的攻击以及由安全中心分配的严重性等级。关于使用行为分析来检测威胁的优势，有一个重要的观察结果，即第三个警报（查询多个域账户）。触发此警报的命令是一个简单的`*net
    user <用户名> /domain*`；然而，要判断这是可疑的，需要查看执行此命令的用户的正常行为，并将此信息与其他数据进行交叉参考，经过分析后在上下文中会被归类为可疑行为。正如您在这个示例中看到的，黑客正在利用内置的系统工具和本地命令行接口来执行攻击；因此，拥有一个命令行日志记录工具至关重要。
- en: Security Center will also use statistical profiling to build historical baselines
    and alert on deviations that conform to a potential attack vector. This is useful
    in many scenarios; one typical example is deviations from normal activity. For
    example, let's say a host starts RDP connections three times a day, but in a certain
    day there are one hundred connections attempted. When such deviation happens,
    an alert must be triggered to warn you about that.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 安全中心还将使用统计分析方法建立历史基线，并在符合潜在攻击向量的偏差发生时发出警报。这在许多场景中都很有用；一个典型的例子是偏离正常活动。例如，假设一台主机每天进行三次
    RDP 连接，但某天尝试了 100 次连接。当出现这样的偏差时，必须触发警报以提醒您。
- en: 'Another important aspect of working with a cloud based service is the built
    in integration with other vendors. Security Center can integrate with many other
    solutions, such as Barracuda, F5, Imperva, and Fortinet for **web application
    firewall** (**WAF**), among others for endpoint protection, vulnerability assessment,
    and next-generation firewall. The image below shows an example of this integration.
    Notice that this alert was generated by Deep Security Agent and, since it is integrated
    with Security Center, it will appear in the same dashboard as the other events
    that were detected by Security Center:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 使用云服务的另一个重要方面是与其他厂商的内置集成。安全中心可以与许多其他解决方案集成，如 Barracuda、F5、Imperva 和 Fortinet
    的**Web 应用防火墙**（**WAF**），以及其他用于终端保护、漏洞评估和下一代防火墙的解决方案。下图显示了这种集成的示例。请注意，此警报是由 Deep
    Security Agent 生成的，既然它已与安全中心集成，它将与由安全中心检测到的其他事件一起显示在相同的仪表盘中：
- en: '![](assets/5f56addf-ea33-449b-805f-b25d01e8d4ba.png)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/5f56addf-ea33-449b-805f-b25d01e8d4ba.png)'
- en: Keep in mind that Security Center is not the only solution that will monitor
    systems and integrate with other vendors; there are many **Security Information
    and Event Management** (**SIEM**) solutions, such as **Splunk** and **LogRhythm**,
    that will perform similar type of monitoring.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，安全中心并不是唯一一个监控系统并与其他厂商集成的解决方案；还有许多**安全信息和事件管理**（**SIEM**）解决方案，如**Splunk**和**LogRhythm**，也会执行类似的监控任务。
- en: References
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: Snort Rules Explanation
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Snort 规则解释
- en: '[https://www.snort.org/rules_explanation](https://www.snort.org/rules_explanation)'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://www.snort.org/rules_explanation](https://www.snort.org/rules_explanation)'
- en: Introduction to IoC [http://openioc.org/resources/An_Introduction_to_OpenIOC.pdf](http://openioc.org/resources/An_Introduction_to_OpenIOC.pdf)
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: IoC简介 [http://openioc.org/resources/An_Introduction_to_OpenIOC.pdf](http://openioc.org/resources/An_Introduction_to_OpenIOC.pdf)
- en: IoC Editor [https://www.fireeye.com/content/dam/fireeye-www/services/freeware/sdl-ioc-editor.zip](https://www.fireeye.com/content/dam/fireeye-www/services/freeware/sdl-ioc-editor.zip)
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: IoC 编辑器 [https://www.fireeye.com/content/dam/fireeye-www/services/freeware/sdl-ioc-editor.zip](https://www.fireeye.com/content/dam/fireeye-www/services/freeware/sdl-ioc-editor.zip)
- en: DUQU Uses STUXNET-Like Techniques to Conduct Information Theft
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DUQU使用类似STUXNET的技术进行信息窃取
- en: '[https://www.trendmicro.com/vinfo/us/threat-encyclopedia/web-attack/90/duqu-uses-stuxnetlike-techniques-to-conduct-information-theft](https://www.trendmicro.com/vinfo/us/threat-encyclopedia/web-attack/90/duqu-uses-stuxnetlike-techniques-to-conduct-information-theft)'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.trendmicro.com/vinfo/us/threat-encyclopedia/web-attack/90/duqu-uses-stuxnetlike-techniques-to-conduct-information-theft](https://www.trendmicro.com/vinfo/us/threat-encyclopedia/web-attack/90/duqu-uses-stuxnetlike-techniques-to-conduct-information-theft)'
- en: How to Select a Network Intrusion Prevention System (IPS)
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如何选择网络入侵预防系统（IPS）
- en: '[https://www.icsalabs.com/sites/default/files/HowToSelectANetworkIPS.pdf](https://www.icsalabs.com/sites/default/files/HowToSelectANetworkIPS.pdf)'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.icsalabs.com/sites/default/files/HowToSelectANetworkIPS.pdf](https://www.icsalabs.com/sites/default/files/HowToSelectANetworkIPS.pdf)'
- en: Detect Security Breaches Early by Analyzing Behavior
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过分析行为及早检测安全漏洞
- en: '[https://www.gartner.com/smarterwithgartner/detect-security-breaches-early-by-analyzing-behavior/](https://www.gartner.com/smarterwithgartner/detect-security-breaches-early-by-analyzing-behavior/)'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://www.gartner.com/smarterwithgartner/detect-security-breaches-early-by-analyzing-behavior/](https://www.gartner.com/smarterwithgartner/detect-security-breaches-early-by-analyzing-behavior/)'
- en: Advanced Threat Analytics attack simulation playbook
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高级威胁分析攻击模拟剧本
- en: '[https://docs.microsoft.com/en-us/enterprise-mobility-security/solutions/ata-attack-simulation-playbook](https://docs.microsoft.com/en-us/enterprise-mobility-security/solutions/ata-attack-simulation-playbook)'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://docs.microsoft.com/en-us/enterprise-mobility-security/solutions/ata-attack-simulation-playbook](https://docs.microsoft.com/en-us/enterprise-mobility-security/solutions/ata-attack-simulation-playbook)'
- en: You and IaaS - Learning from the success of early adopters
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你和IaaS - 向早期采用者学习成功经验
- en: '[https://www.oracle.com/assets/pulse-survey-mini-report-3764078.pdf](https://www.oracle.com/assets/pulse-survey-mini-report-3764078.pdf)'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://www.oracle.com/assets/pulse-survey-mini-report-3764078.pdf](https://www.oracle.com/assets/pulse-survey-mini-report-3764078.pdf)'
- en: Summary
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned about the different types of detection mechanisms
    and the advantages of using them to enhance your defense strategy. You learned
    about the indications of compromise and how to query current threats. You also
    learned about IDS, how it works, the different types of IDS, and the best location
    to install IDS based on your network. Next, you learned about the benefits of
    using an IPS, how rule-based and how anomaly-based detection works. The defense
    strategy wouldn't be completed without a good behavior analytics and, in this
    section, you learned how the Blue Team can benefit from this capability. Microsoft
    ATA was used as the on-premises example for this implementation and Azure Security
    Center was used as the hybrid solution for behavior analytics.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章节中，你了解了不同类型的检测机制以及使用它们来增强防御策略的优势。你学习了妥协的迹象以及如何查询当前的威胁。你还了解了IDS，它是如何工作的，IDS的不同类型，以及根据你的网络选择安装IDS的最佳位置。接下来，你学习了使用IPS的好处，规则基和基于异常的检测是如何工作的。没有好的行为分析，防御策略将不完整，在本节中，你学习了蓝队如何从这一能力中受益。微软ATA被用作此实施的本地示例，Azure安全中心则作为行为分析的混合解决方案。
- en: In the next chapter, we will continue talking about defense strategies; this
    time, you will learn more about threat intelligence and how the Blue Team can
    take advantage of threat intel to enhance the overall security of the defense
    systems.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章节中，我们将继续讨论防御策略；这次你将深入了解威胁情报，以及蓝队如何利用威胁情报来增强整体安全防御系统。
