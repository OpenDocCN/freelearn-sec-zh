- en: '*Chapter 4*: Performing Local Enumeration'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第4章*：进行本地枚举'
- en: Now that we have our initial foothold on the target system, we need to enumerate
    additional information from the target that will be vital and pivotal to the privilege
    escalation process. This information will be used to structure, plan, and coordinate
    our privilege escalation attacks successfully.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已在目标系统上获得初步控制，接下来我们需要从目标系统中枚举出更多关键信息，这对权限提升过程至关重要。这些信息将用于构建、规划和协调我们的权限提升攻击，确保成功。
- en: Therefore, it is vitally important to learn how to enumerate information correctly
    and comprehensively from a target system in order to successfully escalate privileges.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，学习如何正确且全面地从目标系统中枚举信息，以成功提升权限，是至关重要的。
- en: In this chapter, you will learn about the enumeration process, why it is important,
    and the various local enumeration techniques for Windows and Linux. You will then
    learn how to use automated enumeration tools to automate processes.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将了解枚举过程、它为何重要以及Windows和Linux的各种本地枚举技术。接下来，您将学习如何使用自动化枚举工具来自动化这一过程。
- en: 'In this chapter, we''re going to cover the following main topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将覆盖以下主要主题：
- en: Understanding the enumeration process
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解枚举过程
- en: Windows enumeration
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows枚举
- en: Linux enumeration
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux枚举
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the demonstrations in this chapter, you will need to ensure
    that you meet the following technical requirements:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟随本章的演示，您需要确保满足以下技术要求：
- en: Familiarity with Linux Terminal commands
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉Linux终端命令
- en: Familiarity with the Windows command line
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 熟悉Windows命令行
- en: 'Check out the following link to see the Code in Action video:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 请查看以下链接，观看《代码实战》视频：
- en: '[https://bit.ly/39JFTjW](https://bit.ly/39JFTjW)'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://bit.ly/39JFTjW](https://bit.ly/39JFTjW)'
- en: Understanding the enumeration process
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解枚举过程
- en: Although you gained an initial foothold on a system in [*Chapter 3*](B17389_03_Final_PG_ePub.xhtml#_idTextAnchor045),
    *Gaining Access (Exploitation)*, you have little or no information regarding what
    operating system is running, what services are running, your privileges on the
    system, and what networks the target system is connected to. This leaves you blind
    and in no position to initiate a privilege escalation attack. This is where enumeration
    comes into play.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管你在[*第3章*](B17389_03_Final_PG_ePub.xhtml#_idTextAnchor045)中获得了初步的系统控制，[*获得访问权限（利用）*]，但你对系统运行的操作系统、运行的服务、你在系统中的权限以及目标系统连接的网络几乎一无所知。这使得你处于盲目状态，无法发起权限提升攻击。这就是枚举的重要性所在。
- en: '**Enumeration** is the process of extracting vital information such as operating
    system versions, usernames, network information, and installed programs from a
    target system. This information can then be used to identify potential flaws,
    misconfigurations, or vulnerabilities that can be exploited.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '**枚举**是从目标系统中提取关键信息的过程，例如操作系统版本、用户名、网络信息和已安装的程序。这些信息可以用来识别潜在的缺陷、配置错误或可以被利用的漏洞。'
- en: The enumeration process can be analogized through the example of planning a
    heist, where reconnaissance and information gathering on the target is paramount.
    If insufficient information regarding the target is obtained, the heist will be
    marred with mistakes and will, in all probability, end up failing. However, if
    information regarding the target is diligently and comprehensively gathered, the
    heist will be efficient since all the relevant information has been gathered and
    analyzed for potential mistakes and issues. Therefore, it is vitally important
    to perform comprehensive enumeration on your target systems.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 枚举过程可以通过计划一次抢劫的例子来类比，其中对目标的侦察和信息收集至关重要。如果没有获取足够的目标信息，这次抢劫将会因为错误而失败，几乎肯定会以失败告终。然而，如果能够认真且全面地收集目标信息，这次抢劫将会高效，因为所有相关信息都已经被收集并分析，以识别潜在的错误和问题。因此，在目标系统上执行全面的枚举工作至关重要。
- en: Local enumeration involves actively gathering information from the target system
    after its **initial exploitation**. This information is then used to identify
    potential privilege escalation vectors through vulnerabilities or configurations.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 本地枚举是指在**初始利用**后，积极从目标系统中收集信息。然后，这些信息将被用于识别通过漏洞或配置问题实现权限提升的潜在路径。
- en: 'The local enumeration process is multi-faceted and can therefore be categorized
    based on the type of information being gathered:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本地枚举过程是多方面的，因此可以根据所收集信息的类型进行分类：
- en: System enumeration
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统枚举
- en: User and group enumeration
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户和组枚举
- en: Network enumeration
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络枚举
- en: Password enumeration
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码枚举
- en: Firewall and antivirus enumeration
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防火墙和杀毒软件枚举
- en: This categorization will be useful in structuring and organizing the information
    we will be gathering. Local enumeration can be performed manually and automatically
    by using frameworks and scripts; however, it is always recommended to perform
    manual enumeration as it ensures the process is performed comprehensively and
    diligently.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这种分类将有助于我们组织和结构化所收集的信息。本地枚举可以通过使用框架和脚本手动和自动执行；然而，始终推荐执行手动枚举，因为它能确保过程全面且细致地进行。
- en: In the following sections, we will be exploring the various techniques and tools
    that can be used to perform local enumeration both manually and automatically
    on Windows and Linux.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将探索在 Windows 和 Linux 上手动和自动执行本地枚举的各种技术和工具。
- en: 'In this chapter, we will be using the following target virtual machines that
    we exploited in the previous chapter:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将使用在上一章中利用的以下目标虚拟机：
- en: Metasploitable3
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Metasploitable3
- en: Windows 10
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 10
- en: Metasploitable2
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Metasploitable2
- en: Ubuntu 20.04
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ubuntu 20.04
- en: The purpose of using multiple operating system versions is to demonstrate and
    highlight the variety of information that can be gathered based on the operating
    system's version and configuration. The techniques demonstrated in this chapter
    will work on most Windows releases and Linux distributions with a few exceptions,
    all of which will be highlighted.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 使用多个操作系统版本的目的是展示并强调可以根据操作系统的版本和配置收集的各种信息。本章演示的技术适用于大多数 Windows 版本和 Linux 发行版，只有少数例外，所有这些都会被特别指出。
- en: Now that we understand what enumeration is and its importance in the privilege
    escalation process, we can take a look at how to enumerate information from Windows
    systems.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了枚举是什么，以及它在特权提升过程中的重要性，我们可以看看如何从 Windows 系统中枚举信息。
- en: Windows enumeration
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows 枚举
- en: We will begin the enumeration process on Windows manually and follow the previously
    listed categories in our approach. To begin the local enumeration process, you
    will need to ensure that you have direct access to your target system in the form
    of a shell. If you have followed the examples demonstrated so far in this book,
    you should have a **meterpreter** session on your target systems.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从 Windows 上手动开始枚举过程，并按照之前列出的类别进行方法。要开始本地枚举过程，您需要确保以 shell 的形式直接访问目标系统。如果您已经按照本书中展示的示例操作，您应该已经在目标系统上建立了一个**meterpreter**会话。
- en: System enumeration
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 系统枚举
- en: System enumeration is the process of enumerating core system information such
    as the operating system's version and service pack, the operating system's architecture,
    the system services that are running, and the installed patches and hotfixes.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 系统枚举是枚举核心系统信息的过程，如操作系统的版本和服务包、操作系统的架构、正在运行的系统服务，以及已安装的补丁和热修复。
- en: 'We can begin the process of system enumeration by following these steps:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过以下步骤开始系统枚举过程：
- en: 'Most of the commands we will be running are native to the Windows command prompt,
    so they need to be run within a native shell session. If you already have one,
    you can skip this step. Alternatively, if you are running a **meterpreter** session,
    you will need to run the following command, as outlined in the following screenshot,
    to get a command prompt session:'
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将要运行的大部分命令都是 Windows 命令提示符的本地命令，因此需要在本地 shell 会话中运行。如果您已经有了这样的会话，可以跳过此步骤。或者，如果您正在运行
    **meterpreter** 会话，您需要按照以下截图中的步骤运行以下命令，以获取命令提示符会话：
- en: '**shell**'
  id: totrans-40
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**shell**'
- en: 'As shown in the following screenshot, you should get an active shell on the
    target system through the command prompt, and you should be able to run Windows-specific
    commands:'
  id: totrans-41
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如下图所示，您应通过命令提示符在目标系统上获得一个活动的 shell，并且应该能够运行 Windows 特定的命令：
- en: '![Figure 4.1 – Meterpreter command prompt'
  id: totrans-42
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.1 – Meterpreter 命令提示符'
- en: '](Images/B17389_04_001.jpg)'
  id: totrans-43
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_001.jpg)'
- en: Figure 4.1 – Meterpreter command prompt
  id: totrans-44
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.1 – Meterpreter 命令提示符
- en: 'The first step is to enumerate operating system information. This can be done
    by running the **systeminfo** command and piping the output to the **findstr**
    utility to limit the output to the information that is essential. This can be
    done by running the following command:'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是枚举操作系统信息。这可以通过运行**systeminfo**命令并将输出通过管道传递给**findstr**工具来限制输出为必要的信息。可以通过运行以下命令来完成：
- en: '**systeminfo | findstr /B /C:"OS Name" /C:"OS Version"**'
  id: totrans-46
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**systeminfo | findstr /B /C:"OS Name" /C:"OS Version"**'
- en: As highlighted in the following screenshot, the command will output the operating
    system's name, version, and architecture. This information can be used in conjunction
    with automated vulnerability assessment tools to determine inherent privilege
    escalation vulnerabilities. It is also useful for sorting through exploits for
    a particular operating system architecture. The operating system version is also
    useful for finding kernel-based exploits for specific versions of an operating
    system.
  id: totrans-47
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如下截图所示，命令将输出操作系统的名称、版本和架构。这些信息可以与自动化漏洞评估工具结合使用，以确定固有的权限提升漏洞。它对于筛选特定操作系统架构的利用也非常有用。操作系统版本还对于寻找特定版本操作系统的基于内核的漏洞非常有用。
- en: 'This gives us enough information regarding the operating system to narrow down
    our approach regarding finding vulnerabilities:'
  id: totrans-48
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这为我们提供了足够的操作系统信息，以便缩小寻找漏洞的方法：
- en: '![Figure 4.2 – systeminfo command output'
  id: totrans-49
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图4.2 – systeminfo命令输出'
- en: '](Images/B17389_04_002.jpg)'
  id: totrans-50
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_002.jpg)'
- en: Figure 4.2 – systeminfo command output
  id: totrans-51
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.2 – systeminfo命令输出
- en: 'We can also use the **systeminfo** command to determine what Windows hotfixes
    or patches have been installed. This can be done by running the following command:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以使用**systeminfo**命令来确定已安装的Windows热修复或补丁。这可以通过运行以下命令来完成：
- en: '**systeminfo**'
  id: totrans-53
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**systeminfo**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-54
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.3 – Hotfixes installed'
  id: totrans-55
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图4.3 – 安装的热修复'
- en: '](Images/B17389_04_003.jpg)'
  id: totrans-56
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_003.jpg)'
- en: Figure 4.3 – Hotfixes installed
  id: totrans-57
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.3 – 安装的热修复
- en: As highlighted in the preceding screenshot, the output lists the total number
    of hotfixes that have been installed and their relevant HotFix IDs. This information
    is useful for finetuning your approach in terms of vulnerabilities in the operating
    system that may have already been patched.
  id: totrans-58
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前面的截图所示，输出列出了已安装的热修复的总数及其相关的HotFix ID。这些信息有助于我们微调寻找操作系统中可能已经修复的漏洞的方法。
- en: Note
  id: totrans-59
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: The default output of the **systeminfo** command is detailed and provides you
    with a complete overview of the operating system.
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**systeminfo**命令的默认输出是详细的，提供了操作系统的完整概述。'
- en: 'You can also determine the hotfixes and patches that have been installed on
    a system by running the following command:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您还可以通过运行以下命令来确定系统上已安装的热修复和补丁：
- en: '**wmic qfe**'
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**wmic qfe**'
- en: 'The output of the preceding command is shown in the following screenshot:'
  id: totrans-63
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下截图所示：
- en: '![Figure 4.4 – Installed updates'
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图4.4 – 安装的更新'
- en: '](Images/B17389_04_004.jpg)'
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_004.jpg)'
- en: Figure 4.4 – Installed updates
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.4 – 安装的更新
- en: As illustrated in the preceding screenshot, the command outputs the updates
    or patches that have been installed and provides additional information, such
    as the date the patches were installed and the user that installed them.
  id: totrans-67
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前面的截图所示，命令输出了已安装的更新或补丁，并提供了额外的信息，例如补丁安装的日期和安装的用户。
- en: The **HotFixID** can be used to determine potential vulnerabilities and exploits
    for specific hotfixes.
  id: totrans-68
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**HotFixID**可用于确定特定热修复的潜在漏洞和利用。'
- en: 'We can also run the command on a Windows 10 system to determine the patches
    that have been installed and how recently this happened, as shown in the following
    screenshot:'
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 我们还可以在Windows 10系统上运行命令，以确定已安装的补丁以及安装的时间，如下图所示：
- en: '![Figure 4.5 – Windows 10 installed updates](Images/B17389_04_005.jpg)'
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图4.5 – Windows 10安装的更新](Images/B17389_04_005.jpg)'
- en: Figure 4.5 – Windows 10 installed updates
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.5 – Windows 10安装的更新
- en: 'The next piece of information we must enumerate is the operating system''s
    hostname. This can be done by running the following command:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一条必须枚举的信息是操作系统的主机名。可以通过运行以下命令来完成：
- en: '**hostname**'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**hostname**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.6 – Hostname](Images/B17389_04_006.jpg)'
  id: totrans-75
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图4.6 – 主机名](Images/B17389_04_006.jpg)'
- en: Figure 4.6 – Hostname
  id: totrans-76
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图4.6 – 主机名
- en: The hostname is used to identify systems on a network and may shed some light
    on the role of the system or the person the system belongs to.
  id: totrans-77
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 主机名用于在网络中标识系统，并可能揭示系统的角色或系统所属的人。
- en: 'Another important piece of information to enumerate is the drives attached
    to the system. We can do this by running the following command:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一个需要枚举的重要信息是系统上附加的驱动器。我们可以通过运行以下命令来完成：
- en: '**wmic logicaldisk get caption**'
  id: totrans-79
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**wmic logicaldisk get caption**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.7 – Logical disks'
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.7 – 逻辑磁盘](Images/B17389_04_007.jpg)'
- en: '](Images/B17389_04_007.jpg)'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_007.jpg)'
- en: Figure 4.7 – Logical disks
  id: totrans-83
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.7 – 逻辑磁盘
- en: As shown in the preceding screenshot, the command will output the list of attached
    drives and their identifier. In this case, the only disk that's attached is the
    system drive labeled **C:**.
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前述截图所示，该命令将输出附加的驱动器列表及其标识符。在此案例中，唯一附加的磁盘是标记为**C:**的系统驱动器。
- en: 'It is also important to enumerate information regarding the processes that
    are currently running. This can be done by running the following command:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 枚举当前正在运行的进程信息也很重要。可以通过运行以下命令来完成：
- en: '**tasklist /SVC**'
  id: totrans-86
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**tasklist /SVC**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-87
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.8 – Running processes](Images/B17389_04_008.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.8 – 正在运行的进程](Images/B17389_04_008.jpg)'
- en: Figure 4.8 – Running processes
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.8 – 正在运行的进程
- en: As shown in the preceding screenshot, the command will output a list of processes
    that are running and their associated services. It also displays the process ID,
    which can be useful for identifying a particular process.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述截图所示，该命令将输出正在运行的进程列表及其关联的服务。它还会显示进程 ID，这对于识别特定进程非常有用。
- en: Now that we have an understanding of what the target system is running, we can
    start identifying the users on the target system.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经了解目标系统正在运行的内容，可以开始识别目标系统中的用户。
- en: User and group enumeration
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用户和组枚举
- en: User enumeration is the process of identifying the user we are currently utilizing
    and the user accounts that are on the target system. This information is useful
    as it tells us whether we have administrative privileges. It also helps us determine
    and identify potential user accounts that we can utilize to elevate our privileges.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 用户枚举是识别我们当前正在使用的用户及目标系统中存在的用户帐户的过程。此信息非常有用，因为它告诉我们是否拥有管理员权限。它还帮助我们确定并识别可以利用的潜在用户帐户，以提升我们的权限。
- en: 'The user enumeration process on Windows is fairly straightforward and can be
    performed by following these steps:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上，用户枚举过程非常简单，可以通过以下步骤进行：
- en: 'First, we need to determine the user that we are currently using. This can
    be done by running the following command:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要确定当前正在使用的用户。可以通过运行以下命令来实现：
- en: '**whoami**'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**whoami**'
- en: 'If you have administrative privileges, your username should be **nt authority**,
    as shown in the following screenshot:'
  id: totrans-97
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你有管理员权限，你的用户名应该是**nt authority**，如下图所示：
- en: '![Figure 4.9 - whoami'
  id: totrans-98
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.9 - whoami](Images/B17389_04_009.jpg)'
- en: '](Images/B17389_04_009.jpg)'
  id: totrans-99
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_009.jpg)'
- en: Figure 4.9 - whoami
  id: totrans-100
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.9 - whoami
- en: 'We can also determine our privileges by running the following command:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以通过运行以下命令来确定我们的权限：
- en: '**whoami /priv**'
  id: totrans-102
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**whoami /priv**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-103
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.10 – whoami privileges'
  id: totrans-104
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.10 – whoami 权限](Images/B17389_04_007.jpg)'
- en: '](Images/B17389_04_010.jpg)'
  id: totrans-105
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_010.jpg)'
- en: Figure 4.10 – whoami privileges
  id: totrans-106
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.10 – whoami 权限
- en: As shown in the preceding screenshot, this will output the privileges that have
    been assigned to our account and provides a brief description of each privilege,
    along with their current states. We looked at privileges briefly in [*Chapter
    1*](B17389_01_Final_PG_ePub.xhtml#_idTextAnchor014), *Introduction to Privilege
    Escalation*, where we explained access tokens. The importance of privileges will
    be highlighted later in this book, when we look at token impersonation attacks.
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前述截图所示，这将输出已分配给我们帐户的权限，并简要描述每个权限及其当前状态。我们在[*第 1 章*](B17389_01_Final_PG_ePub.xhtml#_idTextAnchor014)《权限提升简介》中简要讨论了权限，在那里我们解释了访问令牌。权限的重要性将在本书后续章节中突出，当我们探讨令牌冒充攻击时。
- en: 'To determine the groups that our account is part of, we can run the following
    command:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要确定我们的帐户所属的组，可以运行以下命令：
- en: '**whoami /groups**'
  id: totrans-109
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**whoami /groups**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-110
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.11 – whoami groups'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.11 – whoami 组](Images/B17389_04_010.jpg)'
- en: '](Images/B17389_04_011.jpg)'
  id: totrans-112
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_011.jpg)'
- en: Figure 4.11 – whoami groups
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.11 – whoami groups
- en: 'We can also enumerate the user accounts that are active on the system by running
    the following command:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以通过运行以下命令枚举系统上活动的用户账户：
- en: '**net user**'
  id: totrans-115
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**net user**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.12 – net user](Images/B17389_04_012.jpg)'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.12 – net user](Images/B17389_04_012.jpg)'
- en: Figure 4.12 – net user
  id: totrans-118
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.12 – net user
- en: 'As shown in the preceding screenshot, the command will output a list of all
    the users on the system. This provides helpful information regarding what accounts
    we can laterally escalate our privileges to. We can also obtain additional information
    about a particular user by running the following command:'
  id: totrans-119
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前面的截图所示，该命令将输出系统上所有用户的列表。这提供了关于我们可以以横向方式升级权限的帐户的有用信息。我们还可以通过运行以下命令获取特定用户的附加信息：
- en: '**net user <username>**'
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**net user <username>**'
- en: 'This can also help us identify accounts that are part of the administrative
    group and have admin privileges, as shown in the following screenshot:'
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这也有助于我们识别属于管理组并具有管理员特权的帐户，如下图所示：
- en: '![Figure 4.13 – User enumeration'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.13 – 用户枚举'
- en: '](Images/B17389_04_013.jpg)'
  id: totrans-123
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_013.jpg)'
- en: Figure 4.13 – User enumeration
  id: totrans-124
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.13 – 用户枚举
- en: 'We can also determine the users that are part of the administrative group by
    running the following command:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以通过运行以下命令确定属于管理组的用户：
- en: '**net localgroup administrators**'
  id: totrans-126
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**net localgroup administrators**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-127
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.14 – Net localgroup](Images/B17389_04_014.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.14 – Net localgroup](Images/B17389_04_014.jpg)'
- en: Figure 4.14 – Net localgroup
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.14 – Net localgroup
- en: As shown in the preceding screenshot, the command will outline the users that
    are part of the administrative group. This gives us a clear picture of the accounts
    we can target to obtain administrative privileges.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，该命令将概述属于管理组的用户。这使我们清楚地了解了我们可以针对以获取管理权限的帐户。
- en: Network enumeration
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络枚举
- en: 'Network enumeration is the process of obtaining all the relevant network information
    from a target system with the aim of determining its IP address, DNS server, default
    gateway, and domain controller, if any. This information can be used to map out
    the target network and stage pivoting attacks. Let''s take a look:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 网络枚举是获取目标系统所有相关网络信息的过程，旨在确定其IP地址、DNS服务器、默认网关及域控制器（如果有）。这些信息可用于绘制目标网络地图并进行逐级攻击。让我们来看看：
- en: 'The first step involves enumerating the target network interfaces and their
    details. This can be done by running the following command:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步涉及枚举目标网络接口及其详细信息。可以通过运行以下命令完成：
- en: '**ipconfig /all**'
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ipconfig /all**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.15 – ipconfig'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.15 – ipconfig'
- en: '](Images/B17389_04_015.jpg)'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_015.jpg)'
- en: Figure 4.15 – ipconfig
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.15 – ipconfig
- en: 'As shown in the preceding screenshot, this will display all the relevant network
    information regarding a particular NIC: its IP address, DNS server, and default
    gateway.'
  id: totrans-139
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前面的截图所示，这将显示关于特定网络接口的所有相关网络信息：其IP地址、DNS服务器和默认网关。
- en: 'The next step is to analyze the routing table. This can be done by running
    the following command:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是分析路由表。可以通过运行以下命令完成：
- en: '**route print**'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**route print**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-142
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.16 – Routing table'
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.16 – 路由表'
- en: '](Images/B17389_04_016.jpg)'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_016.jpg)'
- en: Figure 4.16 – Routing table
  id: totrans-145
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.16 – 路由表
- en: 'We also need to determine what services we have running and their respective
    ports. This can be done by running the **netstat** command with the following
    arguments:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还需确定正在运行的服务及其相应的端口。可以通过以下参数运行 **netstat** 命令完成：
- en: '**netstat -ano**'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**netstat -ano**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.17 – Netstat active connections'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.17 – Netstat 活动连接'
- en: '](Images/B17389_04_017.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_017.jpg)'
- en: Figure 4.17 – Netstat active connections
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.17 – Netstat 活动连接
- en: As shown in the preceding screenshot, the command will display all the active
    connections, along with their respective ports and **process IDs** (**PIDs**).
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，该命令将显示所有活动连接及其相应的端口和进程ID（**PIDs**）。
- en: 'This command can also be used to identify active connections from other hosts,
    as shown in the following screenshot:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令还可用于识别来自其他主机的活动连接，如下图所示：
- en: '![Figure 4.18 – Netstat established connections'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.18 – Netstat 已建立连接'
- en: '](Images/B17389_04_018.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_018.jpg)'
- en: Figure 4.18 – Netstat established connections
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.18 – Netstat 已建立连接
- en: This information is important as it may also reveal internal services that are
    running that were previously undetected during the initial footprinting phase
    and are running locally.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 这些信息很重要，因为它们可能还会揭示一些以前在初始足迹阶段未被发现的内部服务，这些服务实际上是在本地运行的。
- en: Now that we have enumerated the networking information from the target, we will
    learn how to find and enumerate passwords.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经枚举了目标的网络信息，接下来我们将学习如何查找和枚举密码。
- en: Password enumeration
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 密码枚举
- en: Password enumeration is the process of finding and locating passwords stored
    locally in the form of stored user passwords in clear text, configuration files
    with passwords, passwords stored in the Windows registry, and Windows hashes stored
    in the **Security Account Manager** (**SAM**) database.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 密码枚举是查找和定位本地存储密码的过程，形式包括明文存储的用户密码、包含密码的配置文件、存储在 Windows 注册表中的密码以及存储在**安全帐户管理器**（**SAM**）数据库中的
    Windows 哈希值。
- en: We will explore password enumeration in greater detail when we explore automated
    tools, since the process of manually enumerating passwords from the registry and
    SAM database can be time consuming.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们研究自动化工具时，将更详细地探讨密码枚举，因为从注册表和 SAM 数据库手动枚举密码的过程可能会非常耗时。
- en: 'In this section, we will utilize manual techniques such as string matching.
    Let''s get started:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将使用手动技术，如字符串匹配。让我们开始吧：
- en: 'We can utilize the **findstr** utility to locate specific strings in files.
    For example, we can run the following command to locate the **password** string
    in files with commonly used file extensions:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以利用**findstr**实用程序来定位文件中的特定字符串。例如，我们可以运行以下命令，在常用的文件扩展名文件中查找**password**字符串：
- en: '**findstr /si password *.doc *.txt *.ini *.config**'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**findstr /si password *.doc *.txt *.ini *.config**'
- en: This can be useful for finding cleartext passwords stored by users or administrators
    that may contain passwords for other accounts or services.
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这对于查找用户或管理员存储的明文密码很有用，这些密码可能包含其他帐户或服务的密码。
- en: 'We can also search for specific strings pertaining to services such as **Secure
    Shell** (**SSH**) and **File Transfer Protocol** (**FTP**). This can be done by
    running the following command:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以搜索与服务相关的特定字符串，如**安全外壳**（**SSH**）和**文件传输协议**（**FTP**）。这可以通过运行以下命令完成：
- en: '**dir /s *pass* == *cred* == *ssh* == *.config***'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**dir /s *pass* == *cred* == *ssh* == *.config***'
- en: 'We can search for passwords within the registry for specific programs and software
    by running the following query:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以通过运行以下查询，在注册表中搜索特定程序和软件的密码：
- en: '**reg query HKLM /f password /t REG_SZ /s**'
  id: totrans-169
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**reg query HKLM /f password /t REG_SZ /s**'
- en: 'This will display any entries that contain the **password** string within the
    **HKEY_LOCAL_MACHINE** registry, as shown in the following screenshot. You can
    also run the same query for the **HKEY_CURRENT_USER** registry. This can be done
    by running the following command:'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将显示包含**password**字符串的所有条目，位于**HKEY_LOCAL_MACHINE**注册表中，如下图所示。你也可以对**HKEY_CURRENT_USER**注册表运行相同的查询。这可以通过运行以下命令完成：
- en: '**reg query HKCU /f password /t REG_SZ /s**'
  id: totrans-171
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**reg query HKCU /f password /t REG_SZ /s**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.19 – Password enumeration in the Windows Registry](Images/B17389_04_019.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.19 – Windows 注册表中的密码枚举](Images/B17389_04_019.jpg)'
- en: Figure 4.19 – Password enumeration in the Windows Registry
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.19 – Windows 注册表中的密码枚举
- en: 'We can also search for passwords in configuration files and session information
    for specific programs such as PuTTY or VNC. This can be done by running the following
    command and specifying the program''s default registry directory:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以在配置文件和特定程序（如 PuTTY 或 VNC）的会话信息中搜索密码。可以通过运行以下命令并指定程序的默认注册表目录来完成此操作：
- en: reg query "HKCU\Software\SimonTatham\PuTTY\Sessions\<User>"
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: reg query "HKCU\Software\SimonTatham\PuTTY\Sessions\<User>"
- en: In this case, the query will display the PuTTY session details for the user
    that was specified within the query.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，查询将显示为查询中指定用户的 PuTTY 会话详细信息。
- en: Note
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: The user Simon Tatham highlighted in the **HKCU\Software\SimonTatham\PuTTY\Sessions\<User>**
    registry directory references the developer of the PuTTY program.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 用户 Simon Tatham 在 **HKCU\Software\SimonTatham\PuTTY\Sessions\<User>** 注册表目录中引用了
    PuTTY 程序的开发者。
- en: Now that we understand how to use manual querying techniques to enumerate passwords
    from Windows, we need to identify and map out the security features that are currently
    active on the system.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解如何使用手动查询技术从 Windows 中枚举密码，我们需要识别并列出当前在系统上启用的安全功能。
- en: Firewall and antivirus enumeration
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防火墙和杀毒软件枚举
- en: To successfully elevate our privileges and maintain persistence on a system,
    we need to understand the security measures and systems that are in place that
    could hinder the process. Two of the most common security deterrents found on
    Windows systems are Windows Firewall and Windows Defender, though other third-party
    antivirus solutions may help.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 为了成功提升我们的权限并保持系统上的持久性，我们需要了解可能妨碍该过程的安全措施和系统。Windows 系统中最常见的两种安全防范措施是 Windows
    防火墙和 Windows Defender，尽管其他第三方杀毒软件也可能提供帮助。
- en: 'The ability to detect and evade firewalls and antivirus solutions is important
    during a penetration test. This is because the privilege escalation process involves
    actively engaging with the target and transferring files to and from the target
    system. Firewalls and antivirus solutions can hinder the process and can alert
    a security team or administrator about a potential breach. For this reason, it
    is important to enumerate information regarding the firewall''s status and rules,
    as well as the antivirus solution in place. Let''s take a look:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试中，能够检测和规避防火墙和杀毒软件解决方案是非常重要的。因为权限提升过程涉及主动与目标交互，并在目标系统之间传输文件。防火墙和杀毒软件可能会妨碍该过程，并可能向安全团队或管理员发出潜在违规的警报。因此，枚举有关防火墙状态和规则以及现有的杀毒软件解决方案的信息是非常重要的。让我们来看一下：
- en: 'First, you will need to identify the status of Windows Defender before copying
    over any files. This can be done by running using the service control command:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，在复制任何文件之前，您需要确定 Windows Defender 的状态。这可以通过使用服务控制命令来完成：
- en: '**sc query windefend**'
  id: totrans-185
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**sc query windefend**'
- en: 'Given the intentionally vulnerable design of the Metasploitable3 virtual machine,
    Windows Defender has not been enabled, so we must render the system vulnerable
    and unprotected, as shown in the following screenshot:'
  id: totrans-186
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于 Metasploitable3 虚拟机的设计故意存在漏洞，因此 Windows Defender 没有启用，因此我们必须使系统处于易受攻击和未受保护的状态，如下图所示：
- en: '![Figure 4.20 – Windows Defender disabled'
  id: totrans-187
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.20 – 禁用 Windows Defender](Images/B17389_04_020.jpg)'
- en: '](Images/B17389_04_020.jpg)'
  id: totrans-188
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_020.jpg)'
- en: Figure 4.20 – Windows Defender disabled
  id: totrans-189
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.20 – 禁用 Windows Defender
- en: 'If Windows Defender is enabled and active, you should get an output similar
    to the following:'
  id: totrans-190
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果 Windows Defender 已启用并处于活动状态，您应得到类似以下的输出：
- en: '![Figure 4.21 – Windows Defender enabled and running](Images/B17389_04_021.jpg)'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.21 – 启用并运行 Windows Defender](Images/B17389_04_021.jpg)'
- en: Figure 4.21 – Windows Defender enabled and running
  id: totrans-192
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.21 – 启用并运行 Windows Defender
- en: 'To identify third-party antivirus solutions, you can list the services that
    are running on the system. This can be done by running the following command:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要识别第三方杀毒软件解决方案，您可以列出系统上正在运行的服务。这可以通过运行以下命令来完成：
- en: '**sc queryex type=service**'
  id: totrans-194
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**sc queryex type=service**'
- en: 'If a third-party antivirus solution is running, you should be able to identify
    it by analyzing the service name, as shown in the following screenshot. Here,
    I have been able to detect a second third-party antivirus program running in tandem
    with Windows Defender:'
  id: totrans-195
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果有第三方杀毒软件正在运行，您应该通过分析服务名称来识别它，如下图所示。在这里，我已经能够检测到一个与 Windows Defender 一同运行的第二个第三方杀毒程序：
- en: '![Figure 4.22 – Third-party A/V](Images/B17389_04_022.jpg)'
  id: totrans-196
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.22 – 第三方 A/V](Images/B17389_04_022.jpg)'
- en: Figure 4.22 – Third-party A/V
  id: totrans-197
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.22 – 第三方 A/V
- en: 'We also need to enumerate information regarding the firewall''s status and
    configuration. This will help us detect the ports that are open and can be utilized
    for further attacks. This can be done by running the following command:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还需要枚举有关防火墙状态和配置的信息。这将帮助我们检测开放的端口，并可以利用这些端口进行进一步攻击。可以通过运行以下命令来完成：
- en: '**netsh firewall show state**'
  id: totrans-199
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**netsh firewall show state**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-200
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.23 – Firewall status'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.23 – 防火墙状态](Images/B17389_04_023.jpg)'
- en: '](Images/B17389_04_023.jpg)'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_023.jpg)'
- en: Figure 4.23 – Firewall status
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.23 – 防火墙状态
- en: As shown in the preceding screenshot, the command will output the firewall's
    operational mode, profile, and open ports. This gives us a clear idea of what
    we can and cannot do from a networking perspective.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，命令将输出防火墙的操作模式、配置文件和开放端口。这使我们清楚地了解从网络角度来看我们能做什么和不能做什么。
- en: We should now have a clear idea of what our target system is running and how
    it is configured. Now, let's learn how to use various automation tools to simplify
    the enumeration process.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在应该清楚地了解目标系统正在运行的内容以及其配置情况。现在，让我们学习如何使用各种自动化工具来简化枚举过程。
- en: Automated enumeration tools
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动化枚举工具
- en: Automated enumeration offers a much more targeted and time-efficient approach
    to gathering information from a target system and, consequently, making sense
    of it. The primary objective behind using automated enumeration tools is the ability
    to make sense of, as well as contextualize, the information that's been gathered
    and provide recommendations based on it.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 自动化枚举提供了一种更具针对性和高效的方法，用于从目标系统收集信息，并由此进行分析。使用自动化枚举工具的主要目标是能够理解和上下文化收集到的信息，并基于这些信息提供建议。
- en: Many automated enumeration tools for Windows exist. However, we will only be
    focusing on the tools that have a high probability of working and do not require
    any additional dependencies or access to specific utilities.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多用于 Windows 的自动化枚举工具。然而，我们只会关注那些高概率有效且不需要额外依赖或访问特定工具的工具。
- en: Local Exploit Suggester
  id: totrans-209
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 本地漏洞建议工具
- en: 'The Local Exploit Suggester is a post-exploitation module for Metasploit that
    is used to scan a target for potential exploits based on operating system information.
    It automates the process of enumerating the system information and provides exploit
    recommendations based on the operating system''s version and installed patches.
    Let''s take a look:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 本地漏洞建议工具是 Metasploit 的一个后期利用模块，用于根据操作系统信息扫描目标是否存在潜在的漏洞。它自动化了系统信息的枚举过程，并根据操作系统的版本和已安装的补丁提供漏洞建议。让我们来看看：
- en: 'To use the module, you will need to have **meterpreter** access on a target
    system, after which you will need to move the **meterpreter** session to the background
    and load the **local_exploit_suggester** module. This can be done by running the
    following command:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用该模块，您需要在目标系统上获得**meterpreter**访问权限，然后将**meterpreter**会话移到后台并加载**local_exploit_suggester**模块。这可以通过运行以下命令来完成：
- en: '**use post/multi/recon/local_exploit_suggester**'
  id: totrans-212
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**use post/multi/recon/local_exploit_suggester**'
- en: 'Now, you need to configure the module options. The only option that we need
    to set is the session number, as shown in the following screenshot. This can be
    done by running the following command:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要配置模块选项。我们需要设置的唯一选项是会话号，如下图所示。这可以通过运行以下命令来完成：
- en: '**set SESSION <Session Number>**'
  id: totrans-214
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**set SESSION <会话编号>**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.24 – Local Exploit Suggester](Images/B17389_04_024.jpg)'
  id: totrans-216
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.24 – 本地漏洞建议工具](Images/B17389_04_024.jpg)'
- en: Figure 4.24 – Local Exploit Suggester
  id: totrans-217
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.24 – 本地漏洞建议工具
- en: 'After configuring the options, you can run the module. At this point, the module
    will begin the enumeration process and output the results after a few minutes,
    as shown in the following screenshot:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置完选项后，您可以运行该模块。此时，模块将开始枚举过程，并在几分钟后输出结果，如下图所示：
- en: '![Figure 4.25 – Local Exploit Suggester results](Images/B17389_04_025.jpg)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.25 – 本地漏洞建议工具结果](Images/B17389_04_025.jpg)'
- en: Figure 4.25 – Local Exploit Suggester results
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.25 – 本地漏洞建议工具结果
- en: The output from the module will display the various exploit modules, most of
    which are kernel exploits that can be used against the target. We will explore
    this in the next section.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 模块的输出将显示各种漏洞模块，其中大多数是可以用于攻击目标的内核漏洞。我们将在下一节探讨这一点。
- en: Windows Exploit Suggester
  id: totrans-222
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Windows 漏洞建议工具
- en: Windows Exploit Suggester is an open source utility developed in Python that
    allows you to scan for potential vulnerabilities in Windows operating systems.
    It also provides their corresponding exploits or exploit modules.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 漏洞建议工具是一个用 Python 开发的开源工具，它允许您扫描 Windows 操作系统中的潜在漏洞。它还提供相应的漏洞或漏洞模块。
- en: It works by comparing the Windows patch levels against the Microsoft vulnerability
    database to detect vulnerabilities. It does this by identifying any missing patches
    on the system.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 它通过将 Windows 补丁级别与 Microsoft 漏洞数据库进行比较，来检测系统中的漏洞。它的工作原理是通过识别系统中缺失的补丁来实现这一点。
- en: 'It does not need to be run locally on the target system and only requires the
    output from the **systeminfo** command on the target. Let''s get started:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 它不需要在目标系统上本地运行，只需要目标系统上 **systeminfo** 命令的输出。我们开始吧：
- en: 'The first step involves cloning the repository at [https://github.com/AonCyberLabs/Windows-Exploit-Suggester](https://github.com/AonCyberLabs/Windows-Exploit-Suggester)
    onto our Kali VM. This can be done by running the following command:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是克隆 [https://github.com/AonCyberLabs/Windows-Exploit-Suggester](https://github.com/AonCyberLabs/Windows-Exploit-Suggester)
    上的仓库到我们的 Kali 虚拟机。这可以通过运行以下命令来完成：
- en: '**git clone https://github.com/AonCyberLabs/Windows-Exploit-Suggester.git**'
  id: totrans-227
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**git clone https://github.com/AonCyberLabs/Windows-Exploit-Suggester.git**'
- en: The tool requires Python2 to work as it utilizes various Python2 modules.
  id: totrans-228
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 该工具需要 Python2 才能工作，因为它使用了多个 Python2 模块。
- en: Note
  id: totrans-229
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 注意
- en: Python2 is currently deprecated as of January 1, 2020\. This means that you
    may encounter issues with dependencies for older tools and frameworks.
  id: totrans-230
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Python2 从 2020 年 1 月 1 日开始已被废弃。这意味着您可能会遇到旧版工具和框架的依赖问题。
- en: 'After cloning the repository, you will need to install the required dependencies.
    This can be done by running the following commands:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 克隆仓库后，您需要安装所需的依赖项。可以通过运行以下命令来完成：
- en: '**sudo apt-get install python-xlrd**'
  id: totrans-232
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**sudo apt-get install python-xlrd**'
- en: '**pip install xlrd --upgrade**'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**pip install xlrd --upgrade**'
- en: 'After installing the dependencies, you will need to update the database by
    running the script with the following flag:'
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完依赖项后，您需要通过运行脚本并使用以下标志来更新数据库：
- en: '**./windows-exploit-suggester.py –update**'
  id: totrans-235
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**./windows-exploit-suggester.py –update**'
- en: 'The output is shown in the following screenshot:'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 输出如以下截图所示：
- en: '![Figure 4.26 – Windows Exploit Suggester update](Images/B17389_04_026.jpg)'
  id: totrans-237
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.26 – Windows Exploit Suggester 更新](Images/B17389_04_026.jpg)'
- en: Figure 4.26 – Windows Exploit Suggester update
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.26 – Windows Exploit Suggester 更新
- en: 'Take note of the database''s filename, as highlighted in the following screenshot,
    as it will be used in the scanning phase:'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 请注意数据库的文件名，如下图所示，它将在扫描阶段中使用：
- en: '![Figure 4.27 – Windows Exploit Suggester database file](Images/B17389_04_027.jpg)'
  id: totrans-240
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.27 – Windows Exploit Suggester 数据库文件](Images/B17389_04_027.jpg)'
- en: Figure 4.27 – Windows Exploit Suggester database file
  id: totrans-241
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.27 – Windows Exploit Suggester 数据库文件
- en: The next step involves enumerating the target system information by running
    the **systeminfo** command, after which you will need to copy and paste the output
    of the command to a **.txt** file.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是通过运行 **systeminfo** 命令来枚举目标系统信息，之后需要将该命令的输出复制并粘贴到 **.txt** 文件中。
- en: 'After saving the output of the **systeminfo** command to a **.txt** file, you
    can run the script to check for vulnerabilities, like so:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在保存 **systeminfo** 命令的输出到 **.txt** 文件后，您可以运行脚本来检查漏洞，如下所示：
- en: '**./windows-exploit-suggester.py --database <database-file>.xlsx --systeminfo
    <systeminfo-output>.txt**'
  id: totrans-244
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**./windows-exploit-suggester.py --database <database-file>.xlsx --systeminfo
    <systeminfo-output>.txt**'
- en: 'The output of this command is as follows:'
  id: totrans-245
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此命令的输出如下：
- en: '![Figure 4.28 – Windows Exploit suggester output'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 4.28 – Windows Exploit Suggester 输出'
- en: '](Images/B17389_04_028.jpg)'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_028.jpg)'
- en: Figure 4.28 – Windows Exploit suggester output
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.28 – Windows Exploit Suggester 输出
- en: As shown in the preceding screenshot, the script will perform a scan and output
    a list of all the potential vulnerabilities and relevant information, such as
    the POC reference and exploit code or modules available on **exploit-db** or GitHub.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，脚本将执行扫描，并输出所有潜在漏洞及相关信息的列表，例如 POC 参考和可在 **exploit-db** 或 GitHub 上找到的利用代码或模块。
- en: This information will be useful in the next chapter, when we explore kernel
    exploitation on Windows.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 这些信息将在下一章中派上用场，当我们探索 Windows 上的内核利用时。
- en: Other enumeration tools
  id: totrans-251
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他枚举工具
- en: As we mentioned earlier in this section, many automated enumeration tools exist
    and can provide additional functionality and information, most of which we will
    explore later in this book.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们在本节前面所提到的，许多自动化枚举工具已经存在，并且可以提供额外的功能和信息，大多数我们将在本书后面探讨。
- en: 'The following is a list of useful enumeration tools and frameworks for Windows:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些适用于 Windows 的有用枚举工具和框架列表：
- en: '**Windows Privilege Escalation Awesome Script (winPEAS)**: [https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS/winPEASexe](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS/winPEASexe)'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 特权提升超级脚本 (winPEAS)**: [https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS/winPEASexe](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite/tree/master/winPEAS/winPEASexe)'
- en: '**Sherlock**: [https://github.com/rasta-mouse/Sherlock](https://github.com/rasta-mouse/Sherlock)'
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Sherlock**: [https://github.com/rasta-mouse/Sherlock](https://github.com/rasta-mouse/Sherlock)'
- en: '**Just Another Windows Enumeration Script** (**JAWS**): [https://github.com/411Hall/JAWS](https://github.com/411Hall/JAWS)'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Just Another Windows Enumeration Script** (**JAWS**): [https://github.com/411Hall/JAWS](https://github.com/411Hall/JAWS)'
- en: '**Watson**: [https://github.com/rasta-mouse/Watson](https://github.com/rasta-mouse/Watson)'
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Watson**: [https://github.com/rasta-mouse/Watson](https://github.com/rasta-mouse/Watson)'
- en: Now that we know how to perform local enumeration on Windows, we will learn
    how to perform local enumeration on Linux.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们知道如何在 Windows 上执行本地枚举，我们将学习如何在 Linux 上执行本地枚举。
- en: Linux enumeration
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Linux 枚举
- en: Local enumeration on Linux is similar to Windows and involves using manual techniques
    and tools to enumerate important information. In this section, we will explore
    a few automated tools that help simplify and streamline the enumeration process.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Linux 上进行本地枚举与在 Windows 上类似，涉及使用手动技术和工具来枚举重要信息。在本节中，我们将探索一些帮助简化和流线化枚举过程的自动化工具。
- en: Note
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Package managers will vary based on the Linux distribution in question. This
    will be pointed out and highlighted in the following sections.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 包管理器根据不同的 Linux 发行版会有所不同。接下来的章节将指出并强调这一点。
- en: System enumeration
  id: totrans-263
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 系统枚举
- en: System enumeration is the process of enumerating core system information such
    as the operating system's version, kernel version, operating system architecture,
    and the services that are running.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 系统枚举是枚举核心系统信息的过程，例如操作系统版本、内核版本、操作系统架构和正在运行的服务。
- en: 'We can perform system enumeration by following these steps:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过以下步骤执行系统枚举：
- en: 'The first piece of information we will need to enumerate is the operating system''s
    information. This can be done by running the following command:'
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要枚举的第一项信息是操作系统的信息。可以通过运行以下命令来完成：
- en: '**cat /etc/*-release**'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/*-release**'
- en: 'You can also use the **Linux Standard Base** (**LSB**) information. This can
    be done by running the following command:'
  id: totrans-268
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你还可以使用 **Linux Standard Base** (**LSB**) 信息。可以通过运行以下命令来完成：
- en: '**lsb_release -a**'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**lsb_release -a**'
- en: 'If these commands do not work, you can use the hostname systemd utility by
    running the following command:'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果这些命令无效，你可以使用 hostname systemd 实用程序，运行以下命令：
- en: '**hostnamectl**'
  id: totrans-271
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**hostnamectl**'
- en: 'You will also need the kernel version and operating system architecture. This
    will be useful in determining vulnerabilities and finding kernel exploits. This
    can be done by running the following command:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还需要知道内核版本和操作系统架构。这将有助于确定漏洞并寻找内核漏洞。可以通过运行以下命令来完成：
- en: '**uname -a**'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**uname -a**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 前述命令的输出如下：
- en: '![Figure 4.29 – Linux kernel version](Images/B17389_04_029.jpg)'
  id: totrans-275
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.29 – Linux 内核版本](Images/B17389_04_029.jpg)'
- en: Figure 4.29 – Linux kernel version
  id: totrans-276
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.29 – Linux 内核版本
- en: As shown in the preceding screenshot, the command will output the kernel version
    and system architecture.
  id: totrans-277
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前面的截图所示，命令将输出内核版本和系统架构。
- en: 'You will also need to identify the processes that are running as root. This
    is useful as you can utilize these processes to execute arbitrary commands as
    root. This can be done by running the following command:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你还需要识别作为 root 用户运行的进程。这很有用，因为你可以利用这些进程作为 root 用户执行任意命令。可以通过运行以下命令来完成：
- en: '**ps aux | grep root**'
  id: totrans-279
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ps aux | grep root**'
- en: 'As shown in the following screenshot, this will list all the processes running
    as root:'
  id: totrans-280
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如下截图所示，这将列出所有作为 root 用户运行的进程：
- en: '![Figure 4.30 – Linux services running](Images/B17389_04_030.jpg)'
  id: totrans-281
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.30 – Linux 服务运行情况](Images/B17389_04_030.jpg)'
- en: Figure 4.30 – Linux services running
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.30 – Linux 服务运行情况
- en: 'Another potential privilege escalation access vector on Linux is any programs
    and software that have been installed. We can determine the software that''s been
    installed on the system by listing the content of the following directories:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Linux 上的另一个潜在特权提升访问向量是已安装的程序和软件。我们可以通过列出以下目录的内容来确定系统上已安装的软件：
- en: a) **/usr/local**
  id: totrans-284
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: a) **/usr/local**
- en: b) **/usr/local/bin**
  id: totrans-285
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: b) **/usr/local/bin**
- en: c) **/opt/**
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: c) **/opt/**
- en: d) **/var**
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: d) **/var**
- en: e) **/usr/src**
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: e) **/usr/src**
- en: 'You can list the installed packages on Debian systems by running the following
    command:'
  id: totrans-289
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以通过运行以下命令列出 Debian 系统上已安装的包：
- en: '**dpkg -l**'
  id: totrans-290
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**dpkg -l**'
- en: 'If the target is running RHEL or Fedora, you can list the installed software
    by running the following command:'
  id: totrans-291
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果目标系统运行的是 RHEL 或 Fedora，可以通过运行以下命令列出已安装的软件：
- en: '**rpm -qa**'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**rpm -qa**'
- en: Now that we have enumerated information regarding the operating system's version
    and kernel version, we will learn how to enumerate user and group information
    on Linux.
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 现在我们已经枚举了操作系统版本和内核版本的信息，接下来我们将学习如何在 Linux 上枚举用户和组信息。
- en: 'We can also enumerate information from cron to determine what cron jobs are
    running and if they can be leveraged to execute commands or binaries. This can
    be done by running the following commands:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以枚举 cron 中的信息，确定哪些 cron 作业正在运行，以及是否可以利用这些作业来执行命令或二进制文件。可以通过运行以下命令来完成：
- en: '**crontab -l**'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**crontab -l**'
- en: '**ls -al /var/spool/cron**'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ls -al /var/spool/cron**'
- en: '**ls -al /etc/ | grep cron**'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ls -al /etc/ | grep cron**'
- en: '**ls -al /etc/cron***'
  id: totrans-298
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ls -al /etc/cron***'
- en: '**cat /etc/cron***'
  id: totrans-299
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/cron***'
- en: '**cat /etc/at.allow**'
  id: totrans-300
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/at.allow**'
- en: '**cat /etc/at.deny**'
  id: totrans-301
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/at.deny**'
- en: '**cat /etc/cron.allow**'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/cron.allow**'
- en: '**cat /etc/cron.deny**'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/cron.deny**'
- en: '**cat /etc/crontab**'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/crontab**'
- en: '**cat /etc/anacrontab**'
  id: totrans-305
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/anacrontab**'
- en: '**cat /var/spool/cron/crontabs/root**'
  id: totrans-306
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /var/spool/cron/crontabs/root**'
- en: Now that we have a clear picture of what is running on our target system, we
    can begin enumerating users and groups.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经清楚了解目标系统上正在运行的内容，可以开始枚举用户和组信息了。
- en: User and group enumeration
  id: totrans-308
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用户和组枚举
- en: User enumeration is the process of identifying the user we are currently utilizing
    and the user accounts that are on the target system. This information is useful
    as it tells us whether we have administrative privileges. It also helps us determine
    and identify potential user accounts that we can utilize to elevate our privileges.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 用户枚举是确定我们当前使用的用户以及目标系统上所有用户账户的过程。这些信息很有用，因为它告诉我们是否拥有管理员权限。它还帮助我们确定和识别潜在的用户账户，以便提升我们的权限。
- en: 'The user enumeration process on Linux is fairly straightforward and can be
    performed by following these steps:'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Linux 上，用户枚举过程相当直接，可以按照以下步骤进行：
- en: 'First, we need to determine the user that we are currently using. This can
    be done by running the following command:'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们需要确定当前正在使用的用户。可以通过运行以下命令来完成：
- en: '**whoami**'
  id: totrans-312
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**whoami**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-313
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.31 – whoami Linux](Images/B17389_04_031.jpg)'
  id: totrans-314
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.31 – whoami Linux](Images/B17389_04_031.jpg)'
- en: Figure 4.31 – whoami Linux
  id: totrans-315
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.31 – whoami Linux
- en: If you have administrative privileges, your username should be **root**, as
    shown in the preceding screenshot.
  id: totrans-316
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你有管理员权限，你的用户名应该是**root**，如前面的截图所示。
- en: 'You can also enumerate the other user accounts on the system by running the
    following command:'
  id: totrans-317
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你还可以通过运行以下命令枚举系统中的其他用户账户：
- en: '**cat /etc/passwd**'
  id: totrans-318
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/passwd**'
- en: 'To determine the groups that our account is part of, run the following command:'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了确定我们账户所属的组，可以运行以下命令：
- en: '**groups <username>**'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**groups <username>**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-321
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.32 – Linux groups'
  id: totrans-322
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.32 – Linux 组](Images/B17389_04_032.jpg)'
- en: '](Images/B17389_04_032.jpg)'
  id: totrans-323
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_032.jpg)'
- en: Figure 4.32 – Linux groups
  id: totrans-324
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.32 – Linux 组
- en: 'You can also list the groups on the system by running the following command:'
  id: totrans-325
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你还可以通过运行以下命令列出系统中的组：
- en: '**cat /etc/group**'
  id: totrans-326
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**cat /etc/group**'
- en: 'You can search for SUID binaries that can be exploited and run with root privileges
    to run arbitrary commands. This can be done by running the following command:'
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以搜索可以被利用的 SUID 二进制文件，并用 root 权限运行这些文件来执行任意命令。可以通过运行以下命令来完成：
- en: '**find / -perm -u=s -type f 2>/dev/null**'
  id: totrans-328
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**find / -perm -u=s -type f 2>/dev/null**'
- en: Now, let's learn how to enumerate network information from the target system.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们学习如何从目标系统枚举网络信息。
- en: Network enumeration
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 网络枚举
- en: 'Network enumeration is the process of obtaining all the relevant network information
    from a target system with the aim of determining its IP address, DNS server, default
    gateway, and domain controller, if any. This information can be used to map out
    the target network and stage pivoting attacks. Let''s take a look:'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: 网络枚举是从目标系统中获取所有相关网络信息的过程，目的是确定其 IP 地址、DNS 服务器、默认网关以及域控制器（如果有的话）。这些信息可以用来绘制目标网络图并进行跨网络攻击。我们来看一下：
- en: 'The first step involves enumerating the target network interfaces and their
    details. This can be done by running the following command:'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一部是枚举目标网络接口及其详细信息。可以通过运行以下命令来完成：
- en: '**ifconfig**'
  id: totrans-333
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**ifconfig**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-334
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.33 – ifconfig](Images/B17389_04_033.jpg)'
  id: totrans-335
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.33 – ifconfig](Images/B17389_04_033.jpg)'
- en: Figure 4.33 – ifconfig
  id: totrans-336
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.33 – ifconfig
- en: 'The next step is analyzing the routing table. This can be done by running the
    following command:'
  id: totrans-337
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是分析路由表。可以通过运行以下命令来完成：
- en: '**route**'
  id: totrans-338
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**route**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-339
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.34 – Linux routing table'
  id: totrans-340
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '![图 4.34 – Linux 路由表](Images/B17389_04_034.jpg)'
- en: '](Images/B17389_04_034.jpg)'
  id: totrans-341
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '](Images/B17389_04_034.jpg)'
- en: Figure 4.34 – Linux routing table
  id: totrans-342
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.34 – Linux 路由表
- en: 'We also need to determine what services we have running and their respective
    ports. This can be done by running the **netstat** command with the following
    arguments:'
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还需要确定运行的服务及其各自的端口。可以通过运行带有以下参数的**netstat**命令来完成：
- en: '**netstat -ant**'
  id: totrans-344
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**netstat -ant**'
- en: 'The output of the preceding command is as follows:'
  id: totrans-345
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 上述命令的输出如下：
- en: '![Figure 4.35 – Netstat active connections](Images/B17389_04_035.jpg)'
  id: totrans-346
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.35 – Netstat 活动连接](Images/B17389_04_035.jpg)'
- en: Figure 4.35 – Netstat active connections
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.35 – Netstat 活动连接
- en: As shown in the preceding screenshot, the command will display all the active
    connections and their respective ports.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，命令将显示所有活动连接及其相应端口。
- en: This information is important as it may also reveal internal services that are
    running locally that previously went undetected during the initial footprinting
    phase.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 这些信息很重要，因为它们可能揭示出以前在初步足迹收集阶段未被发现的、在本地运行的内部服务。
- en: We should now have a clear idea of what our target system is running and how
    it is configured. Now, let's learn how to use various automation tools that will
    help simplify the enumeration process.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在应该清楚了解目标系统正在运行什么，以及它是如何配置的。现在，让我们学习如何使用各种自动化工具来简化枚举过程。
- en: Automated enumeration tools
  id: totrans-351
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自动化枚举工具
- en: Many automated enumeration tools for Linux exist. This section will focus on
    the enumeration tools that will provide us with meaningful and actionable information.
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 目前有很多用于 Linux 的自动化枚举工具。本节将重点介绍那些能为我们提供有意义且可操作信息的工具。
- en: LinEnum
  id: totrans-353
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: LinEnum
- en: LinEnum is a bash script that automates the local enumeration process on Linux
    and provides comprehensive information to help specify the information required,
    as well as the ability to generate reports.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: LinEnum 是一个 bash 脚本，自动化了 Linux 上的本地枚举过程，提供全面的信息，帮助指定所需的信息，并能够生成报告。
- en: 'You can learn more about the script at [https://github.com/rebootuser/LinEnum](https://github.com/rebootuser/LinEnum).
    Let''s get started:'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在[https://github.com/rebootuser/LinEnum](https://github.com/rebootuser/LinEnum)了解更多关于该脚本的信息。我们开始吧：
- en: 'To use the tool, we will need to download the bash script from GitHub and transfer
    it over to our target. If the target has internet access, we can download the
    script directly by running the following command:'
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用该工具，我们需要从 GitHub 下载 bash 脚本并将其传输到目标系统。如果目标系统可以访问互联网，我们可以直接通过运行以下命令下载脚本：
- en: '**wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh**'
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh**'
- en: If the target prevents any incoming connections, we can upload the script from
    our local system to the target through **meterpreter**, as shown in the following
    screenshot:![Figure 4.36 – LinEnum download](Images/B17389_04_036.jpg)
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果目标系统阻止任何传入连接，我们可以通过**meterpreter**从本地系统上传脚本到目标，如下图所示：![图 4.36 – LinEnum 下载](Images/B17389_04_036.jpg)
- en: Figure 4.36 – LinEnum download
  id: totrans-359
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.36 – LinEnum 下载
- en: 'We can then execute the script with the following arguments:'
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们可以使用以下参数执行脚本：
- en: '**./LinEnum.sh -t -r <report-name>**'
  id: totrans-361
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**./LinEnum.sh -t -r <report-name>**'
- en: 'This will enumerate all the relevant information and will also display potentially
    useful vulnerabilities that can be exploited, as shown in the following screenshot:'
  id: totrans-362
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这将枚举所有相关信息，并显示可能被利用的有用漏洞，如下图所示：
- en: '![Figure 4.37 – LinEnum results](Images/B17389_04_037.jpg)'
  id: totrans-363
  prefs:
  - PREF_IND
  type: TYPE_IMG
  zh: '![图 4.37 – LinEnum 结果](Images/B17389_04_037.jpg)'
- en: Figure 4.37 – LinEnum results
  id: totrans-364
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 图 4.37 – LinEnum 结果
- en: 'We can also use the keyword functionality to enumerate passwords on the system.
    This can be done by running the following command:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们还可以使用关键词功能来枚举系统上的密码。可以通过运行以下命令来实现：
- en: '**./LinEnum.sh -k password**'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**./LinEnum.sh -k password**'
- en: Now, let's learn how to enumerate potential vulnerabilities on the target system.
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们学习如何枚举目标系统上的潜在漏洞。
- en: Linux Exploit Suggester
  id: totrans-368
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Linux Exploit Suggester
- en: 'Linux Exploit Suggester is an open source shell script that allows you to scan
    for potential kernel vulnerabilities on Linux. It provides their corresponding
    exploits or exploit modules. Let''s get started:'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: Linux Exploit Suggester是一个开源Shell脚本，允许您扫描Linux系统中的潜在内核漏洞，并提供相应的漏洞利用或漏洞利用模块。让我们开始吧：
- en: 'The script needs to be run locally on the target system. First, we need to
    download the script on to the target system. This can be done with **wget**, like
    so:'
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 脚本需要在目标系统上本地运行。首先，我们需要将脚本下载到目标系统。这可以通过**wget**命令完成，如下所示：
- en: '**wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh
    -O les.sh**'
  id: totrans-371
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh
    -O les.sh**'
- en: 'After downloading the script onto the target, you need to ensure the script
    has executable permissions. This can be done by running the following command:'
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在将脚本下载到目标系统后，您需要确保该脚本具有可执行权限。可以通过运行以下命令来完成此操作：
- en: '**chmod +x les.sh**'
  id: totrans-373
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**chmod +x les.sh**'
- en: You can now run the script to begin the scanning process, after which the script
    will output a list of potential vulnerabilities and their corresponding POCs and
    exploits.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您可以运行脚本以开始扫描过程，之后脚本将输出潜在漏洞的列表以及相应的POC和漏洞利用方法。
- en: Now that you have a grip on how to use various enumeration tools, let's explore
    some of the other automated enumeration tools that can be used.
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经掌握了如何使用各种枚举工具，让我们来探讨一些其他的自动化枚举工具，它们也可以被使用。
- en: Other enumeration tools
  id: totrans-376
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 其他枚举工具
- en: As we mentioned earlier in this section, many automated enumeration tools exist
    and can provide additional functionality and information, most of which we will
    explore later in this book.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在本节前面提到的，存在许多自动化枚举工具，可以提供额外的功能和信息，其中大多数我们将在本书后面进行探讨。
- en: 'The following is a list of useful enumeration tools and frameworks for Linux:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些适用于Linux的有用枚举工具和框架：
- en: 'Linux Smart Enumeration: [https://github.com/diego-treitos/linux-smart-enumeration](https://github.com/diego-treitos/linux-smart-enumeration)'
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Linux Smart Enumeration: [https://github.com/diego-treitos/linux-smart-enumeration](https://github.com/diego-treitos/linux-smart-enumeration)'
- en: 'Linux Priv Checker – **linuxprivchecker.py**: A Linux Privilege Escalation
    Check Script'
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Linux Priv Checker – **linuxprivchecker.py**: 一个用于Linux权限提升检查的脚本'
- en: 'Privilege Escalation Scripts: [https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)'
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '权限提升脚本: [https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite)'
- en: 'LinEnum: [https://github.com/rebootuser/LinEnum](https://github.com/rebootuser/LinEnum)'
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'LinEnum: [https://github.com/rebootuser/LinEnum](https://github.com/rebootuser/LinEnum)'
- en: With that, we've learned how to enumerate information from Windows and Linux
    systems. Now, we are ready to start using this information to stage privilege
    escalation attacks.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这些内容，我们已经学会了如何从Windows和Linux系统中枚举信息。现在，我们已经准备好利用这些信息来进行权限提升攻击。
- en: Summary
  id: totrans-384
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we started by learning about the enumeration process. We then
    looked at how to perform local enumeration manually and automatically on Windows.
    Finally, we learned how to perform local enumeration on Linux.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们首先了解了枚举过程。然后，我们学习了如何在Windows上手动和自动执行本地枚举。最后，我们学习了如何在Linux上执行本地枚举。
- en: Now that we have learned how to perform local enumeration on Windows and Linux,
    we can begin the privilege escalation process.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经学会了如何在Windows和Linux上执行本地枚举，可以开始权限提升过程了。
- en: In the next chapter, we will begin the privilege escalation process on Windows
    by using kernel exploits.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将通过使用内核漏洞开始Windows上的权限提升过程。
