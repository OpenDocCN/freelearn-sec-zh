- en: Information Gathering and Vulnerability Assessments
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信息收集和漏洞评估
- en: There is a myth that all Windows systems are easy to exploit. This is not entirely
    true. Almost any Windows system can be hardened to the point that it takes too
    long to exploit its vulnerabilities. In this chapter, you will learn how to footprint
    your Windows network and discover the vulnerabilities before the bad guys do.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个误解，认为所有的Windows系统都很容易受到攻击。这并不完全正确。几乎任何Windows系统都可以加固到需要花费太长时间才能利用其漏洞的程度。在本章中，你将学习如何对你的Windows网络进行足迹识别，并在坏人之前发现漏洞。
- en: You will also learn ways to investigate and map your Windows network to find
    Windows systems that are susceptible to exploits. In some cases, this will be
    adding to your knowledge of the top 10 security tools; in others, we will show
    you entirely new tools to handle this category of investigation.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你还将学习调查和映射你的Windows网络，找到易受攻击的Windows系统。在某些情况下，这将增加你对前10个安全工具的了解；在其他情况下，我们将向你展示全新的工具来处理这类调查。
- en: 'We will cover the following topics in this chapter:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本章中涵盖以下主题：
- en: Footprinting the network
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对网络进行足迹识别
- en: An annotated list of Nmap command options
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap命令选项的注释列表
- en: Using OpenVAS
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用OpenVAS
- en: Using Maltego
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Maltego
- en: Using KeepNote
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用KeepNote
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with this chapter, you will need the following:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 要跟着本章进行学习，你需要以下内容：
- en: A running version of Kali Linux
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行的Kali Linux版本
- en: Some Windows hosts on a network to scan
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些需要扫描的网络上的Windows主机
- en: Footprinting the network
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对网络进行足迹识别
- en: You can't find your way without a good map. In this chapter, we are going to
    learn how to gather network information and assess vulnerabilities on the network.
    In the hacker world, this is called **footprinting**. This is the first step to
    any righteous hack. This is where you will save yourself time and massive headaches.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 没有一张好地图，你就无法找到路。在本章中，我们将学习如何收集网络信息并评估网络上的漏洞。在黑客世界中，这被称为**足迹识别**。这是任何正当的黑客行动的第一步。这是你将节省时间和大量头痛的地方。
- en: Without footprinting your targets, you are just shooting in the dark. The biggest
    tool in any good penetration tester's toolbox is your **mindset**. You have to
    have the mind of a sniper. You learn your target's habits and its actions. You
    learn the traffic flows on the network where your target lives. You find the weaknesses
    in your target and then attack those weaknesses. Search and destroy!
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 没有对目标进行足迹识别，你只是在盲目射击。任何优秀的渗透测试人员工具箱中最重要的工具是你的**心态**。你必须有狙击手的心态。你要了解你的目标习惯和行为。你要了解目标所在网络的流量流向。你要找到目标的弱点，然后攻击这些弱点。搜索和摧毁！
- en: In order to do good footprinting, you have to use several tools that come with
    Kali. Each tool has it strong points and looks at the target from a different
    angle. The more views of your target, the better plan of attack you have.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进行良好的足迹识别，你必须使用Kali提供的几个工具。每个工具都有其优势，并从不同角度观察目标。对目标的多个视角，可以制定更好的攻击计划。
- en: Footprinting will differ depending on whether your targets are external on the
    public network, or internal and on a LAN. We will be covering both of these aspects.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 足迹识别将根据你的目标是外部公共网络上的还是内部局域网上的而有所不同。我们将涵盖这两个方面。
- en: Scanning and using these tools against a machine on a public network, which
    you do not have written permission to access, is a Federal crime.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 对公共网络上的机器进行扫描和使用这些工具，如果你没有书面许可访问，那就是一种联邦犯罪。
- en: In this book, for most instances of Kali Linux, we will be using virtual machines
    running on **VMware** and **Oracle VirtualBox** that are built specifically for
    this book. The instances of Kali that we use on a daily basis are fairly heavily
    customized, and it would take a whole book just to cover the customizations. For
    external networks, we will be using several live servers on the internet.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，对于大多数Kali Linux实例，我们将使用专门为本书构建的在**VMware**和**Oracle VirtualBox**上运行的虚拟机。我们日常使用的Kali实例都经过了相当大的定制，涵盖这些定制需要整本书的篇幅。对于外部网络，我们将使用互联网上的几台实时服务器。
- en: Please be respectful and leave these addresses alone, as two of them are Bo's
    personal servers, and several are in the Atlanta Cloud Technology server cluster.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 请尊重并不要攻击这些地址，其中两个是Bo的个人服务器，还有几个在亚特兰大云技术服务器集群中。
- en: Please read the preceding note again, and remember you do not have our permission
    to attack these machines. *Don't do the crime if you can't pay the time*.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 请再次阅读前面的说明，并记住你没有我们的许可攻击这些机器。*如果你做不到，就不要犯罪*。
- en: Nmap
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nmap
- en: 'You can''t talk about networking without talking about **Nmap**. Nmap is the
    Swiss Army knife for network administrators. It is not only a great footprinting
    tool but also the best and cheapest network analysis tool any sysadmin can have
    on their machine. It really is the Swiss Army knife of network analysis:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 谈论网络就不能不谈**Nmap**。Nmap是网络管理员的瑞士军刀。它不仅是一个很好的足迹识别工具，也是任何系统管理员都可以拥有的最好和最便宜的网络分析工具。它真的是网络分析的瑞士军刀：
- en: It's a great tool for checking a single server to make sure the ports are operating
    properly
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个检查单个服务器端口是否正常运行的好工具
- en: It can heartbeat-ping an entire network segment or several hosts on a network
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以心跳ping整个网络段或网络上的几台主机
- en: It can even discover machines when ICMP (ping) has been turned off
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它甚至可以在ICMP（ping）被关闭时发现机器
- en: It can be used to pressure-test services. If the machine freezes under the load,
    it needs repairs
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以用来压力测试服务。如果机器在负载下冻结，就需要修理
- en: Nmap was created in 1997 by Gordon Lyon, who goes by the handle Fyodor on the
    internet. Fyodor still maintains Nmap and it can be downloaded from [http://insecure.org](http://insecure.org/).
    You can also order his book about Nmap on that website. It is a great book. Well
    worth the price! Fyodor and the Nmap hackers have collected a great deal of information
    and security email lists on the site. Since you are running Kali Linux, you have
    a full copy of Nmap already installed!
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap是由Gordon Lyon于1997年创建的，他在互联网上使用Fyodor这个名号。Fyodor仍在维护Nmap，并可以从[http://insecure.org](http://insecure.org/)下载。您还可以在该网站上订购他关于Nmap的书。这是一本很棒的书。物有所值！Fyodor和Nmap黑客已经在该网站上收集了大量信息和安全电子邮件列表。由于您正在运行Kali
    Linux，您已经安装了完整的Nmap！
- en: 'Here is an example of Nmap running against a Kali Linux instance:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是针对Kali Linux实例运行Nmap的示例：
- en: 'Open the Terminal from the icon on the top bar or by clicking on the menu links:
    Application | Accessories | Terminal. You could also choose the Root Terminal
    if you want, but since you are already logged in as Root, you will not see any
    difference.'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从顶部栏的图标或单击菜单链接打开终端：应用程序 | 附件 | 终端。如果您愿意，也可以选择Root终端，但由于您已经以Root身份登录，您不会看到任何区别。
- en: Type `nmap -A 10.0.0.4` at the Command Prompt. (You need to put in the IP of
    the machine you are testing.)
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令提示符中键入`nmap -A 10.0.0.4`。（您需要输入要测试的机器的IP。）
- en: The output shows the open ports among 1,000 commonly used ports. In this example,
    there are no open ports, so to make it a little more interesting, do the following.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出显示了1,000个常用端口中的开放端口。在这个例子中，没有开放端口，所以为了使其更有趣，可以执行以下操作。
- en: Start the built-in web server by typing `/etc/init.d/apache2 start`.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过输入`/etc/init.d/apache2 start`来启动内置的Web服务器。
- en: 'With the web server started, run the Nmap command again, as follows: `nmap
    -A 10.0.0.4`.'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Web服务器后，再次运行Nmap命令，如下：`nmap -A 10.0.0.4`。
- en: 'As you can see, Nmap is attempting to discover the OS and to tell what web
    server version:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您所见，Nmap正在尝试发现操作系统并告诉Web服务器版本：
- en: '![](img/bef77e3f-6617-41d5-85fc-ba47adb79259.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bef77e3f-6617-41d5-85fc-ba47adb79259.png)'
- en: 'The following is an example of running Nmap from the Git Bash application,
    which lets you run Linux commands on your Windows Desktop. This view shows a neat
    feature of Nmap. If you get bored or anxious and think the system is taking too
    much time to scan, you can hit the down arrow key and it will print out a status
    line to tell you what percentage of the scan is complete. This is not the same
    as telling you how much time is left to the scan, but it does give you an idea
    of what has been done:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在Git Bash应用程序中运行Nmap的示例，该应用程序允许您在Windows桌面上运行Linux命令。此视图显示了Nmap的一个很好的功能。如果您感到无聊或焦虑，并认为系统扫描时间太长，您可以按下箭头键，它将打印出一个状态行，告诉您扫描完成的百分比。这与告诉您扫描还剩多少时间不同，但它确实让您了解已经完成了多少工作：
- en: '![](img/4ad09350-b0bb-4a78-b914-46d1be5e89a5.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4ad09350-b0bb-4a78-b914-46d1be5e89a5.png)'
- en: Nmap also comes as a Windows-installable application for your Windows machine.
    If you are a network or systems admin, you'll find this a great tool, not just
    for footprinting, but for systems and network troubleshooting. For other systems,
    you can find the Nmap installers at [https://nmap.org/download.html](https://nmap.org/download.html).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap也作为Windows可安装应用程序提供给您的Windows机器。如果您是网络或系统管理员，您会发现这是一个很好的工具，不仅用于足迹识别，还用于系统和网络故障排除。对于其他系统，您可以在[https://nmap.org/download.html](https://nmap.org/download.html)找到Nmap安装程序。
- en: Zenmap
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Zenmap
- en: 'Nmap comes with a GUI called **Zenmap**. Zenmap is a friendly graphical interface
    for the Nmap application. You will find Zenmap under Kali Linux | Information
    Gathering | Network Scanners | Zenmap. The interface looks as follows:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap附带一个名为**Zenmap**的图形用户界面。Zenmap是Nmap应用程序的友好图形界面。您可以在Kali Linux | 信息收集 | 网络扫描仪
    | Zenmap下找到Zenmap。界面如下所示：
- en: '![](img/f615fc31-0eb3-4922-92d3-3026c9ca0adb.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f615fc31-0eb3-4922-92d3-3026c9ca0adb.png)'
- en: One of the cool features of Zenmap is that, when you set up a scan using the
    buttons, the application also writes out the command-line version of the command,
    which will help you learn the command line flags used with Nmap in command-line
    mode.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap的一个很酷的功能是，当您使用按钮设置扫描时，应用程序还会写出命令行版本的命令，这将帮助您学习在命令行模式下使用Nmap的命令行标志。
- en: 'Hacker tip:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 黑客提示：
- en: Most hackers are very comfortable on the Linux **Command-Line Interface** (**CLI**).
    You want to learn Nmap commands on the command line, because you can use Nmap
    inside automated bash scripts and make up cron jobs to make routine scans much
    simpler. You can set a cron job to run the test in non-peak hours, when the network
    is quieter, and your tests will have less impact on the network's legitimate users.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数黑客在Linux **命令行界面**（**CLI**）上非常熟悉。您希望在命令行上学习Nmap命令，因为您可以在自动化的bash脚本中使用Nmap，并创建cron作业以使常规扫描变得更简单。您可以设置一个cron作业在非高峰时段运行测试，当网络较为安静时，您的测试对网络的合法用户影响较小。
- en: 'The intense-scan choice produces a command line of `nmap -T4 -A -v`:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 强烈扫描选项会生成一个命令行`nmap -T4 -A -v`：
- en: This produces a fast scan; the `T` stands for Timing (from 1 to 5), and the
    default timing is `-T3`. The faster the timing, the rougher the test, and the
    more likely you are to be detected if the network is running an **Intrusion Detection
    System** (**IDS**).
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这将产生一个快速扫描；`T`代表时间（从1到5），默认时间是`-T3`。时间越快，测试越粗糙，如果网络正在运行**入侵检测系统**（**IDS**），则越有可能被检测到。
- en: With a deep port scan, including OS identification and attempts to find the
    applications listening on the ports, and the versions of those applications. `-A`
    stands for All.
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 进行深度端口扫描，包括操作系统识别和尝试查找监听端口的应用程序以及这些应用程序的版本。`-A`代表全部。
- en: Finally, the `-v` stands for verbose. `-vv` means very verbose.
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后，`-v`代表冗长。`-vv`表示非常冗长。
- en: 'In the following, we see a list of the most common scans in a drop-down box:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面，我们看到一个下拉框中列出了最常见的扫描方式：
- en: '![](img/f121faf5-36e5-4aef-a775-5c5b00496fdf.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f121faf5-36e5-4aef-a775-5c5b00496fdf.png)'
- en: The difference verbosity makes
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 冗长性的差异
- en: 'The next three screenshots show the difference verbosity makes in an OS scan.
    The OS scan includes a stealth scan, so `nmap -O hostname` is exactly the same
    as `nmap -sS -O hostname`:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的三个截图展示了冗长在OS扫描中的差异。OS扫描包括隐形扫描，因此`nmap -O hostname`和`nmap -sS -O hostname`是完全相同的。
- en: '![](img/622a9b90-a2cf-4276-9f93-4b29907c9e03.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: 通过点击拓扑标签，然后点击主机查看器按钮，您可以得到一个主机的好列表。通过点击地址，您可以看到每个主机的详细信息。请注意，地址是不同的颜色。Nmap为您挑出了最容易的目标。绿色表示安全，而黄色和红色表示有漏洞或服务，可能会被利用。
- en: 'The verbose version here has been adjusted slightly to fit all the detail into
    the screenshot. The different scan options have different enhanced content when
    the `-v` or `-vv` options are added to the search strings. It makes sense to use
    `-v` or `-vv` when you have chosen some likely targets using the basic display
    option:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的冗长版本已经稍作调整，以适应截图中的所有细节。当将`-v`或`-vv`选项添加到搜索字符串时，不同的扫描选项会有不同的增强内容。当您选择一些可能的目标时，使用`-v`或`-vv`是有意义的。
- en: '![](img/3a1c8e0d-5d04-483b-b796-4893f7e201bc.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](img/de79df54-8481-4d03-b23b-d69be656b39a.png)'
- en: 'In the next screenshot, we have added another `v` (`-vv`) to the verbosity
    flag and rerun the scan. As we can see, a lot more information about the system
    and the scan is outputted:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/622a9b90-a2cf-4276-9f93-4b29907c9e03.png)'
- en: '![](img/422cf39b-72d1-4c71-85d5-a241ee747c73.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/422cf39b-72d1-4c71-85d5-a241ee747c73.png)'
- en: Scanning a network range
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扫描网络范围
- en: 'The following example has a network range of `192.168.202.0/24`, and the scan
    type chosen is an intense scan with no ping. You then click the Scan button and
    your scan runs. During the scan, you will see the output in the Nmap Output tab
    on the screen. From our scan, we see we have six active hosts on the network.
    From the icons next to the IP addresses, we can tell we have identified two Windows
    machines, two Linux machines, and two unknown OS systems. Notice how, in the Command
    field in the following screenshot, as you set your scan variables, the command-line
    variables show up in this field. This is a good way to learn how to use Nmap from
    the command line:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/767c78e7-da82-4ca1-be63-6f7089694dd5.png)'
- en: '![](img/ea241f4d-4774-4428-8750-495cd5bf9b55.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: 如果网络关闭了ICMP，尝试对机器进行ping测试会花费很长时间。几乎和对目标机器的UDP端口进行ping测试一样长。对于任何一种情况，每台机器大约需要75秒每个端口。在第一种情况下，这意味着对六台机器进行ping测试需要450秒才能失败。UDP搜索测试每台机器的端口要多得多。在标准UDP端口扫描中测试了1,000个端口，你将需要大约21小时才能测试UDP。如果没有一个真正好的理由使用Nmap检查UDP端口，这不是一种具有成本效益的做法。
- en: If a network has ICMP turned off, attempting to ping the machines takes a lot
    of time. It takes almost as long as pinging UDP ports on the target machines.
    For either case, each machine will take approximately 75 seconds per port. In
    the first case, that means a ping of six machines takes 450 seconds just to fail
    the ping test. UDP searches test many more ports per machine. At 1,000 ports tested
    per standard UDP-port scan, you are going to take about 21 hours per machine just
    to test UDP. If you don't have a really good reason to check UDP ports with Nmap,
    it is not a cost-effective exercise.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap还具有一个用于比较扫描结果的很好的功能。您可以在菜单栏中找到它，路径是Tools | Compare Results。在下面的截图中，您将看到我们对网络运行了两次扫描。当我们比较这两次扫描时，我们可以看到在第二次扫描中发现了一台新机器。在第一次扫描的结果中，它标记为红色，并显示`192.168.202.131`为关闭。当它是绿色时，它显示为开启，并显示了开放的端口和系统信息。
- en: 'By clicking the Topology tab and then clicking the Hosts Viewer button, you
    get a nice list of the hosts. By clicking the addresses, you can see the details
    of each host. Note that the addresses are different colors. Nmap picks out the
    low-hanging fruit for you. Green means secured, whereas yellow and red have vulnerabilities
    or services and could be exploited:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一个截图中，我们在冗长标志中添加了另一个`v`(`-vv`)并重新运行了扫描。正如我们所看到的，关于系统和扫描的更多信息被输出。
- en: '![](img/767c78e7-da82-4ca1-be63-6f7089694dd5.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: 如果您有一个大型网络，只想找到Windows机器，以便专注于Windows漏洞，您可以使用以下命令运行快速扫描：`nmap -T4 -F 10.0.0.0/24`。或者，您可以选择快速扫描Plus，输入`nmap
    -sV -T4 -O -F -version-light 10.0.0.0/24`。这将让您对哪些机器真正感兴趣有一个很好的了解。看起来`10.0.0.12`是一台Windows机器，因为五个开放端口中有四个是与Windows相关的。
- en: 'Zenmap also has a nice feature for comparing scans. You will find it in the
    menu bar under Tools | Compare Results. In the following screenshots, you will
    see that we ran two scans on the network. When we compare the two, we can see
    that, on the second scan, a new machine was found. In the results of the first
    scan, it is marked in red, and shows `192.168.202.131` as down. When it is green,
    it is showing it as up, and displays the open ports and system information:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/3a1c8e0d-5d04-483b-b796-4893f7e201bc.png)'
- en: '![](img/3f15c054-d736-427d-ad69-23ae60371194.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3f15c054-d736-427d-ad69-23ae60371194.png)'
- en: 'The following screenshot is the result of running Nmap from the command line.
    As you saw previously, Nmap has been ported to Windows. If your company allows
    it, Nmap can be run on a Windows system by the command line in either the command
    window or through Windows PowerShell:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图是从命令行运行Nmap的结果。正如您之前看到的，Nmap已经移植到了Windows。如果您的公司允许，Nmap可以通过命令行在Windows系统上运行，可以在命令窗口或通过Windows
    PowerShell运行。
- en: '![](img/5a1160ad-087f-477e-acea-f7208b19eb02.png)'
  id: totrans-68
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5a1160ad-087f-477e-acea-f7208b19eb02.png)'
- en: 'If you have a large network, and just want to find Windows machines so that
    you can focus on Windows vulnerabilities, you can run the Quick Scan with the
    following command: `nmap -T4 -F 10.0.0.0/24`. Or, you can opt for Quick Scan Plus
    by typing `nmap -sV -T4 -O -F -version-light 10.0.0.0/24`. These will give you
    a good idea of which machines you really want to focus on. It looks like `10.0.0.12`
    is a Windows machine, based on the fact that four of five open ports are Windows-related:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '![](img/767c78e7-da82-4ca1-be63-6f7089694dd5.png)'
- en: '![](img/de79df54-8481-4d03-b23b-d69be656b39a.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ea241f4d-4774-4428-8750-495cd5bf9b55.png)'
- en: 'When you are looking at the Topology tab, you can adjust the size of the group
    by changing the values of the controls at the bottom of the window. The size of
    the graphic is increased by increasing **interest factor**. The standard view
    puts the local host at the center of the grouping, but if you click on one of
    the other hosts, it is brought to the center, as follows:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 当您查看拓扑标签时，可以通过更改窗口底部控件的值来调整组的大小。通过增加**兴趣因素**来增加图形的大小。标准视图将本地主机放在组的中心，但如果单击其他主机中的一个，它将被带到中心，如下所示：
- en: '![](img/5fbcbb5e-8479-4966-9f66-a416ef504854.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5fbcbb5e-8479-4966-9f66-a416ef504854.png)'
- en: An annotated list of Nmap command options
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nmap命令选项的注释列表
- en: Even though Zenmap has a short, punchy drop-down list of popular and useful
    scans, there are quite an assortment of commands and options that you can use
    in customizing your scans.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 即使Zenmap有一个简短，有力的下拉列表，列出了流行和有用的扫描，但您可以使用各种命令和选项来自定义扫描。
- en: '**Where can you find instructions on this thing?**'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: '**您在哪里可以找到有关此事的说明？**'
- en: 'On a Linux box, there are three places where you can find more information
    about a command-line application:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux框中，有三个地方可以找到有关命令行应用程序的更多信息：
- en: '**The help page**: Almost all Unix and Linux applications have a help file
    that you can access by typing the application name and `-h` on the command line.
    Consider the following as an example: `root@kali-01: ~# nmap -h`.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**帮助页面**：几乎所有的Unix和Linux应用程序都有一个帮助文件，您可以通过在命令行上输入应用程序名称和`-h`来访问。考虑以下示例：`root@kali-01:
    ~# nmap -h`。'
- en: '**The man page**: This is a full manual for most modern command-line applications,
    which you can access by typing `man` and the application name on the command line.
    See the following for an example: `root@kali-01: ~#-`. This gets you a pretty
    good explanation of how to use Rsync, the secure and logged file transfer protocol.
    Man pages are of varying quality, and many of them are actually written by rocket
    scientists, so a newbie may have to research how to read the manual page before
    it will be useful to them. The Nmap man page is clearly written, with understandable
    examples to try out.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**man页面**：这是大多数现代命令行应用程序的完整手册，您可以通过在命令行上键入`man`和应用程序名称来访问。看以下示例：`root@kali-01:
    ~#-`。这会为您提供如何使用Rsync的相当好的解释，这是安全和记录的文件传输协议。man页面的质量不一，其中许多实际上是由火箭科学家编写的，因此新手可能需要研究如何阅读手册页面才能对他们有用。Nmap的man页面写得很清楚，有可理解的示例可供尝试。'
- en: '**Info pages**: For Bash shell built-ins, there is a group of information pages,
    instead of man pages. To get at the info pages, type `info` and the application
    name. For example, `root@kali-01: ~# info ls` will present you with the info page
    for the ls command, which is the Linux version of the DIR command in DOS.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息页面**：对于Bash shell内置命令，有一组信息页面，而不是man页面。要查看信息页面，请键入`info`和应用程序名称。例如，`root@kali-01:
    ~# info ls`将为您呈现ls命令的信息页面，这是DOS中DIR命令的Linux版本。'
- en: The `-h` commands present you with in-line text in the Terminal window, so you
    are returned to the Command Prompt immediately after the information scrolls past.
    The `man` and `info` commands launch the text reader, **Less**, so you can scroll
    up and down on the document, even though you are still in the Terminal window.
    To escape from **Less**, just press the Q key.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '`-h`命令会在终端窗口中呈现内联文本，因此在信息滚动过去后，您会立即返回到命令提示符。`man`和`info`命令启动文本阅读器**Less**，因此您可以在文档上下滚动，即使您仍然在终端窗口中。要从**Less**中退出，只需按Q键。'
- en: The Shift key is your friend in the Linux Terminal Emulator.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: Shift键是Linux终端模拟器中的好朋友。
- en: If you want to scroll up and down in the Terminal window, for instance, if the
    `-h` help file is longer than a single screen, just hold Shift + the up or downcursor
    key.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想在终端窗口中上下滚动，例如，如果`-h`帮助文件比单个屏幕长，只需按住Shift +上或下光标键。
- en: The hot-key sequence for copy and paste are *Shift* + *Ctrl* + *C* and *Shift*
    + *Ctrl* + *V*, respectively. *Ctrl* + *C* means close the running application
    in the Bash Shell, and *Ctrl* + *V* does nothing at all.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 复制和粘贴的热键序列分别是*Shift* + *Ctrl* + *C*和*Shift* + *Ctrl* + *V*。*Ctrl* + *C*意味着关闭Bash
    Shell中正在运行的应用程序，*Ctrl* + *V*则根本不起作用。
- en: The Nmap 6.47 help file can be found at [http://nmap.org](http://nmap.org).
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap 6.47帮助文件可以在[http://nmap.org](http://nmap.org)找到。
- en: '| **Usage**: `nmap [Scan Type(s)] [Options] {target specification}` |  |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '**用法**：`nmap [扫描类型] [选项] {目标规范}`'
- en: '| **TARGET SPECIFICATION**: |  |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '**目标规范**：|  |'
- en: '| **Ex**: | `atlantacbudtech.com`, `aarrrggh.com/26`, `192.168.3.111`; `10.1-16.0-255.1-254`
    |'
  id: totrans-87
  prefs: []
  type: TYPE_TB
  zh: '**例如**：`atlantacbudtech.com`，`aarrrggh.com/26`，`192.168.3.111`；`10.1-16.0-255.1-254`'
- en: '| `-L <inputfilename>`: | Input from list of hosts/networks. |'
  id: totrans-88
  prefs: []
  type: TYPE_TB
  zh: '- ` -L <inputfilename>`：| 从主机/网络列表输入。'
- en: '| `-R <num hosts>`: | Choose random targets. |'
  id: totrans-89
  prefs: []
  type: TYPE_TB
  zh: '- ` -R <num hosts>`：| 选择随机目标。'
- en: '| `-exclude <host1, [host2], [host3], ...>`:  | Exclude hosts/networks. |'
  id: totrans-90
  prefs: []
  type: TYPE_TB
  zh: '- ` -exclude <host1，[host2]，[host3]，...>`：| 排除主机/网络。'
- en: '| `-exludefile <exclude_file>`: | Exclude list from file. |'
  id: totrans-91
  prefs: []
  type: TYPE_TB
  zh: '- ` -exludefile <exclude_file>`：| 从文件中排除列表。'
- en: '| **HOST DISCOVERY**: |  |'
  id: totrans-92
  prefs: []
  type: TYPE_TB
  zh: '**主机发现**：|  |'
- en: '| `-sL`: | List Scan - simply list targets to scan. |'
  id: totrans-93
  prefs: []
  type: TYPE_TB
  zh: '- ` -sL`：| 列出扫描 - 只是列出要扫描的目标。'
- en: '| `-sn`: | Ping Scan - disable port scan. |'
  id: totrans-94
  prefs: []
  type: TYPE_TB
  zh: '- ` -sn`：| Ping扫描 - 禁用端口扫描。'
- en: '| `-Pn`: | Treat all hosts as online - skip the ping for host discovery. |'
  id: totrans-95
  prefs: []
  type: TYPE_TB
  zh: '- ` -Pn`：| 将所有主机视为在线 - 跳过主机发现的ping。'
- en: '| `-PS/PA/PU/PY [portlist]`: | TCP SYN/ACK, UDP or SCTP discovery to given
    ports. |'
  id: totrans-96
  prefs: []
  type: TYPE_TB
  zh: '- ` -PS/PA/PU/PY [portlist]`：| TCP SYN/ACK，UDP或SCTP发现到给定端口。'
- en: '| `-PE/PP/PM`: | ICMP echo, timestamp, and netmask request discovery probes.
    |'
  id: totrans-97
  prefs: []
  type: TYPE_TB
  zh: '- ` -PE/PP/PM`：| ICMP回显，时间戳和子网掩码请求发现探测。'
- en: '| `-PO [protocol list]`: | IP protocol ping, as opposed to ICMP ping. |'
  id: totrans-98
  prefs: []
  type: TYPE_TB
  zh: '- ` -PO [protocol list]`：| IP协议ping，而不是ICMP ping。'
- en: '| `-n/-R`: | Never do DNS resolution/Always resolve [default:sometimes]. |'
  id: totrans-99
  prefs: []
  type: TYPE_TB
  zh: '- ` -n/-R`：| 从不进行DNS解析/始终解析[默认：有时]。'
- en: Resolving DNS gives you more information about the network, but it creates DNS
    request traffic, which might alert a sysadmin that there is something going on
    that is not entirely normal, especially if they are not using DNS in the network.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 解析DNS可以为您提供有关网络的更多信息，但它会产生DNS请求流量，这可能会提醒系统管理员有一些不太正常的事情正在发生，特别是如果他们在网络中没有使用DNS。
- en: 'This is a view of the help file that comes with Nmap, with our comments included
    (you can find much more at the manual page at [http://nmap.org/book/man/](http://nmap.org/book/man/)):'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这是Nmap带有我们的注释的帮助文件视图（您可以在[http://nmap.org/book/man/](http://nmap.org/book/man/)的手册页面找到更多信息）：
- en: '`--dns-servers <serv1[,serv2],...>`: Specify custom DNS servers.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--dns-servers <serv1[,serv2],...>`：指定自定义DNS服务器。'
- en: '`--system-dns`: Use OS''s DNS resolver. This is the default behavior.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--system-dns`：使用操作系统的DNS解析器。这是默认行为。'
- en: '`--traceroute`: Trace the hop path to each host. This would only make sense
    in large, complicated, segmented networks.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--traceroute`：跟踪到每个主机的跳数路径。这只在大型，复杂，分段的网络中才有意义。'
- en: '**Scan techniques:**'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**扫描技术：**'
- en: '`-sS/sT/sA/sW/sM`: TCP SYN/Connect()/ACK/Window/Maimon scans'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sS/sT/sA/sW/sM`：TCP SYN/Connect()/ACK/Window/Maimon扫描'
- en: '`-sU`: UDP scan'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sU`：UDP扫描'
- en: '`-sN/sF/sX`: TCP Null, FIN, and Xmas scans'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sN/sF/sX`：TCP Null，FIN和Xmas扫描'
- en: '`--scanflags <flags>`: Customize TCP scan flags'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--scanflags <flags>`：自定义TCP扫描标志'
- en: 'NS - ECN-nonce concealment protection (this is experimental: see RFC 3540 for
    more information).'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: NS-ECN-nonce隐瞒保护（这是实验性的：有关更多信息，请参阅RFC 3540）。
- en: '`CWR`: Congestion Window Reduced. Used to indicate that packets are being reduced
    in size to maintain traffic under congested network conditions.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CWR`：拥塞窗口减小。用于指示正在减小数据包大小以在拥塞的网络条件下维持流量。'
- en: '`ECE`: ECN-Echo has a dual role, depending on the value of the SYN flag:'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ECE`：ECN-Echo具有双重作用，取决于SYN标志的值：'
- en: If the SYN flag is set (1), then it indicates that the TCP peer is ECN-capable.
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果SYN标志设置（1），则表示TCP对等方支持ECN。
- en: If the SYN flag is clear (0), then it indicates that a packet with a Congestion
    Experienced flag in the IP header set is received during normal transmission (this
    is added to the header by RFC 3168).
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果SYN标志清除（0），则表示在正常传输期间接收到IP标头中设置了拥塞经历标志的数据包（这是由RFC 3168添加到标头中的）。
- en: '`URG`: This indicates that the Urgent pointer field is significant.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`URG`：这表示紧急指针字段很重要。'
- en: '`ACK`: This indicates that the Acknowledgment field is significant.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACK`：这表示确认字段很重要。'
- en: '`PSH`: The Push function. Asks to push the buffered data to the receiving application.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PSH`：推送功能。要求将缓冲数据推送到接收应用程序。'
- en: '`RST`: Reset the connection.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RST`：重置连接。'
- en: '`SYN`: Synchronize sequence numbers.'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SYN`：同步序列号。'
- en: '`FIN`: No more data from sender.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FIN`：发送方不再有数据。'
- en: '`-sI <zombie host[:probeport]>`: Idle scan.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sI <zombie host[:probeport]>`：空闲扫描。'
- en: '`-sY/sZ`: SCTP INIT/COOKIE-ECHO scans.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sY/sZ`：SCTP INIT/COOKIE-ECHO扫描。'
- en: '`-sO`: IP protocol scan.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sO`：IP协议扫描。'
- en: '`-b <FTP relay host>`: FTP bounce scan.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-b <FTP relay host>`：FTP反弹扫描。'
- en: 'Port specification and scan order:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 端口规范和扫描顺序：
- en: '`-p <port ranges>`: Only scan specified ports.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '`-p <端口范围>`：仅扫描指定端口。'
- en: 'For example, consider the following code: `-p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9`'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，考虑以下代码：`-p22; -p1-65535; -p U:53,111,137,T:21-25,80,139,8080,S:9`
- en: '`-F`: Fast mode—scan fewer ports than the default scan'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-F`：快速模式-扫描比默认扫描更少的端口'
- en: '`-r`: Scan ports consecutively-don''t randomize'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-r`：连续扫描端口-不随机化'
- en: '`--top-ports <number>`: Scan <number> most common ports'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--top-ports <number>`：扫描<number>最常见的端口'
- en: '`--port-ratio <ratio>`: Scan ports more common than a given `<ratio>`'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--port-ratio <ratio>`：扫描比给定的`<ratio>`更常见的端口'
- en: 'Service/version detection:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 服务/版本检测：
- en: '`-sV`: Probe open ports to determine service/version info'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sV`：探测开放端口以确定服务/版本信息'
- en: '`--version-intensity <level>`: Set from 0 (light) to 9 (try all probes)'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--version-intensity <level>`：设置从0（轻）到9（尝试所有探测）的强度'
- en: '`--version-light`: Limit to the most likely probes (intensity 2)'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--version-light`：限制为最可能的探测（强度2）'
- en: '`--version-all`: Try every single probe (intensity 9)'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--version-all`：尝试每个单独的探测（强度9）'
- en: '`--version-trace`: Show detailed version of scan activity (for debugging)'
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--version-trace`：显示扫描活动的详细版本（用于调试）'
- en: 'Script scan:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本扫描：
- en: '`-sC`: equivalent to `-script=default`'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-sC`：等同于`-script=default`'
- en: '`--script=<Lua scripts>`: `<Lua scripts>` is a comma-separated list of directories,
    script-files, or script-categories'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script=<Lua scripts>`：`<Lua scripts>`是一个逗号分隔的目录，脚本文件或脚本类别列表'
- en: '`--script-args=<n1=v1,[n2=v2,...]>`: provide arguments to scripts'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script-args=<n1=v1,[n2=v2,...]>`：为脚本提供参数'
- en: '`--script-args-file=filename`: provide NSE script arguments in a file'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script-args-file=filename`：在文件中提供NSE脚本参数'
- en: '`--script-trace`: Show all data sent and received'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script-trace`：显示发送和接收的所有数据'
- en: '`--script-updatedb`: Update the script database'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script-updatedb`：更新脚本数据库'
- en: '`--script-help=<Lua scripts>`: Show help about scripts'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--script-help=<Lua scripts>`：显示有关脚本的帮助'
- en: '`<Lua scripts>` is a comma-separated list of script-files or script-categories'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Lua scripts>`是一个逗号分隔的脚本文件或脚本类别列表'
- en: 'OS detection:'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 操作系统检测：
- en: '`-O`: Enable OS detection'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-O`：启用OS检测'
- en: '`--osscan-limit`: Limit OS detection to promising targets'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--osscan-limit`：将OS检测限制为有希望的目标'
- en: '`--osscan-guess`: Try to guess the OS more aggressively'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--osscan-guess`：更积极地尝试猜测操作系统'
- en: 'Timing and performance:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 时间和性能：
- en: Options that specify time intervals are in seconds, or we can append 'ms' (milliseconds),
    's' (seconds), 'm' (minutes), or 'h' (hours) to the value. For example, `23ms`
    would translate as 23 milliseconds.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 指定时间间隔的选项以秒为单位，或者我们可以在值后附加'ms'（毫秒），'s'（秒），'m'（分钟）或'h'（小时）。例如，`23ms`将被翻译为23毫秒。
- en: '`-T<0-5>`: Set the timing template (higher is faster, and also noisier)'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-T<0-5>`：设置时间模板（更高表示更快，也更吵）'
- en: '`--min-hostgroup/max-hostgroup <size>`: Parallel host scan group sizes'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--min-hostgroup/max-hostgroup <size>`：并行主机扫描组大小'
- en: '`--min-parallelism/max-parallelism <numprobes>`: Probe parallelization'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--min-parallelism/max-parallelism <numprobes>`：探测并行化'
- en: '`--min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout <time>`: Specifies probe
    round-trip time'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--min-rtt-timeout/max-rtt-timeout/initial-rtt-timeout <time>`：指定探测往返时间'
- en: '`--max-retries <tries>`: Caps the number of port scan probe retransmissions'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`--max-retries <tries>`：限制端口扫描探测的重传次数'
- en: '`--host-timeout <time>`: Give up on target after this time interval'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --host-timeout <time>：在此时间间隔后放弃目标
- en: '`--scan-delay/--max-scan-delay <time>`: Adjust the delay between probes'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --scan-delay/--max-scan-delay <time>：调整探测之间的延迟
- en: '`--min-rate <number>`: Send packets no slower than <number> per second'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --min-rate <number>：每秒发送的数据包不慢于<number>
- en: '`--max-rate <number>`: Send packets no faster than <number> per second'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --max-rate <number>：每秒发送的数据包不超过<number>
- en: 'Firewall/IDs evasion and spoofing:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 防火墙/IDS规避和欺骗：
- en: '`-f; --mtu <val>`: fragment packets (optionally with a given MTU)'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -f; --mtu <val>：分段数据包（可选带有给定的MTU）
- en: '`-D <decoy1,decoy2[,ME],...>`: Cloak a scan with decoys'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -D <decoy1,decoy2[,ME],...>：用伪装物隐藏扫描
- en: '`-S <IP_Address>`: Spoof the source address'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -S <IP_Address>：欺骗源地址
- en: '`-e <iface>`: Use a specified interface'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -e <iface>：使用指定的接口
- en: '`-g/--source-port <portnum>`: Use a given port number'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -g/--source-port <portnum>：使用给定的端口号
- en: '`--proxies <url1,[url2],...>`: Relay connections through HTTP/SOCKS4 proxies'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --proxies <url1,[url2],...>：通过HTTP/SOCKS4代理中继连接
- en: '`--data-length <num>`: Append random data to sent packets'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --data-length <num>：向发送的数据包附加随机数据
- en: '`--ip-options <options>`: Send packets with specified IP options'
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --ip-options <options>：发送带有指定IP选项的数据包
- en: '`--ttl <val>`: Set IP time-to-live field'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --ttl <val>：设置IP生存时间字段
- en: '`--spoof-mac <mac address/prefix/vendor name>`: Spoof your MAC address'
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --spoof-mac <mac address/prefix/vendor name>：欺骗您的MAC地址
- en: '`--badsum`: Send packets with a bogus TCP/UDP/SCTP checksum'
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --badsum：发送带有虚假TCP/UDP/SCTP校验和的数据包
- en: 'Output:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 输出：
- en: '`-oN/-oX/-oS/-oG <file>`: Output the scan in normal, XML, s|<rIpt kIddi3, and
    grepable format, respectively, to the given filename'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -oN/-oX/-oS/-oG <file>：将扫描以正常、XML、s|<rIpt kIddi3和grepable格式输出到给定的文件名
- en: '`-oA <basename>`: Output in the three major formats at once'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -oA <basename>：同时以三种主要格式输出
- en: '`-v`: Increase verbosity level (use `-vv` or more for greater effect)'
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -v：增加详细级别（使用“-vv”或更高级别效果更好）
- en: '`-d`: Increase debugging level (use `-dd` or more for greater effect)'
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -d：增加调试级别（使用“-dd”或更高级别效果更好）
- en: '`--reason`: Display the reason a port is in a particular state'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --reason：显示端口处于特定状态的原因
- en: '`--open`: Only show open (or possibly open) ports'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --open：仅显示打开（或可能打开）的端口
- en: '`--packet-trace`: Show all packets sent and received'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --packet-trace：显示发送和接收的所有数据包
- en: '`--iflist`: Print host interfaces and routes (for debugging)'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --iflist：打印主机接口和路由（用于调试）
- en: '`--log-errors`: Log errors/warnings to the normal-format output file'
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --log-errors：将错误/警告记录到正常格式的输出文件
- en: '`--append-output`: Append to, rather than clobber, specified output files'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --append-output：追加到指定的输出文件，而不是覆盖
- en: '`--resume <filename>`: Resume an aborted scan'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --resume <filename>：恢复中止的扫描
- en: '`--stylesheet <path/URL>`: Use an XSL stylesheet to transform XML output to
    HTML'
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --stylesheet <path/URL>：使用XSL样式表将XML输出转换为HTML
- en: '`--webxml`: Reference stylesheet from nmap.org for more portable XML'
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --webxml：从nmap.org引用样式表以获得更便携的XML
- en: '`--no-stylesheet`: Prevent associating of XSL stylesheet with XML output'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --no-stylesheet：防止将XSL样式表与XML输出关联
- en: 'Miscellaneous:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 杂项：
- en: '`-6`: Enable IPv6 scanning.'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -6：启用IPv6扫描。
- en: '`-A`: Enable OS detection, version detection, script scanning, and traceroute.
    This is a shortcut for `-sS -sV --traceroute -O`. This is Wolf''s favorite scanning
    option.'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -A：启用操作系统检测、版本检测、脚本扫描和跟踪路由。这是“-sS -sV --traceroute -O”的快捷方式。这是Wolf最喜欢的扫描选项。
- en: '`--datadir <dirname>`: Specify custom Nmap data file location.'
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --datadir <dirname>：指定自定义Nmap数据文件位置。
- en: '`--send-eth/--send-ip`: Send using raw ethernet frames or IP packets.'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --send-eth/--send-ip：使用原始以太网帧或IP数据包发送。
- en: '`--privileged`: Assume that the user is fully privileged.'
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --privileged：假设用户完全具有特权。
- en: '`--unprivileged`: Assume the user lacks raw socket privileges.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: --unprivileged：假设用户缺少原始套接字权限。
- en: '`-V`: Print Nmap version number. Doesn''t work in conjunction with other options.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -V：打印Nmap版本号。与其他选项一起使用无效。
- en: '`-h`: Print the help summary page.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: -h：打印帮助摘要页面。
- en: 'Examples:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 示例：
- en: '[PRE0]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: You can construct custom Nmap scanning strings and copy them into Zenmap, so
    you get the benefits of the Zenmap interface.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以构建自定义的Nmap扫描字符串并将其复制到Zenmap中，以便享受Zenmap界面的好处。
- en: Using OpenVAS
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用OpenVAS
- en: 'In Chapter 2, we set up OpenVAS for vulnerability scanning. Nmap does a great
    job of reporting ports and services, but lacks the ability to scan for vulnerabilities.
    OpenVAS will find vulnerabilities and produce a report on systems. The guys at
    OpenVAS update their vulnerability list weekly, so it is best to update OpenVAS
    before running a scan. To do this on Kali, run the following commands from the
    Terminal window:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在第2章中，我们为漏洞扫描设置了OpenVAS。Nmap在报告端口和服务方面做得很好，但缺乏扫描漏洞的能力。OpenVAS将发现漏洞并对系统进行报告。OpenVAS的人员每周更新他们的漏洞列表，因此最好在运行扫描之前更新OpenVAS。要在Kali上执行此操作，请从终端窗口运行以下命令：
- en: '[PRE1]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'This will run vulnerability updates for OpenVAS. The first time you run it,
    you will see the information visible in the following screenshot, asking you to
    migrate to using Rsync to update the vulnerabilities. Type `Y` and hit the *Enter*
    key. The update will start. The first time this is run, it will take quite a while,
    because it has to give you the entire list of plugins and tests available. In
    subsequent runs of the `update` command, it only adds the new or changed data,
    and is far faster:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 这将为OpenVAS运行漏洞更新。第一次运行时，您将看到以下截图中可见的信息，要求您迁移到使用Rsync来更新漏洞。键入“Y”并按*Enter*键。更新将开始。第一次运行此命令时，需要相当长的时间，因为它必须提供完整的插件和可用测试列表。在随后运行“update”命令时，它只会添加新的或更改的数据，并且速度要快得多：
- en: '![](img/c4eb5d48-5264-41c1-ae7d-43ef2e7dcd41.png)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c4eb5d48-5264-41c1-ae7d-43ef2e7dcd41.png)'
- en: 'You will also need to run the following command:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 您还需要运行以下命令：
- en: '[PRE2]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'After this finishes updating, we are ready to go. Now let''s fire up the OpenVAS
    service. Go to Applications | Kali Linux | System Services | OpenVAS | OpenVAS
    start. A Terminal window will open and you will see related services starting.
    Once they are started, you can close this window and go to the following link:
    `https://localhost:9392`.'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 更新完成后，我们已经准备就绪。现在让我们启动OpenVAS服务。转到应用程序 | Kali Linux | 系统服务 | OpenVAS | 启动OpenVAS。一个终端窗口将打开，您将看到相关服务正在启动。一旦它们启动，您可以关闭此窗口并转到以下链接：`https://localhost:9392`。
- en: When would you not use OpenVAS?
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 何时不使用OpenVAS？
- en: On some company networks, there are scanning services in place that you can
    use to scan for vulnerabilities. There is no sense in doing it twice, unless you
    suspect that the official company scanning tool is not configured properly for
    the scope of the search, or that it has not been updated to include searches for
    the most recent vulnerabilities. Scanning services such as Qualys, Nexpose, and
    Nessus are great scanning tools and accomplish the same task as OpenVAS. All of
    these services export their data in XML format, which can then be imported later
    into tools such as Metasploit.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在一些公司网络中，已经有了可以用来扫描漏洞的扫描服务。除非您怀疑官方公司扫描工具未正确配置以适应搜索范围，或者未更新以包括对最新漏洞的搜索，否则没有必要重复进行扫描。诸如Qualys、Nexpose和Nessus之类的扫描工具都是很好的扫描工具，可以完成与OpenVAS相同的任务。所有这些服务都以XML格式导出其数据，然后可以将其导入到诸如Metasploit之类的工具中。
- en: Now, log into the OpenVAS web interface with the extremely long and complex
    password that was generated during the setup steps. Normally, the user is `admin`.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，使用在设置步骤中生成的极长且复杂的密码登录OpenVAS Web界面。通常，用户是`admin`。
- en: Now is a good time to go to the Administration tab and change the password to
    something still complex but more easily remembered.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是一个很好的时机，去管理选项卡并将密码更改为仍然复杂但更容易记住的内容。
- en: 'To run your first scan, just enter the network subnet or the single IP address
    of the machine to be scanned into the scan text box, and start the scan by clicking
    the button. The little geeky girl wizard will set up several normal parameters
    for you and run the scan. You can also set up custom scans, and even schedule
    jobs to run at a given date and time:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行您的第一次扫描，只需将要扫描的网络子网或单个IP地址输入到扫描文本框中，然后点击按钮开始扫描。这个小极客女巫会为您设置几个正常参数并运行扫描。您还可以设置自定义扫描，甚至安排在特定日期和时间运行作业：
- en: '![](img/a85dc8e9-dd39-4af2-bc7e-ac0e5af2a129.png)'
  id: totrans-214
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a85dc8e9-dd39-4af2-bc7e-ac0e5af2a129.png)'
- en: Once the scan is started, you will get the following screen. At this point,
    you will see it marked Requested, and in a minute or so the screen will refresh
    and you will see the progress bar start to move. Depending on how large a network
    you are scanning, you can either go get a cup of coffee, go have a meal, come
    back tomorrow, or leave for the weekend. This will take a while. The good thing
    to note is you do not need to stay close by to click a Next button throughout
    this process.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦扫描开始，您将看到以下屏幕。此时，您将看到它标记为“已请求”，大约一分钟后屏幕将刷新，您将看到进度条开始移动。根据您要扫描的网络大小，您可以去喝杯咖啡，吃顿饭，明天回来，或者周末离开。这将需要一些时间。值得注意的是，在整个过程中，您无需紧挨着点击“下一步”按钮。
- en: 'Now that the scan has completed, you will see a screen like the following one.
    Go to the Scan Management tab, and then to Reports in the drop-down menu. This
    will take you to the reports page, as follows:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 现在扫描已经完成，您将看到一个类似以下的屏幕。转到扫描管理选项卡，然后在下拉菜单中选择报告。这将带您到报告页面，如下所示：
- en: '![](img/824c6c7d-53ac-4d9a-a059-57ad4366833b.png)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![](img/824c6c7d-53ac-4d9a-a059-57ad4366833b.png)'
- en: 'The reports page will give you the results of the scan, categorizing the vulnerabilities
    found from the most severe to the lowest, as follows:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 报告页面将向您提供扫描结果，将发现的漏洞从最严重到最低进行分类，如下所示：
- en: '![](img/acd7f2e3-954d-4282-b9d5-77be2875e630.png)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![](img/acd7f2e3-954d-4282-b9d5-77be2875e630.png)'
- en: 'From here, you can generate a report in various formats. Pick the format needed
    and click the green button, as shown in the following screenshot:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，您可以以各种格式生成报告。选择所需的格式，然后点击绿色按钮，如下面的屏幕截图所示：
- en: '![](img/0c87d4a4-47c8-47bc-ae8c-3b0964fb981c.png)'
  id: totrans-221
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0c87d4a4-47c8-47bc-ae8c-3b0964fb981c.png)'
- en: 'You can then download the report. You can edit it to display your company logo,
    and any required company information that is not already in the document:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 然后您可以下载报告。您可以编辑报告以显示您公司的标志和任何未包含在文档中的必要公司信息：
- en: '![](img/e2647312-ed08-4b74-b7f3-4b6be35cb0b1.png)'
  id: totrans-223
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e2647312-ed08-4b74-b7f3-4b6be35cb0b1.png)'
- en: Using Maltego
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Maltego
- en: '**Maltego** is an information gathering tool that has many uses besides gathering
    network information. You can also gather information on people and companies from
    various sources. For now, we will use it for gathering network information about
    a public network.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '**Maltego**是一个信息收集工具，除了收集网络信息外，还有许多其他用途。您还可以从各种来源收集有关人员和公司的信息。现在，我们将使用它来收集有关公共网络的网络信息。'
- en: The first time you start Maltego, you will need to do some setup, and also register
    at their website in order to log in to the Transform servers. It's easy, free,
    and spam-free, so giving them your email address won't be a problem. First, you
    will need to pick the version that you want to use. Maltego XL and Classic are
    professional versions, which you must pay to get a license for. The CE version
    is the free version, and while you are learning how to use this tool, the CE version
    that we will be using in the following section will work just fine. If you are
    pen-testing for a living, the license for the Classic version is a bit expensive,
    but worth it. The paid-for versions will pull down over 10,000 entities in its
    searches. The CE version is limited to 10 per entity.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 第一次启动Maltego时，您需要进行一些设置，并在其网站上注册，以便登录到转换服务器。这很容易，免费，没有垃圾邮件，因此提供您的电子邮件地址不会成为问题。首先，您需要选择要使用的版本。Maltego
    XL和Classic是专业版本，您必须支付才能获得许可证。CE版本是免费版本，而您正在学习如何使用此工具时，我们将在以下部分中使用的CE版本将完全正常工作。如果您是以渗透测试为生，那么Classic版本的许可证有点昂贵，但是非常值得。付费版本将在搜索中提取超过10,000个实体。CE版本对每个实体的限制为10个。
- en: 'So, pick the CE version and click Run:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 因此，选择CE版本，然后点击“运行”：
- en: '![](img/22950f50-6818-4b30-802d-62b6ed19d07a.png)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![](img/22950f50-6818-4b30-802d-62b6ed19d07a.png)'
- en: 'Next, fill in the information that you used for registration, solve the Captcha,
    and click Next:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，填写您用于注册的信息，解决验证码，然后点击“下一步”：
- en: '![](img/644d528b-8d22-44f9-9537-fec223335dfb.png)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](img/644d528b-8d22-44f9-9537-fec223335dfb.png)'
- en: 'So, we are all registered, and we get the following window. Click Next to continue:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 所以，我们都注册了，然后我们得到了以下窗口。点击“下一步”继续：
- en: '![](img/8dd88348-0735-44b8-a380-39ed3a70a753.png)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8dd88348-0735-44b8-a380-39ed3a70a753.png)'
- en: 'Next, we get a window asking how we want to start. We are going to pick a blank
    chart, then click Finish, as follows:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们会得到一个询问如何开始的窗口。我们将选择一个空白图表，然后点击“完成”，如下所示：
- en: '![](img/b141eeb6-ed46-4003-abfd-481d6090ba1e.png)'
  id: totrans-234
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b141eeb6-ed46-4003-abfd-481d6090ba1e.png)'
- en: 'After we click Finish, we are given a blank chart page, as follows:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“完成”后，我们会得到一个空白图表页面，如下所示：
- en: '![](img/bdb499cb-6b04-4cc6-81d3-525d1245930d.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bdb499cb-6b04-4cc6-81d3-525d1245930d.png)'
- en: So, let's footprint a domain.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，让我们足迹一个域名。
- en: Click and drag the Domain icon in the left tool bar to the center of the graph
    page. The default domain is shown as paterva.com. This is Maltego's website and
    is just a placeholder for now.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击并将左侧工具栏中的域图标拖动到图表页面的中心。默认域显示为paterva.com。这是Maltego的网站，现在只是一个占位符。
- en: '![](img/e94cb9ee-8216-4540-bc87-2cc8b3cc14ab.png)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e94cb9ee-8216-4540-bc87-2cc8b3cc14ab.png)'
- en: In the bottom right-hand toolbar, in the Property View, change paterva.com to
    the domain that you want to footprint.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 在右下角的工具栏中，在属性视图中，将paterva.com更改为您想要足迹的域。
- en: 'Remember: never test anything you don''t own or have written permission to
    test! Jail is no fun, and the powers that be are coming down hard on hacking and
    you don''t want to be labeled a *cyber-terrorist*. And no, you do not have permission
    to test my stuff. Please play nice!'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 记住：永远不要测试您不拥有或没有书面许可的任何东西！监狱不好玩，有关黑客行为的权力正在严厉打击，您不想被贴上*网络恐怖分子*的标签。不，您没有权限测试我的东西。请友好相处！
- en: 'In the following section, we are going to footprint one of the writer''s domains: `boweaver.com`.
    Since I own the domain, I give myself permission to test the domain:'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我们将足迹作者的一个域：`boweaver.com`。由于我拥有该域，我允许自己测试该域：
- en: '![](img/a3589676-7b53-4d67-b7c4-e771f8205e8b.png)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a3589676-7b53-4d67-b7c4-e771f8205e8b.png)'
- en: Next, right-click on the domain icon, and you'll get a command window.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，右键单击域图标，您将会得到一个命令窗口。
- en: Click on the double arrows. This will run all the transforms on the domain.
    This will take a minute to run.
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击双箭头。这将在域上运行所有转换。这将花费一分钟来运行。
- en: '![](img/f7cbdf0d-0580-42dc-b954-756f09be8afd.png)'
  id: totrans-246
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f7cbdf0d-0580-42dc-b954-756f09be8afd.png)'
- en: 'Once the transforms have run, you''ll see the output information on the screen.
    Just in one click, the application went out, checked many online sources, and
    pulled a lot of basic information about the domain: the owner, the IP address,
    the physical location of that address, and a lot more. You can now right-click
    on any of these entities to drill down and gather more information:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦转换完成，您将在屏幕上看到输出信息。只需点击一下，应用程序就会出去，检查许多在线来源，并提取有关域的许多基本信息：所有者、IP地址、该地址的物理位置等等。现在，您可以右键单击任何这些实体，以深入了解并收集更多信息：
- en: '![](img/eb9725be-03cc-4c4e-989e-b7939eefab9b.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eb9725be-03cc-4c4e-989e-b7939eefab9b.png)'
- en: 'Now that we''ve generated some data, we need to save our results. Click on
    the Maltego icon (the circle with three colored circles inside it, at the top-left
    of the window), then click on Save As and save your file to your project workspace,
    as follows:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经生成了一些数据，我们需要保存我们的结果。点击Maltego图标（窗口左上角的三个彩色圆圈组成的圆圈），然后点击“另存为”，将文件保存到项目工作区，如下所示：
- en: '![](img/e589a3e4-5c96-4203-9019-9cade47268ff.png)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e589a3e4-5c96-4203-9019-9cade47268ff.png)'
- en: Now let's look at some of the information gathered. From the first line, we
    can tell the domain is registered at GoDaddy. The DNS-listed admin email address
    is `postmaster@boweaver.com`. On the second line, we see other DNS record entries,
    which show the mail server (`bomail`) and the web server (`www`). We also see
    there is a relation to the domain `boweaver.net`. On the third line, we see several
    email addresses that the search has found from the transform sources. Also, the
    MX record listing for the domain shows `bomail.boweaver.com` and the mail server
    for this domain. The fourth line shows the NS server and entities connected to
    the domain.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看一下收集到的一些信息。从第一行，我们可以看出该域名在GoDaddy注册。DNS列出的管理员电子邮件地址是`postmaster@boweaver.com`。在第二行，我们看到其他DNS记录条目，显示了邮件服务器（`bomail`）和Web服务器（`www`）。我们还看到与域`boweaver.net`有关系。在第三行，我们看到搜索从转换源找到的几个电子邮件地址。此外，该域的MX记录列表显示了`bomail.boweaver.com`和该域的邮件服务器。第四行显示了NS服务器和与该域连接的实体。
- en: '![](img/5249a0ce-3532-4e59-8e67-dcc578b8e56b.png)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5249a0ce-3532-4e59-8e67-dcc578b8e56b.png)'
- en: We can see the left part of the data output in the following screenshot. By
    looking at the abuse email address listed there, we can tell that a privacy block
    is set on the domain, so the phone numbers and email addresses point to GoDaddy.
    We also see the related website `www.boweaver.com` listed. So, a simple one-click
    search has revealed a lot of information about the domain, its structure, and
    its owners.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以在以下截图中看到数据输出的左侧部分。通过查看列出的滥用电子邮件地址，我们可以知道该域名设置了隐私保护，因此电话号码和电子邮件地址指向了GoDaddy。我们还看到了相关网站`www.boweaver.com`。因此，一个简单的一键搜索揭示了关于该域名、其结构和所有者的大量信息。
- en: '![](img/c583ce95-9589-429f-b056-148536ca2c70.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c583ce95-9589-429f-b056-148536ca2c70.png)'
- en: 'By right-clicking on the website, we get the following window. By clicking
    the double arrows next to Resolve to IP, we get the IP address and network information
    for the site:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 通过右键单击网站，我们得到以下窗口。通过单击“解析为IP”旁边的双箭头，我们可以获取该网站的IP地址和网络信息：
- en: '![](img/95bcbbfb-3c44-44d7-b802-a510b6a407df.png)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![](img/95bcbbfb-3c44-44d7-b802-a510b6a407df.png)'
- en: 'So, by digging deeper, we have found the IP address, the assigned network block,
    and the **Autonomous System Number** (**ASN**). We can also see that the site
    is hosted at Digital Oceans'' New York data center:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，通过深入挖掘，我们已经找到了IP地址、分配的网络块和自治系统号（ASN）。我们还可以看到该网站托管在Digital Oceans的纽约数据中心：
- en: '![](img/42daf813-3d32-48f4-86eb-9e7e05795852.png)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42daf813-3d32-48f4-86eb-9e7e05795852.png)'
- en: 'Maltego lets you save this information to a table (a CSV file), generate a
    report, or export a graph as an image:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego允许您将此信息保存到表格（CSV文件），生成报告，或将图表导出为图像：
- en: '![](img/cf2d6c37-aec3-4237-b00e-1f841f1a0b14.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cf2d6c37-aec3-4237-b00e-1f841f1a0b14.png)'
- en: So, with just two clicks of a mouse in this application, and not once actually
    touching any of the target's assets, we have determined a lot of information about
    the target.
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，通过这个应用程序的两次鼠标点击，而实际上并没有触及目标的任何资产，我们已经确定了大量关于目标的信息。
- en: This is just a simple use of this tool. The depths of information that this
    tool can dig up are astounding, and also kind of scary, especially if you get
    the pro version. Full use of this tool is beyond the scope of this book. There
    are plenty of online sources on the in-depth use of this tool.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 这只是这个工具的简单用法。这个工具可以挖掘的信息深度令人震惊，也有点可怕，特别是如果您使用专业版。这个工具的完整使用超出了本书的范围。关于这个工具的深入使用有很多在线资源。
- en: Using KeepNote
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用KeepNote
- en: A word here on note-taking! Penetration testing gathers a lot of data, even
    on a small network, and I mean a lot! So when pen-testing, you need the ability
    to gather your incoming data as you are carrying out the test. Kali comes with
    several applications for this. Whichever one you choose, just choose one and use
    it. Six weeks after the test is run, and you need to go back and verify something,
    you'll be happy you did. Also, when testing in a high-security environment, such
    as a network that must be either HIPPA- or PCI-compliant, these notes are particularly
    useful when building your report. Also, make sure you keep all your project files
    in one directory along with this framework. Another reason to take good notes
    is that, if legal actions arise, your notes could be your best defense.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里要说一下笔记！渗透测试收集了大量数据，即使是在一个小网络上，我是说非常多！因此，在进行渗透测试时，您需要在进行测试时能够收集到来的数据。Kali配备了几个应用程序来实现这一点。无论您选择哪一个，只需选择一个并使用它。测试运行后六周，当您需要回头验证某些内容时，您会为自己的选择感到高兴。此外，在进行高安全环境的测试时，比如必须符合HIPPA或PCI标准的网络，这些笔记在撰写报告时尤其有用。另外，请确保将所有项目文件放在一个目录中，并与此框架一起使用。做好笔记的另一个原因是，如果出现法律诉讼，您的笔记可能是您最好的辩护。
- en: The following screenshot shows the framework Bo uses. He makes a folder for
    the client organization, and then a folder for the actual test with the date in
    the folder name. It is safe to assume that, wherever you ply your trade, you will
    see the same clients over and over. If you are not seeing repeat business, something
    is wrong with your own business model. Ext-20150315 translates to an external
    test conducted on 20150315\. 20150315 is a Unix-style date that breaks down to
    YYYYMMDD. If you see Unix-style datestamps that look like 20150317213209, then
    this can be broken down to the second. Inside of that folder, Bo sets up directories
    for evidence, notes, and scans-docs. All evidence collected, including screenshots,
    is dropped into the `evidence` folder. Notes from KeepNote are kept in the `notes`
    folder, and scans and other related documents are kept in the `scans-docs` folder.
    When we start conducting tests later in this book, you will see this framework
    being used.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了Bo使用的框架。他为客户组织创建一个文件夹，然后为实际测试创建一个带有日期的文件夹名称。可以肯定的是，无论您在哪里从事业务，您都会反复看到相同的客户。如果您没有看到重复的业务，那么您自己的业务模式可能存在问题。Ext-20150315表示在20150315进行的外部测试。20150315是一个Unix风格的日期，可以分解为YYYYMMDD。如果您看到看起来像20150317213209的Unix风格日期戳，那么这可以被分解到秒。在该文件夹内，Bo设置了用于证据、笔记和扫描文档的目录。所有收集的证据，包括截图，都放入“evidence”文件夹。来自KeepNote的笔记保存在“notes”文件夹中，扫描和其他相关文档保存在“scans-docs”文件夹中。当我们在本书的后面开始进行测试时，您将看到这个框架被使用。
- en: 'The following is a screenshot of the folder layout. We are using the LXDE File
    Manager in this case:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是文件夹布局的截图。在这种情况下，我们使用LXDE文件管理器：
- en: '![](img/6a1a71aa-96b4-4282-b0e9-63dfe17ed211.png)'
  id: totrans-267
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a1a71aa-96b4-4282-b0e9-63dfe17ed211.png)'
- en: Even if you work for only one company, keep each test's data separated and dated;
    this will help you to keep track of your testing.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 即使您只为一家公司工作，也要保持每个测试的数据分开并标记日期；这将帮助您跟踪测试情况。
- en: For the actual note-taking, Kali comes with several applications, as shown previously;
    Maltego is one of these tools and is capable of keeping all your data in one place.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 对于实际的笔记，Kali配备了几个应用程序，如之前所示；Maltego是其中之一，能够将所有数据保存在一个地方。
- en: Bo's favorite is KeepNote. You saw an introduction to KeepNote in [Chapter 1](b18fe074-058f-410f-86de-77499a727708.xhtml),
    *Choosing Your Distro*. KeepNote is a simple note-taking application. As Bo tests,
    he keeps copies of outputs from manual exploits, individual scan data, and screenshots.
    What makes this nice is that you have the ability to format your data as you go,
    so importing it into a template later is just a matter of copy/paste.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 博最喜欢的是KeepNote。您在[第1章](b18fe074-058f-410f-86de-77499a727708.xhtml)中看到了KeepNote的介绍，*选择您的发行版*。KeepNote是一个简单的笔记应用程序。在Bo的测试中，他保存了手动利用的输出副本，单独的扫描数据和截图。好处在于您可以随时格式化数据，因此稍后将其导入模板只是复制/粘贴的问题。
- en: '![](img/75220810-40c0-4906-ac1f-ecaa0e5bdf58.png)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![](img/75220810-40c0-4906-ac1f-ecaa0e5bdf58.png)'
- en: Summary
  id: totrans-272
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you have learned some of the many uses of the Nmap tool, and
    its GUI interface, Zenmap. We learned about the detailed use of OpenVAS Vulnerability
    Scanner, and the use of this data in your attack. We also learned about the use
    of the informational gathering tool, Maltego.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您已经了解了Nmap工具的许多用途，以及其GUI界面Zenmap。我们了解了OpenVAS漏洞扫描器的详细用法，以及在攻击中使用这些数据。我们还了解了信息收集工具Maltego的用法。
- en: Further reading
  id: totrans-274
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '**Nmap Network Scanning by Fydor**: [https://nmap.org/book/](https://nmap.org/book/)'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Fydor的Nmap网络扫描**: [https://nmap.org/book/](https://nmap.org/book/)'
- en: '**OpenVAS Documentation**: [http://www.openvas.org/documentation.html](http://www.openvas.org/documentation.html)'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OpenVAS文档**: [http://www.openvas.org/documentation.html](http://www.openvas.org/documentation.html)'
- en: '**Maltego User Guide**: [https://www.paterva.com/web7/docs/userguides/user_guide.php](https://www.paterva.com/web7/docs/userguides/user_guide.php)'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Maltego用户指南**: [https://www.paterva.com/web7/docs/userguides/user_guide.php](https://www.paterva.com/web7/docs/userguides/user_guide.php)'
