- en: Windows Phone Forensics
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows Phone 取证
- en: Despite the fact that Windows Phones are not so widely used nowadays, they may
    still be encountered during forensic investigations. These devices are the most
    affordable on the market, so understanding how to acquire, analyze, and decode
    data from Windows Phones is important. Locating and interpreting digital evidence
    present on these devices requires specialized knowledge of the Windows Phone operating
    system, and may not always be possible. Commercial forensic and open source tools
    provide limited support for acquiring user data from Windows devices. As Windows
    Phones do not occupy much of the mobile market space, most forensic practitioners
    are unfamiliar with the data formats, embedded databases that are used, and other
    artifacts that exist on the device. This chapter provides an overview of Windows
    Phone forensics, describing various methods of acquiring and examining data on
    Windows mobile devices.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如今 Windows Phone 的使用并不广泛，但在取证调查中仍然可能遇到这些设备。这些设备是市场上最为经济实惠的，因此，了解如何获取、分析和解码
    Windows Phone 上的数据非常重要。定位并解释这些设备上存在的数字证据需要对 Windows Phone 操作系统有专门的了解，而且并非总是可行。商用取证工具和开源工具对从
    Windows 设备中获取用户数据的支持非常有限。由于 Windows Phone 在移动市场中占比不大，大多数取证从业者对其数据格式、嵌入式数据库以及设备上存在的其他证据不太熟悉。本章概述了
    Windows Phone 取证，描述了获取和检查 Windows 移动设备数据的各种方法。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将覆盖以下主题：
- en: Windows Phone OS
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Phone 操作系统
- en: Windows 10 Mobile security model
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 10 Mobile 安全模型
- en: Windows Phone filesystem
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows Phone 文件系统
- en: Data acquisition
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据采集
- en: Commercial forensic tool acquisition methods
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 商用取证工具采集方法
- en: Extracting data without the use of commercial tools
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不使用商用工具的情况下提取数据
- en: Key artifacts for examination
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关键证据项目的检查
- en: Windows Phone OS
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows Phone 操作系统
- en: Windows Phone is a proprietary mobile operating system developed by Microsoft.
    It was launched as a successor to Windows Mobile, but it does not provide backward
    compatibility with the previous platform. Windows Phone was launched in October
    2010 with Windows Phone 7\. The version history of the Windows Phone operating
    system then continued with the release of Windows Phone 7.5, Windows Phone 7.8,
    Windows Phone 8.1, and Windows Phone 10.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 是由微软开发的专有移动操作系统。它作为 Windows Mobile 的继任者推出，但不提供与旧平台的向后兼容性。Windows
    Phone 于2010年10月发布，版本为 Windows Phone 7。此后，Windows Phone 操作系统的版本历史继续推出 Windows Phone
    7.5、Windows Phone 7.8、Windows Phone 8.1 和 Windows Phone 10。
- en: Despite the fact that Microsoft claims they have stopped developing this mobile
    operating system, excluding security patches, you are likely to face it as a mobile
    forensic examiner.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管微软宣称已停止开发这一移动操作系统（不包括安全补丁），但作为移动取证检查员，您仍然可能会遇到它。
- en: The following sections will provide more details about Windows Phone, its features,
    and its underlying security model.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 以下各节将提供更多关于 Windows Phone、其功能及其底层安全模型的详细信息。
- en: 'Unlike Android and iOS devices, Windows Phone comes with a new interface, which
    uses so-called *tiles* for apps instead of icons, as shown in the following image.
    These tiles can be designed and updated by the user:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Android 和 iOS 设备不同，Windows Phone 引入了全新的界面，采用了所谓的*磁贴*（tiles）来代替图标，如下图所示。这些磁贴可以由用户设计和更新：
- en: '![](img/30307387-c6e6-494b-bc37-7c137ded4400.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](img/30307387-c6e6-494b-bc37-7c137ded4400.png)'
- en: The Windows Phone home screen
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 主屏幕
- en: Similar to other mobile platforms, Windows Phone allows for the installation
    of third-party apps. These apps can be downloaded from the Windows Phone Marketplace,
    which is managed by Microsoft. When comparing the number of apps available for
    iOS and Android devices, Windows Phone pales in comparison. However, applications
    are available and you should expect to see them on Windows Phone devices.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于其他移动平台，Windows Phone 允许安装第三方应用。这些应用可以从由微软管理的 Windows Phone 市场下载。与 iOS 和 Android
    设备上的应用数量相比，Windows Phone 显得逊色很多。然而，应用仍然是可用的，您应该在 Windows Phone 设备上看到它们。
- en: 'Windows Phone introduced new features, making it more similar to other smartphones
    compared to Windows Mobile:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 引入了新功能，使其与 Windows Mobile 相比更接近其他智能手机：
- en: '**Cortana**: This is the personal assistant for the device. It was introduced
    in Windows 8.1 and is still present on Windows 10 devices. Cortana aids the user
    by fielding questions using Bing, setting reminders, sending texts, and essentially
    using all the functionality to provide the user with a better and easier experience.
    Everything that Cortana does leaves a trace on the device.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Cortana**：这是设备的个人助手。它首次出现在 Windows 8.1 中，并且在 Windows 10 设备中依然存在。Cortana 通过使用
    Bing 回答问题、设置提醒、发送短信等功能来帮助用户，从而为用户提供更好、更便捷的使用体验。Cortana 做的每一项操作都会在设备上留下痕迹。'
- en: '**Wallet**: This stores credit card accounts, boarding passes, tickets, coupons,
    and more.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**钱包**：这个功能存储信用卡账户、登机牌、票证、优惠券等。'
- en: '**Geofence and advanced location settings**: These provide the user with additional
    protection as the phone can detect when it is out of a trusted zone and may lock
    itself.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地理围栏和高级位置设置**：这些为用户提供额外的保护，因为手机可以检测到何时处于可信区域之外，并可能会自动锁定。'
- en: '**Additional features**: These are features such as live tiles, enhanced colors,
    and quiet hours.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附加功能**：这些功能包括动态磁贴、增强的颜色以及安静时间。'
- en: Other common applications associated with Windows Phone include OneDrive (formerly
    SkyDrive), OneNote, and Office 365 synchronization. OneDrive provides the user
    with access to all of their documents and files from any device. OneNote is essentially
    the same, but it acts as a notebook or diary. Office 365 provides the user with
    constant access to their email, calendar, contacts, and more across multiple devices.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 其他与 Windows Phone 相关的常见应用程序包括 OneDrive（前身为 SkyDrive）、OneNote 和 Office 365 同步。OneDrive
    使用户可以从任何设备访问所有文档和文件。OneNote 本质上是相同的，但它充当笔记本或日记。Office 365 使用户可以在多个设备间持续访问他们的电子邮件、日历、联系人等。
- en: The introduction of data synchronization across multiple devices makes our job
    as forensic examiners difficult. It is our job to determine how the evidence was
    placed on the device. Is it possible to definitively state how an artifact was
    placed on a device? To be honest, this depends. Nobody wants to hear this response,
    but a lot of factors must be considered. What is the app? What OS is running on
    the device? What is the artifact? For example, let's consider OneDrive. If the
    device contains documents from OneDrive, the original author should be contained
    within the metadata. This, together with examining whether or not the content
    was shared with the device, may provide a glimpse into how the artifact was created.
    However, when examining a calendar entry when Office 365 is in place, it may be
    impossible to state whether the user created the entry on their phone, PC, or
    laptop. The synchronization is instantaneous, and status flags stating where the
    artifact was created do not always exist. If this artifact is indeed the *smoking
    gun* of the investigation, you need to apply your skills to uncover other artifacts
    that support your findings. Digging deeper into the data is required. Now that
    we are aware of the details of Windows Phone and its features, let's have a look
    at its security model and see how it keeps the data secure.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 数据同步功能的引入使得我们作为法医检查员的工作变得更加困难。我们的任务是确定证据是如何被放置到设备上的。是否有可能明确地说明一个物品是如何放置到设备上的？坦率地说，这取决于情况。没有人愿意听到这个回答，但确实有很多因素需要考虑。是什么应用程序？设备上运行的是什么操作系统？这个物品是什么？例如，让我们考虑一下
    OneDrive。如果设备中包含来自 OneDrive 的文档，原始作者应当包含在元数据中。结合检查内容是否与设备共享，可能会揭示出这个物品是如何创建的。然而，在检查日历条目时，如果设备上安装了
    Office 365，可能无法确定用户是在手机、PC 还是笔记本上创建了该条目。同步是即时的，并且表示物品创建位置的状态标志并不总是存在。如果这个物品确实是调查中的*致命证据*，你需要运用你的技能来发现支持你结论的其他物品。需要深入挖掘数据。现在我们已经了解了
    Windows Phone 的细节和特点，接下来我们来看看它的安全模型，看看它是如何保持数据安全的。
- en: Windows 10 Mobile security model
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows 10 Mobile 安全模型
- en: The security model of Windows Phone is designed to make sure that the user data
    present on the device is safe and secure. The following sections provide a brief
    explanation of the concepts that Windows Phone security is built on.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 的安全模型旨在确保设备上的用户数据安全可靠。以下部分简要介绍了 Windows Phone 安全模型所基于的概念。
- en: Chambers
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Chambers
- en: 'Windows Phone is heavily built on the principles of least privilege and isolation.
    This has been consistent since the inception of Windows Phone 7\. To achieve this,
    Windows Phone introduced the concept of **chambers**. Each chamber has an isolation
    boundary where processes can run. Depending on the security policy of a specific
    chamber, a process running in this chamber has the privilege of accessing the
    OS''s resources and capabilities ([https://www.msec.be/mobcom/ws2013/presentations/david_hernie.pdf](https://www.msec.be/mobcom/ws2013/presentations/david_hernie.pdf)).
    There are four types of security chambers. The following is a brief description
    of each of them:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 在最小权限和隔离的原则基础上构建。这一原则自 Windows Phone 7 开始便得到贯彻。为实现这一目标，Windows
    Phone 引入了**区域**的概念。每个区域都有一个隔离边界，进程可以在其中运行。根据特定区域的安全策略，运行在该区域的进程拥有访问操作系统资源和功能的特权（[https://www.msec.be/mobcom/ws2013/presentations/david_hernie.pdf](https://www.msec.be/mobcom/ws2013/presentations/david_hernie.pdf)）。安全区域共有四种类型。以下是每种类型的简要描述：
- en: '**Trusted Computing Base** (**TCB**): The processes here have unrestricted
    access to most Windows Phone resources. This chamber has privileges to modify
    policies and enforce the security model. The kernel runs in this chamber.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可信计算基（TCB）**：此进程拥有对大多数 Windows Phone 资源的无限制访问权限。该区域拥有修改策略和强制执行安全模型的特权。内核在此区域运行。'
- en: '**Elevated Rights Chamber** (**ERC**): This chamber is less privileged than
    the TCB chamber. It has privileges to access all resources except the security
    policy. This chamber is mainly used for services and user-mode drivers, which
    provide functionality intended for use by other applications on the phone.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提升权限区域（ERC）**：此区域的权限低于 TCB 区域。它拥有访问所有资源的特权，除了安全策略外。此区域主要用于提供其他应用程序功能的服务和用户模式驱动程序。'
- en: '**Standard Rights Chamber** (**SRC**): This is the default chamber for preinstalled
    applications, such as Microsoft Outlook Mobile 2010.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准权限区域（SRC）**：这是预装应用程序的默认区域，例如 Microsoft Outlook Mobile 2010。'
- en: '**Least Privileged Chamber** (**LPC**): This is the default chamber for all
    the applications that are downloaded and installed through the Marketplace Hub
    (which is also known as the Windows Phone Marketplace).'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最小权限区域（LPC）**：这是通过 Marketplace Hub（也称为 Windows Phone Marketplace）下载和安装的所有应用程序的默认区域。'
- en: Next, we will be looking at encryption.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将讨论加密。
- en: Encryption
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 加密
- en: Windows Phone 8 introduced BitLocker technology to encrypt all user data that
    is stored on the device via AES 128-bit encryption. The user can simply flip the
    switch to enable this feature, and all of their data residing on the internal
    storage of the device will be encrypted. In addition, the user can encrypt their
    SD card – assuming the device has one – and set a password or PIN on their device.
    Should all of these locks and the encryption be enabled, accessing the data on
    this device may be impossible, unless the password is recovered.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 8 引入了 BitLocker 技术，通过 AES 128 位加密加密设备上存储的所有用户数据。用户只需轻轻一 flip 开关即可启用此功能，设备上存储的所有数据将被加密。此外，用户还可以加密他们的
    SD 卡（假设设备有 SD 卡），并为其设备设置密码或 PIN。如果启用了所有这些锁定和加密，除非密码被恢复，否则访问此设备上的数据几乎是不可能的。
- en: Capability-based model
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于能力的模型
- en: Capabilities are defined as the resources on the phone (camera, location information,
    microphone, and more) associated with security, privacy, and cost. The LPC has
    a minimal set of access rights by default. However, this can be expanded by requesting
    more capabilities during the installation. Capabilities are granted during the
    app's installation and cannot be modified or elevated during runtime. For this
    reason, it is difficult to side-load applications or force custom boot code to
    the device to gain forensic access, as it is normally rejected prior to bootup.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 能力被定义为与安全性、隐私和成本相关的设备资源（如相机、位置信息、麦克风等）。LPC 默认具有一组最小的访问权限。然而，在安装过程中可以通过请求更多能力来扩展此权限。能力是在应用程序安装过程中授予的，且在运行时不能修改或提升。因此，通常很难通过侧加载应用程序或强制自定义启动代码来获得取证访问权限，因为这通常在启动前会被拒绝。
- en: 'To install an app on a Windows Phone, you need to sign in to the Marketplace
    with a Windows Live ID. During installation, apps are required to ask the user
    for permission before using certain capabilities, an example of which is shown
    in the following screenshot:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Windows Phone 上安装应用，你需要使用 Windows Live ID 登录到 Marketplace。在安装过程中，应用会要求用户在使用某些功能之前先获得许可，以下截图展示了一个例子：
- en: '![](img/6388ff6d-7573-4960-9835-8206c6a585b0.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6388ff6d-7573-4960-9835-8206c6a585b0.png)'
- en: Windows app requesting user permissions (https://i-msdn.sec.s-msft.com/dynimg/IC752370.png)
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 应用请求用户权限（https://i-msdn.sec.s-msft.com/dynimg/IC752370.png)
- en: This is similar to the permission model in Android. This gives the user the
    freedom to learn about all the capabilities that an application has before installing
    the application. The list of all capabilities is included in the `WMAppManifest.xml`
    application manifest file, which can be accessed through Visual Studio or other
    methods that are defined at [https://docs.microsoft.com/en-us/previous-versions/windows/apps/ff769509(v=vs.105)](https://docs.microsoft.com/en-us/previous-versions/windows/apps/ff769509(v=vs.105)).
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 这与 Android 中的权限模型类似。它让用户在安装应用之前，可以自由了解应用的所有功能。所有功能的列表包含在`WMAppManifest.xml`应用清单文件中，用户可以通过
    Visual Studio 或其他在[https://docs.microsoft.com/en-us/previous-versions/windows/apps/ff769509(v=vs.105)](https://docs.microsoft.com/en-us/previous-versions/windows/apps/ff769509(v=vs.105))定义的方法访问该文件。
- en: App sandboxing
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用沙箱
- en: Apps in Windows Phone run in a sandboxed environment. This means every application
    on Windows Phone runs in its own chamber. Applications are isolated from each
    other and cannot access the data of other applications. If any app needs to save
    information to the device, it can do so using the isolated storage, which is restricted
    from access by other applications. Also, the third-party applications installed
    on Windows Phone cannot run in the background; that is, when the user switches
    to a different application, the previously used application is shut down (although
    the application state is preserved). This ensures that the application cannot
    perform activities such as communicating over the internet when the user is not
    using the application. These restrictions also make Windows Phone less susceptible
    to malware, but you should never assume that any device is safe. It is just more
    challenging for malware to function on these devices.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 上的应用在沙箱环境中运行。这意味着每个应用在 Windows Phone 上都运行在自己的“房间”中。应用程序彼此隔离，无法访问其他应用的数据。如果某个应用需要将信息保存到设备上，它可以通过隔离存储来实现，而此存储不能被其他应用访问。此外，安装在
    Windows Phone 上的第三方应用不能在后台运行；也就是说，当用户切换到另一个应用时，之前使用的应用会被关闭（尽管应用状态会被保留）。这确保了应用在用户不使用时不能进行例如互联网通信等活动。这些限制也使
    Windows Phone 更不容易受到恶意软件的侵害，但你永远不应假设任何设备都是完全安全的。恶意软件在这些设备上运行会更具挑战性。
- en: So far, we have had a look at the four types of security chambers and we now
    know that Windows Phone 8 uses BitLocker technology for encryption. We have learned
    about the different capabilities granted during the installation of an application
    and saw how every application is isolated from each other. Next, we'll look at
    an important aspect of Windows Phones, which is its filesystem.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经看过四种安全沙箱，现已知 Windows Phone 8 使用 BitLocker 技术进行加密。我们了解了在安装应用时授予的不同功能，并看到了每个应用是如何相互隔离的。接下来，我们将讨论
    Windows Phone 的一个重要方面，即其文件系统。
- en: Windows Phone filesystem
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows Phone 文件系统
- en: 'The Windows Phone filesystem is more or less similar to the filesystems used
    in Windows 7, Windows 8, and Windows 10\. From the root directory, you can reach
    different files and folders that are available on this device. From a forensic
    perspective, the following are some of the folders that can yield valuable data.
    All the listed directories are located in the root directory:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 文件系统或多或少与 Windows 7、Windows 8 和 Windows 10 中使用的文件系统相似。从根目录开始，你可以访问设备上的不同文件和文件夹。从取证的角度来看，以下是一些可以提供有价值数据的文件夹。所有列出的目录都位于根目录中：
- en: '**Application data**: This directory contains data of applications on the phone,
    such as Outlook, Maps, and Internet Explorer.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用数据**：此目录包含手机上应用的数据，如 Outlook、地图和 Internet Explorer。'
- en: '**Applications**: This directory contains the apps installed by the user. The
    isolated storage, which is allocated or used by each app, is also located in this
    folder.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用程序**：此目录包含用户安装的应用。每个应用分配或使用的隔离存储也位于此文件夹中。'
- en: '**My Documents**: This directory holds different Office documents, such as
    Word, Excel, or PowerPoint files. The directory also includes configuration files
    and multimedia files, such as music or videos.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**我的文档**：此目录包含不同的 Office 文档，例如 Word、Excel 或 PowerPoint 文件。该目录还包括配置文件和多媒体文件，如音乐或视频。'
- en: '**Windows**: This directory contains files that are related to the Windows
    Phone operating system.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows**：此目录包含与 Windows Phone 操作系统相关的文件。'
- en: 'The acquisition method used here will determine the amount of filesystem access
    that you have to the device. For example, a physical image may provide access
    to several partitions that can be recovered from the data dump. A Windows Phone
    10 device that contains 27 partitions can be seen in the following screenshot.
    Partitions 26 (MainOS) and 27 (Data) contain the relevant data:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 这里使用的获取方法将决定你对设备的文件系统访问权限。例如，物理映像可能会提供访问多个分区的权限，这些分区可以从数据转储中恢复。下面的屏幕截图显示了一台包含
    27 个分区的 Windows Phone 10 设备。第 26 个分区（MainOS）和第 27 个分区（Data）包含相关数据：
- en: '![](img/a01679b0-da6d-490a-bd0e-28a6a3ac4dda.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a01679b0-da6d-490a-bd0e-28a6a3ac4dda.png)'
- en: Windows Phone 10 partitions
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 10 分区
- en: While most artifacts will exist in the Data partition, it is always best practice
    to capture and analyze both when possible.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然大多数证据会存在于数据分区中，但最佳实践是尽可能同时捕获并分析两个分区。
- en: The MainOS partition in the preceding screenshot, partition 26, contains the
    system data from the Windows Phone. As in all Windows investigations, the system
    data contains artifacts relevant to investigations.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 上面屏幕截图中的 MainOS 分区（第 26 个分区）包含来自 Windows Phone 的系统数据。与所有 Windows 调查一样，系统数据包含与调查相关的证据。
- en: 'In this example, partition 27 contains the User or Data partition. Depending
    on the device, the partition numbers may vary. In our example, the Data partition
    is shown in the following screenshot as partition 27\. Here, the SMS, email, application
    data, contacts, call logs, and internet history were recovered using mobile forensic
    tools. These methods will be discussed later in this chapter:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在此示例中，第 27 个分区包含用户或数据分区。根据设备的不同，分区编号可能会有所不同。在我们的示例中，数据分区显示为第 27 个分区，如下图所示。在这里，使用移动取证工具恢复了
    SMS、电子邮件、应用数据、联系人、通话记录和互联网历史。这些方法将在本章后面进行讨论：
- en: '![](img/8ab48656-e301-4baf-90a0-571f40175c3c.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ab48656-e301-4baf-90a0-571f40175c3c.png)'
- en: Windows Phone 10 Data partition
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 10 数据分区
- en: Windows Phone also maintains the **Windows registry**, a database that stores
    environment variables on the operating system. The Windows registry is basically
    a directory that stores settings and options for the Microsoft operating system.
    Windows Phone is no different. When examining a Windows Phone, you will expect
    to see the `NTUSER.dat`, `SAM`, `SYSTEM`, `SOFTWARE`, `SECURITY`, and `DEFAULT`
    hives. While these hives may be unique to the phone, they can be examined just
    like traditional Windows registry hives.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 还维护着 **Windows 注册表**，这是一个存储操作系统环境变量的数据库。Windows 注册表本质上是一个目录，用于存储
    Microsoft 操作系统的设置和选项，Windows Phone 也不例外。在检查 Windows Phone 时，你会看到 `NTUSER.dat`、`SAM`、`SYSTEM`、`SOFTWARE`、`SECURITY`
    和 `DEFAULT` 注册表区。尽管这些注册表区可能是手机特有的，但它们可以像传统 Windows 注册表区一样进行检查。
- en: A detailed case investigation is included in a paper by Cynthia Murphy. This
    involves a criminal case of a home invasion and sexual assault and details the
    efforts of great minds in the forensic community to uncover artifacts that assisted
    in closing the investigation. Sometimes, the mobile device is the most important
    artifact pertaining to the case. For more information, please refer to [https://www.sans.org/reading-room/whitepapers/forensics/windows-phone-8-forensic-artifacts-35787](https://www.sans.org/reading-room/whitepapers/forensics/windows-phone-8-forensic-artifacts-35787).
    Now that we have looked at the file and folder structure, let's learn how to acquire
    data using this knowledge.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Cynthia Murphy 的论文中包含了一个详细的案例调查。这涉及到一起家庭入侵和性侵犯罪案件，并详细描述了取证界的杰出人士如何努力发现有助于解决调查的证据。有时，移动设备是与案件相关的最重要证据。欲了解更多信息，请参考
    [https://www.sans.org/reading-room/whitepapers/forensics/windows-phone-8-forensic-artifacts-35787](https://www.sans.org/reading-room/whitepapers/forensics/windows-phone-8-forensic-artifacts-35787)。现在我们已经了解了文件和文件夹结构，接下来我们将学习如何利用这些知识进行数据获取。
- en: Data acquisition
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据获取
- en: Acquiring data from a Windows Phone is challenging for forensic examiners, as
    the physical, filesystem, and logical methods that were defined in previous chapters
    are not greatly supported. In addition to this, the phone may need to be at a
    specific battery charge state (%) in order for the commercial tool to recognize
    and acquire the device. This is often one of the most difficult steps in acquiring
    Windows Phones.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 从Windows Phone采集数据对于法医检查人员来说是具有挑战性的，因为前几章中定义的物理、文件系统和逻辑方法并不得到广泛支持。除此之外，手机可能需要在特定的电池电量（%）状态下，商业工具才能识别并采集该设备。这通常是采集Windows
    Phone过程中最难的步骤之一。
- en: One of the most common techniques that's implemented by commercial tools attempting
    data acquisition is to install an application or agent on the device, which enables
    two-way communication for commands to be sent to the device in order to extract
    data. This could result in certain changes on the device; nevertheless, this is
    still forensically sound if the examiner follows standard protocols and has tested
    the validity of the tool being used. These protocols include proper testing to
    ensure no user data is changed (and if changed, documenting what occurred), validation
    of the method on a test device, and documenting all steps taken during the acquisition
    process. For this acquisition method to work, the app needs to be installed with
    the privileges of the SRC. This may require you to copy the manufacturer's DLLs,
    which have higher privileges, into the user app. This allows the app to access
    methods and resources that are usually limited to native apps. In addition to
    this, the device must be unlocked, or these methods may not work.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 商业工具在进行数据采集时常用的一种技术是安装一个应用程序或代理在设备上，从而实现双向通信，以便将命令发送到设备以提取数据。这可能会导致设备上某些变化；然而，只要检查人员遵循标准协议并验证所用工具的有效性，这种方法仍然是法医上可行的。这些协议包括适当的测试，确保用户数据未被更改（如果更改了，则记录所发生的情况）、在测试设备上验证方法，并记录采集过程中所采取的所有步骤。为了使这种采集方法有效，应用程序需要以SRC的权限进行安装。这可能需要你将制造商的DLL文件（具有更高权限）复制到用户应用中。这使得应用程序能够访问通常仅限于本地应用的方法和资源。此外，设备必须解锁，否则这些方法可能无法工作。
- en: Most examiners rely on forensic tools and methods to acquire mobile devices.
    Again, these practices are not as supported for Windows Phones. Keep in mind that
    to deploy and run an app on Windows Phone, both the device and the developer must
    be registered and unlocked by Microsoft. This restriction can be bypassed by unlocking
    the device using a public jailbreak for Windows Phone 8 to 10 devices.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数检查人员依赖法医工具和方法来采集移动设备数据。同样，这些方法在Windows Phone上的支持并不多。请记住，要在Windows Phone上部署并运行应用程序，设备和开发者必须都经过微软注册并解锁。这个限制可以通过使用Windows
    Phone 8至10设备的公共越狱来绕过。
- en: 'For quite a long time, JTAG and chip-off acquisitions were the only options
    to acquire most Windows Phones. Everything changed in January 2015: Cellebrite implemented
    an acquisition module that allowed mobile forensic examiners to extract data at
    the physical level from most Lumia devices.'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 长期以来，JTAG和芯片拆卸采集是获取大多数Windows Phone数据的唯一选择。2015年1月，一切发生了变化：Cellebrite实施了一个采集模块，使得移动法医检查人员能够从大多数Lumia设备的物理层提取数据。
- en: Later, the Windows Phone Internals project presented a way to unlock the bootloader
    of some Lumia devices, including 520, 521, 525, 620, 625, 720, 820, 920, 925,
    928, 1020, and 1320\. This made the physical acquisition of these devices possible.
    You can learn more about this project at [https://www.wpinternals.net/](https://www.wpinternals.net/).
    Now, we will look at some of the commercial tools that are used for acquisition
    methods.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 后来，Windows Phone Internals项目提供了一种方法，可以解锁某些Lumia设备的启动加载程序，包括520、521、525、620、625、720、820、920、925、928、1020和1320。这使得对这些设备的物理采集成为可能。你可以在[https://www.wpinternals.net/](https://www.wpinternals.net/)了解更多关于该项目的信息。现在，我们将看看一些用于采集方法的商业工具。
- en: Commercial forensic tool acquisition methods
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 商业法医工具采集方法
- en: 'There are a few commercial tools available that offer support for the acquisition
    of Windows Phone devices. Cellebrite UFED offers support to acquire Windows Phone
    devices using the physical, filesystem, and logical methods. To determine whether
    the device you are examining is supported by the tool, you can download and use
    the UFED Phone Detective mobile app, which is available for free both in App Store
    and Google Play:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 有一些商业工具可以支持Windows Phone设备的获取。Cellebrite UFED支持使用物理、文件系统和逻辑方法获取Windows Phone设备。要确定你正在检查的设备是否被工具支持，可以下载并使用UFED
    Phone Detective移动应用程序，该应用程序在App Store和Google Play上均可免费下载：
- en: '![](img/0c518b6b-1d90-4e67-9b2e-423447d8881a.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0c518b6b-1d90-4e67-9b2e-423447d8881a.png)'
- en: Searching for supported Lumia devices
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 正在搜索支持的Lumia设备
- en: Some of these acquisition methods are more robust, obtain a full physical dump
    of the data, and can bypass some lock codes on specific devices. However, some
    device support includes simply extracting contacts and pictures from the device.
    It is important for the examiner to realize that specific steps must be taken,
    as directed by the tool. Acquiring these devices is not easy, and often, you will
    find that the tool will not be successful.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 这些获取方法中，有些更为强大，能够获取完整的物理数据并绕过某些设备的锁码。然而，一些设备的支持仅限于提取设备中的联系人和照片。重要的是，检查员需要意识到，必须按照工具的指示采取特定步骤。获取这些设备并不容易，通常你会发现工具无法成功完成操作。
- en: 'When the tool seems to fail, attempt to acquire the device using the Smartphone/PDA
    option offered in UFED. To do this, follow these steps:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 当工具似乎失败时，尝试使用UFED提供的智能手机/PDA选项来获取设备。为此，请按照以下步骤操作：
- en: Launch UFED4PC and select Mobile Device.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动UFED4PC并选择移动设备。
- en: Select Browse Manually.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择手动浏览。
- en: Select Smartphones.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择智能手机。
- en: Select the Windows device that you are attempting to acquire.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你正在尝试获取的Windows设备。
- en: 'Try all the methods that are offered, starting with physical, filesystem, and logical (in
    that order, where possible):'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尝试所有提供的方法，顺序是：物理、文件系统和逻辑（在可能的情况下，按此顺序进行）：
- en: '![](img/c8f9e1fd-4654-4dc2-a8a7-06834b499f67.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c8f9e1fd-4654-4dc2-a8a7-06834b499f67.png)'
- en: Extraction methods
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 提取方法
- en: Follow all the remaining steps and try all offered acquisition methods until
    you're successful.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照所有剩余的步骤操作，并尝试所有提供的获取方法，直到成功为止。
- en: 'Cellebrite may alert you that the acquisition is not successful for several
    reasons. When this occurs, try every option to ensure you have exhausted the commercial
    options available. An example of an acquisition attempt in UFED4PC is as follows:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: Cellebrite可能会提醒你获取不成功，原因有多种。当这种情况发生时，尝试所有选项，确保已经尝试过所有可用的商业选项。以下是一个在UFED4PC中尝试获取设备的例子：
- en: Launch UFED4PC.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动UFED4PC。
- en: Select your Make and Model for the device.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你的设备的制造商和型号。
- en: Select the Physical, File System, or Logical acquisition method (offerings will
    vary, depending on the device model).
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择物理、文件系统或逻辑获取方法（提供的选项会根据设备型号不同而有所变化）。
- en: 'In this example, only Logical acquisition was supported. Two methods are available.
    The first option uses a cable, while the second uses Bluetooth. In this example,
    a special UFED cable is required. I selected the UFED cable first, as Bluetooth
    requires that additional changes are made to the phone during pairing:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个例子中，只有**逻辑获取**是支持的。提供了两种方法。第一种方法使用电缆，第二种方法使用蓝牙。在这个例子中，要求使用专用的UFED电缆。我首先选择了UFED电缆，因为蓝牙需要在配对过程中对手机进行额外的更改：
- en: '![](img/058b870d-c35c-4c72-b1c8-d1fe7c5ffad6.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/058b870d-c35c-4c72-b1c8-d1fe7c5ffad6.png)'
- en: UFED4PC Logical extraction options
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: UFED4PC逻辑提取选项
- en: When attempting to acquire the device with USB cable 100, only multimedia files
    were accessible.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试使用USB电缆100获取设备时，只能访问多媒体文件。
- en: 'Then, attempt the same acquisition, but select Bluetooth. Follow the instructions
    given to pair the device with the forensic workstation:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，尝试相同的获取方法，但选择蓝牙。按照给定的说明将设备与取证工作站配对：
- en: '![](img/86aa9cb4-5540-4ae2-b569-bbde218e48e4.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](img/86aa9cb4-5540-4ae2-b569-bbde218e48e4.png)'
- en: UFED4PC extraction options (Bluetooth)
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: UFED4PC提取选项（蓝牙）
- en: With this acquisition method, we were able to obtain contacts. Note that there
    are no methods offered to obtain SMS, MMS, Email, IM, Calendar, Call Logs, Apps
    Data, and others. It is suggested you repeat the generic methods listed in the
    previous screenshot using the Smartphone option in UFED4PC. So far, we have looked
    at some acquisition methods using commercial tools. Now, let's learn how to extract
    data without these tools.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这种获取方法，我们能够获取到联系人。请注意，目前没有提供获取短信、彩信、电子邮件、即时消息、日历、通话记录、应用数据等的方法。建议你重复前一截图中列出的通用方法，使用UFED4PC中的智能手机选项。到目前为止，我们已经看过了一些使用商业工具的获取方法。现在，让我们学习如何在没有这些工具的情况下提取数据。
- en: Extracting data without the use of commercial tools
  id: totrans-93
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在没有商业工具的情况下提取数据
- en: In some cases, the physical acquisition of Windows Phone devices is possible
    only with advance methods, such as JTAG and chip-off. But thanks to the security
    researcher known as Heathcliff, it became possible to perform physical acquisition
    on limited phone models and operating system versions with his tool called **WPinternals**
    ([https://www.wpinternals.net](https://www.wpinternals.net)).
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在某些情况下，获取Windows Phone设备的物理数据仅能通过提前的方法，例如JTAG和芯片移除。但得益于名为Heathcliff的安全研究人员，使用他名为**WPinternals**的工具，现在可以在有限的手机型号和操作系统版本上进行物理获取，具体可以参见[https://www.wpinternals.net](https://www.wpinternals.net)。
- en: The tool supports the following models of Lumia phones: 520, 521, 525, 620,
    625, 720, 820, 920, 925, 928, 1020, and 1320.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具支持以下Lumia手机型号：520、521、525、620、625、720、820、920、925、928、1020和1320。
- en: 'As for operating system versions, the following are supported:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 关于操作系统版本，支持以下版本：
- en: 8.10.12393.890
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.12393.890
- en: 8.10.12397.895
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.12397.895
- en: 8.10.14219.341
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.14219.341
- en: 8.10.14226.359
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.14226.359
- en: 8.10.14234.375
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.14234.375
- en: 8.10.15116.125
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.15116.125
- en: 8.10.15148.160
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 8.10.15148.160
- en: 10.0.10512.1000
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10512.1000
- en: 10.0.10536.1004
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10536.1004
- en: 10.0.10549.4
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10549.4
- en: 10.0.10581.0
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10581.0
- en: 10.0.10586.11
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10586.11
- en: 10.0.10586.36
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 10.0.10586.36
- en: This method is experimental and can result in bricking the device! Despite the
    fact that the percentage of bricked devices is relatively low, we recommend that
    you use it as the last option.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这种方法是实验性的，可能会导致设备变砖！尽管设备变砖的几率相对较低，我们建议你将其作为最后的选择。
- en: 'The first step of the acquisition process will be downloading a Windows **Full
    Flash Update** (**FFU**) file and the emergency files for the phone model you
    are working with:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 获取过程的第一步将是下载一个Windows **全闪存更新**（**FFU**）文件和你正在使用的手机型号的紧急文件：
- en: '![](img/ff5e0e81-4983-4820-b428-b3f1b3d359fe.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ff5e0e81-4983-4820-b428-b3f1b3d359fe.png)'
- en: Downloading FFU files
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 下载FFU文件
- en: 'If the downloaded FFU contains an unsupported OS version, then WPinternals
    will download another FFU to get additional files:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 如果下载的FFU包含不支持的操作系统版本，WPinternals将下载另一个FFU以获取附加文件：
- en: '![](img/ad900e87-1dea-44bb-b857-fbff8d783cbe.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ad900e87-1dea-44bb-b857-fbff8d783cbe.png)'
- en: Getting additional files
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 获取附加文件
- en: 'During the unlocking process, the phone may reboot a couple of times, but this
    is a normal behavior:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在解锁过程中，手机可能会重启几次，但这是正常的行为：
- en: '![](img/7bd259e5-00c5-4a16-9ea6-0f7d0e02dcd7.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7bd259e5-00c5-4a16-9ea6-0f7d0e02dcd7.png)'
- en: Scanning for flashing profile
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描闪存配置文件
- en: 'Once the profile has been found, the tool flashes the unlocked bootloader:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦找到配置文件，工具就会闪存解锁的引导加载程序：
- en: '![](img/36b643c3-1685-4568-96bf-60c00b16d9d1.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/36b643c3-1685-4568-96bf-60c00b16d9d1.png)'
- en: Flashing unlocked bootloader
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 闪存解锁的引导加载程序
- en: 'If the device has been flashed successfully, it''s put into Mass Storage Mode:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 如果设备已成功闪存，它会进入大容量存储模式：
- en: '![](img/42157d86-6bf8-4568-9f3d-6c75b7914264.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42157d86-6bf8-4568-9f3d-6c75b7914264.png)'
- en: Mass Storage Mode
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 大容量存储模式
- en: 'Now, the device can be easily imaged, for example, using FTK Imager:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，设备可以轻松成像，例如，使用FTK Imager：
- en: '![](img/1c68cc41-109e-4d66-9cf0-cae5447b6f84.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c68cc41-109e-4d66-9cf0-cae5447b6f84.png)'
- en: Windows Phone in FTK Imager
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: FTK Imager中的Windows Phone
- en: Now, we will learn how to extract data from SD cards.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将学习如何从SD卡提取数据。
- en: SD card data extraction methods
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SD卡数据提取方法
- en: Windows Phones may contain removable SD cards. These cards may be secured with
    a key that prevents the SD card from being removed and used, or accessed via other
    devices (phones, cameras, computers, and more). This is different from the key
    that is created if the user encrypts the SD card. Brute-force and dictionary attacks
    can be run on user-encrypted SD cards in an attempt to access the data. When examining
    a Windows Phone, it is best to research the device to see whether SD card security
    will be a factor when acquiring data from the device. If so, simply follow the
    preceding steps and acquire the SD card data through the phone during forensic
    extraction. Please refer to the following chart.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: Windows手机可能包含可拆卸的SD卡。这些卡可能会通过密钥进行保护，防止SD卡被拆卸并使用，或通过其他设备（手机、相机、电脑等）访问。这与用户加密SD卡时创建的密钥不同。可以对用户加密的SD卡进行暴力破解和字典攻击，以尝试访问数据。在检查Windows手机时，最好研究设备，看看在获取设备数据时，SD卡的安全性是否会成为一个因素。如果是这样，只需按照前面的步骤操作，通过手机在取证提取过程中获取SD卡数据。请参阅以下图表。
- en: 'For devices where the SD card can be removed, you have two scenarios to consider.
    If the device is on, should you acquire the phone and the SD card as is? If the
    device is off, should you remove the SD card and acquire the device using FTK
    Imager? The answer is, it depends. In forensics, we use this statement frequently,
    but it remains true. If you leave the device on, it must be isolated from the
    network to ensure that it is not remotely accessed and immediately acquired, or
    the battery will drain and, ultimately, the device may power down. If the device
    is off and you remove the SD card, you must ensure that the card remains tied
    to the device itself and is acquired both externally and internally to ensure
    all data is captured. In a normal situation, the following chart suggests the
    recommended steps to handle SD cards that are found in Windows Phones:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 对于SD卡可以移除的设备，你需要考虑两种情况。如果设备已开机，你是否应该按原样获取手机和SD卡的数据？如果设备已关机，你是否应该移除SD卡并使用FTK
    Imager获取设备数据？答案是，视情况而定。在取证中，我们经常使用这个说法，但它依然成立。如果你保持设备开机，它必须与网络隔离，以确保不会被远程访问并立即获取，否则电池会耗尽，设备最终可能会关机。如果设备关机并且你移除了SD卡，你必须确保卡片仍然与设备本身绑定，并从外部和内部同时获取数据，以确保捕获所有数据。在正常情况下，以下图表建议了处理Windows手机中SD卡的推荐步骤：
- en: '![](img/a683ede6-7db3-46bc-8ebe-be72342bf9a0.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a683ede6-7db3-46bc-8ebe-be72342bf9a0.png)'
- en: Most commercial forensic tools will offer to extract data from SD cards. Often,
    the phone extraction process will only extract data residing on the SD card. This
    is often the case when there is no support for a specific Windows Phone. If the
    SD card is not recognized by the tool and the data is not extracted, it is likely
    that the SD card has been encrypted by the user, and the password for the device
    is different from the password for the SD card. When this occurs, try to crack
    the passcode and reacquire the device. Note that cracking a passcode on an SD
    card may not always be possible, but it's worth a shot trying brute-force and
    dictionary attacks as you would on a standard hard drive or external device.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数商业取证工具都会提供从SD卡提取数据的功能。通常，手机提取过程仅会提取存储在SD卡上的数据。当没有针对特定Windows手机的支持时，通常会发生这种情况。如果工具无法识别SD卡且数据无法提取，很可能是因为SD卡已经被用户加密，并且设备的密码与SD卡的密码不同。遇到这种情况时，尝试破解密码并重新获取设备。请注意，破解SD卡的密码并不总是可能的，但尝试暴力破解和字典攻击就像对待标准硬盘或外部设备一样，仍然值得一试。
- en: 'When acquiring an SD that has been removed from a Windows Phone, FTK Imager
    is a free and reliable option to create a forensically sound image that can be
    examined in a variety of tools. To create an SD card image, follow these steps:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在获取从Windows手机移除的SD卡时，FTK Imager是一个免费的可靠选项，可以创建一个具有法证完整性的映像，供多种工具进行检查。要创建SD卡映像，请按照以下步骤操作：
- en: Remove the SD card from the device and make sure to document all identifiers
    on the card and the phone to ensure that they are not permanently separated.
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从设备中取出SD卡，并确保记录卡片和手机上的所有标识符，以确保它们不会永久分离。
- en: Insert the SD card into a *write blocker* and insert this into your forensic
    workstation.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将SD卡插入*写保护器*，并将其插入你的取证工作站。
- en: Launch FTK Imager.
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动FTK Imager。
- en: Select File and then Create Disk Image.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择文件，然后点击创建磁盘映像。
- en: 'Select Physical Drive:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择物理驱动器：
- en: '![](img/a0ffba80-5198-4663-912b-95e2451d7974.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a0ffba80-5198-4663-912b-95e2451d7974.png)'
- en: FTK Imager – creating a disk image
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: FTK Imager – 创建磁盘映像
- en: Use the drop-down list to select the correct device.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用下拉列表选择正确的设备。
- en: Look at the make and size to ensure that you are acquiring the correct device.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 查看设备的型号和大小，确保获取的是正确的设备。
- en: Select Finish.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择完成。
- en: 'Click on Add and select the image type. For this example, Raw (dd) is going
    to be used as it is supported by most commercial and open source methods for analysis:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击添加并选择镜像类型。在此示例中，将使用Raw (dd)格式，因为它支持大多数商业和开源分析方法：
- en: '![](img/319b8ac8-354e-41c4-b157-bf1a92f66710.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/319b8ac8-354e-41c4-b157-bf1a92f66710.png)'
- en: FTK Imager – selecting the image type
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: FTK Imager – 选择镜像类型
- en: Enter the relevant case information and select Next. This can be skipped.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入相关案件信息并选择下一步。此步骤可以跳过。
- en: 'Select the image destination:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择图片保存位置：
- en: '![](img/2a3360e3-c59a-4fe0-b0c8-94c51a73c683.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2a3360e3-c59a-4fe0-b0c8-94c51a73c683.png)'
- en: FTK Imager – saving your image file
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: FTK Imager – 保存您的镜像文件
- en: Select Finish and then select Start. It is recommended that you verify images
    after they are created.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择完成，然后选择开始。建议在创建镜像后验证其内容。
- en: Once complete, your results will be displayed. We will cover analyzing the SD
    card data in the following sections.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，您的结果将显示出来。接下来的部分我们将介绍如何分析SD卡数据。
- en: Key artifacts for examination
  id: totrans-155
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关键取证数据供检查
- en: In this section, we are going to introduce you to the location of some of the
    most common Windows Phone forensic artifacts, including contacts, SMS, and call
    and internet history.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将向您介绍一些最常见的Windows Phone取证数据的位置，包括联系人、短信、通话和互联网历史记录。
- en: Extracting contacts and SMS
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 提取联系人和短信
- en: 'All the contacts and incoming and outgoing short messages (SMS) in Windows
    Phone 7–10 are stored in the file named `store.vol`, which is present under the
    `\Application Data\Microsoft\Outlook\Stores\DeviceStore` (Windows 7) and `Users\WPCOMMSERVICES\APPDATA\Local\Unistore`
    (Windows 8-10) directories. An example of a Windows 10 `store.vol` file can be
    seen in the following screenshot:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 7到10中的所有联系人以及收发短信（SMS）都存储在名为`store.vol`的文件中，该文件位于` \Application
    Data\Microsoft\Outlook\Stores\DeviceStore`（Windows 7）和`Users\WPCOMMSERVICES\APPDATA\Local\Unistore`（Windows
    8-10）目录下。以下是Windows 10中`store.vol`文件的示例：
- en: '![](img/b5ef37dd-b901-4512-b392-55589c92358d.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b5ef37dd-b901-4512-b392-55589c92358d.png)'
- en: The store.vol file in a Windows Phone
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone中的store.vol文件
- en: Now, let's learn how to extract the call history.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们学习如何提取通话历史。
- en: Extracting call history
  id: totrans-162
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 提取通话历史
- en: 'Call history data can currently be extracted from the `Phone` file. It''s important
    to note that the file doesn''t have an extension and is located at `\Users\WPCOMMSERVICES\APPDATA\
    Local\UserData\`. Here is an example of a Windows 10 `Phone` file:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 通话历史数据目前可以从`Phone`文件中提取。需要注意的是，该文件没有扩展名，并且位于`\Users\WPCOMMSERVICES\APPDATA\Local\UserData\`。以下是Windows
    10中`Phone`文件的示例：
- en: '![](img/1e0ffaf3-2aab-4097-865f-e3d3da9ff186.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1e0ffaf3-2aab-4097-865f-e3d3da9ff186.png)'
- en: The Phone file in a Windows Phone
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone中的Phone文件
- en: In a similar manner, we will be extracting internet history in the following
    section.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 以类似的方式，我们将在接下来的部分中提取互联网历史记录。
- en: Extracting internet history
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 提取互联网历史
- en: 'Internet history can be extracted from the `WebCacheV01.dat` file located at `\Users\DefApps\APPDATA\Local\Microsoft\Windows\WebCache\`.
    Here is an example of a Windows 10 `WebCacheV01.dat` file:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网历史记录可以从位于`\Users\DefApps\APPDATA\Local\Microsoft\Windows\WebCache\`的`WebCacheV01.dat`文件中提取。以下是Windows
    10中`WebCacheV01.dat`文件的示例：
- en: '![](img/7acde70a-82b6-48cf-9213-3780989c73dc.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7acde70a-82b6-48cf-9213-3780989c73dc.png)'
- en: The WebCacheV01.dat file in a Windows Phone
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone中的WebCacheV01.dat文件
- en: 'These files can be examined manually, for example, with a hex viewer, or can
    be parsed automatically with mobile forensic tools. Here is the `WebCacheV01.dat`
    file being parsed with Magnet AXIOM:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 这些文件可以手动检查，例如使用十六进制查看器，或使用移动取证工具自动解析。以下是使用Magnet AXIOM解析的`WebCacheV01.dat`文件：
- en: '![](img/506a947f-0e7d-4352-b703-0a7359972ee7.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/506a947f-0e7d-4352-b703-0a7359972ee7.png)'
- en: WebCacheV01.dat file parsed with Magnet AXIOM
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Magnet AXIOM解析的WebCacheV01.dat文件
- en: With this, we've covered how to extract SMS, contacts, call, and internet history
    from a Windows Phone.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 到此为止，我们已经讲解了如何从Windows Phone中提取短信、联系人、通话和互联网历史记录。
- en: Summary
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Acquiring data from Windows Phone devices is challenging since they are secure,
    and commercial forensic tools and open source methods do not provide easy solutions
    for forensic examiners like you. Multiple tools, chip-off, JTAG, and the methods
    we defined in this book are some of the methods that provide access to user data
    on Windows Phone devices. Often, you will find that Windows Phone devices require
    multiple extraction methods to acquire accessible data. The biggest challenge
    is getting access to the device to acquire the data. Once the data is available,
    all the extracted information can be analyzed by you.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 从 Windows Phone 设备获取数据具有挑战性，因为这些设备是安全的，商业取证工具和开源方法并不能为像你这样的取证专家提供简便的解决方案。多种工具、芯片拆卸、JTAG
    以及本书中定义的方法是一些可以访问 Windows Phone 设备上用户数据的方法。通常，你会发现 Windows Phone 设备需要多种提取方法才能获取可访问的数据。最大的挑战是如何获得设备的访问权限以提取数据。一旦数据可用，所有提取的信息都可以由你进行分析。
- en: In this chapter, we covered the interface, important features, and the security
    model of the Windows Phone device. Then, we had a look at the different partitions
    and folder structure within the Windows filesystem. The Windows Phone registry
    is similar to the registry in the Microsoft operating system. We saw how to extract
    data with and without using commercial tools and looked at some common Windows
    Phone forensic artifacts. With this knowledge, you can now extract user data from
    a Windows Phone using multiple extraction methods.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，我们介绍了 Windows Phone 设备的接口、重要特性和安全模型。然后，我们查看了 Windows 文件系统中的不同分区和文件夹结构。Windows
    Phone 注册表类似于 Microsoft 操作系统中的注册表。我们展示了如何使用或不使用商业工具提取数据，并查看了一些常见的 Windows Phone
    取证数据。凭借这些知识，你现在可以使用多种提取方法从 Windows Phone 提取用户数据。
- en: The next chapter will walk you through parsing third-party application files.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将引导你解析第三方应用程序文件。
