- en: Chapter 2. Guidelines for Preparation and Testing
  id: totrans-0
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 第2章。准备和测试的指导方针
- en: Understanding how target applications are built, as discussed in [Chapter 1](000.html#),
    *Common Web Applications and Architectures*, will certainly help us go further
    than a cursory pen test. All of this understanding can be a double-edged sword.
    More complex applications can overwhelm the most technically skilled testers.
    When we're testing, we need to ensure we are covering the entire scope of the
    requirements. It may be tempting to do this on-the- fly, but if you are anything
    like me, we're going to need to have a plan. Having a rigorous process and well-understood
    rules will help us provide consistent, valuable information to our customers.
    This extra formal treatment will also ensure we get full coverage of the scope
    that we've agreed upon with our customers.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 了解目标应用程序的构建方式，如[第1章](000.html#)中所讨论的*常见Web应用程序和架构*，将有助于我们进行比肩式渗透测试。所有这些理解都可能是一把双刃剑。更复杂的应用程序可能会让技术上最熟练的测试人员感到不知所措。在测试时，我们需要确保覆盖所有需求范围。也许会有诱惑在现场进行测试，但如果您和我一样，我们需要有一个计划。拥有严格的流程和深入理解的规则将有助于我们向客户提供一致、有价值的信息。这种额外的正式对待也将确保我们完全覆盖了与客户达成一致的范围。
- en: These plans can exist as either a part of the customer's process or as something
    that we bring through a contract â�� we maybe internal employees andÂ contractors
    or brought in as outside consultants. In the first case, you maybe tasked with
    testing against your own employer's environment or products. In this case, your
    orders will likely flow from internal processes or project requirements. Ad hoc
    testing ordered by management isn't uncommon, but be sure that the scope and processes
    are formally agreed upon to ensure all parties are protected.Â  In the latter
    case, you or your employer may be hired by a customer to provide testing.Â  In
    these cases, the scope, **Statement of Work** (**SOW**), and contract, as a whole,
    will need to be vetted by both parties to ensure that boundaries are preserved.Â
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这些计划可以作为客户流程的一部分存在，也可以作为我们通过合同带来的东西 - 我们可能是内部员工和承包商，也可能是外部顾问。在第一种情况下，您可能被要求针对自己雇主的环境或产品进行测试。在这种情况下，您的命令可能会源自内部流程或项目要求。管理层下达的临时测试并不罕见，但请确保范围和流程经过正式协议以确保所有各方受到保护。在后一种情况下，您或您的雇主可能被客户聘请进行测试。在这些情况下，范围、**工作声明**（**SOW**）和合同作为一个整体，都需要由双方审核，以确保边界得到保护。
- en: Throughout the entire process, keep in mind why we are there â�� we're there
    to help the customers, not to humiliate or *show up*Â their staff.Â  Whether your
    involvement in testing is by invite or mandate, the ethical hacking community
    should commend organizations that submit to testing, as it maybe our personal
    data or financial status someday that is at stake. Let's do what we can to make
    sure we're not tomorrow's victims.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个过程中，牢记我们在那里的原因 - 我们在那里是为了帮助客户，而不是羞辱或展示他们的员工。无论您参与测试是受邀还是受命，道德黑客社区都应该赞扬那些接受测试的组织，因为有一天也许是我们个人的数据或财务状况岌岌可危。让我们尽力确保我们不会成为明天的受害者。
- en: 'In this chapter, we''ll discuss the following:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下内容：
- en: Some of the comprehensive testing frameworks that we can draw upon and modify
    for our own use
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们可以借鉴和修改一些全面的测试框架，以供我们自己使用
- en: Ethical and legal principles that can guide our conduct
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以指导我们行为的道德和法律原则
- en: Guidance on setting up aÂ lab and sanctioned targets to rehearse the testing
    skills, which we'll be exploring for the duration of thisÂ book
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于建立实验室和经过批准的目标，以练习我们将在本书中探索的测试技能的指导
- en: Picking your favorite testing framework
  id: totrans-8
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择你喜欢的测试框架
- en: '* * *'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: In the race to establish leadership in the fields of penetration testing and
    web app pen testing in particular, several organizations, companies, and councils
    have sprung up. Some of these organizations offer a product-neutral methodology,
    while others have perspectives that unabashedly drive their recommended pen testing
    approach or *framework*. This testing framework's contents and format will vary
    greatly, so we'll need to sort through the options and see which one makes sense.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在建立渗透测试和特别是Web应用程序渗透测试领域的领导地位的竞争中，出现了一些组织、公司和委员会。其中一些组织提供了一个与产品无关的方法，而其他人则毫不掩饰地推动他们推荐的渗透测试方法或*框架*。这种测试框架的内容和格式将有很大的变化，因此我们需要筛选选项，看哪一个更合理。
- en: Government supported centers and institutes such as the **United States Computer
    Emergency Readiness Teams**Â (**USÂ CERT**), **Computer Security Resource Center**
    (**CSRC**) at the **National Institute of Standards and Technology** (**NIST**),
    and the newly established **European Union Agency for Network and Information
    Security** ([https://www.enisa.europa.eu](https://www.enisa.europa.eu/) ) tend
    to be focused on guidelines for defenders, thatÂ offer some guidance that can
    certainly be turned into test requirements and focus areas.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 政府支持的中心和机构，如**美国计算机紧急应对团队**（**US CERT**）、**国家标准与技术研究所**（**NIST**）的**计算机安全资源中心**（**CSRC**），以及新成立的**欧洲网络与信息安全局**（[https://www.enisa.europa.eu](https://www.enisa.europa.eu/)），往往专注于为防御者提供指南，提供了一些指导，可以转化为测试要求和重点领域。
- en: So, back to the potential paths; picking a framework often comes down to one's
    comfort zone and familiarity with the program or perspective. For many industries,
    compliance and regulations will also drive the choice. There is no *right*Â answer,
    but the selection can have an impact on the architecture and result in strengths
    and weaknesses in the end result. Many a times our own training budgets, schedules,
    product set, and backgrounds will dictate how we arrive at our process.Â  We may
    get there through a certification track, a project affiliation, or through something
    organic to our employer. Let's take a look at some of the most popular methodologies.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，回到潜在的路径；选择一个框架通常取决于个人的舒适区和对程序或视角的熟悉程度。对于许多行业来说，合规性和法规也将驱动选择。没有*正确*的答案，但选择可能会对架构产生影响，并在最终结果中产生优势和劣势。许多时候，我们自己的培训预算、时间表、产品组合和背景将决定我们如何达到我们的过程。我们可能通过认证轨道、项目关联或通过雇主的有机方式来达到目标。让我们来看看一些最流行的方法。
- en: Frameworks through a product
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通过产品框架
- en: This is a book focused on Kali Linux, but it's worthwhile to mention that there
    is a slew of products that attempt all-in-one web pen testing. Some of these are
    very well crafted and maintained, while others have been neglected in recent years
    but still find advocates based on a unique feature set or an interface.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一本关于Kali Linux的书，但值得一提的是，有许多产品试图实现一体化的Web渗透测试。其中一些产品非常精心制作和维护，而其他产品近年来已经被忽视，但仍然有支持者，基于其独特的功能集或界面。
- en: 'Kali Linux itself has some tool suites that it can host to provide a comprehensive
    coverage of the testing lifecycle.Â  Here is a list of some of the more prevalent
    options:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux本身有一些工具套件，它可以提供全面的测试生命周期覆盖。以下是一些更常见的选项列表：
- en: '**IronWASP** ([http://ironwasp.org/index.html](http://ironwasp.org/index.html)):
    This free and open source package runs on Mac and Windows or WINE on Linux, and
    it comes with a ton of great out-of-the-box capabilities. What makes it really
    powerful, however, is that you can craft your own or borrow someone else''s modules
    written in VB.NET, C#, Ruby, or Python to make the tool your own! Its website
    provides well-scripted detailed videos to show you what the tool can do.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IronWASP** ([http://ironwasp.org/index.html](http://ironwasp.org/index.html))：这个免费的开源软件包可以在Mac和Windows上运行，或者在Linux上运行WINE，并且具有大量出色的开箱即用功能。然而，它真正强大的地方在于，你可以编写自己的模块，或者借用别人用VB.NET、C#、Ruby或Python编写的模块，使工具成为你自己的！它的网站提供了精心制作的详细视频，向您展示工具的功能。'
- en: '**Veracode** ([http://www.veracode.com/products/dynamic-analysis-dast/web-application-security-testing](http://www.veracode.com/products/dynamic-analysis-dast/web-application-security-testing)):
    A new entry into the arena is the SaaS offering Veracode to perform cloud-hosted
    web application penetration testing.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Veracode** ([http://www.veracode.com/products/dynamic-analysis-dast/web-application-security-testing](http://www.veracode.com/products/dynamic-analysis-dast/web-application-security-testing))：一个新的进入领域的SaaS产品Veracode，用于执行基于云的Web应用程序渗透测试。'
- en: '**IBM Security AppScan** ([http://www-03.ibm.com/software/products/en/appscan](http://www-03.ibm.com/software/products/en/appscan)):
    This all-in-one web and mobile application test suite can be turned loose on target
    applications to automatically report back on compliance, vulnerabilities, and
    suggested fixes. It is a popular on-premise option for larger enterprises and
    has offerings for all phases of the **Software Development Life Cycle** (**SDLC**).
    More recently, they have begun to offer cloud-hosted variants. IBM''s solution
    also sets itself apart from the rest, thanks greatly to its integration with similar
    security and development ecosystems. They offer differentiation thanks toÂ synergies
    between their **System Event and Incident Manager** (**SEIM**), QRadar, and their
    portfolio of web-focused IDS/IPS products and code development platforms.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IBM Security AppScan** ([http://www-03.ibm.com/software/products/en/appscan](http://www-03.ibm.com/software/products/en/appscan))：这个全能的Web和移动应用程序测试套件可以自动报告合规性、漏洞和建议的修复措施。它是大型企业的受欢迎的本地选项，并为**软件开发生命周期**（**SDLC**）的所有阶段提供解决方案。最近，他们开始提供云托管变体。IBM的解决方案也因其与类似安全和开发生态系统的集成而脱颖而出。他们通过其**系统事件和事件管理器**（**SEIM**）、QRadar以及其面向Web的IDS/IPS产品和代码开发平台组合之间的协同作用提供差异化。'
- en: '**Rapid7 appspider** ([https://www.rapid7.com/products/appspider/](https://www.rapid7.com/products/appspider/)):
    Where IBM focuses on its own ecosystem, Rapid7 has a similar suite of capabilities
    but focuses on integration with technology partners. Appspider is capable of many
    of the same things but is geared toward integration with DevOps tools and a comprehensive
    list of SEIM, IDS/IPS, and WAF tools. It can even automate patching, replay attacks,
    and can automatically generate rules; it is a top-end performer with respect to
    speed, coverage, and usability.'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Rapid7 appspider** ([https://www.rapid7.com/products/appspider/](https://www.rapid7.com/products/appspider/))：IBM专注于自己的生态系统，而Rapid7具有类似的能力套件，但专注于与技术合作伙伴的集成。Appspider能够做很多相同的事情，但它专注于与DevOps工具和全面的SEIM、IDS/IPS和WAF工具集成。它甚至可以自动化修补程序，重放攻击，并自动生成规则；在速度、覆盖范围和可用性方面是顶尖表现者。'
- en: '**HP WebInspect** ([http://www8.hp.com/us/en/software-solutions/webinspect-dynamic-analysis-dast/](http://www8.hp.com/us/en/software-solutions/webinspect-dynamic-analysis-dast/)):
    Much like IBM''s offerings, WebInspect is quite focused on a single-vendor approach
    for all things such as security, development, and coding, and then penetration
    testing and remediation. The costs and complexity of this solution make it a better
    option for in-house analysis rather than for outside pen testers.'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**HP WebInspect** ([http://www8.hp.com/us/en/software-solutions/webinspect-dynamic-analysis-dast/](http://www8.hp.com/us/en/software-solutions/webinspect-dynamic-analysis-dast/))：与IBM的产品类似，WebInspect非常专注于单一供应商方法，涵盖安全、开发、编码、渗透测试和补救措施。这种解决方案的成本和复杂性使其更适合内部分析，而不适合外部渗透测试人员。'
- en: '**Acunetix** ([http://www.acunetix.com](http://www.acunetix.com)): Unlike the
    IBM, Rapid7, and HP WebInspect options, the Acunetix web vulnerability scanner
    concentrates on pen testing support and reporting,Â and does not delve intoÂ automating
    rules and patching.Â  This is not a bad thing; what it does, it does well; Â Often,
    these features are unused when an external pen tester is at work.Â  Acunetix offers
    rich reporting and frequently finishes the head of the class in efficacy, coverage,
    and features.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Acunetix**（[http://www.acunetix.com](http://www.acunetix.com)）：与IBM、Rapid7和HP
    WebInspect不同，Acunetix网络漏洞扫描仪专注于渗透测试支持和报告，而不涉及自动化规则和修补。这并不是一件坏事；它所做的事情，它做得很好；通常在外部渗透测试人员工作时，这些功能是不被使用的。Acunetix提供丰富的报告，并经常在效力、覆盖范围和功能方面名列前茅。'
- en: Train like you play
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 像你玩一样训练
- en: Certifications are a great means by which you can climb up the learning curve
    and launch your web pen testing career. Chances are if you are reading this book,
    you have one or more of these specialized certifications already under your belt.
    Most certification blueprints walk the ethical hacker through the flow of a test,
    which closely mimics the Lockheed MartinÂ **Cyber Kill ChainÂ **Â® ([http://www.lockheedmartin.com/us/what-we-do/aerospace-defense/cyber/cyber-kill-chain.html](http://www.lockheedmartin.com/us/what-we-do/aerospace-defense/cyber/cyber-kill-chain.html)
    shown in the following figure). While these are not frameworks in name, they can
    provide a *soup to nuts*Â methodology that can be integrated and adapted for use
    in your own process.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 认证是一个很好的手段，可以让你攀登学习曲线，开启你的网络渗透测试职业生涯。如果你正在阅读这本书，很可能你已经掌握了其中一个或多个专业认证。大多数认证蓝图都会引导道德黑客通过测试的流程，这与洛克希德·马丁的**网络攻击链**®（[http://www.lockheedmartin.com/us/what-we-do/aerospace-defense/cyber/cyber-kill-chain.html](http://www.lockheedmartin.com/us/what-we-do/aerospace-defense/cyber/cyber-kill-chain.html)）非常相似，如下图所示。虽然这些并非以名称命名的框架，但它们可以提供一种全面的方法论，可以被整合和适应到你自己的流程中。
- en: '![](img/B03918_02_01.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B03918_02_01.png)'
- en: The Cyber Kill Chain drives most of the attack and test methodologies, and forms
    the basis for most of theÂ industry certifications.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 网络攻击链驱动了大部分攻击和测试方法，并成为大多数行业认证的基础。
- en: Note
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: Lockheed Martin is credited with having created the Cyber Kill Chain Â in a
    paper calledÂ *Intelligence-Driven Computer Network Defense Informed by Analysis
    of Adversary Campaigns and Intrusion Kill Chains*Â ([http://www.lockheedmartin.com/content/dam/lockheed/data/corporate/documents/LM-White-Paper-Intel-Driven-Defense.pdf](http://www.lockheedmartin.com/content/dam/lockheed/data/corporate/documents/LM-White-Paper-Intel-Driven-Defense.pdf)).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 洛克希德·马丁公司被认为是在一篇名为《情报驱动的计算机网络防御：通过对对手行动和入侵攻击链的分析获得启示》的论文中创建了网络攻击链（[http://www.lockheedmartin.com/content/dam/lockheed/data/corporate/documents/LM-White-Paper-Intel-Driven-Defense.pdf](http://www.lockheedmartin.com/content/dam/lockheed/data/corporate/documents/LM-White-Paper-Intel-Driven-Defense.pdf)）。
- en: Two leading internationalÂ organizations, EC-Council and GIAC/SANS, established
    themselves as certification-focused organizations that have gained mindshare through
    qualifying security professionals, which, in turn, speaks wellÂ for their programs.
    Offensive Security (the creators/maintainers of Kali Linux) has also offered well-respected
    Kali-focused certifications that are revered for their practical testing approach.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 两个领先的国际组织，EC-Council和GIAC/SANS，已经成为专注于认证的组织，通过资格认证安全专业人员而赢得了认可，这反过来也为他们的项目说得很好。
    Offensive Security（Kali Linux的创建者/维护者）也提供了备受尊敬的以Kali为重点的认证，因其实践测试方法而备受推崇。
- en: The EC-Council approach
  id: totrans-29
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: EC-Council的方法
- en: The EC-Council's Hacking and Hardening Corporate Web App/Web Site CAST 613 course
    ([https://www.eccouncil.org/programs/web-application-security/](https://www.eccouncil.org/programs/web-application-security/))
    tackles a selection of the most impactful and feared attacks. Their course touches
    on the highlights and is focused on assisting developers in understanding how
    to better secure and test their applications. Given that the EC-Council does not
    have an offensive certification focused on purely web app pen testing, this course
    and certification can augment a more general pen testing methodology as learned
    in the EC Council's **Certified Ethical Hacker** (**CEH**) certification. As with
    many EC-Council certifications, materials are available either through their training
    courses or through third-party texts available at bookstores and online.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: EC-Council的Hacking and Hardening Corporate Web App/Web Site CAST 613课程（[https://www.eccouncil.org/programs/web-application-security/](https://www.eccouncil.org/programs/web-application-security/)）涉及了一系列最具影响力和令人恐惧的攻击。他们的课程涉及了一些重点，并侧重于帮助开发人员了解如何更好地保护和测试他们的应用程序。鉴于EC-Council没有专门针对纯粹的网络应用程序渗透测试的攻击性认证，这门课程和认证可以作为EC-Council的**认证的道德黑客**（**CEH**）认证中学到的更一般的渗透测试方法的补充。与许多EC-Council的认证一样，材料可以通过他们的培训课程或书店和在线第三方文本获得。
- en: We'll refer to some more of the ethical guidelines from the EC-Council, but
    given that this is not as popular a path as their CEH, look at more established
    standards for web pen testing in particular.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将参考EC-Council的一些道德准则，但考虑到这不像他们的CEH那样受欢迎，特别是要看更为成熟的网络渗透测试标准。
- en: The GIAC/SANS approach
  id: totrans-32
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: GIAC/SANS的方法
- en: GIAC and SANS together offer events, training paths, and a robust community
    that is often considered a favorite for US and NATO government cyber security
    professionals, and it is often listed in requirements for the many roles there.
    Among their offerings is the **GIAC Web Application Penetration Tester** (**GWAPT**)
    certification. GWAPT is a standalone certification that closely mirrors the Cyber
    Kill Chain, and their curriculum is available only at conferences and through
    online courses.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: GIAC和SANS共同提供活动、培训路径和一个强大的社区，通常被认为是美国和北约政府网络安全专业人员的首选，并经常列入那里许多角色的要求。其中包括**GIAC
    Web应用程序渗透测试员**（**GWAPT**）认证。GWAPT是一个独立的认证，与网络攻击链紧密相似，他们的课程只在会议和在线课程中提供。
- en: The high cost of their training is considered well worth it, but it often limits
    the breadth of audience that can access their methodology and framework. Consider
    the GWAPT a more advanced certification, well-worth pursuing as a next-step in
    your web pen testing career.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 他们的培训成本高昂，但通常是值得的，但这往往限制了可以访问他们的方法和框架的受众范围。考虑将GWAPT作为更高级的认证，值得在您的网络渗透测试职业生涯中追求的下一步。
- en: The Offensive Security approach
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 攻击性安全方法
- en: Offensive Security is the organization that brings us Kali Linux, as well as
    some active blogs and thought leadership in the area of penetration testing and
    forensics. While they are most known in the certification realm for their **Offensive
    Security Certified Profession** (**OSCP**), they also offer the **Offensive Security
    Web Expert** (**OSWE**,Â [https://www.offensive-security.com/information-security-certifications/oswe-offensive-security-web-expert/](https://www.offensive-security.com/information-security-certifications/oswe-offensive-security-web-expert/))
    . This rigorous training features a 24-hour practical exam that is the hallmark
    of their certification strategy. While Offensive Security is focused on practical
    aspects, they do, in fact, teach a hands-on methodology that many use as their
    baseline. Their operating system, Kali Linux, is the focus, so we'll certainly
    heed their guidance in many areas in this book.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击性安全是为我们带来Kali Linux的组织，以及一些积极的博客和渗透测试和取证领域的思想领导。虽然他们在认证领域最为知名的是他们的攻击性安全认证专业（OSCP），他们还提供攻击性安全网络专家（OSWE）。这项严格的培训包括一个24小时的实践考试，这是他们认证策略的标志。虽然攻击性安全专注于实际方面，但事实上，他们确实教授了许多人将其作为基准的实践方法。他们的操作系统Kali
    Linux是重点，因此在本书的许多领域我们肯定会听取他们的指导。
- en: Open source methodologies and frameworks
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 开源方法和框架
- en: Open source advocates provide us with some very thorough options that we can
    select for our starting point. Each option offers a structure that is typically
    free or biased toward a specific vendor or toolset. In fact, most of the open
    source frameworks developed by not-for-profit organizations can only be implemented
    with a cross-section of tools for full coverage. Additional guidance from organizations
    such as the **World Wide Web Consortium** (**W3C**, [https://www.w3.org](https://www.w3.org)
    ) and the **Web Applications Security Council** (**WASC**, [http://www.webappsec.org](http://www.webappsec.org)
    ) can assist in rounding out your processes.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 开源倡导者为我们提供了一些非常全面的选择，我们可以选择作为起点。每个选项都提供了一个通常是免费或偏向特定供应商或工具集的结构。事实上，大多数由非营利组织开发的开源框架只能通过一系列工具来实现全面覆盖。来自世界互联网联盟（W3C）和Web应用程序安全委员会（WASC）等组织的额外指导可以帮助完善您的流程。
- en: ISECOM's OSSTMM
  id: totrans-39
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: ISECOM的OSSTMM
- en: The **Institute for Security and Open Methodologies** (**ISECOM**) publishes
    a paywall-protected version of their most recent **Open Source Security Testing
    Methodology Manual** (**OSSTMM**,Â [http://www.isecom.org/research/osstmm.html](http://www.isecom.org/research/osstmm.html));
    and version 4 is the latest one.Â  A s*ilver*Â or higher-status member can access
    the document, but earlier versions are accessible for free.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 安全和开放方法研究所（ISECOM）发布了最新的开源安全测试方法手册（OSSTMM）的付费版本，版本4是最新版本。银牌会员或更高级别会员可以访问该文档，但较早的版本可免费访问。
- en: The OSSTMM works at a higher level to describe the processes for all forms of
    penetration testing, with web application testing elements sprinkled throughout.Â 
    We'll refer to it occasionally as we proceed, but consider this an optional reference
    for this book.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: OSSTMM在更高层次上描述了所有形式的渗透测试的过程，其中穿插着Web应用程序测试元素。我们将在进行过程中偶尔参考它，但可以将其视为本书的可选参考。
- en: ISSAF
  id: totrans-42
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: ISSAF
- en: The **Information Systems Security Assessment Framework** (**ISSAF**, [https://sourceforge.net/projects/isstf/](https://sourceforge.net/projects/isstf/))
    is, for all intents and purposes, a mothballed project that nevertheless provides
    great information. It can help understand an entire enterprise-grade assessment
    process, which not only includes pen testing, but also covers incident and change
    control programs, **Security Operations** (**SecOps**) procedures, and the physical
    security of the environment, for instance. What the ISSAF lacks more current application
    testing guidance, it makes up for this in providing sample NDAs, contracts, questionnaires,
    and other useful templates that can help craft the appropriate deliverables.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 信息系统安全评估框架（ISSAF）实际上是一个被搁置的项目，但仍然提供了很好的信息。它可以帮助理解整个企业级评估过程，不仅包括渗透测试，还包括事件和变更控制程序、安全运营程序和环境的物理安全等。虽然ISSAF缺乏更多的当前应用测试指导，但它在提供样本NDA、合同、问卷和其他有用的模板方面弥补了这一点，可以帮助制定适当的交付成果。
- en: 'Of note to us is that the ISSAF covers these discipline areas, among others:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，ISSAF涵盖了以下学科领域：
- en: Project management, guidelines, and best practices throughout the assessment
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估过程中的项目管理、指南和最佳实践
- en: The assessment methodology
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估方法
- en: Technical control assessment
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 技术控制评估
- en: Unix /Linux, Windows, Novell, and database system security assessments
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Unix/Linux、Windows、Novell和数据库系统的安全评估
- en: Web application security assessments
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web应用程序安全评估
- en: Internet user security and social engineering
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 互联网用户安全和社会工程学
- en: The legal aspects of security assessment projects
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全评估项目的法律方面
- en: Templates for **Non-Disclosure Agreement** (**NDA**) and security assessment
    contracts
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 非披露协议（NDA）和安全评估合同的模板
- en: A **Request for Proposal** (**RFP**) template
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请求提案（RFP）模板
- en: Some guidelines for penetration testing lab design (covered later in this chapter)
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 渗透测试实验室设计的一些建议（本章后面介绍）
- en: NIST publications
  id: totrans-55
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: NIST出版物
- en: NIST has, for almost three decades, released special publications to provide
    best practices and guidance in many technology areas, and the **Computer Security
    Resource Center** (**CSRC**) has led the way in providing many freely accessible
    publications in the area of cyber security defense. NIST has also released valuable
    guides for testing the efficacy and coverage of an organization's security approach.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: NIST已经在近30年的时间里发布了特别出版物，为许多技术领域提供最佳实践和指导，**计算机安全资源中心**（CSRC）在提供许多关于网络安全防御领域的免费可访问出版物方面处于领先地位。NIST还发布了有价值的指南，用于测试组织安全方法的有效性和覆盖范围。
- en: NIST's first foray into this area, their special publication,Â *Technical Guide
    to Information Security Testing and Assessment* (NIST 800-115 ([http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-115.pdf](http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-115.pdf)),
    is somewhat dated and now is no longer maintained manually. It is worth the time
    to reference SP 800-115, as it still provides useful information for all forms
    of penetration testing, web applications included. Technical currency aside, its
    value lies in its methodical treatment of testing data, maintaining proper controls,
    and building your testing toward a valuable report.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: NIST在这一领域的首次尝试，他们的特别出版物《信息安全测试和评估技术指南》（NIST 800-115 ([http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-115.pdf](http://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-115.pdf))，现在已经过时，不再手动维护。参考SP
    800-115是值得的，因为它仍然为各种渗透测试提供有用信息，包括Web应用。除了技术货币外，它的价值在于其对测试数据的系统处理，维护适当的控制，并将测试建立为有价值的报告。
- en: The more recent SP of interest is *Assessing Security and Privacy Controls in
    Federal Information Systems and Organizations*Â (SP 800-53A, available atÂ [http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-53Ar4.pdf)](http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-53Ar4.pdf).Â 
    This presentation is less focused on the administrative process and more so on
    providing guidelines around how to best craft your own policies. SP 800-53A also
    offers guidance on incorporating their rightful place within the SDLC (as mentioned
    inÂ [Chapter 1](000.html#), *Common Web Applications and Architectures*). As an
    added bonus, SP 800-53A includes several appendices that offer some assessment
    and reporting information; Appendix F includes a completeÂ suite of tests that
    can be incorporated into your own process. NIST test scenarios are ranked by coverage
    and criticality, offering some much-needed rigor to an otherwise massive cache
    of publically known vulnerabilities.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 感兴趣的最新SP是《评估联邦信息系统和组织中的安全和隐私控制》（SP 800-53A，可在[http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-53Ar4.pdf)](http://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-53Ar4.pdf)上找到）。这个演示更少地关注行政流程，更多地提供了如何最好地制定自己的政策的指导方针。SP
    800-53A还提供了关于如何将它们合理地纳入SDLC（如[第1章](000.html#)，《常见Web应用和架构》中提到的）的指导。作为额外的奖励，SP
    800-53A包括几个附录，提供了一些评估和报告信息；附录F包括一套完整的测试，可以纳入到你自己的流程中。NIST测试方案按覆盖范围和关键性进行排名，为公开已知的漏洞提供了一些急需的严谨性。
- en: OWASP's OTG
  id: totrans-59
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: OWASP的OTG
- en: The most widely accepted reference in web pen testing is the OWASP Testing Guide
    also known asÂ OTG, Version 4 ([https://www.owasp.org/index.php/OWASP_Testing_Project](https://www.owasp.org/index.php/OWASP_Testing_Project)).
    The OWASP has led the field for many years due to heavy participation from the
    community and its stellar reputation for anticipating trends and teaching the
    community to test against them. OWASP's influence is a major driver in presentations
    at conferences such as those run by SANS, Black Hat, and DevCon, and their top
    10 web security threats are a must-read for any of us.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: Web渗透测试中最广泛接受的参考是OWASP测试指南，也称为OTG，第4版([https://www.owasp.org/index.php/OWASP_Testing_Project](https://www.owasp.org/index.php/OWASP_Testing_Project))。由于社区的积极参与和对趋势的卓越预测能力，OWASP多年来一直引领着这一领域。OWASP的影响是SANS、Black
    Hat和DevCon等会议上的主要推动因素，他们的前十大网络安全威胁对我们所有人来说都是必读的。
- en: The OTG, much like the NIST guidance, provides some tips and pointers for incorporating
    testing in appropriate phases. OWASP maintains the OTG more regularly that the
    other full-coverage frameworks discussed previously, with new releases of both
    the top 10 and the OTG every three to four years. The bulk of the OTG, however,
    dives right into the web-specific testing that can provide full coverage of not
    only the top 10 threats but a whole host of vulnerabilities that are actively
    tracked by the OWASP team.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: OTG与NIST指南类似，提供了一些关于在适当阶段进行测试的提示和指针。OWASP比之前讨论过的其他全面框架更经常地维护OTG，每三到四年发布一次新版本的前十名和OTG。然而，OTG的大部分内容直接涉及特定于Web的测试，可以全面覆盖不仅是前十名威胁，还有一系列由OWASP团队积极跟踪的漏洞。
- en: 'While the OTG covers a lot of ground, it begins with a primer including OWASP''s
    best practices in the SDLC and the proper phases for tests. The OTS also goes
    beyond technical vulnerabilities to show how target customers may benefit from
    *red teaming* (conducting mock security intrusions) and the many recons and footprinting
    aspects particular to web pen testing. Once this foundation is discussed, the
    following sections break the web app pen testing down into logical groups focused
    on a specific area of the architecture that can be covered by similar tests, tools,
    and in similar phases of development or deployment:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管OTG涵盖了很多内容，但它从一个入门开始，包括OWASP在SDLC中的最佳实践和适当的测试阶段。OTS还超越了技术漏洞，展示了目标客户如何从*红队*（进行模拟安全入侵）以及OWASP团队特定于Web渗透测试的许多侦察和足迹方面受益。一旦讨论了这个基础，接下来的部分将Web应用程序渗透测试分解成逻辑组，重点关注可以由类似测试、工具和类似的开发或部署阶段覆盖的特定架构区域：
- en: Identity management, authentication, and authorization
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 身份管理、认证和授权
- en: Session management
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 会话管理
- en: Input validation
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 输入验证
- en: Error handling
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误处理
- en: Cryptography
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码学
- en: Business logic (the processing and manipulation of data based on inputs or updates)
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 业务逻辑（根据输入或更新处理和操纵数据）
- en: Client-side (typically victim browsers)
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端（通常是受害者浏览器）
- en: If you haven't guessed by now, the OWASP testing guide is what we'll be referring
    to as our foundation through this book. In practice, other frameworks may work
    better for you, but the currency, focus, completeness, and the accessibility of
    their documentation as well as the tests they recommend provide a firm foundation
    for us to use it with Kali Linux in testing our target applications.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你现在还没猜到，OWASP测试指南就是我们在本书中将要参考的基础。在实践中，其他框架可能对您更有效，但它们的文档的时效性、焦点、完整性和可访问性以及它们推荐的测试为我们提供了一个坚实的基础，使我们可以在测试目标应用程序时与Kali
    Linux一起使用它。
- en: Keeping it legal and ethical
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保持合法和道德
- en: '* * *'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: 'Wouldn''t it be great if our testing processes kept us out of jail and reduced
    the risk for us and our customers? There is an exponentially growing body of laws
    at the national, provincial, state, and local levels in most countries. The many
    news stories we are all bombarded with make it clear that government bodies at
    all levels throughout the world are still trying to determine how to find the
    right balance of privacy, confidentiality, and accountability for cyber-security
    related events. It turns out that, in the vast majority of government bodies,
    those making the laws might be ill-suited to understand the complexities and form
    effective regulations. One Complication for us is the fact that we are very rarely
    operating in a single jurisdiction: interstate and international entanglements
    are perilous and dynamic. How can we save ourselves from constant paralysis and
    fear in doing our job?'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的测试流程能让我们远离监狱，并减少我们和客户的风险，那岂不是太好了？在大多数国家的国家、省、州和地方层面，法律体系呈指数级增长。我们所受到的众多新闻报道清楚地表明，世界各地的政府机构仍在努力确定如何在网络安全相关事件中找到隐私、保密和问责的正确平衡。事实证明，在绝大多数政府机构中，制定法律的人可能不适合理解复杂性并制定有效的法规。对我们来说，一个复杂因素是我们很少在单一司法管辖区内运营：跨州和国际纠葛是危险且动态的。我们如何才能在工作中摆脱持续的瘫痪和恐惧呢？
- en: What is legal?
  id: totrans-74
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 什么是合法的？
- en: First, the locations of the sites and theÂ legal jurisdiction governing the
    businessesÂ that we are testing will each present distinct laws and regulations
    that we should be aware of. In the United States and European Union, actions that
    cross state or member borders fall under the primary jurisdiction of their overarching
    regulations. To avoid running afoul of these laws, you maybe well served to search
    on your governing body's laws (for the EU, [http://eur-lex.europa.eu/homepage.html](http://eur-lex.europa.eu/homepage.html))
    that offer a good starting place, while the US Department of Justice offers similar
    search capabilities but summarizes national code in the guide calledÂ *Prosecuting
    Computer Crimes*Â [https://www.justice.gov/sites/default/files/criminal-ccips/legacy/2015/01/14/ccmanual.pdf)](https://www.justice.gov/sites/default/files/criminal-ccips/legacy/2015/01/14/ccmanual.pdf)).
    US laws, which are similar to theÂ Computer Fraud and Abuse Act of 1984, the Economic
    Espionage Act of 1996, theÂ **Federal Information Security Management Act** (**FISMA**),Â Cyber
    Security Enhancement Act of 2002, andÂ **Uniting and Strengthening America by
    Providing Appropriate Tools Required to Intercept and Obstruct Terrorism** (**USA
    PATRIOT**, from 2001), also impact the legal precedent and principles of American
    cyber laws. Regulations such as Sarbanes-Oxley, the **Health Insurance Portability
    and Accountability Act** (**HIPAA**), and the **Payment Card Industry Digital
    Security Standard** (**PCI-DSS**) maybeÂ applied to many of the customers that
    we'll be interacting with, depending on their function and governing agencies.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们测试的网站的位置和管理业务的法律管辖权将分别提出我们应该了解的不同法律和法规。在美国和欧盟，跨越州或成员国边界的行为属于其总体法规的主要管辖范围。为了避免违反这些法律，您可能会发现搜索您所在的管理机构的法律（对于欧盟，[http://eur-lex.europa.eu/homepage.html](http://eur-lex.europa.eu/homepage.html)）是一个很好的起点，而美国司法部提供类似的搜索功能，但在名为*Prosecuting
    Computer Crimes*的指南中总结了国家法典[https://www.justice.gov/sites/default/files/criminal-ccips/legacy/2015/01/14/ccmanual.pdf)](https://www.justice.gov/sites/default/files/criminal-ccips/legacy/2015/01/14/ccmanual.pdf))。美国的法律，例如类似于1984年的《计算机欺诈和滥用法案》、1996年的《经济间谍法》、《联邦信息安全管理法》（**FISMA**）、2002年的《网络安全增强法》和2001年的《为拦截和阻挠恐怖主义提供适当工具的美国统一和加强法》（**USA
    PATRIOT**）等，也影响了美国网络法律的法律先例和原则。像萨班斯-奥克斯利法案、《健康保险可携带性和责任法案》（**HIPAA**）和《支付卡行业数字安全标准》（**PCI-DSS**）等法规可能适用于我们将要与之互动的许多客户，取决于其功能和管理机构。
- en: The EU just enacted a new far-reaching regulation called the **General Data
    Protection Regulation** (**GDPR**, [http://www.eugdpr.org](http://www.eugdpr.org))
    that helps define the responsibilities of companies, and it will certainly impact
    our roles for projects involving companies doing business in the EU. The Indian
    Government recently instituted its own comprehensiveÂ National Cyber Security
    Strategy of 2013 and provides access to all of them through their Ministry of
    Electronics and Information Technology siteÂ ([http://meity.gov.in/content/cyber-laws-security](http://meity.gov.in/content/cyber-laws-security)).
    Many other Asian and African nations have also continually revised their own laws.
    It is worth investing in reference books and legal journals that cover the constantly
    evolving legal landscape, which can help you stay on the right side of the law.Â
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 欧盟刚刚颁布了一项名为《通用数据保护条例》（GDPR）的新的具有深远影响的法规（[http://www.eugdpr.org](http://www.eugdpr.org)），它有助于定义公司的责任，肯定会影响我们参与涉及在欧盟开展业务的公司的项目的角色。印度政府最近制定了自己的全面《2013年国家网络安全战略》，并通过其电子和信息技术部门网站提供所有这些信息（[http://meity.gov.in/content/cyber-laws-security](http://meity.gov.in/content/cyber-laws-security)）。许多其他亚洲和非洲国家也不断修订自己的法律。值得投资于涵盖不断发展的法律环境的参考书和法律期刊，这可以帮助您保持在法律的正确一边。
- en: As your practice grows, it maybe worth having a lawyer or firm, concentrating
    on laws around cyber security, data, privacy, and ethical hacking, on a retainer
    toÂ help craft you legally sound contracts and provide representation in the event
    of any legal action with which you and your company maybe involved.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 随着您的实践不断发展，值得考虑聘请一名专注于网络安全、数据、隐私和道德黑客法律的律师或律所，以帮助您制定合法的合同，并在您和您的公司可能卷入任何法律诉讼时提供代表。
- en: What is ethical?
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 什么是道德？
- en: While not legally binding, ethical guidelines can be a bellwether for where
    laws and regulations are heading and, at the very least, a higher bar than most
    government entities. What they lack in legal language, they than make up for in
    plain terms that typically steer us away from any legally questionable areas that
    may arise. The EC-CouncilÂ and GIAC/SANS both publish a Code of Ethics ([https://www.eccouncil.org/code-of-ethics/](https://www.eccouncil.org/code-of-ethics/)
    and [https://www.giac.org/about/ethics)](https://www.giac.org/about/ethics)),
    as do many other industry institutions and certifying authorities. Some commercial
    tool vendors or providers also have expectations for proper use and frown upon
    nefarious activities using their toolsets. By enrolling as a member or holding
    their certifications, you are expected to uphold their standards. Â
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管没有法律约束力，道德准则可以成为法律和法规发展的风向标，至少比大多数政府实体设定了更高的标准。虽然它们缺乏法律语言，但通常以简单的术语弥补了这一点，这些术语通常会引导我们远离可能出现的任何法律问题领域。EC-Council和GIAC/SANS都发布了《道德准则》（[https://www.eccouncil.org/code-of-ethics/](https://www.eccouncil.org/code-of-ethics/)和[https://www.giac.org/about/ethics)](https://www.giac.org/about/ethics)），许多其他行业机构和认证机构也有。一些商业工具供应商也对工具的正确使用有期望，并且不赞成使用其工具集进行不正当活动。通过注册为会员或持有他们的认证，您应该遵守他们的标准。
- en: In the natural evolution of a pen testing practice, it is likely that issues
    will be encountered as projects are discussed or completed, which maybe ambiguous
    withinÂ the established standard operating procedures, code of ethics, or law.
    In these cases, it is best to step back and assess the potential short- and long-term
    harm or benefits that may arise with each of the options available. Having agreed
    to a set of legal and ethical boundaries can be an asset here - sometimes the
    best approach is to avoid ethical or legal gray areas altogether and stick with
    processes and actions that are firmly justified.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试实践的自然演变中，很可能会遇到一些问题，这些问题可能在讨论或完成项目时出现，这可能在已建立的标准操作程序、道德准则或法律中是模棱两可的。在这些情况下，最好退一步，评估每个可用选项可能带来的短期和长期危害或利益。同意一套法律和道德边界可能是一种资产-有时最好的方法是完全避免道德或法律上的灰色地带，坚持那些得到充分证明的过程和行动。
- en: Labbing - practicing what we learn
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实验室-练习我们所学到的东西
- en: '* * *'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: So you are probably asking, When can we have some pen testing fun? Let's just
    say *soon*. We have to establish a safe yet representative environment that can
    provide ripe targets for the various tests we'd like to run. We also want to push
    the limits without impacting the performance of some real production applications
    or their underlying systems or supporting networks. As *variety is the spice of
    life*, it also holds true in penetration testing. Your efficacy in testing will
    be greatly improved with some exposure and knowledge of a variety of platforms.
    There are some great resources such as Packt's own *Building Virtual Pentesting
    Labs for Advanced Penetration Testing - Second Edition* by *Kevin Cardwell* ([https://www.packtpub.com/networking-and-servers/building-virtual-pentesting-labs-advanced-penetration-testing-second-edition](https://www.packtpub.com/networking-and-servers/building-virtual-pentesting-labs-advanced-penetration-testing-second-edition)),
    if you would like to dive into a more rigorous all-purpose pen testing range.
    In this section, we'll briefly discussÂ the sandbox or laboratory that we'll be
    using in this book to rehearse our pen testing approaches.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 所以你可能会问，我们什么时候可以进行一些渗透测试的乐趣？让我们说*很快*。我们必须建立一个安全而又具有代表性的环境，可以为我们想要运行的各种测试提供成熟的目标。我们还希望在不影响一些真实生产应用程序或其基础系统或支持网络的性能的情况下推动极限。正如*变化是生活的调味品*一样，这也适用于渗透测试。通过接触和了解各种平台，您的测试效果将得到极大改善。如果您想深入了解更严格的通用渗透测试范围，可以参考一些很好的资源，比如Packt出版社的*Building
    Virtual Pentesting Labs for Advanced Penetration Testing - Second Edition* by
    *Kevin Cardwell*（[https://www.packtpub.com/networking-and-servers/building-virtual-pentesting-labs-advanced-penetration-testing-second-edition](https://www.packtpub.com/networking-and-servers/building-virtual-pentesting-labs-advanced-penetration-testing-second-edition)）。在本节中，我们将简要讨论本书中将用于演练我们的渗透测试方法的沙盒或实验室。
- en: 'For reference, my lab for this book looked similar to the following diagram:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 作为参考，我为本书准备的实验室看起来类似于以下图表：
- en: '![](img/B03918_02_02-1.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](img/B03918_02_02-1.png)'
- en: The book'sÂ penetration testing virtual lab provides plenty of room toÂ explore
    and rehearse new attack methods.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的渗透测试虚拟实验室提供了充足的空间来探索和演练新的攻击方法。
- en: Creating a virtualized environment
  id: totrans-87
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建一个虚拟化环境
- en: White hats, just like any IT professionals, often have zealous allegiance to
    a specific platform and operating system. I fully expect that readers of this
    book will be using a laptop running some flavor of Microsoft Windows, Mac OS (X
    or Sierra), or Linux/BSD (Ubuntu/Debian, Fedora/RedHat, SUSE, FreeBSD, and so
    on). Don't sweat the small stuff - so long as it is a fairly new and well-provisioned
    laptop or desktop (4 CPU modern cores, Ethernet and wireless, some USB (version
    2 or 3) sockets, and 16 GB RAM minimum), it should at least get you started.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 白帽黑客，就像任何IT专业人士一样，通常对特定平台和操作系统有狂热的忠诚。我完全预期本书的读者将使用运行某种Microsoft Windows、Mac
    OS（X或Sierra）或Linux/BSD（Ubuntu/Debian、Fedora/RedHat、SUSE、FreeBSD等）的笔记本电脑。不要为小事烦恼-只要它是一个相当新的和配置良好的笔记本电脑或台式机（4个CPU现代核心，以太网和无线，一些USB（2或3版本）插座，至少16GB的RAM），它至少应该让您开始。
- en: At the risk of opening yet another fanatical debate, we'll want to select a
    virtualization platform to run on the top of this (sorry!). Virtualization helps
    us level the playing field and actually improve our lab's versatility by employing
    a virtualization platform to establish a virtual network segment and install and
    access virtual machines (VMs) for Windows and Linux desktop and server variants.
    Choose what fits within your budget and preference. Options such as Oracle's Virtual
    Box, VMWare's Workstation or Fusion, Citrix Xen, or even Parellels (on the Mac)
    are popular. Performance in web application penetration testing isn't as big a
    deal as in some other forms, as we won't be doing real-time cracking or hashing
    in most of our work.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 冒着再次引发狂热的辩论的风险，我们将选择一个虚拟化平台来运行在其之上（抱歉！）。虚拟化帮助我们平衡竞争，并通过使用虚拟化平台来建立虚拟网络段并安装和访问Windows和Linux桌面和服务器变体的虚拟机（VM）来实际提高我们实验室的多功能性。选择适合您预算和偏好的选项。像Oracle的Virtual
    Box，VMWare的Workstation或Fusion，Citrix Xen，甚至Parellels（在Mac上）都很受欢迎。在Web应用程序渗透测试中，性能并不像在其他一些形式中那样重要，因为我们在大多数工作中不会进行实时破解或哈希。
- en: It should be noted that you can certainly use dedicated servers or barebones
    (physical) hosts and network equipment to build a lab, but we'll be able to do
    everything in this book using our virtual sandbox. In actual practice, it is more
    common to see professional pen testers use virtual machines to perform their testing,
    as it helps assure customers that proper sanitization and isolation are occurring.
    The tester can merely host the VM on a removable or networked drive and delete
    the VM when the project is complete.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，您当然可以使用专用服务器或裸机（物理）主机和网络设备来构建实验室，但我们可以在我们的虚拟沙盒中完成本书中的所有工作。在实际实践中，更常见的是看到专业的渗透测试人员使用虚拟机来执行他们的测试，因为这有助于确保客户正在进行适当的消毒和隔离。测试人员可以简单地将虚拟机托管在可移动或网络驱动器上，并在项目完成时删除虚拟机。
- en: Our penetration testing host
  id: totrans-91
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 我们的渗透测试主机
- en: We'll be using the latest (2016.2 at the time of writing this book) version
    of Kali Linux, using the readymade VMs from their repository ([https://www.offensive-security.com/kali-linux-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vmware-virtualbox-image-download/)).
    I would encourage modifying the image to have a larger partition (I used a 1 TB
    hybrid USB 3.0 drive to store all images, and set the Kali image to a single partition
    of 100GB). Â This larger footprint will accommodate the extensive archives of
    websites and data collection. You can also enable additional virtual network interfaces
    cards (NICs) if you so desire, but I mapped the single NIC to the appropriate
    interface for each form of connectivity required using VMWare Fusion's machine
    settings. For MITM attacks, we'll provision a second NIC.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在撰写本书时，我们将使用最新的Kali Linux版本（2016.2），使用其存储库中的现成虚拟机（[https://www.offensive-security.com/kali-linux-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vmware-virtualbox-image-download/)）。我建议修改镜像以获得更大的分区（我使用了一个1TB的混合USB
    3.0驱动器来存储所有镜像，并将Kali镜像设置为100GB的单个分区）。这个更大的占用空间将容纳大量的网站和数据收集档案。您也可以启用额外的虚拟网络接口卡（NIC），如果您愿意的话，但我使用VMWare
    Fusion的机器设置将单个NIC映射到每种所需的连接形式的适当接口。对于MITM攻击，我们将提供第二个NIC。
- en: Creating a target-rich environment
  id: totrans-93
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建一个目标丰富的环境
- en: A majority of the server targets that we'll encounter will be hosted on the
    Linux or Windows operating systems, and the clients will be Linux, Windows, Mac
    OS, or mobile (Android, iOS, Windows Phone, or Blackberry). Let's take the server
    and client sides separately.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将遇到的大多数服务器目标将托管在Linux或Windows操作系统上，客户端将是Linux、Windows、Mac OS或移动设备（Android、iOS、Windows
    Phone或Blackberry）。让我们分别看待服务器和客户端。
- en: Finding gullible serversÂ
  id: totrans-95
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 寻找易受骗的服务器
- en: If you have an active **Microsoft Developers Program** (**MSDP**) license, you
    can use these images to test; but for the rest of us without the budget to support
    this, you can download full versions of almost any operating system or software
    package from Microsoft for an evaluation term of 60 to 180 days at their evaluation
    centerÂ website ([https://www.microsoft.com/en-us/evalcenter/](https://www.microsoft.com/en-us/evalcenter/)).
    Both options are suitable, but the frequent need to start fresh and the non-existentÂ cost
    of the evaluation licenses make the latter a perfectly suitable option. I would
    recommend having access to images for MS Server 2008, 2012, and 2016 at a minimum,
    with images configured for IIS and other important web services.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有活跃的**Microsoft Developers Program**（**MSDP**）许可证，您可以使用这些镜像进行测试；但对于我们其他人来说，没有预算支持这一点，您可以从微软的评估中心网站（[https://www.microsoft.com/en-us/evalcenter/](https://www.microsoft.com/en-us/evalcenter/)）下载几乎任何操作系统或软件包的完整版本，评估期为60至180天。这两个选项都是合适的，但频繁需要重新开始和评估许可证的不存在成本使后者成为一个完全合适的选择。我建议至少具有MS
    Server 2008、2012和2016的镜像，并为IIS和其他重要的Web服务配置镜像。
- en: Linux clients are easier. You can locate options for pretty much any variant
    you need; and for enterprise/commercial variants, you can find a free and community-supported
    approximation that is extremely close. Most Linux implementations for web services
    include not only the Linux OS but also the appropriate Apache web server, MySQL
    database, and PHP versions, which together form the LAMP web stack. Having a current
    image of a Debian, Ubuntu, CentOS (for Red Hat targets), Fedora, or SuSE Linux
    can ensure you are ready for any potential scenarios.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Linux客户端更容易。您可以找到几乎任何您需要的变体的选项；对于企业/商业变体，您可以找到一个免费的、社区支持的近似值，非常接近。大多数用于Web服务的Linux实现不仅包括Linux操作系统，还包括适当的Apache
    Web服务器、MySQL数据库和PHP版本，它们共同形成了LAMP Web堆栈。拥有Debian、Ubuntu、CentOS（用于Red Hat目标）、Fedora或SuSE
    Linux的当前镜像可以确保您准备好应对任何潜在的情况。
- en: The best thing to happen to aspiring pen testers is the advent of the hackable
    server VMs, of which there are several that allow practicing attempts against
    a wide variety of vulnerabilities. Rapid7 released and supported theÂ Metasploitable
    VM ([https://information.rapid7.com/metasploitable-download.html](https://information.rapid7.com/metasploitable-download.html)),
    which is a little longer in the tooth but is well worth in practicing against
    for general penetration testing. Web penetration testing, however, benefits from
    an appropriate image with preconfiguredÂ applications, so we can get right to
    the fun stuff. Â The images of interest are the **Damn Vulnerable Web Application**
    (**DVWA**,Â [http://www.dvwa.co.uk](http://www.dvwa.co.uk)), the OWASP Broken
    Web App ([https://sourceforge.net/projects/owaspbwa/files/](https://sourceforge.net/projects/owaspbwa/files/))
    and the Beebox VM (a VM-based version of the Buggy Web Application or *bwAPP*Â module,
    available atÂ [http://www.itsecgames.com](http://www.itsecgames.com)). Additional
    VMs for practice can be found at VulnHub ([https://www.vulnhub.com/](https://www.vulnhub.com/)).
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 对于有抱负的渗透测试人员来说，最好的事情是可黑客化的服务器VM的出现，其中有几个允许练习针对各种漏洞的尝试。Rapid7发布并支持了Metasploitable
    VM（[https://information.rapid7.com/metasploitable-download.html](https://information.rapid7.com/metasploitable-download.html)），虽然有点老了，但非常值得进行一般渗透测试的练习。然而，Web渗透测试受益于预配置应用程序的适当镜像，这样我们就可以直接进行有趣的事情。感兴趣的镜像包括**Damn
    Vulnerable Web Application**（**DVWA**，[http://www.dvwa.co.uk](http://www.dvwa.co.uk)）、OWASP
    Broken Web App（[https://sourceforge.net/projects/owaspbwa/files/](https://sourceforge.net/projects/owaspbwa/files/)）和Beebox
    VM（Buggy Web Application或*bwAPP*模块的基于VM的版本，可在[http://www.itsecgames.com](http://www.itsecgames.com)找到）。可以在VulnHub找到其他练习用的VM（[https://www.vulnhub.com/](https://www.vulnhub.com/)）。
- en: Unwitting clients
  id: totrans-99
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 不知情的客户
- en: If you are averse to disclosing your information and creating an account just
    to download a suitable MS desktop OS, you can also download OS and browser combination
    images that Microsoft encourages for the use of testers and developers ([https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/)).
    You'll want a selection of Windows 7, 8, and 10 hosts to play with for the sake
    of completeness; at various points in the book, it will make sense to try each
    of the multitude of browsers available (Internet Explorer/Edge, Firefox, Chrome,
    and so on).Â While the MSDN, Eval Center, and developer downloads will all work,Â for
    ease of setting up new environments, the latter approach sufficed for most of
    my preparatory work.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您不愿意透露您的信息并创建一个帐户来下载适合的MS桌面操作系统，您也可以下载微软鼓励测试人员和开发人员使用的操作系统和浏览器组合镜像（[https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/](https://developer.microsoft.com/en-us/microsoft-edge/tools/vms/)）。您可能需要选择Windows
    7、8和10主机，以便完整地进行测试；在本书的各个部分，尝试每个可用的浏览器（Internet Explorer/Edge、Firefox、Chrome等）是有意义的。虽然MSDN、Eval
    Center和开发人员下载都可以使用，但为了更轻松地设置新环境，后一种方法对我大部分的准备工作都足够了。
- en: Mobile device operating systems can be run virtually with varying success, with
    iOS being the lone holdout (good luck getting iOS running virtually!)Â Most of
    our techniques will exploit the browsers alone, so using a browser plugin or developer
    tool configuration can do the trick. A quick search from Firefox or Chrome for
    *user agent browser changer*Â will yield tools that allow a desktop browser to
    emulate any number of other browsers, both mobile and desktop based. I used the
    Kali VM's Firefox or Iceweasel browser whenever possible, falling back on Chrome
    on the same VM or IE/Edge, Safari, or others on the appropriate Windows VM, or
    my laptop's browser as needed.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 移动设备操作系统可以在虚拟环境中以不同的成功率运行，iOS是唯一的例外（祝你好运，试图在虚拟环境中运行iOS！）我们大多数的技术都将仅利用浏览器，因此使用浏览器插件或开发人员工具配置可以解决问题。从Firefox或Chrome快速搜索*用户代理浏览器更改器*将会找到工具，允许桌面浏览器模拟许多其他基于移动和桌面的浏览器。我尽可能使用Kali
    VM的Firefox或Iceweasel浏览器，必要时回退到同一VM上的Chrome或IE/Edge、Safari或其他适当的Windows VM上的浏览器，或者我笔记本电脑上的浏览器。
- en: Summary
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: '* * *'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: '* * *'
- en: Web application penetration testing can be a big undertaking. Failing to plan
    is planning to fail; it is essential that we have a well-defined process or testing
    framework in place that is both well understood by our technical team, as well
    as sanctioned by the customer's management for use in their environment. Pen testing
    inevitably forces us to understand some non-technical aspects of the job too.
    When we are targeting applications we do not own, across infrastructures that
    are provided by third parties, we will most certainly have to abide by the various
    rules and ethical norms of those many stakeholders. Â There are a lot of different
    angles to achieving this understanding, so at the very least this should be a
    deliberate and a well-thought out process.Â
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: Web应用程序渗透测试可能是一个庞大的工程。没有计划就是在计划失败；我们必须确保我们有一个明确定义的流程或测试框架，这个流程不仅被我们的技术团队充分理解，而且也得到了客户管理层的认可，可以在他们的环境中使用。渗透测试不可避免地迫使我们了解工作的一些非技术方面。当我们针对我们不拥有的应用程序，跨第三方提供的基础设施进行攻击时，我们肯定必须遵守许多利益相关者的各种规则和道德规范。要实现这种理解有很多不同的角度，所以至少这应该是一个深思熟虑的过程。
- en: 'In this chapter, weÂ took a look at some of the more prevalent testing methodologies
    and frameworks that we can draw from to establish our own process and practice.
    Â We also spent some time looking at how to scope our legal and ethical responsibilities.
    Unlike the black hat hackers out there, we are here to help insulate our customers
    against attacks, so we have rules to follow. All of the homework in defining our
    process and understanding our boundaries is tested against the sandbox we put
    together, and we covered some aspects of establishing a sandbox or lab of your
    own. Your own environment may look very different: different strokes for different
    folks!'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看了一些更为普遍的测试方法和框架，我们可以从中汲取经验，建立自己的流程和实践。我们还花了一些时间来了解如何确定我们的法律和道德责任范围。与黑客不同，我们在这里是为了帮助我们的客户抵御攻击，所以我们有规则要遵循。我们在定义我们的流程和了解我们的边界方面的所有作业都是根据我们组建的沙盒进行测试的，我们还涵盖了建立自己的沙盒或实验室的一些方面。你自己的环境可能看起来非常不同：因人而异！
- en: In our next chapter, we will finally start to delve into how we can recon and
    scope our targets. We will look at the tools available to make non-intrusive scans
    and stay off our target site's radar, as we plunge into how they are structured,
    reveal potential vectors for access, and catalog adjacencies and notes of interest
    that can help us in later phases of the test. Â Let's get to it!
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的下一章中，我们将最终开始深入探讨如何对我们的目标进行侦察和范围确定。我们将研究可用的工具，以进行非侵入式扫描并避开我们目标网站的雷达，同时我们将深入了解它们的结构，揭示访问的潜在向量，并记录可能有助于我们在测试的后期阶段的邻近关系和注意事项。让我们开始吧！
