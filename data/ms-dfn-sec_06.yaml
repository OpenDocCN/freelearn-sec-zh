- en: '*Chapter 5*: Cybersecurity Technologies and Tools'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '*第五章*: 网络安全技术与工具'
- en: '*"Digital transformation offers an enormous opportunity to reduce costs and
    increase productivity, but if done without stepping up on defensive security,
    it could end up being a disaster."*'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '*“数字化转型提供了巨大的机会，可以降低成本并提高生产力，但如果在没有加强防御安全的情况下进行，可能会导致灾难。”*'
- en: '*– Roberto Sasso – Founder and President, Club de Investigación Tecnológica*'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '*– Roberto Sasso – 技术研究俱乐部创始人兼主席*'
- en: There are thousands of tools available for cybersecurity and it will take you
    hundreds of years just to understand the basics of each of them, so to save your
    precious time, we will provide you with some insight into the *best* cybersecurity
    systems, methods, technologies, and tools for you to take advantage of.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 网络安全工具成千上万，仅仅了解它们的基础就需要几百年，因此为了节省宝贵的时间，我们将为你提供一些关于*最佳*网络安全系统、方法、技术和工具的见解，帮助你充分利用它们。
- en: Also, we are going to review a *must-have* hardware device that will help you
    bring your awareness campaigns to the next level.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们还将回顾一个*必备*硬件设备，帮助你将安全意识提升到一个新的高度。
- en: Additionally, you will get a better understanding of what an **Advanced Persistent
    Threat** (**APT**) is and how to prevent them, but also how you can leverage threat
    intelligence to stay ahead of the criminals.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你将更好地理解什么是**高级持续性威胁**（**APT**），如何防范它们，并且如何利用威胁情报保持领先于犯罪分子。
- en: Finally, you will understand the importance of critical thinking in cybersecurity
    and look at a real-life example of how a cybersecurity threat can become an IT
    solution.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，你将理解批判性思维在网络安全中的重要性，并通过一个真实案例，了解网络安全威胁如何转化为 IT 解决方案。
- en: 'In this chapter, we are going to cover the following topics:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Networking tools and technologies for cybersecurity
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络安全的网络工具和技术
- en: Pentesting tools and methods
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 渗透测试工具和方法
- en: Applying forensic tools and methods
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用法医工具和方法
- en: Dealing with APT
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应对 APT
- en: Leveraging security threat intelligence
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用安全威胁情报
- en: Converting a threat into a solution
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将威胁转化为解决方案
- en: Technical requirements
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: To get the most out of this chapter, you will need to install Kali Linux. This
    way, you can play around with the tools that we will overview. Kali Linux is very
    light, so you can install it on pretty much any old computer with internet access.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 为了充分利用本章内容，你需要安装 Kali Linux。这样，你就可以使用我们将要概述的工具。Kali Linux 非常轻量，因此几乎可以在任何一台带有互联网连接的旧电脑上安装。
- en: Another option is to use a virtual machine, but in that case, you may need to
    tweak some settings (especially your network settings) to ensure that all the
    tools will behave as expected.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种选择是使用虚拟机，但在这种情况下，你可能需要调整一些设置（特别是网络设置），以确保所有工具按预期工作。
- en: 'All the images, including pre-built virtual images, for virtual machines can
    be found here: [https://www.kali.org/downloads/](https://www.kali.org/downloads/).'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 所有图像，包括虚拟机的预构建虚拟图像，都可以在这里找到：[https://www.kali.org/downloads/](https://www.kali.org/downloads/)。
- en: We will also be reviewing the outstanding **WiFi Pineapple**, so having one
    of them will help you take the experience and knowledge of this chapter to the
    next level.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将回顾卓越的**WiFi Pineapple**，拥有它将帮助你将本章的经验和知识提升到一个新的水平。
- en: For more information about this must-have pentesting tool, go to [https://shop.hak5.org/products/wifi-pineapple](https://shop.hak5.org/products/wifi-pineapple).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 想了解更多关于这个必备渗透测试工具的信息，请访问[https://shop.hak5.org/products/wifi-pineapple](https://shop.hak5.org/products/wifi-pineapple)。
- en: Advanced wireless tools for cybersecurity
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络安全的高级无线工具
- en: As masters in defensive security, we need to know about and understand how the
    latest tools work. It does not matter if they were developed as offensive tools;
    you need to learn how to take advantage of them. Let's start by taking a look
    at some of the latest and coolest wireless tools.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 作为防御安全的专家，我们需要了解并理解最新工具的工作原理。无论它们是作为进攻性工具开发的，你都需要学会如何利用它们。让我们从一些最新和最酷的无线工具开始了解。
- en: Defending from wireless attacks
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防御无线攻击
- en: Wireless networks are by far the most used connection types, making them a big
    target for cybercriminals. Therefore, you need to be ahead of them and make sure
    that wireless security is a fundamental part of your cybersecurity strategy.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 无线网络是目前最常用的连接方式，因此它们成为了网络犯罪分子的主要目标。因此，你需要领先一步，确保无线安全是你网络安全战略的核心部分。
- en: There is an entire section in [*Chapter 8*](B16290_08_Final_JC_ePub.xhtml#_idTextAnchor193),
    *Enhancing Your Network Defensive Skills*, dedicated to network tools. However,
    here, we will take a look at some of the most important tools that are used in
    wireless attacks so that you can be ahead of the attackers and plan your defensive
    strategy accordingly.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第8章*](B16290_08_Final_JC_ePub.xhtml#_idTextAnchor193)《增强网络防御技能》中，有一个完整的部分专门讲解网络工具。然而，在这里，我们将看看一些在无线攻击中最重要的工具，以便你能领先于攻击者，并据此规划你的防御策略。
- en: The almighty WiFi Pineapple
  id: totrans-25
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 无所不能的WiFi Pineapple
- en: This is a must-have tool for auditing Wi-Fi networks. Created by *Hak5* back
    in 2008, this is probably the most recognized hardware pentesting tool in the
    world – maybe because of the power of this small box, its ease of use, or the
    huge variety of tools that it contains on a single device.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这是审计Wi-Fi网络时必备的工具。这个工具由*Hak5*在2008年创建，可能是全球最知名的硬件渗透测试工具——也许是因为这个小盒子的强大功能，易用性，或者它在单一设备上包含的各种工具。
- en: Tip
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: The geniuses at Hak5 put tremendous effort into keeping this tool up to date
    with the latest Wi-Fi auditing tools (for example, the MarkV received 22 firmware
    updates). However, there is a point where the hardware needs to be upgraded to
    include new tools (and improve the existing ones in terms of speed, range, and
    so on). Therefore, and considering the wide range of WiFi Pineapple versions,
    we decided to make this section as generic as possible to try to generally cover
    the tools available in most of the WiFi Pineapple versions.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Hak5的天才们投入了大量精力，不断更新这个工具以跟上最新的Wi-Fi审计工具（例如，MarkV收到了22次固件更新）。然而，到了某个阶段，硬件必须升级才能包括新的工具（并在速度、范围等方面改善现有工具）。因此，考虑到WiFi
    Pineapple的多个版本，我们决定尽量使本节内容通用，以尽可能涵盖大多数WiFi Pineapple版本中可用的工具。
- en: Now, let's explore some of the features of this fantastic tool.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看看这个神奇工具的一些功能。
- en: Rogue access point
  id: totrans-30
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 恶意接入点
- en: Have you ever noticed that your smartphone automatically connects to the wireless
    of your preferred café after you connect to it for the first time?
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 你是否曾注意到，当你第一次连接到你喜欢的咖啡馆的无线网络后，你的智能手机会自动连接到该咖啡馆的无线网络？
- en: Well, that feature was created to improve the user experience, but it also represents
    a serious security vulnerability.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能本是为了改善用户体验，但它也带来了严重的安全漏洞。
- en: To exploit this vulnerability, the attacker needs to *mimic* one of those *trusted*
    Wi-Fi **access points** (**AP**) so that the victim device will automatically
    connect to it. But the question is, how does the attacker know the name of the
    trusted networks on the victim's device? Well, here is where the clever attack
    starts.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 为了利用这个漏洞，攻击者需要*模仿*其中一个*受信任*的Wi-Fi **接入点**（**AP**），让受害者的设备自动连接到它。但问题是，攻击者如何知道受害者设备上受信任网络的名称呢？好吧，聪明的攻击就在这里开始了。
- en: First, let's take a look at the theory and concepts behind this attack.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们看看这个攻击背后的理论和概念。
- en: 'When your device (laptop, smartphone, and so on) has Wi-Fi turned *on* and
    it is not connected to any network, it will broadcast **Probe Request Frames**
    (**PRFs**), which contain the list of SSIDs that your device trusts. Those frames
    are captured by AP that review them and see whether their SSID is on the list;
    if so, it will start the connection process:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的设备（如笔记本电脑、智能手机等）打开Wi-Fi并且没有连接到任何网络时，它会广播**探针请求帧**（**PRFs**），其中包含设备信任的SSID列表。这些帧会被AP捕获，AP会查看这些帧，并检查其SSID是否在列表中；如果在，它就会启动连接过程：
- en: '![Figure 5.1 – Probe request/response structure'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.1 – 探针请求/响应结构'
- en: '](img/Figure_5_1_B16290.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_1_B16290.jpg)'
- en: Figure 5.1 – Probe request/response structure
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.1 – 探针请求/响应结构
- en: The magic (or evil) of this device is that it takes advantage of the fact that
    *probe requests are not encrypted*, captures them, and reads the list of trusted
    and open SSIDs.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 这个设备的魔力（或恶意）在于，它利用了*探针请求没有加密*的事实，捕获这些请求并读取受信任和开放的SSID列表。
- en: Then the device automatically creates an open AP (with no password) and uses
    the name of one of the trusted and open SSIDs. At this point, the victim's device
    will connect immediately to it.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，设备会自动创建一个开放的AP（没有密码），并使用一个受信任且开放的SSID名称。此时，受害者的设备将立即连接到该AP。
- en: Now that the victim's device is connected to the **rogue access point**, the
    attacker can execute a plurality of attacks, including the famous **man-in-the-middle
    attack**, which will be discussed in detail in [*Chapter 8*](B16290_08_Final_JC_ePub.xhtml#_idTextAnchor193),
    *Enhancing Your Network Defensive Skills*.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，受害者的设备已经连接到**恶意接入点**，攻击者可以执行多种攻击，包括著名的**中间人攻击**，这一点将在[*第8章*](B16290_08_Final_JC_ePub.xhtml#_idTextAnchor193)中详细讨论，*增强你的网络防御技能*。
- en: Tip
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Remember that the better you know the tools that will be used against you, the
    better you can prepare to reduce the **probability** and **impact** of those attacks.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，你对将要被用来攻击你的工具了解得越多，你就越能做好准备，减少这些攻击的**概率**和**影响**。
- en: Let's stop for a second to think about the danger of this attack and analyze
    how you can leverage this for your *defensive security strategy*.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们稍作停顿，思考一下这种攻击的危险，并分析你如何利用这些信息来支持你的*防御安全策略*。
- en: 'You can reduce the probability of this risk by updating two policies: the BYOD
    policy and the network policy. In this case, just make sure to include the following:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过更新两项政策来降低这种风险的可能性：BYOD政策和网络政策。在这种情况下，只需要确保包含以下内容：
- en: '*Wi-Fi must be off while traveling and just enable it on secure locations (office,
    home, secure hotel connections, and so on)*.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '*旅行时必须关闭Wi-Fi，仅在安全地点（如办公室、家中、安全的酒店连接等）启用Wi-Fi*。'
- en: As we saw in [*Chapter 4*](B16290_04_Final_JC_ePub.xhtml#_idTextAnchor092),
    *Patching Layer 8*, training is one of the most basic and effective tools in defensive
    security, and you can leverage great tools such as the **WiFi Pineapple** to make
    your training more engaging, but also to raise awareness about the potential impact
    of this attack.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在[*第4章*](B16290_04_Final_JC_ePub.xhtml#_idTextAnchor092)中看到的，*修补第8层*，培训是防御安全中最基础和有效的工具之一，你可以利用像**WiFi
    Pineapple**这样的优秀工具使你的培训更具吸引力，同时提高对这种攻击潜在影响的意识。
- en: Tip
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: You can raise awareness by performing yearly security campaigns, such as a **cybersecurity
    week**. Here, you can leverage this cool gadget to demonstrate that those attack
    vectors are real, easy to perform, and have devastating effects on your personal
    and professional data, systems, and devices.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过每年开展安全活动来提高意识，例如**网络安全周**。在这里，你可以利用这个酷炫的工具展示那些攻击向量是现实的、易于实施的，并且对你的个人和职业数据、系统以及设备造成毁灭性影响。
- en: Additionally, keep in mind that most users think that this type of attack will
    not happen to them (because they look too sophisticated), but when they see how
    easy it is to carry out the attack, they will be more receptive to adapting any
    policy or strategy that you put in place to prevent this type of attack, transforming
    your users from encountering a cybersecurity threat into defensive security agents.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，请记住，大多数用户认为这种类型的攻击不会发生在他们身上（因为它看起来太复杂了），但是当他们看到这种攻击是多么容易实施时，他们会更愿意接受你所制定的任何政策或策略来防范这种攻击，从而将你的用户从面临网络安全威胁的状态转变为防御安全的代理人。
- en: Recognizing an unauthorized AP in your infrastructure
  id: totrans-51
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 识别你基础设施中的未授权接入点（AP）。
- en: The WiFi Pineapple has a very cool module called **Recon**. This is a very clean
    interface that *allows you to see the invisible*. This is because it will show
    you information about what is happing with the Wi-Fi (AP and devices) in your
    infrastructure.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: WiFi Pineapple有一个非常酷的模块，叫做**Recon**。这是一个非常简洁的界面，*让你看到看不见的东西*。因为它会展示你关于你基础设施中的Wi-Fi（AP和设备）正在发生的事情的信息。
- en: 'Let''s explore the valuable information that you can gather here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来探索你可以在这里收集到的宝贵信息：
- en: Information about the SSID (broadcasted or hidden).
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于SSID的信息（广播或隐藏）。
- en: MAC address of the AP.
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接入点（AP）的MAC地址。
- en: Security type (WPA, WPE, mixed, and so on).
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全类型（WPA、WPE、混合模式等）。
- en: Information about whether WPS is enabled.
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 关于是否启用了WPS的信息。
- en: Wi-Fi channel used by the AP.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接入点（AP）使用的Wi-Fi频道。
- en: Signal strength.
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信号强度。
- en: Clients connected to each AP.
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个接入点（AP）连接的客户端。
- en: Client information, including the MAC address and name of the manufacturer (*gathered
    by analyzing the first three octets of the MAC address dynamically*).
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端信息，包括MAC地址和制造商名称（*通过动态分析MAC地址的前三个八位字节获取*）。
- en: You can also discover clients that are not associated with any AP (including
    IoT devices, speakers, cameras, and so on).
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你还可以发现那些未连接到任何接入点的客户端（包括物联网设备、扬声器、摄像头等）。
- en: 'Now, you can leverage all this data to perform the following defensive actions:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你可以利用所有这些数据执行以下防御措施：
- en: Detect unauthorized APs.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测未授权的接入点（AP）。
- en: Detect rogue APs (obfuscated by a hidden SSID).
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测伪造的 AP（通过隐藏 SSID 混淆）。
- en: Detect violations to network policies related to the security required for APs.
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测违反网络安全策略的行为，这些行为涉及 AP 所需的安全性。
- en: Detect vulnerable APs (a weak security type or WPS enabled).
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测脆弱的 AP（如安全类型弱或启用了 WPS）。
- en: Detect performance issues or interference from other systems due to saturation
    or utilization of a given Wi-Fi channel.
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测由于饱和或特定 Wi-Fi 通道的利用导致的性能问题或来自其他系统的干扰。
- en: Determine vulnerabilities due to devices connected to an AP they should not
    connect to or an AP with unauthorized devices connected.
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定因设备连接到不应连接的 AP 或连接了未经授权设备的 AP 而产生的漏洞。
- en: Detect potential attacks performed by another WiFi Pineapple.
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测另一个 WiFi Pineapple 执行的潜在攻击。
- en: Detect unauthorized devices in your infrastructure.
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测你基础设施中未经授权的设备。
- en: Tip
  id: totrans-72
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示
- en: As seen in this section, you can leverage this device to create your very own
    low-cost Wi-Fi monitoring tool, customize it based on your needs, and deploy it
    in no time.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 正如本节所示，你可以利用这款设备创建你自己的低成本 Wi-Fi 监控工具，根据你的需求进行定制，并迅速部署。
- en: 'Additionally, there are some actions you can perform over those APs points,
    including the following:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，您可以对这些 AP 点执行一些操作，包括以下内容：
- en: '**Add SSID to PineAP Pool**: This will make the WiFi Pineapple start mimicking
    the selected SSID. As we mentioned previously, this is a great tool that you can
    leverage during an event to *raise awareness* about how easy an attacker can perform
    this attack, and therefore the need to follow the policies, methods, systems,
    and tools to prevent it.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将 SSID 添加到 PineAP 池**：这将使 WiFi Pineapple 开始模仿所选的 SSID。如前所述，这是一个很棒的工具，你可以在活动中利用它来
    *提高意识*，展示攻击者如何轻松地执行这种攻击，因此需要遵循相关政策、方法、系统和工具来防止此类攻击。'
- en: '**Add SSID or clients to filter**: This is very useful when performing a *pentest*
    or *audit* to ensure that just a group of selected devices or APs can connect
    to your WiFi Pineapple.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**将 SSID 或客户端添加到过滤器**：在执行 *渗透测试* 或 *审计* 时，这非常有用，确保只有一组选定的设备或 AP 能够连接到你的 WiFi
    Pineapple。'
- en: '`802.11` protocol. It will do so by pretending to be the AP and sending a command
    to the connected devices to immediately disconnect from the AP.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`802.11` 协议。它通过假装是 AP，并向已连接的设备发送命令，让它们立即断开与 AP 的连接。'
- en: This could be useful in a situation where you need all the devices to immediately
    disconnect from a given AP. In this case, instead of looking for each device owner
    and requesting them to disconnect, you can do this very easily with a single click
    of your mouse, reducing the time of being exposed to a possible threat.
  id: totrans-78
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这在你需要让所有设备立即断开与特定 AP 的连接时非常有用。在这种情况下，你可以通过点击鼠标轻松完成，而不是逐一寻找每个设备的拥有者并要求他们断开连接，从而减少暴露于潜在威胁的时间。
- en: '**Capture a WPA handshake**: This is another great tool that can help raise
    awareness during a cybersecurity workshop to show how attacks are performed by
    attackers.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**捕获 WPA 握手**：这是另一个很棒的工具，可以帮助在网络安全研讨会上提高意识，展示攻击者是如何执行攻击的。'
- en: Tip
  id: totrans-80
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示
- en: People don't trust what they don't see, and this applies perfectly to security.
    A lot of people don't care much about attacks that they never see because they
    look distant, irrelevant, or impossible. Therefore, presenting them with how attacks
    are carried and how easy it is to perform them is the best way to raise awareness,
    as well as improving the level of cybersecurity, within the entire organization.
  id: totrans-81
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 人们不信任他们看不见的东西，这一点在安全领域尤为适用。很多人对那些他们从未看到的攻击并不在意，因为这些攻击看起来遥远、不相关或不可能。因此，向他们展示攻击是如何执行的以及攻击者执行这些攻击的简单性，是提高意识的最佳方式，同时也能提升整个组织的网络安全水平。
- en: Another cool thing about the WiFi Pineapple modules is that their GUI is configurable
    and responsive, so you can use the GUI and manage your Wi-Fi monitoring tool on
    the go using your smartphone!
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 关于 WiFi Pineapple 模块的另一个酷炫功能是，它们的 GUI 可以配置且具有响应性，因此你可以使用 GUI 并通过智能手机随时管理你的 Wi-Fi
    监控工具！
- en: '**Bonus**: The WiFi Pineapple Mark VII has a very cool feature that allows
    us to visualize the data using a 3D map where you can visually see the AP and
    the connected devices in a very cool way:'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附加功能**：WiFi Pineapple Mark VII 具有一个非常酷的功能，可以让我们使用 3D 地图可视化数据，您可以以一种非常酷的方式直观地看到
    AP 和已连接的设备：'
- en: '![Figure 5.2 – 3D map visualization of the WiFi Pineapple Mark VII'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.2 – WiFi Pineapple Mark VII 的 3D 地图可视化'
- en: '](img/Figure_5_2_B16290.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_2_B16290.jpg)'
- en: Figure 5.2 – 3D map visualization of the WiFi Pineapple Mark VII
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.2 – WiFi Pineapple Mark VII 的 3D 地图可视化
- en: This is a feature of version `1.0.0` and is considered experimental, but some
    extra options and features are expected in its upcoming releases, so stay tuned!
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 这是版本`1.0.0`的一个特性，虽然被认为是实验性的，但预计在即将发布的版本中会增加一些额外的选项和功能，请保持关注！
- en: Other Pineapple auditing and testing tools
  id: totrans-88
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 其他 Pineapple 审计和测试工具
- en: Do you want to test how vulnerable your users are to a Wi-Fi attack? Or maybe
    you want to test whether your users understood your beautiful cybersecurity training?
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 你想测试你的用户对 Wi-Fi 攻击的脆弱性吗？或者你也许想测试你的用户是否理解了你精心设计的网络安全培训？
- en: In any case, you can leverage **PineAP** to create a fake SSID with a catchy
    name such as *Free Wi-Fi, Free Game,* and so on and see which devices fall into
    the trap and connect to them.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，你可以利用**PineAP**创建一个虚假的 SSID，取一个吸引眼球的名字，比如*Free Wi-Fi, Free Game*，然后观察哪些设备掉进陷阱并连接上去。
- en: Tip
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Besides being a great tool for companies and corporations, this can also be
    leveraged by consultants to demonstrate a user's vulnerabilities and open the
    door to a plurality of cybersecurity services (training, developing a defensive
    security strategy, and so on).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 除了对公司和企业来说是一个很好的工具外，咨询师也可以利用它向用户展示其漏洞，并为多种网络安全服务打开大门（如培训、制定防御安全策略等）。
- en: Are you also a developer? If so, we should look at how to improve WiFi Pineapple
    with new features.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 你也是开发者吗？如果是的话，我们应该看看如何通过新功能提升 WiFi Pineapple。
- en: Expanding the device's capabilities
  id: totrans-94
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 扩展设备的功能
- en: 'There is a lot that you can do with this hardware, so the creators of the WiFi
    Pineapple decided to open their device for community collaboration so that you,
    as a user, can leverage those modules and add them to your device with a couple
    of clicks:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过这个硬件做很多事情，因此 WiFi Pineapple 的创作者决定开放他们的设备进行社区协作，以便你作为用户，可以利用这些模块并通过几次点击将它们添加到你的设备中：
- en: '![Figure 5.3 – Adding community modules to the WiFi Pineapple Mark VII'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.3 – 向 WiFi Pineapple Mark VII 添加社区模块'
- en: '](img/Figure_5_3_B16290.jpg)'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_3_B16290.jpg)'
- en: Figure 5.3 – Adding community modules to the WiFi Pineapple Mark VII
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.3 – 向 WiFi Pineapple Mark VII 添加社区模块
- en: 'If you are a developer, I recommend that you visit this link as you can get
    a lot of perks by developing modules for the WiFi Pineapple: [https://shop.hak5.org/pages/developer-program](https://shop.hak5.org/pages/developer-program).'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是开发者，我建议你访问这个链接，因为通过为 WiFi Pineapple 开发模块，你可以获得很多福利：[https://shop.hak5.org/pages/developer-program](https://shop.hak5.org/pages/developer-program)。
- en: 'Now that you know about these great Wi-Fi tools (hardware and software), it
    is time to move on and look at another exciting topic: **pentesting**.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你了解了这些强大的 Wi-Fi 工具（硬件和软件），是时候继续探讨另一个令人兴奋的话题：**渗透测试**。
- en: Pentesting tools and methods
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 渗透测试工具和方法
- en: There is a common misconception that *pentesting = networking testing*, and
    that is a huge mistake.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 许多人误以为*渗透测试 = 网络测试*，这是一个巨大的错误。
- en: As a master in defensive security, you need to drive your defensive strategy
    in an integral way by including all the actors, factors, and actions that may
    impact your infrastructure.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 作为防御安全的专家，你需要以整体的方式推动你的防御策略，涵盖所有可能影响你基础设施的参与者、因素和行动。
- en: Therefore, in this section, we will be exploring all the different tools and
    methods that you need to leverage to *create the most comprehensive and powerful
    cybersecurity strategy possible*.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，在本节中，我们将探讨你需要利用的所有不同工具和方法，以*创建最全面、最强大的网络安全策略*。
- en: Metasploit framework
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Metasploit 框架
- en: Metasploit is considered an **exploitation framework**, which means that it's
    a powerful pack of tools and utilities that you can leverage to test your infrastructure.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit 被认为是一个**利用框架**，这意味着它是一套强大的工具和实用程序包，你可以利用它来测试你的基础设施。
- en: 'It includes a variety of tools that can be used for the following purposes:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 它包括多种工具，可用于以下目的：
- en: Information gathering (passive and active)
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息收集（被动和主动）
- en: Vulnerability scanning
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞扫描
- en: Exploitation
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用
- en: Post-exploitation
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 后渗透
- en: And many other additional modules including some to help the attacker to cover
    its tracks
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 还有许多其他附加模块，包括一些帮助攻击者掩盖痕迹的模块
- en: The intent of this book is not to focus on the offensive part, but it will be
    valuable for you to know the basics about this tool. Due to this, we will be covering
    this in depth in [*Chapter 15*](B16290_15_Final_JC_ePub.xhtml#_idTextAnchor350),
    *Leveraging Pentesting for Defensive Security*.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的目的是不专注于攻击部分，但了解这个工具的基础知识对你来说会非常有价值。因此，我们将在[*第15章*](B16290_15_Final_JC_ePub.xhtml#_idTextAnchor350)中详细介绍这一部分，*利用渗透测试进行防御性安全*。
- en: Social engineering toolkit
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 社会工程工具包
- en: 'This is a very powerful toolkit that''s used mostly by attackers; however,
    you can also take advantage of this tool to develop the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常强大的工具包，主要被攻击者使用；然而，你也可以利用这个工具来开发以下内容：
- en: Awareness campaigns.
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 意识提升活动。
- en: Improved training.
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 改进的培训。
- en: Realistic labs.
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 真实的实验室。
- en: Assess the susceptibility of the users to a given attack.
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估用户对特定攻击的易受攻击性。
- en: Tip
  id: totrans-120
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示
- en: As we mentioned previously, showing the susceptibility of the employees of a
    given attack (for example, demonstrating that 60% of the employees put their credentials
    on a fake page) is a great way to get support and a budget from upper management.
  id: totrans-121
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如前所述，展示员工对某一攻击的易受攻击性（例如，证明60%的员工将他们的凭证输入到一个假页面上）是获得高层管理支持和预算的好方法。
- en: 'As shown in the following screenshot, the **Social Engineering Toolkit** (**SET**)
    is an all-in-one toolkit that contains all the utilities that you need to create
    realistic and engaging awareness campaigns:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，**社会工程工具包**（**SET**）是一个一体化工具包，包含了你创建真实而引人入胜的意识提升活动所需的所有工具：
- en: '![Figure 5.4 – The main menu of the Social Engineering Toolkit (SET)'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.4 – 社会工程工具包 (SET) 的主菜单'
- en: '](img/Figure_5_4_B16290.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_4_B16290.jpg)'
- en: Figure 5.4 – The main menu of the Social Engineering Toolkit (SET)
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.4 – 社会工程工具包 (SET) 的主菜单
- en: 'Now, let''s take a look at the most important aspects of those tools:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下这些工具的最重要方面：
- en: '**Spearphishing attack vectors**: This is a great tool that you can leverage
    to test whether your employees are susceptible to **phishing attacks**. Here,
    you can craft the message so that it''s as realistic as possible. Additionally,
    the tool lets you include a payload if needed.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**钓鱼攻击向量**：这是一个很好的工具，可以用来测试你的员工是否容易受到**钓鱼攻击**。在这里，你可以制作尽可能真实的消息。此外，该工具还允许你根据需要加入恶意负载。'
- en: If you want to take this test to the next level, you can even spoof email addresses
    to challenge more technical teams.
  id: totrans-128
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果你想将此测试提升到更高的层次，你甚至可以伪造电子邮件地址，挑战更技术化的团队。
- en: 'As shown in the following screenshot, the tool gives you the option to create
    an automated attack. You can even customize it based on a variety of options:'
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如下截图所示，该工具为你提供了创建自动化攻击的选项。你甚至可以根据多种选项进行定制：
- en: '![Figure 5.5 – SET Spearphishing module'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.5 – SET 钓鱼模块'
- en: '](img/Figure_5_5_B16290.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_5_B16290.jpg)'
- en: Figure 5.5 – SET Spearphishing module
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.5 – SET 钓鱼模块
- en: '**Web attacks**: Here, you have a variety of options to play with. The most
    common is **website cloning**, in which the system clones a frequently visited
    website (such as a social media site). Then, when the user accesses the site,
    it will be sent to a fake site where you have full control to inject malicious
    code and harvest user credentials.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络攻击**：在这里，你有多种选择可以尝试。最常见的是**网站克隆**，系统会克隆一个常访问的网站（例如社交媒体网站）。然后，当用户访问该网站时，会被重定向到一个假网站，在那里你可以完全控制，注入恶意代码并收集用户凭证。'
- en: Harvesting credentials is a very dangerous task – in fact, the recommendation
    is not to save the user credentials. Instead, once the user inputs the credentials,
    the button will just display a message, stating that this was a cybersecurity
    test and that their credentials could be compromised by others using this method
    by not capturing those credentials.
  id: totrans-134
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 收集凭证是一个非常危险的任务——实际上，建议不要保存用户凭证。相反，一旦用户输入凭证，按钮会显示一条消息，说明这是一次网络安全测试，并指出通过这种方法未收集这些凭证，用户凭证可能会被他人利用。
- en: Tip
  id: totrans-135
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 提示
- en: '*Never* harvest credentials without proper written authorization from the legal
    department. This is because you need proof that the company are aware of the activity
    that you are performing (especially if you are a third party hired to perform
    this test), but also because legal teams need to be involved to ensure alignment
    with regulations or laws.'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '*绝不要*在没有法律部门书面授权的情况下收集凭证。因为你需要证明公司知道你正在执行的活动（特别是如果你是第三方承包商进行此测试），同时也需要法律团队的参与，以确保符合相关法规或法律。'
- en: Additionally, instead of injecting malicious code, you can just create some
    harmless HTML that tells the user that this was a security test, but that next
    time, it could be a real attack. This technique will help you increase awareness
    between users.
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，除了注入恶意代码，你还可以创建一些无害的 HTML，告诉用户这只是一次安全测试，但下次可能会是真正的攻击。这个技术有助于提高用户的安全意识。
- en: 'As shown in the following screenshot, you can also leverage additional attack
    mechanisms, such as **HTML Attacks** (**HTAs**), web jacking attacks, and more:'
  id: totrans-138
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如下图所示，你还可以利用其他攻击机制，如**HTML 攻击**（**HTAs**）、网页劫持攻击等：
- en: '![Figure 5.6 – SET web attack module'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.6 – SET 网络攻击模块'
- en: '](img/Figure_5_6_B16290.jpg)'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_6_B16290.jpg)'
- en: Figure 5.6 – SET web attack module
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.6 – SET 网络攻击模块
- en: '`autorun.inf` file that will be automatically executed when the device (USB,
    DVD, CD) is inserted.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`autorun.inf` 文件将在设备（USB、DVD、CD）插入时自动执行。'
- en: Here, you can get a cheap USB and load it with this utility to determine how
    vulnerable employees are to falling into this trap.
  id: totrans-143
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，你可以购买一款便宜的 USB 并将该工具加载其中，以判断员工在多大程度上容易掉入这个陷阱。
- en: 'Since this attack requires investing in the necessary hardware, it is recommended
    to do this on a targeted population, such as company executives, to determine
    their likelihood to insert an unknown USB device:'
  id: totrans-144
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 由于这种攻击需要投资必要的硬件，因此建议在目标人群中进行测试，比如公司高管，以确定他们插入未知 USB 设备的可能性：
- en: '![Figure 5.7 – Payloads available on the infectious media generator (SET)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.7 – 可用于感染性媒体生成器（SET）的有效载荷'
- en: '](img/Figure_5_7_B16290.jpg)'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_7_B16290.jpg)'
- en: Figure 5.7 – Payloads available on the infectious media generator (SET)
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.7 – 可用于感染性媒体生成器（SET）的有效载荷
- en: '**QR code attacks**: This is a very interesting attack vector. With this tool,
    an attacker can use QR codes to redirect users to infected sites. Therefore, attackers
    can post adverts with a QR code near the targeted office to infect some devices.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**二维码攻击**：这是一个非常有趣的攻击路径。使用这个工具，攻击者可以利用二维码将用户重定向到感染站点。因此，攻击者可以在目标办公室附近发布带有二维码的广告，以感染一些设备。'
- en: For example, you could place some fake adverts that provide your QR code. This
    code redirects the user to your HTML. That HTML will then inform the user that
    this is an attack technique but that this time, it was safe. At this point, you
    could provide a link that contains additional training material about this topic.
  id: totrans-149
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 例如，你可以放置一些假广告，提供你的二维码。这个二维码会将用户重定向到你的 HTML 页面。该 HTML 页面会通知用户这是一种攻击技术，但此次是安全的。此时，你可以提供一个链接，其中包含关于该话题的额外培训材料。
- en: Now let's take a look at exe2hex.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看 exe2hex。
- en: exe2hex
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: exe2hex
- en: This is a very interesting tool that helps encode binary files into ASCII text
    format to make the transfer process to the target machine easier. It helps the
    attacker bypass many of your security controls.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常有趣的工具，可以帮助将二进制文件编码为 ASCII 文本格式，从而简化将文件传输到目标计算机的过程。它帮助攻击者绕过你的许多安全控制。
- en: Then, the attacker will leverage two built-in tools in Windows (**debug.exe**
    and **PowerShell**) to transform the text into an executable file and perform
    the attack.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，攻击者将利用 Windows 中的两个内置工具（**debug.exe** 和 **PowerShell**）将文本转换为可执行文件并执行攻击。
- en: The ability to bypass most of your security controls and place a malicious file
    in the target computer is very scary. However, the good news is that there is
    an easy way to prevent this attack vector.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 绕过大多数安全控制并将恶意文件放置到目标计算机中的能力非常可怕。然而，好消息是，有一种简单的方法可以防止这种攻击路径。
- en: As we mentioned previously, this attack leverages two built-in tools to complete
    its execution. debug.exe is not included on current Windows systems, so unless
    you have an unsupported version of Windows, then you don't have to worry about
    this (and if you do have an unsupported version of Windows on your computer, then
    this will be another reason to migrate that machine as soon as possible).
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，这种攻击利用两个内置工具来完成其执行。debug.exe 在当前 Windows 系统中并未包含，所以除非你使用的是不受支持的 Windows
    版本，否则不必担心这个问题（如果你确实在计算机上使用了不受支持的 Windows 版本，这将是尽快迁移该机器的另一个原因）。
- en: The other one is PowerShell, which, as you may know, can be exploited by a variety
    of attacks. So, here, the recommendation is to disable PowerShell on your Windows
    systems.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个工具是 PowerShell，正如你所知道的，它可以被多种攻击利用。所以，这里推荐禁用 Windows 系统上的 PowerShell。
- en: If you have a big infrastructure, you can even do this as a **Group Policy Object**
    (**GPO**) on **Active Directory**. Additionally, you can even create a GPO to
    enable access to PowerShell to a group of super admins (if needed).
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个大型基础设施，你甚至可以在**Active Directory**上通过**组策略对象**（**GPO**）来进行此操作。此外，你还可以创建一个GPO来启用对超级管理员组的PowerShell访问（如果需要的话）。
- en: There are many more pentesting tools available on the market, but since pentesting
    is handled by offensive security specialists, our goal was just to provide a quick
    review so that you are familiar with them. Now, it's time to talk about our next
    exciting topic, which is forensics.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 市场上有许多其他的渗透测试工具，但由于渗透测试是由进攻性安全专家来处理的，我们的目标只是提供一个简要的回顾，以便你熟悉这些工具。现在，是时候谈论我们的下一个激动人心的话题——法医分析了。
- en: Applying forensics tools and methods
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 申请法医工具和方法
- en: There will be cases where you will be required by management or the HR department
    to gather some data from a given computer as evidence because a procedure, policy,
    law, or regulation has been violated.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，管理层或人力资源部门会要求你从指定的计算机中收集一些数据作为证据，因为某些程序、政策、法律或法规被违反了。
- en: Therefore, you need to have a variety of tools at hand that allow you to do
    this task in the most integral way, first to preserve your neutrality, but also
    because you may be dealing with evidence that may end up in court. So, let's start
    by understanding the best practices about how to manage evidence.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，你需要手头有多种工具，以便以最完整的方式执行这项任务，首先是为了保持你的中立性，其次是因为你可能正在处理最终可能进入法庭的证据。那么，让我们从理解如何管理证据的最佳实践开始。
- en: Dealing with evidence
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 处理证据
- en: When dealing with digital evidence, data integrity is key to demonstrating that
    the evidence has not been altered in any way.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在处理数字证据时，数据完整性是关键，它能够证明证据在任何方式下都没有被篡改。
- en: The best way to achieve this is by using hashes because even the most minimal
    change will make the hash change. However, if the hash remains the same, then
    you will be 100% certain that the file hasn't been altered.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 达到这一点的最佳方式是使用哈希，因为即使是最小的更改也会使哈希值发生变化。然而，如果哈希值保持不变，那么你就可以100%确定文件没有被修改。
- en: 'As shown in the following screenshot, just making the first letter a capital
    letter completely changes the hash:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，只需将第一个字母改为大写，哈希值就会发生完全不同的变化：
- en: '![Figure 5.8 – Hashes of a .txt file'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.8 – .txt文件的哈希值'
- en: '](img/Figure_5_8_B16290.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_8_B16290.jpg)'
- en: Figure 5.8 – Hashes of a .txt file
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.8 – .txt文件的哈希值
- en: If you need to hash several files or folders, you can ZIP them or add them to
    an ISO image and then apply the hash to that image file.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要对多个文件或文件夹进行哈希计算，你可以将它们压缩成ZIP文件，或将它们添加到ISO镜像中，然后对该镜像文件应用哈希值。
- en: If you want to play around with hashes, you can download **HashCalc**, a great,
    lightweight tool that allows you to create hashes using several hashing algorithms.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想玩哈希值，你可以下载**HashCalc**，这是一款轻量级的工具，允许你使用多种哈希算法生成哈希值。
- en: Forensic tools
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 法医工具
- en: Let's take a look at the most common tools that you can use to perform forensic-related
    tasks.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看你可以用来执行与法医相关任务的最常见工具。
- en: Kali Linux Forensics Mode
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Kali Linux法医模式
- en: If you need to gather data from a computer, using **Kali Linux Forensics Mode**
    is a great way to do so.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要从计算机中收集数据，使用**Kali Linux法医模式**是一个很好的方法。
- en: This is a live, bootable version of Kali preloaded with all the necessary forensics
    tools, enabling you to gather information without the need to install anything
    on the hard drive, keeping the hard drive untouched while you perform your forensics
    tasks.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个可启动的Kali版本，预装了所有必要的法医工具，允许你在不需要安装任何东西到硬盘上的情况下收集信息，确保硬盘在执行法医任务时保持未修改。
- en: 'As shown in the following screenshot, this live version is available in all
    Kali Linux distributions:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，这个实时版本在所有Kali Linux发行版中都有提供：
- en: '![Figure 5.9 – Booting Kali Linux Forensics Mode'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: '![图5.9 – 启动Kali Linux法医模式'
- en: '](img/Figure_5_9_B16290.jpg)'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_9_B16290.jpg)'
- en: Figure 5.9 – Booting Kali Linux Forensics Mode
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 图5.9 – 启动Kali Linux法医模式
- en: Now, let's take a look at Autopsy.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看看Autopsy（尸检工具）。
- en: Autopsy
  id: totrans-181
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Autopsy（尸检工具）
- en: This is a must-have forensics platform.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个必备的法医平台。
- en: Included in Kali Linux, but also available on Windows, this platform is packed
    with all the tools that you may need during an investigation.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 这个平台包含在Kali Linux中，但也可以在Windows上使用，配备了你在调查过程中可能需要的所有工具。
- en: 'There is a lot of useful information that you can gather with this tool; here
    are some examples:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这个工具你可以收集到大量有用的信息；以下是一些例子：
- en: Operating system of the source machine
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 源机器的操作系统
- en: Operating system installation data
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统安装数据
- en: Registered owner of the operating system
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统的注册所有者
- en: Computer name
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 计算机名称
- en: Uptime
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行时间
- en: Number of user accounts
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户账户数量
- en: Last login data
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 上次登录数据
- en: List of network cards
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络卡列表
- en: IP and MAC addresses of the machine
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器的 IP 和 MAC 地址
- en: Traces of hacking software being installed
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装了黑客软件的痕迹
- en: Email client
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子邮件客户端
- en: Email address (web)
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子邮件地址（网页）
- en: SMTP accounts
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SMTP 账户
- en: Deleted files
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已删除的文件
- en: Traces of known viruses
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已知病毒的痕迹
- en: Website history, bookmarks, and cookies
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站历史、书签和 cookies
- en: EXIF data from images
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 图片的 EXIF 数据
- en: Geolocation/geotagging of files
  id: totrans-202
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件的地理位置/地理标签
- en: 'As shown in *Figure 5.9*, the GUI for Autopsy on Windows is very clean and
    intuitive:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 如 *图 5.9* 所示，Autopsy 在 Windows 上的图形界面非常简洁直观：
- en: '![Figure 5.10 – Autopsy Windows interface'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.10 – Autopsy Windows 界面'
- en: '](img/Figure_5_10_B16290.jpg)'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_10_B16290.jpg)'
- en: Figure 5.10 – Autopsy Windows interface
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.10 – Autopsy Windows 界面
- en: Now, let's take a look at Binwalk.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下 Binwalk。
- en: Binwalk
  id: totrans-208
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Binwalk
- en: This tool is great for looking for embedded files or code inside a firmware
    image.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 这个工具非常适合寻找固件镜像中的嵌入文件或代码。
- en: This is especially useful if you need to look for the signature of tiles, compressed
    files, firmware headers, Linux kernels, bootloaders, and so on.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要查找瓦片、压缩文件、固件头、Linux 内核、引导加载程序等的签名，这尤其有用。
- en: 'As shown in the following screenshot, there are lots of options that are available
    for customizing the scan, making this a very versatile tool:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，有许多可用选项可以自定义扫描，使其成为一个非常多功能的工具：
- en: '![Figure 5.11 – Binwalk options'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.11 – Binwalk 选项'
- en: '](img/Figure_5_11_B16290.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_11_B16290.jpg)'
- en: Figure 5.11 – Binwalk options
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.11 – Binwalk 选项
- en: Now, let's take a look at bulk-extractor.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下 bulk-extractor。
- en: bulk-extractor
  id: totrans-216
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: bulk-extractor
- en: 'This is an interesting tool that''s included in the Kali Linux suite that extracts
    a variety of information from files, including the following:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个有趣的工具，它包含在 Kali Linux 套件中，可以从文件中提取多种信息，包括以下内容：
- en: Credit card information
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信用卡信息
- en: URLs
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: URL
- en: Email addresses
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子邮件地址
- en: This is very useful if you need to scan files (or even an entire computer) to
    look for sensitive information and detect or prevent possible data leakages.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要扫描文件（甚至整个计算机）来查找敏感信息，检测或防止可能的数据泄漏，这非常有用。
- en: Another cool feature is that this tool allows you to create a list of common
    words based on the data that's been scanned, which can then be converted into
    the input for a dictionary attack.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个很酷的功能是，这个工具允许你基于已扫描的数据创建一个常见单词列表，然后将其转换为字典攻击的输入。
- en: Tip
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: If you have a password checking engine, then you can use this wordlist as a
    custom dictionary input to prevent users from selecting related passwords and
    thus eliminating this vulnerability.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有一个密码检查引擎，那么你可以使用这个字典列表作为自定义词典输入，以防止用户选择相关的密码，从而消除这一漏洞。
- en: The tool can also present information as histograms so that you can easily identify
    common email addresses, domains, and much more.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 该工具还可以将信息呈现为直方图，便于你轻松识别常见的电子邮件地址、域名等。
- en: Recovering deleted files
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 恢复已删除的文件
- en: We all know what it feels like when an important file is deleted by mistake.
    And there is no doubt that a lot of times, people will come to you for help, so
    if you want to be someone's hero, then you better have this tool handy.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 我们都知道当一个重要文件被错误删除时的感受。毫无疑问，很多时候人们会来找你帮忙，因此，如果你想成为某人的英雄，那你最好随时准备好这个工具。
- en: On Kali Linux, you can use **Foremost** to review deleted files based on their
    headers, footers, and internal data structures.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kali Linux 上，你可以使用 **Foremost** 根据文件的头部、尾部和内部数据结构来恢复已删除的文件。
- en: 'As shown in the following screenshot, the tool has a lot of parameters that
    you can use to improve the recovery process:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，该工具有很多参数可以用来改善恢复过程：
- en: '![Figure 5.12 – Foremost commands'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.12 – Foremost 命令'
- en: '](img/Figure_5_12_B16290.jpg)'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_12_B16290.jpg)'
- en: Figure 5.12 – Foremost commands
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.12 – Foremost 命令
- en: 'This tool was supposed to be installed by default on Kali Linux. However, if
    you cannot find it, just use the following command to install it:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 这个工具本应默认安装在 Kali Linux 上。然而，如果你找不到它，只需使用以下命令来安装：
- en: '[PRE0]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you have Windows, you can use the famous **Recuva**. This tool (which has
    a basic free version) works great when it comes to recovering recently deleted
    files.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你使用 Windows，你可以使用著名的 **Recuva**。这个工具（它有一个基本的免费版本）在恢复最近删除的文件时非常有效。
- en: The reason for this is when you delete a document in Windows, you are just deleting
    its pointer, but the data is still on the hard drive. So, what this type of software
    does is search for files on the hard drive and then recreate the Windows index
    table to make the file reappear on the operating system. However, to make computers
    faster, the data is written in the first available spot of the hard drive. So,
    the more you use the computer, the higher the risk that the data you want to recover
    gets overwritten by another file.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为当你在Windows中删除文档时，实际上只是删除了其指针，但数据仍然保留在硬盘上。所以，这种类型的软件会搜索硬盘上的文件，然后重建Windows索引表，使文件在操作系统中重新出现。然而，为了提高计算机的速度，数据会写入硬盘上的第一个可用位置。因此，你越频繁地使用计算机，想要恢复的数据被另一个文件覆盖的风险就越大。
- en: 'Now, let''s learn about probably the most complex attack vector: **APTs**.'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们了解一下可能是最复杂的攻击向量：**APT**。
- en: Dealing with APTs
  id: totrans-238
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 处理APT攻击
- en: The tactics covered in this book aim to defend your infrastructure against the
    most common types of attacks and threat vectors. However, there is one type of
    threat that we have not covered yet – a type of attack that, due to the complexity
    involved, is believed to be backed by the government and various organizations.
    This attack is called APTs.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 本书涵盖的战术旨在保护您的基础设施免受最常见的攻击和威胁向量。然而，还有一种威胁我们尚未涉及——由于其复杂性，这种攻击被认为得到政府和各种组织的支持。这种攻击被称为APT。
- en: 'In this type of attack, the attackers use a variety of tactics, techniques,
    and resources to gain sustained access over an extended period of time to disrupt
    or spy on a given set of systems to achieve a given goal, such as the following
    examples:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种类型的攻击中，攻击者使用各种战术、技术和资源，在较长时间内持续访问系统，以干扰或监视特定的系统集合，从而实现特定目标，以下是一些示例：
- en: Steal intellectual property or trade secrets.
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 偷窃知识产权或商业机密。
- en: Obtain a continuous flow of sensitive information.
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取持续流动的敏感信息。
- en: Sabotage a given infrastructure, system, or process.
  id: totrans-243
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破坏特定的基础设施、系统或流程。
- en: Reroute funds.
  id: totrans-244
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 转移资金。
- en: As we mentioned previously, these are very organized attacks, normally performed
    by a coordinated group in which the main goal is not to gain access, but to remain
    undetected, which means that some actions will be slowly performed over time to
    avoid some triggers that will review their presence.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前提到的，这些攻击非常有组织，通常由协调一致的团队执行，主要目标不是获得访问权限，而是保持不被发现，这意味着一些操作会慢慢执行，以避免触发某些触发器，从而暴露他们的存在。
- en: 'To achieve this, the attackers normally follow five phases:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 为了实现这一目标，攻击者通常会遵循五个阶段：
- en: '**Discovery**: Here, the attackers will gather as much information as possible
    from the victim and employees, providers, partners, and so on.'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**发现**：在这里，攻击者会尽可能多地收集受害者及其员工、供应商、合作伙伴等的信息。'
- en: This phase normally includes a combination of technical research activities
    (performed with recognition tools) and physical research activities such as dumpster
    diving, physical location recognition, social engineering, and so on.
  id: totrans-248
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这一阶段通常包括技术研究活动（使用识别工具执行）和物理研究活动，例如翻垃圾箱、物理位置识别、社会工程学等。
- en: '**Infiltration**: This stage is about gaining access to the systems and infrastructure.
    As we mentioned previously, in this type of attacks, the attacker will use customized
    attacks to prevent detection (script kiddies are not allowed here). The use of
    zero-day exploits is very common here.'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渗透**：这个阶段是关于获取系统和基础设施的访问权限。正如我们之前提到的，在这种类型的攻击中，攻击者会使用定制化的攻击方法来防止被发现（此处不允许脚本小子）。零日漏洞的利用在这里非常常见。'
- en: '**Expansion**: Here, the attacker is trying to gain access to additional systems
    (lateral movement) or escalate privileges over the current systems.'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**扩展**：在这里，攻击者试图获得额外系统的访问权限（横向移动）或提升当前系统的权限。'
- en: At this point, the attacker will leave some backdoors to ensure future access
    in case they get caught.
  id: totrans-251
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在此阶段，攻击者会留下一些后门，以确保在被捕的情况下可以继续访问。
- en: '**Extraction**: Once the attacker has navigated through the infrastructure
    and the target information has been identified, the next step is to start extracting
    data.'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提取**：一旦攻击者穿越了基础设施并确定了目标信息，下一步就是开始提取数据。'
- en: Here, the attacker will use advanced methods (such as DNS tunneling) to exfiltrate
    the desired information.
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 在这里，攻击者会使用先进的方法（如DNS隧道）来窃取所需的信息。
- en: '**Diversion**: We have seen cases in which very complex and coordinated attacks
    will use another attack vector (such as a DDOS) to mask the real attacks and deviate
    resources to deal with that attack while leaving the real attack undetected.'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**转移**：我们曾见过非常复杂且协调的攻击，利用另一种攻击方式（如DDoS）掩盖真实的攻击，并将资源转移到应对这种攻击上，同时让真实的攻击保持未被发现。'
- en: Script Kiddies
  id: totrans-255
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 脚本小子
- en: This is the name given to attackers with limited knowledge about cybersecurity
    and whose only skill is to run scripts (even without understanding what the script
    is doing, and sometimes even leaving their devices infected).
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这是指那些对网络安全了解有限、唯一技能是运行脚本的攻击者（即使不理解脚本在做什么，有时甚至让他们的设备被感染）。
- en: Now, let's learn how to defend our infrastructure against these types of threats.
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来学习如何防御这些类型的威胁。
- en: Defensive techniques
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 防御技术
- en: 'Being able to apply *all the defensive techniques that we have been learning
    about* will reduce the possibility of an ATP occurring. However, let''s take a
    look at some specific techniques that you can apply to prevent ATPs:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 能够应用*我们所学的所有防御技术*将减少ATP发生的可能性。然而，让我们来看一下你可以应用的一些具体技术来防止ATP：
- en: Monitor traffic (in and out) to detect leads of infiltration or exfiltration.
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控流量（进出）以检测渗透或外泄的线索。
- en: Increase the application of multi-factor authentication.
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加多因素认证的应用。
- en: Analyze logs to detect patterns of compromise.
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析日志以检测妥协模式。
- en: Keep a good identity and access management strategy and ensure that unused or
    disabled users are deleted.
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持良好的身份和访问管理策略，并确保删除未使用或已禁用的用户。
- en: Set monitors on logs to detect tampering attempts (in this type of attack, logs
    can be deleted to prevent tracking).
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在日志上设置监控，以检测篡改尝试（在这种类型的攻击中，日志可能会被删除，以防止追踪）。
- en: Use Honeypots to detect and confuse attackers (we will show you how to create
    your own Honeypot on [*Chapter 10*](B16290_10_Final_JC_ePub.xhtml#_idTextAnchor231)*,
    Applying IoT Security*).
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用蜜罐来检测并迷惑攻击者（我们将在[*第10章*](B16290_10_Final_JC_ePub.xhtml#_idTextAnchor231)《应用物联网安全》中向你展示如何创建自己的蜜罐）。
- en: The good news is that we also have advanced systems and tools that can be used
    against criminals, and one of them is **threat intelligence**. We will look at
    this next.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 好消息是，我们也有先进的系统和工具可以用来对抗犯罪分子，其中之一就是**威胁情报**。接下来我们将探讨这一点。
- en: Leveraging security threat intelligence
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用安全威胁情报
- en: A simple Google search will tell you that there are too many different definitions
    of threat intelligence, so to make things easier, let's define it as *gathering,
    analyzing, and understanding threats, threat actors, and the associated behaviors
    of the attacks*.
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 简单的Google搜索会告诉你，威胁情报有许多不同的定义，因此，为了简化问题，我们将其定义为*收集、分析和理解威胁、威胁行为者及其攻击行为模式*。
- en: Simply put, threat intelligence is about creating knowledge (intelligence) based
    on correlated data.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 简单来说，威胁情报是基于相关数据创建知识（情报）。
- en: Several solutions are available, most of which are offered *as a service*, in
    which a third-party vendor provides you with access to that knowledge for a monthly
    fee.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种解决方案可供选择，其中大多数是*作为服务*提供的，第三方供应商为你提供这些知识的访问权限，通常按月收费。
- en: Now, let's move on to the next section to understand what **threat intelligence**
    is.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们进入下一个部分，了解什么是**威胁情报**。
- en: Threat intelligence 101
  id: totrans-272
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 威胁情报101
- en: Attackers are known for sharing data about their attacks with others, spreading
    the danger of you becoming a victim.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者以与他人共享攻击数据而著称，这样做会增加你成为受害者的风险。
- en: But with threat intelligence, we can achieve even better results because it
    is about sharing data related to attacks and performing a smart analysis of that
    data. This helps create knowledge that can be used by others to defend against
    those kinds of attacks.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 但有了威胁情报，我们可以取得更好的结果，因为它是关于共享与攻击相关的数据，并对这些数据进行智能分析。这有助于创造可以被他人用来防御类似攻击的知识。
- en: Companies are now leveraging cognitive technologies to analyze data and create
    insights. However, those cognitive systems are only as good as the training they
    have received, so when looking for a threat intelligence solution, the research
    capabilities and the expertise of the company in the field should be two of the
    most important factors you consider.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，公司正在利用认知技术分析数据并创造洞察。然而，这些认知系统的效果取决于它们所接受的训练，因此，在寻找威胁情报解决方案时，公司的研究能力和该领域的专业知识应当是你考虑的两个最重要因素。
- en: Regarding data feeds, which also vary between vendors, some use private datasets,
    while others promote sharing data with open communities to create a bigger pool
    of data to improve how their systems are ingested.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 关于数据流，虽然不同供应商的做法各不相同，一些使用私有数据集，而另一些则提倡与开放社区共享数据，以创建更大的数据池，从而改善其系统的输入方式。
- en: 'The following diagram shows an example of some of the data inputs that are
    used by threat intelligence systems:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了威胁情报系统所使用的一些数据输入的示例：
- en: '![Figure 5.13 – Threat intelligence inputs'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 5.13 – 威胁情报输入'
- en: '](img/Figure_5_13_B16290.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_5_13_B16290.jpg)'
- en: Figure 5.13 – Threat intelligence inputs
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5.13 – 威胁情报输入
- en: Implementing threat intelligence
  id: totrans-281
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实施威胁情报
- en: 'Threat intelligence outputs are normally used as input to improve several cybersecurity
    systems and processes. Some examples are as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 威胁情报的输出通常作为输入，用来改进多个网络安全系统和流程。以下是一些示例：
- en: '**Improving cybersecurity systems**: Some tools, such as IPS, IDS, and firewalls,
    have the option to ingest threat intelligence data to improve how threats are
    detected.'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**改进网络安全系统**：一些工具，如IPS、IDS和防火墙，提供了摄取威胁情报数据的选项，以改进威胁的检测方式。'
- en: '**Incident response**: Threat intelligence is a great tool for incident response
    teams as it allows them to reduce false positives, enhance their skills, improve
    their analysis process, and reduce response times.'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**事件响应**：威胁情报是事件响应团队的一个重要工具，它可以帮助减少误报、提升技能、改善分析流程并缩短响应时间。'
- en: '**Security Operations Centers** (**SOCs**): By bringing this new knowledge
    to the team, a SOC can greatly improve all the necessary metrics by leveraging
    and applying all the knowledge gathered from the threat intelligence.'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全运营中心**（**SOCs**）：通过将这些新知识带入团队，SOC可以利用并应用从威胁情报中收集到的所有知识，显著提高所有必要的指标。'
- en: One of the biggest advantages of this approach is that it helps the SOC stay
    relevant and up to date with the latest threats and available remediations.
  id: totrans-286
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这种方法的最大优势之一是，它帮助SOC保持相关性，紧跟最新的威胁和可用的修复措施。
- en: '**Risk analysis**: Your team can leverage threat intelligence data to perform
    a better risk analysis, not just to help them identify new risks, but also to
    adjust and update the probability and impact of already identified risks.'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**风险分析**：你的团队可以利用威胁情报数据进行更好的风险分析，不仅帮助识别新风险，还能调整和更新已识别风险的概率和影响。'
- en: Also, you can leverage this information to create new risk responses and mitigation
    strategies.
  id: totrans-288
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 此外，你还可以利用这些信息来创建新的风险响应和缓解策略。
- en: Now, before we close this chapter, let's look at an example of how to leverage
    your expertise and knowledge to analyze some security vulnerabilities and transform
    them into solutions. At the end of the day, mastering is not just about repeating
    what is in a book but using that knowledge to create new stuff.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，在我们结束本章之前，让我们看一个如何利用你的专业知识分析一些安全漏洞并将其转化为解决方案的例子。归根结底，掌握的意义不仅仅是重复书中的内容，而是利用这些知识创造新的事物。
- en: Converting a threat into a solution
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将威胁转化为解决方案
- en: As you have seen throughout this book, there are a lot of hacking tools that
    an attacker can use against your infrastructure. However, as a master in defensive
    security, you need to leverage those threats and use them for your own benefit
    – *use your opponent's weapon against them*.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在本书中看到的，攻击者可以使用许多黑客工具来攻击你的基础设施。然而，作为防御安全的专家，你需要利用这些威胁并将它们为自己所用——*用对手的武器反击他们*。
- en: 'Let''s look at an example. Remember the USB HID vulnerabilities that we reviewed
    in [*Chapter 2*](B16290_02_Final_JC_ePub.xhtml#_idTextAnchor035), *Managing Threats,
    Vulnerabilities, and Risks*? Well, let me show you how those vulnerabilities were
    leveraged to create a solution that solves another cybersecurity issue: **passwords**!'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看一个例子。记得我们在[*第2章*](B16290_02_Final_JC_ePub.xhtml#_idTextAnchor035)中回顾的USB
    HID漏洞吗？*管理威胁、漏洞和风险*？好吧，让我给你展示这些漏洞是如何被利用来创建一个解决方案，从而解决另一个网络安全问题：**密码**！
- en: To start, let's begin by looking at the well-known problem of passwords.
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们从一个大家熟知的密码问题开始。
- en: The problem
  id: totrans-294
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 问题
- en: Currently, you can use password managers to inject your passwords into applications
    inside your operating system, but you cannot use it to inject passwords *to log
    into a computer*. So, to log into the operating system, you will have to open
    the password manager application, read the password, and manually type it in,
    which is a terrible user experience but also carries the risk of shouldering.
    There is one solution that allows you to inject a password, but that solution
    needs you to install an application on your operating system, so this is not a
    true plug-and-play solution. Also, sysadmins need to log into a variety of servers,
    so they need a solution that is true plug and play but also works with all operating
    systems so that the solution can be used across the infrastructure.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 目前，你可以使用密码管理器将密码注入到操作系统中的应用程序，但你不能用它来注入密码*以登录计算机*。因此，为了登录操作系统，你必须打开密码管理器应用程序，读取密码，然后手动输入，这不仅是糟糕的用户体验，还存在泄露的风险。有一种解决方案可以让你注入密码，但这种解决方案需要在操作系统上安装一个应用程序，所以这并不是一个真正的即插即用解决方案。而且，系统管理员需要登录各种服务器，所以他们需要一种真正的即插即用解决方案，并且能够在所有操作系统上工作，这样该解决方案才能在整个基础设施中使用。
- en: The solution
  id: totrans-296
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 解决方案
- en: Here, we can leverage the capabilities of the USB HID drivers (the same ones
    the criminals used for USB attacks) to create a unique plug-and-play solution
    that enables sysadmins to log onto any server, regardless of the operating system,
    without the need of any prior installation, making it a high-value and easy-to-implement
    solution.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以利用 USB HID 驱动程序的功能（那些犯罪分子用来进行 USB 攻击的驱动程序），创建一个独特的即插即用解决方案，使系统管理员可以在任何服务器上登录，无论操作系统是什么，而无需事先安装任何软件，从而使其成为一个高价值且易于实现的解决方案。
- en: Now, sysadmins can securely use crazy-secure passwords (up to 250 characters)
    with no effort because they will be securely transmitted to the server with the
    press of a button.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，系统管理员可以轻松使用超安全密码（最多250个字符），因为只需按一下按钮，密码就会安全地传输到服务器。
- en: 'If you want to read more about this patent, please visit the following link:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于这个专利的信息，请访问以下链接：
- en: '[https://patents.google.com/patent/US10762188B2](https://patents.google.com/patent/US10762188B2)'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://patents.google.com/patent/US10762188B2](https://patents.google.com/patent/US10762188B2)'
- en: I hope this example motivates you to look at vulnerabilities once more but with
    a different mindset. Start thinking about not just how to prevent them, but also
    how you can leverage them as an innovative defensive solution.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望这个例子能激励你重新审视漏洞，但以不同的心态开始思考。开始思考的不仅仅是如何防止它们，还要思考如何将它们作为一种创新的防御解决方案加以利用。
- en: Summary
  id: totrans-302
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned how to leverage one of the best hacking devices
    (**the WIFI Pineapple**) in your defensive security strategy, as well as how to
    protect against the latest attacks performed with that device.
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章节中，你学习了如何将最强大的黑客设备之一（**WIFI Pineapple**）融入到你的防御安全策略中，以及如何保护自己免受利用该设备进行的最新攻击。
- en: Additionally, you learned about pentesting and forensics and some of the best
    tools used in those fields so that you can leverage them.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你还了解了渗透测试和取证的一些内容，以及在这些领域中使用的最佳工具，以便你可以将它们加以利用。
- en: Then, you learned about probably the most dangerous threat in cybersecurity,
    the infamous APT, and more importantly, how to protect your infrastructure against
    them.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，你了解了可能是网络安全中最危险的威胁——臭名昭著的 APT，并且更重要的是，如何保护你的基础设施免受这些威胁。
- en: Now, it is time to move on to the next chapter, where you will become a *master*
    of securing Windows infrastructures (Windows servers, patching, Active Directory,
    endpoint security, and more).
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，到了进入下一章节的时候了，在这一章节，你将成为保护 Windows 基础设施（Windows 服务器、补丁管理、Active Directory、端点安全等）方面的*大师*。
- en: There, you will be exposed to the best hardening strategies for Windows servers,
    including *creating your own hardening checklist!*
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你将接触到 Windows 服务器的最佳加固策略，包括*创建你自己的加固检查表！*
- en: Further reading
  id: totrans-308
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'Want to know more about Kali Linux tools? Then this is the place to go. Here,
    you will find all the tools pre-loaded on Kali Linux, sorted by type: [https://tools.kali.org/tools-listing](https://tools.kali.org/tools-listing).'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 想了解更多关于 Kali Linux 工具的信息吗？那这里就是你需要去的地方。在这里，你将找到 Kali Linux 上预装的所有工具，并按类型分类：[https://tools.kali.org/tools-listing](https://tools.kali.org/tools-listing)。
- en: 'Here, you can check the latest version of the WiFi Pineapple that''s available,
    as well as documentation, community, and support: [https://shop.hak5.org/products/wifi-pineapple](https://shop.hak5.org/products/wifi-pineapple).'
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，你可以查看最新的 WiFi Pineapple 版本，以及相关文档、社区和支持：[https://shop.hak5.org/products/wifi-pineapple](https://shop.hak5.org/products/wifi-pineapple)。
- en: If you want to know more about Metasploit, including the newest available version,
    the different types of versions available, documentation, community, and even
    contribute to the development of the project, please visit [https://www.metasploit.com/](https://www.metasploit.com/).
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于 Metasploit 的信息，包括最新版本、不同版本类型、文档、社区，甚至参与该项目的开发，请访问 [https://www.metasploit.com/](https://www.metasploit.com/)。
