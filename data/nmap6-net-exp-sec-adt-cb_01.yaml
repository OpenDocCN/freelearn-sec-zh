- en: Chapter 1. Nmap Fundamentals
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第1章。Nmap基础知识
- en: Note
  id: totrans-1
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: This chapter shows you how to do some things that in many situations might be
    illegal, unethical, a violation of the terms of service, or just not a good idea.
    It is provided here to give you information that may be of use to protect yourself
    against threats and make your own system more secure. Before following these instructions,
    be sure you are on the right side of the legal and ethical line... use your powers
    for good!
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章向您展示了如何执行在许多情况下可能是非法、不道德、违反服务条款或只是不明智的一些操作。这里提供这些信息是为了让您了解如何保护自己免受威胁，并使自己的系统更加安全。在遵循这些说明之前，请确保您站在法律和道德的一边……运用您的力量为善！
- en: 'In this chapter we will cover:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Downloading Nmap from the official source code repository
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从官方源代码仓库下载Nmap
- en: Compiling Nmap from source code
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从源代码编译Nmap
- en: Listing open ports on a remote host
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出远程主机上的开放端口
- en: Fingerprinting services of a remote host
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对远程主机的指纹服务
- en: Finding live hosts in your network
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的网络中查找活动主机
- en: Scanning using specific port ranges
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用特定端口范围进行扫描
- en: Running NSE scripts
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行NSE脚本
- en: Scanning using a specified network interface
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用指定的网络接口进行扫描
- en: Comparing scan results with Ndiff
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Ndiff比较扫描结果
- en: Managing multiple scanning profiles with Zenmap
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Zenmap管理多个扫描配置文件
- en: Detecting NAT with Nping
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nping检测NAT
- en: Monitoring servers remotely with Nmap and Ndiff
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nmap和Ndiff远程监控服务器
- en: Introduction
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: '**Nmap** (Network Mapper) is an open-source tool specialized in network exploration
    and security auditing, originally published by Gordon "Fyodor" Lyon. The official
    website ([http://nmap.org](http://nmap.org)) describes it as follows:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**Nmap**（网络映射器）是一款专门用于网络探索和安全审计的开源工具，最初由Gordon "Fyodor" Lyon发布。官方网站（[http://nmap.org](http://nmap.org)）对其进行了如下描述：'
- en: Nmap (Network Mapper) is a free and open source (license) utility for network
    discovery and security auditing. Many systems and network administrators also
    find it useful for tasks such as network inventory, managing service upgrade schedules,
    and monitoring host or service uptime. Nmap uses raw IP packets in novel ways
    to determine what hosts are available on the network, what services (application
    name and version) those hosts are offering, what operating systems (and OS versions)
    they are running, what type of packet filters/firewalls are in use, and dozens
    of other characteristics. It was designed to rapidly scan large networks, but
    works fine against single hosts. Nmap runs on all major computer operating systems,
    and official binary packages are available for Linux, Windows, and Mac OS X.
  id: totrans-18
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: Nmap（网络映射器）是一个用于网络发现和安全审计的免费开源（许可证）实用程序。许多系统和网络管理员也发现它在网络清单、管理服务升级计划和监控主机或服务的正常运行时间等任务中非常有用。Nmap以新颖的方式使用原始IP数据包来确定网络上有哪些主机可用，这些主机提供了哪些服务（应用程序名称和版本），它们正在运行哪种操作系统（和操作系统版本），正在使用哪种类型的数据包过滤器/防火墙，以及其他几十种特征。它旨在快速扫描大型网络，但也可以对单个主机进行扫描。Nmap可在所有主要计算机操作系统上运行，并提供Linux、Windows和Mac
    OS X的官方二进制软件包。
- en: There are many other port scanners out there, but none of them even comes close
    to offering the flexibility and advanced options of Nmap.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 市面上有许多其他端口扫描工具，但没有一个能够提供Nmap的灵活性和高级选项。
- en: The **Nmap Scripting Engine (NSE)** has revolutionized the possibilities of
    a port scanner by allowing users to write scripts that perform custom tasks using
    the host information collected by Nmap.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**Nmap脚本引擎（NSE）**通过允许用户编写使用Nmap收集的主机信息执行自定义任务的脚本，彻底改变了端口扫描仪的可能性。'
- en: 'Additionally, the Nmap Project includes other great tools:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Nmap项目还包括其他出色的工具：
- en: '**Zenmap**: A graphical interface for Nmap'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Zenmap**：Nmap的图形界面'
- en: '**Ndiff**: A tool for scan result comparison'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Ndiff**：用于比较扫描结果的工具'
- en: '**Nping**: An excellent tool for packet generation and traffic analysis'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Nping**：用于生成数据包和流量分析的优秀工具'
- en: '**Ncrack**: An Nmap-compatible tool for brute forcing network logins'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Ncrack**：用于暴力破解网络登录的与Nmap兼容的工具'
- en: '**Ncat**: A debugging utility to read and write data across networks'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Ncat**：用于在网络上读写数据的调试工具'
- en: Needless to say, it is essential that every security professional and network
    administrator master this tool to conduct security assessments, monitor, and administer
    networks efficiently.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 不用说，每个安全专业人员和网络管理员都必须掌握这个工具，以便进行安全评估、高效地监控和管理网络。
- en: Nmap's community is very active, and new features are added every week. I encourage
    you to always keep an updated copy in your arsenal, if you haven't done this already;
    and even better, to subscribe to the development mailing list at [http://cgi.insecure.org/mailman/listinfo/nmap-dev](http://cgi.insecure.org/mailman/listinfo/nmap-dev).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap的社区非常活跃，每周都会添加新功能。我鼓励您始终在您的工具库中保持最新版本，如果您还没有这样做；更好的是，订阅开发邮件列表，网址为[http://cgi.insecure.org/mailman/listinfo/nmap-dev](http://cgi.insecure.org/mailman/listinfo/nmap-dev)。
- en: This chapter describes how to do some of the most common tasks with Nmap, including
    port scanning and target enumeration. It also includes recipes that illustrate
    how handy Zenmap's profiles are, how to use Nping for NAT detection, and different
    applications of Ndiff, including how to set up a remote monitoring system with
    some help of bash scripting and cron. I've added as many reference links with
    additional material as possible; I recommend you visit them to learn more about
    the inner workings of the advanced scanning techniques performed by Nmap.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 本章描述了如何使用Nmap执行一些最常见的任务，包括端口扫描和目标枚举。它还包括一些示例，说明了Zenmap的配置文件有多方便，如何使用Nping进行NAT检测，以及Ndiff的不同应用，包括如何借助bash脚本和cron设置远程监控系统。我尽可能添加了许多参考链接，建议您访问它们以了解更多有关Nmap执行的高级扫描技术内部工作的信息。
- en: I've also created the website [http://nmap-cookbook.com](http://nmap-cookbook.com)
    to post new, related material and additional recipes, so make sure you stop by
    from time to time.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我还创建了网站[http://nmap-cookbook.com](http://nmap-cookbook.com)来发布新的相关材料和额外的示例，所以请确保您不时地过来逛逛。
- en: Downloading Nmap from the official source code repository
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从官方源代码存储库下载Nmap
- en: This section describes how to download Nmap's source code from the official
    subversion repository. By doing so, users can compile the latest version of Nmap
    and keep up with the daily updates that are committed to the subversion repository.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 本节描述了如何从官方子版本存储库下载Nmap的源代码。通过这样做，用户可以编译Nmap的最新版本，并跟上提交到子版本存储库的每日更新。
- en: Getting ready
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备
- en: 'Before continuing, you need to have a working Internet connection and access
    to a subversion client. Unix-based platforms come with a command-line client called
    **subversion** (**svn**). To check if its already installed in your system, just
    open a terminal and type:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在继续之前，您需要有一个工作的互联网连接和访问子版本客户端。基于Unix的平台配备了一个名为**subversion**（**svn**）的命令行客户端。要检查它是否已安装在您的系统中，只需打开终端并键入：
- en: '[PRE0]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If it tells you that the command was not found, install `svn` using your favorite
    package manager or build it from source code. The instructions for building svn
    from source code are out of the scope of this book, but they are widely documented
    online. Use your favorite search engine to find specific instructions for your
    system.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 如果它告诉您找不到该命令，请使用您喜欢的软件包管理器安装`svn`或从源代码构建它。从源代码构建svn的说明超出了本书的范围，但在网上有广泛的文档记录。使用您喜欢的搜索引擎找到您系统的具体说明。
- en: If you would rather work with a graphical user interface, RapidSVN is a very
    popular, cross-platform alternative. You can download and install RapidSVN from
    [http://rapidsvn.tigris.org/](http://rapidsvn.tigris.org/).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您更喜欢使用图形用户界面，RapidSVN是一个非常受欢迎的跨平台替代品。您可以从[http://rapidsvn.tigris.org/](http://rapidsvn.tigris.org/)下载并安装RapidSVN。
- en: How to do it...
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Open your terminal and enter the following command:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 打开您的终端并输入以下命令：
- en: '[PRE1]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Tip
  id: totrans-41
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: '**Downloading the example code**'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '**下载示例代码**'
- en: You can download the example code files for all Packt books you have purchased
    from your account at [http://www.packtpub.com](http://www.packtpub.com). If you
    purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从[http://www.packtpub.com](http://www.packtpub.com)的帐户中下载您购买的所有Packt图书的示例代码文件。如果您在其他地方购买了本书，您可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册以直接通过电子邮件接收文件。
- en: 'Wait until svn downloads all the files stored in the repository. You should
    see the list of the added files as it finishes, as shown in the following screenshot:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 等到svn下载存储库中的所有文件。当它完成时，您应该看到添加的文件列表，如下面的屏幕截图所示：
- en: '![How to do it...](img/7485_01_01.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/7485_01_01.jpg)'
- en: When the program returns/exits, you will have Nmap's source code in your current
    directory.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 当程序返回/退出时，您将在当前目录中拥有Nmap的源代码。
- en: How it works...
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: '[PRE2]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: This command downloads a copy of the remote repository located at [https://svn.nmap.org/nmap/](https://svn.nmap.org/nmap/).
    This repository has world read access to the latest stable build, allowing svn
    to download your local working copy.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令将下载位于[https://svn.nmap.org/nmap/](https://svn.nmap.org/nmap/)的远程存储库的副本。该存储库具有对最新稳定构建的全球读取访问权限，允许svn下载您的本地工作副本。
- en: There's more...
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you are using RapidSVN then follow these steps:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用RapidSVN，则按照以下步骤操作：
- en: Right-click on **Bookmarks**.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 右键单击**书签**。
- en: Click on **Checkout New Working Copy**.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**检出新的工作副本**。
- en: Type `https://svn.nmap.org/nmap/` in the URL field.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在URL字段中键入`https://svn.nmap.org/nmap/`。
- en: Select your local working directory.
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您的本地工作目录。
- en: Click on **OK** to start downloading your new working copy.![There's more...](img/7485_01_02_new.jpg)
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**确定**开始下载您的新工作副本。![还有更多...](img/7485_01_02_new.jpg)
- en: Experimenting with development branches
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 尝试开发分支
- en: If you want to try the latest creations of the development team, there is a
    folder named `nmap-exp` that contains different experimental branches of the project.
    Code stored there is not guaranteed to work all the time, as the developers use
    it as a sandbox until it is ready to be merged into the stable branch. The full
    subversion URL of this folder is [https://svn.nmap.org/nmap-exp/](https://svn.nmap.org/nmap-exp/).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您想尝试开发团队的最新创作，那么有一个名为`nmap-exp`的文件夹，其中包含项目的不同实验分支。存储在那里的代码不能保证始终有效，因为开发人员将其用作沙盒，直到准备合并到稳定分支为止。该文件夹的完整子版本URL是[https://svn.nmap.org/nmap-exp/](https://svn.nmap.org/nmap-exp/)。
- en: Keeping your source code up-to-date
  id: totrans-59
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 保持您的源代码最新
- en: 'To update a previously-downloaded copy of Nmap, use the following command inside
    your working directory:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新先前下载的Nmap副本，请在工作目录中使用以下命令：
- en: '[PRE3]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: You should see the list of files that have been updated, as well as some revision
    information.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该看到已更新的文件列表，以及一些修订信息。
- en: See also
  id: totrans-63
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Compiling Nmap f**rom source code* recipe
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*从源代码编译Nmap*配方'
- en: The *Listing open ports on a remote host* recipe
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机上的开放端口*配方'
- en: The *Fingerprinting services of a remote host* recipe
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*对远程主机的服务进行指纹识别*配方'
- en: The *Running NSE scripts* recipe
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*配方'
- en: The *Comparing scan results with Ndiff* recipe
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Ndiff比较扫描结果*配方'
- en: The *Managing multiple scanning profiles with Zenmap* recipe
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理多个扫描配置文件*配方'
- en: The *Generating a network topology graph with Zenmap* recipe in [Chapter 8](ch08.html
    "Chapter 8. Generating Scan Reports"), Generating *Scan Reports*
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第8章](ch08.html "第8章。生成扫描报告")中的*使用Zenmap生成网络拓扑图*配方，生成*扫描报告*'
- en: The *Saving scan results in normal format* recipe in [Chapter 8](ch08.html "Chapter 8. Generating
    Scan Reports"), Generating *Scan Reports*
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第8章](ch08.html "第8章。生成扫描报告")中的*以正常格式保存扫描结果*配方，生成*扫描报告*'
- en: Compiling Nmap from source code
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从源代码编译Nmap
- en: Precompiled packages always take time to prepare and test, causing delays between
    releases. If you want to stay up-to-date with the latest additions, compiling
    Nmap's source code is highly recommended.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 预编译的软件包总是需要时间来准备和测试，导致发布之间的延迟。如果您想要保持与最新添加的内容同步，强烈建议编译Nmap的源代码。
- en: This recipe describes how to compile Nmap's source code in the Unix environment.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 该食谱描述了如何在Unix环境中编译Nmap的源代码。
- en: Getting ready
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Make sure the following packages are installed in your system:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您的系统中安装了以下软件包：
- en: '`gcc`'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gcc`'
- en: '`openssl`'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`openssl`'
- en: '`make`'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`make`'
- en: Install the missing software using your favorite package manager or build it
    from source code. Instructions to build these packages from source code are out
    of the scope of this book but are available online.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 使用您喜欢的软件包管理器安装缺少的软件，或者从源代码构建。从源代码构建这些软件包的说明超出了本书的范围，但可以在线获得。
- en: How to do it...
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: Open your terminal and go into the directory where Nmap's source code is stored.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开您的终端并进入Nmap源代码存储的目录。
- en: 'Configure it according to your system:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据您的系统进行配置：
- en: '[PRE4]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: An ASCII dragon warning you about the power of Nmap will be displayed (as shown
    in the following screenshot) if successful, otherwise lines specifying an error
    will be displayed.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 如果成功，将显示一个ASCII龙警告您Nmap的强大（如下图所示），否则将显示指定错误的行。
- en: '![How to do it...](img/7485_01_03.jpg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤...](img/7485_01_03.jpg)'
- en: 'Build Nmap using the following command:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令构建Nmap：
- en: '[PRE5]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: If you don't see any errors, you have built the latest version of Nmap successfully.
    You can check this by looking for the compiled binary `Nmap` in your current directory.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有看到任何错误，那么您已成功构建了最新版本的Nmap。您可以通过查找当前目录中编译的二进制文件`Nmap`来验证这一点。
- en: 'If you want to make Nmap available for all the users in the system, enter the
    following command:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如果要使Nmap对系统中的所有用户可用，请输入以下命令：
- en: '[PRE6]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: How it works...
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: We used the script `configure` to set up the different parameters and environmental
    variables affecting your system and desired configuration. Afterwards, GNUs `make`
    generated the binary files by compiling the source code.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用脚本`configure`来设置不同的参数和影响您的系统和所需配置的环境变量。然后，GNU的`make`通过编译源代码生成了二进制文件。
- en: There's more...
  id: totrans-94
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you only need the Nmap binary, you can use the following configure directives
    to avoid installing Ndiff, Nping, and Zenmap:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您只需要Nmap二进制文件，可以使用以下配置指令来避免安装Ndiff、Nping和Zenmap：
- en: Skip the installation of Ndiff by using `--without-ndiff`
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`--without-ndiff`跳过Ndiff的安装
- en: Skip the installation of Zenmap by using `--without-zenmap`
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`--without-zenmap`跳过Zenmap的安装
- en: Skip the installation of Nping by using `--without-nping`
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过使用`--without-nping`跳过Nping的安装
- en: OpenSSL development libraries
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: OpenSSL开发库
- en: OpenSSL is optional when building Nmap. Enabling it allows Nmap to access the
    functions of this library related to multiprecision integers, hashing, and encoding/decoding
    for service detection and Nmap NSE scripts.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建Nmap时，OpenSSL是可选的。启用它允许Nmap访问与多精度整数、哈希和编码/解码相关的此库的功能，用于服务检测和Nmap NSE脚本。
- en: The name of the OpenSSL development package in Debian systems is `libssl-dev`.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 在Debian系统中，OpenSSL开发包的名称是`libssl-dev`。
- en: Configure directives
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置指令
- en: 'There are several configure directives that can be used when building Nmap.
    For a complete list of directives, use the following command:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在构建Nmap时可以使用几个配置指令。要获取完整的指令列表，请使用以下命令：
- en: '[PRE7]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Precompiled packages
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 预编译软件包
- en: There are several precompiled packages available online ([http://nmap.org/download.html](http://nmap.org/download.html))
    for those who don't have access to a compiler, but unfortunately, it's very likely
    you will be missing features unless its a very recent build. Nmap is continuously
    evolving. If you are serious about harnessing the power of Nmap, keep your local
    copy up-to-date with the official repository.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在线上有几个预编译的软件包（[http://nmap.org/download.html](http://nmap.org/download.html)）可供使用，适用于那些无法访问编译器的人，但不幸的是，除非是最近的版本，否则很可能会缺少功能。Nmap在不断发展。如果您真的想利用Nmap的功能，就要保持本地副本与官方仓库同步。
- en: See also
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Downloading Nmap from the official source code repository* recipe
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*从官方源代码仓库下载Nmap*食谱'
- en: The *Listing open ports on a remote host* recipe
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机上的开放端口*食谱'
- en: The *Fingerprinting services of a remote host* recipe
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*对远程主机的服务进行指纹识别*食谱'
- en: The *Comparing scan results with Ndiff* recipe
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Ndiff比较扫描结果*食谱'
- en: The *Managing multiple scanning profiles with Zenmap* recipe
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理多个扫描配置文件*食谱'
- en: The *Running NSE scripts* recipe
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*食谱'
- en: The *Scanning using a specified network interface* recipe
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用指定的网络接口进行扫描*食谱'
- en: The *Saving scan results in normal format* recipe in [Chapter 8](ch08.html "Chapter 8. Generating
    Scan Reports"), Generating *Scan Reports*
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第8章](ch08.html "第8章。生成扫描报告")中的*保存正常格式的扫描结果*食谱，生成*扫描报告*
- en: The *Generating a network topology graph with Zenmap* recipe in [Chapter 8](ch08.html
    "Chapter 8. Generating Scan Reports"), Generating *Scan Reports*
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第8章](ch08.html "第8章。生成扫描报告")中的*使用Zenmap生成网络拓扑图*食谱，生成*扫描报告*
- en: Listing open ports on a remote host
  id: totrans-117
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 列出远程主机上的开放端口
- en: This recipe describes the simplest way of using Nmap to determine the port states
    on a remote host, a process used to identify running services commonly referred
    as **port scanning**.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 该食谱描述了使用Nmap确定远程主机上端口状态的最简单方法，这是用于识别常用服务的运行过程，通常称为**端口扫描**。
- en: How to do it...
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: Open a terminal.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端。
- en: 'Type the following command:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令：
- en: '[PRE8]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The scan results should appear on the screen, showing the interesting ports
    and their states. The ports marked as open are of special interest as they represent
    services running on the target host.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描结果应该显示在屏幕上，显示有趣的端口及其状态。标记为打开的端口特别重要，因为它们代表目标主机上运行的服务。
- en: '![How to do it...](img/7485_01_04.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤...](img/7485_01_04.jpg)'
- en: How it works...
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'The following command checks the state of the most popular ports on the host
    `scanme.nmap.org` by launching a TCP port scan:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 通过启动TCP端口扫描，以下命令检查主机`scanme.nmap.org`上最受欢迎的端口的状态：
- en: '[PRE9]'
  id: totrans-127
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The results contain host information such as the IPv4 address and PTR record,
    and port information such as a service name and port state.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 结果包含主机信息，如IPv4地址和PTR记录，以及端口信息，如服务名称和端口状态。
- en: There's more...
  id: totrans-129
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Even for this simplest port scan, Nmap does a lot of things in the background,
    and these can be configured as well.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 即使对于这种最简单的端口扫描，Nmap在后台也做了很多事情，这些也可以进行配置。
- en: 'Nmap begins by converting the hostname to an IPv4 address using DNS. If you
    wish to use a different DNS server, use `--dns-servers <serv1[,serv2],...>`, or
    use`-n` if you wish to skip this step, as follows:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap首先通过DNS将主机名转换为IPv4地址。如果您希望使用不同的DNS服务器，请使用`--dns-servers <serv1[,serv2],...>`，或者如果您希望跳过此步骤，请使用`-n`如下：
- en: '[PRE10]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'Afterwards, it pings the target address to check if the host is alive. To skip
    this step use `–PN` as follows:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，它会ping目标地址，以检查主机是否存活。要跳过此步骤，请使用`–PN`如下：
- en: '[PRE11]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Nmap then converts the IPv4 address back to a hostname by using a reverse DNS
    call. Use `-n` to skip this step as follows:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，Nmap通过反向DNS调用将IPv4地址转换回主机名。如下使用`-n`跳过此步骤：
- en: '[PRE12]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Finally, it launches a TCP port scan. To specify a different port range, use
    `-p[1-65535]`, or `-p-` for all possible TCP ports, as shown in the following
    command:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，它启动了TCP端口扫描。要指定不同的端口范围，请使用`-p[1-65535]`，或使用`-p-`表示所有可能的TCP端口，如下所示：
- en: '[PRE13]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Privileged versus unprivileged
  id: totrans-139
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 特权与非特权
- en: Running `nmap <TARGET>` as a privileged user launches the **SYN Stealth Scan**.
    For unprivileged accounts that can't create raw packets, the **TCP Connect Scan**
    is used.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 以特权用户身份运行`nmap <TARGET>`将启动**SYN Stealth扫描**。对于无法创建原始数据包的非特权帐户，将使用**TCP Connect扫描**。
- en: The difference between these two is that a TCP Connect Scan uses the high-level
    system call **connect** to obtain information about the port state. This means
    that each TCP connection is fully completed and, therefore, is slower and more
    likely to be detected and recorded in system logs. SYN Stealth Scans use raw packets
    to send specially-crafted TCP packets that detect port states more reliably.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 这两者之间的区别在于TCP Connect扫描使用高级系统调用**connect**来获取有关端口状态的信息。这意味着每个TCP连接都完全完成，因此速度较慢，更容易被检测并记录在系统日志中。SYN
    Stealth扫描使用原始数据包发送特制的TCP数据包，更可靠地检测端口状态。
- en: Port states
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 端口状态
- en: 'Nmap categorizes ports into the following states:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap将端口分类为以下状态：
- en: Note
  id: totrans-144
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The type of packets sent depends on the scanning technique(s) used.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 发送的数据包类型取决于使用的扫描技术。
- en: '**Open**: This indicates that an application is listening for connections on
    this port.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开放**：这表示应用程序正在此端口上监听连接。'
- en: '**Closed**: This indicates that the probes were received but there is no application
    listening on this port.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**关闭**：这表示探测已收到，但在此端口上没有应用程序监听。'
- en: '**Filtered**: This indicates that the probes were not received and the state
    could not be established. It also indicates that the probes are being dropped
    by some kind of filtering.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过滤**：这表示探测未收到，无法确定状态。还表示探测正在被某种过滤器丢弃。'
- en: '**Unfiltered**: This indicates that the probes were received but a state could
    not be established.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**未过滤**：这表示探测已收到，但无法确定状态。'
- en: '**Open/Filtered**: This indicates that the port was filtered or open but Nmap
    couldn''t establish the state.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**开放/过滤**：这表示端口被过滤或打开，但Nmap无法确定状态。'
- en: '**Closed/Filtered**: This indicates that the port was filtered or closed but
    Nmap couldn''t establish the state.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**关闭/过滤**：这表示端口被过滤或关闭，但Nmap无法确定状态。'
- en: Port scanning techniques supported by Nmap
  id: totrans-152
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Nmap支持的端口扫描技术
- en: We showed the simplest way of performing a port scan, but Nmap has a vast number
    of advanced scanning techniques available. Use `nmap -h` or visit [http://nmap.org/book/man-port-scanning-techniques.html](http://nmap.org/book/man-port-scanning-techniques.html)
    to learn more about them.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 我们展示了执行端口扫描的最简单方法，但Nmap提供了大量先进的扫描技术。使用`nmap -h`或访问[http://nmap.org/book/man-port-scanning-techniques.html](http://nmap.org/book/man-port-scanning-techniques.html)了解更多信息。
- en: See also
  id: totrans-154
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Fingerprinting services of a remote host* recipe
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*指纹识别远程主机的服务*食谱'
- en: The *Finding live hosts in your network* recipe
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在您的网络中查找活动主机*食谱'
- en: The *Scanning using specific port ranges* recipe
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用特定端口范围进行扫描*食谱'
- en: The *Scanning using a specified network interface* recipe
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用指定网络接口进行扫描*食谱'
- en: The *Manage different scanning profiles with Zenmap* recipe
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理不同的扫描配置文件*食谱'
- en: The *Monitoring servers remotely with Nmap and Ndiff* recipe
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Nmap和Ndiff远程监视服务器*食谱'
- en: The *Excluding hosts from your scans* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*从扫描中排除主机*食谱在[第2章](ch02.html "第2章。网络探索")中，*网络探索*'
- en: The *Scanning IPv6 addresses* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*扫描IPv6地址*食谱在[第2章](ch02.html "第2章。网络探索")中，*网络探索*'
- en: The *Fingerprinting the operative system of a host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*指纹识别主机操作系统*食谱在[第3章](ch03.html "第3章。收集额外的主机信息")中，*收集额外的主机信息*'
- en: The *Discovering UDP services* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*发现UDP服务*食谱在[第3章](ch03.html "第3章。收集额外的主机信息")中，*收集额外的主机信息*'
- en: The *Listing protocols supported by a remote host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机支持的协议*食谱在[第3章](ch03.html "第3章。收集额外的主机信息")中，*收集额外的主机信息*'
- en: Fingerprinting services of a remote host
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 指纹识别远程主机的服务
- en: '**Version detection** is one of the most popular features of Nmap. Knowing
    the exact version of a service is highly valuable for penetration testers who
    use this service to look for security vulnerabilities, and for system administrators
    who wish to monitor their networks for any unauthorized changes. Fingerprinting
    a service may also reveal additional information about a target, such as available
    modules and specific protocol information.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '**版本检测**是Nmap最受欢迎的功能之一。知道服务的确切版本对于使用该服务寻找安全漏洞的渗透测试人员以及希望监视网络是否有未经授权更改的系统管理员非常有价值。对服务进行指纹识别还可能揭示有关目标的其他信息，例如可用模块和特定协议信息。'
- en: This recipe describes how to fingerprint the services of a remote host by using
    Nmap.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 本食谱描述了如何使用Nmap对远程主机的服务进行指纹识别。
- en: How to do it...
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Open a terminal and type the following command:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 打开终端并输入以下命令：
- en: '[PRE14]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'The result of this command is a table containing an additional column named
    **VERSION**, displaying the specific service version, if identified. Additional
    information will be enclosed in parenthesis. Refer to the following screenshot:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令的结果是一个包含名为**版本**的额外列的表，显示特定的服务版本，如果被识别。其他信息将被括号括起来。请参考以下截图：
- en: '![How to do it...](img/7485_01_05.jpg)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/7485_01_05.jpg)'
- en: How it works...
  id: totrans-174
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The flag `-sV` enables service detection, which returns additional service and
    version information.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 标志`-sV`启用服务检测，返回额外的服务和版本信息。
- en: '**Service detection** is one of the most loved features of Nmap, as it''s very
    useful in many situations such as identifying security vulnerabilities or making
    sure a service is running on a given port.'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '**服务检测**是Nmap最受欢迎的功能之一，因为它在许多情况下非常有用，比如识别安全漏洞或确保服务在给定端口上运行。'
- en: This feature basically works by sending different probes from `nmap-service-probes`
    to the list of suspected open ports. The probes are selected based on how likely
    it is that they can be used to identify a service.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 这个功能基本上是通过从`nmap-service-probes`发送不同的探测到疑似开放端口的列表。探测是根据它们可能被用来识别服务的可能性选择的。
- en: There is very detailed documentation on how the service detection mode works,
    and the file formats used, at [http://nmap.org/book/vscan.html](http://nmap.org/book/vscan.html).
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 关于服务检测模式的工作原理和使用的文件格式有非常详细的文档，网址为[http://nmap.org/book/vscan.html](http://nmap.org/book/vscan.html)。
- en: There's more...
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can set the amount of probes to use by changing the intensity level of
    the scan with the argument `–-version-intensity [0-9]`, as follows:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过更改扫描的强度级别来设置要使用的探测数量，使用参数`--version-intensity [0-9]`，如下所示：
- en: '[PRE15]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Aggressive detection
  id: totrans-182
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 侵略性检测
- en: 'Nmap has a special flag to activate aggressive detection, namely `-A`. **Aggressive
    mode** enables OS detection (`-O`), version detection (`-sV`), script scanning
    (`-sC`), and traceroute (`--traceroute`). Needless to say this mode sends a lot
    more probes and it is more likely to be detected, but provides a lot of valuable
    host information. You can see this by using one of the following commands:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap有一个特殊的标志来激活侵略性检测，即`-A`。**侵略模式**启用了OS检测(`-O`)、版本检测(`-sV`)、脚本扫描(`-sC`)和跟踪路由(`--traceroute`)。不用说，这种模式发送了更多的探测，更容易被检测到，但提供了大量有价值的主机信息。您可以通过以下命令之一来查看：
- en: '[PRE16]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Or
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 或
- en: '[PRE17]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![Aggressive detection](img/7485_01_06.jpg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![侵略性检测](img/7485_01_06.jpg)'
- en: Submitting service fingerprints
  id: totrans-188
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提交服务指纹
- en: Nmap's accuracy comes from a database that has been collected over the years
    through user submissions. It is very important that we help keep this database
    up-to-date. If Nmap does not identify the service correctly, please submit your
    new service fingerprint or correction to [http://insecure.org/cgi-bin/submit.cgi?](http://insecure.org/cgi-bin/submit.cgi?).
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap的准确性来自多年来通过用户提交收集的数据库。非常重要的是，我们帮助保持这个数据库的最新。如果Nmap没有正确识别服务，请将您的新服务指纹或更正提交到[http://insecure.org/cgi-bin/submit.cgi?](http://insecure.org/cgi-bin/submit.cgi?)。
- en: See also
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Listing open ports on a remote host* recipe
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机上的开放端口*食谱'
- en: The *Finding live hosts in your network* recipe
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在您的网络中查找活动主机*食谱'
- en: The *Scanning using specific port ranges* recipe
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用特定端口范围进行扫描*食谱'
- en: The *Scanning using a specified network interface* recipe
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用指定网络接口进行扫描*食谱'
- en: The *Managing multiple scanning profiles with Zenmap* recipe
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理多个扫描配置文件*食谱'
- en: The *Monitoring servers remotely with Nmap and Ndiff* recipe
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Nmap和Ndiff远程监视服务器*食谱'
- en: The *Hiding our traffic with additional random data* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章。网络探索")的*使用额外的随机数据隐藏我们的流量*食谱中，*网络探索*
- en: The *Scanning IPv6 addresses* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章。网络探索")的*扫描IPv6地址*食谱中，*网络探索*
- en: The *Getting information from WHOIS records* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章。收集额外的主机信息")的*从WHOIS记录中获取信息*食谱中，*收集额外的主机信息*
- en: The *Brute forcing DNS records* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章。收集额外的主机信息")的*暴力破解DNS记录*食谱中，*收集额外的主机信息*
- en: The *Fingerprinting the operative system of a host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章。收集额外的主机信息")的*对主机的操作系统进行指纹识别*食谱中，*收集额外的主机信息*
- en: Finding live hosts in your network
  id: totrans-202
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在您的网络中查找活动主机
- en: Finding live hosts in a network is often used by penetration testers to enumerate
    active targets, and by system administrators to count or monitor the number of
    active hosts.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在网络中查找活动主机通常被渗透测试人员用来枚举活动目标，也被系统管理员用来计算或监视活动主机的数量。
- en: This recipe describes how to perform a ping scan, to find live hosts in a network
    by using Nmap.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方描述了如何执行ping扫描，以通过Nmap找到网络中的活动主机。
- en: How to do it...
  id: totrans-205
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Open your terminal and enter the following command:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 打开您的终端并输入以下命令：
- en: '[PRE18]'
  id: totrans-207
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The result shows hosts that are online and responded to the ping sweep.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 结果显示了在线并响应ping扫描的主机。
- en: '[PRE19]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: In this case, we found two live hosts in the network. Nmap has also found the
    MAC address, and it identified the vendor of a home router.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们在网络中找到了两个活动主机。Nmap还找到了MAC地址，并识别了家用路由器的供应商。
- en: How it works...
  id: totrans-211
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Nmap uses the `-sP` flag for ping scanning. This type of scan is very useful
    for enumerating the hosts in a network. It uses a TCP ACK packet and an ICMP echo
    request if executed as a privileged user, or a SYN packet sent via `connect()`
    `syscall` if run by users who can't send raw packets.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap使用`-sP`标志进行ping扫描。这种类型的扫描对于枚举网络中的主机非常有用。它使用TCP ACK数据包和ICMP回显请求（如果以特权用户身份执行），或者使用`connect()`
    `syscall`发送的SYN数据包（如果由不能发送原始数据包的用户运行）。
- en: CIDR `/24` in `192.168.1.1/24` is used to indicate that we want to scan all
    the 256 IPs in our network.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 在`192.168.1.1/24`中使用CIDR`/24`表示我们要扫描网络中的所有256个IP。
- en: There's more...
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: ARP requests are used when scanning a local Ethernet network as a privileged
    user, but you can override this behavior by including the flag `--send-ip`.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 在以特权用户身份扫描本地以太网网络时使用ARP请求，但您可以通过包括标志`--send-ip`来覆盖此行为。
- en: '[PRE20]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Traceroute
  id: totrans-217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Traceroute
- en: Use `--traceroute` to include a path between your machine and each host that
    was found.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`--traceroute`来包括您的机器和每个找到的主机之间的路径。
- en: '[PRE21]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: NSE scripts
  id: totrans-220
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: NSE脚本
- en: Ping scanning does not perform port scanning or service detection, but the Nmap
    Scripting Engine can be enabled for scripts depending on host rules, such as the
    cases of `sniffer-detect` and `dns-brute`.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: Ping扫描不执行端口扫描或服务检测，但可以根据主机规则启用Nmap脚本引擎，例如`sniffer-detect`和`dns-brute`的情况。
- en: '[PRE22]'
  id: totrans-222
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: See also
  id: totrans-223
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Running NSE scripts* recipe
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*配方'
- en: The *Discovering hosts using broadcast pings* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用广播ping发现主机*配方，*网络探索*'
- en: The *Discovering hosts with TCP SYN ping scans* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用TCP SYN ping扫描发现主机*配方，*网络探索*'
- en: The *Discovering hosts with TCP ACK ping scans* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用TCP ACK ping扫描发现主机*配方，*网络探索*'
- en: The *Discovering hosts with ICMP ping scans* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用ICMP ping扫描发现主机*配方，*网络探索*'
- en: The *Gathering network information with broadcast scripts* recipe in [Chapter
    2](ch02.html "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用广播脚本收集网络信息*配方，*网络探索*'
- en: The *Discovering hostnames pointing to the same IP* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章 收集额外主机信息")中的*发现指向相同IP的主机名*配方，*收集额外主机信息*'
- en: The *Brute forcing DNS records* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章 收集额外主机信息")中的*强制DNS记录*配方，*收集额外主机信息*'
- en: The *Spoofing the origin IP of a port scan* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章 收集额外主机信息")中的*欺骗端口扫描的源IP*配方，*收集额外主机信息*'
- en: Scanning using specific port ranges
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用特定端口范围进行扫描
- en: There are situations when a system administrator is looking for infected machines
    that use a specific port to communicate, or when users are only looking for a
    specific service or open port and don't really care about the rest. Narrowing
    down the port ranges used also optimizes performance, which is very important
    when scanning multiple targets.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 有时系统管理员正在寻找使用特定端口进行通信的感染机器，或者用户只是寻找特定服务或开放端口，而不太关心其他内容。缩小使用的端口范围也可以优化性能，在扫描多个目标时非常重要。
- en: This recipe describes how to use port ranges when performing Nmap scans.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 此配方描述了在执行Nmap扫描时如何使用端口范围。
- en: How to do it...
  id: totrans-236
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Open your terminal and enter the following command:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 打开您的终端并输入以下命令：
- en: '[PRE23]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: A list of hosts with the state of port `80` will appear in the results.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 将显示带有端口`80`状态的主机列表。
- en: '[PRE24]'
  id: totrans-240
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: How it works...
  id: totrans-241
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Nmap uses the flag `-p` for setting the port ranges to be scanned. This flag
    can be combined with any scanning method. In the previous example, we used the
    argument `-p80` to indicate to Nmap that we are only interested in port 80.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap使用标志`-p`来设置要扫描的端口范围。此标志可以与任何扫描方法结合使用。在前面的示例中，我们使用参数`-p80`来告诉Nmap我们只对端口80感兴趣。
- en: The CIDR `/24` in `192.168.1.1/24` is used to indicate that we want to scan
    all of the 256 IPs in our network.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在`192.168.1.1/24`中使用CIDR`/24`表示我们要扫描网络中的所有256个IP。
- en: There's more...
  id: totrans-244
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'There are several accepted formats for the argument `-p`:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 对于参数`-p`，有几种被接受的格式：
- en: 'Port list:'
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口列表：
- en: '[PRE25]'
  id: totrans-247
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Port range:'
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口范围：
- en: '[PRE26]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'All ports:'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有端口：
- en: '[PRE27]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Specific ports by protocols:'
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 协议的特定端口：
- en: '[PRE28]'
  id: totrans-253
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'Service name:'
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务名称：
- en: '[PRE29]'
  id: totrans-255
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Service name wildcards:'
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务名称通配符：
- en: '[PRE30]'
  id: totrans-257
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Only ports registered in Nmap services:'
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅在Nmap服务中注册的端口：
- en: '[PRE31]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: See also
  id: totrans-260
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Finding live hosts in your network* recipe
  id: totrans-261
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在您的网络中查找活动主机*配方'
- en: The *Listing open ports on a remote host* recipe
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机上的开放端口*配方'
- en: The *Scanning using a specified network interface* recipe
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用指定的网络接口进行扫描*配方'
- en: The *Running NSE scripts* recipe
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*配方'
- en: The *Hiding our traffic with additional random data* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*使用额外的随机数据隐藏我们的流量*配方，*网络探索*'
- en: The *Forcing DNS resolution* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*强制DNS解析*配方，*网络探索*'
- en: The *Excluding hosts from your scans* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*从扫描中排除主机*配方，*网络探索*'
- en: The *Scanning IPv6 addresses* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章 网络探索")中的*扫描IPv6地址*配方，*网络探索*'
- en: The *Listing protocols supported by a remote host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章 收集额外的主机信息")中的*列出远程主机支持的协议*配方，*收集额外的主机信息*'
- en: Running NSE scripts
  id: totrans-270
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运行NSE脚本
- en: NSE scripts are very powerful and have become one of Nmap's main strengths,
    performing tasks from advanced version detection to vulnerability exploitation.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: NSE脚本非常强大，已经成为Nmap的主要优势之一，可以执行从高级版本检测到漏洞利用的任务。
- en: The following recipe describes how to run NSE scripts, and the different options
    available for this engine.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 以下配方描述了如何运行NSE脚本以及此引擎的不同选项。
- en: How to do it...
  id: totrans-273
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到...
- en: 'To include the title of the index document of a web server in your scan results,
    open your terminal and type the following command:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 要在扫描结果中包含Web服务器索引文档的标题，请打开终端并输入以下命令：
- en: '[PRE32]'
  id: totrans-275
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: '![How to do it...](img/7485_01_07.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![如何做到...](img/7485_01_07.jpg)'
- en: How it works...
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The argument **--script** sets which NSE scripts should be run with the scan.
    In this case, when the service scan detects the web server, a parallel thread
    is initialized for the selected NSE script.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 参数**--script**设置应该在扫描中运行的NSE脚本。在这种情况下，当服务扫描检测到Web服务器时，将为所选的NSE脚本初始化一个并行线程。
- en: There are more than 230 scripts available, which perform a wide variety of tasks.
    The NSE script **http-title** returns the title of the root document if a web
    server is detected.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 有超过230个可用的脚本，执行各种各样的任务。NSE脚本**http-title**如果检测到Web服务器，则返回根文档的标题。
- en: There's more...
  id: totrans-280
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can run multiple scripts at once:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以一次运行多个脚本：
- en: '[PRE33]'
  id: totrans-282
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'Additionally, NSE scripts can be selected by category, expression, or folder:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，NSE脚本可以按类别、表达式或文件夹进行选择：
- en: 'Run all the scripts in the `vuln` category:'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行`vuln`类别中的所有脚本：
- en: '[PRE34]'
  id: totrans-285
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: 'Run the scripts in the categories `version` or `discovery`:'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行`version`或`discovery`类别中的脚本：
- en: '[PRE35]'
  id: totrans-287
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Run all the scripts except for the ones in the `exploit` category:'
  id: totrans-288
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行除`exploit`类别中的脚本之外的所有脚本：
- en: '[PRE36]'
  id: totrans-289
  prefs: []
  type: TYPE_PRE
  zh: '[PRE36]'
- en: 'Run all HTTP scripts except `http-brute` and `http-slowloris`:'
  id: totrans-290
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行除`http-brute`和`http-slowloris`之外的所有HTTP脚本：
- en: '[PRE37]'
  id: totrans-291
  prefs: []
  type: TYPE_PRE
  zh: '[PRE37]'
- en: 'To debug scripts use `--script-trace`. This enables a stack trace of the executed
    script to help you to debug the session. Remember that sometimes you may need
    to increase the debugging level with the flag `-d[1-9]` to get to the bottom of
    the problem:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 要调试脚本，请使用`--script-trace`。这将启用执行脚本的堆栈跟踪，以帮助您调试会话。请记住，有时您可能需要增加调试级别，使用标志`-d[1-9]`来解决问题的根源：
- en: '[PRE38]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE38]'
- en: NSE script arguments
  id: totrans-294
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: NSE脚本参数
- en: 'The flag `--script-args` is used to set arguments of NSE scripts. For example,
    if you would like to set the HTTP library argument `useragent`, `you would use`:'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 标志`--script-args`用于设置NSE脚本的参数。例如，如果您想设置HTTP库参数`useragent`，您将使用：
- en: '[PRE39]'
  id: totrans-296
  prefs: []
  type: TYPE_PRE
  zh: '[PRE39]'
- en: You can also use aliases when setting the arguments for NSE scripts. For example,
    you could use
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置NSE脚本的参数时，您还可以使用别名。例如，您可以使用
- en: '[PRE40]'
  id: totrans-298
  prefs: []
  type: TYPE_PRE
  zh: '[PRE40]'
- en: 'Instead of:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 而不是：
- en: '[PRE41]'
  id: totrans-300
  prefs: []
  type: TYPE_PRE
  zh: '[PRE41]'
- en: Adding new scripts
  id: totrans-301
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加新脚本
- en: 'To test new scripts, you simply need to copy them to your `/scripts` directory
    and run the following command to update the script database:'
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 要测试新脚本，您只需将它们复制到您的`/scripts`目录，并运行以下命令来更新脚本数据库：
- en: '[PRE42]'
  id: totrans-303
  prefs: []
  type: TYPE_PRE
  zh: '[PRE42]'
- en: NSE script categories
  id: totrans-304
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: NSE脚本类别
- en: '`auth`: This category is for scripts related to user authentication.'
  id: totrans-305
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`auth`：此类别用于与用户身份验证相关的脚本。'
- en: '`broadcast`: This is a very interesting category of scripts that use broadcast
    petitions to gather information.'
  id: totrans-306
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`broadcast`：这是一个非常有趣的脚本类别，它使用广播请求收集信息。'
- en: '`brute`: This category is for scripts that help conduct brute-force password
    auditing.'
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`brute`：此类别用于帮助进行暴力密码审计的脚本。'
- en: '`default`: This category is for scripts that are executed when a script scan
    is executed (`-sC`).'
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`default`：此类别用于在执行脚本扫描（`-sC`）时执行的脚本。'
- en: '`discovery`: This category is for scripts related to host and service discovery.'
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`discovery`：此类别用于与主机和服务发现相关的脚本。'
- en: '`dos`: This category is for scripts related to denial of service attacks.'
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`dos`：此类别用于与拒绝服务攻击相关的脚本。'
- en: '`exploit`: This category is for scripts that exploit security vulnerabilities.'
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`exploit`：此类别用于利用安全漏洞的脚本。'
- en: '`external`: This category is for scripts that depend on a third-party service.'
  id: totrans-312
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`external`：此类别用于依赖于第三方服务的脚本。'
- en: '`fuzzer`: This category is for NSE scripts that are focused on fuzzing.'
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`fuzzer`：此类别用于专注于模糊测试的NSE脚本。'
- en: '`intrusive`: This category is for scripts that might crash something or generate
    a lot of network noise. Scripts that system administrators may consider intrusive
    belong to this category.'
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`intrusive`：此类别用于可能会导致崩溃或产生大量网络噪音的脚本。系统管理员可能认为具有侵入性的脚本属于此类别。'
- en: '`malware`: This category is for scripts related to malware detection.'
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`malware`：此类别用于与恶意软件检测相关的脚本。'
- en: '`safe`: This category is for scripts that are considered safe in all situations.'
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`safe`：此类别用于在所有情况下都被认为是安全的脚本。'
- en: '`version`: This category is for scripts that are used for advanced versioning.'
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`version`：此类别用于高级版本控制的脚本。'
- en: '`vuln`: This category is for scripts related to security vulnerabilities.'
  id: totrans-318
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`vuln`：此类别用于与安全漏洞相关的脚本。'
- en: See also
  id: totrans-319
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Managing different scanning profiles with Zenmap* recipe
  id: totrans-320
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理不同的扫描配置文件*配方'
- en: The *Monitoring servers remotely with Nmap and Ndiff* recipe
  id: totrans-321
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Nmap和Ndiff远程监视服务器*食谱'
- en: The *Fingerprinting services of a remote host* recipe
  id: totrans-322
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*远程主机的服务指纹识别*食谱'
- en: The *Finding live hosts in your network* recipe
  id: totrans-323
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在你的网络中查找活动主机*食谱'
- en: The *Gathering network information with broadcast scripts* recipe in [Chapter
    2](ch02.html "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-324
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 网络探索")的*网络探索*中的*使用广播脚本收集网络信息*食谱
- en: The *Collecting valid e-mail accounts* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*收集有效的电子邮件帐户*食谱
- en: The *Discovering hostnames pointing to the same IP* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*发现指向相同IP的主机名*食谱
- en: The *Brute forcing DNS records* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*暴力破解DNS记录*食谱
- en: Scanning using a specified network interface
  id: totrans-328
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用指定的网络接口进行扫描
- en: Nmap is known for its flexibility, and allows users to specify the network interface
    used when scanning. This is very handy when running some of the sniffer NSE scripts,
    discovering whether your interface supports the promiscuous mode, or when testing
    a network connection with routing problems.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap以其灵活性而闻名，并允许用户在扫描时指定使用的网络接口。当运行一些嗅探器NSE脚本、发现你的接口是否支持混杂模式，或者测试具有路由问题的网络连接时，这非常方便。
- en: The following recipe describes how to force Nmap to scan using a specified network
    interface.
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 以下食谱描述了如何强制Nmap使用指定的网络接口进行扫描。
- en: How to do it...
  id: totrans-331
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Open your terminal and enter the following command:'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 打开你的终端并输入以下命令：
- en: '[PRE43]'
  id: totrans-333
  prefs: []
  type: TYPE_PRE
  zh: '[PRE43]'
- en: This will force Nmap to perform a TCP scan of `scanme.nmap.org` using the interface
    `<INTERFACE>`.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 这将强制Nmap使用接口`<INTERFACE>`对`scanme.nmap.org`执行TCP扫描。
- en: '![How to do it...](img/7485_01_08.jpg)'
  id: totrans-335
  prefs: []
  type: TYPE_IMG
  zh: '![操作步骤...](img/7485_01_08.jpg)'
- en: How it works...
  id: totrans-336
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The flag **-e** is used to set a specific network interface when Nmap is unable
    to select one automatically. The existence of this flag allows Nmap to send and
    receive packets through an alternate interface.
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 当Nmap无法自动选择一个网络接口时，使用标志**-e**来设置特定的网络接口。该标志的存在允许Nmap通过备用接口发送和接收数据包。
- en: There's more...
  id: totrans-338
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you need to select your interface manually, you will see the following message:'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你需要手动选择你的接口，你会看到以下消息：
- en: '[PRE44]'
  id: totrans-340
  prefs: []
  type: TYPE_PRE
  zh: '[PRE44]'
- en: Checking a TCP connection
  id: totrans-341
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检查TCP连接
- en: 'To check if a network interface can communicate with your network, you could
    try a ping scan that forces Nmap to use a specified interface:'
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查网络接口是否能与你的网络通信，你可以尝试强制Nmap使用指定的接口进行ping扫描：
- en: '[PRE45]'
  id: totrans-343
  prefs: []
  type: TYPE_PRE
  zh: '[PRE45]'
- en: See also
  id: totrans-344
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Running NSE scripts* recipe
  id: totrans-345
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*食谱'
- en: The *Scanning using specific port ranges* recipe
  id: totrans-346
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用特定端口范围进行扫描*食谱'
- en: The *Hiding our traffic with additional random data* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-347
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 网络探索")的*网络探索*中的*使用额外随机数据隐藏我们的流量*食谱
- en: The *Forcing DNS resolution* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-348
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 网络探索")的*网络探索*中的*强制DNS解析*食谱
- en: The *Excluding hosts from your scans* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-349
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章](ch02.html "第2章 网络探索")的*网络探索*中的*排除扫描主机*食谱
- en: The *Brute forcing DNS records* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-350
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*暴力破解DNS记录*食谱
- en: The *Fingerprinting the operative system of a host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-351
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*识别主机操作系统的指纹识别*食谱
- en: The *Discovering UDP services* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-352
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*发现UDP服务*食谱
- en: The *Listing the protocols supported by a remote host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-353
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章](ch03.html "第3章 收集额外主机信息")的*收集额外主机信息*中的*列出远程主机支持的协议*食谱
- en: Comparing scan results with Ndiff
  id: totrans-354
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Ndiff比较扫描结果
- en: Ndiff was designed to address the issues of using diff with two XML scan results.
    It compares files by removing false positives and producing a more readable output,
    which is perfect for anyone who needs to keep a track of the scan results.
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: Ndiff旨在解决使用两个XML扫描结果进行差异比较的问题。它通过删除误报并生成更易读的输出来比较文件，非常适合需要跟踪扫描结果的人。
- en: This recipe describes how to compare two Nmap scans to detect the changes in
    a host.
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: 这个食谱描述了如何比较两个Nmap扫描以检测主机中的变化。
- en: Getting ready
  id: totrans-357
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Ndiff requires two Nmap XML files to work, so make sure you have previously
    saved the scan results of the same host. If you haven't, you can always scan your
    own network, deactivate a service, and scan again to get these two test files.
    To save the results of an Nmap scan into an XML file use `-oX <filename>`.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: Ndiff需要两个Nmap XML文件才能工作，所以确保你之前已经保存了同一主机的扫描结果。如果没有，你可以随时扫描你自己的网络，停用一个服务，然后再次扫描以获得这两个测试文件。要将Nmap扫描结果保存到XML文件中，请使用`-oX
    <filename>`。
- en: How to do it...
  id: totrans-359
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Open your terminal.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开你的终端。
- en: 'Enter the following command:'
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令：
- en: '[PRE46]'
  id: totrans-362
  prefs: []
  type: TYPE_PRE
  zh: '[PRE46]'
- en: The output returns all the differences between `FILE1` and `FILE2`. New lines
    are shown after a plus sign. The lines that were removed on `FILE2` are displayed
    after a negative sign.![How to do it...](img/7485_01_09.jpg)
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输出返回`FILE1`和`FILE2`之间的所有差异。新行显示在加号后。在`FILE2`上删除的行显示在减号后。![操作步骤...](img/7485_01_09.jpg)
- en: How it works...
  id: totrans-364
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Ndiff uses the first file as a base to compare against the second one. It displays
    the state differences for host, port, services, and OS detection.
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: Ndiff使用第一个文件作为基础来与第二个文件进行比较。它显示主机、端口、服务和操作系统检测的状态差异。
- en: There's more...
  id: totrans-366
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'If you prefer Zenmap, you can use the following steps instead:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您喜欢Zenmap，您可以使用以下步骤：
- en: Launch Zenmap.
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Zenmap。
- en: Click on **Tools** on the main toolbar.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击主工具栏上的**工具**。
- en: Click on **Compare Results** (*Ctrl* + *D*).
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**比较结果**（*Ctrl* + *D*）。
- en: Select the first file by clicking on **Open** in the section named **A scan**.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击**打开**在名为**扫描**的部分中选择第一个文件。
- en: Select the second file by clicking on **Open** in the section named **B scan**.![There's
    more...](img/7485_01_10.jpg)
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过单击**打开**在名为**B扫描**的部分中选择第二个文件。![还有更多...](img/7485_01_10.jpg)
- en: Output format
  id: totrans-373
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 输出格式
- en: A human readable format is returned by default. However, Ndiff can return the
    differences in XML format, if preferred, by using the flag `--xml`.
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下返回人类可读的格式。但是，如果需要，Ndiff可以使用`--xml`标志以XML格式返回差异。
- en: Verbose mode
  id: totrans-375
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 详细模式
- en: '**Verbose mode** includes all of the information including hosts and ports
    that haven''t changed. To use it, enter the following commands:'
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: '**详细模式**包括所有信息，包括未更改的主机和端口。要使用它，请输入以下命令：'
- en: '[PRE47]'
  id: totrans-377
  prefs: []
  type: TYPE_PRE
  zh: '[PRE47]'
- en: See also
  id: totrans-378
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Monitoring servers remotely with Nmap and Ndiff* recipe
  id: totrans-379
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Nmap和Ndiff远程监视服务器*配方'
- en: The *Managing multiple scanning profiles with Zenmap* recipe
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Zenmap管理多个扫描配置文件*配方'
- en: The *Geo-locating an IP* address recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*IP地址地理定位*配方在[第3章](ch03.html "第3章。获取额外的主机信息")中，*获取额外的主机信息*'
- en: The *Getting information from WHOIS records* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-382
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*从WHOIS记录获取信息*配方在[第3章](ch03.html "第3章。获取额外的主机信息")中，*获取额外的主机信息*'
- en: The *Fingerprinting the operative system of a host* recipe in [Chapter 3](ch03.html
    "Chapter 3. Gathering Additional Host Information"), *Gathering Additional Host
    Information*
  id: totrans-383
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*指纹识别主机操作系统*配方在[第3章](ch03.html "第3章。获取额外的主机信息")中，*获取额外的主机信息*'
- en: The *Discovering UDP services* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-384
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*发现UDP服务*配方在[第3章](ch03.html "第3章。获取额外的主机信息")中，*获取额外的主机信息*'
- en: The *Detecting possible XST vulnerabilities* recipe in [Chapter 4](ch04.html
    "Chapter 4. Auditing Web Servers"), *Auditing Web Servers*
  id: totrans-385
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*检测可能的XST漏洞*配方在[第4章](ch04.html "第4章。审计Web服务器")中，*审计Web服务器*'
- en: Managing multiple scanning profiles with Zenmap
  id: totrans-386
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Zenmap管理多个扫描配置文件
- en: Scanning profiles are a combination of Nmap arguments that can be used to save
    time and the need to remember argument names when launching an Nmap scan.
  id: totrans-387
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描配置文件是Nmap参数的组合，可用于节省时间，并且在启动Nmap扫描时无需记住参数名称。
- en: This recipe is about adding, editing, and deleting a scanning profile in Zenmap.
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 这个配方是关于在Zenmap中添加、编辑和删除扫描配置文件。
- en: How to do it...
  id: totrans-389
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s add a new profile for scanning web servers:'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们为扫描Web服务器添加一个新的配置文件：
- en: Launch Zenmap.
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动Zenmap。
- en: Click on **Profile** on the main toolbar.
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击主工具栏上的**配置文件**。
- en: Click on **New Profile** or **Command** (*Ctrl* + *P*). The **Profile Editor**
    will be launched.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**新配置文件**或**命令**（*Ctrl* + *P*）。将启动**配置文件编辑器**。
- en: Enter a profile name and a description on the **Profile** tab.
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**配置文件**选项卡上输入配置文件名称和描述。
- en: Enable **Version detection** and disable **reverse DNS resolution** on the **Scan**
    tab.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**扫描**选项卡上启用**版本检测**，并禁用**反向DNS解析**。
- en: 'Enable the following scripts on the **Scripting** tab:'
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**脚本**选项卡上启用以下脚本：
- en: '**hostmap**'
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**hostmap**'
- en: '**http-default-accounts**'
  id: totrans-398
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-default-accounts**'
- en: '**http-enum**'
  id: totrans-399
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-enum**'
- en: '**http-favicon**'
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-favicon**'
- en: '**http-headers**'
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-headers**'
- en: '**http-methods**'
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-methods**'
- en: '**http-trace**'
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-trace**'
- en: '**http-php-version**'
  id: totrans-404
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-php-version**'
- en: '**http-robots.txt**'
  id: totrans-405
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-robots.txt**'
- en: '**http-title**'
  id: totrans-406
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**http-title**'
- en: Next, go to the **Target** tab and click on **Ports** to scan and enter `80`,
    `443`.
  id: totrans-407
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，转到**目标**选项卡，单击**端口**以扫描，并输入`80`，`443`。
- en: Save your changes by clicking on **Save Changes**.![How to do it...](img/7485_01_11.jpg)
  id: totrans-408
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**保存更改**以保存更改。![操作步骤...](img/7485_01_11.jpg)
- en: How it works...
  id: totrans-409
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'After using the editor to create our profile, we are left with the following
    Nmap command:'
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用编辑器创建配置文件后，我们得到了以下Nmap命令：
- en: '[PRE48]'
  id: totrans-411
  prefs: []
  type: TYPE_PRE
  zh: '[PRE48]'
- en: Using the **Profile** wizard, we have enabled service scanning (`-sV`), set
    the scanning ports to `80` and `443`, set the **Timing** template to `4`, and
    selected a bunch of HTTP-related scripts to gather as much information as possible
    from this web server. And we now have this profile saved for some quick scanning
    without having to type all these flags and options again.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**配置文件**向导，我们已启用服务扫描（`-sV`），将扫描端口设置为`80`和`443`，将**定时**模板设置为`4`，并选择了一堆HTTP相关的脚本，以尽可能多地从这个Web服务器中收集信息。现在我们已经保存了这个配置文件，可以快速扫描而无需再次输入所有这些标志和选项。
- en: There's more...
  id: totrans-413
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Zenmap includes 10 predefined scan profiles to help newcomers familiarize themselves
    with Nmap. I recommend that you to analyze them in order to understand the additional
    scanning techniques that are available to Nmap, along with some of the more useful
    combinations of its options.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap包括10个预定义的扫描配置文件，以帮助新手熟悉Nmap。我建议您分析它们，以了解Nmap可用的附加扫描技术，以及一些更有用的选项组合。
- en: 'Intense scan: `nmap -T4 -A -v`'
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强烈扫描：`nmap -T4 -A -v`
- en: 'Intense scan plus UDP: `nmap -sS -sU -T4 -A -v`'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强烈扫描加UDP：`nmap -sS -sU -T4 -A -v`
- en: 'Intense scan, all TCP ports: `nmap -p 1-65535 -T4 -A -v`'
  id: totrans-417
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强烈扫描，所有TCP端口：`nmap -p 1-65535 -T4 -A -v`
- en: 'Intense scan, no ping: `nmap -T4 -A -v -Pn`'
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 强烈扫描，无ping：`nmap -T4 -A -v -Pn`
- en: 'Ping scan: `nmap -sn`'
  id: totrans-419
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ping扫描：`nmap -sn`
- en: 'Quick scan: `nmap -T4 -F`'
  id: totrans-420
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速扫描：`nmap -T4 -F`
- en: 'Quick scan plus: `nmap -sV -T4 -O -F –version-light`'
  id: totrans-421
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速扫描加：`nmap -sV -T4 -O -F –version-light`
- en: 'Quick traceroute: `nmap -sn –traceroute`'
  id: totrans-422
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 快速traceroute：`nmap -sn –traceroute`
- en: 'Regular scan: `nmap`'
  id: totrans-423
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常规扫描：`nmap`
- en: 'Slow comprehensive scan: `nmap -sS -sU -T4 -A -v -PE -PP -PS80,443 -PA3389
    -PU40125 -PY -g 53 --script` default or discovery and safe'
  id: totrans-424
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 慢速综合扫描：`nmap -sS -sU -T4 -A -v -PE -PP -PS80,443 -PA3389 -PU40125 -PY -g 53
    --script`默认或发现和安全
- en: Editing and deleting a scan profile
  id: totrans-425
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 编辑和删除扫描配置文件
- en: To edit or delete a scan profile, you need to select the entry you wish to modify
    from the **Profile** drop-down menu. Click on **Profile** on the main toolbar
    and select **Edit Selected Profile** (*Ctrl* + *E*).
  id: totrans-426
  prefs: []
  type: TYPE_NORMAL
  zh: 要编辑或删除扫描配置文件，您需要从**配置文件**下拉菜单中选择要修改的条目。单击主工具栏上的**配置文件**，然后选择**编辑所选配置文件**（*Ctrl*
    + *E*）。
- en: The editor will be launched allowing you to edit or delete the selected profile.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 将启动编辑器，允许您编辑或删除所选配置文件。
- en: See also
  id: totrans-428
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Listing open ports on a remote host* recipe
  id: totrans-429
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列出远程主机上的开放端口的配方
- en: The *Fingerprinting server of a remote host* recipe
  id: totrans-430
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 远程主机的指纹服务器的配方
- en: The *Finding live hosts in your network* recipe
  id: totrans-431
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的网络中查找活动主机的配方
- en: The *Scanning using specific port ranges* recipe
  id: totrans-432
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用特定端口范围进行扫描的配方
- en: The *Running NSE scripts* recipe
  id: totrans-433
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 运行NSE脚本的配方
- en: The *Scanning IPv6 addresses* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-434
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章]（ch02.html“第2章。网络探索”）中扫描IPv6地址的配方，网络探索
- en: The *Gathering network information with broadcast scripts* recipe in [Chapter
    2](ch02.html "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-435
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第2章]（ch02.html“第2章。网络探索”）中使用广播脚本收集网络信息的配方，网络探索
- en: The *Discovering UDP services* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-436
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在[第3章]（ch03.html“第3章。收集其他主机信息”）中查找UDP服务的配方，收集其他主机信息
- en: Detecting NAT with Nping
  id: totrans-437
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nping检测NAT
- en: Nping was designed for packet crafting and traffic analysis and is perfect for
    a variety of networking tasks.
  id: totrans-438
  prefs: []
  type: TYPE_NORMAL
  zh: Nping旨在用于数据包制作和流量分析，并且非常适用于各种网络任务。
- en: The following recipe will introduce Nping by showing how to perform NAT detection
    with some help of the Nping Echo protocol.
  id: totrans-439
  prefs: []
  type: TYPE_NORMAL
  zh: 以下配方将介绍Nping，演示如何借助Nping Echo协议执行NAT检测。
- en: How to do it...
  id: totrans-440
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'Open a terminal and enter the following command:'
  id: totrans-441
  prefs: []
  type: TYPE_NORMAL
  zh: 打开终端并输入以下命令：
- en: '[PRE49]'
  id: totrans-442
  prefs: []
  type: TYPE_PRE
  zh: '[PRE49]'
- en: 'This will result in an output stream similar to the following example:'
  id: totrans-443
  prefs: []
  type: TYPE_NORMAL
  zh: 这将导致类似于以下示例的输出流：
- en: 'Nping will return the packet traffic between the client and the Nping echo
    server `echo.nmap.org`:'
  id: totrans-444
  prefs: []
  type: TYPE_NORMAL
  zh: Nping将返回客户端和Nping回显服务器`echo.nmap.org`之间的数据包流量：
- en: '[PRE50]'
  id: totrans-445
  prefs: []
  type: TYPE_PRE
  zh: '[PRE50]'
- en: Take note of the source address `192.168.1.102` in the first packet marked as
    `SENT`.
  id: totrans-446
  prefs: []
  type: TYPE_NORMAL
  zh: 注意第一个标记为`SENT`的数据包中的源地址`192.168.1.102`。
- en: '[PRE51]'
  id: totrans-447
  prefs: []
  type: TYPE_PRE
  zh: '[PRE51]'
- en: Compare this address to the source address in the second packet marked as `CAPT`.
  id: totrans-448
  prefs: []
  type: TYPE_NORMAL
  zh: 将此地址与标记为`CAPT`的第二个数据包中的源地址进行比较。
- en: '[PRE52]'
  id: totrans-449
  prefs: []
  type: TYPE_PRE
  zh: '[PRE52]'
- en: The addresses are different, indicating the presence of NAT.
  id: totrans-450
  prefs: []
  type: TYPE_NORMAL
  zh: 这些地址不同，表明存在NAT。
- en: How it works...
  id: totrans-451
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Nping's **echo mode** was designed to help troubleshoot firewall and routing
    problems. Basically, it returns a copy of the received packet back to the client.
  id: totrans-452
  prefs: []
  type: TYPE_NORMAL
  zh: Nping的**回显模式**旨在帮助排除防火墙和路由问题。基本上，它会将接收到的数据包的副本返回给客户端。
- en: 'The command is:'
  id: totrans-453
  prefs: []
  type: TYPE_NORMAL
  zh: 命令是：
- en: '[PRE53]'
  id: totrans-454
  prefs: []
  type: TYPE_PRE
  zh: '[PRE53]'
- en: It uses Nping's echo mode (`--ec` or `--echo-client`) to help us analyze the
    traffic between Nmap's Nping echo server, to determine if there is a NAT device
    on the network. The argument after `–ec` corresponds to a secret passphrase known
    by the server to encrypt and authenticate the session.
  id: totrans-455
  prefs: []
  type: TYPE_NORMAL
  zh: 它使用Nping的回显模式（`--ec`或`--echo-client`）来帮助我们分析Nmap的Nping回显服务器之间的流量，以确定网络中是否存在NAT设备。
    `–ec`后面的参数对应于服务器知道的秘密密码短语，用于加密和验证会话。
- en: The flag `-c` is used to specify how many iterations of packets must be sent.
  id: totrans-456
  prefs: []
  type: TYPE_NORMAL
  zh: 标志`-c`用于指定必须发送多少次数据包的迭代。
- en: There's more...
  id: totrans-457
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'With Nping it is really simple to generate custom TCP packets. For example,
    to send a TCP SYN packet to port 80, use the following command:'
  id: totrans-458
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nping生成自定义TCP数据包非常简单。例如，要向端口80发送TCP SYN数据包，请使用以下命令：
- en: '[PRE54]'
  id: totrans-459
  prefs: []
  type: TYPE_PRE
  zh: '[PRE54]'
- en: 'This will result in the following output:'
  id: totrans-460
  prefs: []
  type: TYPE_NORMAL
  zh: 这将导致以下输出：
- en: '[PRE55]'
  id: totrans-461
  prefs: []
  type: TYPE_PRE
  zh: '[PRE55]'
- en: 'Nping is a very powerful tool for traffic analysis and packet crafting. Take
    a moment to go through all of its options by using the following command:'
  id: totrans-462
  prefs: []
  type: TYPE_NORMAL
  zh: Nping是用于流量分析和数据包制作的非常强大的工具。通过使用以下命令，花点时间查看其所有选项：
- en: '[PRE56]'
  id: totrans-463
  prefs: []
  type: TYPE_PRE
  zh: '[PRE56]'
- en: Nping Echo Protocol
  id: totrans-464
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Nping Echo协议
- en: To learn more about the Nping Echo Protocol visit [http://nmap.org/svn/nping/docs/EchoProtoRFC.txt](http://nmap.org/svn/nping/docs/EchoProtoRFC.txt).
  id: totrans-465
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解有关Nping Echo协议的更多信息，请访问[http://nmap.org/svn/nping/docs/EchoProtoRFC.txt](http://nmap.org/svn/nping/docs/EchoProtoRFC.txt)。
- en: See also
  id: totrans-466
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Finding live hosts in your network* recipe
  id: totrans-467
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的网络中查找活动主机的配方
- en: The *Comparing scan results with Ndiff* recipe
  id: totrans-468
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Ndiff比较扫描结果的配方
- en: The *Managing multiple scanning profiles with Zenmap* recipe
  id: totrans-469
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Zenmap管理多个扫描配置文件的配方
- en: The *Monitoring servers remotely with Nmap and Ndiff* recipe
  id: totrans-470
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nmap和Ndiff远程监视服务器的配方
- en: The *Gathering network information with broadcast scripts* recipe [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-471
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用广播脚本收集网络信息的配方[第2章]（ch02.html“第2章。网络探索”），网络探索
- en: The *Brute forcing DNS records* recipe [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 暴力破解DNS记录的配方[第3章]（ch03.html“第3章。收集其他主机信息”），收集其他主机信息
- en: The *Spoofing the origin IP of a port scan* recipe [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-473
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 欺骗端口扫描的源IP的配方[第3章]（ch03.html“第3章。收集其他主机信息”），收集其他主机信息
- en: The *Generating a network topology graph with Zenmap* recipe [Chapter 8](ch08.html
    "Chapter 8. Generating Scan Reports"), Generating *Scan Reports*
  id: totrans-474
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Zenmap生成网络拓扑图的配方[第8章]（ch08.html“第8章。生成扫描报告”），生成扫描报告
- en: Monitoring servers remotely with Nmap and Ndiff
  id: totrans-475
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap和Ndiff远程监视服务器
- en: Combining tools from the Nmap project allows us to set up a simple but powerful
    monitoring system. This can then be used by system administrators monitoring a
    web server or by penetration testers wanting to surveil a remote system.
  id: totrans-476
  prefs: []
  type: TYPE_NORMAL
  zh: 通过结合Nmap项目中的工具，我们可以建立一个简单但强大的监控系统。这可以被系统管理员用来监视Web服务器，也可以被渗透测试人员用来监视远程系统。
- en: This recipe describes how to use bash scripting, cron, Nmap, and Ndiff to set
    up a monitoring system that alerts the user by an e-mail if changes are detected
    in a network.
  id: totrans-477
  prefs: []
  type: TYPE_NORMAL
  zh: 本配方描述了如何使用bash脚本、cron、Nmap和Ndiff设置一个监控系统，如果在网络中检测到变化，系统将通过电子邮件向用户发出警报。
- en: How to do it...
  id: totrans-478
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Create the directory `/usr/local/share/nmap-mon/` to store all the necessary
    files.
  id: totrans-479
  prefs: []
  type: TYPE_NORMAL
  zh: 创建目录`/usr/local/share/nmap-mon/`以存储所有必要的文件。
- en: Scan your target host and save the results in the directory that you just created.
  id: totrans-480
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描您的目标主机并将结果保存在您刚刚创建的目录中。
- en: '[PRE57]'
  id: totrans-481
  prefs: []
  type: TYPE_PRE
  zh: '[PRE57]'
- en: The resulting file `base_results.xml` will be used as your base file, meaning
    that it should reflect the known "good" versions and ports.
  id: totrans-482
  prefs: []
  type: TYPE_NORMAL
  zh: 生成的文件`base_results.xml`将被用作您的基本文件，这意味着它应该反映已知的“良好”版本和端口。
- en: Copy the file `nmap-mon.sh` into your working directory.
  id: totrans-483
  prefs: []
  type: TYPE_NORMAL
  zh: 将文件`nmap-mon.sh`复制到您的工作目录中。
- en: The output of the scan will be as follows.
  id: totrans-484
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描的输出将如下所示。
- en: '[PRE58]'
  id: totrans-485
  prefs: []
  type: TYPE_PRE
  zh: '[PRE58]'
- en: Update the configuration values according to your system.
  id: totrans-486
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您的系统更新配置值。
- en: '[PRE59]'
  id: totrans-487
  prefs: []
  type: TYPE_PRE
  zh: '[PRE59]'
- en: 'Make `nmap-mon.sh` executable by entering the following command:'
  id: totrans-488
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入以下命令使`nmap-mon.sh`可执行：
- en: '[PRE60]'
  id: totrans-489
  prefs: []
  type: TYPE_PRE
  zh: '[PRE60]'
- en: You can now run the script `nmap-mon.sh` to make sure it is working correctly.
  id: totrans-490
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以运行脚本`nmap-mon.sh`，以确保它正常工作。
- en: '[PRE61]'
  id: totrans-491
  prefs: []
  type: TYPE_PRE
  zh: '[PRE61]'
- en: 'Launch your `crontab` editor:'
  id: totrans-492
  prefs: []
  type: TYPE_NORMAL
  zh: 启动您的`crontab`编辑器：
- en: '[PRE62]'
  id: totrans-493
  prefs: []
  type: TYPE_PRE
  zh: '[PRE62]'
- en: 'Add the following command:'
  id: totrans-494
  prefs: []
  type: TYPE_NORMAL
  zh: 添加以下命令：
- en: '[PRE63]'
  id: totrans-495
  prefs: []
  type: TYPE_PRE
  zh: '[PRE63]'
- en: You should now receive e-mail alerts when Ndiff detects a change in your network.
  id: totrans-496
  prefs: []
  type: TYPE_NORMAL
  zh: 当Ndiff检测到网络中的变化时，您现在应该收到电子邮件警报。
- en: How it works...
  id: totrans-497
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Ndiff is a tool for comparing two Nmap scans. With some help from bash and cron,
    we set up a task that is executed at regular intervals to scan our network and
    compare our current state with an older state, in order to identify the differences
    between them.
  id: totrans-498
  prefs: []
  type: TYPE_NORMAL
  zh: Ndiff是用于比较两次Nmap扫描的工具。借助bash和cron的帮助，我们设置了一个定期执行的任务，以扫描我们的网络并将当前状态与旧状态进行比较，以识别它们之间的差异。
- en: There's more...
  id: totrans-499
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'You can adjust the interval between scans by modifying the cron line:'
  id: totrans-500
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过修改cron行来调整扫描之间的间隔：
- en: '[PRE64]'
  id: totrans-501
  prefs: []
  type: TYPE_PRE
  zh: '[PRE64]'
- en: To update your base file, you simply need to overwrite your base file located
    at `/usr/local/share/nmap-mon/`. Remember that when we change the scan parameters
    to create our base file, we need to update them in `nmap-mon.sh` too.
  id: totrans-502
  prefs: []
  type: TYPE_NORMAL
  zh: 要更新您的基本文件，您只需覆盖位于`/usr/local/share/nmap-mon/`的基本文件。请记住，当我们更改扫描参数以创建基本文件时，我们也需要在`nmap-mon.sh`中更新它们。
- en: Monitoring specific services
  id: totrans-503
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 监视特定服务
- en: To monitor some specific service, you need to update the scan parameters in
    `nmap-mon.sh`.
  id: totrans-504
  prefs: []
  type: TYPE_NORMAL
  zh: 要监视某些特定服务，您需要更新`nmap-mon.sh`中的扫描参数。
- en: '[PRE65]'
  id: totrans-505
  prefs: []
  type: TYPE_PRE
  zh: '[PRE65]'
- en: 'For example, if you would like to monitor a web server, you may use the following
    parameters:'
  id: totrans-506
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果您想监视Web服务器，可以使用以下参数：
- en: '[PRE66]'
  id: totrans-507
  prefs: []
  type: TYPE_PRE
  zh: '[PRE66]'
- en: These parameters set port scanning only to ports `80` and `443`, and in addition
    these parameters include the script `http-google-safe` to check if your web server
    has been marked as malicious by the Google Safe Browsing service.
  id: totrans-508
  prefs: []
  type: TYPE_NORMAL
  zh: 这些参数仅将端口扫描设置为端口`80`和`443`，此外，这些参数还包括脚本`http-google-safe`，以检查您的Web服务器是否被Google安全浏览服务标记为恶意。
- en: See also
  id: totrans-509
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参阅
- en: The *Listing open ports on a remote host* recipe
  id: totrans-510
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*列出远程主机上的开放端口*配方'
- en: The *Fingerprinting services of a remote host* recipe
  id: totrans-511
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*对远程主机的指纹服务进行识别*配方'
- en: The *Finding live hosts in your network* recipe
  id: totrans-512
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*在您的网络中查找活动主机*配方'
- en: The *Running NSE scripts* recipe
  id: totrans-513
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*运行NSE脚本*配方'
- en: The *Comparing scan results with Ndiff* recipe
  id: totrans-514
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*使用Ndiff比较扫描结果*配方'
- en: The *Discovering hosts with ICMP ping scans* recipe in [Chapter 2](ch02.html
    "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-515
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章。网络探索")中的*使用ICMP ping扫描发现主机*配方，*网络探索*'
- en: The *Scanning IPv6 addresses* recipe in [Chapter 2](ch02.html "Chapter 2. Network
    Exploration"), *Network Exploration*
  id: totrans-516
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章。网络探索")中的*扫描IPv6地址*配方，*网络探索*'
- en: The *Gathering network information with broadcast scripts* recipe in [Chapter
    2](ch02.html "Chapter 2. Network Exploration"), *Network Exploration*
  id: totrans-517
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第2章](ch02.html "第2章。网络探索")中的*使用广播脚本收集网络信息*配方，*网络探索*'
- en: The *Checking if a host is known for malicious activities* recipe in [Chapter
    3](ch03.html "Chapter 3. Gathering Additional Host Information"), *Gathering Additional
    Host Information*
  id: totrans-518
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章。收集额外的主机信息")中的*检查主机是否已知存在恶意活动*配方，*收集额外的主机信息*'
- en: The *Discovering UDP services* recipe in [Chapter 3](ch03.html "Chapter 3. Gathering
    Additional Host Information"), *Gathering Additional Host Information*
  id: totrans-519
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[第3章](ch03.html "第3章。收集额外的主机信息")中的*发现UDP服务*配方，*收集额外的主机信息*'
