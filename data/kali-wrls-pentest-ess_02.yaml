- en: Chapter 2. Setting Up Your Machine with Kali Linux
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章。使用Kali Linux设置您的机器
- en: 'In this chapter, we will cover the following topics to set up your laptop for
    wireless penetration testing:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题，为您的笔记本电脑设置无线渗透测试：
- en: Introduction to the Kali Linux distribution
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍Kali Linux发行版
- en: Installing Kali Linux
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Kali Linux
- en: Wireless adapter setup and configuration
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 无线适配器设置和配置
- en: Introduction to the Kali Linux distribution
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍Kali Linux发行版
- en: Kali Linux is the most popular and used distribution for penetration testing
    and security auditing. It is developed and maintained by Offensive Security and
    it replaces Backtrack Linux being the first release of Kali Linux, the successor
    of Backtrack 5 release 3.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux是最受欢迎和使用最广泛的渗透测试和安全审计发行版。它由Offensive Security开发和维护，取代了Backtrack Linux成为Kali
    Linux的第一个版本，是Backtrack 5版本3的继任者。
- en: Kali Linux has been completely re-built and now it is based on Debian. It includes
    a wide range of tools for reconnaissance and information gathering, sniffing,
    and spoofing, vulnerability assessment, password cracking, exploitation, reverse
    engineering, hardware hacking, forensics investigation, incident handling, and
    reporting. For wireless penetration testing, there is a dedicated set (the `kali-linux-wireless`
    metapackage) of the most known open source tools, such as the Aircrack-ng suite,
    Kismet, Fern Wifi Cracker, Wifite, and Reaver, among others.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux已经完全重建，现在它基于Debian。它包括广泛的用于侦察和信息收集、嗅探和欺骗、漏洞评估、密码破解、利用、逆向工程、硬件黑客、取证调查、事件处理和报告的工具。对于无线渗透测试，有一个专门的集合（`kali-linux-wireless`元包），包括最知名的开源工具，如Aircrack-ng套件、Kismet、Fern
    Wifi Cracker、Wifite和Reaver等。
- en: In this book, we will mainly use the Aircrack-ng suite, developed by Thomas
    d'Otreppe, because it is the most complete and popular set of tools for auditing
    wireless networks. More information about the Aircrack-ng project is available
    on its website, [http://www.aircrack-ng.org/](http://www.aircrack-ng.org/), which
    is often referenced in this book. Furthermore, Kali Linux supports a large variety
    of wireless adapters and its kernel is constantly updated with the latest wireless
    injection patches.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将主要使用Aircrack-ng套件，由Thomas d'Otreppe开发，因为它是用于审计无线网络的最完整和最受欢迎的工具集。有关Aircrack-ng项目的更多信息，请访问其网站[http://www.aircrack-ng.org/](http://www.aircrack-ng.org/)，本书中经常引用。此外，Kali
    Linux支持各种无线适配器，并且其内核会不断更新以获取最新的无线注入补丁。
- en: For all these reasons, Kali Linux is the optimal choice for our purposes. The
    next section demonstrates how to install it on our laptops.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 出于所有这些原因，Kali Linux是我们目的的最佳选择。下一节演示了如何在我们的笔记本电脑上安装它。
- en: Installing Kali Linux
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Kali Linux
- en: There are three methods to install Kali Linux, on the hard disk (on the single
    boot or multiboot), on a USB thumb drive to use it as a live system, or on a virtual
    machine using software such as Oracle VirtualBox and VMware Workstation or Player.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 有三种方法可以安装Kali Linux，可以安装在硬盘上（单引导或多引导），可以安装在USB闪存驱动器上以用作实时系统，也可以使用软件（如Oracle
    VirtualBox和VMware Workstation或Player）在虚拟机上安装。
- en: The installation requires at least 10 GB of hard disk space and at least 1,024
    MB of RAM is recommended, although Kali Linux can run over only 512 MB of RAM.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 安装至少需要10GB的硬盘空间，建议至少1,024MB的RAM，尽管Kali Linux可以在只有512MB的RAM上运行。
- en: Installing Kali Linux on the hard drive is better regarding the performances
    but it has the drawback of dedicating all the hard disk space to it or partitioning
    the hard drive and using a partition to install it, while the installation on
    a virtual machine provides us a lightly slower system but also much more flexibility
    and we don't have to modify the configuration of the hard disk.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在硬盘上安装Kali Linux在性能上更好，但缺点是要将所有硬盘空间都分配给它，或者对硬盘进行分区并使用一个分区来安装它，而在虚拟机上安装则提供了一个轻微较慢的系统，但也更加灵活，我们不必修改硬盘的配置。
- en: We can either install Kali Linux on a virtual machine with the downloadable
    ISO or directly use the VMware or VirtualBox prebuilt images. The 32 or 64 bits
    ISOs can be downloaded from [https://www.kali.org/downloads/](https://www.kali.org/downloads/),
    and the VMware and VirtualBox images can be downloaded from [https://www.offensive-security.com/kali-linux-vmware-arm-image-download/](https://www.offensive-security.com/kali-linux-vmware-arm-image-download/).
    It is interesting to notice that Kali Linux can also be installed on ARM devices,
    such as the Raspberry Pi and similar.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用可下载的ISO在虚拟机上安装Kali Linux，也可以直接使用VMware或VirtualBox预构建的映像。32位或64位的ISO可以从[https://www.kali.org/downloads/](https://www.kali.org/downloads/)下载，VMware和VirtualBox映像可以从[https://www.offensive-security.com/kali-linux-vmware-arm-image-download/](https://www.offensive-security.com/kali-linux-vmware-arm-image-download/)下载。有趣的是，Kali
    Linux也可以安装在树莓派等ARM设备上。
- en: The rest of this chapter is concerned with the installation and configuration
    of Kali Linux on a virtual machine, a process that is very similar to installing
    it on the hard disk directly.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的其余部分涉及在虚拟机上安装和配置Kali Linux，这个过程与直接在硬盘上安装非常相似。
- en: Installation on a virtual machine
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在虚拟机上安装
- en: To create a new virtual machine and install Kali Linux on it, we need to use
    the virtualization software.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的虚拟机并在其上安装Kali Linux，我们需要使用虚拟化软件。
- en: In this book, we will use Oracle VirtualBox, which is a free and open source
    virtualization software available for various platforms, such as Windows, Linux,
    Mac OS X, and Solaris. To download and get information on how to install it, take
    a look at the references in the [Appendix](apa.html "Appendix A. References"),
    *References*.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将使用Oracle VirtualBox，这是一款免费的开源虚拟化软件，适用于各种平台，如Windows、Linux、Mac OS X和Solaris。要下载并获取有关如何安装它的信息，请参阅[附录](apa.html
    "附录A.参考资料")中的*参考资料*。
- en: Creating a new virtual machine
  id: totrans-19
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建新的虚拟机
- en: 'To create a new virtual machine (VM), follow these steps:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建新的虚拟机（VM），请按照以下步骤进行：
- en: Click on the **New** button on the toolbar menu and the wizard will start. We
    assign the VM a name and select the operating system type and version, which,
    in our case, are Linux and Debian respectively (the architecture, 32 or 64 bit,
    depends on your machine):![Creating a new virtual machine](img/B04527_02_01.jpg)
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏菜单上点击**新建**按钮，向导将开始。我们为虚拟机分配一个名称，并选择操作系统类型和版本，在我们的情况下分别为Linux和Debian（架构，32位或64位，取决于您的机器）：![创建新虚拟机](img/B04527_02_01.jpg)
- en: We assign the amount of RAM dedicated to the VM; here the recommended size is
    512 MB but for our purposes at least 1,024 MB would be a better choice:![Creating
    a new virtual machine](img/B04527_02_02.jpg)
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们分配给虚拟机的RAM数量；这里推荐的大小是512 MB，但对于我们的目的，至少1,024 MB会是更好的选择：![创建新虚拟机](img/B04527_02_02.jpg)
- en: Then, we have to create a new virtual hard disk for our installation:![Creating
    a new virtual machine](img/B04527_02_03.jpg)
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，我们必须为我们的安装创建一个新的虚拟硬盘：![创建新虚拟机](img/B04527_02_03.jpg)
- en: We choose **VDI (VirtualBox Disk Image)** as the virtual disk format:![Creating
    a new virtual machine](img/B04527_02_04.jpg)
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们选择**VDI（VirtualBox磁盘映像）**作为虚拟磁盘格式：![创建新虚拟机](img/B04527_02_04.jpg)
- en: We select the **Dynamically allocated** option, which only uses the space on
    the physical drive as the virtual disk file grows, up to the fixed maximum size:![Creating
    a new virtual machine](img/B04527_02_05.jpg)
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们选择**动态分配**选项，这只会在虚拟磁盘文件增长时使用物理驱动器上的空间，直到达到固定的最大大小：![创建新虚拟机](img/B04527_02_05.jpg)
- en: We set up the virtual disk file location and the maximum size; then we click
    on the **Create** button and the VM is ready!![Creating a new virtual machine](img/B04527_02_06.jpg)
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们设置虚拟磁盘文件位置和最大大小；然后点击**创建**按钮，虚拟机就准备好了！[创建新虚拟机](img/B04527_02_06.jpg)
- en: Installation steps
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装步骤
- en: 'At this point, the virtual machine is created and we are ready to install the
    Kali Linux operating system on it. To do so, we follow the subsequent steps:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，虚拟机已创建，我们准备在其上安装Kali Linux操作系统。为此，我们按照以下步骤进行：
- en: 'We select the newly created Kali Linux VM in the left pane of the Oracle VM
    VirtualBox Manager, and next, we click on **Settings** on the toolbar menu and
    then on **Storage**. We select the **Controller: IDE** entry associated with the
    **CD/DVD Drive** field, and in the **Attributes** section, we choose the Kali
    Linux ISO on the hard drive. This is analogous to inserting a Kali Linux installation
    DVD in the physical drive when installing it on the hard disk directly, so that
    the machine can boot from it:![Installation steps](img/B04527_02_07.jpg)'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们在Oracle VM VirtualBox Manager的左窗格中选择新创建的Kali Linux VM，然后点击工具栏菜单上的**设置**，然后点击**存储**。我们选择与**CD/DVD驱动器**字段关联的**控制器：IDE**条目，并在**属性**部分选择硬盘上的Kali
    Linux ISO。这类似于在直接在硬盘上安装Kali Linux时在物理驱动器上插入Kali Linux安装DVD，以便机器可以从中引导：![安装步骤](img/B04527_02_07.jpg)
- en: Now, we start the VM clicking on the **Start** button on the toolbar menu. The
    VM boots from the ISO and the installation boot menu is shown in the following
    screenshot:![Installation steps](img/B04527_02_08.jpg)
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们点击工具栏菜单上的**启动**按钮启动虚拟机。虚拟机从ISO引导，并在以下截图中显示安装引导菜单：![安装步骤](img/B04527_02_08.jpg)
- en: We follow the steps of the installation wizard, selecting in succession the
    language (default is English), the country, the locale setting, the keyboard layout,
    the hostname, and the domain name. Then, we need to set up the password of the
    root account. Root is the default and the most privileged account in the system,
    which has the full administrative rights:![Installation steps](img/B04527_02_09.jpg)
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们按照安装向导的步骤，依次选择语言（默认为英语）、国家、区域设置、键盘布局、主机名和域名。然后，我们需要设置root帐户的密码。Root是系统中默认和最高特权的帐户，具有完全的管理权限：![安装步骤](img/B04527_02_09.jpg)
- en: We select the time zone and then we need to choose the disk partitioning method.
    We can choose the guided methods (using three different schemes) or the manual
    one if we desire to partition the disk. In our case, we are going to select the
    first method and use the entire virtual disk associated with the VM:![Installation
    steps](img/B04527_02_10.jpg)
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们选择时区，然后需要选择磁盘分区方法。我们可以选择引导方法（使用三种不同的方案）或手动方法，如果我们希望对磁盘进行分区。在我们的情况下，我们将选择第一种方法，并使用与虚拟机关联的整个虚拟磁盘：![安装步骤](img/B04527_02_10.jpg)
- en: Then, the installer asks which disk to use for installing the system (in our
    case, it is unique), and in the following window, whether we want to use a single
    partition or create separate partitions for different mount points (for example,
    `/home`, `/usr/local`, `/opt`, and so on):![Installation steps](img/B04527_02_11.jpg)
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，安装程序询问要使用哪个磁盘来安装系统（在我们的情况下，是唯一的），在接下来的窗口中，询问我们是否要使用单个分区或为不同的挂载点创建单独的分区（例如，`/home`，`/usr/local`，`/opt`等）：![安装步骤](img/B04527_02_11.jpg)
- en: The installer creates the root (`/`) and the swap partitions and asks to confirm
    it, writing the changes on the virtual disk:![Installation steps](img/B04527_02_12.jpg)
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装程序创建根（`/`）和交换分区，并要求确认，将更改写入虚拟磁盘：![安装步骤](img/B04527_02_12.jpg)
- en: After all the data is copied to the disk, the installer asks whether we want
    to use a network mirror to install the software that is not included in the installation
    ISO or to update the installed software. Then, we need to choose whether or not
    to install the GRUB boot loader on the **Master Boot Record** (**MBR**) of the
    virtual disk. We are going to install it:![Installation steps](img/B04527_02_13.jpg)
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在所有数据复制到磁盘后，安装程序询问我们是否要使用网络镜像来安装未包含在安装ISO中的软件或更新已安装的软件。然后，我们需要选择是否要在虚拟磁盘的**主引导记录**（**MBR**）上安装GRUB引导加载程序。我们将安装它：![安装步骤](img/B04527_02_13.jpg)
- en: One step more and the installation is complete. Now we have a brand new Kali
    Linux system on our VM! We can restart the VM to boot it up, after having removed
    the installation ISO from the virtual CD/DVD drive:![Installation steps](img/B04527_02_14.jpg)
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再走一步，安装就完成了。现在我们在虚拟机上有了一个全新的Kali Linux系统！我们可以重新启动虚拟机来启动它，然后从虚拟CD/DVD驱动器中删除安装ISO：![安装步骤](img/B04527_02_14.jpg)
- en: Wireless adapter setup and configuration
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 无线适配器的设置和配置
- en: Now that we have installed Kali Linux on our VM, it is time to talk about the
    wireless adapter configuration. However, first let's take a look at its requirements.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经在虚拟机上安装了Kali Linux，是时候谈谈无线适配器的配置了。但是，首先让我们看看它的要求。
- en: Requirements of the wireless adapter
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 无线适配器的要求
- en: 'The main requirements that a wireless adapter must meet to be suitable for
    wireless penetration testing are:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 无线适配器必须满足进行无线渗透测试的主要要求是：
- en: Compatibility with the IEEE 802.11b/g/n Wi-Fi standards and possibly also with
    802.11a, which operates on the 5 GHz band (dual-band support).
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与IEEE 802.11b/g/n Wi-Fi标准兼容，可能还与在5 GHz频段上运行的802.11a兼容（双频支持）。
- en: The capability to put the card in the so-called *monitor mode*, which allows
    to sniff all the wireless traffic. The monitor mode is equivalent to the promiscuous
    mode in wired networks.
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 能够将卡放入所谓的*监控模式*，这允许对所有无线流量进行嗅探。监控模式相当于有线网络中的混杂模式。
- en: The capability to support *packet injection* to actively inject traffic into
    the network.
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持*数据包注入*的能力，以主动向网络中注入流量。
- en: To verify that our Wi-Fi adapter satisfies these requirements, we first need
    to determine its chipset and verify that its Linux drivers support both monitor
    mode and packet injection. We will see how to practically test whether our adapter
    meets these requirements later in this chapter.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 要验证我们的Wi-Fi适配器是否满足这些要求，我们首先需要确定其芯片组，并验证其Linux驱动程序是否支持监控模式和数据包注入。我们将在本章后面看到如何实际测试我们的适配器是否满足这些要求。
- en: Note
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Verifying the adapter chipset compatibility**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**验证适配器芯片组的兼容性**'
- en: 'Great resources to determine the chipset and verify its compatibility are the
    *Tutorial: Is My Wireless Card Compatible?* and the *Compatibility_drivers* sections
    on the Aircrack-ng documentation wiki (see the reference section of *Chapter 2*,
    *Setting Up Your Machine with Kali Linux*, in [Appendix](apa.html "Appendix A. References"),
    *References*).'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '确定芯片组并验证其兼容性的绝佳资源是Aircrack-ng文档wiki上的*Tutorial: Is My Wireless Card Compatible?*和*Compatibility_drivers*部分（请参阅[附录](apa.html
    "附录 A. 参考资料")中*第2章*，*使用Kali Linux设置您的机器*，*参考资料*）。'
- en: They provide a detailed list of chipsets and their levels of support for wireless
    penetration testing.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 它们提供了一个详细的芯片组列表，以及它们在无线渗透测试中的支持级别。
- en: If our laptop isn't very old, it is almost certainly equipped with an internal
    Wi-Fi card. Internal cards are usually not the best choice for wireless penetration
    testing because most of their chipsets are not supported on Kali Linux for this
    purpose. Moreover, we can't use an internal card within a virtual machine because
    we need direct access to the device for it to work and virtual machines allow
    direct access to USB devices only. Thus, if Kali Linux is running on a virtual
    machine, we can only use USB wireless adapters.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们的笔记本电脑不是很旧，几乎肯定配备了内置Wi-Fi卡。内置卡通常不是进行无线渗透测试的最佳选择，因为它们的大多数芯片组在Kali Linux上不支持此目的。此外，我们无法在虚拟机中使用内置卡，因为我们需要直接访问设备才能使其工作，而虚拟机只允许对USB设备进行直接访问。因此，如果Kali
    Linux在虚拟机上运行，我们只能使用USB无线适配器。
- en: For these reasons, the recommended choice is to use an USB wireless adapter
    with an external high-gain antenna, which has more transmit power and sensitivity
    than integrated antennas and thus allows long range signal receiving and transmitting.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，推荐的选择是使用带有外置高增益天线的USB无线适配器，它比集成天线具有更多的发射功率和灵敏度，从而允许长距离信号接收和发送。
- en: An adapter that has these features, is well supported by Kali Linux, is cheap,
    and therefore very popular among wireless penetration testers is the Alfa Networks
    AWUS036NH USB card. This card has a Ralink chipset. Other chipsets that are well
    supported under Linux are the Atheros and the Realtek RTL8187L chipsets.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 具有这些功能的适配器在Kali Linux中得到了很好的支持，价格便宜，因此在无线渗透测试人员中非常受欢迎的是Alfa Networks AWUS036NH
    USB卡。该卡具有Ralink芯片组。在Linux下得到很好支持的其他芯片组是Atheros和Realtek RTL8187L芯片组。
- en: Through the rest of the book, we will assume that you are using an USB wireless
    adapter.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的其余部分，我们将假设您正在使用USB无线适配器。
- en: Wireless card configuration
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 无线卡配置
- en: After connecting our adapter to the USB port, we have to configure it to be
    used within our virtual machine with Kali Linux installed.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 将适配器连接到USB端口后，我们必须配置它以在安装了Kali Linux的虚拟机中使用。
- en: We start the VirtualBox VM Manager, select our Kali Linux VM on the left pane,
    and navigate to **Settings** | **USB**. First, we should enable the USB 2.0 controller,
    if we haven't enabled it already. This requires having the VirtualBox Extension
    Pack installed (for more information, see the *Installing the VirtualBox Extension
    Pack* information box).
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们启动VirtualBox VM Manager，在左窗格中选择我们的Kali Linux VM，然后导航到**设置** | **USB**。首先，如果我们还没有启用USB
    2.0控制器，我们应该启用它。这需要安装VirtualBox扩展包（有关更多信息，请参阅*安装VirtualBox扩展包*信息框）。
- en: We click on the add a new USB device filter (the green plus icon) on the right
    and select the device that corresponds to our wireless adapter:![Wireless card
    configuration](img/B04527_02_15.jpg)
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们点击右侧的添加新USB设备过滤器（绿色加号图标），然后选择与我们的无线适配器对应的设备：![无线卡配置](img/B04527_02_15.jpg)
- en: Note
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: '**Installing the VirtualBox Extension Pack**'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '**安装VirtualBox扩展包**'
- en: We can download the Extension Pack from [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)
    selecting the appropriate file according to the installed VirtualBox version.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以从[https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)下载扩展包，根据安装的VirtualBox版本选择适当的文件。
- en: Information about the VirtualBox Extension Pack and how to install it is available
    at [https://www.virtualbox.org/manual/ch01.html#intro-installing](https://www.virtualbox.org/manual/ch01.html#intro-installing).
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 有关VirtualBox扩展包及其安装方法的信息，请访问[https://www.virtualbox.org/manual/ch01.html#intro-installing](https://www.virtualbox.org/manual/ch01.html#intro-installing)。
- en: We start our VM that should now be able to use our wireless adapter via its
    USB pass-through capability. After the Kali Linux within the VM has booted, we
    log in to the system as root and open the terminal emulator. We type the `iwconfig`
    command to list all the wireless interfaces available on our system:![Wireless
    card configuration](img/B04527_02_16.jpg)
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们启动我们的虚拟机，现在应该能够通过USB直通功能使用我们的无线适配器。在虚拟机中启动Kali Linux后，我们以root用户登录系统并打开终端仿真器。我们输入`iwconfig`命令来列出系统上所有可用的无线接口：![无线网卡配置](img/B04527_02_16.jpg)
- en: 'The system has assigned our adapter the `wlan0` interface, but it is still
    not active, as we can see from the `ifconfig` output:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 系统已分配`wlan0`接口给我们的适配器，但它仍未激活，如`ifconfig`输出所示：
- en: '![Wireless card configuration](img/B04527_02_17.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![无线网卡配置](img/B04527_02_17.jpg)'
- en: To bring the `wlan0` interface up, we execute the `ifconfig wlan0 up` command
    and then `ifconfig` to verify that it has been activated. Now, our wireless interface
    is up and running, as we can notice in the following screenshot:![Wireless card
    configuration](img/B04527_02_18.jpg)
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了启用`wlan0`接口，我们执行`ifconfig wlan0 up`命令，然后使用`ifconfig`来验证它是否已被激活。现在，我们的无线接口已经启动运行，如下截图所示：![无线网卡配置](img/B04527_02_18.jpg)
- en: Testing the adapter for wireless penetration testing
  id: totrans-65
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试适配器进行无线渗透测试
- en: Now that we have set up the adapter, we can run a little test to verify that
    it is really suitable for wireless penetration testing, that is, it can be put
    in monitor mode and it supports packet injection. To do so, we use two programs
    from the Aircrack-ng suite that will also be extensively used through the rest
    of the book.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经设置好了适配器，我们可以进行一个小测试，以验证它是否真的适合进行无线渗透测试，即它是否可以被置于监视模式并支持数据包注入。为此，我们将使用Aircrack-ng套件中的两个程序，这些程序在本书的其余部分中也将被广泛使用。
- en: First, we execute `airmon-ng start wlan0` to put the interface in monitor mode.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们执行`airmon-ng start wlan0`将接口置于监视模式。
- en: If the command completes successfully and the monitor mode is enabled on the
    newly created interface `mon0`, it means that it has passed this test!
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果命令成功完成，并且新创建的接口`mon0`启用了监视模式，那么它已通过了这个测试！
- en: '![Testing the adapter for wireless penetration testing](img/B04527_02_19.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![测试适配器进行无线渗透测试](img/B04527_02_19.jpg)'
- en: 'Next, we run the `aireplay-ng -9 wlan0` command, where the `-9` option means
    that it is an injection test (the full form is `--test`):'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们运行`aireplay-ng -9 wlan0`命令，其中`-9`选项表示这是一个注入测试（完整形式为`--test`）：
- en: '![Testing the adapter for wireless penetration testing](img/B04527_02_20.jpg)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![测试适配器进行无线渗透测试](img/B04527_02_20.jpg)'
- en: Aireplay-ng is a tool designed to generate and inject frames and we will use
    it to conduct many of the attacks that we will cover in the book.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Aireplay-ng是一个用于生成和注入帧的工具，我们将使用它来进行本书中涵盖的许多攻击。
- en: If the `Injection is working!` string appears in the output, then the test is
    successful and our adapter supports packet injection!
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 如果输出中出现`Injection is working!`字符串，则测试成功，我们的适配器支持数据包注入！
- en: The test provides other valuable information as well; it tells us the channel
    that the wireless interface is using and the access points that it found through
    responses to the broadcast probes or received beacons and the relative connection
    qualities (we will treat these topics in [Chapter 3](ch03.html "Chapter 3. WLAN
    Reconnaissance"), *WLAN Reconnaissance*).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 测试还提供其他有价值的信息；它告诉我们无线接口使用的信道以及通过响应广播探测或接收的信标找到的接入点，以及相关的连接质量（我们将在[第3章](ch03.html
    "Chapter 3. WLAN Reconnaissance")中讨论这些主题，*WLAN Reconnaissance*）。
- en: More information about the injection test can be found at [http://www.aircrack-ng.org/doku.php?id=injection_test](http://www.aircrack-ng.org/doku.php?id=injection_test).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 有关注入测试的更多信息，请访问[http://www.aircrack-ng.org/doku.php?id=injection_test](http://www.aircrack-ng.org/doku.php?id=injection_test)。
- en: Troubleshooting
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 故障排除
- en: As we have seen, the Kali Linux distribution supports a wide range of wireless
    adapters and we should not have any problems in configuring our wireless adapter.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，Kali Linux发行版支持各种无线适配器，我们不应该在配置无线适配器时遇到任何问题。
- en: However, sometimes our adapter does not show up on the `iwconfig` output. In
    this case, we could check the output of the `lsusb` or `lspci` tools (depending
    on the interface type) to see if the device has been detected by the operating
    system and the output of `dmesg` to check whether the relative drivers have been
    loaded correctly.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，有时我们的适配器在`iwconfig`输出中没有显示。在这种情况下，我们可以使用`lsusb`或`lspci`工具（取决于接口类型）来检查操作系统是否已检测到设备，并使用`dmesg`来检查相关驱动程序是否已正确加载。
- en: 'At other times, it could happen that the wireless adapter is recognized but
    the `ifconfig wlan0 up` command fails to bring the interface up, with the error
    message `''SIOCSIFFLAGS : No such file or directory''`. This error usually indicates
    that the driver could not load the adapter firmware because it is missing or not
    correctly installed.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '有时，无线适配器可能被识别，但`ifconfig wlan0 up`命令无法启用接口，出现错误消息`''SIOCSIFFLAGS : No such
    file or directory''`。这个错误通常表示驱动程序无法加载适配器固件，因为固件丢失或未正确安装。'
- en: We can solve this issue by installing the correct firmware that could be identified
    on the documentation of the adapter driver.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过安装正确的固件来解决这个问题，这些固件可以在适配器驱动的文档中找到。
- en: 'For example, to install the firmware package for a Ralink chipset adapter,
    we execute the following command:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，要为Ralink芯片组适配器安装固件包，我们执行以下命令：
- en: '[PRE0]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: For more detailed information about wireless adapter configuration troubleshooting,
    some useful references can be found in [Appendix](apa.html "Appendix A. References"),
    *References*.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 有关无线适配器配置故障排除的更详细信息，可以在[附录](apa.html "附录A.参考资料")中找到一些有用的参考资料。
- en: Summary
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we have seen how to create a virtual machine using Virtual
    Box and how to install Kali Linux on it. After covering the wireless adapter's
    requirements for wireless penetration testing, we have configured the USB wireless
    adapter to work with Kali Linux and tested it for the requirements that we analyzed
    earlier.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们看到了如何使用Virtual Box创建虚拟机以及如何在其中安装Kali Linux。在涵盖了无线适配器对无线渗透测试的要求之后，我们已经配置了USB无线适配器以在Kali
    Linux上工作，并对我们之前分析的要求进行了测试。
- en: In the next chapter, we are going to cover the wireless penetration testing's
    discovery and information gathering phase.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将涵盖无线渗透测试的发现和信息收集阶段。
