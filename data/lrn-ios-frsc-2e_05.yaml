- en: Chapter 5. Evidence Acquisition and Analysis from iCloud
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第五章. 来自 iCloud 的证据获取与分析
- en: The goal of this chapter is to introduce the cloud system provided by Apple
    to all its users through which they can save the backups of their devices and
    other files on remote servers. In the first part of the chapter, we will show
    you the main characteristics of this service, and then the techniques to create
    and recover a backup and other files from iCloud.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的目标是介绍苹果公司为所有用户提供的云系统，通过该系统，用户可以将其设备和其他文件的备份保存在远程服务器上。在本章的第一部分，我们将展示该服务的主要特点，然后介绍如何创建和恢复备份以及从
    iCloud 恢复其他文件的技术。
- en: The iCloud service
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iCloud 服务
- en: iCloud is a cloud storage and cloud computing service designed by Apple and
    offered to iOS users since iOS 5\. The iCloud service was announced on June 6,
    2011 during the Apple Worldwide Developers Conference, and became available to
    the public from October 12, 2011\. In February 2016, iCloud had more than 780
    million users. The service allows users to store data on iCloud Drive, share photos
    and videos between various devices and people, perform geolocation for their Apple
    device with Find My iPhone, and save personal passwords with iCloud Keychain on
    remote servers. The iCloud Drive storage space can also be used by individual
    applications to store information and specific backup data; for example, WhatsApp,
    at the time of the first configuration or following a version upgrade, asks the
    user whether they wants to use iCloud to store backups of conversations and WhatsApp
    media files, and if so, how often (daily, weekly, or monthly). iCloud also allows
    users to synchronize data between devices (e-mail, contacts, calendars, bookmarks,
    notes, reminders, iWork documents, and so on) or to make a backup of an iOS device
    (iPhone, iPad, or iPod touch) on remote servers rather than using iTunes and your
    local computer. The data uploaded to iCloud can also be shared with Apple computers
    running Mac OS X (native support) or a personal computer running Windows Vista
    or later, by installing the iCloud Control Panel software, which can be downloaded
    for free from the Apple website.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: iCloud 是由苹果公司设计的云存储和云计算服务，自 iOS 5 起提供给 iOS 用户。iCloud 服务于 2011 年 6 月 6 日在苹果全球开发者大会上宣布，并于
    2011 年 10 月 12 日向公众开放。到 2016 年 2 月，iCloud 拥有超过 7.8 亿用户。该服务允许用户将数据存储在 iCloud Drive
    上，在不同设备和用户之间共享照片和视频，通过“查找我的 iPhone”进行设备定位，并通过 iCloud 钥匙串在远程服务器上保存个人密码。iCloud Drive
    存储空间还可以被单个应用程序用来存储信息和特定的备份数据；例如，WhatsApp 在首次配置或版本升级后，会询问用户是否希望使用 iCloud 来存储聊天记录和
    WhatsApp 媒体文件的备份，如果是的话，备份频率选择（每天、每周或每月）。iCloud 还允许用户在设备之间同步数据（例如电子邮件、联系人、日历、书签、备忘录、提醒事项、iWork
    文档等）或将 iOS 设备（iPhone、iPad 或 iPod touch）备份到远程服务器，而不是使用 iTunes 和本地计算机。上传到 iCloud
    的数据也可以与运行 Mac OS X 的苹果计算机（本地支持）或运行 Windows Vista 及更高版本的个人计算机共享，通过安装 iCloud 控制面板软件，该软件可以从苹果官网免费下载。
- en: Each iCloud account has 5 GB of free storage. Purchases made through iTunes
    (music, apps, videos, movies, and so on) are not calculated in the count of the
    occupied space and can be stored in iCloud and downloaded on all devices associated
    with the Apple ID of the user. Moreover, the user has the option to purchase additional
    storage in denominations of 50 GB ($0.99 a month), 200 GB ($2.99 a month), or
    1,000 GB ($9.99 a month).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 每个 iCloud 账户有 5 GB 的免费存储空间。通过 iTunes 购买的内容（如音乐、应用、视频、电影等）不计算在占用空间内，可以存储在 iCloud
    中并在所有与用户 Apple ID 关联的设备上下载。此外，用户还可以选择购买额外存储，存储选项包括 50 GB（每月 $0.99）、200 GB（每月 $2.99）或
    1,000 GB（每月 $9.99）。
- en: iDevice backup on iCloud
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iDevice 在 iCloud 上的备份
- en: 'iCloud allows users to make online backups of iDevices so that they will be
    able to restore their data even on a different iDevice (for example, in case of
    replacement of devices). The choice of which backup mode to use can be done directly
    in the settings of the device or through iTunes when the device is connected to
    the PC or Mac, as shown in the following screenshot:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: iCloud 允许用户在线备份 iDevice，这样即使更换设备（例如替换设备），也能恢复数据。用户可以直接在设备的设置中选择使用哪种备份模式，或者通过
    iTunes 在设备连接到 PC 或 Mac 时进行选择，具体操作如以下截图所示：
- en: '![iDevice backup on iCloud](img/B05100_05_01.jpg)'
  id: totrans-7
  prefs: []
  type: TYPE_IMG
  zh: '![iDevice 在 iCloud 上的备份](img/B05100_05_01.jpg)'
- en: 'Once the user has activated the service, the device automatically backs up,
    at least once a day, and each time all the following conditions are met:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦用户激活了该服务，设备会自动进行备份，至少每天一次，并且每次备份时都会满足以下所有条件：
- en: It is connected to the power cable
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备连接了电源线
- en: It is connected to a Wi-Fi network
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它连接到一个 Wi-Fi 网络
- en: The screen is locked
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 屏幕已锁定
- en: Enough space on iCloud is available
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: iCloud 上有足够的空间可用
- en: iCloud online backups are incremental through subsequent snapshots, and each
    snapshot is the current status of the device at the time of its creation. The
    structure of the backup stored on iCloud is entirely analogous to that of the
    backup made with iTunes.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: iCloud 在线备份通过后续快照是增量的，每个快照是其创建时设备的当前状态。存储在 iCloud 上的备份结构与使用 iTunes 制作的备份完全类似。
- en: iDevice backup acquisition
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iDevice 备份获取
- en: Backups that are made online are, to all intents and purposes, not encrypted.
    Technically, they are encrypted, but the encryption key is stored with the encrypted
    files. Apple made this choice in order for users to be able to restore the backup
    on a different device from the one that created it. Currently, the acquisition
    of iCloud backup is supported by various commercial software (**Elcomsoft Phone
    Breaker** (**EPPB**), Passware, Oxygen Forensics Detective, Cellebrite Cloud Analyzer,
    iPhone Backup Extractor, and Wondershare Dr.Fone) and two open source tools (iLoot,
    which is available at [https://github.com/hackappcom/iloot](https://github.com/hackappcom/iloot)
    and works up to iOS 8 and InflatableDonkey, which is available at [https://github.com/horrorho/InflatableDonkey](https://github.com/horrorho/InflatableDonkey)
    and works with iOS 9). The interesting aspect is that this same technique was
    used in the iCloud hack performed in 2014, when personal photos and videos were
    hacked from the respective iCloud services and released over the Internet (more
    information is available at [http://en.wikipedia.org/wiki/2014_celebrity_photo_hack](http://en.wikipedia.org/wiki/2014_celebrity_photo_hack)).
    Although there is no strong evidence yet that describes how the hack was made,
    it is believed that Apple's *Find My iPhone* service was responsible for this
    and Apple did not implement any security measure to lock down the account after
    a particular number of wrong login attempts, which directly raises the possibility
    of exploitation (brute force, in this case). The tool used to brute force the
    iCloud password, named iBrute, is still available at [https://github.com/hackappcom/ibrute](https://github.com/hackappcom/ibrute),
    but it has not been working since January 2015\. A new tool called iBrutr [https://github.com/Pr0x13/iBrutr](https://github.com/Pr0x13/iBrutr),
    which uses a different iCloud service vulnerability, was released in September
    2015.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在线制作的备份在实质上是没有加密的。技术上说，它们是加密的，但加密密钥与加密文件一起存储。苹果之所以做出这样的选择，是为了让用户能够在不同设备上恢复备份。目前，iCloud
    备份的获取受各种商业软件（**Elcomsoft Phone Breaker**（**EPPB**）、Passware、Oxygen Forensics Detective、Cellebrite
    Cloud Analyzer、iPhone Backup Extractor 和 Wondershare Dr.Fone）以及两款开源工具（iLoot，可在
    [https://github.com/hackappcom/iloot](https://github.com/hackappcom/iloot) 获取，适用于
    iOS 8 及以下版本；InflatableDonkey，可在 [https://github.com/horrorho/InflatableDonkey](https://github.com/horrorho/InflatableDonkey)
    获取，适用于 iOS 9）的支持。有趣的是，这种技术曾在 2014 年的 iCloud 黑客攻击中使用过，从而导致个人照片和视频被黑客从 iCloud 服务中获取并发布到互联网上（更多信息请参见
    [http://en.wikipedia.org/wiki/2014_celebrity_photo_hack](http://en.wikipedia.org/wiki/2014_celebrity_photo_hack)）。尽管目前没有强有力的证据描述这次黑客攻击是如何进行的，但人们普遍认为苹果的
    *查找我的 iPhone* 服务对此负有责任，并且苹果并未在一定次数的错误登录尝试后实施任何安全措施，直接增加了利用（在这种情况下为暴力破解）的可能性。用于暴力破解
    iCloud 密码的工具，名为 iBrute，仍可在 [https://github.com/hackappcom/ibrute](https://github.com/hackappcom/ibrute)
    获取，但自 2015 年 1 月以来已无法使用。一个名为 iBrutr 的新工具 [https://github.com/Pr0x13/iBrutr](https://github.com/Pr0x13/iBrutr)，利用了不同的
    iCloud 服务漏洞，于 2015 年 9 月发布。
- en: Case study - iDevice backup acquisition and EPPB with username and password
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - iDevice 备份获取和带有用户名和密码的 EPPB
- en: As reported on the software manufacturer's website, EPPB allows the acquisition
    of data stored on an online backup. Moreover, online backups can be acquired without
    having the original iOS device to hand. All that's needed to access online backups
    stored in the cloud service are the original user's credentials, including their
    Apple ID, accompanied with the corresponding password or an authentication token
    extracted from a computer (detailed later in this chapter).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 据软件制造商网站报道，EPPB 允许获取存储在在线备份中的数据。此外，即使没有原始 iOS 设备在手，也可以获取在线备份。要访问存储在云服务中的在线备份，只需使用原始用户的凭据，包括他们的
    Apple ID，以及从计算机中提取的相应密码或认证令牌（本章后面详细描述）。
- en: 'iCloud login credentials can be retrieved as follows:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: iCloud 登录凭据可以按以下步骤检索：
- en: Using social engineering techniques
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用社会工程技术
- en: From a PC (or a Mac) on which they are stored
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从存储它们的PC（或Mac）中获取
- en: Using iTunes Password Decryptor ([http://securityxploded.com/](http://securityxploded.com/))
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用iTunes密码解密工具 ([http://securityxploded.com/](http://securityxploded.com/))
- en: Using WebBrowserPassView ([http://www.nirsoft.net/](http://www.nirsoft.net/))
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用WebBrowserPassView ([http://www.nirsoft.net/](http://www.nirsoft.net/))
- en: Directly from the device (iPhone/iPad/iPod touch) by extracting the credentials
    stored in the Keychain, as explained in [Chapter 4](ch04.html "Chapter 4. Evidence
    Acquisition and Analysis from iTunes Backup"), *Evidence Acquisition and Analysis
    from iTunes Backup*
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接从设备（iPhone/iPad/iPod touch）中提取存储在钥匙串中的凭证，如[第4章](ch04.html "第4章：iTunes备份中的证据获取与分析")，*iTunes备份中的证据获取与分析*中所述
- en: 'Once the credentials have been extracted, the download of the backup is very
    simple. Follow the step-by-step instructions provided in the program by entering
    the username and password in the **Download backup from iCloud** dialog box by
    navigating to **Tools** | **Apple** | **Download backup from iCloud** | **Password**
    and clicking on **Sign in**, as shown in the following screenshot:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦凭证提取完成，下载备份变得非常简单。按照程序提供的逐步说明，在**从iCloud下载备份**对话框中输入用户名和密码，进入**工具** | **Apple**
    | **从iCloud下载备份** | **密码**，然后点击**登录**，如以下截图所示：
- en: '![Case study - iDevice backup acquisition and EPPB with username and password](img/B05100_05_02.jpg)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取和EPPB，包含用户名和密码](img/B05100_05_02.jpg)'
- en: 'At this point, the software displays a screen that shows all the backups present
    in the user account and allows you to download data, as shown here:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，软件会显示一个界面，展示用户账户中所有的备份，并允许你下载数据，如下所示：
- en: '![Case study - iDevice backup acquisition and EPPB with username and password](img/B05100_05_03.jpg)'
  id: totrans-27
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取和EPPB，包含用户名和密码](img/B05100_05_03.jpg)'
- en: 'It is important to notice the possibility of using the following two options:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意以下两种选项的使用可能性：
- en: '**Restore original file names**: If enabled, this option interprets the contents
    of the `Manifest.mbdb` file and rebuilds the backup with the same tree structure
    into domains and subdomains as described in [Chapter 4](ch04.html "Chapter 4. Evidence
    Acquisition and Analysis from iTunes Backup"), *Evidence Acquisition and Analysis
    from iTunes Backup*. If the investigator intends to carry out the analysis with
    traditional software for data extraction from backups, it is recommended that
    you disable this option, because if enabled, that software will no longer be able
    to parse the backup.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**恢复原始文件名**：启用时，该选项会解析`Manifest.mbdb`文件的内容，并以相同的树结构将备份重建为域和子域，如[第4章](ch04.html
    "第4章：iTunes备份中的证据获取与分析")，*iTunes备份中的证据获取与分析*中所描述。如果调查员打算使用传统的软件从备份中提取数据进行分析，建议禁用此选项，因为启用后，该软件将无法解析备份。'
- en: '**Download only specific data**: This option is very useful when the investigator
    needs to download only some specific information. Currently, the software supports
    **Call history**, **Messages**, **Attachments**, **Contacts**, **Safari data**,
    **Google data**, **Calendar**, **Notes**, **Info & Settings**, **Camera Roll**,
    **Social & Communications**, and so on. In this case, the **Restore original file
    names** option is automatically activated and it cannot be disabled:![Case study
    - iDevice backup acquisition and EPPB with username and password](img/B05100_05_04.jpg)'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仅下载特定数据**：当调查员只需要下载某些特定信息时，此选项非常有用。目前，软件支持**通话记录**、**消息**、**附件**、**联系人**、**Safari数据**、**Google数据**、**日历**、**笔记**、**信息与设置**、**相机胶卷**、**社交与通讯**等数据。在此情况下，**恢复原始文件名**选项会自动启用，且无法禁用：![案例研究
    - iDevice备份获取和EPPB，包含用户名和密码](img/B05100_05_04.jpg)'
- en: 'Once you have chosen the destination folder for the download, the backup starts.
    The time required to download depends on the size of the storage space available
    to the user and the number of snapshots stored within that space:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 选择下载目标文件夹后，备份开始下载。下载所需的时间取决于用户可用存储空间的大小以及该空间内存储的快照数量：
- en: '![Case study - iDevice backup acquisition and EPPB with username and password](img/B05100_05_05.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取和EPPB，包含用户名和密码](img/B05100_05_05.jpg)'
- en: Case study - iDevice backup acquisition and EPPB with authentication token
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - iDevice备份获取和EPPB，包含身份验证令牌
- en: The Forensic edition of Phone Breaker from Elcomsoft is a tool that gives a
    digital forensics examiner the power to obtain iCloud data without having the
    original Apple ID and password. This kind of access is made possible via the use
    of an authentication token extracted from the user's computer. These tokens can
    be obtained from any suspect's computer where iCloud Control Panel is installed.
    Tokens can be extracted from such computers both live while it's running and afterwards
    from its hard drive, by extracting specific files and folders.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: Elcomsoft的Phone Breaker取证版是一款工具，能够让数字取证检查员在没有原始Apple ID和密码的情况下获取iCloud数据。这种访问是通过提取用户计算机中的身份验证令牌来实现的。这些令牌可以从任何安装了iCloud控制面板的嫌疑人计算机中提取。令牌可以在计算机运行时提取，也可以在计算机关闭后，从其硬盘中提取，通过提取特定的文件和文件夹。
- en: In the first case, on a live system, the analyst needs to use a small executable
    file called `atex.exe` on the machine. The executable file can be launched from
    an external pen drive during a live forensics activity.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 在第一个案例中，在活跃的系统上，分析员需要在机器上使用一个名为`atex.exe`的小型可执行文件。该可执行文件可以在现场取证活动中通过外部U盘启动。
- en: 'Open Command Prompt and launch the `atex -l` command to list all the local
    iCloud users as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 打开命令提示符，运行`atex -l`命令以列出所有本地iCloud用户，如下所示：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_06.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取与带身份验证令牌的EPPB](img/B05100_05_06.jpg)'
- en: 'Then, launch `atex.exe` again with the `--getToken` parameter and enter the
    username of the specific local Windows user (`-n username`) and the password for
    this user''s Windows account (`-p password`):'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，再次启动`atex.exe`并添加`--getToken`参数，输入特定本地Windows用户的用户名（`-n username`）和该用户的Windows账户密码（`-p
    password`）：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_07.jpg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取与带身份验证令牌的EPPB](img/B05100_05_07.jpg)'
- en: 'A file called `icloud_token_<timestamp>.txt` will be created in the folder
    from which `atex.exe` was launched. This file contains the Apple ID of the current
    iCloud Control Panel user and its authentication token:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 一个名为`icloud_token_<timestamp>.txt`的文件将会在`atex.exe`启动的文件夹中创建。此文件包含当前iCloud控制面板用户的Apple
    ID及其身份验证令牌：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_08.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取与带身份验证令牌的EPPB](img/B05100_05_08.jpg)'
- en: 'Now that the analyst has the authentication token, they can start the EPPB
    software, navigate to **Tools** | **Apple** | **Download backup from iCloud**
    | **Token**, copy and paste the token (be careful to copy the entire second row
    from the `.txt` file created by the `atex.exe` tool) into the software, and click
    on **Sign in**, as shown in the following screenshot. At this point, the software
    shows the screen for downloading the iCloud backups stored within the iCloud space
    of the user, in a similar way as you provide a username and password:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，分析员已获得身份验证令牌，他们可以启动EPPB软件，导航到**工具** | **Apple** | **从iCloud下载备份** | **令牌**，复制并粘贴令牌（小心复制`atex.exe`工具创建的`.txt`文件中的第二行全部内容）到软件中，然后点击**登录**，如下图所示。此时，软件会显示下载存储在用户iCloud空间中的iCloud备份的界面，类似于你输入用户名和密码的方式：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_09.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - iDevice备份获取与带身份验证令牌的EPPB](img/B05100_05_09.jpg)'
- en: 'The procedure for the Mac OS X version is exactly the same. Just launch the
    `atex` Mac version from a shell and follow the steps as shown previously in the
    Windows environment:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: Mac OS X版本的程序与此完全相同。只需从shell启动`atex` Mac版本，并按照之前在Windows环境中展示的步骤操作：
- en: '`sudo atex -l`: This command is used to get the list of all iCloud users.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sudo atex -l`：此命令用于获取所有iCloud用户的列表。'
- en: '`sudo atex --getTokenOnline -u <username>`: This command is used to get the
    authentication token for a specific user. You will need to enter the user''s system
    password when prompted.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`sudo atex --getTokenOnline -u <username>`：此命令用于获取特定用户的身份验证令牌。当提示时，你需要输入该用户的系统密码。'
- en: Tokens can also be extracted from a switched off computer, running either Mac
    OS X or MS Windows, where iCloud Control Panel is installed and configured.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 令牌也可以从关闭的计算机中提取，无论是运行Mac OS X还是MS Windows，并且安装和配置了iCloud控制面板。
- en: 'In a MS Windows environment, in order to obtain the token, you need to extract
    the following file and folder (or its forensics image) from the computer:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在MS Windows环境中，为了获取令牌，你需要从计算机中提取以下文件和文件夹（或其取证镜像）：
- en: The `com.apple.AOSKit.plist` file, typically located in `\Users\<username>\AppData\Roaming\Apple
    Computer\Preferences\`
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`com.apple.AOSKit.plist` 文件，通常位于 `\Users\<username>\AppData\Roaming\Apple Computer\Preferences\`'
- en: The `\Users\<username>\AppData\Roaming\Microsoft\Protect\<SID>\` folder
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`\Users\<username>\AppData\Roaming\Microsoft\Protect\<SID>\` 文件夹'
- en: It is also necessary to know the account password for the local user on the
    target computer.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 还需要知道目标计算机上本地用户的账户密码。
- en: 'Once these files have been extracted, you can start the EPPB software and navigate
    to **Tools** | **Apple** | **Extract authentication token**. The software prompts
    you to provide the `com.apple.AOSKit.plist` file and the local user password:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦这些文件被提取，你可以启动 EPPB 软件并导航至 **工具** | **苹果** | **提取身份验证令牌**。软件会提示你提供 `com.apple.AOSKit.plist`
    文件和本地用户密码：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_10.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用身份验证令牌获取 iDevice 备份和 EPPB](img/B05100_05_10.jpg)'
- en: 'The next step is you need to provide the path to the folder containing the
    user''s master key:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步，你需要提供包含用户主密钥的文件夹路径：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_11.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用身份验证令牌获取 iDevice 备份和 EPPB](img/B05100_05_11.jpg)'
- en: 'If the information provided is correct, the software will show the authentication
    token, allowing direct access to the download features of backup from iCloud and
    files from the iCloud Drive:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如果提供的信息正确，软件将显示身份验证令牌，从而直接访问 iCloud 备份下载功能和 iCloud Drive 中的文件：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_12.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用身份验证令牌获取 iDevice 备份和 EPPB](img/B05100_05_12.jpg)'
- en: 'In the Mac OS X environment, in order to obtain the token, you need to extract
    the following file and folder (or its forensics image) from the computer:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Mac OS X 环境下，为了获取令牌，你需要从计算机中提取以下文件和文件夹（或其法医镜像）：
- en: The `login.keychain` file, stored by default in `/Users/<username>/Library/Keychains/`
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`login.keychain` 文件，默认存储在 `/Users/<username>/Library/Keychains/` 中'
- en: The folder containing the authentication token, stored by default in `/Users/<username>/Library/Application
    Support/iCloud/Accounts/`
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储身份验证令牌的文件夹，默认存放在 `/Users/<username>/Library/Application Support/iCloud/Accounts/`
    中
- en: It is also necessary to know the account password for the local user on the
    target computer.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 还需要知道目标计算机上本地用户的账户密码。
- en: 'Once these files have been extracted, you can start the EPPB software and navigate
    to **Tools** | **Apple** | **Extract authentication token**. The software prompts
    you to provide the `login.keychain` file and the local user password:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦这些文件被提取，你可以启动 EPPB 软件并导航至 **工具** | **苹果** | **提取身份验证令牌**。软件会提示你提供 `login.keychain`
    文件和本地用户密码：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_13.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用身份验证令牌获取 iDevice 备份和 EPPB](img/B05100_05_13.jpg)'
- en: 'The next step you need is to provide the path to the folder containing the
    authentication token:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步，你需要提供包含身份验证令牌的文件夹路径：
- en: '![Case study - iDevice backup acquisition and EPPB with authentication token](img/B05100_05_14.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用身份验证令牌获取 iDevice 备份和 EPPB](img/B05100_05_14.jpg)'
- en: By clicking on **Extract**, the token is extracted in a `plist` file and can
    be used to access and backup files stored in iCloud.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 点击 **提取** 后，令牌将被提取为一个 `plist` 文件，可以用于访问和备份存储在 iCloud 中的文件。
- en: Case study - iDevice backup acquisition with iLoot
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - 使用 iLoot 获取 iDevice 备份
- en: The same activity can be performed using the open source tool called iLoot (available
    at [https://github.com/hackappcom/iloot](https://github.com/hackappcom/iloot)),
    which works up to iOS 8\. It requires Python and some dependencies. We suggest
    that you check out the website for the latest version and requirements.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以使用名为 iLoot 的开源工具执行相同的操作（可在 [https://github.com/hackappcom/iloot](https://github.com/hackappcom/iloot)
    获取），它支持到 iOS 8。该工具需要 Python 和一些依赖项。我们建议你查看该网站以获取最新版本和需求。
- en: 'By accessing the help (`iloot.py -h`), we can see the various available options.
    We can choose the output folder, if we want to download one specific snapshot,
    if we want the backup to be downloaded in the original iTunes format or with the
    domain-style folders, or if we want to download only specific information (for
    example, call history, SMS, photos, and so on) or only a specific domain, as shown
    here:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 通过访问帮助（`iloot.py -h`），我们可以看到各种可用选项。我们可以选择输出文件夹，如果我们只想下载特定的快照，选择是否希望以原始iTunes格式下载备份或使用域名风格的文件夹，或者只下载特定的信息（例如，通话记录、短信、照片等）或仅下载特定的域，如下所示：
- en: '![Case study - iDevice backup acquisition with iLoot](img/B05100_05_15.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用iLoot获取iDevice备份](img/B05100_05_15.jpg)'
- en: 'To download a backup, you only need to insert the account credentials, as shown
    in the following screenshot:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载备份，你只需要输入帐户凭证，如下图所示：
- en: '![Case study - iDevice backup acquisition with iLoot](img/B05100_05_16.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用iLoot获取iDevice备份](img/B05100_05_16.jpg)'
- en: At the end of the process, you will find the backup in the output folder (the
    default folder's name is `/output`).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 处理完成后，你将在输出文件夹中找到备份（默认文件夹名称为`/output`）。
- en: Case study - iDevice backup acquisition with InflatableDonkey
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - 使用InflatableDonkey获取iDevice备份
- en: The same activity on iOS 9 can be performed using an open source tool called
    InflatableDonkey (available at [https://github.com/horrorho/InflatableDonkey](https://github.com/horrorho/InflatableDonkey)).
    It requires Java SDK and Maven. We suggest that you check out the website for
    the latest version and requirements.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在iOS 9上执行相同的操作，可以使用一个名为InflatableDonkey的开源工具（可在[https://github.com/horrorho/InflatableDonkey](https://github.com/horrorho/InflatableDonkey)获取）。该工具需要Java
    SDK和Maven。我们建议你查看该网站以获取最新版本和要求。
- en: Note
  id: totrans-76
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: At the time of writing this book, the tool is still a PoC, so test it before
    using in real investigations.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 本书写作时，该工具仍然是一个概念验证工具（PoC），因此在实际调查中使用前请先进行测试。
- en: 'By accessing the help (`java -jar InflatableDonkey.jar --help`), we can see
    the various available options. We can choose the device that we want to access
    and the specific backup snapshot we want to download, apply a file extension or
    domain-based filter, request the list of available devices and snapshots, and
    define the output folder, as shown here:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 通过访问帮助（`java -jar InflatableDonkey.jar --help`），我们可以看到各种可用选项。我们可以选择要访问的设备和要下载的特定备份快照，应用文件扩展名或基于域的过滤器，获取可用设备和快照的列表，并定义输出文件夹，如下所示：
- en: '![Case study - iDevice backup acquisition with InflatableDonkey](img/B05100_05_17.jpg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用InflatableDonkey获取iDevice备份](img/B05100_05_17.jpg)'
- en: 'We can list the available devices and snapshots by providing the valid iCloud
    username and password, and the `--snapshots` option:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以通过提供有效的iCloud用户名和密码以及`--snapshots`选项来列出可用的设备和快照：
- en: '![Case study - iDevice backup acquisition with InflatableDonkey](img/B05100_05_18-1.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用InflatableDonkey获取iDevice备份](img/B05100_05_18-1.jpg)'
- en: 'To download the backup, you need to insert the account credentials and eventually
    choose the specific device and snapshots. In the example shown in the following
    screenshot, the second snapshot from the available device has been requested:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载备份，你需要输入帐户凭证并选择特定的设备和快照。在以下截图中，已经请求了来自可用设备的第二个快照：
- en: '![Case study - iDevice backup acquisition with InflatableDonkey](img/B05100_05_19-1.jpg)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用InflatableDonkey获取iDevice备份](img/B05100_05_19-1.jpg)'
- en: At the end of the process, you will find the backup in the output folder (the
    default folder's name is `/testoutput`). It is important to highlight that it
    is not possible to download the backup in the original iTunes format, but only
    with the domain-style folders.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 处理完成后，你将在输出文件夹中找到备份（默认文件夹名称为`/testoutput`）。需要特别指出的是，无法以原始的iTunes格式下载备份，只能以域名风格的文件夹格式下载。
- en: Case study - WhatsApp backup acquisition with Elcomsoft Explorer for WhatsApp
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - 使用Elcomsoft Explorer for WhatsApp获取WhatsApp备份
- en: 'As already mentioned, the applications installed on your iOS device have the
    opportunity to backup their data to iCloud Drive. One of the applications that
    enables this feature is WhatsApp (navigate to **Settings** | **Chats** | **Chat
    Backup** within the application menu). You can manually make the backup (**Back
    Up Now**) or you can set the **Auto Backup** feature on a **Daily**, **Weekly**,
    or **Monthly** basis:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，你的 iOS 设备上安装的应用程序有机会将其数据备份到 iCloud Drive。其中一款支持此功能的应用程序是 WhatsApp（在应用菜单中导航至
    **设置** | **聊天** | **聊天备份**）。你可以手动进行备份（**立即备份**），或者可以设置 **自动备份** 功能，备份频率为 **每日**、**每周**
    或 **每月**：
- en: '![Case study - WhatsApp backup acquisition with Elcomsoft Explorer for WhatsApp](img/B05100_05_20-1.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Elcomsoft Explorer for WhatsApp 获取 WhatsApp 备份](img/B05100_05_20-1.jpg)'
- en: 'Elcomsoft Explorer for WhatsApp allows you to extract WhatsApp backup data
    stored within a backup on iCloud or iCloud Drive. Like the EPPB software, it can
    access the data on iCloud through the authentication credentials (username and
    password) or through an authentication token:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: Elcomsoft Explorer for WhatsApp 允许你提取存储在 iCloud 或 iCloud Drive 备份中的 WhatsApp
    备份数据。与 EPPB 软件类似，它可以通过认证凭证（用户名和密码）或认证令牌访问 iCloud 上的数据：
- en: '![Case study - WhatsApp backup acquisition with Elcomsoft Explorer for WhatsApp](img/B05100_05_21-1.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Elcomsoft Explorer for WhatsApp 获取 WhatsApp 备份](img/B05100_05_21-1.jpg)'
- en: Once downloaded, the data can be viewed directly within the software divided
    by type, **Calls**, **Contacts**, **Media**, and **Messages:**
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 下载后，可以直接在软件中查看数据，按类型分类：**通话记录**、**联系人**、**媒体**和**消息：**
- en: '![Case study - WhatsApp backup acquisition with Elcomsoft Explorer for WhatsApp](img/B05100_05_22-1.jpg)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Elcomsoft Explorer for WhatsApp 获取 WhatsApp 备份](img/B05100_05_22-1.jpg)'
- en: iCloud Control Panel artifacts on the computer
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 计算机上的 iCloud 控制面板遗留物
- en: The installation of iCloud Control Panel, other than allowing the recovery of
    the user's authentication token, as shown previously, leaves logs of interest
    within the disk of the computer.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 iCloud 控制面板，除了允许恢复用户的认证令牌（如前所示），还会在计算机硬盘中留下有用的日志文件。
- en: On a Windows Vista/7/8 system, the logs of the connections to the iCloud service
    are stored in `C:\Users\<username>\AppData\Roaming\Apple Computer\Logs`. To locate
    the logs of interest, it is necessary to search logs related to the executable
    `iCloud.exe` file within the text file. The files are named according to a standard
    format that includes the date and time at which the service started (for example,
    `asl.113048_18Apr16.log`), thus letting the analyst create a timeline of iCloud
    usage.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows Vista/7/8 系统上，连接到 iCloud 服务的日志存储在 `C:\Users\<用户名>\AppData\Roaming\Apple
    Computer\Logs` 中。要查找相关日志，需要在文本文件中搜索与可执行文件 `iCloud.exe` 相关的日志。这些文件按标准格式命名，其中包括服务启动的日期和时间（例如，`asl.113048_18Apr16.log`），从而帮助分析人员创建
    iCloud 使用时间线。
- en: The user information configured in the iCloud Control Panel software is stored
    in the `C:\Users\<username>\AppData\Roaming\Apple Computer\Preferences\ mobilemeaccounts.plist`
    file.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iCloud 控制面板软件中配置的用户信息存储在 `C:\Users\<用户名>\AppData\Roaming\Apple Computer\Preferences\mobilemeaccounts.plist`
    文件中。
- en: 'In particular, the following user information is there in the file:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 特别地，以下用户信息存储在该文件中：
- en: '`AccountDSID`: This key denotes user identification'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AccountDSID`：该键表示用户标识'
- en: '`AccountID`: This key denotes the iCloud account username'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AccountID`：该键表示 iCloud 账户的用户名'
- en: '`DisplayName`: This key denotes the displayed name set by the account owner'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DisplayName`：该键表示账户所有者设置的显示名称'
- en: '`IsPaidAccount`: This key is set to `True` if the user has purchased additional
    services from Apple (more storage on iCloud)'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`IsPaidAccount`：如果用户购买了 Apple 的额外服务（如更多的 iCloud 存储空间），该键的值会被设置为 `True`'
- en: '`LoggedIn`: This key denotes whether the user is automatically logged in or
    not to the service![iCloud Control Panel artifacts on the computer](img/B05100_05_23-1.jpg)'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`LoggedIn`：该键表示用户是否已自动登录该服务![计算机上的 iCloud 控制面板遗留物](img/B05100_05_23-1.jpg)'
- en: On a Mac OS X system, the user information is stored instead in the `/Users/<user>/Library/Preferences/MobileMeAccounts.plist`
    file.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Mac OS X 系统上，用户信息存储在 `/Users/<用户名>/Library/Preferences/MobileMeAccounts.plist`
    文件中。
- en: 'You will also find plenty of the `asl` logs (the Apple system logs), so, in
    order to check a user''s iCloud activity, you will have to parse the following
    log files:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 你还会找到大量的 `asl` 日志（Apple 系统日志），因此，为了检查用户的 iCloud 活动，你需要解析以下日志文件：
- en: '`/private/var/log/asl/YYYY.MM.DD.UID.asl`'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/log/asl/YYYY.MM.DD.UID.asl`'
- en: '`/private/var/log/system.log`'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/log/system.log`'
- en: For a detailed analysis of iCloud artifacts on a Mac OS X computer we suggest
    you to read the presentation *Ubiquity Forensics - Your iCloud and You* available
    at [http://www.mac4n6.com/resources/](http://www.mac4n6.com/resources/).
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Mac OS X计算机上iCloud遗留物的详细分析，我们建议阅读 *Ubiquity Forensics - Your iCloud and You*
    演示文稿，您可以在[http://www.mac4n6.com/resources/](http://www.mac4n6.com/resources/)查看。
- en: Acquiring data from Cloud with stored tokens
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用存储的令牌从云端获取数据
- en: In *[Chapter 4](ch04.html "Chapter 4. Evidence Acquisition and Analysis from
    iTunes Backup")*, *Evidence Acquisition and Analysis from iTunes Backup*, we saw
    how an encrypted backup contains an application's login credentials stored in
    the Keychain. Depending on the application, it is possible to directly find the
    password, as in the case of the native mail, or an authentication token, as in
    the case of many third-party applications such as Facebook and Twitter.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在 *[第4章](ch04.html "第4章：从iTunes备份中获取和分析证据")*，*从iTunes备份中获取和分析证据* 中，我们看到加密备份中包含存储在钥匙串中的应用程序登录凭证。根据应用程序的不同，有可能直接找到密码，例如原生邮件应用，或者是身份验证令牌，例如许多第三方应用，如Facebook和Twitter。
- en: Therefore, knowing the password of the backup (either because it was specifically
    set in order to extract the credentials, or because it was cracked) you can extract
    the credentials of an application and use them to access the user cloud services
    directly on various service portals. In this way, for applications that store
    the token, it is not necessary to know the user's password for the specific service,
    but the access is guaranteed by the same token.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，知道备份的密码（无论是特意设置以提取凭证，还是通过破解获得）后，您可以提取应用程序的凭证，并利用这些凭证直接访问用户的云服务门户。这样，对于存储令牌的应用程序，就不需要知道用户的特定服务密码，访问将由相同的令牌保证。
- en: Several commercial mobile forensics solutions are integrating this functionality
    within their software or additional software to be used in combination with their
    forensic tool. Among the best known, those worth mentioning are UFED Cloud Analyzer,
    Oxygen Forensic Detective, and Paraben Device Seizure.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 一些商业移动取证解决方案将此功能集成到它们的软件中，或者作为附加软件与其取证工具结合使用。在最著名的解决方案中，值得一提的是UFED Cloud Analyzer、Oxygen
    Forensic Detective和Paraben Device Seizure。
- en: 'It should be stressed that this type of software makes remote access to various
    servers and that data is not physically stored within the analyzed device. For
    this, we need to consider at least two aspects: to be sure to have adequate legal
    authority to do this activity and, in any case, to bear in mind that this type
    of acquisition will leave traces and may generate notifications for the owner.
    For these reasons, we must take particular care when using it.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 应强调的是，这种类型的软件可以远程访问不同的服务器，且数据并非物理存储在被分析的设备中。因此，我们需要考虑至少两个方面：首先，确保拥有进行此活动的合法权限；其次，要牢记这种类型的采集会留下痕迹，可能会产生通知给设备的所有者。基于这些原因，我们在使用时必须特别小心。
- en: Case study - Cloud data acquisition with UFED Cloud Analyzer
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - 使用UFED Cloud Analyzer进行云数据采集
- en: 'UFED Cloud Analyzer is a commercial software developed by Cellebrite as completion
    of forensic suites for the acquisition and analysis of mobile devices. This software
    allows you to access your data on different platforms: Google (Gmail, Contacts,
    Drive, Location History, and Search History), Dropbox, Facebook, Twitter, Instagram,
    Kik, and Vk.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: UFED Cloud Analyzer是由Cellebrite开发的商业软件，是移动设备获取和分析取证套件的补充。此软件允许您在不同平台上访问数据：Google（Gmail、联系人、Drive、位置历史和搜索历史）、Dropbox、Facebook、Twitter、Instagram、Kik和Vk。
- en: 'The software can take login credentials as manual input (username and password)
    or by importing an account package exported using the UFED Physical Analyzer software.
    The following screenshot shows the export procedure:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 软件可以通过手动输入（用户名和密码）或通过导入使用UFED Physical Analyzer软件导出的账户包来获取登录凭证。以下截图展示了导出过程：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_24-1.jpg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用UFED Cloud Analyzer进行云数据采集](img/B05100_05_24-1.jpg)'
- en: 'The starting screen of the software allows you to view the already existing
    persons or create a new one. It refers to it as person, since we are talking about
    users'' personal accounts:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 软件的起始屏幕允许您查看已存在的人物或创建新的人物。它将其称为人物，因为我们在谈论用户的个人账户：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_25-1.jpg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用UFED Cloud Analyzer进行云数据采集](img/B05100_05_25-1.jpg)'
- en: 'When inserting a new person, you can specify their identification information
    and the time zone of reference, as shown here:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 插入新人员时，可以指定他们的身份信息和参考时区，如下所示：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_26-1.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_26-1.jpg)'
- en: 'It is then possible to proceed with the extraction, providing even the related
    legal information (for example, Search warrant):'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 然后可以继续进行数据提取，甚至提供相关的法律信息（例如，搜查令）：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_27-1.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_27-1.jpg)'
- en: 'It is then necessary to select which account, among those available within
    the account package, you want to acquire. In the following example, credentials
    for Dropbox, Twitter, and Google are available:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 然后需要选择你想要采集的账户，在账户包中选择可用账户。在以下示例中，Dropbox、Twitter 和 Google 的凭证可用：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_28-1.jpg)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_28-1.jpg)'
- en: 'The user''s credentials are then authenticated to verify the correctness and
    validity:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 用户的凭证会被认证，以验证其正确性和有效性：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_29-1.jpg)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_29-1.jpg)'
- en: 'Finally, it is also possible to specify the parameters for each account to
    be acquired, such as the type of content (for example, **Messages**, **Contacts**,
    **Images**, **Videos**, and so on) and the timeframe of interest. Once such options
    have been selected, it is possible to start extracting data:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，还可以为每个要采集的账户指定参数，如内容类型（例如，**消息**、**联系人**、**图片**、**视频**等）以及感兴趣的时间范围。一旦选择了这些选项，就可以开始提取数据：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_30-1.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_30-1.jpg)'
- en: 'Once the extraction is completed, it shows a summary of the acquired data,
    broken down for each account:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦提取完成，软件会显示已采集数据的摘要，按每个账户进行分类：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_31-1.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_31-1.jpg)'
- en: 'The software also allows filtering and searching the data by offering different
    types of visualization, such as **Timeline table**, **Timeline feed**, **Files**,
    **Contacts**, **Map**, and **Profile**:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 软件还允许通过提供不同类型的可视化方式来筛选和搜索数据，如 **时间轴表**、**时间轴动态**、**文件**、**联系人**、**地图** 和 **个人资料**：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_32-1.jpg)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_32-1.jpg)'
- en: 'The following screenshot shows an example of the file visualization of a **Google
    Drive** account:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了一个 **Google Drive** 账户的文件可视化示例：
- en: '![Case study - Cloud data acquisition with UFED Cloud Analyzer](img/B05100_05_33-1.jpg)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 UFED Cloud Analyzer 进行云数据采集](img/B05100_05_33-1.jpg)'
- en: Case study - cloud data acquisition with Oxygen Forensic Detective
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 案例研究 - 使用 Oxygen Forensic Detective 进行云数据采集
- en: 'Oxygen Forensic Detective is a commercial software developed by Oxygen Forensic
    and is the most complete version among those available from this vendor. In particular,
    in addition to extraction and analysis capabilities present in the Analyst version,
    this version includes specific features to enable access of the data stored on
    the Cloud. The software allows you to access your data on different platforms:
    Google (Calendar Bookmarks, History, Contacts, Drive, Location History, Mail,
    Photos, Tasks, and Backup WhatsApp), iCloud (Calendars, Contacts, and iOS Backup),
    Live (Calendars, Contacts, and OneDrive), Box, Dropbox, Facebook, Twitter, Instagram,
    and Swarm (Foursquare).'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: Oxygen Forensic Detective 是由 Oxygen Forensic 开发的商业软件，是该厂商提供的最完整版本。特别是，除了 Analyst
    版本中具备的提取和分析功能外，这个版本还包括了特定的功能，能够访问存储在云中的数据。该软件允许你访问不同平台上的数据：Google（日历、书签、历史记录、联系人、Drive、位置历史、邮件、照片、任务和
    WhatsApp 备份）、iCloud（日历、联系人和 iOS 备份）、Live（日历、联系人和 OneDrive）、Box、Dropbox、Facebook、Twitter、Instagram
    和 Swarm（Foursquare）。
- en: 'The software can take login credentials as manual input (username and password)
    or by importing an Oxygen Credentials Package exported using the Oxygen Forensic
    Detective software itself. The following screenshot shows an example of the acquisition
    of an **Apple iPhone 6S** with iOS **9.3.1**. It''s important to remember that
    for the extraction of credentials, encrypting the backup is necessary:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 软件可以手动输入登录凭证（用户名和密码）或通过导入使用Oxygen Forensic Detective软件导出的Oxygen凭证包。以下截图显示了获取**Apple
    iPhone 6S**（iOS **9.3.1**）数据的示例。重要的是要记住，提取凭证时需要加密备份：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_34-1.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_34-1.jpg)'
- en: 'The authentication credentials can be viewed by accessing the specific account
    section. For each account, the password or authentication token and the input
    file of the credentials are given. In the specific example here, the credentials
    were related to a Facebook account:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过访问特定帐户部分来查看认证凭证。对于每个帐户，都提供密码或认证令牌以及凭证的输入文件。在这里的具体示例中，凭证与Facebook帐户相关：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_35-1.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_35-1.jpg)'
- en: 'Using the **Save Accounts Date** option you can export the credentials in the
    Oxygen Credentials Package format while saving the files on the computer:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 使用**保存帐户数据**选项，您可以将凭证导出为Oxygen凭证包格式，并将文件保存到计算机：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_36-1.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_36-1.jpg)'
- en: 'Once you have your credentials package from the main screen of the software,
    simply click on the **Cloud** button at the top right to access the setup wizard:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 当您从软件的主屏幕获取到凭证包后，只需点击右上角的**云**按钮，即可访问设置向导：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_37-1.jpg)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_37-1.jpg)'
- en: 'In order to proceed, you must specify the **Import credentials package** option
    and select the exported file from the previous step. It then displays a view about
    the user, typically containing name and surname, profile photo, e-mail address,
    and telephone number, as shown here:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 为了继续，您必须选择**导入凭证包**选项并选择上一步导出的文件。然后，它会显示用户视图，通常包含姓名、姓氏、个人资料照片、电子邮件地址和电话号码，如下所示：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_38-1.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_38-1.jpg)'
- en: 'It is then possible to select which account you want to access, verify the
    correctness of the credentials, and set each of the extraction parameters. In
    the specific case of Facebook, you can specify which content you want to extract
    (**Images**, **Video**, **Audio**, **Messages**, **Contacts**, **Files**, and
    so on) and the timeframe of interest:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，可以选择要访问的帐户，验证凭证的正确性，并设置每个提取参数。在Facebook的具体案例中，您可以指定要提取的内容（**图片**、**视频**、**音频**、**消息**、**联系人**、**文件**等）以及感兴趣的时间范围：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_39-1.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_39-1.jpg)'
- en: 'Once the extraction is launched, the software provides the user with a detailed
    real-time view of extracted data and the task completion percentage:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦启动提取，软件会提供一个详细的实时视图，显示提取数据和任务完成百分比：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_40-1.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_40-1.jpg)'
- en: 'When the extraction is completed, it shows a detailed summary of the extracted
    data, broken down by account and by type:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 提取完成后，软件会显示提取数据的详细摘要，按帐户和类型进行划分：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_41-1.jpg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_41-1.jpg)'
- en: 'The extracted data can then be viewed within Oxygen Forensic Detective or saved
    in an archive **Oxygen Cloud Backup** (**OCB**) for later analysis:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 提取的数据可以在Oxygen Forensic Detective中查看，也可以保存在归档的**Oxygen云备份**（**OCB**）中以供以后分析：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_42-1.jpg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensic Detective进行云数据采集](img/B05100_05_42-1.jpg)'
- en: 'Opening of the backup within the software allows you to navigate easily around the
    extracted data:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在软件中打开备份后，您可以轻松浏览提取的数据：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_43_bis.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Oxygen Forensic Detective 进行云数据采集](img/B05100_05_43_bis.jpg)'
- en: 'In the specific case of the current example, you will have access to the **Social
    Network** section and view all the extracted data in a structured way:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在当前示例的具体情况下，你将能够访问**社交网络**部分，并以结构化的方式查看所有提取的数据：
- en: '![Case study - cloud data acquisition with Oxygen Forensic Detective](img/B05100_05_44-1.jpg)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Oxygen Forensic Detective 进行云数据采集](img/B05100_05_44-1.jpg)'
- en: Summary
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we introduced the iCloud service provided by Apple to store
    files on remote servers and backup its devices. In particular, we showed the techniques
    to download the backups stored on iCloud when you know the user credentials (Apple
    ID and password) and when you have access to a computer (either Windows or Mac
    OS X, turned on or off) where it is installed and that uses iCloud Control Panel.
    In the next chapter, we will introduce you to the most interesting and useful
    artifacts that can be found on iDevices.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了 Apple 提供的 iCloud 服务，用于将文件存储在远程服务器上并备份其设备。特别地，我们展示了当你知道用户凭证（Apple
    ID 和密码）并且可以访问安装了 iCloud 控制面板的计算机（无论是 Windows 还是 Mac OS X，开机或关机）时，如何下载存储在 iCloud
    上的备份。在下一章中，我们将介绍你可以在 iDevices 上找到的最有趣和最有用的证据。
- en: Self-test questions
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自测题目
- en: Q1\. When is a new backup on iCloud automatically created?
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: Q1. 当何时 iCloud 会自动创建一个新的备份？
- en: Every 5 minutes
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每5分钟
- en: It depends on the iOS version
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这取决于 iOS 版本
- en: When the device is connected to the power cable, to a Wi-Fi network and is locked
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当设备连接到电源线、Wi-Fi 网络并且被锁定时
- en: When the device is locked
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当设备被锁定时
- en: Q2\. Which of these tools can be used to download a backup from iCloud?
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: Q2. 以下哪些工具可以用来从 iCloud 下载备份？
- en: iPhone Backup Analyzer
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: iPhone 备份分析器
- en: InflatableDonkey
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: InflatableDonkey
- en: UFED Physical Analyzer
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: UFED 物理分析器
- en: iOS Forensic Toolkit
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: iOS 法医工具包
- en: Q3\. Which tool can be used to recover the auth token from a PC with iCloud
    Control Panel?
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: Q3. 哪个工具可以用来从安装了 iCloud 控制面板的 PC 恢复认证令牌？
- en: '`Oauth.exe`'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Oauth.exe`'
- en: '`Iloot.exe`'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Iloot.exe`'
- en: '`Token.exe`'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Token.exe`'
- en: '`Atex.exe`'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Atex.exe`'
- en: Q4\. Where are the log files related to iCloud Control Panel stored in Windows
    7?
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: Q4. 在 Windows 7 中，与 iCloud 控制面板相关的日志文件存储在哪里？
- en: '`C:\Users\[username]\AppData\Local\Apple Computer\Logs`'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`C:\Users\[用户名]\AppData\Local\Apple Computer\Logs`'
- en: '`C:\Users\[username]\AppData\Local\Apple\Logs`'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`C:\Users\[用户名]\AppData\Local\Apple\Logs`'
- en: '`C:\Users\[username]\AppData\Roaming\Apple Computer\Logs`'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`C:\Users\[用户名]\AppData\Roaming\Apple Computer\Logs`'
- en: '`C:\Users\[username]\AppData\Roaming\Apple\Logs`'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`C:\Users\[用户名]\AppData\Roaming\Apple\Logs`'
