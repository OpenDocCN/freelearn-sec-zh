- en: '2'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '2'
- en: How Are Cloud Networks Cyber Attacked?
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 云网络是如何遭受网络攻击的？
- en: When you begin your journey to becoming a cloud pentester, it helps to start
    with the basics.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始成为一名云渗透测试员时，从基础知识开始是非常有帮助的。
- en: Your job is to test cloud networks to see how they can be cyber attacked. The
    organization you work for can then use your discoveries to improve the cybersecurity
    of its cloud networks.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 你的工作是测试云网络，了解它们如何被网络攻击。你所工作的组织可以利用你的发现来提高其云网络的网络安全性。
- en: Because Amazon (AWS), Microsoft (Azure), and Google (GCP) own the infrastructure
    on which you’ll be testing, you won’t be allowed to do literally anything a cyber
    attacker may try to do in real life. But you need to understand all the kinds
    of cyberattacks that cloud networks deal with, even if you can’t simulate all
    of them.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 因为亚马逊（AWS）、微软（Azure）和谷歌（GCP）拥有你将测试的基础设施，你将不被允许做任何网络攻击者在现实生活中可能尝试做的事情。但你需要了解云网络所面临的所有网络攻击类型，即使你无法模拟所有的攻击。
- en: The best pentesters can think like real cyber attackers. This chapter will give
    you a better understanding of how cloud networks are cyber attacked in order to
    help you conduct more effective pentests.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 最好的渗透测试员能够像真实的网络攻击者一样思考。本章将帮助你更好地理解云网络如何遭受网络攻击，以帮助你进行更有效的渗透测试。
- en: 'In this chapter, we’ll cover the following main topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主要内容：
- en: Understanding penetration testing
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解渗透测试
- en: External and internal attacks
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外部和内部攻击
- en: Attacks on the confidentiality, integrity, and availability of data
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对数据的机密性、完整性和可用性的攻击
- en: Understanding lateral movement in the cloud
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解云中的横向移动
- en: Zero-trust networks
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 零信任网络
- en: Let’s get started!
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始吧！
- en: Understanding penetration testing
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解渗透测试
- en: '**Penetration tests** (or **pentests** for short) are simulated cyberattacks
    that are designed to find vulnerabilities in computer networks and applications.
    The biggest difference between a pentest and an actual cyberattack is that the
    former is conducted with the full consent of the owner of the computer or network,
    whereas the latter isn’t.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '**渗透测试**（或简称**pentest**）是模拟的网络攻击，旨在发现计算机网络和应用程序中的漏洞。渗透测试与实际网络攻击的最大区别在于，前者是经过计算机或网络所有者完全同意的，而后者则不是。'
- en: As a pentester or red team member, not only will you need consent from the owner
    of the target you’re testing, but you’ll also have to sign a legal agreement that
    explains in detail what you’re allowed to do, what you’re forbidden from doing,
    and the scope of your pentest. This applies whether you’re an employee of the
    organization being pentested, a third-party contractor of the organization being
    pentested, someone who conducts simple one-off pentests, or a red team member
    who pentests as part of your red team engagements.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 作为渗透测试员或红队成员，你不仅需要获得目标所有者的同意，还必须签署一份法律协议，详细说明你被允许做什么、禁止做什么以及渗透测试的范围。这适用于你是被渗透测试组织的员工、该组织的第三方承包商、进行简单一次性渗透测试的人，还是作为红队成员进行渗透测试的情况。
- en: Whether or not an organization has a red team, it will commence pentesting after
    a history of vulnerability assessments. A vulnerability assessment is the first
    way to find security vulnerabilities. It analyzes the state of an application
    or network based on checklists of criteria. The criteria are most often based
    on a set security standard, such as the **OWASP Application Security Verification
    Standard** ([https://owasp.org/www-project-application-security-verification-standard/](https://owasp.org/www-project-application-security-verification-standard/))
    or the **PCI PTS POI Modular Security Requirements** ([https://www.pcisecuritystandards.org/wp-content/uploads/2023/01/PTS_POI_v6.2_Bulletin.pdf](https://www.pcisecuritystandards.org/wp-content/uploads/2023/01/PTS_POI_v6.2_Bulletin.pdf)).
    There are hundreds of different security standards that could apply to the organization
    you work for. Vulnerability assessments are appropriate for all businesses and
    enterprises, at all possible security maturity levels. Security maturity is a
    complex concept, but in a nutshell, it’s about how well developed an organization’s
    security policies and controls are.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 无论组织是否设有红队，它都将在漏洞评估的历史之后开始进行渗透测试。漏洞评估是发现安全漏洞的第一步方法。它根据一组检查标准分析应用程序或网络的状态。这些标准通常基于一组安全标准，如**OWASP应用安全验证标准**
    ([https://owasp.org/www-project-application-security-verification-standard/](https://owasp.org/www-project-application-security-verification-standard/))
    或 **PCI PTS POI模块化安全要求** ([https://www.pcisecuritystandards.org/wp-content/uploads/2023/01/PTS_POI_v6.2_Bulletin.pdf](https://www.pcisecuritystandards.org/wp-content/uploads/2023/01/PTS_POI_v6.2_Bulletin.pdf))。有数百种不同的安全标准适用于您所在的组织。漏洞评估适用于所有企业和企业，无论其安全成熟度水平如何。安全成熟度是一个复杂的概念，但简言之，它关乎组织安全政策和控制的发展程度。
- en: Once an organization has done some vulnerability assessments, security-hardened
    its networks based on those findings, and assembled a team of cybersecurity professionals,
    then it may be ready for pentesting. Pentesting is supposed to discover security
    vulnerabilities that can only be discovered by simulating cyberattacks. Legally
    and procedure-wise, pentesting is a lot different from cyber attacking, but the
    computers and networks you pentest don’t know the difference. Your pentests will
    break things, even if the effects are as temporary as taking a few computers offline
    for an hour in a **denial-of-service** (**DoS**) attack. That’s why only organizations
    with some security maturity should be pentesting, and it’s also why a specific
    scope is always agreed upon before starting a pentest. For instance, your organization
    may move its production from one network segment to another so you can pentest
    within a segment without interfering with its everyday operations.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦组织进行了一些漏洞评估，根据这些发现加固了其网络，并组建了一个网络安全专业团队，那么它可能已经准备好进行渗透测试了。渗透测试旨在发现只能通过模拟网络攻击才能发现的安全漏洞。从法律和程序上讲，渗透测试与网络攻击大不相同，但您进行渗透测试的计算机和网络并不知道这种区别。您的渗透测试会破坏事物，即使其影响只是暂时性地使几台计算机在**拒绝服务**（**DoS**）攻击中下线一个小时。这就是为什么只有具备一定安全成熟度的组织才应进行渗透测试的原因，也是为什么在开始渗透测试之前总是需要明确的范围。例如，您的组织可能会将其生产从一个网络段移至另一个网络段，以便您可以在一个网络段内进行渗透测试而不干扰其日常运营。
- en: A red team is a dedicated group of people within your organization who conduct
    frequent pentests according to patterns in the cyber threat landscape. As an example,
    if a new enterprise ransomware threat emerges, your red team may be tasked with
    simulating that particular new ransomware within your network and seeing what
    happens.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 红队是您组织内的一组专门人员，根据网络安全威胁景观中的模式进行频繁的渗透测试。例如，如果出现新的企业勒索软件威胁，您的红队可能被指定在您的网络内模拟该特定的新勒索软件，并观察其影响。
- en: In order to pentest effectively, you absolutely must understand how cloud networks
    are cyber attacked. In this book, you will learn about a lot of tools that are
    often used to pentest in AWS, Azure, and GCP environments. Using these tools in
    the right way and in the right situations will help you pentest effectively, finding
    vulnerabilities that your organization must address. But the greatest tools in
    the world are only good if you know how to use them and why. You’ll also sometimes
    conduct some activities without those tools. In all scenarios, you must understand
    how cloud networks are cyber attacked in order to be an effective cloud pentester.
    That’s what this chapter is all about!
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 为了有效地进行渗透测试，你必须完全理解云网络是如何遭受网络攻击的。在本书中，你将学习到许多常用于在AWS、Azure和GCP环境中进行渗透测试的工具。正确地在合适的场景下使用这些工具，将帮助你有效进行渗透测试，找到你的组织必须解决的漏洞。但是，世界上最好的工具只有在你知道如何使用它们以及为什么使用它们时才有效。有时你也会在没有这些工具的情况下进行一些活动。在所有的场景中，作为一个有效的云渗透测试员，你必须理解云网络是如何遭受网络攻击的。这就是本章的全部内容！
- en: External and internal attacks
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 外部和内部攻击
- en: When your organization’s defensive security team prepares for cyberattacks,
    it needs to understand each and every step that threat actors take when they try
    to maliciously interfere with your data. No cyber intrusion is a one-step process.
    Ransomware may have needed an employee to accidentally execute an email attachment
    before it spread between poorly configured cloud instances. A data breach may
    have required bribing an employee and giving them a USB stick with custom-designed
    spyware.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 当你所在组织的防御安全团队准备应对网络攻击时，他们需要了解威胁行为者在试图恶意干扰你们数据时所采取的每一步。没有任何一次网络入侵是一步完成的。勒索软件可能需要一名员工不小心执行了一个电子邮件附件，才在配置不当的云实例之间传播开来。数据泄露可能需要贿赂一名员工，并交给他们一个含有定制间谍软件的USB闪存驱动器。
- en: The MITRE ATT&CK database ([https://attack.mitre.org/](https://attack.mitre.org/))
    is an excellent resource to help all kinds of cybersecurity professionals understand
    the various steps cyber threat actors take when they engage in their crimes. I
    will be citing it frequently in this chapter. Especially if you’re pentesting
    as part of a red team, these may be the kinds of cyberattacks you’ll be simulating
    in your engagements.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK数据库 ([https://attack.mitre.org/](https://attack.mitre.org/)) 是一个极好的资源，可以帮助各种网络安全专业人士了解网络威胁行为者在实施犯罪时所采取的各种步骤。我将在本章中频繁引用它。特别是如果你作为红队的一部分进行渗透测试，这些可能就是你在演练中模拟的网络攻击类型。
- en: Some cyberattack chains can be simple, and others are relatively complex. But
    they all have an origin that’s either external or internal to your organization.
    You will need to understand the differences between external and internal cyberattacks
    as a cloud pentester. You’ll likely be pentesting both kinds of scenarios over
    the course of your career. Business and enterprise cloud networks are a prime
    target for many of the most devastating cyber exploits.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一些网络攻击链可能很简单，而另一些则相对复杂。但它们都有一个起点，可能是外部的，也可能是内部的，你作为云渗透测试员需要理解外部和内部网络攻击之间的区别。你很可能会在职业生涯中渗透测试这两种类型的场景。商业和企业云网络是许多最具破坏性的网络攻击的主要目标。
- en: There was a time, perhaps in the 1990s and early 2000s, when consumers were
    very frequently targeted by cybercriminals. Ordinary people should still be careful
    about the security of their phones, tablets, and PCs. They sometimes get targeted
    by phishing scams, digital surveillance, and malware. An ordinary person may be
    exploited to pay a cyber attacker a few hundred dollars’ worth of cryptocurrency
    in a ransomware attack. Even small businesses may have revenue in the millions
    of dollars, and they could be coerced into paying a cyber attacker a million-dollar
    cryptocurrency ransom. Also, other sorts of financially motivated cybercrime,
    such as data breaches, are much more profitable when businesses are targeted than
    when a senior citizen is targeted.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 曾经有一段时间，也许是在1990年代和2000年代初，消费者经常成为网络犯罪分子的目标。普通人仍然应该小心他们手机、平板和PC的安全。它们有时会成为钓鱼诈骗、数字监控和恶意软件的目标。一个普通人可能在勒索软件攻击中被迫支付几百美元的加密货币给网络攻击者。即使是小型企业，年收入达到数百万美元，也可能被迫支付百万美元的加密货币赎金给网络攻击者。此外，其他类型的财务动机网络犯罪，如数据泄露，当目标是企业时，比针对一位老年人的网络攻击更具盈利性。
- en: The companies you’ll be working for as a pentester, both as an employee and
    as a third-party contractor, are lucrative targets for cybercrime. And that’s
    why they’re hiring you to simulate these cybercrimes, so they can learn how they
    can improve their defenses.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 作为渗透测试员，你将为公司工作，无论是作为员工还是第三方承包商，这些公司都是网络犯罪的丰厚目标。这也是他们雇用你来模拟这些网络犯罪的原因，目的是为了了解如何提升防御能力。
- en: The classic kinds of cyberattacks you’ll hear about most often in the news and
    in your favorite fictional entertainment media will usually be external in origin.
    For example, a hoodie-wearing cybercriminal working from their PC in their dark
    basement cracks an encrypted terminal on the network, then downloads all of the
    terminal’s sensitive files! A skull-and-crossbones graphic blinks on the screen...
    “You’ve been hacked!” The victim organization never sees the attacker. It hires
    a top-notch cyber investigations team to follow the attacker around the world.
    Eventually, the cops identify the cybercriminal at a café on another continent.
    The criminal is handcuffed. Everyone applauds and the credits roll.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 你在新闻或最喜欢的虚构娱乐作品中常常听到的经典网络攻击，通常来源于外部。例如，一名戴着帽衫的网络犯罪分子在黑暗地下室的PC上破解了网络中的加密终端，然后下载了所有敏感文件！屏幕上闪现一个骷髅和交叉骨的图标……“你被黑了！”受害组织从未见过攻击者。它雇用了顶尖的网络调查团队，追踪攻击者的行踪，最终警方在另一个大陆的咖啡馆里识别出了这名网络犯罪分子。罪犯被戴上手铐，所有人鼓掌，字幕滚动。
- en: Real-world cybercrime can be just as devastating, but it can look much more
    benign in person. Investigating it isn’t quite as quick or exciting, because you’ll
    be helping the company you work for prepare for real cyberattacks and it won't
    follow a typical movie script. Now, let’s understand the nature of these attacks
    and look at some real-life examples.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 现实世界中的网络犯罪同样具有破坏性，但它在实际发生时看起来可能更为温和。调查它并不像电影中那样快速和刺激，因为你将帮助你工作的公司为现实中的网络攻击做好准备，而这通常不符合典型的电影剧本。现在，让我们了解这些攻击的性质，并看看一些真实的例子。
- en: External cyberattacks
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 外部网络攻击
- en: External cyberattacks originate from outside of the targeted organization. The
    attacker usually has to go through the internet to start the process of cyber
    attacking your organization’s cloud servers.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 外部网络攻击起源于目标组织之外。攻击者通常需要通过互联网开始对组织云服务器的网络攻击。
- en: An external cyber attacker has to break into the organization’s network they’re
    attacking. Then, they’ll likely have to privilege escalate.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 外部网络攻击者必须突破其攻击的组织网络。然后，他们很可能需要提升权限。
- en: Privilege escalation
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 权限提升
- en: This is when an attacker begins with access to a user account with limited access
    control privileges and works their way up to using accounts with more access control
    privileges. Sometimes, they’ll escalate all the way up to accessing an account
    with full administrative privileges in the network they’re attacking... which
    is especially dangerous!
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 这指的是攻击者从一个具有有限访问控制权限的用户账户开始，逐步提升权限，最终可能会获取到网络中完全具有管理权限的账户……这尤其危险！
- en: Now, let’s examine some possible vectors for external cyberattacks on cloud
    networks.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看看一些可能的外部网络攻击向量，特别是在云网络中的情况。
- en: Drive-by compromise
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 路过式妥协
- en: First, there’s “*drive-by compromise*.” According to MITRE ATT&CK ([https://attack.mitre.org/techniques/T1189/](https://attack.mitre.org/techniques/T1189/)),
    drive-by compromise happens when a user visits a website through their usual web
    browsing activities. An attacker with control of the website uses it to attack
    the user through their web browser. Sometimes, attackers also use this technique
    for malicious actions that aren’t exploits, such as acquiring application access
    tokens.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 首先是“*路过式妥协*”。根据MITRE ATT&CK（[https://attack.mitre.org/techniques/T1189/](https://attack.mitre.org/techniques/T1189/)），路过式妥协发生在用户通过常规的网页浏览活动访问某个网站时。攻击者控制该网站，通过用户的网页浏览器发起攻击。有时，攻击者还会使用这种技术进行非漏洞利用的恶意行为，例如获取应用程序访问令牌。
- en: A lot of access to cloud networks is through the web, so this is a really pertinent
    attack vector.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 很多对云网络的访问都是通过网页进行的，因此这是一个非常相关的攻击向量。
- en: Exploit public-facing application
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 利用面向公众的应用程序
- en: Another external attack vector that’s really relevant to cloud networks is “exploit
    public-facing application.” MITRE ATT&CK ([https://attack.mitre.org/techniques/T1190/](https://attack.mitre.org/techniques/T1190/))
    describes it as when adversaries take advantage of internet-connected computers
    or applications through their vulnerabilities. Frequent means of exploitation
    include SQL databases, standard internet services such as SSH or SMB, network
    management protocols, and applications with internet-accessible open sockets such
    as web browsers. But other internet-connected technologies can also be used in
    these exploits.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个与云网络密切相关的外部攻击向量是“利用面向公众的应用程序”。MITRE ATT&CK ([https://attack.mitre.org/techniques/T1190/](https://attack.mitre.org/techniques/T1190/))
    将其描述为攻击者通过利用互联网连接的计算机或应用程序的漏洞来进行攻击。常见的利用手段包括 SQL 数据库、标准互联网服务如 SSH 或 SMB、网络管理协议，以及具有互联网访问权限的开放插座（如
    web 浏览器）。但其他连接互联网的技术也可能被用来进行这些攻击。
- en: If these exploits involve cloud infrastructure or containerized applications
    (such as with Kubernetes or Docker), attackers can do really catastrophic damage.
    They could intercept other instances or containers, and quite often acquire access
    to their APIs too.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这些漏洞涉及到云基础设施或容器化应用程序（例如 Kubernetes 或 Docker），攻击者可能造成极其灾难性的破坏。他们可以拦截其他实例或容器，并且通常还能够获得它们的
    API 访问权限。
- en: External remote services
  id: totrans-40
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 外部远程服务
- en: The next entry point vector from MITRE ATT&CK that I’m going to cover is “external
    remote services.” It’s another common way in which external cyberattacks begin.
    MITRE ATT&CK ([https://attack.mitre.org/techniques/T1133/](https://attack.mitre.org/techniques/T1133/))
    describes it as when attackers target external services to acquire malicious access
    or maintain persistence in a network. Commonly targeted remote services include
    VPNs, Citrix, or similar technologies that facilitate remote access. Attackers
    often need access to valid accounts for their targeted service in order for this
    exploit to work. Access to valid accounts can be acquired by stealing credentials
    through already compromised networks or means such as credential pharming. Of
    course, in external cyberattacks, access to a valid account may be acquired by
    phishing an employee. Phishing attacks take many forms, but they most often use
    fake websites, fake emails, fake text messages, or fake social media posts to
    imitate a trusted entity.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 我将要讲解的下一个 MITRE ATT&CK 入口向量是“外部远程服务”。这是一种常见的外部网络攻击的起始方式。MITRE ATT&CK ([https://attack.mitre.org/techniques/T1133/](https://attack.mitre.org/techniques/T1133/))
    将其描述为攻击者针对外部服务进行攻击，以获取恶意访问权限或在网络中保持持久性。常见的目标远程服务包括 VPN、Citrix 或类似的远程访问技术。攻击者通常需要访问有效账户，才能使此类攻击发挥作用。通过已经被攻破的网络或像凭证农场（credential
    pharming）这样的方式，攻击者可以窃取凭证来获得有效账户的访问权限。当然，在外部网络攻击中，攻击者也可以通过钓鱼攻击员工来获取有效账户。钓鱼攻击有多种形式，但最常见的是使用假网站、假邮件、假短信或假社交媒体帖子来模仿可信的实体。
- en: Valid accounts
  id: totrans-42
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 有效账户
- en: This next MITRE ATT&CK vector category is a common entry point for most internal
    cyberattacks, known as “valid accounts.” According to MITRE ATT&CK ([https://attack.mitre.org/techniques/T1078/](https://attack.mitre.org/techniques/T1078/)),
    attackers can acquire malicious access to computer systems by compromising legitimate
    user accounts that have privileges within them. They may also compromise privileged
    accounts to establish persistence, for privilege escalation, or for defense evasion.
    Sometimes, inactive user accounts are also exploited. Network administrators should
    watch the behavior of the accounts in their system and deactivate user accounts
    of former employees and contractors as soon as possible.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 这个下一个 MITRE ATT&CK 向量类别是大多数内部网络攻击的常见入口点，被称为“有效账户”。根据 MITRE ATT&CK ([https://attack.mitre.org/techniques/T1078/](https://attack.mitre.org/techniques/T1078/))，攻击者可以通过攻破具有权限的合法用户账户，获取对计算机系统的恶意访问。他们也可能攻破特权账户，以建立持久性、进行权限升级或规避防御。有时，不活跃的用户账户也会被利用。网络管理员应当监控系统中账户的行为，并尽快停用前员工和合同工的账户。
- en: Cloud accounts
  id: totrans-44
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 云账户
- en: 'I’m going to include one subcategory of attack vector here because it’s specifically
    relevant to cloud pentesting; it is known as “valid accounts: cloud accounts”
    ([https://attack.mitre.org/techniques/T1078/004/](https://attack.mitre.org/techniques/T1078/004/)).
    Go ahead and read about it on MITRE ATT&CK’s website. Cloud networks have lots
    of working parts. They can have multiple SaaS applications, containers, servers
    within servers, virtual machines, and so on. They can get really complicated.
    So, there can be a lot more user accounts and machine identities that attackers
    can exploit.'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我将在这里提到一个攻击向量的子类别，因为它与云渗透测试特别相关；它被称为“有效账户：云账户”（[https://attack.mitre.org/techniques/T1078/004/](https://attack.mitre.org/techniques/T1078/004/)）。请前往MITRE
    ATT&CK网站了解详细信息。云网络包含大量运作中的组件，可能有多个SaaS应用、容器、服务器内的服务器、虚拟机等等。它们可能非常复杂，因此攻击者可以利用更多的用户账户和机器身份进行攻击。
- en: Organizations not only have to watch internal cyber attackers with active accounts
    but also inactive accounts, which are a common attack vector. When you work as
    a cloud pentester, you may need to compromise an inactive account that an organization
    forgot to remove.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 组织不仅要关注拥有活跃账户的内部网络攻击者，还需要关注不活跃账户，这也是一个常见的攻击向量。作为云渗透测试员时，你可能需要攻破一个组织忘记移除的不活跃账户。
- en: Internal cyberattacks
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内部网络攻击
- en: Internal cyberattacks originate from inside the targeted organization. Either
    a company employee, contractor, executive, or supply chain entity is the cyber
    attacker, or an external cyber attacker bribes or otherwise motivates an employee,
    contractor, executive, or supply chain entity to help them with their cyberattack.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 内部网络攻击源自目标组织内部。攻击者可能是公司的员工、承包商、高层或供应链实体，或者外部网络攻击者通过贿赂或其他方式促使员工、承包商、高层或供应链实体帮助他们进行网络攻击。
- en: An internal cyber attacker already has their foot in the door of your network.
    If they work for the organization, they have a user account in your network and
    applications that at least has some privileges, even if they’re minimal. They
    very likely have physical access to the company’s computers and on-premises network.
    That can make it a lot easier to attack the cloud network. A supply chain entity
    also already has privileged access to an organization that an outsider won’t have.
    Your organization’s supply chain consists of the other businesses that provide
    products and services to your organization – for instance, companies that make
    metal and sell it to car manufacturers. The metal manufacturer is part of the
    car manufacturer’s supply chain. The web development firm that makes custom web
    applications for a school is a part of the school’s supply chain.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 内部网络攻击者已经进入了你的网络。如果他们是组织的员工，他们在你的网络和应用程序中至少拥有某些权限账户，即使这些权限很小。很可能他们还具有对公司计算机和本地网络的物理访问权限，这样可以更容易地对云网络发起攻击。供应链实体也已拥有对组织的特权访问，这是外部人员无法拥有的。你组织的供应链由向你组织提供产品和服务的其他公司组成，例如，向汽车制造商出售金属的公司。金属制造商是汽车制造商供应链的一部分。为学校定制开发网站应用程序的网络开发公司是学校供应链的一部分。
- en: The following are MITRE ATT&CK’s “initial access” vectors that can pertain to
    an internal cyberattack.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是MITRE ATT&CK的“初始访问”向量，这些向量可能与内部网络攻击相关。
- en: Hardware additions
  id: totrans-51
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 硬件添加
- en: The first is “hardware additions.” MITRE ATT&CK ([https://attack.mitre.org/techniques/T1200/](https://attack.mitre.org/techniques/T1200/))
    defines this as when adversaries use computer hardware such as networking devices
    as a vector to acquire malicious access. This technique often uses “more robust
    hardware additions” than removable media (such as USB drives) to deploy new attack
    functionalities and features rather than simply distributing malicious payloads.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个是“硬件添加”。MITRE ATT&CK（[https://attack.mitre.org/techniques/T1200/](https://attack.mitre.org/techniques/T1200/)）将其定义为敌对方使用计算机硬件（如网络设备）作为获取恶意访问的向量。这种技术通常使用“更强大的硬件设备”而非可移动媒体（如USB驱动器）来部署新的攻击功能和特性，而不仅仅是分发恶意有效载荷。
- en: Your organization’s cloud network could be attacked by a hardware device that
    a cybercriminal physically connects to your on-premises network.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 你组织的云网络可能会受到由网络犯罪分子物理连接到本地网络的硬件设备攻击。
- en: Supply chain compromise
  id: totrans-54
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 供应链妥协
- en: Another technique that can be used in an internal cyberattack is “supply chain
    compromise.” MITRE ATT&CK ([https://attack.mitre.org/techniques/T1195/](https://attack.mitre.org/techniques/T1195/))
    describes this as when attackers manipulate or intercept products or product delivery
    mechanisms to compromise the users and networks that are connected for data or
    system compromise. A company’s supply chain can include other businesses they
    work with, companies that provide applications and network services, and so on.
    In these exploits, sometimes source code repositories, development tools, open
    source dependencies, or software updating mechanisms are manipulated.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种可以在内部网络攻击中使用的技术是“供应链妥协”。MITRE ATT&CK ([https://attack.mitre.org/techniques/T1195/](https://attack.mitre.org/techniques/T1195/))
    将其描述为攻击者操控或拦截产品或产品交付机制，以便妥协连接的用户和网络，进而导致数据或系统的妥协。公司的供应链可能包括他们合作的其他企业、提供应用程序和网络服务的公司等。在这些攻击中，有时源代码库、开发工具、开源依赖项或软件更新机制会被操控。
- en: For the purposes of this book, supply chain compromises are especially relevant
    because AWS, Azure, and GCP services and applications can be considered to be
    a part of a company’s supply chain.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本书的目的，供应链妥协尤为相关，因为 AWS、Azure 和 GCP 服务与应用程序可以被视为公司供应链的一部分。
- en: Supply chain entities often have connections to an organization’s internal network,
    both on-premises and in the cloud. As a cloud pentester, you may sometimes be
    simulating supply chain attacks. At other times, you may have to cooperate with
    one of your organization’s supply chain entities while pentesting.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 供应链实体通常与组织的内部网络有连接，无论是在本地还是在云中。作为云渗透测试人员，你有时可能会模拟供应链攻击。有时，你也可能需要在进行渗透测试时与组织的供应链实体之一进行合作。
- en: Trusted relationship
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 受信关系
- en: This next vector applies to a lot of internal cyberattacks, and is known as
    “trusted relationship” ([https://attack.mitre.org/techniques/T1199/](https://attack.mitre.org/techniques/T1199/)).
    MITRE ATT&CK defines this as when attackers take advantage of individuals or organizations
    that the target trusts in order to conduct cyberattacks. They can include people
    and entities such as managed service providers, IT contractors, or building maintenance
    workers.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个攻击向量适用于许多内部网络攻击，被称为“受信关系” ([https://attack.mitre.org/techniques/T1199/](https://attack.mitre.org/techniques/T1199/))。MITRE
    ATT&CK 定义为攻击者利用目标信任的个人或组织来进行网络攻击。这些人或实体可以包括托管服务提供商、IT 合同工或建筑维护工人等。
- en: Here’s a hypothetical scenario. The janitor asks for keys to the server room
    because they need to clean something in there. It’s not someone else pretending
    to be the janitor, but the real janitor who has worked there for months. Once
    the janitor gets access to the server room, they plug a USB stick with executable
    malware into one of the main server machines on-premises in order to infect all
    the client computers that are managed through it.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个假设的场景。清洁工要求获取服务器机房的钥匙，因为他们需要在那里清理东西。不是其他人冒充清洁工，而是真正的清洁工，他已经在这里工作了几个月。一旦清洁工进入服务器机房，他们会将一个含有可执行恶意软件的
    USB 驱动器插入到公司内部的一台主服务器上，从而感染所有通过该服务器管理的客户端计算机。
- en: Cyber attackers will find a wide variety of ways to exploit cloud networks and
    applications. To acquire access, they may find vulnerabilities in internet-facing
    parts of applications, such as web applications and open ports. They may hijack
    accounts with access privileges. They may even go so far as to bribe someone who
    works for the company to physically place a malicious device into their targeted
    network. As a pentester, you’ll mainly be simulating exploits within applications
    and networks remotely. But it’s good to keep in mind the many other techniques
    that cyber attackers use when you conduct your red team engagements, even if they’re
    difficult to simulate.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 网络攻击者会寻找多种方式来利用云网络和应用程序。为了获取访问权限，他们可能会发现应用程序面向互联网的部分的漏洞，如 web 应用程序和开放端口。他们可能会劫持具有访问权限的账户，甚至可能会行贿公司内部人员，让他们将恶意设备物理地放置在目标网络中。作为渗透测试人员，你主要是模拟应用程序和网络中的漏洞远程进行攻击。但在进行红队演练时，即使这些手段难以模拟，仍然要牢记网络攻击者常用的其他技术。
- en: Attacks on the confidentiality, integrity, and availability of cloud data
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对云数据的机密性、完整性和可用性的攻击
- en: So, we’ve looked at the difference between internal cyberattacks and external
    cyberattacks, and some of the different entry point attack vectors they can use.
    There’s another way for you to categorize the cyberattacks you’ll be simulating
    as a pentester.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，我们已经看过了内部网络攻击和外部网络攻击之间的区别，以及它们可能使用的一些不同的入侵点攻击路径。作为渗透测试员，您还可以通过另一种方式来分类您将模拟的网络攻击。
- en: We must look at the **CIA** (**confidentiality, integrity, and availability**)
    **Triad** of cybersecurity. It’s one of the most important concepts in our area
    of study.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们必须看一下**CIA**（**保密性、完整性和可用性**）**三要素**在网络安全中的重要性。这是我们研究领域中最重要的概念之一。
- en: 'All cyberattacks impact one, two, or all three components of the CIA Triad:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 所有的网络攻击都会影响CIA三要素中的一个、两个或全部三个组成部分：
- en: '**Confidentiality** is all about making sure that your organization’s data
    is only readable to the entities that are allowed to access it. A data breach
    is an example of a type of cyberattack that impacts confidentiality.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保密性**关乎确保只有被授权的实体能够读取您组织的数据。数据泄露就是影响保密性的一种网络攻击的例子。'
- en: '**Integrity** is all about making sure that only authorized entities can alter
    or modify your organization’s data. If a cyber attacker replaces a legitimate
    component of your organization’s cloud application with malware, that’s an example
    of a cyberattack that impacts integrity.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完整性**关乎确保只有授权的实体能够修改或更改您组织的数据。如果一个网络攻击者将您组织的云应用程序中的合法组件替换为恶意软件，那就是影响完整性的网络攻击的一个例子。'
- en: '**Availability** is all about making sure that your organization’s data, servers,
    and applications are available whenever authorized entities need it. If a cyber
    attacker performs a **distributed denial-of-service** (**DDoS**) attack on your
    organization’s cloud web servers and customers cannot use your web application,
    that’s an example of a cyberattack that impacts availability.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可用性**关乎确保当授权实体需要时，您组织的数据、服务器和应用程序随时可用。如果一个网络攻击者对您组织的云端网页服务器发起**分布式拒绝服务**（**DDoS**）攻击，导致客户无法使用您的网页应用程序，这就是影响可用性的网络攻击的一个例子。'
- en: Some cyberattacks impact more than one component of the CIA Triad. For example,
    enterprise ransomware these days often not only maliciously encrypts your organization’s
    data with a decryption key you cannot access without paying a ransom, but also
    often breaches your organization’s data. So, that’s availability and confidentiality
    harmed in one malware attack. If the ransomware infection establishes persistence
    by altering some of the data on your cloud servers, that’s integrity harmed too!
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一些网络攻击会影响CIA三要素中的多个组成部分。例如，现如今的企业勒索软件不仅恶意加密您组织的数据，且没有支付赎金无法获取解密密钥，还经常泄露您组织的数据。所以，在一次恶意软件攻击中，既损害了可用性，也损害了保密性。如果勒索软件通过更改云服务器上的一些数据来建立持久性，那也会损害完整性！
- en: Confidentiality
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 保密性
- en: Let’s look at a cyberattack from the news that impacted the confidentiality
    of data in cloud networks.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一个新闻中的网络攻击例子，它影响了云网络中数据的保密性。
- en: 'DC Health Link tweeted in March 2023 that sensitive data from its system was
    data breached. DC Health Link helps to provide health insurance to many people
    who work for the American government. It definitely has at least a large component
    of its network hosted by a cloud provider. The tweet ([https://twitter.com/DCHealthLink/status/1634342617235312640](https://twitter.com/DCHealthLink/status/1634342617235312640))
    said the following:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: DC Health Link 在2023年3月发推表示，其系统的敏感数据遭到数据泄露。DC Health Link帮助许多为美国政府工作的人员提供健康保险。它的网络至少有一个大型组件是由云服务提供商托管的。该推文([https://twitter.com/DCHealthLink/status/1634342617235312640](https://twitter.com/DCHealthLink/status/1634342617235312640))写道：
- en: '“The DC Health Benefit Exchange Authority takes the data breach of enrollee
    information very seriously. On Monday, March 6, 2023, upon becoming aware of the
    incident, we immediately launched an investigation, began working with law enforcement,
    and engaged a third-party forensics firm-Mandiant. While our investigation is
    ongoing, we’d like to provide an update on the current situation. There are 56,415
    customers impacted. The data fields include the following, although not all data
    fields were necessarily included for each enrollee: name, Social Security number,
    date of birth, gender, health plan information (e.g. plan name, carrier name,
    premium amounts, employer contribution, and coverage dates), employer information,
    enrollee information (e.g. address, email, phone number, race, ethnicity, and
    citizenship status).”'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: “DC健康福利交换管理局非常重视参保人信息的数据泄露事件。2023年3月6日星期一，一旦发现此事件，我们立即展开调查，开始与执法部门合作，并聘请第三方取证公司Mandiant。尽管我们的调查仍在进行中，但我们想就目前情况提供更新。共有56,415名客户受到影响。数据字段包括以下内容，尽管并非每个参保人都一定包含所有数据字段：姓名、社会安全号码、出生日期、性别、健康计划信息（例如计划名称、承保人名称、保费金额、雇主捐款和覆盖日期）、雇主信息、参保人信息（例如地址、电子邮件、电话号码、种族、种族和公民身份状态）。”
- en: Just because the breach was reported in March 2023, that doesn’t mean that it
    occurred in March 2023! Data breaches often go months without being reported.
    Either the organization knew about the breach much earlier and only publicized
    the information months later, or it took months for the organization to discover
    it in the first place.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 仅仅因为数据泄露是在2023年3月报告的，并不意味着它发生在2023年3月！数据泄露经常数月未被报告。要么组织早在之前就知道了泄露事件，只是在数月后才公布信息，要么组织花了数月时间才首次发现它。
- en: 'What we do know is that 56,415 customers were impacted, and it can be safely
    assumed that much of the network is on the cloud. We don’t know how the data breach
    occurred, but we can make educated guesses. “Data from cloud storage” is a recognized
    attack vector in the MITRE ATT&CK database ([https://attack.mitre.org/techniques/T1530/](https://attack.mitre.org/techniques/T1530/)).
    It says the following:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们知道有56,415名客户受到影响，可以合理假设网络中的大部分数据都在云上。我们不知道数据泄露是如何发生的，但我们可以做出合理猜测。“来自云存储的数据”是MITRE
    ATT&CK数据库中的一个公认的攻击向量（[https://attack.mitre.org/techniques/T1530/](https://attack.mitre.org/techniques/T1530/)）。它说：
- en: “Many cloud service providers offer solutions for online data object storage
    such as Amazon S3, Azure Storage, and Google Cloud Storage. These solutions differ
    from other storage solutions (such as SQL or Elasticsearch) in that there is no
    overarching application. Data from these solutions can be retrieved directly using
    the cloud provider’s APIs. In other cases, SaaS application providers such as
    Slack, Confluence, and Salesforce also provide cloud storage solutions as a peripheral
    use case of their platform. These cloud objects can be extracted directly from
    their associated application. Adversaries may collect sensitive data from these
    cloud storage solutions. Providers typically offer security guides to help end
    users configure systems, though misconfigurations are a common problem. There
    have been numerous incidents where cloud storage has been improperly secured,
    typically by unintentionally allowing public access to unauthenticated users,
    overly-broad access by all users, or even access for any anonymous person outside
    the control of the Identity Access Management system without even needing basic
    user permissions.”
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: “许多云服务提供商提供在线数据对象存储解决方案，例如Amazon S3、Azure Storage和Google Cloud Storage。这些解决方案与其他存储解决方案（例如SQL或Elasticsearch）不同之处在于没有统一的应用程序。可以直接使用云提供商的API检索这些解决方案中的数据。在其他情况下，诸如Slack、Confluence和Salesforce等SaaS应用程序提供商也提供云存储解决方案作为其平台的外围用例。这些云对象可以直接从其关联应用程序中提取。攻击者可能从这些云存储解决方案中收集敏感数据。提供商通常提供安全指南以帮助最终用户配置系统，尽管配置错误是一个常见问题。已经发生过许多云存储未经适当保护的事件，通常是通过无意中允许未经身份验证的用户公开访问、所有用户过度广泛访问，甚至是在没有基本用户权限的情况下允许任何匿名人员访问，而这些人员不受身份访问管理系统控制。”
- en: Later in this book, I will show you how to use tools and techniques to conduct
    pentests that involve unauthorized access to cloud storage.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 本书后面，我将向您展示如何使用工具和技术进行涉及未经授权访问云存储的渗透测试。
- en: Integrity
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 完整性
- en: 'Let’s look at cyberattacks on the integrity of cloud data. The following is
    a story that *Ravie Lakshmanan* of *The Hacker News* ([https://thehackernews.com/2023/03/large-scale-cyber-attack-hijacks-east.html](https://thehackernews.com/2023/03/large-scale-cyber-attack-hijacks-east.html))
    reported regarding the targeting of adult entertainment websites:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看针对云数据完整性的网络攻击。以下是*Ravie Lakshmanan*在*The Hacker News*上报道的一个故事（[https://thehackernews.com/2023/03/large-scale-cyber-attack-hijacks-east.html](https://thehackernews.com/2023/03/large-scale-cyber-attack-hijacks-east.html)），内容涉及针对成人娱乐网站的攻击：
- en: “A widespread malicious cyber operation has hijacked thousands of websites aimed
    at East Asian audiences to redirect visitors to adult-themed content since early
    September 2022\. The ongoing campaign entails injecting malicious JavaScript code
    to the hacked websites, often connecting to the target web server using legitimate
    FTP credentials the threat actor previously obtained via an unknown method. ‘In
    many cases, these were highly secure auto-generated FTP credentials which the
    attacker was somehow able to acquire and leverage for website hijacking,’ Wiz
    said in a report published this month. The fact that the breached websites – owned
    by both small firms and multinational corporations – utilize different tech stacks
    and hosting service providers has made it difficult to trace a common attack vector,
    the cloud security company noted.”
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: “自2022年9月初以来，一场大规模的恶意网络行动劫持了数千个面向东亚观众的网站，将访问者重定向到成人内容。这场持续的攻击活动涉及将恶意JavaScript代码注入到被黑的网站中，通常通过合法的FTP凭据连接到目标网页服务器，而这些凭据是攻击者通过未知方式先前获得的。‘在许多情况下，这些是高度安全的自动生成的FTP凭据，攻击者不知怎的获取并利用它们进行网站劫持，’Wiz在本月发布的一份报告中表示。云安全公司指出，尽管被攻陷的网站——包括小型公司和跨国公司所有的网站——使用了不同的技术栈和托管服务提供商，但很难追踪到一个共同的攻击途径。”
- en: As a cloud pentester, you may have to conduct a pentest that involves injecting
    malicious code into a web application that’s run from a multi-cloud environment.
    This is the sort of attack that very clever attackers may succeed at, and takes
    very skilled cloud pentesters to simulate.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 作为云渗透测试员，你可能需要进行一项渗透测试，涉及向在多云环境中运行的Web应用程序注入恶意代码。这是非常狡猾的攻击者可能会成功的攻击方式，并且需要非常熟练的云渗透测试员才能模拟。
- en: Integrity attacks can involve malicious code injection, man-in-the-middle attacks,
    or maliciously acquiring user and machine identities, such as **Transport Layer
    Security** (**TLS**) certificates.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 完整性攻击可能包括恶意代码注入、中间人攻击或恶意获取用户和机器身份，如**传输层安全性**（**TLS**）证书。
- en: TLS
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: TLS
- en: TLS certificates are used to grant users and machines access to services that
    are encrypted with TLS, such as encrypted web applications deployed through the
    HTTPS protocol.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: TLS证书用于授予用户和机器访问使用TLS加密的服务的权限，例如通过HTTPS协议部署的加密Web应用程序。
- en: Availability
  id: totrans-85
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 可用性
- en: Finally, there are attacks on the availability of cloud data.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，还有针对云数据可用性的攻击。
- en: In August 2022, the official Google Cloud blog reported one of the biggest DDoS
    attacks they’ve ever detected on one of their GCP services.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 2022年8月，Google Cloud官方博客报道了他们检测到的有史以来最大的一次DDoS攻击，目标是他们的一个GCP服务。
- en: The corporate customer was using **Google Cloud Armor**. Google Cloud Armor
    is a cybersecurity service that GCP customers (such as enterprises) can use to
    protect GCP-hosted applications and networks from a few common sorts of security
    exploits. Some of the common attacks Google Cloud Armor is designed to detect
    and prevent include DDoS attacks, **cross-site scripting** (**XSS**) attacks,
    and SQL injection attacks.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 这位企业客户使用的是**Google Cloud Armor**。Google Cloud Armor是一项网络安全服务，GCP客户（如企业）可以使用它来保护托管在GCP上的应用程序和网络免受一些常见的安全漏洞攻击。Google
    Cloud Armor旨在检测和防止的一些常见攻击包括DDoS攻击、**跨站脚本**（**XSS**）攻击和SQL注入攻击。
- en: We’ll get into XSS and SQL injection later in this book, but we’ll cover DDoS
    attacks here.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 本书稍后会介绍XSS和SQL注入攻击，但这里我们先讨论DDoS攻击。
- en: What’s a DDoS attack?
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 什么是DDoS攻击？
- en: A DDoS attack is when a cyber attacker uses a distributed collection of computers
    to overwhelm a network target with more data than it can handle. Overwhelming
    a target with data can cause it to shut down or go offline temporarily. Web servers
    and cloud instances are some of the most common targets of DDoS attacks.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: DDoS攻击是指网络攻击者利用分布式计算机集合向网络目标发送超出其承载能力的数据，造成目标无法处理。通过向目标发送大量数据，攻击者可能使其崩溃或暂时下线。Web服务器和云实例是DDoS攻击中最常见的目标之一。
- en: Most DDoS attacks are conducted with a botnet. A botnet is a network of computers
    that a cyber attacker controls through a command-and-control server in order to
    execute cyberattacks. Computers get infected with zombie malware that makes them
    controllable by the attacker and part of the botnet. PCs, mobile devices, servers,
    and networking devices such as routers are often infected with zombie malware
    and used in a botnet. An ordinary person’s phone could be part of a botnet and
    they don’t even know it!
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数 DDoS 攻击都是通过僵尸网络进行的。僵尸网络是由网络攻击者通过指挥与控制服务器控制的计算机网络，用于执行网络攻击。计算机感染了僵尸恶意软件，使其可被攻击者控制，并成为僵尸网络的一部分。个人计算机、移动设备、服务器和网络设备（如路由器）通常会被僵尸恶意软件感染，并用于组成僵尸网络。一个普通人的手机也可能成为僵尸网络的一部分，而他们自己却毫不知情！
- en: When an attacker can use a little bit of the computing power of a large collection
    of devices in their botnet, they can execute more destructive cyberattacks. In
    a botnet-driven DDoS attack, thousands of devices can be synchronized to overwhelm
    one network cyberattack target with an immense amount of data packets.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 当攻击者能够利用他们的僵尸网络中大量设备的一点计算能力时，他们可以执行更具破坏性的网络攻击。在一个由僵尸网络驱动的 DDoS 攻击中，成千上万的设备可以被同步，向一个网络攻击目标发起大量数据包，压垮目标。
- en: 'The DDoS attack didn’t target Google Cloud Armor directly. Rather, Google Cloud
    Armor was able to detect the DDoS attack. It was reported on the official Google
    Cloud blog ([https://cloud.google.com/blog/products/identity-security/how-google-cloud-blocked-largest-layer-7-ddos-attack-at-46-million-rps](https://cloud.google.com/blog/products/identity-security/how-google-cloud-blocked-largest-layer-7-ddos-attack-at-46-million-rps))
    as follows:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这次 DDoS 攻击并没有直接针对 Google Cloud Armor。相反，Google Cloud Armor 能够检测到这次 DDoS 攻击。该事件在官方的
    Google Cloud 博客中有报道 ([https://cloud.google.com/blog/products/identity-security/how-google-cloud-blocked-largest-layer-7-ddos-attack-at-46-million-rps](https://cloud.google.com/blog/products/identity-security/how-google-cloud-blocked-largest-layer-7-ddos-attack-at-46-million-rps))，如下所示：
- en: “On June 1 (2022), a Google Cloud Armor customer was targeted with a series
    of HTTPS DDoS attacks which peaked at 46 million requests per second. This is
    the largest Layer 7 DDoS reported to date—at least 76% larger than the previously
    reported record. To give a sense of the scale of the attack, that is like receiving
    all the daily requests to Wikipedia (one of the top 10 trafficked websites in
    the world) in just 10 seconds.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: “2022年6月1日，一位 Google Cloud Armor 的客户遭遇了一系列 HTTPS DDoS 攻击，峰值达到了每秒 4600 万个请求。这是迄今为止报告的最大
    Layer 7 DDoS 攻击——比之前报告的记录大至少 76%。为了更好地理解攻击的规模，可以想象这相当于在 10 秒钟内接收到 Wikipedia（全球排名前十的流量网站）所有的日请求量。”
- en: Cloud Armor Adaptive Protection was able to detect and analyze the traffic early
    in the attack lifecycle. Cloud Armor alerted the customer with a recommended protective
    rule which was then deployed before the attack ramped up to its full magnitude.
    Cloud Armor blocked the attack ensuring the customer’s service stayed online and
    continued serving their end-users.”
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Cloud Armor 自适应保护能够在攻击生命周期的早期检测并分析流量。Cloud Armor 向客户发出了推荐的防护规则提示，并在攻击扩大到全规模之前部署了该规则。Cloud
    Armor 阻止了这次攻击，确保了客户的服务保持在线，并继续为终端用户提供服务。
- en: It’s great that Google Cloud Armor was able to mitigate such a massive DDoS
    attack on a customer’s GCP-hosted servers. As a cloud pentester, you might be
    challenged to find a way around Google Cloud Armor!
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 很高兴看到 Google Cloud Armor 能够缓解如此大规模的 DDoS 攻击，保护了客户的 GCP 托管服务器。作为一名云渗透测试员，你可能会面临绕过
    Google Cloud Armor 的挑战！
- en: All cyberattacks impact at least one part of the CIA Triad – confidentiality,
    integrity, or availability. Confidentiality is about protecting data from unpermitted
    access. Integrity is about making sure that only authorized users and entities
    can make changes to data. And availability is about making sure that data can
    be accessed by authorized users when they need it. Some attacks may impact more
    than one part of the CIA Triad, such as ransomware (availability) that also breaches
    the public’s data (confidentiality).
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 所有的网络攻击都会影响 CIA 三原则中的至少一个部分——机密性、完整性或可用性。机密性是指保护数据不被未授权访问。完整性是确保只有授权用户和实体才能更改数据。而可用性则是确保授权用户在需要时能够访问数据。有些攻击可能会影响
    CIA 三原则中的多个部分，例如勒索软件（影响可用性）同时也可能侵犯公众数据（影响机密性）。
- en: Understanding lateral movement in the cloud
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解云中的横向移动
- en: Cyberattacks on cloud applications can be external or internal. They can impact
    the confidentiality, integrity, and availability of data. Here are some more cloud
    cyberattack concepts to understand.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 针对云应用程序的网络攻击可以是外部的，也可以是内部的。它们可能会影响数据的机密性、完整性和可用性。以下是一些需要了解的云网络攻击概念。
- en: Cyberattacks against complicated enterprise systems such as cloud networks are
    seldom simple. Attacks don’t just break in, enter, and leave. Many attacks strike
    one part of a complex system and then move on to other parts of a complex system.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 针对复杂企业系统（如云网络）的网络攻击很少是简单的。攻击不仅仅是突破、进入和离开。许多攻击会首先攻击复杂系统的一个部分，然后转向系统的其他部分。
- en: A cloud network can include multiple cloud platforms (AWS, Azure, and GCP) with
    several different services and applications on each platform. They can also contain
    multiple containerization systems through orchestration platforms such as Docker
    and Kubernetes, integrating numerous services and applications within each one.
    All of the components of cloud networks can communicate with each other through
    shared credentials such as cryptography keys and machine identities (such as TLS
    certificates).
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 一个云网络可以包含多个云平台（如AWS、Azure和GCP），每个平台上都有多个不同的服务和应用程序。它们还可能通过像Docker和Kubernetes这样的编排平台包含多个容器化系统，在每个容器中集成众多服务和应用程序。云网络的所有组件可以通过共享凭据（如加密密钥和机器身份，诸如TLS证书）相互通信。
- en: As a cloud pentester, you may be asked to simulate these more complex lateral
    exploit techniques.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名云渗透测试员，你可能会被要求模拟这些更复杂的横向利用技术。
- en: MITRE ATT&CK has a whole category for lateral movement exploits. It’s all about
    when an attacker moves within a computer system. The attacker could be moving
    between different entities within your organization’s cloud instance on one cloud
    platform. They could be moving between different instances or services on the
    same cloud platform. They could even be moving from your organization’s services
    on one cloud platform to another if you have a multi-cloud network.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK为横向移动利用定义了一个完整的类别。它主要是关于攻击者如何在计算机系统内部移动。攻击者可能在同一云平台的不同实体之间移动，也可能在不同的云平台之间移动，甚至如果你的组织拥有多云网络，攻击者可能会从一个云平台上的服务移动到另一个云平台。
- en: Here’s MITRE ATT&CK’s list of lateral movement exploits.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 这是MITRE ATT&CK的横向移动利用列表。
- en: Exploitation of remote services
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 远程服务的利用
- en: As cloud networks often contain entities in multiple geographic locations, this
    can be a common cloud cyberattack technique. When it comes to networks, “internal”
    and “external” pertain to access control, not to physical location per se. If
    a hybrid multi-cloud network has one on-premises location and components in AWS,
    Azure, and GCP data centers in different parts of the world, it’s all a part of
    an internal network if the access control is configured so that the public is
    forbidden access.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 由于云网络通常包含多个地理位置的实体，这可能成为常见的云网络攻击技术。对于网络而言，“内部”和“外部”是指访问控制，而不是指物理位置本身。如果一个混合多云网络有一个本地位置，并且在世界不同地方的AWS、Azure和GCP数据中心拥有组件，只要配置了访问控制，禁止公众访问，它们都属于内部网络的一部分。
- en: 'MITRE ATT&CK defines the exploitation of remote services ([https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/))
    as follows:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK将远程服务的利用定义为：[https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/)：
- en: “Adversaries may exploit remote services to gain unauthorized access to internal
    systems once inside of a network. Exploitation of a software vulnerability occurs
    when an adversary takes advantage of a programming error in a program, service,
    or within the operating system software or kernel itself to execute adversary-controlled
    code.”
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能会利用远程服务，在进入网络后获得对内部系统的未经授权的访问权限。软件漏洞的利用发生在对手利用程序、服务、操作系统软件或内核本身中的编程错误来执行对手控制的代码时。”
- en: Internal spearphishing
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 内部鱼叉式钓鱼
- en: In a phishing attack, adversaries pose as trustworthy entities by replicating
    their websites, emails, text messages, or social media communications. Phishing
    attacks can be random. For example, I’ve received phishing text messages from
    an attacker pretending to be from a major Canadian bank that I don’t have an account
    with. The attacker only knew that I was in Canada, and Canada only has a handful
    of major banks, each of them having 5 million customers or more. I wasn’t specifically
    targeted; the attacker sent massive amounts of phishing text messages to Canadians,
    hoping that some who have accounts with that bank would fall for the scam.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在钓鱼攻击中，对手通过复制其网站、电子邮件、短信或社交媒体通信，伪装成可信任的实体。钓鱼攻击可以是随机的。例如，我曾收到过一个攻击者伪装成一家我没有账户的加拿大大银行的钓鱼短信。攻击者只知道我在加拿大，而加拿大只有少数几家大银行，每家银行的客户超过五百万。我的信息并没有被特别针对；攻击者向大量加拿大人发送钓鱼短信，希望有些拥有该银行账户的人会上当。
- en: Spearphishing is different. Spearphishing targets a specific individual or entity.
    For instance, there could be a particular individual who works for the company
    the attacker is trying to break into. They could look up information about the
    individual on LinkedIn, and then pretend to be one of the individual’s LinkedIn
    contacts.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 鱼叉式钓鱼与此不同。鱼叉式钓鱼攻击针对特定的个人或实体。例如，可能会有一个特定的个人，攻击者试图突破该人的公司防线。他们可以在 LinkedIn 上查找该人的信息，然后伪装成该人
    LinkedIn 上的一个联系人。
- en: 'MITRE ATT&CK defines internal spearphishing ([https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/))
    as follows:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK 将内部鱼叉式钓鱼攻击 ([https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/))
    定义如下：
- en: “Adversaries may use internal spearphishing to gain access to additional information
    or exploit other users within the same organization after they already have access
    to accounts or systems within the environment. Internal spearphishing is multi-staged
    campaign where an email account is owned either by controlling the user’s device
    with previously installed malware or by compromising the account credentials of
    the user. Adversaries attempt to take advantage of a trusted internal account
    to increase the likelihood of tricking the target into falling for the phish attempt.”
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能会利用内部鱼叉式钓鱼攻击，在已经获得该环境中的账户或系统访问权限后，获取更多信息或攻击同一组织中的其他用户。内部鱼叉式钓鱼是一种多阶段的攻击活动，其中电子邮件账户通过控制用户设备（先前安装的恶意软件）或通过破解用户账户凭证来被掌控。对手尝试利用受信任的内部账户，提高欺骗目标的可能性，以使其上当。”
- en: Lateral tool transfer
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 横向工具传输
- en: Within a cloud network, various applications and services can be interconnected.
    These applications inherently possess privileged access to one another. An attacker
    can exploit these interconnections and privileges for lateral movement within
    the network.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在云网络中，多个应用程序和服务可以互相连接。这些应用程序本身拥有相互之间的特权访问权限。攻击者可以利用这些连接和特权，在网络内进行横向移动。
- en: 'MITRE ATT&CK defines lateral tool transfer ([https://attack.mitre.org/techniques/T1570/](https://attack.mitre.org/techniques/T1570/))
    as follows:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK 将横向工具传输 ([https://attack.mitre.org/techniques/T1570/](https://attack.mitre.org/techniques/T1570/))
    定义如下：
- en: “Adversaries may transfer tools or other files between systems in a compromised
    environment. Once brought into the victim environment (i.e. Ingress Tool Transfer)
    files may then be copied from one system to another to stage adversary tools or
    other files over the course of an operation. Adversaries may copy files between
    internal victim systems to support lateral movement using inherent file sharing
    protocols such as file sharing over SMB/Windows Admin Shares to connected network
    shares or with authenticated connections via Remote Desktop Protocol.”
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能会在被攻陷的环境中，在系统之间传输工具或其他文件。一旦将文件引入受害环境（即入口工具传输），这些文件就可以从一个系统复制到另一个系统，用于在操作过程中准备对手的工具或其他文件。对手可能会在受害者的内部系统之间复制文件，利用内建的文件共享协议（例如通过
    SMB/Windows 管理共享到连接的网络共享，或通过远程桌面协议的身份验证连接）来支持横向移动。”
- en: Remote service session hijacking
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 远程服务会话劫持
- en: Cloud networks and applications are full of services that are designed to be
    remotely accessed. Remote service session hijacking can help an attacker move
    between different nodes in a containerization orchestration, between different
    sessions within the same cloud service, and also between different cloud services
    that share credentials – even if they use different cloud platforms! For example,
    remote sessions can be hijacked between App Engine in GCP, App Service in Azure,
    and Amazon EC2 in AWS. Of course, this sort of exploit can be prevented by proper
    security configuration between the applications and platforms.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 云网络和应用充满了旨在远程访问的服务。远程服务会话劫持可以帮助攻击者在容器化编排中的不同节点之间、在同一云服务中的不同会话之间、以及在共享凭证的不同云服务之间移动——即使它们使用的是不同的云平台！例如，可以劫持GCP中的App
    Engine、Azure中的App Service和AWS中的Amazon EC2之间的远程会话。当然，通过适当的安全配置，应用程序和平台之间可以防止这种漏洞。
- en: 'MITRE ATT&CK defines remote service session hijacking ([https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/))
    as follows:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK 将远程服务会话劫持定义为如下：[https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/)
- en: “Adversaries may take control of preexisting sessions with remote services to
    move laterally in an environment. Users may use valid credentials to log into
    a service specifically designed to accept remote connections, such as telnet,
    SSH, and RDP.”
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能会接管与远程服务的现有会话，以在环境中横向移动。用户可能使用有效的凭证登录到专门设计用于接受远程连接的服务，如telnet、SSH和RDP。”
- en: Software deployment tools
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 软件部署工具
- en: This is similar to remote service session hijacking, but instead of remote sessions
    being targeted, trusted third-party administrative tools are targeted. As a cloud
    pentester, you will likely need to simulate a lot of different types of hijacking
    techniques.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 这类似于远程服务会话劫持，但目标不是远程会话，而是受信任的第三方管理工具。作为云渗透测试人员，你可能需要模拟很多不同类型的劫持技术。
- en: 'MITRE ATT&CK defines software deployment tools ([https://attack.mitre.org/techniques/T1195/001/](https://attack.mitre.org/techniques/T1195/001/))
    as follows:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK 将软件部署工具定义为如下：[https://attack.mitre.org/techniques/T1195/001/](https://attack.mitre.org/techniques/T1195/001/)
- en: “Adversaries may gain access to and use third-party software suites installed
    within an enterprise network, such as administration, monitoring, and deployment
    systems, to move laterally through the network.”
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能会访问并使用企业网络中安装的第三方软件套件，如管理、监控和部署系统，横向移动通过网络。”
- en: Tainted shared content
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 污染的共享内容
- en: Think of how much shared storage cloud applications constantly use! When securing
    a cloud network, every single data asset must be carefully monitored and guarded.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 想想云应用中使用的共享存储量有多大！在保护云网络时，必须仔细监控和保护每一项数据资产。
- en: 'MITRE ATT&CK defines tainted shared content ([https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/))
    as follows:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: MITRE ATT&CK 将污染的共享内容定义为如下：[https://attack.mitre.org/tactics/TA0008/](https://attack.mitre.org/tactics/TA0008/)
- en: “Adversaries may deliver payloads to remote systems by adding content to shared
    storage locations, such as network drives or internal code repositories. Content
    stored on network drives or in other shared locations may be tainted by adding
    malicious programs, scripts, or exploit code to otherwise valid files.”
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: “对手可能通过向共享存储位置（如网络驱动器或内部代码库）添加内容，将有效负载传递给远程系统。存储在网络驱动器或其他共享位置的内容可能会因添加恶意程序、脚本或利用代码到本应有效的文件中而被污染。”
- en: Cloud applications and networks can get a lot more complicated than traditional
    applications and networks. There’s your organization, then a cloud platform, or
    multiple cloud platforms. There can be several different services implemented
    per cloud platform. There can be an on-premises network component. A containerized
    application can have many virtualized containers that can each live and die within
    days. There can be hundreds of user accounts and many more machine identities.
    There are so many different attack vectors for threat actors. You may need to
    simulate attacks on many of these complex vectors during your red team engagements.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 云应用和网络比传统应用和网络更为复杂。你的组织在一个云平台上，或者多个云平台上。每个云平台可能会实施多个不同的服务。可能还会有一个本地网络组件。一个容器化的应用可能有许多虚拟化的容器，每个容器可能在几天内生死循环。可能有成百上千个用户账户，更多的是机器身份。攻击者有很多不同的攻击向量。你可能需要在红队任务中模拟对这些复杂向量的攻击。
- en: Zero-trust networks
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 零信任网络
- en: Back in the days before cloud services were commonly used, enterprises only
    had networks on their own premises. Back in the 1990s and early 2000s, the network
    security paradigm was all about perimeters.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在云服务普及之前，企业的网络仅存在于自己场所内。在1990年代和2000年代初，网络安全范式完全是围绕周界展开的。
- en: Different network segments could have different levels of security, but the
    internal network and all of its segments were contained within a heavily guarded
    perimeter. Sometimes, external traffic would be allowed into the internal network,
    but it’d have to pass a vector for authentication and authorization. But once
    that perimeter was cleared, the user could travel within the internal network
    without having their credentials checked again. All users were either trusted
    or distrusted, and existing inside the perimeter meant automatic trust. Think
    of a country with a heavily guarded border, but little police presence inside
    of the country.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 不同的网络段可能具有不同级别的安全性，但内部网络及其所有段落都被包含在一个严密防守的周界内。有时，外部流量会被允许进入内部网络，但必须通过身份验证和授权的向量。但是，一旦突破了这个周界，用户就可以在内部网络中自由活动，无需再次验证凭证。所有用户要么被信任，要么不被信任，存在于周界内部意味着自动信任。可以想象成一个有着严格边境的国家，但国内几乎没有警察存在。
- en: The old perimeter model of network security has been obsolete for many years
    now. There are multiple reasons why.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 旧有的周界网络安全模型已经过时多年了，原因有很多。
- en: 'First of all, the perimeter security model isn’t very resilient or robust.
    Cyber attackers do sometimes breach authentication barriers. So, if they breach
    the perimeter, there are usually no other authentication barriers that they have
    to breach. It’s like the way a bank robber might taunt a bank: “Your security
    has to succeed every single time, but I only have to succeed once!”'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，周界安全模型并不是非常具有韧性或健壮性。网络攻击者有时会突破身份验证障碍。因此，如果他们突破了周界，通常不会再有其他的身份验证障碍需要突破。这就像银行抢劫犯挑衅银行：“你们的安全必须每次都成功，但我只需要成功一次！”
- en: Secondly, the perimeter security model is totally incompatible with today’s
    more complex cloud networks. The perimeter security model couldn’t be applied
    to a cloud network even if someone wanted to try. The simplest possible enterprise
    cloud network has a few PC endpoints on-premises and connects to one cloud service
    on one cloud platform through the internet. The most complex hybrid multi-cloud
    networks entail on-premises networks and endpoints in multiple company-owned locations,
    remote employees and contractors working from their homes, multiple cloud services
    (AWS, Azure, and GCP), and several different SaaS, PaaS, and IaaS services and
    applications on each of the cloud platforms. Either way, users have to go through
    the internet to connect to their internal corporate networks.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，周界安全模型完全无法与今天更为复杂的云网络兼容。即使有人愿意尝试，周界安全模型也无法应用于云网络。最简单的企业云网络包括几个本地的PC端点，并通过互联网连接到一个云平台上的云服务。而最复杂的混合多云网络则包括多个公司自有地点的本地网络和端点，远程员工和承包商在家中工作，多个云服务（如AWS、Azure和GCP），以及每个云平台上多个SaaS、PaaS和IaaS服务和应用。无论哪种方式，用户都必须通过互联网连接到他们的内部企业网络。
- en: Zero-trust security means that no user or machine is ever trusted automatically.
    A perimeter security network automatically trusts users inside of the perimeter.
    But in cloud networks and over the internet, there is no perimeter. So, authentication
    and authorization vectors and checks are implemented in as many places in the
    network as possible. It doesn’t matter where you come from, you must show your
    identification to access this component!
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 零信任安全意味着没有任何用户或机器会自动被信任。周界安全网络会自动信任周界内部的用户。但是在云网络和互联网中，是没有周界的。因此，身份验证和授权的向量与检查会尽可能多地在网络的各个地方实现。不管你来自哪里，访问这个组件时，你必须出示你的身份！
- en: An attacker would need to compromise several authentication points to navigate
    within the enterprise cloud network. Having numerous authentication points can
    significantly reduce the likelihood of a successful cyberattack. However, if an
    attacker manages to capture credentials, navigating within the cloud network might
    become effortless for them. Grasping these nuances is essential for anyone involved
    in cloud penetration testing.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者需要攻破多个身份验证点才能在企业云网络中横行。拥有多个身份验证点可以显著减少成功发动网络攻击的可能性。然而，如果攻击者成功获取了凭证，进入云网络可能会变得毫不费力。掌握这些细节对任何参与云渗透测试的人来说都至关重要。
- en: Later in this book, we’ll explore some of the most popular AWS, Azure, and GCP
    applications and services. We’ll get into how virtualization and containerization
    are implemented in cloud networks. We’ll also explore the various tools, techniques,
    and strategies you’ll use on your cloud red team engagements.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 本书后续章节将深入探讨一些最流行的AWS、Azure和GCP应用程序与服务。我们还将介绍虚拟化和容器化在云网络中的实现方式。同时，我们将探索在云红队演习中将使用的各种工具、技术和策略。
- en: Summary
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: The reason why we conduct pentesting is to learn about security vulnerabilities
    in computer systems by simulating cyberattacks.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 我们进行渗透测试的原因是通过模拟网络攻击来了解计算机系统中的安全漏洞。
- en: There are possibly hundreds or thousands of potential cyberattack vectors in
    a cloud network, both internal and external. Users, user accounts, machine identities,
    and vulnerabilities in internet-facing applications are just some of the many
    possibilities.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 云网络中可能有数百或数千种潜在的网络攻击路径，包括内部和外部的。用户、用户帐户、机器身份以及面向互联网的应用程序中的漏洞，都是其中的一部分可能性。
- en: You may not be able to simulate all of the possible types of exploits. For instance,
    cloud providers often prohibit simulating DDoS attacks, and you also won’t be
    allowed to physically visit the cloud provider’s data centers to plant test devices.
    But it’s important to understand all the different things an attacker could do
    and keep them in mind when you’re conducting your red team engagements.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能无法模拟所有可能的漏洞攻击。例如，云服务提供商通常禁止模拟DDoS攻击，并且您也不能亲自访问云服务提供商的数据中心安装测试设备。但了解攻击者可能采取的所有不同方法，并在进行红队演习时牢记这一点，仍然是非常重要的。
- en: Attacks can originate internally or externally from your organization. The CIA
    Triad of cybersecurity is a concept to explain how cyberattacks can impact your
    organization’s data in terms of confidentiality, integrity, and availability.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击可以来源于组织内部或外部。网络安全的CIA三维模型是一个概念，用来解释网络攻击如何在机密性、完整性和可用性方面影响组织的数据。
- en: As cloud networks have become a lot more common and networking technology has
    advanced, we now secure computer networks with zero-trust security. That means
    users and applications are authenticated at as many points of the network as possible,
    regardless of the user’s origin being either internal or external to the network.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 随着云网络的普及和网络技术的进步，我们现在通过零信任安全来保护计算机网络。这意味着用户和应用程序会在网络的尽可能多的点进行身份验证，不论用户的来源是网络内部还是外部。
- en: In the next chapter, we’ll explore the key concepts for pentesting cloud networks.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将探讨渗透测试云网络的关键概念。
- en: Further reading
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'To learn more about the topics covered in this chapter, you can visit the following
    links:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解本章涉及的更多内容，您可以访问以下链接：
- en: '*MITRE* *ATT&CK*: [https://attack.mitre.org/](https://attack.mitre.org/'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*MITRE* *ATT&CK*: [https://attack.mitre.org/](https://attack.mitre.org/)'
- en: )
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: '*DDoS* *botnets*: [https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet/](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet/'
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*DDoS* *僵尸网络*: [https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet/](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet/)'
- en: )
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: '*Zero-trust security and the* *cloud*: [https://www.paloaltonetworks.com/cyberpedia/what-is-a-zero-trust-for-the-cloud](https://www.paloaltonetworks.com/cyberpedia/what-is-a-zero-trust-for-the-cloud)'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*零信任安全与* *云计算*: [https://www.paloaltonetworks.com/cyberpedia/what-is-a-zero-trust-for-the-cloud](https://www.paloaltonetworks.com/cyberpedia/what-is-a-zero-trust-for-the-cloud)'
