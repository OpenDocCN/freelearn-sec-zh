- en: Password Cracking
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 密码破解
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涉及以下主题：
- en: Resetting local Windows machine password
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置本地 Windows 机器密码
- en: Cracking remote Windows machine passwords
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解远程 Windows 机器密码
- en: Windows domain password attacks
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows 域密码攻击
- en: Cracking local Linux password hashes
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解本地 Linux 密码哈希
- en: Cracking password hashes with a wordlist
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用字典破解密码哈希
- en: Brute force password hashes
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 暴力破解密码哈希
- en: Cracking FTP passwords
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解 FTP 密码
- en: Cracking Telnet and SSH passwords
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解 Telnet 和 SSH 密码
- en: Cracking RDP and VNC passwords
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解 RDP 和 VNC 密码
- en: Cracking ZIP file passwords
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解 ZIP 文件密码
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Password cracking has its own uses, often times you may be able to access and
    recover password databases but they are encrypted and on other times to escalate
    privilege or gain access, you may have to use a password attack.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 密码破解有其特定用途，通常情况下，你可以访问并恢复加密的密码数据库，或者在某些情况下，为了提升权限或获取访问权限，你可能需要使用密码攻击。
- en: Resetting local Windows machine password
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重置本地 Windows 机器密码
- en: In this recipe, we will crack the local Windows machine passwords with direct
    access to the computer.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将通过直接访问计算机来破解本地 Windows 机器密码。
- en: In this recipe, we will also simulate booting off a CD-ROM in order to reset
    the local password.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们还将模拟从 CD-ROM 启动，以便重置本地密码。
- en: Getting ready
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Windows workstation is powered down
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Windows 工作站已关闭
- en: You have recently downloaded the Kali ISO
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你最近已下载 Kali ISO
- en: Have a local standard user on the Windows workstation with a password
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Windows 工作站上有一个本地标准用户并且设置了密码
- en: How to do it...
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now reset the Windows password using Kali boot media:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用 Kali 启动介质重置 Windows 密码：
- en: 'With your Windows machine off, start by going into VirtualBox, click on the
    Windows VM, and click on Settings:'
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Windows 机器关闭的情况下，首先进入 VirtualBox，点击 Windows 虚拟机，然后点击设置：
- en: '![](assets/5c9c15f5-f2e0-4f49-916d-4ba8edf6969c.png)VirtualBox machine screen'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/5c9c15f5-f2e0-4f49-916d-4ba8edf6969c.png)VirtualBox 机器屏幕'
- en: 'From the Settings menu click on Storage.Click on the CD-ROM drive and choose
    the Kali ISO you recently downloaded. Then click OK:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从设置菜单中点击存储。点击 CD-ROM 驱动器并选择你最近下载的 Kali ISO 文件。然后点击确定：
- en: '![](assets/5b5a9489-6d84-44bd-b57b-f884d21a304b.png)VirtualBox machine storage
    settings'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/5b5a9489-6d84-44bd-b57b-f884d21a304b.png)VirtualBox 机器存储设置'
- en: Now start your Windows VM and it should automatically load the Kali CD. From
    the main menu select Live (forensic mode).
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在启动你的 Windows 虚拟机，它应该会自动加载 Kali CD。 从主菜单中选择 Live（取证模式）。
- en: Watch the screen carefully depending on what operating system you are working
    with, you may be asked to boot off the CD. ![](assets/8f70c352-1d9a-464f-bd82-943996ea1f0e.png)Kali
    boot screen
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你使用的操作系统，小心观察屏幕，可能会要求你从 CD 启动。![](assets/8f70c352-1d9a-464f-bd82-943996ea1f0e.png)Kali
    启动屏幕
- en: Once Kali is running open your terminal screen. ![](assets/d96f9769-1242-42d7-9f44-8eee7330cd4c.png)
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Kali 运行后，打开你的终端屏幕。![](assets/d96f9769-1242-42d7-9f44-8eee7330cd4c.png)
- en: 'You must change to the directory of your mounted Windows volume. Your ID of
    the drive will be different from mine but follow the following steps to find it:'
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你必须切换到你挂载的 Windows 卷的目录。你的驱动器 ID 可能与我的不同，但请按照以下步骤找到它：
- en: '[PRE0]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'From the listed directory contents you will probably just have the one drive
    – use the `cd` command to make that the active drive. Once in the directory use
    the following commands:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在列出的目录内容中，你可能只有一个驱动器——使用 `cd` 命令将其设为活动驱动器。进入该目录后，使用以下命令：
- en: '[PRE1]'
  id: totrans-34
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](assets/0daee393-bb04-46c2-8e74-d33609b46d7c.png)Kali SAM output'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/0daee393-bb04-46c2-8e74-d33609b46d7c.png)Kali SAM 输出'
- en: 'You will now see a list of users and whether or not they are an admin. Let''s
    reset `UserA` password and make it an admin on the system:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在会看到一个用户列表，以及他们是否是管理员。我们将重置 `UserA` 密码并将其设为系统管理员：
- en: '[PRE2]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'You will now be brought to a configuration screen. Select 1 and then 3, then
    select `Y` when asked to do it. Next hit `q` to quit and select `y` to write the
    hive files back:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将进入配置屏幕。选择 1，然后选择 3，接着在被要求时选择 `Y`。然后按 `q` 退出并选择 `y` 以写回注册表文件：
- en: '![](assets/560817cf-ca2a-4801-966e-baa601eda581.png)chnt user modify screen'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/560817cf-ca2a-4801-966e-baa601eda581.png)chnt 用户修改屏幕'
- en: 'To validate, type the following command and you will note that `UserA` is now
    an `ADMIN` and has a `*BLANK*` password:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了验证，输入以下命令，你会注意到 `UserA` 现在是 `ADMIN` 并且密码是 `*BLANK*`：
- en: '[PRE3]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](assets/cdc199c4-db7d-44dd-b2cb-682e77e71281.png)chnt show SAM screen'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/cdc199c4-db7d-44dd-b2cb-682e77e71281.png)chnt 显示 SAM 屏幕'
- en: 'Power off the VM at this point and remove the ISO from the CD-ROM drive. Lastly,
    start the VM. This time it should take you right to Windows. Click on your user
    and you will be brought right in without requiring a password:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这时关闭虚拟机并移除光驱中的ISO镜像。最后，启动虚拟机。这次它应该直接进入Windows。点击你的用户账号，你将直接进入，无需输入密码：
- en: '![](assets/3d63314c-84b5-4479-8c62-64d04e00dec6.png)Windows 7 main login screen'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3d63314c-84b5-4479-8c62-64d04e00dec6.png)Windows 7主登录界面'
- en: 'If you go in and check your user account you will notice that `UserA` is now
    an administrator:'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你进入并检查你的用户账户，你会发现`UserA`现在是管理员：
- en: '![](assets/2833cfad-1433-49a0-abfa-87061b6e0ee5.png)Windows 7 user administration
    screen'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/2833cfad-1433-49a0-abfa-87061b6e0ee5.png)Windows 7用户管理界面'
- en: Cracking remote Windows machine passwords
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解远程Windows机器密码
- en: In this recipe, we will crack a remote Windows machine password. In this case,
    we will assume we have already launched the attack through Armitage and have taken
    the hashes we need. Please refer to [Chapter 4](9f678d15-2115-4e29-a75d-03dba65d3398.xhtml),
    *Finding Exploits in the Target* and the *Advanced attacks with Armitage* recipe
    if needed.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将破解远程Windows机器的密码。在本案例中，我们假设已经通过Armitage发起了攻击并收集了所需的哈希值。如果需要，请参考[第4章](9f678d15-2115-4e29-a75d-03dba65d3398.xhtml)，*查找目标中的漏洞*和*使用Armitage进行高级攻击*教程。
- en: Getting ready
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Kali machine is powered up
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Kali机器已开机
- en: You have started Armitage up and it's running
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已经启动了Armitage并且它正在运行
- en: You have collected the needed hashes already from the remote machine
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已经从远程机器收集了所需的哈希值
- en: How to do it...
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now break the password hashes of a Windows machine:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将破解Windows机器的密码哈希值：
- en: 'From the Armitage screen select Console| Credentials. Notice from our prior
    attack, we have the hashes that we pulled off the Windows XP machine:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Armitage界面中选择控制台|凭证。请注意，在我们之前的攻击中，我们已经获取了从Windows XP机器上提取的哈希值：
- en: '![](assets/be6142ec-f8bd-46d4-bc03-bccd33d710c2.png)Armitage screen'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/be6142ec-f8bd-46d4-bc03-bccd33d710c2.png)Armitage界面'
- en: At the bottom select Crack Passwords.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在底部选择“破解密码”。
- en: 'From there you will be presented with an Option dialog. Scroll through it a
    bit and see the options that are available to you. Without making any changes
    click on Launch:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在那里，你将看到一个选项对话框。浏览一下，查看可用的选项。无需进行任何更改，直接点击“启动”：
- en: '![](assets/acd3ee1d-b805-4893-b710-b4fd7f449b99.png)Armitage implementation
    of John the Ripper'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/acd3ee1d-b805-4893-b710-b4fd7f449b99.png)Armitage中的John the Ripper实现'
- en: 'It will take a couple of minutes but ultimately you should be given the passwords
    as per the following figure:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这需要几分钟时间，但最终你应该会看到如下图所示的密码：
- en: '![](assets/9491986a-5c9c-4363-8613-a739537a014d.png)Armitage output screen'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9491986a-5c9c-4363-8613-a739537a014d.png)Armitage输出界面'
- en: There's more...
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: This attack uses John the Ripper to extract passwords. If for some reason it
    was not able to crack your passwords in this run, we will be talking about further
    advanced techniques and various options to make John the Ripper more effective.
    We will be exploring this further as we continue through this chapter.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这个攻击使用John the Ripper来提取密码。如果由于某些原因它未能在这次运行中破解密码，我们将讨论更高级的技术和各种选项，以提高John the
    Ripper的效果。我们将在继续本章时进一步探讨。
- en: Windows domain password attacks
  id: totrans-65
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Windows域密码攻击
- en: In this recipe, we will try to crack the active directory database from a Windows
    domain controller. We will assume you have already recovered the needed files,
    the system file, and `NTDS.dit` files from the computer through other exploitation
    means.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将尝试破解Windows域控制器上的活动目录数据库。我们假设你已经通过其他攻击手段从计算机上恢复了所需的文件，包括系统文件和`NTDS.dit`文件。
- en: Getting ready
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Kali machine is powered up
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Kali机器已开机
- en: Your domain controller has some sample accounts on it
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的域控制器上有一些示例账户
- en: You have collected the system file and the `NTDS.dit` files through other means
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已经通过其他方式收集了系统文件和`NTDS.dit`文件
- en: How to do it...
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now recover passwords from a windows domain controller:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将从Windows域控制器恢复密码：
- en: Open up a terminal by clicking on the terminal icon. ![](assets/284e924e-3ef3-46fd-9602-871f91ea344a.png)
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击终端图标打开终端。 ![](assets/284e924e-3ef3-46fd-9602-871f91ea344a.png)
- en: We need to install a couple of packages to assist us with the cracking of the **Active
    Directory** (**AD**) Domain. Specifically, these are `libexedb` and `ntdsxtract`.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们需要安装一些软件包来帮助我们破解 **Active Directory**（**AD**）域。具体来说，这些包是 `libexedb` 和 `ntdsxtract`。
- en: If you do not already have a logon to GitHub, open your browser and go to `www.github.com`
    and register as a user.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你还没有 GitHub 登录，打开浏览器并访问 `www.github.com` 注册为用户。
- en: 'To download `libexedb` enter the following commands:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要下载 `libexedb`，请输入以下命令：
- en: '[PRE4]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'For more detailed instructions or issues on installation refer to the following
    site: [https://github.com/libyal/libesedb/wiki/Building](https://github.com/libyal/libesedb/wiki/Building).'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 有关详细的安装说明或问题，请参考以下网站：[https://github.com/libyal/libesedb/wiki/Building](https://github.com/libyal/libesedb/wiki/Building)。
- en: 'Now let''s get the `ntdsxtract` scripts:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们获取 `ntdsxtract` 脚本：
- en: '[PRE5]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Let''s change to the directory that contains the files we obtained from the
    domain controller. In my case AD files, from here we will use `esedbexport` to
    parse and extract the `ntds.dit` file:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们切换到包含我们从域控制器获取的文件的目录。在我的例子中是 AD 文件，从这里我们将使用 `esedbexport` 来解析并提取 `ntds.dit`
    文件：
- en: '[PRE6]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](assets/da666ad6-6d22-4f53-8cf1-e7c1d60ca4ec.png)Directory listing'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/da666ad6-6d22-4f53-8cf1-e7c1d60ca4ec.png)目录列表'
- en: 'Now let''s see what files are in our new `actived.export` directory:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们看看新 `actived.export` 目录中的文件：
- en: '[PRE7]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](assets/8142a71f-5da5-41d8-9282-1f8a4b3ba31c.png)Directory listing'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/8142a71f-5da5-41d8-9282-1f8a4b3ba31c.png)目录列表'
- en: 'Now we can extract the hashes and other data output tables that we can then
    use with John the Ripper:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们可以提取哈希值和其他数据输出表格，然后可以将其与 John the Ripper 一起使用：
- en: '[PRE8]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](assets/fc5a00be-3df6-48eb-9969-9ca38a4c4331.png)HASH extraction'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/fc5a00be-3df6-48eb-9969-9ca38a4c4331.png)哈希值提取'
- en: 'Now if we take a look in our `temp` directory we will see several files including
    the two output files that we specified as `lm.out` and `nt.out`:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，如果我们查看 `temp` 目录，我们将看到几个文件，包括我们指定的两个输出文件 `lm.out` 和 `nt.out`：
- en: '[PRE9]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](assets/d5b8ddbd-9fbe-424d-9c5a-e137f1d33f6c.png)Directory listing'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d5b8ddbd-9fbe-424d-9c5a-e137f1d33f6c.png)目录列表'
- en: 'Now let''s get ready to use `john`. One of the first things we need to do is
    make sure the `rockyou` password file is unzipped. Then we will run `john` and
    see the output:'
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们准备好使用 `john`。我们需要做的第一件事是确保 `rockyou` 密码文件已解压。然后我们将运行 `john` 并查看输出：
- en: '[PRE10]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](assets/51b8abf8-d785-4fe1-856f-2381ed5cc8bc.png)Output of cracked passwordsTry
    running `john` with the following command line switch with the'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/51b8abf8-d785-4fe1-856f-2381ed5cc8bc.png)破解密码输出尝试使用以下命令行开关运行 `john`'
- en: '`--format=LM` and using the `lm.out` file.'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: '`--format=LM` 并使用 `lm.out` 文件。'
- en: Cracking local Linux password hashes
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解本地 Linux 密码哈希
- en: In this recipe, we will crack Linux passwords using John the Ripper.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将使用 John the Ripper 破解 Linux 密码。
- en: In this recipe, we will also simulate booting off a CD-ROM in order to crack
    the passwords using John the Ripper.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们还将模拟从 CD-ROM 启动，以便使用 John the Ripper 破解密码。
- en: Getting ready
  id: totrans-101
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下先决条件：
- en: Your Kali machine is powered up
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Kali 机器已启动
- en: You have some sample users and passwords setup on your Linux machine
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Linux 机器上设置了一些示例用户和密码
- en: How to do it...
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now crack Linux password with John the Ripper:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用 John the Ripper 破解 Linux 密码：
- en: 'With your Windows machine off start by going into VirtualBox, clicking on the
    Linux VM, and click on Settings:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的 Windows 机器关闭时，首先进入 VirtualBox，点击 Linux 虚拟机，然后点击设置：
- en: '![](assets/3875a895-0df2-4b57-94ab-1e2dc23321e2.png)VirtualBox virtual machine
    screen'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3875a895-0df2-4b57-94ab-1e2dc23321e2.png)VirtualBox 虚拟机屏幕'
- en: 'From the settings menu click Storage.Click on the CD-ROM drive and choose the
    Kali ISO that you recently downloaded. Then click OK:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从设置菜单中点击存储。点击 CD-ROM 驱动器并选择你最近下载的 Kali ISO 文件。然后点击确定：
- en: '![](assets/bf64376b-59b5-4e04-877e-7b4b9d03a476.png)VirtualBox virtual machine
    storage settings'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/bf64376b-59b5-4e04-877e-7b4b9d03a476.png)VirtualBox 虚拟机存储设置'
- en: Now start your Linux VM and it should automatically load the Kali CD. From the
    main menu select Live (forensic mode).
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在启动你的 Linux 虚拟机，它应该会自动加载 Kali CD。在主菜单中选择 Live（取证模式）。
- en: Watch the screen carefully depending on what operating system you are working
    with, you may be asked to boot off the CD. ![](assets/e7dab174-ec0e-4cac-9a97-3852a974443b.png)Kali
    boot screen
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 认真观察屏幕，根据你使用的操作系统，可能会要求你从 CD 启动。 ![](assets/e7dab174-ec0e-4cac-9a97-3852a974443b.png)Kali
    启动屏幕
- en: 'Let''s use places to find our Linux volume: Click Places | Computer| + Other
    Locations and double-click on our Linux volume. You can then close places window:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们使用以下方法查找 Linux 卷：点击“位置”|“计算机”|“+ 其他位置”，然后双击我们的 Linux 卷。接着可以关闭“位置”窗口：
- en: '![](assets/7f90bf8b-4de3-4757-ac04-6e6716295cee.png)Kali places screen'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/7f90bf8b-4de3-4757-ac04-6e6716295cee.png)Kali 屏幕'
- en: Now open your terminal screen. ![](assets/7d490293-ac82-4e19-b3cf-10e92c3297d2.png)
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在打开你的终端屏幕。 ![](assets/7d490293-ac82-4e19-b3cf-10e92c3297d2.png)
- en: 'You must change to the directory of your mounted Linux volume. Your ID of the
    drive will be different from mine but follow the following steps to find it:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你必须切换到挂载的 Linux 卷目录。你的驱动器 ID 会与我的不同，但请按照以下步骤查找它：
- en: '[PRE11]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'From the listed directory contents you will probably just have the one drive
    - `cd` into that drive directory:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列出的目录内容来看，你可能只有一个驱动器 - `cd` 进入该驱动器目录：
- en: '![](assets/53a13360-bbdd-4f5b-82b8-27f3143f1e65.png)Directory listing'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/53a13360-bbdd-4f5b-82b8-27f3143f1e65.png)目录列表'
- en: 'Now let''s use the `shadow` file and John the Ripper to try and crack the passwords.
    We are going to use John the Ripper with default settings. You will notice from
    the output that we have cracked a few passwords:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们使用 `shadow` 文件和 John the Ripper 尝试破解密码。我们将使用 John the Ripper 的默认设置。你会从输出中看到我们破解了一些密码：
- en: '[PRE12]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](assets/0fc42544-15ff-4adb-b4dd-1d61125363c5.png)John the Ripper output
    screen'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/0fc42544-15ff-4adb-b4dd-1d61125363c5.png)John the Ripper 输出屏幕'
- en: There's more...
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Although we did this attack locally against the `shadow` file, the attack is
    the exact same if done remotely, you just need to get the `shadow` file from the
    Linux machine through an exploit.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管我们是在本地对 `shadow` 文件进行攻击，但如果是远程攻击，过程是完全相同的，只需通过漏洞从 Linux 机器获取 `shadow` 文件即可。
- en: Cracking password hashes with a wordlist
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用字典文件破解密码哈希
- en: In this recipe, we will crack hashes using John the Ripper and the password
    lists. We will also work with a local `shadow` file from a Linux machine and we
    will try to recover passwords based off wordlists.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将使用 John the Ripper 和密码列表破解哈希值。我们还将使用来自 Linux 机器的本地 `shadow` 文件，并尝试通过字典列表恢复密码。
- en: Getting ready
  id: totrans-127
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下先决条件：
- en: Your Kali machine is powered up
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Kali 机器已经开机
- en: You have some sample users and passwords setup on your Linux machine
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已经在 Linux 机器上设置了一些示例用户和密码
- en: You copied the `shadow` file to your Kali `root` directory
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已将 `shadow` 文件复制到 Kali 的 `root` 目录
- en: How to do it...
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now attempt to crack passwords using a pre-defined wordlist:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将尝试使用预定义的字典文件破解密码：
- en: 'Verify you have the `shadow` file copied in the `root` directory:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你已经将 `shadow` 文件复制到 `root` 目录：
- en: '![](assets/fd16c746-c746-43f3-9ec9-b4a686ca2919.png)Directory listing'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/fd16c746-c746-43f3-9ec9-b4a686ca2919.png)目录列表'
- en: 'Let''s extract the `rockyou` password list:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们提取 `rockyou` 密码列表：
- en: '[PRE13]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'Let''s use John the Ripper with the password file that we just extracted against
    the `shadow` file. You will note that we have some passwords that we recovered
    that appear like very simple passwords:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们使用刚才提取的密码文件和 `shadow` 文件来使用 John the Ripper。你会注意到我们恢复了一些看起来非常简单的密码：
- en: '[PRE14]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '![](assets/d490aa72-f2df-4eef-a535-0e98f3ecbc8b.png)John the Ripper output
    screenNote that all the passwords we recovered were not actually dictionary words
    but some were just very simple combinations.'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d490aa72-f2df-4eef-a535-0e98f3ecbc8b.png)John the Ripper 输出屏幕 注意，我们恢复的所有密码实际上并不是字典中的单词，而是一些非常简单的组合。'
- en: Brute force password hashes
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用暴力破解密码哈希
- en: In this recipe, we will crack hashes using John the Ripper in brute force mode.
    We will work with a local `shadow` file from a Linux machine and we will try to
    recover passwords by brute forcing them.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将使用 John the Ripper 的暴力破解模式来破解哈希值。我们将使用来自 Linux 机器的本地 `shadow` 文件，并尝试通过暴力破解恢复密码。
- en: Getting ready
  id: totrans-143
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下先决条件：
- en: Your Kali machine is powered up
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Kali 机器已经开机
- en: You have some sample users and passwords setup on your Linux machine add some
    more and make a couple accounts with random 4 character passwords.
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已经在 Linux 机器上设置了一些示例用户和密码，现在请再添加一些，并创建几个随机 4 个字符的密码账户。
- en: You copied the `shadow` file to your Kali `root` directory
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你已将 `shadow` 文件复制到 Kali 的 `root` 目录
- en: How to do it...
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will use a brute force method of attack on password hashes:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用暴力破解方法攻击密码哈希：
- en: 'Verify you have the `shadow` file copied in the `root` directory:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确认你已经将 `shadow` 文件复制到 `root` 目录：
- en: '![](assets/88a8d1a9-3809-471b-9676-ab876245515c.png)Directory listing'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/88a8d1a9-3809-471b-9676-ab876245515c.png)目录列表'
- en: 'To use a brute force attack against our `shadow` file we can use the following
    commands. This command will take a very long time to crack any passwords and is
    considered as a last resort:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要对我们的`shadow`文件进行暴力破解，我们可以使用以下命令。此命令将花费很长时间来破解任何密码，因此它被视为最后的手段：
- en: '[PRE15]'
  id: totrans-153
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![](assets/74e13169-5d53-40f5-919b-ab19512b5691.png)John the Ripper progress
    screenYou can press the spacebar at any time to get an update as to how the password
    cracking is going. Also, there are several options after the `-incremental` to
    speed mine along, as I knew my passwords were all lowercase letters, I used `-incremental:lower`.'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/74e13169-5d53-40f5-919b-ab19512b5691.png)John the Ripper进度屏幕你可以随时按空格键，查看密码破解的进展。此外，`-incremental`后还有几个选项可以加速破解过程，由于我知道我的密码全是小写字母，所以我使用了`-incremental:lower`。'
- en: 'After several hours I was able to obtain the passwords for Amy and Sheldon:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 几小时后，我成功获得了Amy和Sheldon的密码：
- en: '![](assets/b31d279a-4435-45fa-b3f1-b4c62bd82b6b.png)John the Ripper output
    screen'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b31d279a-4435-45fa-b3f1-b4c62bd82b6b.png)John the Ripper输出屏幕'
- en: Cracking FTP passwords
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解FTP密码
- en: In this recipe, we will try and crack FTP passwords.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个操作中，我们将尝试破解FTP密码。
- en: Cracking FTP passwords is a great way to both access the system through FTP
    and get the username and passwords against other systems and services. For this
    recipe, we will use hydra to test the system.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 破解FTP密码是访问系统通过FTP的一个好方法，同时可以获取其他系统和服务的用户名和密码。对于这个操作，我们将使用hydra来测试系统。
- en: Getting ready
  id: totrans-160
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Kali machine is powered up
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Kali机器已经启动
- en: Your Metasploitable machine is powered up
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Metasploitable机器已经启动
- en: Validate the IP address of the Metasploitable machine
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证Metasploitable机器的IP地址
- en: How to do it...
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s attempt to crack an FTP server passwords:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 我们尝试破解FTP服务器的密码：
- en: 'Let''s start by logging into the Metasploitable machine and we will create
    a couple of users to test against:'
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们先登录到Metasploitable机器，并创建几个用户进行测试：
- en: '[PRE16]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Validate the IP address of the Metasploitable machine – in my case it is `192.168.56.104`.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证Metasploitable机器的IP地址——在我的情况下是`192.168.56.104`。
- en: You have a username but not a password
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你有一个用户名，但没有密码
- en: 'In this section we will proceed having a known username but an unknown password:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将使用已知用户名，但密码未知的情况：
- en: Open a terminal window in Kali by clicking the icon. ![](assets/379d3bef-ac2c-4a60-9d63-14a3577c8079.png)
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali中打开一个终端窗口，点击图标。![](assets/379d3bef-ac2c-4a60-9d63-14a3577c8079.png)
- en: 'We will use a hydra to hunt for passwords using a wordlist. You will note that
    quite quickly we get a hit for the user we added:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用hydra通过密码字典来寻找密码。你会发现，很快我们就得到了为我们添加的用户找到的密码：
- en: '[PRE17]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '![](assets/0299755a-f892-48f5-9bd8-1359d4d63315.png)Hydra output screen'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/0299755a-f892-48f5-9bd8-1359d4d63315.png)Hydra输出屏幕'
- en: You have a userlist
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 你有一个用户列表
- en: 'In this recipe we will used a defined list of actual or potential usernames
    that exist on the server:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个操作中，我们使用了一个已定义的实际或潜在用户名列表，这些用户名存在于服务器上：
- en: Open a terminal window in Kali by clicking the icon. ![](assets/eadb7caf-999e-4c48-a805-b2dc2641e46b.png)
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali中打开一个终端窗口，点击图标。![](assets/eadb7caf-999e-4c48-a805-b2dc2641e46b.png)
- en: 'We will use a hydra to hunt for passwords using a wordlist along with a predefined
    set of usernames. Let''s build our name list:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用hydra通过密码字典和预定义的用户名集来寻找密码。让我们来构建我们的用户名列表：
- en: '[PRE18]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Now let''s run hydra using our username list and wordlist. You will notice
    that this does take some time but ultimately you will get the passwords:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们使用我们的用户名列表和密码字典运行hydra。你会注意到这确实需要一些时间，但最终你会得到密码：
- en: '[PRE19]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '![](assets/7a1fbc4f-3018-438e-871f-224358c84fa1.png)Hydra output screen'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/7a1fbc4f-3018-438e-871f-224358c84fa1.png)Hydra输出屏幕'
- en: Cracking Telnet and SSH passwords
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解Telnet和SSH密码
- en: In this recipe, we will try and crack Telnet and SSH passwords.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个操作中，我们将尝试破解Telnet和SSH密码。
- en: Cracking Telnet and SSH passwords can be used against systems as well as infrastructures.
    With this, you have the ability to try and penetrate into switches, firewalls,
    routers, pretty much any network equipment and most often Linux machines will
    have this method of access enabled.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 破解Telnet和SSH密码不仅可以用于系统，还可以用于基础设施。通过这种方法，你可以尝试渗透交换机、防火墙、路由器，几乎所有网络设备，而且大多数Linux机器都会启用这种访问方式。
- en: Getting ready
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Kali machine is powered up
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Kali机器已经启动
- en: Your Metasploitable machine is powered up
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Metasploitable机器已经启动
- en: Validate the IP address of the Metasploitable machine
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证 Metasploitable 机器的 IP 地址
- en: How to do it...
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will attempt to crack Telnet and SSH passwords:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将尝试破解 Telnet 和 SSH 密码：
- en: 'Let''s start by logging into the Metasploitable machine and we will create
    a couple of users to test against:'
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们首先登录到 Metasploitable 机器，创建几个用户来进行测试：
- en: '[PRE20]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Validate the IP address of the Metasploitable machine—in my case it is `192.168.56.104`.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证 Metasploitable 机器的 IP 地址——在我的案例中是 `192.168.56.104`。
- en: Cracking Telnet passwords with a userlist
  id: totrans-197
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用用户名列表破解 Telnet 密码
- en: 'In this recipe we will try and crack telnet passwords based on known or potential
    username list:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将尝试根据已知或潜在的用户名列表破解 Telnet 密码：
- en: Open a terminal window in Kali by clicking the icon. ![](assets/512520b2-9a1d-4779-8d1a-f2fe1843e6f2.png)
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击图标在 Kali 中打开终端窗口。 ![](assets/512520b2-9a1d-4779-8d1a-f2fe1843e6f2.png)
- en: 'We will use a hydra to hunt for passwords using a wordlist along with a predefined
    set of usernames. Let''s build our name list:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用 Hydra 来通过单词列表和预定义的用户名集合进行密码破解。让我们来构建用户名列表：
- en: '[PRE21]'
  id: totrans-201
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Now let''s run hydra using our username list and wordlist. You will notice
    that this does take some time but ultimately you will get the passwords:'
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们使用我们的用户名列表和单词列表运行 Hydra。你会注意到这需要一些时间，但最终你会获得密码：
- en: '[PRE22]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![](assets/bd6894f5-4547-47f9-8aa6-ddd774bf1bce.png)Hydra output screenTelnet
    can take a very long time and provide unreliable results. However, because of
    its prevalence in legacy networks, it''s a great method of attack.'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/bd6894f5-4547-47f9-8aa6-ddd774bf1bce.png)Hydra 输出屏幕，Telnet 可能需要很长时间并且结果不可靠。然而，由于它在遗留网络中的普遍性，它仍然是一种很好的攻击方法。'
- en: Cracking SSH password with a known user
  id: totrans-205
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用已知用户名破解 SSH 密码
- en: 'In this recipe we will crack SSH passwords with a know username:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将使用已知用户名破解 SSH 密码：
- en: Open a terminal window in Kali by clicking the icon. ![](assets/a93ff871-5615-4b56-bd6b-ac4025b5fdcb.png)
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击图标在 Kali 中打开终端窗口。 ![](assets/a93ff871-5615-4b56-bd6b-ac4025b5fdcb.png)
- en: 'Now let''s run hydra using our known username and wordlist. You will notice
    that this does take some time but ultimately you will get the passwords:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们使用已知用户名和单词列表运行 Hydra。你会注意到这需要一些时间，但最终你会获得密码：
- en: '[PRE23]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](assets/7a020347-c3b2-43e0-8880-77b44d7de26a.png)Hydra output screenThe
    `-t 4` slows the amount of processes down so it does not overwhelm or trigger
    protections against some SSL instances.'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/7a020347-c3b2-43e0-8880-77b44d7de26a.png)Hydra 输出屏幕，`-t 4` 会减慢进程的数量，以防止其过载或触发某些
    SSL 实例的保护机制。'
- en: Cracking RDP and VNC passwords
  id: totrans-211
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解 RDP 和 VNC 密码
- en: In this recipe, we will try and crack RDP and VNC passwords on our Windows machine.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将尝试破解 Windows 机器上的 RDP 和 VNC 密码。
- en: Cracking into either RDP or VNC can be a very powerful method to access any
    system. While RDP is restricted to Windows systems VNC is a cross platform remote
    control utility covering Windows, Mac, and Linux. You can use your previous scanning
    to look for open VNC ports even on Windows machines.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 破解 RDP 或 VNC 密码是一种非常强大的方式来访问任何系统。虽然 RDP 仅限于 Windows 系统，但 VNC 是一个跨平台的远程控制工具，支持
    Windows、Mac 和 Linux。你可以使用之前的扫描结果查找 Windows 机器上开放的 VNC 端口。
- en: Getting ready
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Your Kali machine is powered up
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Kali 机器已经开机
- en: Your Windows machine is powered up on the NAT network
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的 Windows 机器已经开机并连接到 NAT 网络
- en: Validate internet connectivity
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证互联网连接
- en: You have some valid users on the system with RDP enabled for them
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统中有一些有效用户并且启用了 RDP
- en: How to do it...
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now attempt to crack remote access passwords:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在将尝试破解远程访问密码：
- en: Let's start by logging into the Windows machine and validate that we have some
    accounts ready and also to get VNC downloaded and installed as well.
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从登录 Windows 机器开始，验证是否有可用账户，并下载和安装 VNC。
- en: Open internet explorer and browse to `www.uvnc.com`. Click Downloads at the
    top. Select the latest version of the software and download it.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Internet Explorer 浏览器并访问 `www.uvnc.com`。点击顶部的 Downloads，选择软件的最新版本并下载。
- en: 'Install `UltraVNC` by double-clicking the icon from the download location:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过双击下载位置的图标来安装 `UltraVNC`：
- en: '![](assets/12fbd7ea-46de-498d-81a0-5617a72db849.png)Directory listing'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/12fbd7ea-46de-498d-81a0-5617a72db849.png)目录列表'
- en: When asked, click Run and select Yes when the UAC dialog box comes up. Select
    the appropriate language and click the radio button to accept the agreement and
    click Next. Click Next on the release notes info. Validate the installation directory
    and click Next. Validate the components being installed—Full Installationand verify
    if the UltraVNC Server is selected then click Next. At the shortcut name screen,
    accept the default and select Next.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当出现提示时，点击运行，并在UAC对话框出现时选择“是”。选择适当的语言，点击单选按钮接受协议，然后点击下一步。在发布说明信息屏幕上点击下一步。验证安装目录，然后点击下一步。验证正在安装的组件——完全安装，并确认是否已选择UltraVNC
    Server，然后点击下一步。在快捷方式名称屏幕上，接受默认设置并点击下一步。
- en: 'At the select additional tasks screen selects all check boxes and click Next:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择附加任务的屏幕上，选择所有复选框并点击下一步：
- en: '![](assets/e553ace3-93ea-4599-9e15-2ce2ecb88399.png)'
  id: totrans-228
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/e553ace3-93ea-4599-9e15-2ce2ecb88399.png)'
- en: Finally, go ahead and click Install.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，点击安装。
- en: Once done, click through the remainder of the screens as needed.
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，根据需要点击完成剩余的屏幕。
- en: Shut down your Windows machine–switch it back to host only–start the Windows
    VM.
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭你的Windows机器—将其切换回仅主机模式—启动Windows虚拟机。
- en: 'For the purpose of this test, we will assume you know how to add users through
    the control panel using the user accounts tab. Add two users:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了进行此测试，我们假设你知道如何通过控制面板的用户帐户选项卡添加用户。添加两个用户：
- en: Username - `UserA`, password - `franks`
  id: totrans-233
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名 - `UserA`，密码 - `franks`
- en: Username - `UserB`, password - `beans`
  id: totrans-234
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名 - `UserB`，密码 - `beans`
- en: 'Make sure if you set these users up as standard users and not admins that you
    allow them to access the RDP services. To do this on Windows 7, right-click on
    My Computer and then click on Properties:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你设置这些用户为标准用户而非管理员，请确保允许他们访问RDP服务。要在Windows 7上执行此操作，右键点击我的电脑，然后点击属性：
- en: '![](assets/28b7f7d0-7a84-4d1c-bcb1-972f57fd6fd3.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/28b7f7d0-7a84-4d1c-bcb1-972f57fd6fd3.png)'
- en: In the upper- left hand corner, click on Remote settings.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左上角，点击远程设置。
- en: 'On the system properties screen, please make sure that you have the radio button
    selected to Allow connections from computers running any version of Remote Desktop
    (less Secure) selected. Then click on Select Users... :'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在系统属性屏幕上，请确保已选择允许来自任何版本的远程桌面（较不安全）计算机的连接。然后点击选择用户...：
- en: '![](assets/d2ad342d-f7f3-45f9-a91a-010eb7aa9f28.png)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/d2ad342d-f7f3-45f9-a91a-010eb7aa9f28.png)'
- en: 'From the select user dialog, add `UserA` and `UserB` and click OK:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从选择用户对话框中，添加`UserA`和`UserB`并点击确定：
- en: '![](assets/2d8a5c0f-2053-41b2-9e6f-06c147f5b0e7.png)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/2d8a5c0f-2053-41b2-9e6f-06c147f5b0e7.png)'
- en: Close out all the remaining dialog boxes.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭所有剩余的对话框。
- en: Validate the IP of your Windows machine; for mine, I am using `192.168.56.105`.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证你的Windows机器的IP地址；对我来说，我使用的是`192.168.56.105`。
- en: Open a terminal window in Kali by clicking the icon. ![](assets/adfdb39a-2c7b-4fac-a887-d1e3d8cf60fb.png)
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali中点击图标打开终端窗口。 ![](assets/adfdb39a-2c7b-4fac-a887-d1e3d8cf60fb.png)
- en: 'Now let''s run hydra using our known username and wordlist. You will notice
    that this does take some time but ultimately you will get the passwords:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们使用已知的用户名和词典文件运行hydra。你会注意到这确实需要一些时间，但最终你会得到密码：
- en: '[PRE24]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '![](assets/e5ab44b9-b9e3-4b68-b15e-c61b5cf0255e.png)Hydra output screen'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/e5ab44b9-b9e3-4b68-b15e-c61b5cf0255e.png)Hydra输出屏幕'
- en: 'To run the same against VNC, simply replace RDP with VNC:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要对VNC执行相同操作，只需将RDP替换为VNC：
- en: '[PRE25]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Cracking ZIP file passwords
  id: totrans-250
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 破解ZIP文件密码
- en: In this recipe, we will try and crack a ZIP file password.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将尝试破解一个ZIP文件的密码。
- en: Sometimes, you will come across ZIP files that have a password on them. Normally,
    you can easily crack these passwords with a simple dictionary attack.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你会遇到带有密码的ZIP文件。通常，你可以通过简单的字典攻击轻松破解这些密码。
- en: Getting ready
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下先决条件：
- en: Your Kali machine is powered up
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你的Kali机器已开机
- en: How to do it...
  id: totrans-256
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now crack a ZIP files password and recover it''s contents:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将破解ZIP文件的密码并恢复其内容：
- en: Open a terminal window in Kali by clicking the icon. ![](assets/656b7853-2057-4554-ae27-7cc6b88046e5.png)
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali中点击图标打开终端窗口。 ![](assets/656b7853-2057-4554-ae27-7cc6b88046e5.png)
- en: 'Enter the following commands to create an encrypted ZIP file:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下命令来创建加密的ZIP文件：
- en: '[PRE26]'
  id: totrans-260
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: When asked for a password, let's use a simple one such as `password`.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当要求输入密码时，我们可以使用一个简单的密码，例如`password`。
- en: 'We will use our `rockyou.txt` dictionary file from the past recipes along with
    `fcrackzip`:'
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将使用来自以前教程的`rockyou.txt`字典文件与`fcrackzip`：
- en: '[PRE27]'
  id: totrans-263
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: '![](assets/17644e3c-ea01-4966-b6b1-7697f389a0c9.png)fcrackzip output'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/17644e3c-ea01-4966-b6b1-7697f389a0c9.png)fcrackzip输出'
