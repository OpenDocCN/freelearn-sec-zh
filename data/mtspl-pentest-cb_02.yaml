- en: Chapter 2. Information Gathering and Scanning
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第2章。信息收集和扫描
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Passive information gathering 1.0 - the traditional way
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被动信息收集1.0-传统方式
- en: Passive information gathering 2.0 - the next level
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被动信息收集2.0-下一个级别
- en: Port scanning - the Nmap way
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口扫描-Nmap方式
- en: Exploring auxiliary modules for scanning
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 探索用于扫描的辅助模块
- en: Target service scanning with auxiliary modules
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用辅助模块进行目标服务扫描
- en: Vulnerability scanning with Nessus
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nessus进行漏洞扫描
- en: Scanning with NeXpose
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用NeXpose进行扫描
- en: Sharing information with the Dradis framework
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Dradis框架共享信息
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Information gathering is the first basic step towards penetration testing. This
    step is carried out to find out as much information about the target machine as
    possible. The more information we have, the better will be our chances of exploiting
    the target. During the information gathering phase, our main focus is to collect
    facts about the target machine, such as the IP address, available services, open
    ports. This information plays a vital role in the process of penetration testing.
    There are basically three types of techniques used in information gathering.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 信息收集是渗透测试的第一步基本步骤。这一步是为了尽可能多地了解目标机器的信息。我们拥有的信息越多，就越有可能利用目标。在信息收集阶段，我们的主要重点是收集有关目标机器的事实，比如IP地址、可用服务、开放端口。这些信息在渗透测试过程中起着至关重要的作用。信息收集中基本上使用了三种类型的技术。
- en: Passive information gathering
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被动信息收集
- en: Active information gathering
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主动信息收集
- en: Social engineering
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社会工程学
- en: 'Let us take a quick look at these processes:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速了解这些过程：
- en: '**Passive information gathering:** This technique is used to gain information
    about the target without having any physical connectivity or access to it. This
    means that we use other sources to gain information about the target like using
    the `whois` query, `Nslookup`, and so on. Suppose our target is an online web
    application then a simple `whois` lookup can provide us a lot of information about
    the web application, like its IP address, its domains, and sub-domains, location
    of server, hosting server, and so on. This information can be very useful during
    penetration testing as it can widen our track of exploiting the target.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 被动信息收集：这种技术用于在没有任何物理连接或访问的情况下获取有关目标的信息。这意味着我们使用其他来源来获取有关目标的信息，比如使用`whois`查询、`Nslookup`等。假设我们的目标是一个在线Web应用程序，那么简单的`whois`查询可以为我们提供大量关于Web应用程序的信息，比如其IP地址、域和子域、服务器位置、托管服务器等。这些信息在渗透测试期间可能非常有用，因为它可以扩大我们利用目标的轨迹。
- en: '**Active information gathering:** In this technique, a logical connection is
    set up with the target in order to gain information. This technique provides us
    with the next level of information which can directly supplement us in understanding
    the target security. Port scanning; the target is the most widely used active
    scanning technique in which we focus on the open ports and available services
    running on the target.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主动信息收集：在这种技术中，建立与目标的逻辑连接以获取信息。这种技术为我们提供了下一个级别的信息，可以直接帮助我们了解目标的安全性。端口扫描；目标是最广泛使用的主动扫描技术，我们关注的是目标上运行的开放端口和可用服务。
- en: '**Social engineering:** This type of information gathering is similar to passive
    information gathering, but relies on human error and the information leaked out
    in the form of printouts, telephone conversations, or incorrect e-mail Ids, and
    so on. The techniques for utilizing this method are numerous and the ethos of
    information gathering is very different, hence, social engineering is a category
    in-itself. For example, hackers register domain-names that sound similar with
    spelling mistakes, and set up a mail server to receive such erroneous e-mails.
    Such domains are known as Doppelganger Domains, that is, the evil twin.'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社会工程学：这种信息收集类似于被动信息收集，但依赖于人为错误和以打印输出、电话对话或不正确的电子邮件ID等形式泄露的信息。利用这种方法的技术是多种多样的，信息收集的伦理非常不同，因此，社会工程学是一个独立的类别。例如，黑客注册拼写错误相似的域名，并设置邮件服务器以接收这些错误的电子邮件。这样的域名被称为Doppelganger
    Domains，即邪恶的双胞胎。
- en: In this chapter, we will analyze the various passive and active techniques of
    information gathering in detail. In the starting two recipes, we will analyze
    the most commonly used and most commonly neglected techniques of passive information
    gathering, and then in later recipes we will focus on gaining information through
    port scanning. Metasploit has several built in scanning capabilities, as well
    as some third-party tools integrated with it to further enhance the process of
    port scanning. We will analyze both the inbuilt scanners, as well as some of the
    popular third-party scanners which work over the Metasploit framework. Let us
    move on to the recipes and start our process of gaining information about our
    target.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将详细分析各种被动和主动信息收集技术。在开始的两个步骤中，我们将分析被动信息收集中最常用和最常被忽视的技术，然后在后续步骤中，我们将专注于通过端口扫描获取信息。Metasploit具有几种内置的扫描功能，以及一些集成到其中以进一步增强端口扫描过程的第三方工具。我们将分析内置扫描仪以及一些流行的第三方扫描仪，这些扫描仪可以在Metasploit框架上运行。让我们继续进行步骤，并开始获取有关我们目标的信息的过程。
- en: Passive information gathering 1.0 - the traditional way
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动信息收集1.0-传统方式
- en: Let us deal with some of the most commonly used techniques for information gathering.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来处理一些最常用的信息收集技术。
- en: Getting ready
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: '`whois, Dig`, and `Nslookup` are the three most basic and simplest steps for
    gaining initial information about our target. As both are passive techniques of
    gaining information, hence no connectivity with the target is required. These
    commands can be executed directly from the terminal of `BackTrack`. So, launch
    the terminal window and proceed further.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '`whois`，`Dig`和`Nslookup`是获取有关我们目标的初始信息的三个最基本和最简单的步骤。由于这两者都是 passiv技术，因此不需要与目标进行连接。这些命令可以直接从`BackTrack`的终端执行。因此，打开终端窗口并继续进行。'
- en: How to do it...
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: We will start our information gathering with a simple `whois` lookup. `whois`
    is an in-built command in `BackTrack` so we can directly invoke it from our terminal.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从简单的`whois`查找开始我们的信息收集。`whois`是`BackTrack`中的内置命令，因此我们可以直接从终端调用它。
- en: Let us quickly perform a `whois` lookup on [www.packtpub.com](http://www.packtpub.com)
    and analyze the output. The output can be big, so here we will only focus on relevant
    points of the output.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速对[www.packtpub.com](http://www.packtpub.com)进行`whois`查找并分析输出。输出可能很大，所以这里我们只关注输出的相关要点。
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Here, we can see that a simple `whois` lookup has revealed some information
    about the target website. The information includes the DNS server, creation date,
    expiration date, and so on. As this information has been gathered from a source
    other than the target, it is called a passive information gathering technique.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以看到简单的`whois`查找已经揭示了有关目标网站的一些信息。信息包括DNS服务器、创建日期、到期日期等。由于此信息是从目标以外的来源收集的，因此被称为被动信息收集技术。
- en: The other way of gaining information passively can be by querying the DNS records.
    The most common technique is using the `dig` command, which comes by default in
    Unix machines. Let us analyze a `dig` query on [www.packtpub.com.](http://www.packtpub.com.)
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 被动获取信息的另一种方式可以通过查询DNS记录。最常见的技术是使用Unix机器中默认的`dig`命令。让我们分析一下对[www.packtpub.com](http://www.packtpub.com)的`dig`查询。
- en: '[PRE1]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Querying the DNS records has revealed some more information about the target.
    `dig` can be used to resolve the names of hosts into IP addresses, and in reverse,
    resolve IP addresses into names. In addition, `dig` can also be used to gather
    version information from name servers which may be used to aid in exploitation
    of the host. As we can see in the output, it is difficult to identify the primary
    DNS, or in some cases primary mail server or file hosting server, and so on. This
    is where `Nslookup` comes into the picture. `Nslookup` is almost as flexible as
    dig, but provides a simpler default method of identifying primary hosts, such
    as Mail and DNS servers.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 查询DNS记录已经揭示了有关目标的更多信息。`dig`可以用于将主机的名称解析为IP地址，反之亦然。此外，`dig`还可以用于从可能用于帮助利用主机的名称服务器中收集版本信息。正如我们在输出中所看到的，很难识别主DNS，或者在某些情况下是主邮件服务器或文件托管服务器等。这就是`Nslookup`出现的地方。`Nslookup`几乎和dig一样灵活，但提供了一个更简单的默认方法来识别主机，例如邮件和DNS服务器。
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '`Nslookup` has revealed further information about the target, such as its IP
    address, server IP, and so on. These passive techniques can reveal some interesting
    information about the target and can ease our way for penetration testing.'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '`Nslookup`已经揭示了有关目标的更多信息，例如其IP地址、服务器IP等。这些被动技术可以揭示有关目标的一些有趣信息，并可以为我们的渗透测试铺平道路。'
- en: How it works...
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: '`dig` can be used to find the **SPF** (Sender Policy Framework) records. SPF
    records are those records which define the domain''s mail sending policy, that
    is, which servers are responsible for sending mails on its behalf. Incorrect SPF
    records will always result in phishing / spam mails.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: '`dig`可以用来查找**SPF**（发件人策略框架）记录。 SPF记录是定义域的邮件发送策略的记录，即哪些服务器负责代表其发送邮件。不正确的SPF记录总会导致钓鱼/垃圾邮件。'
- en: SPF records are published as text format. SPF records are responsible for ensuring
    that the registered users of a particular domain or partners, of a particular
    domain, cannot be attacked by phishing mails. Information collected from the `dig`
    query can help us in determining such issues in our target.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: SPF记录以文本格式发布。 SPF记录负责确保特定域的注册用户或特定域的合作伙伴不会受到钓鱼邮件的攻击。从`dig`查询中收集的信息可以帮助我们确定目标中的此类问题。
- en: There's more...
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let us cover more stuff about passive information gathering.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更多地了解被动信息收集。
- en: Using third-party websites
  id: totrans-39
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用第三方网站
- en: We have used the in-built command to query about our target and gain information.
    There is an equally good technique of performing similar operations using websites,
    especially dedicated for such lookups. These websites can also provide information
    about the geographical location, contact number, admin e-mails, and so on.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经使用内置命令查询了有关我们目标的信息。还有一种同样好的技术，可以使用专门用于此类查找的网站，特别是提供有关地理位置、联系电话、管理员电子邮件等信息的网站。
- en: 'Some useful links are:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 一些有用的链接是：
- en: '[http://who.is](http://who.is)'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://who.is](http://who.is)'
- en: '[http://www.kloth.net](http://www.kloth.net)'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.kloth.net](http://www.kloth.net)'
- en: Passive information gathering 2.0 - the next level
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 被动信息收集2.0-下一个级别
- en: Every security professional is aware of the information gathering techniques
    discussed in the previous recipe. But there are some techniques which analysts
    neglect because of their reduced popularity and awareness, but they can produce
    results as good as the previous techniques. The techniques we will discuss here
    will involve a deeper analysis of our target, though we will still be using a
    passive technique. These techniques do not require the use of Metasploit, but
    since information gathering is an important field for penetration testing, we
    will discuss it here.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 每个安全专业人员都知道前面一篇文章中讨论的信息收集技术。但是有一些技术分析人员因其较低的流行度和认知度而忽视，但它们可以产生与前一技术一样好的结果。我们将在这里讨论的技术涉及对我们目标的更深入分析，尽管我们仍将使用被动技术。这些技术不需要使用Metasploit，但由于信息收集对于渗透测试是一个重要领域，因此我们将在这里讨论它。
- en: Getting ready
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We will understand three techniques here in this recipe:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将了解三种技术：
- en: '**Zone transfer:** This can be performed using the terminal.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**区域传输：** 这可以使用终端执行。'
- en: '**SMTP header:** For this technique, we will require an e-mail that is sent
    by the target to the penetration tester.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SMTP头部：** 对于这种技术，我们需要目标发送给渗透测试人员的电子邮件。'
- en: '**Google dork:** This is a simple, yet useful, technique of gaining information
    through a search engine.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Google dork：** 这是一种简单但有用的通过搜索引擎获取信息的技术。'
- en: Let us start with zone transfer.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从区域传输开始。
- en: How to do it...
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到...
- en: '**Zone Transfer** is a special method used by the DNS server to exchange authoritative
    records for a domain between multiple servers. This method is responsible for
    transferring bulk lists of domain information between primary and secondary servers.
    A misconfigured DNS server can respond to client query and provide information
    about the queried domain.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**区域传输**是DNS服务器用来在多个服务器之间交换域的权威记录的一种特殊方法。这种方法负责在主服务器和辅助服务器之间传输大量的域信息列表。配置错误的DNS服务器可以响应客户端查询并提供有关查询域的信息。'
- en: 'Consider the following example in which a query `dig @ns1.example.com example.com
    axfr` returns a list of IP addresses and their corresponding host names:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑以下示例，在该示例中，查询`dig @ns1.example.com example.com axfr`返回一个IP地址列表及其对应的主机名：
- en: '![How to do it...](img/7423_02_01.jpg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![如何做到...](img/7423_02_01.jpg)'
- en: This query has identified ten host names, out of which eight unique hosts belong
    to `example.com`. We can see that the host names are descriptive enough to give
    a clear understanding about the type of service that is running.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这个查询已经识别出十个主机名，其中有八个唯一的主机属于`example.com`。我们可以看到主机名足够描述性，可以清楚地了解正在运行的服务类型。
- en: Analyzing the SMTP header can be another potential source of collecting information
    about the target. It can provide us with information about the mail server, its
    IP address, version, and so on. The only drawback of this method is that we need
    an e-mail that is sent from the target location to analyze it. The following screenshot
    shows the part of the header of a mail sent from the target.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 分析SMTP头部可能是收集有关目标信息的另一个潜在来源。它可以为我们提供有关邮件服务器、其IP地址、版本等信息。这种方法的唯一缺点是我们需要一封从目标位置发送的电子邮件来进行分析。以下截图显示了从目标发送的邮件头部的一部分。
- en: '![How to do it...](img/7423_02_02.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![如何做到...](img/7423_02_02.jpg)'
- en: Careful analysis of the header shows that the IP address of the mail server
    is 83.166.169.248\. The mail server uses the ESMTP service and the user uses the
    IMAP service. This additional information can be very useful in further exploring
    the target.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 对头部的仔细分析显示邮件服务器的IP地址是83.166.169.248。邮件服务器使用ESMTP服务，用户使用IMAP服务。这些额外的信息在进一步探索目标时非常有用。
- en: The last technique is using **Google dorks.** This method can work only in some
    cases but it is worth giving it a try as you never know what secret information
    it can reveal. Many times Google crawlers reach certain files or documents that
    are stored on the target server for internal use, but due to internet access;
    the crawler indexes the document in the search results. In that case, we can look
    for such files by using some Google search tricks. The combination of **site**
    and **filetype** in search results can reveal some exciting stuff.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一种技术是使用**Google dorks**。这种方法只能在某些情况下起作用，但值得一试，因为你永远不知道它可能揭示的秘密信息。许多时候，Google爬虫会到达存储在目标服务器上供内部使用的某些文件或文档，但由于互联网访问，爬虫会将文档索引到搜索结果中。在这种情况下，我们可以使用一些Google搜索技巧来寻找这样的文件。在搜索结果中**site**和**filetype**的组合可以揭示一些令人兴奋的东西。
- en: 'For example, perform the following search queries in Google:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在Google中执行以下搜索查询：
- en: '`www.target .com filetype:xls`'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`www.target .com filetype:xls`'
- en: '`www.target.com filetype:pdf`'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`www.target.com filetype:pdf`'
- en: '`site:www.target.com filetype:db`'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`site:www.target.com filetype:db`'
- en: Similarly, we can try several different combinations to dig out results from
    Google search.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们可以尝试几种不同的组合来从Google搜索中挖掘结果。
- en: How it works...
  id: totrans-66
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `dig` query basically returns the data that is provided by the IP or domain
    owner while it is being registered. The zone transfer information is particularly
    provided to the DNS servers in order to build a proper mapping of registered domains.
    The `dig` query can help in fetching this information. The SMTP header is the
    original data body of an e-mail. Since it is the main data representation of e-mails,
    it contains lots of information about the sender of the e-mail.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '`dig`查询基本上返回在IP或域所有者注册时提供的数据。区域传输信息特别提供给DNS服务器，以便建立正确的注册域的映射。`dig`查询可以帮助获取这些信息。SMTP头部是电子邮件的原始数据主体。由于它是电子邮件的主要数据表示，它包含了关于发件人的大量信息。 '
- en: Google dorks are nothing but the search results of various files that the Google
    crawler indexes. Once the file has been indexed in a Google search, it can be
    viewed by using some specific search types.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: Google dorks只是Google爬虫索引的各种文件的搜索结果。一旦文件在Google搜索中被索引，就可以使用一些特定的搜索类型查看它。
- en: There's more...
  id: totrans-69
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Fun with dorks
  id: totrans-70
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 与dorks一起玩耍
- en: '[www.jhony.ihackstuff.com](http://www.jhony.ihackstuff.com) is the most comprehensive
    guide for Google dorks where you can find a complete list of dorks that can reveal
    lots of hidden information about your target.'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '[www.jhony.ihackstuff.com](http://www.jhony.ihackstuff.com) 是Google dorks的最全面指南，您可以在其中找到许多关于目标的隐藏信息的完整dorks列表。'
- en: Port scanning - the Nmap way
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 端口扫描 - Nmap方式
- en: Port scanning is an active information gathering technique in which we will
    now start dealing with our target directly. Port scanning is an interesting process
    of information gathering. It involves a deeper search of the target machine. `Nmap`
    is the most powerful and preferred scanner for security professionals. The usage
    of `Nmap` varies from novice to an advanced level. We will analyze the various
    scan techniques in detail.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 端口扫描是一种主动的信息收集技术，我们现在将直接开始处理我们的目标。端口扫描是一种有趣的信息收集过程。它涉及对目标机器的深入搜索。`Nmap`是安全专业人员最强大和首选的扫描器。`Nmap`的使用范围从初学者到高级水平不等。我们将详细分析各种扫描技术。
- en: Getting ready
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Starting `nmap` from `Metasploit` is easy. Launch the `msf` console and type
    in `nmap` to display the list of scan options that Nmap provides.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 从`Metasploit`启动`nmap`很容易。启动`msf`控制台，输入`nmap`以显示`Nmap`提供的扫描选项列表。
- en: '[PRE3]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: How to do it...
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: We will analyse four different types of `Nmap` scans which can be very helpful
    during penetration testing. `Nmap` provides lots of different modes for scanning
    the target machine. Here, we will focus on four scan types namely **TCP connect
    scan, SYN stealth scan, UDP scan**, and **ACK scan**. The different scan options
    of `Nmap` can also be combined in a single scan in order to perform a more advanced
    and sophisticated scan over the target. Let us move ahead and start the scanning
    process.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将分析四种不同类型的`Nmap`扫描，在渗透测试过程中非常有帮助。`Nmap`提供了许多不同的扫描模式来扫描目标机器。在这里，我们将重点关注四种扫描类型，即**TCP连接扫描、SYN隐秘扫描、UDP扫描**和**ACK扫描**。`Nmap`的不同扫描选项也可以组合在单个扫描中，以执行更高级和复杂的目标扫描。让我们继续并开始扫描过程。
- en: '**TCP connect [-sT]** scan is the most basic and default scan type in `Nmap`.
    It follows the three way handshake process to detect the open ports on the target
    machine. Let us perform this scan on our target.'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: '**TCP连接[-sT]**扫描是`Nmap`中最基本和默认的扫描类型。它遵循三次握手过程来检测目标机器上的开放端口。让我们在目标上执行这种扫描。'
- en: '[PRE4]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: As we can see, we have passed the `-sT` parameter which denotes that we want
    to perform a TCP connect scan. The `-p` parameter shows the range of port numbers
    that we want to scan. TCP connect scan is based on a three way handshake process,
    hence the results of this scan returned are considered accurate.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，我们传递了`-sT`参数，表示我们要执行TCP连接扫描。`-p`参数显示我们要扫描的端口号范围。TCP连接扫描基于三次握手过程，因此返回的扫描结果被认为是准确的。
- en: '**SYN scan [-sS]** is considered as a stealth scanning technique, as it never
    forms a complete connection between the target and the scanner. Hence, it is also
    called half open scanning. Let us analyze a SYN scan on the target.'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**SYN扫描[-sS]**被认为是一种隐秘的扫描技术，因为它从不在目标和扫描器之间形成完整的连接。因此，它也被称为半开放扫描。让我们分析一下对目标的SYN扫描。'
- en: '[PRE5]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `-sS` parameter will instruct `Nmap` to perform a SYN scan on the target
    machine. The output of both TCP connect and the SYN scan are similar in most of
    the cases, but the only difference lies in the fact that SYN scans are difficult
    to detect by firewalls and Intrusion Detection Systems (IDS). However, modern
    firewalls are capable enough to catch SYN scans as well.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '`-sS`参数将指示`Nmap`在目标机器上执行SYN扫描。在大多数情况下，TCP连接和SYN扫描的输出是相似的，但唯一的区别在于SYN扫描难以被防火墙和入侵检测系统（IDS）检测到。然而，现代防火墙也足够能够捕捉到SYN扫描。'
- en: '**UDP scan [-sU]** is the scanning technique to identify open UDP ports on
    the target. 0-byte UDP packets are sent to the target machine and the recipient
    of an ICMP port unreachable message shows that the port is closed, otherwise it
    is considered open. It can be used in the following manner:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**UDP扫描[-sU]**是用于识别目标上开放UDP端口的扫描技术。将0字节的UDP数据包发送到目标机器，而收到ICMP端口不可达消息的接收者表明该端口已关闭，否则被视为打开。可以这样使用：'
- en: '[PRE6]'
  id: totrans-86
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The following command will check whether the UDP port on 192.168.56.102 is open
    or not. Similarly, we can perform a UDP scan on a complete range of ports by modifying
    the `-p` operator.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 以下命令将检查192.168.56.102上的UDP端口是否打开。同样，我们可以通过修改`-p`操作符在完整的端口范围上执行UDP扫描。
- en: '**ACK scan [-sA]** is a special scan type which tells which ports are filtered
    or unfiltered by a firewall. It operates by sending TCP ACK frames to a remote
    port. If there is no response, then it is considered to be a filtered port. If
    the target returns an RST packet (connection reset), then the port is considered
    to be an unfiltered port.'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**ACK扫描[-sA]**是一种特殊的扫描类型，可以告诉防火墙过滤或未过滤哪些端口。它通过向远程端口发送TCP ACK帧来操作。如果没有响应，则被视为过滤端口。如果目标返回RST数据包（连接重置），则该端口被视为未过滤端口。'
- en: '[PRE7]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: The preceding output shows the result of an ACK scan performed on the target.
    The output shows that all the ports on the target are filtered, except port number
    9001 which is unfiltered. This will help us to find out weak points in our target,
    as attacking an unfiltered port will have a better success rate of exploiting
    the target.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 上述输出显示了对目标执行的ACK扫描的结果。输出显示目标上的所有端口都被过滤，除了端口号为9001的未过滤端口。这将帮助我们找出目标的弱点，因为攻击未过滤端口将更有可能成功利用目标。
- en: How it works...
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: Generally, penetration testers don't stress too much on the scanning process,
    but a good scan can provide lots of useful results. Since the information collected
    here will form the basis of penetration testing, hence proper knowledge of scan
    types is highly recommended. Let us now take a deeper look into each of these
    scan techniques we just learnt.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，渗透测试人员不会过分强调扫描过程，但是良好的扫描可以提供许多有用的结果。由于这里收集的信息将构成渗透测试的基础，因此强烈建议对扫描类型有适当的了解。现在让我们深入了解我们刚学到的每种扫描技术。
- en: The TCP connect scan is the most basic scanning technique in which a full connection
    is established with the port under test. It uses the operating system's network
    functions to establish connections. The scanner sends a SYN packet to the target
    machine. If the port is open then it returns an ACK message back to the scanner.
    The scanner then sends an ACK packet back to the target showing the successful
    establishment of a connection. This is called a three-way handshake process. The
    connection is terminated as soon as it is opened. This technique has its benefits,
    but it is easily traceable by firewalls and IDS.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: TCP连接扫描是最基本的扫描技术，它与测试端口建立完整的连接。它使用操作系统的网络功能来建立连接。扫描器向目标机器发送一个SYN数据包。如果端口打开，则返回一个ACK消息给扫描器。然后扫描器向目标发送一个ACK数据包，显示成功建立连接。这被称为三次握手过程。一旦打开连接，连接就会终止。这种技术有其好处，但易于被防火墙和IDS追踪。
- en: A SYN scan is another type of TCP scan, but it never forms a complete connection
    with the target. It doesn't use the operating system's network functions, instead
    it generates raw IP packets and monitors for responses. If the port is open, then
    the target will respond with an ACK message. The scanner then sends an RST (reset
    connection) message and ends the connection. Hence, it is also called **half-open
    scanning**. This is considered as a stealth scanning technique as it can avoid
    raising a flag in some misconfigured firewalls and IDS.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: SYN扫描是另一种TCP扫描类型，但它从不与目标建立完整的连接。它不使用操作系统的网络功能，而是生成原始IP数据包并监视响应。如果端口打开，则目标将以ACK消息做出响应。然后扫描器发送RST（重置连接）消息并结束连接。因此，它也被称为**半开放扫描**。这被认为是一种隐蔽扫描技术，因为它可以避免在一些配置错误的防火墙和IDS中引发警报。
- en: UDP scanning is a connectionless scanning technique, hence no notification is
    sent back to the scanner whether the packet has been received by the target or
    not. If the port is closed, then an ICMP port unreachable message is sent back
    to the scanner. If no message is received then the port is reported as open. This
    method can return false results as firewalls can block the data packets and, hence,
    no response message will be generated and the scanner will report the port as
    open.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: UDP扫描是一种无连接的扫描技术，因此没有通知被发送回扫描器，告知数据包是否已被目标接收。如果端口关闭，则会向扫描器发送ICMP端口不可达消息。如果没有收到消息，则报告端口为打开状态。由于防火墙可以阻止数据包，因此此方法可能返回错误结果，因此不会生成响应消息，扫描器将报告端口为打开状态。
- en: An ACK scan has the sole purpose of identifying filtered and unfiltered ports.
    It is a unique and handy scanning technique which can be helpful in finding weak
    points in the target system as unfiltered ports can be easy targets. But a major
    disadvantage with an ACK scan is that since it never connects with the target,
    it cannot identify the open ports. The outputs of an ACK scan will only list whether
    the port is filtered or unfiltered. Combining an ACK scan with other scan types
    can make a very stealthy scanning process.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: ACK扫描的唯一目的是识别被过滤和未被过滤的端口。这是一种独特而方便的扫描技术，可以帮助找到目标系统的弱点，因为未被过滤的端口可能是易受攻击的目标。但ACK扫描的一个主要缺点是，由于它从不与目标连接，因此无法识别打开的端口。ACK扫描的输出将仅列出端口是被过滤还是未被过滤。将ACK扫描与其他扫描类型结合使用可以形成非常隐秘的扫描过程。
- en: There's more...
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let us cover more about nmap scans and see how we can club different scan types
    into one.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们更多地了解nmap扫描，并看看我们如何将不同的扫描类型组合在一起。
- en: Operating system and version detection
  id: totrans-99
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 操作系统和版本检测
- en: 'There are some advanced options provided by `Nmap`, apart from port scanning.
    These options can help us to gain more information about our target. One of the
    most widely used options is **operating system identification [-O]**. This can
    help us in identifying the operating system running on the target machine. An
    operating system detection scan output is shown, as follows:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 除了端口扫描外，“Nmap”还提供了一些高级选项。这些选项可以帮助我们获取有关目标的更多信息。其中最常用的选项之一是**操作系统识别[-O]**。这可以帮助我们识别目标机器上运行的操作系统。操作系统检测扫描输出如下所示：
- en: '[PRE8]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: As we can see, `Nmap` has successfully detected the operating system of the
    target machine. This can ease our task of finding the right exploits according
    to the operating system of the target.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，“Nmap”已成功检测到目标机器的操作系统。这可以简化我们根据目标操作系统找到合适的漏洞利用的任务。
- en: The other widely used `Nmap` option is **version detection [-sV]** of different
    open ports on the target. It can be mixed with any of the scan types that we saw
    previously to add an extra bit of information of what version of services are
    running on the open ports of the target.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个广泛使用的“Nmap”选项是**版本检测[-sV]**，用于目标上不同开放端口的版本检测。它可以与我们之前看到的任何扫描类型混合在一起，以提供有关目标开放端口上运行的服务版本的额外信息。
- en: '[PRE9]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: As we can see, an extra column of `Versions` has been added in our scan output
    which reports about the different versions of services running on the target machine.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，在我们的扫描输出中添加了一个名为“版本”的额外列，报告了目标机器上运行的不同服务的版本。
- en: Increasing anonymity
  id: totrans-106
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 增加匿名性
- en: It is very essential to perform scans in an anonymous manner. The firewall and
    IDS logs can reveal your IP address if you perform a scan without using security
    measures. One such feature is provided in `Nmap` which is called **Decoy [-D].**
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 以匿名方式执行扫描非常重要。如果您在不使用安全措施的情况下执行扫描，防火墙和IDS日志可能会显示您的IP地址。“Nmap”提供了一个名为**欺骗[-D]**的功能。
- en: The decoy option does not prevent your IP address from getting recorded in the
    log file of firewalls and IDS, but it does make the scan look scary. It adds other
    torrents in the log files, thus creating an impression that there are several
    other attackers scanning the machine simultaneously. So, if you add two decoy
    IP addresses then the log file will show that the request packets were sent from
    three different IP addresses, one will be yours and the other two will be the
    fake addresses added by you.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 诱饵选项不能阻止您的IP地址被记录在防火墙和IDS的日志文件中，但它确实使扫描看起来很可怕。它在日志文件中添加其他种子，从而给人一种印象，即有几个其他攻击者同时扫描机器。因此，如果您添加了两个诱饵IP地址，那么日志文件将显示请求数据包是从三个不同的IP地址发送的，一个是您的IP地址，另外两个是您添加的虚假地址。
- en: '[PRE10]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: The following scan example shows the use of decoy parameter. The IP addresses
    after the `-D` operator are the fake IP addresses which will also appear in the
    network log files of the target machine, along with the original IP address. This
    process can confuse the network administrators and create suspicion in their mind
    that all three IP addresses are fake or spoofed. But adding too many decoy addresses
    can affect the scan results, hence one should use a limited number of decoy addresses
    only.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 以下扫描示例显示了诱饵参数的使用。在`-D`运算符之后的IP地址是虚假IP地址，它们也将出现在目标机器的网络日志文件中，以及原始IP地址。这个过程可以混淆网络管理员，并在他们的脑海中引起怀疑，认为所有三个IP地址都是虚假的或伪造的。但添加太多的诱饵地址可能会影响扫描结果，因此应该只使用有限数量的诱饵地址。
- en: Exploring auxiliary modules for scanning
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 探索用于扫描的辅助模块
- en: Auxiliary modules are the in-built modules of a Metasploit that can help us
    perform a variety of tasks. They are different from exploits as they run on the
    pen-tester's machine and also it does not provide any shell. There are more than
    350 different auxiliary modules present in the Metasploit framework, each having
    specific tasks. Here we will discuss the scanner auxiliary modules.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 辅助模块是Metasploit的内置模块，可以帮助我们执行各种任务。它们与利用程序不同，因为它们在渗透测试者的机器上运行，也不提供任何shell。Metasploit框架中有超过350个不同的辅助模块，每个模块都有特定的任务。在这里，我们将讨论扫描器辅助模块。
- en: Getting ready
  id: totrans-113
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To use any auxiliary modules, we will have to follow three simple steps in order
    to make our module ready to launch. Let us go through the three-step process.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用任何辅助模块，我们将不得不按照三个简单的步骤，使我们的模块准备好启动。让我们通过这三个步骤。
- en: '**Activating the module:** The `use` command is used to set the particular
    module active and ready to take commands.'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 激活模块：使用`use`命令设置特定模块处于活动状态并准备接受命令。
- en: '**Setting specifications:** The `set` command is used to set up the various
    parameters that the module requires to execute.'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置规格：使用`set`命令设置模块执行所需的各种参数。
- en: '**Running the module:** After completing the first two steps, the `run` command
    is used to finally execute the module and generate the result.'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行模块：完成前两个步骤后，使用`run`命令最终执行模块并生成结果。
- en: 'To view the available scanning modules in the Metasploit framework, we can
    browse to the following location:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看Metasploit框架中可用的扫描模块，可以浏览以下位置：
- en: '[PRE11]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: To start using the modules we will have to launch our `msfconsole` session.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用模块，我们将启动`msfconsole`会话。
- en: How to do it...
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Let us now practically implement these steps to run a port scanning auxiliary
    module.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们实际实施这些步骤来运行端口扫描辅助模块。
- en: To begin with, let us search for the port scanning modules available for us
    in the framework.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，让我们搜索框架中可用的端口扫描模块。
- en: '[PRE12]'
  id: totrans-124
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: We can see the list of available scanners. It contains some of the basic scan
    types that we have discussed in the previous recipes. Let us start with a simple
    SYN scan to start with.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到可用的扫描仪列表。它包含我们在先前的示例中讨论过的一些基本扫描类型。让我们从一个简单的SYN扫描开始。
- en: How it works...
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Now we will follow our three step process to start using the module. Let us
    start with the first step.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将按照我们的三个步骤过程开始使用模块。让我们从第一步开始。
- en: 'To activate the module, we will execute the following command:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要激活模块，我们将执行以下命令：
- en: '[PRE13]'
  id: totrans-129
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: We will find that the prompt has changed to the module we want to use. This
    indicates that the module is now active.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将发现提示已更改为我们要使用的模块。这表明模块现在处于活动状态。
- en: 'Now let us see what parameters are required by the module. This will be done
    by using the `show options` command:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在让我们看看模块需要哪些参数。这将通过使用`show options`命令来完成：
- en: '[PRE14]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: The first column lists all the required parameters. The column named `Required`
    tells us which parameters are necessary to pass. It is necessary for all those
    parameters which are marked `yes` to contain a value. As we can see, all columns
    contain default values. `RHOSTS` contains the IP address range we want to scan.
    So let us set the `RHOSTS` parameter with our target IP address.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 第一列列出了所有必需的参数。名为`Required`的列告诉我们哪些参数是必须传递的。对于所有标记为`yes`的参数，包含值是必要的。正如我们所看到的，所有列都包含默认值。`RHOSTS`包含我们要扫描的IP地址范围。因此，让我们使用我们的目标IP地址设置`RHOSTS`参数。
- en: '[PRE15]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Now our module is ready to perform a SYN scan on our target IP address. Using
    the `set` command, we can also change the other values as well. For example, if
    we want to change the range of port numbers, then the following command can solve
    our purpose:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们的模块已准备好对目标IP地址执行SYN扫描。使用`set`命令，我们也可以更改其他值。例如，如果我们想要更改端口号的范围，那么以下命令可以解决我们的问题：
- en: '[PRE16]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Finally, our last step will be to execute the module to perform its respective
    action:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们的最后一步将是执行模块以执行其相应的操作：
- en: '[PRE17]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: On successful execution of the `run` command, the module will perform a SYN
    scanning and produce results.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 成功执行`run`命令后，模块将执行SYN扫描并生成结果。
- en: There's more...
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let us understand the use of threads in the next section.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在下一节中了解线程的使用。
- en: Managing the threads
  id: totrans-142
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 管理线程
- en: Setting and managing the number of threads in auxiliary modules can greatly
    enhance the performance of auxiliary modules. In case you have to scan an entire
    network or a range of IP addresses, then increasing the number of threads will
    make the scanning process faster.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 设置和管理辅助模块中的线程数量可以大大提高辅助模块的性能。如果你需要扫描整个网络或一系列IP地址，增加线程数量将使扫描过程更快。
- en: '[PRE18]'
  id: totrans-144
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Target service scanning with auxiliary modules
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用辅助模块进行目标服务扫描
- en: Let us now try out some targeted scanning for specific services running on a
    range of IP addresses, or on a single target host. Various service-based scans
    are available; VNC, FTP, SMB, and so on. Auxiliary modules can be really handy
    in such situations when we are looking for specific types of services on our target.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们尝试对一系列IP地址或单个目标主机上运行的特定服务进行有针对性的扫描。有各种基于服务的扫描可用；VNC、FTP、SMB等等。在我们寻找目标上特定类型的服务时，辅助模块可以非常方便。
- en: Getting ready
  id: totrans-147
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let us find out what service-based scanning auxiliary modules are available
    to us. We can navigate through the following path:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们找出哪些基于服务的扫描辅助模块对我们可用。我们可以通过以下路径导航：
- en: '[PRE19]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: As we can see, there are lots of options for service scan modules which can
    be very handy during penetration testing. Let us quickly work some of them.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，有许多服务扫描模块的选项，在渗透测试中非常有用。让我们快速地使用其中一些。
- en: How to do it...
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作方法...
- en: The working of these service scanning modules is similar to using any other
    module. We will follow the same three step process that we learned in the previous
    recipe.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这些服务扫描模块的工作方式类似于使用任何其他模块。我们将遵循在上一个示例中学到的相同的三个步骤过程。
- en: Let us work on the NetBIOS module. Scanning for NetBIOS can be beneficial in
    identifying the Windows operating system. We will scan a range of networks this
    time to find out which machine is running a NetBIOS service.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来研究一下NetBIOS模块。扫描NetBIOS可以有助于识别Windows操作系统。这次我们将扫描一系列网络，以找出哪台机器正在运行NetBIOS服务。
- en: '[PRE20]'
  id: totrans-154
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '`RHOSTS` is now set to scan the entire range of IP addresses and the number
    of threads is also set to ten. Let us now run this module and analyze the result.'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: '`RHOSTS`现在设置为扫描整个IP地址范围，线程数量也设置为十。现在让我们运行这个模块并分析结果。'
- en: '[PRE21]'
  id: totrans-156
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The network has three machines running on the scanned network that are using
    NetBIOS. The scan has also reported their respective MAC addresses.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描网络发现有三台机器正在运行NetBIOS。扫描还报告了它们各自的MAC地址。
- en: Let us perform another service scan. This time we will try to locate which machines
    are running the MySQL database server. Also, we will try to find out the version
    of the server.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们进行另一个服务扫描。这次我们将尝试找出哪些机器正在运行MySQL数据库服务器。此外，我们还将尝试找出服务器的版本。
- en: '[PRE22]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: The scanning process has detected that the IP address 192.168.56.102 is running
    a MySQL server, but unfortunately, it couldn't connect with the server. This is
    another demonstration of how easy and handy auxiliary modules are, and they can
    provide us with lots of useful information as well.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描过程发现IP地址192.168.56.102正在运行MySQL服务器，但不幸的是，无法连接到服务器。这再次证明了辅助模块是多么简单和方便，它们也可以为我们提供大量有用的信息。
- en: It is recommended that one should try out all the auxiliary scanner modules
    available as they can help you in better understanding your target.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 建议尝试所有可用的辅助扫描模块，因为它们可以帮助你更好地了解你的目标。
- en: How it works...
  id: totrans-162
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: Auxiliary modules are special purpose modules that are built to perform a particular
    task. There can be situations when you have to perform only a particular type
    of scan to discover services. For example, the MySQL auxiliary scanner detects
    the presence of the database by pinging the default port number (3306). It further
    checks if the default login is enabled on the database or not. You can analyze
    the script at `/modules/auxiliary/scanner`. You can extend the code according
    to your need, or even re-use the script to build your own specific auxiliary scanner.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 辅助模块是专门用于执行特定任务的特殊目的模块。有时你可能需要执行特定类型的扫描来发现服务。例如，MySQL辅助扫描器通过对默认端口号（3306）进行ping来检测数据库的存在。它进一步检查默认登录是否在数据库上启用。你可以在`/modules/auxiliary/scanner`下分析脚本。你可以根据需要扩展代码，甚至重用脚本来构建自己特定的辅助扫描器。
- en: Vulnerability scanning with Nessus
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nessus进行漏洞扫描
- en: So far, we have learned the basics of port scanning, along with the practical
    implementation with Nmap. Port scanning has been extended to several other tools
    which further enhance the process of scanning and information gathering. In the
    next few recipes, we will cover those tools which scan the target for available
    services and open ports and then tries to determine the type of vulnerability
    that may exist for that particular service or port. Let us begin our journey to
    vulnerability scanning.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经学习了端口扫描的基础知识，并进行了Nmap的实际实现。端口扫描已经扩展到其他几种工具，进一步增强了扫描和信息收集的过程。在接下来的几个示例中，我们将涵盖那些扫描目标以发现可用服务和开放端口，然后尝试确定可能存在的特定服务或端口的漏洞类型的工具。让我们开始我们的漏洞扫描之旅。
- en: Nessus is one of the most widely used vulnerability scanners. It scans the target
    for a range of vulnerabilities and produces a detailed report for it. Nessus is
    a very helpful tool during penetration testing. Either you can use the GUI version
    of Nessus, or you can also use it from the Metasploit console. In this book, we
    will primarily focus on using Nessus with `msfconsole`.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus是最广泛使用的漏洞扫描器之一。它会扫描目标以发现一系列漏洞，并为其生成详细报告。Nessus在渗透测试中非常有帮助。你可以使用Nessus的图形界面版本，也可以在Metasploit控制台中使用它。在本书中，我们将主要关注使用`msfconsole`与Nessus一起使用。
- en: Getting ready
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To start working with Nessus in `msfconsole`, we will have to load Nessus and
    then connect it with the server to start our penetration testing.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 要在`msfconsole`中开始使用Nessus，我们需要加载Nessus，然后连接到服务器开始我们的渗透测试。
- en: First, we will connect our database with Metasploit so as to store the interim
    results. The process of starting and connecting the database in Metasploit has
    been explained in the previous chapter. After connecting the database, our next
    task is to load the Nessus plugin.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们将连接我们的数据库与Metasploit，以存储临时结果。在前一章中已经解释了在Metasploit中启动和连接数据库的过程。连接数据库后，我们的下一个任务是加载Nessus插件。
- en: How to do it...
  id: totrans-170
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To connect the database and load Nessus in Metasploit, we will execute the
    following command:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要连接数据库并在Metasploit中加载Nessus，我们将执行以下命令：
- en: '[PRE23]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'After successfully loading it, we will have to connect it with the server.
    The following command is used to connect it with the server manner:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 成功加载后，我们将需要将其与服务器连接。以下命令用于将其与服务器连接：
- en: '[PRE24]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: In the preceding command `ok` is an extra parameter that is passed to ensure
    the Nessus server is running on a trusted network.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述命令中，`ok`是一个额外的参数，用于确保Nessus服务器在受信任的网络上运行。
- en: We can check for the list of available users in Nessus by using the `nessus_user_list`
    command.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用`nessus_user_list`命令检查Nessus中可用用户的列表。
- en: A new user can also be added by using the command `nessus_user_add`. By using
    the command `nessus_policy_list`, we can view the list of available policies on
    the server.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以使用`nessus_user_add`命令添加新用户。通过使用`nessus_policy_list`命令，我们可以查看服务器上可用策略的列表。
- en: How it works...
  id: totrans-178
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'Once Nessus is connected with the server, it can be used for scanning target
    machines. The process of scanning is simple and quick. Let us perform a quick
    scan on a target to see how Nessus scanning operates. To start the scan, we will
    have to pass the following command:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Nessus与服务器连接，就可以用于扫描目标机器。扫描的过程简单而快速。让我们对目标进行快速扫描，看看Nessus扫描是如何操作的。要开始扫描，我们将需要传递以下命令：
- en: '[PRE25]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'Once the scanning process is complete, our next target will be to import the
    list generated by Nessus. Let us check out the available list:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦扫描过程完成，我们的下一个目标将是导入Nessus生成的列表。让我们查看可用的列表：
- en: '[PRE26]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The ID column represents the report that has been generated as a result of our
    scan. Let us import this report now.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: ID列代表我们扫描生成的报告。现在让我们导入这份报告。
- en: '[PRE27]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Once the report has been imported, it can now be operated by using the console
    commands and can be analyzed to find out the weaknesses in the target. To view
    the vulnerabilities in the target, execute the following command:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 报告导入后，可以使用控制台命令操作，并进行分析，以找出目标中的弱点。要查看目标中的漏洞，执行以下命令：
- en: '[PRE28]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: There's more...
  id: totrans-187
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Let us look through a quick guide to working with Nessus in GUI mode.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速浏览一下在GUI模式下使用Nessus的快速指南。
- en: Working with Nessus in the web browser
  id: totrans-189
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在Web浏览器中使用Nessus
- en: 'Nessus can also be used from its GUI mode which is also as powerful and easy
    to use as the console mode. If you are using Nessus for the first time, then first
    you will have to register yourself and get a registration code from the Nessus
    website. Registration can be done at the following link:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus也可以从其GUI模式中使用，这也和控制台模式一样强大且易于使用。如果您是第一次使用Nessus，则首先需要注册并从Nessus网站获取注册码。注册可以在以下链接完成：
- en: '[http://www.nessus.org/register/](http://www.nessus.org/register/)'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.nessus.org/register/](http://www.nessus.org/register/)'
- en: Once the registration is complete, we will have to start Nessus and add the
    registration code. Go to **Applications** | **BackTrack | Vulnerability Assessment
    | Network Assessment | Vulnerability Scanner | nessus start**.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 注册完成后，我们将需要启动Nessus并添加注册码。转到**应用程序** | **BackTrack | 漏洞评估 | 网络评估 | 漏洞扫描器 | nessus
    start**。
- en: 'On starting Nessus, you might be prompted with the following error message:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 启动Nessus时，可能会提示以下错误消息：
- en: '[PRE29]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The error is because Nessus is not yet registered. In order to register, we
    will have to use the registration code that we received through an e-mail from
    Nessus. The following command will help us complete the registration process:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 错误是因为Nessus尚未注册。为了注册，我们需要使用从Nessus收到的注册码。以下命令将帮助我们完成注册过程：
- en: '[PRE30]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'Now launch the browser and type the following address:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 现在启动浏览器并输入以下地址：
- en: '`https://localhost:8834`'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '`https://localhost:8834`'
- en: If you are launching Nessus in the browser for the first time, then it will
    take some time to load. So be patient.
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您第一次在浏览器中启动Nessus，加载可能需要一些时间。请耐心等待。
- en: Scanning with NeXpose
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用NeXpose进行扫描
- en: In the previous recipe, we discussed Nessus as a potential vulnerability scanner.
    In this recipe, we will cover another important vulnerability scanner NeXpose.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一篇文章中，我们讨论了Nessus作为一个潜在的漏洞扫描器。在本篇文章中，我们将介绍另一个重要的漏洞扫描器NeXpose。
- en: NeXpose is a popular tool by Rapid7 which performs the task of vulnerability
    scanning and importing results to the Metasploit database. The usage of NeXpose
    is similar to Nessus which we learned in the previous recipe, but let's have a
    quick overlook of how to get started with NeXpose. I will leave the task of exploring
    it deeper as an assignment for you.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: NeXpose是Rapid7的一款热门工具，用于执行漏洞扫描并将结果导入Metasploit数据库。NeXpose的使用方式类似于我们在上一篇文章中学到的Nessus，但让我们快速了解一下如何开始使用NeXpose。我将把更深入地探索留作你的任务。
- en: Getting ready
  id: totrans-203
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To start the NeXpose from the `msf` console, we will first have to connect the
    database to Metasploit, and then load the plugin to connect it with the NeXpose
    server to start the process of target scanning. Let us execute these steps in
    the command line.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 从`msf`控制台启动NeXpose，我们首先需要将数据库连接到Metasploit，然后加载插件将其与NeXpose服务器连接，以启动目标扫描的过程。让我们在命令行中执行这些步骤。
- en: '[PRE31]'
  id: totrans-205
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: How to do it...
  id: totrans-206
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Now that we are connected with our server, we can scan our target and generate
    reports. There are two scan commands supported by NeXpose. One is `nexpose_scan`
    and the other is `nexpose_discover`. The former will scan a range of IP addresses
    and import the results, whereas the latter will scan only to discover hosts and
    services running on them. Let us perform a quick scan on our target using NeXpose.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经连接到我们的服务器，我们可以扫描我们的目标并生成报告。NeXpose支持两种扫描命令。一个是`nexpose_scan`，另一个是`nexpose_discover`。前者将扫描一系列IP地址并导入结果，而后者将仅扫描以发现主机和运行在其上的服务。让我们使用NeXpose对我们的目标进行快速扫描。
- en: '[PRE32]'
  id: totrans-208
  prefs: []
  type: TYPE_PRE
  zh: '[PRE32]'
- en: How it works...
  id: totrans-209
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Once the scan is complete, we can view its results by using the default database
    commands of the `msf` console.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，我们可以使用`msf`控制台的默认数据库命令查看其结果。
- en: 'Let us see what scan results have been produced by NeXpose:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看NeXpose产生了什么扫描结果：
- en: '[PRE33]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE33]'
- en: There's more...
  id: totrans-213
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: After the information has been collected, the final step will be importing the
    results. Let us see how it is executed.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 信息收集完成后，最后一步是导入结果。让我们看看它是如何执行的。
- en: Importing the scan results
  id: totrans-215
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 导入扫描结果
- en: You can skip this information if you have used Nessus and NeXpose from `msfconsole`.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已经从`msfconsole`使用了Nessus和NeXpose，您可以跳过此信息。
- en: 'When you are using the GUI version of either Nessus or NeXpose, you will have
    to manually import the scan results to the database. The reason why I am laying
    stress on importing and storing results is that in our next chapter we will see
    how we can use the `autopwn` command to automatically run exploits on hosts present
    in our database. So, in order to import the scan results, we will use the `db_import`
    command as follows: `db_import filename`'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 当您使用Nessus或NeXpose的GUI版本时，您将不得不手动将扫描结果导入数据库。我强调导入和存储结果的原因是，在我们的下一章中，我们将看到如何使用`autopwn`命令自动在我们的数据库中运行主机上的利用。因此，为了导入扫描结果，我们将使用`db_import`命令如下：`db_import
    filename`
- en: '[PRE34]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE34]'
- en: Sharing information with the Dradis framework
  id: totrans-219
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 与Dradis框架共享信息
- en: 'In our previous recipes, we learned several techniques for gaining information
    about our target. While performing penetration tests, we may need to share information
    with other pen-testers which may be located at other physical locations. In that
    case, sharing the penetration testing information can be made easier by using
    the Dradis framework. It is an open source framework for sharing information during
    security assessments. It has several features which makes it an excellent information-sharing
    tool. Some of them are:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们之前的教程中，我们学习了几种获取有关目标信息的技术。在执行渗透测试时，我们可能需要与其他渗透测试人员共享信息，他们可能位于其他物理位置。在这种情况下，使用Dradis框架可以更轻松地共享渗透测试信息。它是一个用于在安全评估期间共享信息的开源框架。它具有几个功能，使其成为一个出色的信息共享工具。其中一些是：
- en: Communicating over SSL
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过SSL进行通信
- en: Attachment of files and notes
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 附件文件和笔记
- en: Import scan results from Nessus, NeXpose, and so on
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Nessus、NeXpose等导入扫描结果
- en: Can be extended to connect with external systems like a vulnerability database
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以扩展以连接外部系统，如漏洞数据库
- en: Although it will not help us in gaining any information about the target, the
    tool is important for all security professionals in sharing pen-test results and
    findings.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然它不会帮助我们获取有关目标的任何信息，但对于所有安全专业人员来说，该工具在共享渗透测试结果和发现方面非常重要。
- en: Getting ready
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 做好准备
- en: 'To launch the Dradis framework in BackTrack, we will have to execute the following
    command at the terminal:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 要在BackTrack中启动Dradis框架，我们需要在终端执行以下命令：
- en: '[PRE35]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE35]'
- en: 'Once the command is executed successfully, we can launch the framework from
    our browser by passing the following address:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 成功执行命令后，我们可以通过浏览器启动框架，通过以下地址传递：
- en: '`https://127.0.0.1:3004`'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '`https://127.0.0.1:3004`'
- en: We will be prompted to set up a password and account for the framework.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将被提示设置密码和框架帐户。
- en: '![Getting ready](img/7423_02_03.jpg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![做好准备](img/7423_02_03.jpg)'
- en: How to do it...
  id: totrans-233
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Let us start our experiment with Dradis. The framework enables us to build up
    a tree like structure for the domain and sub-domain addresses. This gives us a
    clear view of the target structure and helps us in storing information logically.
    It also provides features to generate a complete report of the information in
    a systematic manner.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始我们的Dradis实验。该框架使我们能够为域和子域地址建立类似树状的结构。这使我们清晰地了解目标结构，并帮助我们以逻辑方式存储信息。它还提供了生成信息完整报告的功能。
- en: '![How to do it...](img/7423_02_04.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/7423_02_04.jpg)'
- en: There are five important options that the framework provides us with. They are
    **add branch, import from file, export, add note**, and **note categories**.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 框架为我们提供了五个重要选项。它们是**添加分支，从文件导入，导出，添加笔记**和**笔记类别**。
- en: Once you have logged in with your credentials, then you will be presented with
    a screen similar to the one shown in the preceding screenshot. You can locate
    the five options on the left corner of the framework. Let us see what these options
    do for us.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您使用您的凭据登录，您将看到一个类似于前面截图中显示的屏幕。您可以在框架的左上角找到五个选项。让我们看看这些选项为我们做了什么。
- en: How it works...
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Let us start with creating a new report. The process is simple and starts with
    adding hosts and sub-hosts.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始创建一个新报告。该过程很简单，从添加主机和子主机开始。
- en: The **add branch** option enables us to add a new IP or domain name. Once a
    top-level domain is added, we can further add its child to include sub-domains
    as well. Now the next task is to add information about them.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '**添加分支**选项使我们能够添加新的IP或域名。一旦添加了顶级域，我们可以进一步添加其子域以包括子域。现在下一个任务是添加有关它们的信息。'
- en: The **add note** option enables us to add information that we have collected
    from various scan results. For example, we can add scan results from Nmap, Nessus,
    and so on.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '**添加笔记**选项使我们能够添加我们从各种扫描结果中收集的信息。例如，我们可以添加来自Nmap、Nessus等的扫描结果。'
- en: The **note categories** option helps us in selecting the medium we used for
    obtaining the information. The various options include Brup scan, Nessus scan,
    NeXpose, Nmap, and so on. You can choose the appropriate option that you used
    to generate the scan results.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '**注释类别**选项帮助我们选择用于获取信息的媒介。各种选项包括Brup扫描、Nessus扫描、NeXpose、Nmap等。您可以选择您用于生成扫描结果的适当选项。'
- en: The following screenshot shows information about the Nmap scan performed on
    a range of IP addresses 192.168.56.1/24\. The left-side tree structure contains
    information about the targets available and the right column provides reports
    about it.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了针对IP地址范围192.168.56.1/24进行的Nmap扫描的信息。左侧的树形结构包含了有关可用目标的信息，右侧的列提供了有关其报告的信息。
- en: '![How it works...](img/7423_02_05.jpg)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理...](img/7423_02_05.jpg)'
- en: The next thing that we can do with the Dradis framework is to import an existing
    report or export a created report.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来我们可以用Dradis框架做的事情是导入现有报告或导出创建的报告。
- en: The **Import from file** option provides us with the flexibility to import previously
    scanned results from different scanners. This further increases the power of this
    framework, as different testers can import the results into the framework and
    combine them to produce a single report.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '**从文件导入**选项为我们提供了灵活性，可以从不同的扫描仪中导入先前的扫描结果。这进一步增强了该框架的功能，因为不同的测试人员可以将结果导入框架并将它们组合成单个报告。'
- en: The **export** option provides professional penetration testers an option to
    generate a complete report of various domains and sub-domains into a single file.
    The report can be exported either in an XML or in an HTML format. It can also
    be exported in the form of a project or custom template.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '**导出**选项为专业渗透测试人员提供了一个选项，可以将各个域和子域的完整报告生成为单个文件。报告可以以XML或HTML格式导出。也可以以项目或自定义模板的形式导出。'
