- en: Vulnerability Analysis
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞分析
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Installation and configuration of OpenVAS
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenVAS 的安装与配置
- en: A basic vulnerability scanning with OpenVAS
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 OpenVAS 进行基础漏洞扫描
- en: Advanced vulnerability scanning with OpenVAS
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 OpenVAS 进行高级漏洞扫描
- en: Installation and Configuration of Nessus
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus 的安装与配置
- en: A basic vulnerability scanning with Nessus
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Nessus 进行基础漏洞扫描
- en: Advanced vulnerability scanning with Nessus
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Nessus 进行高级漏洞扫描
- en: The installation and configuration of Nexpose
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nexpose 的安装与配置
- en: Basic vulnerability scanning with Nexpose
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Nexpose 进行基础漏洞扫描
- en: Advanced vulnerability scanning with Nexpose
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 Nexpose 进行高级漏洞扫描
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: 'Once access to a network has been gained and the systems within that network
    have been identified, the next step is establishing a foothold and persistent
    access. There are several tools that are available to help identify and exploit
    systemic vulnerabilities, but we will be focusing only on three of them in this
    chapter:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦访问网络并识别出网络中的系统，下一步是建立立足点和持久性访问。有多个工具可用于帮助识别和利用系统漏洞，但我们将在本章中仅聚焦于其中三个：
- en: OpenVAS ([http://www.openvas.org](http://www.openvas.org))
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenVAS ([http://www.openvas.org](http://www.openvas.org))
- en: Nessus ([https://www.tenable.com/products/nessus-vulnerability-scanner](https://www.tenable.com/products/nessus-vulnerability-scanner))
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus ([https://www.tenable.com/products/nessus-vulnerability-scanner](https://www.tenable.com/products/nessus-vulnerability-scanner))
- en: Nexpose ([https://www.rapid7.com/info/nexpose-community/](https://www.rapid7.com/info/nexpose-community/))
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nexpose ([https://www.rapid7.com/info/nexpose-community/](https://www.rapid7.com/info/nexpose-community/))
- en: Installation and configuration of OpenVAS
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OpenVAS 的安装与配置
- en: Since the default Kali Linux media does not include OpenVAS with the initial
    installation, we will need to perform a full, fresh installation. This is done
    from the console or over a remote connection.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 由于默认的 Kali Linux 镜像在初始安装时并不包含 OpenVAS，我们需要进行一次完整的新安装。这可以通过控制台或远程连接进行。
- en: OpenVAS is an open source vulnerability management platform that was created
    as a fork of the venerable Nessus platform when Tenable Network Security moved
    Nessus to a closed source (initially named GNessUs). Over time, the OpenVAS framework
    became part of the Greenbone Network's commercial vulnerability management solution.
    Greenbone continues to contribute to OpenVAS, ensuring that it stays up to date
    and relevant.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: OpenVAS 是一个开源漏洞管理平台，它是基于知名的 Nessus 平台开发的分支，Nessus 在 Tenable Network Security
    将其转为闭源之后（最初名为 GNessUs）。随着时间的推移，OpenVAS 框架成为了 Greenbone 网络的商业漏洞管理解决方案的一部分。Greenbone
    继续为 OpenVAS 做出贡献，确保其始终保持最新且相关。
- en: Considering that OpenVAS is accessible through a web browser as well as the
    command line, it is a very powerful tool that can be leveraged either locally
    through the command line or a browser, or it can be put in place in a central
    location and used by other devices on the network.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑到 OpenVAS 可以通过网页浏览器以及命令行访问，它是一个非常强大的工具，可以通过命令行或浏览器在本地使用，或者可以部署在中心位置并供网络中的其他设备使用。
- en: Getting ready
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'In order to be able to complete this section, you will need this:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够完成本节内容，您将需要以下内容：
- en: Console access to your Kali Linux system
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 控制台访问 Kali Linux 系统
- en: Internet access to download and install OpenVAS application
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问互联网以下载和安装 OpenVAS 应用程序
- en: How to do it...
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will perform the steps necessary to install OpenVAS on Kali:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将执行必要的步骤在 Kali 上安装 OpenVAS：
- en: 'If you have not fully updated your Kali Linux installation, you will want to
    do so now. From the root shell, run the following command. If there are many updates,
    this may take a while, but be patient. Once the update process is complete, reboot
    the system, login, and open a root shell again:'
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您尚未完全更新 Kali Linux 安装，建议现在进行更新。从 root shell 运行以下命令。如果有很多更新，这可能需要一些时间，请耐心等待。更新过程完成后，重启系统，登录，并再次打开
    root shell：
- en: '[PRE0]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'From the root shell, use `apt-get` to download and install OpenVAS:'
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 root shell 使用 `apt-get` 下载并安装 OpenVAS：
- en: '[PRE1]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once the installation is complete, run the following from the root shell to
    kick off the setup process. Due to the amount of data needed, it is likely this
    will take a while even over a fast connection, so be prepared to wait:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦安装完成，运行以下命令从根 shell 启动设置过程。由于需要的数据量较大，即使是在快速连接的情况下，这个过程也可能需要一些时间，所以请准备好耐心等待：
- en: '[PRE2]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: At the end of this process, you will see the admin password displayed. Write
    this down so that you are able to log into the OpenVAS portal.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这个过程的最后，你将看到管理员密码显示出来。把它写下来，以便你能够登录到 OpenVAS 门户。
- en: 'In the event where you forget this password, it can be reset from the command
    line using the following:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你忘记了这个密码，可以通过命令行使用以下命令重置：
- en: '**`openvasmd --user=admin --new-password=[your password here]`**'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**`openvasmd --user=admin --new-password=[your password here]`**'
- en: A basic vulnerability scanning with OpenVAS
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 OpenVAS 进行基本的漏洞扫描。
- en: Once installed, OpenVAS provides a centralized platform that can be used from
    any browser-based system or from the command line. Because OpenVAS is a security
    analysis tool, it will be looking at the systems in this environment to identify
    services and vulnerabilities, so ensure that you are prepared for potential impacts.
    Even the most careful and the least impact scans can potentially affect services.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦安装完成，OpenVAS 提供了一个集中的平台，可以通过任何基于浏览器的系统或命令行进行使用。由于 OpenVAS 是一个安全分析工具，它将会检查该环境中的系统，识别服务和漏洞，因此请确保你已经准备好应对潜在的影响。即便是最小心、影响最小的扫描也可能会影响到服务。
- en: Getting ready
  id: totrans-37
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作。
- en: 'In order to be able to complete this section, you will need the following steps
    completed:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这一部分，你需要完成以下步骤：
- en: OpenVAS successfully installed and configured on your Kali Linux system
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenVAS 已成功安装并配置在你的 Kali Linux 系统上。
- en: Access to the Kali system, either from the desktop or a browser
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问 Kali 系统，无论是从桌面还是浏览器。
- en: Network access to the systems that were configured as part of the lab discussion
    in the earlier sections
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络访问到在前面部分的实验室讨论中配置的系统。
- en: You will need to confirm the IP address of your lab network and be able to ping
    hosts on it
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要确认你的实验室网络的 IP 地址，并能够对其上的主机进行 ping 测试。
- en: How to do it...
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will perform a basic vulnerability scan using OpenVAS:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 OpenVAS 进行一次基本的漏洞扫描：
- en: Connect to the OpenVAS service on the Kali Linux system by opening a browser
    and navigating to `https://[your Kali IP]:9392`; accept the certificate security
    warning, and create an exception for the invalid certificate.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过打开浏览器并导航到 `https://[your Kali IP]:9392`，连接到 Kali Linux 系统上的 OpenVAS 服务；接受证书安全警告，并为无效证书创建例外。
- en: To prepare a more permanent implementation, create a new user that is unique
    to your use. From the dashboard, navigate to Administration | Users. You will
    see the list of configured users (in this case, since this is a default installation,
    there should only be Admin). Under Actions for the user admin, click on Clone.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了准备一个更永久的实现，创建一个唯一属于你的新用户。从仪表板中，导航到 Administration | Users。你将看到已配置用户的列表（在这种情况下，由于这是默认安装，应该只有
    Admin）。在管理员用户的 Actions 下，点击 Clone。
- en: Once cloned, you will be taken to the new account overview page. Click on the
    Edit User option in the upper-left part to edit the details for this user. You
    will be able to set the username, as well as permissions. Give the new user an
    appropriate name and reset the password to something you will remember in the
    future exercises.
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 克隆后，你将被带到新账户概览页面。点击左上角的编辑用户选项，编辑此用户的详细信息。你可以设置用户名以及权限。为新用户设置一个合适的名字，并将密码重置为你以后练习时能记住的内容。
- en: In larger environments where LDAP is available, you can also connect OpenVAS
    to these repositories to leverage a centralized account management. To enable
    this, navigate to Administration | LDAP and configure the connection information
    that is necessary to connect to these repositories.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 在较大的环境中，如果有 LDAP 可用，你还可以将 OpenVAS 连接到这些仓库，以利用集中的账户管理。要启用此功能，请导航至 Administration
    | LDAP 并配置连接信息，以便连接到这些仓库。
- en: Once connected to the OpenVAS system, click on the Scans | Tasks link from the
    top menu bar. Once the page loads, you should be immediately presented with an
    initial scan wizard. This will help you kick off the very first scan you will
    run, which we will run against our first Windows 7 host.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 连接到 OpenVAS 系统后，点击顶部菜单栏中的 Scans | Tasks 链接。页面加载后，你应该会立即看到初始扫描向导。这个向导将帮助你启动第一次扫描，我们将针对我们的第一个
    Windows 7 主机进行扫描。
- en: 'With the Task Wizard window open, enter the IP address of your lab network.
    In this case, add `192.168.56.0/24` into the textbox, and initiate the scan by
    clicking on Start Scanning:'
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在任务向导窗口打开后，输入实验室网络的 IP 地址。在这个例子中，添加 `192.168.56.0/24` 到文本框中，并点击开始扫描来启动扫描：
- en: '![](assets/9fdd93ba-838a-42dc-8a6b-0f9b19cde87d.png)Task Wizard to initial
    a scan'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9fdd93ba-838a-42dc-8a6b-0f9b19cde87d.png)任务向导启动扫描'
- en: 'After the scan is initiated, you will see a list of tasks, one of which is
    the scan we just created:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描启动后，您将看到任务列表，其中之一就是我们刚刚创建的扫描任务：
- en: '![](assets/106911fc-311a-4833-9113-7cb7ed363710.png)List of running tasks'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/106911fc-311a-4833-9113-7cb7ed363710.png)正在运行的任务列表'
- en: While the scan is running, you should familiarize yourself with the action icons
    available, as they can be used to archive task configurations to move to other
    systems, clone to create a copy, and so on.
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在扫描运行时，您应该熟悉可用的操作图标，因为它们可以用来存档任务配置以便移动到其他系统、克隆以创建副本等。
- en: 'Once the scan is completed, you should see a change in the dashboard view to
    something that looks similar to the following:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦扫描完成，您应该看到仪表盘视图发生变化，类似如下所示：
- en: '![](assets/6efd23cd-a1ac-436e-b76a-ac9554462f0c.png)Task dashboard after initial
    scan'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6efd23cd-a1ac-436e-b76a-ac9554462f0c.png)初始扫描后的任务仪表盘'
- en: 'Click on the date of the scan to see the results of the scan:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击扫描日期查看扫描结果：
- en: '![](assets/d1f8a5a2-7b4b-4e00-a2c7-9122ed5c65d5.png)Scan result report'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d1f8a5a2-7b4b-4e00-a2c7-9122ed5c65d5.png)扫描结果报告'
- en: 'There are some important things to note in the initial report. First, you will
    see that OpenVAS is only showing you three of the identified 15 vulnerabilities.
    While this may seem unusual, it is necessary to understand how OpenVAS displays
    its results through the default filter. The field named **Quality of Detection**
    (**QoD**) stands for an indication of how trustworthy the results of a particular
    scan maybe. To demonstrate this fact, click on the vulnerability with the highest
    QoD:'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 初步报告中有一些需要注意的重要事项。首先，您会看到 OpenVAS 只显示了已识别的 15 个漏洞中的 3 个。虽然这看起来不太寻常，但理解 OpenVAS
    如何通过默认过滤器显示结果是必要的。名为**检测质量**（**QoD**）的字段表示该特定扫描结果的可信度。为了演示这一点，单击具有最高 QoD 的漏洞：
- en: '![](assets/ca574069-de4a-4620-8d6c-eec721396615.png)Vulnerability details'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/ca574069-de4a-4620-8d6c-eec721396615.png)漏洞详细信息'
- en: As you can see, the QoD for this check is 95%, meaning that the ability to determine
    a host's exposure to this vulnerability is quite high. In looking through the
    details of the check, you can also see that this is a potentially damaging vulnerability—this
    vulnerability requires a vendor-supplied fix, has a very wide distribution of
    affected platforms, and the result of a successful exploitation results in **remote
    code execution** (**RCE**). The combination of these factors results in the severity
    to be calculated as a 9.3 out of 10 (HIGH).
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如您所见，此检查的QoD（检测质量）为 95%，这意味着确定主机暴露于该漏洞的能力相当高。在查看检查的详细信息时，您还可以看到这是一个潜在的严重漏洞——该漏洞需要供应商提供的修复补丁，受影响的平台分布非常广泛，成功利用该漏洞会导致**远程代码执行**（**RCE**）。这些因素的结合使得该漏洞的严重性被计算为
    9.3（满分 10，属于高危）。
- en: This particular vulnerability was used by the WannaCry ransomware campaign that
    occurred in May 2017\. Additional fields of interest are the manner in which the
    vulnerability was detected, and the information necessary to get more detailed
    information, including vendor-specific patch information as well as CVE/BID/CERT
    information.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 这种特定的漏洞被 WannaCry 勒索病毒攻击利用，该攻击发生在 2017 年 5 月。其他值得关注的领域包括漏洞是如何被发现的，以及获取更多详细信息所需的信息，包括特定供应商的补丁信息以及
    CVE/BID/CERT 信息。
- en: 'Using the information contained in this report will help to determine the system''s
    level of risk to some known vulnerabilities and insecure configurations. If you
    would like more detail, such as identified vulnerabilities that are below the
    default QoD of 70%, you may customize the filter in the upper portion of the report
    screen:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用此报告中的信息将有助于确定系统面临已知漏洞和不安全配置的风险水平。如果您想要更多详细信息，例如识别的漏洞低于默认的 70% QoD，您可以自定义报告屏幕上方的过滤器：
- en: '![](assets/b973dc02-feb1-4ee9-9954-82972c0df860.png)Customize filtered view'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b973dc02-feb1-4ee9-9954-82972c0df860.png)自定义过滤视图'
- en: 'At the far right in the Actions column, you can see some very useful options.
    The Add Note allows you to add additional narrative to the reports to add context,
    document additional or relevant findings, and so on. The Add Override option allows
    you to override a particular finding, with fields for where this is permitted,
    which hosts, duration of the override, and the new severity (overrides are frequently
    used to designate a false positive severity):'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在操作栏的最右侧，你可以看到一些非常有用的选项。添加备注允许你在报告中添加附加说明，以提供背景信息、记录其他或相关发现等。添加覆盖选项允许你覆盖某个特定发现，并提供在哪些主机、覆盖的持续时间以及新的严重性等字段（覆盖常用于指定假阳性严重性）：
- en: '![](assets/4c6b16ca-7a31-4bf5-980d-b8b52f74be3d.png)Each report contains documented
    vulnerabilities that can be used in conjunction with other tools (such as Metasploit)
    to successfully gain access to a target system. This information must be treated
    with care. Ensure that the installation of OpenVAS is secured, and that the service
    is not left running when not in immediate use.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/4c6b16ca-7a31-4bf5-980d-b8b52f74be3d.png)每个报告包含已记录的漏洞，这些漏洞可以与其他工具（如Metasploit）结合使用，从而成功访问目标系统。这些信息必须小心处理。确保OpenVAS的安装是安全的，且服务在未使用时不会继续运行。'
- en: Advanced vulnerability scanning with OpenVAS
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用OpenVAS进行高级漏洞扫描
- en: Vulnerability identification through unauthenticated network scanning is a good
    way to start gathering intelligence on a network, but a powerful component of
    this is the ability to perform more frequent, targeted scans, and this can include
    credentials that allow for the successful authentication to a target system for
    deeper level evaluations.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 通过未授权的网络扫描进行漏洞识别是开始收集网络情报的好方法，但其强大之处在于能够进行更频繁、更多目标的扫描，这可能包括能够成功认证目标系统的凭证，以便进行更深入的评估。
- en: Features that make OpenVAS more powerful include highly configurable scan configurations,
    scheduled tasks, automated reporting, and alerting.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 使OpenVAS更强大的功能包括高度可配置的扫描配置、计划任务、自动报告和警报。
- en: Aside from the default scan configurations that are present in the OpenVAS dashboard,
    it also contains some very flexible options, including scheduled scans and customized
    scan types. We will be looking at customized scan configurations.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 除了OpenVAS仪表板中默认的扫描配置外，它还包含一些非常灵活的选项，包括计划扫描和自定义扫描类型。我们将查看自定义扫描配置。
- en: Getting ready
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备开始
- en: 'In order to complete this section, you will need the following:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 为了完成这一部分，你需要以下内容：
- en: OpenVAS successfully installed and configured on your Kali Linux system
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenVAS在你的Kali Linux系统上已成功安装并配置
- en: Access to the Kali system, either from the desktop or a browser
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过桌面或浏览器访问Kali系统
- en: Network access to the systems that were configured as part of the lab discussion
    in earlier sections.
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对在早期章节中作为实验讨论一部分配置的系统的网络访问权限。
- en: You will need to confirm the IP address of the desktop `target1.kalicookbook.local`
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你需要确认桌面`target1.kalicookbook.local`的IP地址
- en: Successfully ping `target1.kalicookbook.local` from the Kali Linux system
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从Kali Linux系统成功ping通`target1.kalicookbook.local`
- en: How to do it...
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin our advanced scanning techniques using OpenVAS:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始使用OpenVAS进行高级扫描技巧：
- en: 'To prepare to configure more in-depth scans, we will start with adding credentials
    we may be aware of. When credentials are known, we will be able to do much deeper
    levels of evaluation. Navigate to Configuration | Credentials. In the upper-left
    part, click on the New Credential icon to bring up the New Credential dialog box.
    Configure as follows, using a domain user from your lab domain:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了准备配置更深入的扫描，我们将首先添加我们可能已知的凭证。当凭证已知时，我们将能够进行更深层次的评估。导航到配置 | 凭证。在左上方，点击“新凭证”图标以弹出新凭证对话框。按照以下方式配置，使用你实验域中的域用户：
- en: '![](assets/24756421-48f8-4382-b793-cb5d99353c65.png)New Credential dialogAs
    new accounts are discovered, they should be added to this section to not only
    be used for authentication but also identification of all places where they are
    used – a password reuse is very common.'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/24756421-48f8-4382-b793-cb5d99353c65.png)新凭证对话框当发现新帐户时，应将其添加到此部分，不仅用于身份验证，还用于识别所有使用该帐户的地方——密码重用非常常见。'
- en: 'The next section we will configure will be the selection of targets. Navigate
    to Configuration | Targets. On this page, you will see some existing target sets,
    including the automatically generated ones used in the quick start wizard. Click
    on the New Target icon to create a new one. Use the following configuration:'
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一部分我们将配置的是目标选择。导航至配置 | 目标。在此页面上，您将看到一些现有的目标集，包括在快速入门向导中使用的自动生成的目标集。点击新建目标图标以创建新的目标。使用以下配置：
- en: '![](assets/737f55c8-d5fa-4bf8-bcaf-ebafd1905f7e.png)Configure New Target'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/737f55c8-d5fa-4bf8-bcaf-ebafd1905f7e.png)配置新目标'
- en: 'Now that the target environment and known credentials are configured, we will
    take a look at the actual scan configuration. Navigate to Configuration | Scan
    Configs. The following scans are typical for a fresh installation:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在目标环境和已知凭据已配置完成，我们将查看实际的扫描配置。导航至配置 | 扫描配置。以下扫描是全新安装的典型配置：
- en: '![](assets/3388367c-11f1-4171-9c90-8fc47ed19dd5.png)List of scan configurations'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3388367c-11f1-4171-9c90-8fc47ed19dd5.png)扫描配置列表'
- en: 'One thing you will notice is that scans can have the same number of NVT''s,
    but have a higher or lower likelihood of causing services to stop. Also, scans
    can reference and leverage data from previous runs. To get a better idea, find
    the full and fast scan configuration, and click on Clone under the Actions column.
    When the new configuration is presented, click on the Edit icon, and give the
    scan a more meaningful name. Review the settings to get a better understanding
    of how the scan is configured:'
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你会注意到，扫描可能具有相同数量的NVTs，但停止服务的可能性高低不同。此外，扫描还可以引用并利用先前运行的数据。为了更好地理解，找到完整扫描和快速扫描的配置，并点击操作栏下的克隆按钮。当新配置显示出来时，点击编辑图标，并为扫描命名一个更有意义的名称。审查设置，以更好地理解扫描的配置方式：
- en: '![](assets/f40060f8-ee1d-4581-a40b-107bbb82cb63.png)Scan configurationThe Fast
    and Full Scan is the configuration we used for our scan in the previous section.
    Despite how quickly the scan runs, it contains a lot of NVTs, demonstrating the
    speed of OpenVAS.'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/f40060f8-ee1d-4581-a40b-107bbb82cb63.png)扫描配置快速扫描和完整扫描是我们在上一节中使用的扫描配置。尽管扫描运行速度很快，但它包含了大量的NVTs，展示了OpenVAS的速度。'
- en: 'We will now put these three components – target, credentials, and a scan configuration
    together to create a task. Navigate to Scans | Tasks, and click on the New Task
    icon. Once opened, enter the following information:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们将把这三个组件——目标、凭据和扫描配置结合起来，创建一个任务。导航至扫描 | 任务，然后点击新建任务图标。打开后，输入以下信息：
- en: 'Name: Scan for vulnerabilities'
  id: totrans-89
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 名称：漏洞扫描
- en: 'Scan targets: Internal network'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描目标：内部网络
- en: Click on the star at the end of the schedule line, and create a new schedule
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 点击计划行末的星标，创建新的计划
- en: 'Scan config: Kali Cookbook'
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描配置：Kali烹饪手册
- en: Leave all other options default, then click on Save
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持所有其他选项为默认设置，然后点击保存
- en: '![](assets/0ca2e83e-90d7-40f4-8f64-64f38d7931cd.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/0ca2e83e-90d7-40f4-8f64-64f38d7931cd.png)'
- en: From this point forward, a weekly, deep vulnerability scan will be run, and
    a report will be generated for review. Multiple scheduled runs can be configured
    as necessary, with email notifications sent at their completion.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从此时起，将每周进行一次深度漏洞扫描，并生成报告以供审阅。可以根据需要配置多个定期扫描，并在完成后发送电子邮件通知。
- en: Installation and Configuration of Nessus
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nessus的安装和配置
- en: Nessus is one of the most widely used penetration testing platforms in the industry
    It used to come pre-installed in Kali up until recent releases. It is sold as
    a commercial product by Tenable, but we will be using the home edition, which
    will allow us to perform scanning on a limited number of IPs and gain the knowledge
    we need to use the tool fully.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus是业界最广泛使用的渗透测试平台之一。直到最近的版本，它一直是Kali的预安装工具。它是由Tenable公司作为商业产品出售的，但我们将使用家庭版，这将允许我们在有限数量的IP上进行扫描，并获得充分使用该工具的知识。
- en: Getting ready
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Kali Linux is running and you are logged in as root
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux正在运行，且你已以root身份登录
- en: Validate the internet connectivity
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证互联网连接
- en: Ensure you have recently done the updates and upgrades to Kali
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你最近已完成Kali的更新和升级
- en: How to do it...
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will perform Nessus setup and initial configuration:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将进行Nessus的设置和初始配置：
- en: 'We must first register for an account by going to the following website [https://www.tenable.com/products/nessus-home](https://www.tenable.com/products/nessus-home)
    and register for an activation code:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先需要通过访问以下网站进行注册 [https://www.tenable.com/products/nessus-home](https://www.tenable.com/products/nessus-home)
    并注册获取激活码：
- en: '![](assets/d76cda76-62c2-4619-a369-8592844fd8b9.png)Tenable registration website'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d76cda76-62c2-4619-a369-8592844fd8b9.png)Tenable 注册网站'
- en: 'Once you register you will be shown a Download link - select it:'
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注册完成后，你将看到一个下载链接——点击它：
- en: '![](assets/647e9d13-86e4-44d5-8336-096aa18967cf.png)Tenable nessus download
    screen'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/647e9d13-86e4-44d5-8336-096aa18967cf.png)Tenable nessus 下载界面'
- en: 'Select the appropriate download Linux for your Kali distribution in our case
    we will be downloading the 64 bit version:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适合你 Kali 发行版的 Linux 下载版本，在我们这个例子中，我们将下载 64 位版本：
- en: '![](assets/d160f9e6-6a59-450e-9991-4443bbb7addb.png)Tenable Nessus OS screen
    selection'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d160f9e6-6a59-450e-9991-4443bbb7addb.png)Tenable Nessus 操作系统选择界面'
- en: 'On the subscription agreement screen check the box to accept the terms of service
    and click Download. Then click Save File:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在订阅协议页面，勾选接受服务条款框并点击下载。然后点击保存文件：
- en: '![](assets/848927c1-eff7-4a32-a6ac-2a78ea5dd864.png)Nessus file download screen'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/848927c1-eff7-4a32-a6ac-2a78ea5dd864.png)Nessus 文件下载界面'
- en: 'Open a terminal window and enter the following commands:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端窗口并输入以下命令：
- en: '[PRE3]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Launch your web browser by clicking the Firefox icon: ![](assets/fdc356e3-473b-4cfe-a6ad-9bdc2eb622b0.png)
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 Firefox 图标启动你的浏览器： ![](assets/fdc356e3-473b-4cfe-a6ad-9bdc2eb622b0.png)
- en: 'Open the following page: `https://localhost:8834`. You will be brought to a
    screen saying where your connection is not secure. Click on Advanced, select Add
    Exception..., and select Confirm Security Exception:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开以下页面： `https://localhost:8834`。你会看到一个提示连接不安全的界面。点击高级，选择添加例外，然后点击确认安全例外：
- en: '![](assets/fe99ebd3-c451-4a31-b1ba-0f557e1c143e.png)Firefox - certificate warning
    screen'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/fe99ebd3-c451-4a31-b1ba-0f557e1c143e.png)Firefox - 证书警告界面'
- en: From the welcome to Nessus screen, click on Continue.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在欢迎使用 Nessus 界面上，点击继续。
- en: 'You will be asked to create a local account. For our purposes, we will use
    the username of the admin, select and use a good password, and select Continue:'
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 系统会要求你创建一个本地帐户。为了方便起见，我们将使用管理员用户名，选择并设置一个好的密码，然后点击继续：
- en: '![](assets/90e32ec0-32e7-4f01-92aa-ca257746ca38.png)Nessus - account setup
    screen'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/90e32ec0-32e7-4f01-92aa-ca257746ca38.png)Nessus - 帐户设置界面'
- en: 'Check your email and enter your Activation Code and select Continue:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 检查你的电子邮件并输入激活码，然后点击继续：
- en: '![](assets/24076d32-22dd-4818-b164-cfdccde1f396.png)Nessus - registration screen'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/24076d32-22dd-4818-b164-cfdccde1f396.png)Nessus - 注册界面'
- en: You will be brought to a Nessus splash screen, and it will begin downloading
    and initializing other setup functions.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到一个 Nessus 欢迎界面，它将开始下载并初始化其他设置功能。
- en: This process will take several minutes to perform so please be patient. While
    you are waiting for the initialization process to complete, you can go ahead and
    create a bookmark for Nessus.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 该过程需要几分钟时间，请耐心等待。等待初始化过程完成时，你可以先为 Nessus 创建一个书签。
- en: You will now be brought to the main login screen; enter the username and password
    previously created and select Sign In.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你将被带到主登录界面；输入之前创建的用户名和密码，然后点击登录。
- en: Let's validate that Nessus is up to date - from the main screen, select the
    Gear icon and click on it.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们验证 Nessus 是否是最新版本——在主屏幕上，点击齿轮图标并选择它。
- en: From the Scanners menu, select Software Update and click on Manual Software
    Update.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从扫描器菜单中选择软件更新，然后点击手动软件更新。
- en: 'From the Manual Software Update screen, select Update all components and click
    on Continue:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在手动软件更新界面，选择更新所有组件并点击继续：
- en: '![](assets/b19dd406-dce5-408d-83b9-3a55586c8446.png)Nessus - manual software
    update screenWait a couple of minutes because when the updates complete, the interface
    may restart and you may be brought back to a login screen.'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b19dd406-dce5-408d-83b9-3a55586c8446.png)Nessus - 手动软件更新界面。请等待几分钟，因为更新完成后，界面可能会重启，并且你可能会回到登录界面。'
- en: 'Ensure Automatic Updates is enabled, specify Update Frequency, and click on Save:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保启用了自动更新，指定更新频率，然后点击保存：
- en: '![](assets/37e04685-bac1-4d05-ab46-b02d6bce7043.png)Nessus - automatic updates
    screenTo save resources when you are not using Nessus, you can stop the service
    by closing the browser and selecting Applications | Vulnerability Analysis | Nessus
    stop.'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/37e04685-bac1-4d05-ab46-b02d6bce7043.png)Nessus - 自动更新屏幕为了节省资源，在不使用Nessus时，你可以通过关闭浏览器并选择“应用程序
    | 漏洞分析 | Nessus停止”来停止服务。'
- en: A basic vulnerability scanning with Nessus
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nessus进行基本漏洞扫描
- en: We will perform some basic vulnerability scans against our network to see if
    they have any known issues or weaknesses with Nessus.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将对我们的网络进行一些基本的漏洞扫描，以查看它们是否有任何已知问题或弱点。
- en: Getting ready
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Kali Linux is running and you are logged in as root
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux正在运行，并且你已以root身份登录
- en: Start the Metasploitable virtual machine
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动Metasploitable虚拟机
- en: Ensure you have completed the setup of Nessus, Nessus is started, and you are
    at the main screen after logging in
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你已完成Nessus的设置，Nessus已经启动，并且你在登录后的主屏幕上。
- en: How to do it...
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now perform our vulnerability scan using Nessus:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将使用Nessus进行漏洞扫描：
- en: 'Although we already have our targets from previous exercises, we will perform
    a basic host discovery to start. Select New Scan:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虽然我们已经有了之前练习中的目标，但我们将先执行一次基本的主机发现。选择“新建扫描”：
- en: '![](assets/b0ae0832-5ff8-4578-9e4e-44f283cd6548.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/b0ae0832-5ff8-4578-9e4e-44f283cd6548.png)'
- en: From the Scanner Templates screen, select Host Discovery.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从扫描模板屏幕中，选择“主机发现”。
- en: 'In the Name field, add a descriptive name and specify your targets. In this
    case, we are going to specify our test network of `192.168.56.0/24` and select
    Save:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“名称”字段中，添加一个描述性的名称并指定你的目标。在此案例中，我们将指定我们的测试网络`192.168.56.0/24`，并选择“保存”：
- en: '![](assets/ea1d2bf7-eb1e-4637-a811-3ec9ab86803f.png)Nessus - host discovery
    screen'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/ea1d2bf7-eb1e-4637-a811-3ec9ab86803f.png)Nessus - 主机发现屏幕'
- en: From the My Scans screen, select the newly created scan and press the launch
    button on the right. The scan will take a couple of minutes to perform. While
    it is running, you will see a green circular icon.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从“我的扫描”屏幕中，选择新创建的扫描任务，并按右侧的启动按钮。扫描过程将持续几分钟。在运行过程中，你将看到一个绿色的圆形图标。
- en: While this scan is running, you can create other scans and start them as well.
    So, you don't have to wait for a scan to finish to move on.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在此扫描运行期间，你可以创建其他扫描并启动它们。所以，你不必等扫描完成后再进行其他操作。
- en: 'Once the scan is complete, you will see a check mark in the scan screen, and
    you can click on it to review the results. From our results, you will see that
    a number of hosts are responding:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，你将在扫描屏幕上看到一个对勾，点击它以查看结果。从我们的结果来看，你将看到有多个主机正在响应：
- en: '![](assets/ba3e1287-44bd-42e0-8650-72c358140318.png)Nessus - host discovery
    results'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/ba3e1287-44bd-42e0-8650-72c358140318.png)Nessus - 主机发现结果'
- en: To perform a basic scan against our Metasploitable VM at `192.168.56.101`, we
    will select Scans from the top menu, New Scan, and select Basic Network Scan.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了对我们的Metasploitable虚拟机`192.168.56.101`进行基本扫描，我们将从顶部菜单中选择“扫描” -> “新建扫描”，然后选择“基本网络扫描”。
- en: 'In the Name field, add a descriptive name; and for targets, use the IP of your
    Metasploitable machine. Click on Save, then launch the scan:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“名称”字段中，添加一个描述性的名称；对于目标，使用你的Metasploitable机器的IP地址。点击“保存”，然后启动扫描：
- en: '![](assets/23bed7d7-0edc-4c30-9e78-465b5c925945.png)Nessus - basic network
    scan'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/23bed7d7-0edc-4c30-9e78-465b5c925945.png)Nessus - 基本网络扫描'
- en: 'This scan will take several minutes to complete, but once done, we can select
    the scan to view the results. You will notice we have discovered several vulnerabilities:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个扫描将需要几分钟时间完成，但完成后，我们可以选择扫描结果进行查看。你会注意到我们已经发现了几个漏洞：
- en: '![](assets/05d673f3-9464-447b-b1f9-baeb176fc12a.png)Nessus - basic network
    scan results'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/05d673f3-9464-447b-b1f9-baeb176fc12a.png)Nessus - 基本网络扫描结果'
- en: 'To take a closer look, select Vulnerabilities at the top. From here, you will
    have a more detailed view of the vulnerabilities in the order of severity. Scroll
    through the list and take a look at all the data presented:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若要更详细查看，选择顶部的“漏洞”选项。此处，你将看到按严重性排序的漏洞的详细视图。滚动浏览列表，查看所有呈现的数据：
- en: '![](assets/3d2409cc-dfde-4657-a322-ecb84f75ce7a.png)Nessus - basic scan results
    - vulnerabilities list'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3d2409cc-dfde-4657-a322-ecb84f75ce7a.png)Nessus - 基本扫描结果 - 漏洞列表'
- en: 'Let''s click on the VNC server vulnerability to get some more specific information
    about that vulnerability. This provides us with a lot of information that we can
    use later to gain remote access to the host:'
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击VNC服务器漏洞，获取更多关于该漏洞的具体信息。这将为我们提供大量可以稍后用来获取远程访问主机的资料：
- en: '![](assets/608eb18b-09de-455e-872e-3eda971f6199.png)Nessus - VNC vulnerability
    detailsTake some time to go through several of the vulnerabilities, and explore
    the information provided. Also, try running scans against other devices you have
    authorization to do so. These could be devices and computers on your personal
    network or other test hosts you may have installed.'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/608eb18b-09de-455e-872e-3eda971f6199.png)Nessus - VNC漏洞详情花些时间浏览几个漏洞，探索提供的信息。此外，尝试对其他有授权的设备进行扫描。这些设备可以是你个人网络中的设备，也可以是你安装的其他测试主机。'
- en: Advanced vulnerability scanning with Nessus
  id: totrans-159
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nessus进行高级漏洞扫描
- en: We will now create a more in-depth scan where we will modify some of the parameters
    of a scan to include other, more targeted testing using Nessus. What we would
    hope to see is better and more complete results of the target host in question.
    This will give you a base level of understanding to customize your scans.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将创建一个更深入的扫描，修改一些扫描参数，以便使用Nessus进行其他更具针对性的测试。我们希望看到的是目标主机更好且更完整的扫描结果。这将为你提供基础理解，帮助你自定义扫描。
- en: Getting ready
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备开始
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 确保以下先决条件：
- en: Kali Linux is running and you are logged in as root
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux正在运行，并且你已经以root身份登录
- en: Start the Metasploitable virtual machine
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动Metasploitable虚拟机
- en: Ensure you have completed the setup of Nessus, Nessus is started, and you are
    at the main screen after logging in
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你已完成Nessus的设置，Nessus已经启动，并且你在登录后已进入主屏幕。
- en: How to do it...
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin our advanced scanning techniques using Nessus:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始使用Nessus的高级扫描技术：
- en: To perform a more advanced scan with Nessus, we will explore several options
    available to us. Select Scans from the top. Select New Scan | Advanced Scan.From
    our General screen, add a descriptive name; and target your Metasploitable VM's
    IP address.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了使用Nessus进行更高级的扫描，我们将探索几个可用的选项。选择顶部的扫描。选择新建扫描 | 高级扫描。在我们的通用屏幕上，添加描述性名称，并将目标设为你的Metasploitable虚拟机的IP地址。
- en: Spend a minute to scroll through the Basic options on the left. We can perform
    scheduled scans. We can also provide notifications when the scan is done.
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 花一分钟浏览左侧的基本选项。我们可以执行定期扫描。扫描完成后，我们还可以提供通知。
- en: Select Discovery |Host Discovery; look through the options available. You will
    note that we can turn on various discovery methods including scanning for network
    printers.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择发现 | 主机发现；浏览可用的选项。你会注意到我们可以开启多种发现方法，包括扫描网络打印机。
- en: Since we already know the specific host that we want to scan, we need not select
    any other options under host discovery. However, if you are doing the subnet scan,
    these options are useful.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们已经知道要扫描的具体主机，因此无需在主机发现下选择其他选项。不过，如果你进行子网扫描，这些选项将非常有用。
- en: 'Select Discovery | Port Scanning, and modify the following options based on
    the following screenshot:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择发现 | 端口扫描，并根据以下截图修改以下选项：
- en: '![](assets/1191e4a2-b720-44c8-9b92-d7974def93f4.png)Nessus - advanced settings'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/1191e4a2-b720-44c8-9b92-d7974def93f4.png)Nessus - 高级设置'
- en: Select Assesment | General. Check Perform thorough tests.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择评估 | 一般。勾选执行彻底测试。
- en: Select Assesment | Brute Force. Check both Oracle Database Tests and Hydra.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择评估 | 暴力破解。勾选Oracle数据库测试和Hydra。
- en: You can add login and password files to target possible or well-known usernames
    and passwords.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以添加登录和密码文件，针对可能的或常见的用户名和密码进行扫描。
- en: Select Assesment | Web Applications. Check Follow dynamically generated pages.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择评估 | Web应用程序。勾选跟随动态生成的页面。
- en: 'Under Application Test Settings, match the following options:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在应用程序测试设置下，匹配以下选项：
- en: '![](assets/d71ada90-7fbe-4bd5-8aa3-a155662395dd.png)Nessus - advanced settings'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d71ada90-7fbe-4bd5-8aa3-a155662395dd.png)Nessus - 高级设置'
- en: 'Select Save at the bottom and launch the scan. This scan will take a long time
    to complete (about 2 hours). However, once completed, let''s review the following
    result. We will see that we have found incremental information and vulnerabilities
    regarding the host in question:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在底部选择保存并启动扫描。此扫描将需要很长时间才能完成（大约2小时）。然而，一旦完成，让我们查看以下结果。我们会看到我们已经发现了关于目标主机的增量信息和漏洞：
- en: '![](assets/553507c5-7abe-4dbd-a58d-d6185f381d31.png)Nessus - scan results screen'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/553507c5-7abe-4dbd-a58d-d6185f381d31.png)Nessus - 扫描结果界面'
- en: Clicking on the results, you will see that we significantly increased the number
    of high-level vulnerabilities. This again is all useful information that we can
    use as we move forward to exploiting our targets.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击结果，你将看到我们显著增加了高级漏洞的数量。这些信息在后续利用目标时非常有用。
- en: Remember to save and log all the information so that you can use this information
    as we move forward.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 记得保存并记录所有信息，以便在后续操作中使用。
- en: The installation and configuration of Nexpose
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nexpose 的安装和配置
- en: Nexpose is a commercial product by Rapid7\. Recently, it appears that it was
    renamed to InsightVM; and there was an attempt to eliminate the community edition
    of Nexpose. However, Rapid7 has reconsidered and made the community edition available
    once again with a 1 year license key.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: Nexpose 是 Rapid7 的一款商业产品。最近，似乎它被重命名为 InsightVM；并且曾尝试取消 Nexpose 的社区版。然而，Rapid7
    已重新考虑并再次提供社区版，许可证有效期为一年。
- en: We will install the community edition of Nexpose here.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在此安装 Nexpose 的社区版。
- en: Getting ready
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保满足以下前提条件：
- en: Take a snapshot of your VM first
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先对你的虚拟机进行快照
- en: Kali Linux is running and you are logged in as root
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 正在运行，你已以 root 用户登录
- en: Disconnect the host-only network and use the NAT network only
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 断开主机专用网络，仅使用 NAT 网络
- en: The Nexpose installation and operation can be confused with multiple interfaces
    and multiple connections. For this and all recipes that involve Nexpose we will
    be doing everything on the NAT network. After you are done with the recipes involving
    Nexpose, you may want to revert back to a snapshot taken just before installation.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: Nexpose 的安装和操作可能会让人困惑，因为有多个界面和多个连接。对于这一点，以及所有涉及 Nexpose 的配方，我们将在 NAT 网络上进行操作。在完成涉及
    Nexpose 的所有步骤后，你可能想恢复到安装前的快照。
- en: How to do it...
  id: totrans-193
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'We will now install and configure Nexpose on our Kali machine:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将在 Kali 机器上安装并配置 Nexpose：
- en: First, we must register on Rapid7's site, obtain a license key, and download
    the code. Open Firefox by clicking on the icon. ![](assets/2b7c9b23-3942-40c4-aae5-b4f6cc84aef6.png)
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，我们必须在 Rapid7 网站上注册，获取许可证密钥并下载代码。点击图标打开 Firefox。![](assets/2b7c9b23-3942-40c4-aae5-b4f6cc84aef6.png)
- en: 'Go to the following site, [https://www.rapid7.com/info/nexpose-community/](https://www.rapid7.com/info/nexpose-community/) and
    register with your information. You will receive an email within a few minutes
    with your license key, as well as being able to download the appropriate software.
    Save the file in the `Downloads` directory:'
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问以下网站，[https://www.rapid7.com/info/nexpose-community/](https://www.rapid7.com/info/nexpose-community/)，并填写注册信息。几分钟后，你将收到一封包含许可证密钥的邮件，同时可以下载相应的软件。将文件保存在
    `Downloads` 目录中：
- en: '![](assets/22991b1d-f9b2-4d50-8dee-769f1da719e6.png)The Nexpose registration
    website'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/22991b1d-f9b2-4d50-8dee-769f1da719e6.png)Nexpose 注册网站'
- en: Now, let's prepare to install Nexpose by opening a terminal window and entering
    the following commands: ![](assets/b5782523-62b1-41b9-98ff-c8f56f42b9a7.png)
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们通过打开终端窗口并输入以下命令来准备安装 Nexpose：![](assets/b5782523-62b1-41b9-98ff-c8f56f42b9a7.png)
- en: '[PRE4]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Once you are presented with the welcome screen, click on Next:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦出现欢迎界面，点击“Next”：
- en: '![](assets/35c1b473-be12-441e-9d33-1383d4285ab4.png)The Nexpose installer screen'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/35c1b473-be12-441e-9d33-1383d4285ab4.png)Nexpose 安装界面'
- en: Select the radio button labeled Security Console with local Scan Engine. Accept
    the default destination directory and click on Next.If you receive an error related
    to insufficient disk space, just click on Continue.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择标记为“Security Console with local Scan Engine”的单选按钮。接受默认的目标目录设置，然后点击“Next”。如果出现与磁盘空间不足相关的错误，只需点击“Continue”。
- en: 'On the system settings screen, click on Next:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在系统设置界面，点击“Next”：
- en: '![](assets/c52d56da-acf1-4f88-a730-b19fa6ac1806.png)The Nexpose installer screen
    - settings compare'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/c52d56da-acf1-4f88-a730-b19fa6ac1806.png)Nexpose 安装界面 - 设置比较'
- en: 'Enter your information on the account details screen, and click on Next:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在账户详情页面输入你的信息，然后点击“Next”：
- en: '![](assets/1168a8bc-84ae-4653-8dea-cdce44f857bf.png)The Nexpose installer screen
    - user details'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/1168a8bc-84ae-4653-8dea-cdce44f857bf.png)Nexpose 安装界面 - 用户信息'
- en: 'On the next screen, select Initialize and start after installation and click
    on Next. It will then go through the installation process and when complete you will
    be presented with the following screen:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，选择 **Initialize and start after installation**（安装后初始化并启动），然后点击 **Next**（下一步）。它将进行安装过程，完成后，您将看到以下屏幕：
- en: '![](assets/4395dbfc-23a4-4589-b98f-f8ed22fddf6e.png)The Nexpose installer screen
    - complete'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/4395dbfc-23a4-4589-b98f-f8ed22fddf6e.png)Nexpose 安装程序屏幕 - 完成'
- en: Click on Finish to close it out.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Finish**（完成）以关闭它。
- en: As it states, it can take several minutes to initialize and start. My recommendation
    is to let it sit for 30 minutes, and then reboot the VM. Once the VM comes backup,
    log in and give it a few minutes before attempting to go to the website.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 正如所述，初始化和启动可能需要几分钟。我的建议是让它静置 30 分钟，然后重启虚拟机。虚拟机重新启动后，登录并等几分钟再尝试访问网站。
- en: 'Open Firefox by clicking on the icon, ![](assets/2b7c9b23-3942-40c4-aae5-b4f6cc84aef6.png) 
    and enter the following address in the address bar: `https://localhost:3780`.
    If you are presented with a security screen, click on Advanced and select Add
    Exception:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击图标打开 Firefox，![](assets/2b7c9b23-3942-40c4-aae5-b4f6cc84aef6.png)，然后在地址栏中输入以下地址：`https://localhost:3780`。如果弹出安全屏幕，请点击
    **Advanced**（高级），然后选择 **Add Exception**（添加例外）：
- en: '![](assets/3af8700c-cbe1-4a6f-b05c-fac2935f0ae8.png)The Firefox security screen'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3af8700c-cbe1-4a6f-b05c-fac2935f0ae8.png)Firefox 安全屏幕'
- en: 'Click on Confirm Security Exception:'
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **Confirm Security Exception**（确认安全例外）：
- en: '![](assets/3a2d364b-4ea8-4df1-9f22-169a24e5b00e.png)The Firefox security exception
    screen'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3a2d364b-4ea8-4df1-9f22-169a24e5b00e.png)Firefox 安全例外屏幕'
- en: 'Once Nexpose has finished installing, you will be brought to the login screen.
    Use the credentials you provided to log on:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 Nexpose 安装完成，您将进入登录屏幕。使用您提供的凭据登录：
- en: '![](assets/88b2844c-b02a-4f05-9f58-cac8de072c1d.png)The Nexpose login screen'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/88b2844c-b02a-4f05-9f58-cac8de072c1d.png)Nexpose 登录屏幕'
- en: 'Almost immediately, you will be brought to the screen asking you to enter your
    product key. Retrieve the email that was sent containing it. Enter the key and
    click on ACTIVATE WITH KEY:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 几乎立刻，您将看到要求您输入产品密钥的屏幕。请找回包含该密钥的电子邮件。输入密钥并点击 **ACTIVATE WITH KEY**（使用密钥激活）：
- en: '![](assets/ab73c658-540b-4257-b455-824c87a6237c.png)The Nexpose enter product
    key screen'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/ab73c658-540b-4257-b455-824c87a6237c.png)Nexpose 输入产品密钥屏幕'
- en: 'Once the activation is successful, you will receive a confirmation screen:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦激活成功，您将收到一个确认屏幕：
- en: '![](assets/1f18ed4e-e98b-4874-b78d-2083978c54b3.png)The Nexpose activation
    success screen'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/1f18ed4e-e98b-4874-b78d-2083978c54b3.png)Nexpose 激活成功屏幕'
- en: 'For now, let''s click on the intro screen, and select Dismiss:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，让我们点击 **intro screen**（介绍屏幕），然后选择 **Dismiss**（忽略）：
- en: '![](assets/e173baf0-f843-46bb-bb0d-4e7858850cdd.png)Welcome to the Nexpose
    screen'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/e173baf0-f843-46bb-bb0d-4e7858850cdd.png)欢迎来到 Nexpose 屏幕'
- en: The updates will automatically install after the startup.
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新将在启动后自动安装。
- en: We suggest moving directly into the next recipe, *Basic vulnerability scanning
    with Nexpose*.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 我们建议直接进入下一个食谱，*使用 Nexpose 进行基本漏洞扫描*。
- en: Basic vulnerability scanning with Nexpose
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Nexpose 进行基本漏洞扫描
- en: Now we will use Nexpose to scan our NAT network to give us information regarding
    vulnerable devices and services. The community edition of Nexpose is limited to
    32 IP addresses but otherwise is fully functional.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将使用 Nexpose 扫描我们的 NAT 网络，以获取关于易受攻击的设备和服务的信息。Nexpose 的社区版限制最多支持 32 个 IP 地址，但其他功能完全可用。
- en: Getting ready
  id: totrans-227
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 正在准备中
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下先决条件：
- en: Kali Linux is running and you are logged in as root
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 正在运行，您已以 root 用户登录
- en: Disconnect the host-only network, and use the NAT network on all VMs
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 断开主机专用网络，并在所有虚拟机上使用 NAT 网络
- en: Start Metasploitable and your Windows XP machine with the NAT network connected
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动 Metasploitable 和您的 Windows XP 机器，并连接到 NAT 网络
- en: The Nexpose installation and operation can be confused with multiple interfaces
    and multiple connections. For this and all recipes that involve Nexpose we will
    be doing everything on the NAT network. After you are done with the recipes involving
    Nexpose, you may want to revert back to a snapshot taken just before installation.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: Nexpose 的安装和操作可能会因多个界面和多个连接而令人困惑。对于这一步骤以及所有涉及 Nexpose 的操作，我们将都在 NAT 网络上进行。在完成所有涉及
    Nexpose 的操作后，您可能需要恢复到安装前的快照。
- en: How to do it...
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Using Nexpose we will now perform a basic vulnerability scan:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Nexpose，我们现在将执行一次基本的漏洞扫描：
- en: Open Firefox by clicking on the icon ![](assets/7a8cc37d-b035-4433-8fca-323742eefb24.png) and
    browse to `https://localhost:3780`.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击图标 ![](assets/7a8cc37d-b035-4433-8fca-323742eefb24.png) 打开 Firefox，浏览至 `https://localhost:3780`。
- en: Log in with the credentials you used earlier.
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用之前的凭据登录。
- en: Click on the Assets button on the left and click on CREATE SITE.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧的 Assets 按钮，然后点击 CREATE SITE。
- en: 'Name your site as you wish; in my case, it is `Lab`:'
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为你的网站命名，随意；在我的案例中，它是 `Lab`：
- en: '![](assets/31b6d1b8-5a05-4e07-8ec1-ada758e05578.png)The Nexpose site creation'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/31b6d1b8-5a05-4e07-8ec1-ada758e05578.png)Nexpose 网站创建'
- en: 'Next, click on ASSETS at the top; and add your machines IP addresses into the
    network; in my case, the Metasploitable VM is `10.0.2.5` and the Windows XP VM
    is `10.0.2.6`:'
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击顶部的 ASSETS；将你的机器 IP 地址添加到网络中；在我的案例中，Metasploitable 虚拟机的 IP 地址是 `10.0.2.5`，Windows
    XP 虚拟机的 IP 地址是 `10.0.2.6`：
- en: '![](assets/9439df38-9966-4d1a-85f4-79ce4258d824.png)The Nexpose asset screen'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9439df38-9966-4d1a-85f4-79ce4258d824.png)Nexpose 资产界面'
- en: 'Now, click on TEMPLATES,and you will notice a variety of scanning templates
    that you can use. We are going to use the default, which is Full audit without
    Web Spider. Take a minute to read through the scanning templates available:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击 TEMPLATES，你将看到可以使用的各种扫描模板。我们将使用默认模板，即没有 Web Spider 的完整审计。花一分钟浏览可用的扫描模板：
- en: '![](assets/9eeaf3fa-c6e0-4682-854b-12451a987eba.png)The Nexpose template screen'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9eeaf3fa-c6e0-4682-854b-12451a987eba.png)Nexpose 模板界面'
- en: 'Now, select SAVE & SCAN from the top right, when asked to validate, feel free
    to check Don''t show this alert again,and select the SAVE & SCAN button:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，从右上角选择 SAVE & SCAN，当系统询问验证时，随意勾选“不要再显示此警告”，然后点击 SAVE & SCAN 按钮：
- en: '![](assets/2e3818dd-1713-4dc5-b088-2f2994a33c30.png)The Nexpose site save and
    scan confirmation screen'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/2e3818dd-1713-4dc5-b088-2f2994a33c30.png)Nexpose 网站保存和扫描确认界面'
- en: 'You can monitor the scan progress and watch for Completed Successfully in the
    Scan Status:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以监控扫描进度，并在扫描状态中查看是否显示 “成功完成”：
- en: '![](assets/86373070-6326-4a88-a17a-c6cc1e72d3f9.png)The Nexpose scan status
    screen'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/86373070-6326-4a88-a17a-c6cc1e72d3f9.png)Nexpose 扫描状态界面'
- en: 'If you scroll down, you will see the identified hosts, IP addresses, operating
    system, and most importantly, a count of vulnerabilities:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果继续向下滚动，你将看到已识别的主机、IP 地址、操作系统，最重要的是漏洞的数量：
- en: '![](assets/a05f8365-2082-492a-8c00-a648b10ac62a.png)The Nexpose device list'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/a05f8365-2082-492a-8c00-a648b10ac62a.png)Nexpose 设备列表'
- en: 'Let''s click on the Metasploitable machine and see what information has been
    collected. You will notice various pieces of information as well as Risk Score:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们点击 Metasploitable 机器，查看已收集到的信息。你将注意到各种信息，以及风险评分：
- en: '![](assets/f58aaf6f-d742-4aa5-b9ce-d623b96cc838.png)The Nexpose host detail
    information'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/f58aaf6f-d742-4aa5-b9ce-d623b96cc838.png)Nexpose 主机详细信息'
- en: 'Continue to scroll down; and you will see a list of vulnerabilities, services,
    installed software, fingerprints, and users:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续向下滚动，你将看到漏洞、服务、已安装的软件、指纹和用户的列表：
- en: '![](assets/9eb6fec7-f841-4aed-b797-087f56f067d4.png)The Nexpose host vulnerability
    information'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9eb6fec7-f841-4aed-b797-087f56f067d4.png)Nexpose 主机漏洞信息'
- en: 'Click on one of the vulnerabilities to gather more information about it:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击其中一个漏洞以获取更多信息：
- en: '![](assets/543b55de-10be-429f-bc3b-553290e3f4ab.png)The Nexpose host vulnerability
    detail information'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/543b55de-10be-429f-bc3b-553290e3f4ab.png)Nexpose 主机漏洞详细信息'
- en: Scroll down the list; and you will see information on the remediation steps,
    which can provide you crucial information on how to exploit the vulnerability.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动列表，你将看到有关修复步骤的信息，这些步骤能为你提供关于如何利用漏洞的关键资料。
- en: Continue to explore the interface, and when done, return to the home screen
    by clicking on the home button on the left. ![](assets/53d7fde5-56b7-491d-9408-65e22817da9b.png)
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 继续探索界面，完成后点击左侧的主页按钮返回主页。 ![](assets/53d7fde5-56b7-491d-9408-65e22817da9b.png)
- en: We suggest moving directly into the next recipe, Advanced vulnerability scanning
    with Nexpose.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们建议直接进入下一个步骤，使用 Nexpose 进行高级漏洞扫描。
- en: Advanced vulnerability scanning with Nexpose
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Nexpose 进行高级漏洞扫描
- en: Now, we will use Nexpose to perform a more advanced and in-depth scan of our
    NAT network. We will use Nexpose in a more aggressive fashion against our target
    machines.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们将使用 Nexpose 对我们的 NAT 网络执行更高级、深入的扫描。我们将以更加激进的方式使用 Nexpose 对目标机器进行扫描。
- en: Getting ready
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Let''s ensure the following prerequisites:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们确保以下前提条件：
- en: Kali Linux is running and you are logged in as root
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 正在运行，且你已以 root 用户登录
- en: Disconnect the host-only network, and use the NAT network on all VMs
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 断开主机仅网络，所有虚拟机都使用NAT网络
- en: Start Metasploitable and your Windows XP machine with the NAT network connected
  id: totrans-265
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 启动Metasploitable和你的Windows XP机器，并连接NAT网络
- en: The Nexpose installation and operation can be confused with multiple interfaces
    and multiple connections. For this and all recipes that involve Nexpose we will
    be doing everything on the NAT network. After you are done with the recipes involving
    Nexpose, you may want to revert back to a snapshot taken just before installation.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: Nexpose的安装和操作可能会让人困惑，因为它涉及多个接口和多个连接。对于涉及Nexpose的所有食谱，我们将使用NAT网络。在完成涉及Nexpose的所有食谱后，您可能想要恢复到安装前的快照。
- en: How to do it...
  id: totrans-267
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin our advanced scanning techniques using Nexpose:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始使用Nexpose进行高级扫描技术：
- en: Open Firefox by clicking on the icon ![](assets/0d204cbb-0e2e-4240-b6bb-cb1da8686f5f.png) and
    browse to `https://localhost:3780`.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击图标打开Firefox ![](assets/0d204cbb-0e2e-4240-b6bb-cb1da8686f5f.png)，然后浏览到`https://localhost:3780`。
- en: Log in with the credentials you used earlier.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用你之前使用的凭据进行登录。
- en: Scroll down to the SITES section, and click on the Lab site.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动到**SITES**部分，点击实验室站点。
- en: 'Click on TEMPLATES at the top; and scroll down to select the radio button for
    Penetration Test. Then, click on SAVE & SCAN at the top:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击顶部的**TEMPLATES**，然后向下滚动选择渗透测试的单选按钮。接着，点击顶部的**SAVE & SCAN**：
- en: '![](assets/122d45c8-adad-452f-b536-5e0408f8c8e5.png)The Nexpose site template
    screen'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/122d45c8-adad-452f-b536-5e0408f8c8e5.png)Nexpose网站模板屏幕'
- en: Once the scan is complete, you will notice that we have found a larger number
    of vulnerabilities than what the original scan produced. Before we continue, we
    are going to add some additional information to our site and scan again.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，你会注意到我们发现的漏洞数量比原始扫描结果更多。在继续之前，我们将向我们的网站添加一些附加信息，并再次进行扫描。
- en: Return to the home screen by clicking on the home button on the left. ![](assets/17510e71-d105-4cf5-9396-99107d9ea965.png)
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击左侧的主页按钮返回到主屏幕。![](assets/17510e71-d105-4cf5-9396-99107d9ea965.png)
- en: Scroll down to the SITES section, and click on the Lab site.
  id: totrans-276
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动到**SITES**部分，点击实验室站点。
- en: 'Now, click on AUTHENTICATION at the top. On the left, select ADD CREDENTIALSand
    enter `msfadmin` for the name; and click on CREATE:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击顶部的**AUTHENTICATION**。在左侧，选择**ADD CREDENTIALS**并输入`msfadmin`作为名称；然后点击**CREATE**：
- en: '![](assets/8517be39-8d14-4fb9-b243-8dc6353fd79d.png)The Nexpose add credential
    screen'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/8517be39-8d14-4fb9-b243-8dc6353fd79d.png)Nexpose添加凭据屏幕'
- en: 'Now, select ACCOUNT on the left and add the following information:'
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，在左侧选择**ACCOUNT**并添加以下信息：
- en: Service: Secure Shell (SSH)
  id: totrans-280
  prefs:
  - PREF_UL
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务：安全外壳（SSH）
- en: Credential Management: Nexpose
  id: totrans-281
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 凭据管理：Nexpose
- en: User Name: `msfadmin`
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名：`msfadmin`
- en: Password: `msfadmin`
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码：`msfadmin`
- en: Confirm Password: `msfadmin`
  id: totrans-284
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认密码：`msfadmin`
- en: Permission Elevation Type: `sudo`
  id: totrans-285
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提升权限类型：`sudo`
- en: Permission Elevation User: `` `msfadmin` ``
  id: totrans-286
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提升权限用户：`` `msfadmin` ``
- en: Permission Elevation Password: `msfadmin`
  id: totrans-287
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 提升权限密码：`msfadmin`
- en: Confirm Permission Elevation Password: `msfadmin`
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确认提升权限密码：`msfadmin`
- en: '![](assets/fd6c16cd-b179-4fd3-85a7-0895043804ad.png)The Nexpose account information'
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/fd6c16cd-b179-4fd3-85a7-0895043804ad.png)Nexpose账户信息'
- en: Now, select CREATE.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，选择**CREATE**。
- en: 'Select TEMPLATES at the top, select Exhaustive,and select SAVE & SCAN:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击顶部的**TEMPLATES**，选择**Exhaustive**，然后选择**SAVE & SCAN**：
- en: '![](assets/73b0da1b-84f8-443f-9fb5-e3ec2672f990.png)The Nexpose templates screenThis
    scan can take some time, so please be patient.'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/73b0da1b-84f8-443f-9fb5-e3ec2672f990.png)Nexpose模板屏幕此扫描可能需要一些时间，请耐心等待。'
- en: Once the scan is complete, scroll down to COMPLETED ASSETS, and click on the
    Metasploitable machine.
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 扫描完成后，向下滚动到**COMPLETED ASSETS**部分，点击Metasploitable机器。
- en: 'You can now scroll down to VULNERABILITIES,and again see a larger list of vulnerabilities.
    Spend some time scrolling through the interface and looking at the vulnerabilities
    found:'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在你可以向下滚动到**VULNERABILITIES**部分，查看更大的漏洞列表。花一些时间浏览界面并查看发现的漏洞：
- en: '![](assets/d97163d8-92c6-4b37-b6ff-1c9de31e9ba3.png)The Nexpose host vulnerability
    information'
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d97163d8-92c6-4b37-b6ff-1c9de31e9ba3.png)Nexpose主机漏洞信息'
