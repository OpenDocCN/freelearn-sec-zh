- en: Chapter 6. Analyzing iOS Devices
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第六章：分析 iOS 设备
- en: The goal of this chapter is to guide you through the analysis of important artifacts
    that are present on an iDevice. In the first part, the focus will be on the artifacts
    generated by the system's features or by the interaction of the user with it,
    referring mainly to the iOS configuration files and to the iOS native applications.
    In the second part, we will go through the manual analysis of some of the most
    common third-party applications, with the goal of giving you a general approach
    that you will be able to apply to all the different apps you will encounter in
    your way. About this topic, there are also several publications available, some
    of which are referenced also in the [Appendix A](apa.html "Appendix A. References"),
    *References*. We will conclude with a case study to provide you also with a proprietary
    analysis software example. All of this focuses on the two main formats used to
    store data, the **SQLite** databases and the property list (`plist`) files.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的目标是引导你分析 iDevice 中存在的重要数据。第一部分将重点分析由系统功能或用户与系统交互产生的数据，主要涉及 iOS 配置文件和 iOS
    原生应用程序。第二部分，我们将手动分析一些最常见的第三方应用程序，目的是为你提供一个通用的方法，你可以将其应用到遇到的所有不同应用程序中。关于这个主题，也有一些已发布的文献，其中一些也在[附录
    A](apa.html "Appendix A. References")中提到，*参考文献*。我们将以案例研究结束，为你提供一个专有分析软件的示例。所有这些内容都聚焦于两种主要的存储数据格式：**SQLite**
    数据库和属性列表（`plist`）文件。
- en: How data is stored
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据如何存储
- en: 'Before actually starting the analysis of the artifacts we can find inside an
    iDevice, let''s take a look at how data is structured and in which format it is stored.
    Inside the Apple filesystem, most of the user data are stored under `/private/var/mobile/`,
    or simply `/User/` that is a symlink pointing to the previous folder. For the
    tests in this chapter, we used an iPhone 4s running iOS 9.0.2:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在真正开始分析 iDevice 内部的文件之前，让我们先看一下数据是如何结构化的，以及它是以何种格式存储的。在 Apple 文件系统中，大多数用户数据存储在
    `/private/var/mobile/` 下，或者简单地说是 `/User/`，这是指向前者的符号链接。在本章的测试中，我们使用的是运行 iOS 9.0.2
    的 iPhone 4s：
- en: '[PRE0]'
  id: totrans-4
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Prior to iOS 8, the applications and their data were all stored under `/private/var/mobile/Applications/`
    while now, starting from iOS 8, the filesystem layout has changed and the application
    data has been separated from its bundles. The current folder structure is as follows:'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iOS 8 之前，应用程序及其数据都存储在 `/private/var/mobile/Applications/` 下，而从 iOS 8 开始，文件系统布局发生了变化，应用程序的数据与其包分开存储。当前的文件夹结构如下：
- en: '`/private/var/mobile/Containers/Bundle/Application/<UUID>/`: This path is the
    actual path where the application bundle is stored.'
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Containers/Bundle/Application/<UUID>/`：这个路径是实际存储应用程序包的路径。'
- en: '`/private/var/mobile/Containers/Data/Application/<UUID>/`: This path is the
    actual path where most of the application data is stored.'
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Containers/Data/Application/<UUID>/`：该路径是实际存储大部分应用程序数据的路径。'
- en: '`/private/var/mobile/Containers/Shared/AppGroup/<UUID>/`: As the name of the
    folder suggests, this path is the path where applications can store data with
    the aim of sharing it with other apps or extensions. This folder is also very
    important because you will find crucial data of some very popular apps, such as
    WhatsApp, Chat db, and so on.'
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Containers/Shared/AppGroup/<UUID>/`：顾名思义，这个路径是应用程序存储数据的路径，目的是与其他应用程序或扩展共享数据。这个文件夹也非常重要，因为你会在其中找到一些非常流行应用程序的关键数据，例如
    WhatsApp、Chat db 等等。'
- en: 'While you may easily guess the meaning of most of the folders from the previous
    `tree` command line output, you may wonder what those names inside the `Application`
    folder are. These are the names of the apps represented by their **Universally
    Unique ID** (**UUID**). Inside each application folder, you will see, most of
    the time, the same structure that appears something like the following:'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以通过前面的 `tree` 命令输出轻松猜测大部分文件夹的含义，但你可能会好奇 `Application` 文件夹内那些名字代表什么。这些是应用程序的名称，通过其**全局唯一标识符**（**UUID**）表示。在每个应用程序文件夹内，你通常会看到与以下类似的结构：
- en: '[PRE1]'
  id: totrans-10
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The following structure is of particular importance:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 以下结构特别重要：
- en: '`<Application_Bundle_Home>/AppName.app`: This file is the application bundle,
    which will not be backed up'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Bundle_Home>/AppName.app`：该文件是应用程序包，不会被备份。'
- en: '`<Application_Data_Home>/Documents/`: This path contains application-specific
    data files'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Data_Home>/Documents/`：该路径包含特定于应用程序的数据文件。'
- en: '`<Application_Data_Home>/Library/`: This path contains application-specific
    files'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Data_Home>/Library/`：该路径包含应用程序特定的文件'
- en: '`<Application_Data_Home>/Library/Preferences/`: This path contains application-preference
    files'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Data_Home>/Library/Preferences/`：该路径包含应用程序偏好设置文件'
- en: '`<Application_Data_Home>/Library/Caches/`: This path contains application-specific
    support files, which will not be backed up'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Data_Home>/Library/Caches/`：该路径包含应用程序特定的支持文件，这些文件不会被备份'
- en: '`<Application_Data_Home>/tmp/`: This path contains temporary files not persistent
    between application launches, which will not be backed up'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`<Application_Data_Home>/tmp/`：该路径包含应用程序启动之间不会持久保存的临时文件，这些文件不会被备份'
- en: Within the Bundle application folder, the `iTunesMetadata.plist` file contains,
    among others, information related to the product, the Apple account name, and
    the date of purchase, which may be useful in some cases. You will find one of
    these files in each application bundle folder.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 在应用程序包文件夹内，`iTunesMetadata.plist` 文件包含与产品、Apple 账户名和购买日期相关的信息，这些信息在某些情况下可能会非常有用。你可以在每个应用程序包文件夹中找到这个文件。
- en: 'Within each Data application folder, there is a hidden file named `.com.apple.mobile_container_manager.metadata.plist` ,
    This contains the name identifier corresponding to the UUID. It may prove to be quite
    handy if you are working on your analysis on a shell and need to identify quickly
    which applications are there:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个数据应用文件夹内，都有一个名为 `.com.apple.mobile_container_manager.metadata.plist` 的隐藏文件。该文件包含与
    UUID 对应的名称标识符。如果你在 shell 上进行分析，并且需要快速识别存在哪些应用程序，这个文件会非常有用：
- en: '[PRE2]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'It is also useful especially, to identify which is your folder of interest,
    by matching the UUID with the application name you are looking for:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，特别有用的是通过匹配 UUID 与你正在寻找的应用程序名称，来确定你的目标文件夹：
- en: '[PRE3]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Last but not least, regarding the format that Apple uses to store its files,
    you will encounter mostly two types, `plist`, which is mainly used for configuration
    files, and `SQLite databases`. We will look more into details about both formats
    in the next section.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，关于 Apple 用来存储文件的格式，你将遇到两种主要格式，`plist`，主要用于配置文件，和 `SQLite 数据库`。我们将在下一节详细讨论这两种格式。
- en: Timestamps
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间戳
- en: 'A very important aspect that an analyst has to pay attention to is the timestamp
    convention used. This is crucial, especially if you are analyzing the artifacts
    manually without one of the specialized commercial tools. Instead of the classical
    **UNIX Epoch Time**, which represents the number of seconds elapsed since January
    1, 1970 00:00:00, the iOS devices adopt the **MAC Absolute Time**, which represents
    the number of seconds elapsed since January 1, 2001 00:00:00\. The difference
    between the two is 978, 307, 200 seconds. There are several resources available
    online that you could use to calculate it, or else you can do it on your Mac by
    adding the preceding value to the MAC Absolute Time value, as in the following
    example:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 分析师必须特别注意的一个重要方面是使用的时间戳约定。这一点尤其重要，尤其是当你在没有专门商业工具的情况下手动分析数据时。与经典的 **UNIX 纪元时间**（表示自1970年1月1日00:00:00以来经过的秒数）不同，iOS
    设备采用 **MAC 绝对时间**，它表示自2001年1月1日00:00:00以来经过的秒数。这两者之间的差异为978,307,200秒。网上有很多资源可以用来计算这个差值，或者你可以通过在
    Mac 上将前述值加到 MAC 绝对时间值来计算，如以下示例所示：
- en: '[PRE4]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Note
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注
- en: Remember to insert the `-u` switch in order to display it in UTC time or else
    the system will give you an output on your local time (or whatever is set as the
    local time on your machine).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 记得插入 `-u` 开关，以便以 UTC 时间显示，否则系统会以你的本地时间（或者你机器上设置的本地时间）输出。
- en: Databases
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据库
- en: The most common type of data storage on the iOS devices (just like on other
    mobile platforms in general) is the use of the SQLite databases. Both native as
    well as third-party applications heavily use SQLite database files to store their
    data, as we will see in more detail later.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iOS 设备上（与其他移动平台类似）最常见的数据存储方式是使用 SQLite 数据库。无论是原生应用还是第三方应用，都大量使用 SQLite 数据库文件来存储数据，稍后我们将详细讨论。
- en: There are several tools available, both free/open source and commercial, such
    as *SQLite Database Browser*, that offer a GUI interface, as well as the SQLite
    command-line utility, available from the official SQLite website at [http://www.sqlite.org/](http://www.sqlite.org/).
    If you are using a Mac OS X machine for the analysis, it will come with the `sqlite3`
    utility preinstalled.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 有几种工具可供使用，包括免费/开源和商业工具，例如 *SQLite Database Browser*，它提供了图形界面，以及来自官方 SQLite 网站的
    SQLite 命令行工具，[http://www.sqlite.org/](http://www.sqlite.org/)。如果你使用的是 Mac OS X
    进行分析，它会预装 `sqlite3` 工具。
- en: The property list files
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 属性列表文件
- en: The property list files, or `plist`, are the other most common data formats
    used in the iOS devices (and in Mac OS X as well). The `plist` files are mainly
    used to store configuration information, preferences, and settings. Their format
    can be compared to the XML format and they are usually represented as binary or
    plain text files.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 属性列表文件（`plist`）是 iOS 设备（以及 Mac OS X）中使用的另一种常见数据格式。`plist` 文件主要用于存储配置信息、偏好设置和设置。其格式可以与
    XML 格式相比，通常表示为二进制或纯文本文件。
- en: A common tool used for parsing a `plist` file under Windows is *plist Editor
    Pro*, whereas if you are using Mac OS X you can either use XCode to view the `plist`
    files or the command-line utility, `plutil`.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 下解析 `plist` 文件的常用工具是 *plist Editor Pro*，而如果你使用的是 Mac OS X，你可以使用 XCode
    查看 `plist` 文件，或者使用命令行工具 `plutil`。
- en: The iOS configuration files
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: iOS 配置文件
- en: 'iOS has many preference and configuration files where it stores tons of data
    that may turn valuable during an investigation. This section provides you with
    a detailed (although not exhaustive) list of some of those files that are useful
    to keep in mind:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: iOS 有许多偏好设置和配置文件，其中存储了大量在调查过程中可能变得有价值的数据。本节为你提供了一些有用的文件清单（尽管并不详尽），供你在调查时参考：
- en: '**Account and device information**: Check out `/private/var/root/Library/Lockdown/data_ark.plist`.
    This contains various information about the device and about its account holder.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账户和设备信息**：查看`/private/var/root/Library/Lockdown/data_ark.plist`。此文件包含有关设备和其账户持有者的各种信息。'
- en: '**Account information**: Have a look at `/private/var/mobile/Library/Accounts/Accounts3.sqlite`.
    This file contains account information.'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账户信息**：查看`/private/var/mobile/Library/Accounts/Accounts3.sqlite`。此文件包含账户信息。'
- en: '**Account information**: Go to `/private/var/mobile/Library/DataAccess/AccountInformation.plist`.
    You''ll find account information used to set up apps here.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**账户信息**：前往`/private/var/mobile/Library/DataAccess/AccountInformation.plist`。在这里你可以找到用于设置应用程序的账户信息。'
- en: '**Airplane Mode**: Check `/private/var/root/Library/Preferences/com.apple.preferences.network.plist`.
    This specifies whether Airplane Mode is presently enabled on the device.'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**飞行模式**：检查`/private/var/root/Library/Preferences/com.apple.preferences.network.plist`。此文件指定设备当前是否启用了飞行模式。'
- en: '**Configuration information and settings**: Go to `/private/var/mobile/Library/Preferences/`.
    This contains the `plist` files with the system configuration and the settings
    of the Apple apps.'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**配置信息和设置**：前往`/private/var/mobile/Library/Preferences/`。此文件包含系统配置和 Apple 应用程序的设置
    `plist` 文件。'
- en: '**Lockdown certificate info**: Navigate to `/private/var/root/Library/Lockdown/pair_records/`.
    This contains information about the lockdown/pairing certificates and also the
    computers the iOS device has been paired with.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**锁定证书信息**：导航至`/private/var/root/Library/Lockdown/pair_records/`。此文件包含关于锁定/配对证书的信息，以及
    iOS 设备曾经配对过的计算机信息。'
- en: '**Network information**: Go to `/private/var/preferences/SystemConfiguration/com.apple.network.identification.plist`.
    This contains a cache of the IP networking information as the previous network
    addresses, router addresses, and name servers used. A timestamp for each network
    is also provided. This file is not present anymore on iOS 9, but you may still
    find it in case the device has been restored from an older iOS version.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**网络信息**：前往`/private/var/preferences/SystemConfiguration/com.apple.network.identification.plist`。此文件包含
    IP 网络信息的缓存，如先前使用的网络地址、路由器地址和名称服务器。每个网络的时间戳也被提供。此文件在 iOS 9 上已经不再存在，但如果设备是从较旧的 iOS
    版本恢复过来的，你仍然可能找到它。'
- en: '**Passwords**: Go to `/private/var/Keychains/`. This contains the password
    saved in the iDevice.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**密码**：前往`/private/var/Keychains/`。此文件包含设备上保存的密码。'
- en: '**SIM card info**: Now have a look at `/private/var/wireless/Library/Preferences/com.apple.commcenter.plist`.
    This contains the ICCID and IMSI of the SIM card last used in the device.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SIM 卡信息**：现在查看`/private/var/wireless/Library/Preferences/com.apple.commcenter.plist`。此文件包含设备上最后使用的
    SIM 卡的 ICCID 和 IMSI。'
- en: '**Springboard**: Go to `/private/var/mobile/Library/Preferences/com.apple.springboard.plist`.
    This contains the order of applications in each screen.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Springboard**：前往`/private/var/mobile/Library/Preferences/com.apple.springboard.plist`。此文件包含每个屏幕上应用程序的排列顺序。'
- en: '**Wi-Fi networks**: Now see `/private/var/preferences/SystemConfiguration/com.apple.wifi.plist`.
    This contains the list of the known Wi-Fi networks, the timestamp of last joined,
    and other useful information. For more information on this and a deeper analysis,
    you can have a look at the article available at [http://articles.forensicfocus.com/2013/09/03/from-iphone-to-access-point/](http://articles.forensicfocus.com/2013/09/03/from-iphone-to-access-point/).'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Wi-Fi 网络**：现在查看`/private/var/preferences/SystemConfiguration/com.apple.wifi.plist`。此文件包含已知
    Wi-Fi 网络的列表、上次连接的时间戳以及其他有用的信息。如需了解更多信息及深入分析，您可以查看此文章：[http://articles.forensicfocus.com/2013/09/03/from-iphone-to-access-point/](http://articles.forensicfocus.com/2013/09/03/from-iphone-to-access-point/)。'
- en: Native iOS apps
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 原生 iOS 应用
- en: 'iDevices come with some native applications already installed by Apple, such
    as Safari browser, e-mail client, calendar, and utilities linked to some basic
    phone functionalities, such as the Camera, Call History, or the SMS/iMessage.
    Most of the evidence produced by these native applications and functionalities
    are located, other than in the application folders themselves, in the `Library`
    folder:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: iDevices 配备了一些由 Apple 预安装的原生应用程序，如 Safari 浏览器、电子邮件客户端、日历，以及与一些基本电话功能相关的实用工具，如相机、通话历史记录或
    SMS/iMessage。由这些原生应用程序和功能生成的大部分证据位于除了应用程序文件夹本身外的`Library`文件夹中：
- en: '`/private/var/mobile/Library/`: In case of physical acquisition or inside the
    device'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/`：在物理提取或设备内部'
- en: '`Backup Service/mobile/Library/`: In case of filesystem acquisition'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Backup Service/mobile/Library/`：在文件系统提取的情况下'
- en: '`Library`: In case of logical acquisition'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Library`：在逻辑提取的情况下'
- en: Here, we can find data related to communication, preferences, Internet history
    and cache, keyboard keystrokes, and much more. Other than the `Library` folder,
    the other very important location is the `Media` folder, `/private/var/mobile/Media/`,
    where user-created pictures and audio files are usually stored among other things.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们可以找到与通信、偏好设置、互联网历史和缓存、键盘输入以及更多内容相关的数据。除了`Library`文件夹外，另一个非常重要的位置是`Media`文件夹，`/private/var/mobile/Media/`，其中通常存储用户创建的图片和音频文件等内容。
- en: Address book
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地址簿
- en: As one could imagine, the `AddressBook` folder under `Library` refers to the
    information present in the Contact application related to the personal contacts
    and is stored in SQLite database format. There are two databases of interest, `AddressBook.sqlitedb`
    and `AddressBookImages.sqlitedb`.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所料，`Library`下的`AddressBook`文件夹指的是与联系人应用程序相关的个人联系人信息，并以 SQLite 数据库格式存储。有两个主要的数据库：`AddressBook.sqlitedb`和`AddressBookImages.sqlitedb`。
- en: '`AddressBook.sqlitedb` contains the actual information saved for each contact,
    such as name, surname, phone number, e-mail address, and so on. In this database,
    the tables of interest containing the information mentioned are mainly `ABPerson`
    and `ABMultiValue`.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '`AddressBook.sqlitedb`包含每个联系人保存的实际信息，如姓名、姓氏、电话号码、电子邮件地址等。在这个数据库中，主要包含相关信息的表是`ABPerson`和`ABMultiValue`。'
- en: '`AddressBookImages.sqlitedb` is the database containing the images that the
    user may have associated to a contact, which is basically the image appearing
    every time a call to that contact is made or received. The main table of interest
    in this database is `ABFullSizeImage`.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '`AddressBookImages.sqlitedb`是包含用户可能为联系人关联的图片的数据库，基本上就是每次与该联系人通话时显示的图片。该数据库中主要感兴趣的表是`ABFullSizeImage`。'
- en: Audio recordings
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 音频录音
- en: The Voice Memos app, preinstalled on the iDevices, lets the user record voice
    memos. These memos are stored in `/private/var/mobile/Media/Recordings/`. In this
    folder, there is the `Recordings.db` database that contains information about
    each voice memo stored, such as the date, duration, memo name, and filename of
    the actual audio file, which is stored in the same folder.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 预装在 iDevices 上的语音备忘录应用程序允许用户录制语音备忘录。这些备忘录存储在`/private/var/mobile/Media/Recordings/`文件夹中。在此文件夹中，有一个名为`Recordings.db`的数据库，包含每个语音备忘录的相关信息，如日期、时长、备忘录名称以及实际音频文件的文件名，音频文件存储在同一文件夹中。
- en: Calendar
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 日历
- en: 'The Calendar application allows the user to manually create events, as well
    as sync them with other applications, such as the related Mac OS X version of
    the app or other third-party applications and services. Such information is stored
    in the following two databases:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 日历应用程序允许用户手动创建事件，并将其与其他应用程序同步，如相关的Mac OS X版本应用程序或其他第三方应用程序和服务。这些信息存储在以下两个数据库中：
- en: '`/private/var/mobile/Library/Calendar/Calendar.sqlitedb`'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/Calendar/Calendar.sqlitedb`'
- en: '`/private/var/mobile/Library/Calendar/Extras.db`'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/Calendar/Extras.db`'
- en: The `Calendar.sqlitedb` database is the main one and contains basically all
    the information related to the events present in the Calendar, while `Extras.db`
    contains other information such as the Calendar settings.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '`Calendar.sqlitedb`数据库是主要数据库，包含与日历中所有事件相关的基本信息，而`Extras.db`则包含其他信息，如日历设置。'
- en: Call history
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通话记录
- en: 'When we press the phone application icon, we see a lot of information, almost
    all coming from one database, `/private/var/wireless/Library/CallHistoryDB/CallHistory.storedata`.
    Here we can find tracks about incoming, outgoing, and missed calls along with
    the time and date they occurred and their duration. This database refers to both
    standard calls and FaceTime calls. As we can see in the following example, the
    table of interest is `call`:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们按下电话应用程序图标时，我们会看到很多信息，这些信息几乎都来自同一个数据库`/private/var/wireless/Library/CallHistoryDB/CallHistory.storedata`。在这里，我们可以找到关于来电、去电和未接来电的记录，包括发生的时间、日期和通话时长。该数据库既包含标准电话记录，也包含FaceTime通话记录。如以下示例所示，感兴趣的表是`call`：
- en: '[PRE5]'
  id: totrans-67
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The most interesting fields are as follows:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 最有趣的字段如下：
- en: '`ZANSWERED`: This indicates if the call has been accepted (`1`) or rejected
    (0).'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZANSWERED`：表示通话是否被接听（`1`）或拒绝（0）。'
- en: '`ZCALLTYPE`: This indicates if it was a standard phone call (`1`), a FaceTime
    audio only call (`16`), or a full audio/video FaceTime call (`8`).'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZCALLTYPE`：表示通话类型，是标准电话（`1`）、仅FaceTime语音通话（`16`）还是完整的FaceTime音视频通话（`8`）。'
- en: '`ZORIGINATED`: This indicates whether the call was outgoing (`1`) or incoming
    (0).'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZORIGINATED`：表示通话是外拨（`1`）还是接入（0）。'
- en: '`ZDATE`: This indicates the date and time of when the call happened. Note that
    this value is expressed in Mac Absolute time, which represents the number of seconds
    elapsed since 1/1/2001 00:00:00 GMT. Therefore, if you don''t have an application
    that converts the time for you, simply add 978307200 and use the `date` command
    as follows (example from a Mac):'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZDATE`：表示通话发生的日期和时间。请注意，这个值是以Mac绝对时间表示的，Mac绝对时间表示的是自2001年1月1日00:00:00 GMT以来的秒数。因此，如果没有转换时间的应用程序，您只需加上978307200，然后使用`date`命令，如下所示（来自Mac的示例）：'
- en: '[PRE6]'
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '`ZISO_COUNTRY_CODE`: This indicates, as the name suggests, the two letter ISO
    country code according to the prefix of the phone number indicated in the `ZADDRESS`
    field.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZISO_COUNTRY_CODE`：如其名称所示，表示根据`ZADDRESS`字段中电话号段的前缀对应的两位ISO国家代码。'
- en: '`ZLOCATION`: This indicates the full name of the country according to the preceding
    field.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZLOCATION`：表示根据前述字段，国家的全名。'
- en: '`ZADDRESS`: Last but not least, this field indicates the phone number where
    the call came from or went to.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ZADDRESS`：最后但同样重要的，这个字段表示通话的电话号码，无论是来电还是去电。'
- en: Starting from iOS 8, the path has slightly changed from `/private/var/wireless/Library/CallHistory/call_history.db`
    to `/private/var/wireless/Library/CallHistoryDB/CallHistory.storedata`. If a device
    has been upgraded from iOS 7 to iOS 8, you will find both the old and the new
    databases, with the call history data prior the upgrade.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 从iOS 8开始，路径略有变化，从`/private/var/wireless/Library/CallHistory/call_history.db`更改为`/private/var/wireless/Library/CallHistoryDB/CallHistory.storedata`。如果设备是从iOS
    7升级到iOS 8，您会同时找到旧数据库和新数据库，其中包含升级前的通话记录数据。
- en: There are yet two other important files related to the phone application to
    be analyzed. The plist file, `/private/var/mobile/Library/Preferences/com.apple.mobile
    phone.plist`, has the `DialerSavedNumber` value, which is the last phone number
    manually entered into the dialer and actually dialed. The important thing to note
    here is that this value will remain even if the user deletes the last call placed
    from the call history list, which will of course be also deleted from the `CallHistory.storedata`
    database we have just analyzed. The second file that may also be of interest during
    an investigation is `/private/var/mobile/Library/Preferences/com.apple.mobilephone.speeddial.plist`,
    which contains the phone numbers added to the phone favorites list.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 还有另外两个与电话应用相关的重要文件需要分析。plist 文件 `/private/var/mobile/Library/Preferences/com.apple.mobile
    phone.plist` 中有 `DialerSavedNumber` 值，它表示最后一次手动输入并实际拨打的电话号码。这里需要注意的重要事项是，即使用户从通话历史记录中删除了最后一次拨出的电话，这个值仍会保留，当然，通话历史记录中的该条目也会从我们刚刚分析过的
    `CallHistory.storedata` 数据库中删除。另一个在调查过程中可能感兴趣的文件是 `/private/var/mobile/Library/Preferences/com.apple.mobilephone.speeddial.plist`，它包含添加到电话快捷拨号列表中的电话号码。
- en: E-mail
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 电子邮件
- en: 'Apple Mail client-related data is stored at `/private/var/mobile/Library/Mail/`,
    which contains databases storing the e-mail messages sent, received, and drafted
    that are stored on the device, as well as a folder for each separate account (POP/IMAP)
    that has been configured within the Mail application. So, you may want to take
    a look at all the content you find in there. To give you an example, the folder
    content may look like the following command:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 与 Apple Mail 客户端相关的数据存储在 `/private/var/mobile/Library/Mail/` 中，该目录包含存储在设备上的发送、接收和草拟的电子邮件消息数据库，以及每个在
    Mail 应用中配置的单独帐户（POP/IMAP）文件夹。所以，你可能想查看其中的所有内容。举个例子，文件夹内容可能如下所示：
- en: '[PRE7]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Although without any extension, most of these files are SQLite databases (as
    you may guess from the presence of the `-shm` and `-wal` files). For example,
    the Envelope Index database contains the list of mailboxes and metadata, while
    the Protected Index database contains the list of the e-mails present in the Inbox,
    where the last one is the most recent:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然没有任何扩展名，但这些文件大多数都是 SQLite 数据库（你可以从存在的 `-shm` 和 `-wal` 文件中猜到）。例如，Envelope Index
    数据库包含邮箱列表和元数据，而 Protected Index 数据库包含收件箱中邮件的列表，其中最后一封邮件是最新的：
- en: '[PRE8]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: Images and photos
  id: totrans-84
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 图片和照片
- en: 'User photos inside an iDevice are stored at `/private/var/mobile/Media/`, where
    the two main folders are as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 用户在 iDevice 中的照片存储在 `/private/var/mobile/Media/`，该目录下有两个主要文件夹如下：
- en: '`DCIM`: This folder contains the user-created photos via the built-in camera
    (usually in the `.jpg` format) and screenshots taken by the user by pressing the
    Power and Home buttons together (usually in the `.png` format)'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`DCIM`：此文件夹包含通过内置相机用户创建的照片（通常是 `.jpg` 格式）以及用户通过同时按下电源键和主页键截取的屏幕截图（通常是 `.png`
    格式）'
- en: '`PhotoData`: This folder contains, among other data, the photo albums synced
    with a computer or the cloud'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PhotoData`：此文件夹包含其他数据，其中包括与计算机或云同步的相册'
- en: Moreover, it is very important not to forget the *thumbnails*. In fact, for
    each photo, iOS will generate a thumbnail, store it in `/private/var/mobile/Media/PhotoData/Thumbnails/`,
    and save any information about the original image in the `Photos.sqlite` database
    within the `PhotoData` folder. This is important because thumbnails and information
    related to the original picture may still be available or recoverable from the
    SQLite deleted entries (refer to the related section later on in this chapter)
    even if the original picture is not available anymore.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，非常重要的是不要忘记 *缩略图*。事实上，对于每张照片，iOS 会生成一个缩略图，存储在 `/private/var/mobile/Media/PhotoData/Thumbnails/`
    中，并将关于原始图片的任何信息保存在 `PhotoData` 文件夹内的 `Photos.sqlite` 数据库中。这一点很重要，因为即使原始图片不再可用，缩略图和与原始图片相关的信息仍可能可用或可以从
    SQLite 删除的条目中恢复（稍后在本章中将涉及相关部分）。
- en: When analyzing photos, it is important to remember to check for the Exif metadata,
    which may contain other precious information such as geographical coordinates
    of where the photo was taken.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在分析照片时，重要的是要记得检查 Exif 元数据，它可能包含其他宝贵的信息，例如拍摄照片的地理坐标。
- en: Note
  id: totrans-90
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: For an in-depth analysis of this topic, we advise the reader to have a look
    at the article available at [http://linuxsleuthing.blogspot.it/2013/05/ios6-photo-streams-recover-deleted.html](http://linuxsleuthing.blogspot.it/2013/05/ios6-photo-streams-recover-deleted.html)
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 对于该主题的深入分析，我们建议读者查看以下文章：[http://linuxsleuthing.blogspot.it/2013/05/ios6-photo-streams-recover-deleted.html](http://linuxsleuthing.blogspot.it/2013/05/ios6-photo-streams-recover-deleted.html)
- en: Maps
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地图
- en: Since the release of iOS 6 in 2012, Apple includes its own Maps application.
    Files and locations of interest are located within the main folder `/private/var/mobile/Containers/Data/Application/2EA1D4AC-1C04-4CA5-8A77-349D47468457/`,
    which contains the history of the searches made by the users as well as the list
    of locations bookmarked, and also the `Library/Preferences/com.apple.Maps.plist`
    file, which contains information related to the last search that has been made
    by the user, such as longitude and latitude coordinates as well as the search
    query made.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 自 2012 年 iOS 6 发布以来，苹果自带了地图应用。相关文件和位置位于主文件夹 `/private/var/mobile/Containers/Data/Application/2EA1D4AC-1C04-4CA5-8A77-349D47468457/`
    中，其中包含用户搜索历史以及已收藏的地点列表，还包括 `Library/Preferences/com.apple.Maps.plist` 文件，该文件包含与用户最近搜索相关的信息，例如经纬度坐标和搜索查询内容。
- en: '![Maps](img/image_06_001.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![地图](img/image_06_001.jpg)'
- en: Notes
  id: totrans-95
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 便签
- en: The Notes application stores information about the user-created notes in `/private/var/mobile/Library/Notes/notes.sqlite`.
    The main tables of interest are `ZNOTE` and `ZNOTEBODY`; they contain note title,
    content, creation and modification date, and so on.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Notes 应用程序将用户创建的便签信息存储在 `/private/var/mobile/Library/Notes/notes.sqlite` 中。主要关注的表是
    `ZNOTE` 和 `ZNOTEBODY`，它们包含便签标题、内容、创建和修改日期等信息。
- en: '[PRE9]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Note
  id: totrans-98
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Starting from iOS 9.3, Apple introduced the possibility of protecting/locking
    notes via a password. Since the user has to choose each note that has to be password
    protected (it is not an *all or nothing* model), you may not be able to access
    those notes directly.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 从 iOS 9.3 开始，苹果引入了通过密码保护/锁定便签的功能。由于用户必须选择每个需要密码保护的便签（这不是一个 *全有或全无* 的模式），因此你可能无法直接访问这些便签。
- en: Safari
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Safari
- en: 'Safari is the Apple browser that comes preinstalled with every iDevice. It
    allows the user to browse websites, save bookmarks, and so on. All these activities
    are stored in the two locations, `/private/var/mobile/Library/Safari/` and the
    Safari main application folder, `/private/var/mobile/Containers/Data/Application/C6254D15-92CE-4989-9427-26A589DFA8B7/`.
    In particular, the folder detail is given as follows:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Safari 是苹果设备中预装的浏览器。它允许用户浏览网页、保存书签等。所有这些活动都会存储在两个位置：`/private/var/mobile/Library/Safari/`
    和 Safari 主应用文件夹 `/private/var/mobile/Containers/Data/Application/C6254D15-92CE-4989-9427-26A589DFA8B7/`
    中。具体文件夹详情如下：
- en: '**Safari Bookmarks**: This information is stored in `/private/var/mobile/Library/Safari/Bookmarks.db`.
    It contains the database with the saved bookmarks.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 书签**：这些信息存储在 `/private/var/mobile/Library/Safari/Bookmarks.db` 中。它包含保存的书签数据库。'
- en: '**Safari Cookies**: This information is stored at `/private/var/mobile/Library/Cookies/Cookies.binarycookies`.
    Website cookies are stored here. To parse this binary file you can use the `BinaryCookieReader.py`
    Python script available on GitHub ([https://gist.github.com/sh1n0b1/4bb8b737370bfe5f5ab8](https://gist.github.com/sh1n0b1/4bb8b737370bfe5f5ab8)).'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari Cookies**：这些信息存储在 `/private/var/mobile/Library/Cookies/Cookies.binarycookies`
    中。网站的 Cookies 存储在这里。要解析这个二进制文件，你可以使用 GitHub 上的 `BinaryCookieReader.py` Python
    脚本（[https://gist.github.com/sh1n0b1/4bb8b737370bfe5f5ab8](https://gist.github.com/sh1n0b1/4bb8b737370bfe5f5ab8)）。'
- en: '**Safari Temporary Files**: This information is stored at `<app_folder>/Library/Caches/WebKit/NetworkCache/Version
    4/`. This folder contains another two subfolders, `Blob` and `Record`, where temporary
    files and code of the visited pages are stored. This is important because it will
    be possible to see/rebuild the same page as it was seen/visited by the user. Another
    important thing to remember is that when the user deletes their browser cache,
    these folders will be cleared.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 临时文件**：这些信息存储在 `<app_folder>/Library/Caches/WebKit/NetworkCache/Version
    4/` 中。该文件夹包含两个子文件夹，`Blob` 和 `Record`，它们存储着访问页面的临时文件和代码。这一点很重要，因为这样就可以查看/重建用户曾经访问过的页面。另一个需要记住的重要点是，当用户删除浏览器缓存时，这些文件夹将被清空。'
- en: '**Safari search history**: This information is stored in `<app_folder>/Library/Preferences/com.apple.mobilesafari.plist`.
    It contains a list of recent searches made through Safari. An important thing
    to remember is that when the user deletes their browser cache or history, this
    file will not be erased, but in iOS 9 its content will be cleared.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 搜索历史**：这些信息存储在`<app_folder>/Library/Preferences/com.apple.mobilesafari.plist`中。它包含了通过
    Safari 进行的最近搜索记录。一个重要的要点是，当用户删除浏览器缓存或历史记录时，这个文件不会被删除，但在 iOS 9 中，文件内容会被清除。'
- en: '**Safari Suspended State**: This information is stored in `<app_folder>/Library/Safari/SuspendState.plist`.
    It contains the last state of Safari at the time when the user pressed the Home
    button, the iPhone was powered off, or the browser crashed. In order to be able
    to restore such a state when the browser resumes, this file contains the list
    of windows and websites that were open when one of the previously-mentioned events
    occurred and the browser closed.'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 暂停状态**：这些信息存储在`<app_folder>/Library/Safari/SuspendState.plist`中。它包含了用户按下
    Home 按钮、iPhone 关机或浏览器崩溃时 Safari 的最后状态。为了在浏览器恢复时能够恢复此状态，该文件包含了在上述事件发生并关闭浏览器时打开的窗口和网站的列表。'
- en: '**Safari Thumbnails**: This information is stored at `<app_folder>/Library/Caches/Safari/Thumbnails/`.
    This folder contains screenshots of the last active browser pages viewed via WebKit,
    for example, by the third-party apps.'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 缩略图**：这些信息存储在`<app_folder>/Library/Caches/Safari/Thumbnails/`中。这个文件夹包含了通过
    WebKit 浏览器查看的最后一个活跃网页的截图，例如通过第三方应用程序。'
- en: '**Safari Web Cache**: This information is stored in `Library/Caches/com.apple.mobilesafari/Cache.db`.
    It contains objects that are recently downloaded and cached in the Safari browser.'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 网页缓存**：这些信息存储在`Library/Caches/com.apple.mobilesafari/Cache.db`中。它包含了最近下载并缓存的
    Safari 浏览器对象。'
- en: '**Safari History**: This information is stored in `<app_folder>/Library/Safari/History.db`.
    It contains the Safari web browser history. Of course, if it has been cleared
    by the user, it will not contain the history prior to that.'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Safari 历史记录**：这些信息存储在`<app_folder>/Library/Safari/History.db`中。它包含了 Safari
    浏览器的历史记录。当然，如果用户已清除历史记录，则此文件将不包含清除前的历史。'
- en: SMS/iMessage
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 短信/iMessage
- en: Similar to the Call History, there is one database storing SMSes, MMSes, and
    iMessages sent or received by the user. The database is at `/private/var/mobile/Library/SMS/sms.db`,
    and it also contains the information related to attachments eventually present
    in MMSes or iMessages. In such cases, the files part of MMSes or iMessages are
    stored in the subfolder, `Library/SMS/Attachments/`. Finally, the last folder
    of interest regarding SMS is `Library/SMS/Drafts`, where each draft contains its
    own folder as the `plist` file, which is timestamped, identifying when the message
    was typed and then abandoned.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于通话历史，有一个数据库存储用户发送或接收的短信、彩信和 iMessage。该数据库位于`/private/var/mobile/Library/SMS/sms.db`，还包含与彩信或
    iMessage 附件相关的信息。在这些情况下，彩信或 iMessage 中的文件存储在子文件夹`Library/SMS/Attachments/`中。最后，关于短信的另一个有趣文件夹是`Library/SMS/Drafts`，其中每个草稿都有自己的文件夹，存储`plist`文件，并且带有时间戳，标识消息何时被输入并被放弃。
- en: Voicemail
  id: totrans-112
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 语音邮件
- en: The `Voicemail` folder at `/private/var/mobile/Library/` contains both the audio
    file of each voicemail recorded message stored as AMR codec audio files and the
    `voicemail.db` database, where information related to each voicemail audio message
    file is saved, such as the sender, the date, the duration, and so on.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/`中的`Voicemail`文件夹包含了每个语音邮件录音的音频文件，这些文件存储为 AMR
    编解码音频文件，同时还有`voicemail.db`数据库，保存了与每个语音邮件音频文件相关的信息，例如发送者、日期、时长等。'
- en: Other iOS forensic traces
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他 iOS 法医痕迹
- en: In this section, we will list some other locations of interesting artifacts.
    Those listed here are not strictly related to a particular application, but are
    rather generated from the usage of the device by the interaction of the user with
    the system.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将列出一些其他有趣的文件位置。这里列出的内容并不严格与特定应用相关，而是由用户与系统的交互所产生的设备使用数据。
- en: Clipboard
  id: totrans-116
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 剪贴板
- en: The `pasteboardDB` file under `/private/var/mobile/Library/Caches/com.apple.UIKit.pboard`
    is a binary file that contains a cached copy of the data stored on the device's
    clipboard, which means that the data that have been cut/copied and pasted by the
    user (that is, passwords or other portions of text that may become relevant) will
    also be present there.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/Caches/com.apple.UIKit.pboard` 下的 `pasteboardDB`
    文件是一个二进制文件，包含了设备剪贴板上数据的缓存副本，这意味着用户剪切/复制并粘贴的数据（例如密码或其他可能相关的文本部分）也会出现在其中。'
- en: Keyboard
  id: totrans-118
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 键盘
- en: 'Two of the iOS features are the auto correction and auto completion of the
    text while the user is typing. To do this, every time the user types, iOS caches
    their text in the `dynamic-text.dat` file:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: iOS 的两个功能是自动修正和自动完成用户输入的文本。为此，每当用户输入时，iOS 会将文本缓存到 `dynamic-text.dat` 文件中：
- en: '![Keyboard](img/B05100_06_02-1.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![键盘](img/B05100_06_02-1.jpg)'
- en: 'This file is located at `/private/var/mobile/Library/Keyboard`. This is the
    default file, but of course, iOS creates one for each language used and configured
    in the keyboard and stores it in the same folder. In the following example, the
    second file is related to the Italian keyboard configuration:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 这个文件位于 `/private/var/mobile/Library/Keyboard`。这是默认文件，但当然，iOS 会为每个配置并使用的语言创建一个文件，并将其存储在同一文件夹中。在以下示例中，第二个文件与意大利语键盘配置相关：
- en: '[PRE10]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Location
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 位置
- en: With iOS 4, there was the **Consolidated GPS cache**, a database containing
    location information associated with every Wi-Fi hotspot and cell tower that the
    device had been in range with. In such a database located at `/private/var/root/Library/Caches/locationd/consolidated.db`,
    the `WifiLocation` and `CellLocation` tables contained information cached locally
    by the device and included the Wi-Fi access points and cellular towers that came within
    range of the device at a given time and included a horizontal accuracy (in meters),
    believed to be a guesstimate at the distance from the device. Such data, other
    than remaining forever in that database, was allegedly sent periodically to Apple.
    After the so-called **location gate** scandal that arose after the discovery of
    such a database, Apple kind of dismissed it.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 在 iOS 4 中，曾有 **合并的 GPS 缓存**，这是一个包含与设备接触过的每个 Wi-Fi 热点和基站塔相关位置信息的数据库。这个数据库位于 `/private/var/root/Library/Caches/locationd/consolidated.db`，其中的
    `WifiLocation` 和 `CellLocation` 表包含了设备本地缓存的信息，包括当时在设备范围内的 Wi-Fi 接入点和基站塔，并且包含了一个水平精度（单位：米），被认为是设备与这些位置之间的估计距离。这些数据除了永远保存在该数据库中外，
    reportedly 还会定期发送给苹果。所谓的 **位置门** 丑闻，就是在发现这个数据库后爆发的，苹果最终基本上放弃了该数据库。
- en: However, the new databases that took the place of `consolidated.db` are `cache_encryptedA.db`,
    `lockCache_encryptedA.db`, and `cache_encryptedB.db` stored under the `/private/var/root/Library/Caches/locationd/`
    folder. As for its predecessor, these databases contain geographical coordinates
    of frequent and recent locations, Wi-Fi access points, and apparently, cell towers
    that have been in the range of the device. The only differences in this case are
    that this data lasts only for 8 days before being cleared out. To dump these databases
    you may also use a Python script from Sarah Edwards (her Twitter handle is `@iamevltwin`),
    **iOS Location Scraper**, which can be downloaded from the GitHub repository at [https://github.com/mac4n6/iOS-Locations-Scraper](https://github.com/mac4n6/iOS-Locations-Scraper).
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，取代 `consolidated.db` 的新数据库是 `cache_encryptedA.db`、`lockCache_encryptedA.db`
    和 `cache_encryptedB.db`，这些文件存储在 `/private/var/root/Library/Caches/locationd/`
    文件夹下。与其前身一样，这些数据库包含频繁和最近位置的地理坐标、Wi-Fi 接入点，以及显然是设备范围内的基站塔。这些数据的唯一区别在于，它们仅保存 8 天后会被清除。为了导出这些数据库，你还可以使用
    Sarah Edwards（她的 Twitter 账号是 `@iamevltwin`）提供的 Python 脚本 **iOS Location Scraper**，可以从
    GitHub 仓库下载：[https://github.com/mac4n6/iOS-Locations-Scraper](https://github.com/mac4n6/iOS-Locations-Scraper)。
- en: The other very important point to keep in mind regarding the geolocation artifacts
    is that many other applications, especially third-party ones such as those about
    fitness that people may use to keep track of their path when running, may store
    geographical coordinates and related timestamps as well and in clear text.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个非常重要的需要记住的关于地理位置信息的要点是，许多其他应用程序，尤其是第三方应用程序（如人们用来追踪跑步路径的健身应用程序）可能也会存储地理坐标和相关时间戳，且通常以明文存储。
- en: Snapshots
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 快照
- en: 'Every time a user pushes the Home button to move from an application screen
    back to the desktop, iOS uses a **fade-out** effect for the transition between
    the two screens. To do so, iOS creates screenshots of the current screen and then
    applies the fade-out effect to that picture. These screenshots are stored in the
    following locations:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 每当用户按下Home按钮从应用屏幕返回桌面时，iOS会使用**渐变消失**效果在两个屏幕之间进行过渡。为此，iOS会截取当前屏幕的截图，并将渐变消失效果应用到该截图上。这些截图存储在以下位置：
- en: '`/private/var/mobile/Library/Caches/Snapshots/`'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Library/Caches/Snapshots/`'
- en: '`/private/var/mobile/Containers/Data/Applications/<UUID>/Library/Caches/Snapshots/`'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/Containers/Data/Applications/<UUID>/Library/Caches/Snapshots/`'
- en: The first path refers to the preinstalled Apple applications, while the second
    is the path where to find the snapshots for each application. It is clear that
    this feature could be a goldmine of information. For example, there could be screenshots
    containing SMSes or e-mail messages that are no longer available because they
    have been deleted.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个路径指的是预装的Apple应用，而第二个路径则是每个应用的快照存放位置。显然，这个特性可能是一个信息宝库。例如，其中可能包含已经被删除的短信或电子邮件的截图，这些信息现在已经无法恢复。
- en: Note
  id: totrans-132
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: It is important to remember that only the last snapshot is taken for each application.
    Therefore, the analyst should interact and browse inside the device as little
    as possible in order not to overwrite and lose possible crucial evidence.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 重要的是要记住，每个应用只会截取最后一张快照。因此，分析人员应尽量减少与设备的交互和浏览，以免覆盖和丢失可能至关重要的证据。
- en: Wallpaper
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 壁纸
- en: Current images used as wallpapers are stored in `/private/var/mobile/Library/SpringBoard/`.
    There are two different images:`HomeBackgroundThumbnail.jpg`, which refers to
    the wallpaper when the device is unlocked, and `LockBackgroundThumbnail.jpg`,
    which refers to the wallpaper of the device when it is locked.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 当前用作壁纸的图片存储在`/private/var/mobile/Library/SpringBoard/`中。有两张不同的图片：`HomeBackgroundThumbnail.jpg`，表示设备解锁时的壁纸；以及`LockBackgroundThumbnail.jpg`，表示设备锁定时的壁纸。
- en: iOS crash reports
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: iOS崩溃报告
- en: 'The iOS operating system uses crash reports to keep track of errors and crashes
    of native as well as third-party applications. A crash log typically contains
    a description of the system state when the application generated the error or
    terminated it. Crash reports are managed by a service that is responsible for
    collecting and aggregating the logs. For an analysis of the operation of the crash
    report service and the crash log structure refer to the following web pages:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: iOS操作系统使用崩溃报告来跟踪原生应用和第三方应用的错误和崩溃。崩溃日志通常包含应用生成错误或终止时的系统状态描述。崩溃报告由一个服务管理，该服务负责收集和汇总日志。有关崩溃报告服务的运行和崩溃日志结构的分析，请参阅以下网页：
- en: Understanding and Analyzing iOS Application Crash Reports: [https://developer.apple.com/library/ios/technotes/tn2151/_index.html](https://developer.apple.com/library/ios/technotes/tn2151/_index.html)
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解和分析iOS应用崩溃报告：[https://developer.apple.com/library/ios/technotes/tn2151/_index.html](https://developer.apple.com/library/ios/technotes/tn2151/_index.html)
- en: Understanding Crash Reports on iPhone OS: [https://developer.apple.com/videos/play/wwdc2010/317/](https://developer.apple.com/videos/play/wwdc2010/317/)
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解iPhone OS上的崩溃报告：[https://developer.apple.com/videos/play/wwdc2010/317/](https://developer.apple.com/videos/play/wwdc2010/317/)
- en: Analyzing Crash Reports: [https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AnalyzingCrashReports/AnalyzingCrashReports.html](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AnalyzingCrashReports/AnalyzingCrashReports.html)
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析崩溃报告：[https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AnalyzingCrashReports/AnalyzingCrashReports.html](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AnalyzingCrashReports/AnalyzingCrashReports.html)
- en: Demystifying iOS Application Crash Logs: [https://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs](https://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs)
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 解密iOS应用崩溃日志：[https://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs](https://www.raywenderlich.com/23704/demystifying-ios-application-crash-logs)
- en: 'Typically, the devices are configured to automatically synchronize crash logs
    with a PC/Mac, every time the device is connected and runs iTunes. For this reason,
    it is advisable to check, within a computer, if you have all the crash logs of
    devices that have been linked together in time. Depending on the operating system,
    crash logs are stored in different locations:'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，设备配置为每次连接并运行 iTunes 时，自动同步崩溃日志到 PC/Mac。因此，建议在计算机中检查，确保所有已连接设备的崩溃日志都已同步到一起。根据操作系统的不同，崩溃日志存储在不同位置：
- en: '**Windows XP**: `C:\Documents and Settings\<USERNAME>\Application Data\Apple
    Computer\Logs\CrashReporter\MobileDevice\<DEVICE_NAME>`'
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows XP**：`C:\Documents and Settings\<USERNAME>\Application Data\Apple
    Computer\Logs\CrashReporter\MobileDevice\<DEVICE_NAME>`'
- en: '**Windows Vista/7/8/10**: `C:\Users\<USERNAME>\AppData\Roaming\Apple Computer\Logs\CrashReporter\MobileDevice\<DEVICE_NAME>`'
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows Vista/7/8/10**：`C:\Users\<USERNAME>\AppData\Roaming\Apple Computer\Logs\CrashReporter\MobileDevice\<DEVICE_NAME>`'
- en: '**Mac OS X**: `~/Library/Logs/CrashReporter/MobileDevice/<DEVICE_NAME>`'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Mac OS X**：`~/Library/Logs/CrashReporter/MobileDevice/<DEVICE_NAME>`'
- en: 'Crash reports can also be extracted from an iOS device directly dialoguing
    with the crash report service (yes, it has the same name) through iTunes on PC
    or Mac, or XCode on Mac. As explained in [Chapter 3](ch03.html "Chapter 3. Evidence
    Acquisition from iDevices"), *Evidence Acquisition from iDevices*, several third-party
    software offer the ability to remove the logs and save them for later analysis;
    among these we remember here are iBackupBot and iTools. They can be extracted
    from an unlocked device or from a turned on and locked device with a valid pairing
    certificate, and also if a backup password was set by the user. The following
    screenshot shows an example of a Crash Report extraction from an iPhone 6s using
    iBackupBot:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 崩溃报告也可以直接从 iOS 设备中提取，通过与崩溃报告服务（是的，它的名字就是这个）进行对话，通过 PC 或 Mac 上的 iTunes，或者 Mac
    上的 XCode。如 [第 3 章](ch03.html "第 3 章：来自 iDevice 的证据采集") *来自 iDevice 的证据采集* 中所解释的那样，一些第三方软件提供了移除日志并保存以供后续分析的功能；在这些软件中，我们记得有
    iBackupBot 和 iTools。它们可以从解锁的设备中提取，或者从开启且已锁定的设备中提取，只要该设备有有效的配对证书，并且如果用户设置了备份密码。以下截图展示了从
    iPhone 6s 使用 iBackupBot 提取崩溃报告的示例：
- en: '![iOS crash reports](img/image_06_003.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![iOS 崩溃报告](img/image_06_003.jpg)'
- en: 'Various information of interest from a forensic point of view can be identified
    from the analysis of the crash logs, such as the following:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 从法医角度来看，通过分析崩溃日志可以识别出各种有价值的信息，例如：
- en: Installed applications list and usage from various logs such as PowerLog, Security,
    and OnDemand![iOS crash reports](img/image_06_004.jpg)
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从各种日志（如 PowerLog、安全性和 OnDemand）中提取的已安装应用程序列表及使用情况![iOS 崩溃报告](img/image_06_004.jpg)
- en: iTunes username from `itunesstored.2.log`![iOS crash reports](img/image_06_005.jpg)
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 `itunesstored.2.log` 的 iTunes 用户名![iOS 崩溃报告](img/image_06_005.jpg)
- en: Filename of e-mail attachments from MobileMail logs![iOS crash reports](img/image_06_006.jpg)
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自 MobileMail 日志的电子邮件附件文件名![iOS 崩溃报告](img/image_06_006.jpg)
- en: List of Wi-Fi network and history of latest connections from Wi-Fi logs![iOS
    crash reports](img/image_06_007.jpg)
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wi-Fi 网络列表和最新连接历史来自 Wi-Fi 日志![iOS 崩溃报告](img/image_06_007.jpg)
- en: Tracking device usage
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 跟踪设备使用情况
- en: 'Sarah Edwards has made an extensive research work on artifacts that track the
    usage of the device. By linking applications, data and network usage, health information
    (for example, workouts), timestamps, and geolocation data, it is indeed possible
    to understand what a given user under investigation was doing and where at a given
    point in time. In particular, she looked at the following artifacts:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: Sarah Edwards 对追踪设备使用情况的文物做了广泛的研究。通过关联应用程序、数据和网络使用情况、健康信息（例如，锻炼）、时间戳和地理位置数据，确实可以了解在某一时刻被调查用户的行为及其所在位置。特别是，她研究了以下文物：
- en: '**CoreDuet**: `/private/var/mobile/Library/CoreDuet/`'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CoreDuet**：`/private/var/mobile/Library/CoreDuet/`'
- en: '`coreduetd.db` (31 tables)'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`coreduetd.db`（31 个表）'
- en: '`coreduetdClassA.db` (31 tables)'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`coreduetdClassA.db`（31 个表）'
- en: '`coreduetdClassD.db` (31 tables)'
  id: totrans-158
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`coreduetdClassD.db`（31 个表）'
- en: '`Knowledge/knowledgeC.db` (5 tables)'
  id: totrans-159
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`Knowledge/knowledgeC.db`（5 个表）'
- en: '`People/interactionC.db` (9 tables)'
  id: totrans-160
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`People/interactionC.db`（9 个表）'
- en: '**Battery Life (PowerLog)**: `/private/var/mobile/Library/BatteryLife/`'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**电池寿命（PowerLog）**：`/private/var/mobile/Library/BatteryLife/`'
- en: '`CurrentPowerlog.PLSQL` (257 tables)'
  id: totrans-162
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`CurrentPowerlog.PLSQL`（257 个表）'
- en: '`Archives/powerlog_YYYY-MM-DD_XXXXXXXX.PLQSQL.gz` (Previous ~5 Days)'
  id: totrans-163
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`Archives/powerlog_YYYY-MM-DD_XXXXXXXX.PLQSQL.gz`（前 ~5 天）'
- en: '**Health**: `/private/var/mobile/Library/Health/`'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**健康**：`/private/var/mobile/Library/Health/`'
- en: '`healthdb.sqlite` (11 tables)'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`healthdb.sqlite`（11 个表）'
- en: '`healthdb_secure.sqlite` (16 tables)'
  id: totrans-166
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`healthdb_secure.sqlite`（16 个表）'
- en: '**Aggregate Dictionary**: `/private/var/mobile/Library/AggregateDictionary/`'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Aggregate Dictionary**: `/private/var/mobile/Library/AggregateDictionary/`'
- en: '`ADDataStore.sqlitedb` (4 tables)'
  id: totrans-168
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`ADDataStore.sqlitedb`（4个表）'
- en: '**networkd**: `/private/var/networkd/`'
  id: totrans-169
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**networkd**: `/private/var/networkd/`'
- en: '`netusage.sqlite` (13 tables)'
  id: totrans-170
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`netusage.sqlite`（13个表）'
- en: '**routined**: `/private/var/mobile/Library/Caches/com.apple.routined/`'
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**routined**: `/private/var/mobile/Library/Caches/com.apple.routined/`'
- en: '`cache_encryptedB.db` (5 tables)'
  id: totrans-172
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`cache_encryptedB.db`（5个表）'
- en: '`StateModel1.archive`'
  id: totrans-173
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`StateModel1.archive`'
- en: '`StateModel2.archive`'
  id: totrans-174
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`StateModel2.archive`'
- en: '**locationd**: `/private/var/root/Library/Caches/locationd/`'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**locationd**: `/private/var/root/Library/Caches/locationd/`'
- en: '`cache_encryptedA.db` (79 tables)'
  id: totrans-176
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`cache_encryptedA.db`（79个表）'
- en: '`lockCache_encryptedA.db` (51 tables)'
  id: totrans-177
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`lockCache_encryptedA.db`（51个表）'
- en: '`cache_encryptedB.db` (167 tables)'
  id: totrans-178
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`cache_encryptedB.db`（167个表）'
- en: '`cache_encryptedC.db` (9 tables)'
  id: totrans-179
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '`cache_encryptedC.db`（9个表）'
- en: 'The details of Sarah''s work mentioned here can be found at her website, more
    specifically the *The iOS of Sauron: How iOS Tracks Everything You Do* talk ([https://www.mac4n6.com/resources/](https://www.mac4n6.com/resources/)).'
  id: totrans-180
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这里提到的Sarah工作的详细信息可以在她的网站上找到，具体来说是*《Sauron的iOS：iOS如何跟踪你所做的一切》*的演讲（[https://www.mac4n6.com/resources/](https://www.mac4n6.com/resources/)）。
- en: Third-party application analysis
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第三方应用程序分析
- en: In the previous paragraphs, you have seen where important artifacts related
    to the iOS system settings and preferences, native iOS applications, and device
    features are located. These are locations to be aware of, and it is important
    to know how to analyze them since they are common to all iDevices. Now, in the
    following paragraphs, we are going to show you a practical analysis of some of
    the most used third-party applications.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的段落中，你已经看到了与iOS系统设置和偏好、原生iOS应用程序以及设备功能相关的重要工件的位置。这些位置需要注意，并且了解如何分析它们非常重要，因为它们是所有iDevice共享的。接下来，我们将展示一些最常用的第三方应用程序的实际分析。
- en: Social Network and Instant Messaging applications
  id: totrans-183
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 社交网络和即时通讯应用程序
- en: Probably the most widely used category, Social Network and Instant Messaging
    applications can represent a treasure trove for the analyst, as now they have
    become the main means for communication. In this section, we will give you an
    overview of the main artifacts you may find in some of the most popular applications,
    as in which location you should pay particular attention during the analysis.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 社交网络和即时通讯应用程序可能是最广泛使用的类别，对于分析人员来说，它们可以代表一个宝藏，因为现在它们已成为主要的通讯工具。在本节中，我们将为你概述在一些最流行的应用程序中可能找到的主要工件，以及在分析过程中需要特别注意的地方。
- en: Skype
  id: totrans-185
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Skype
- en: 'Skype is probably the most known and used software for VoIP and chatting:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: Skype可能是最为知名和广泛使用的VoIP和聊天软件：
- en: '[PRE11]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Starting from the `Library/Preferences` folder, we can find the first important
    information inside the `com.skype.skype.plist` file, the username, as shown in
    the following screenshot:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 从`Library/Preferences`文件夹开始，我们可以在`com.skype.skype.plist`文件中找到第一个重要信息——用户名，如下截图所示：
- en: '![Skype](img/image_06_008.jpg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![Skype](img/image_06_008.jpg)'
- en: 'However, the preceding screenshot shows only the last username that has logged
    in. If we want to know all the profiles that have been logged in from this device,
    we have to look for other folders under `Library/Application Support/Skype/`,
    where we will find one folder for each account logged in with that device:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，前面的截图只显示了最后一次登录的用户名。如果我们想要了解所有曾在此设备上登录的个人资料，必须查看`Library/Application Support/Skype/`下的其他文件夹，在这些文件夹中，每个文件夹都代表一个曾使用该设备登录的账户：
- en: '![Skype](img/image_06_009.jpg)'
  id: totrans-191
  prefs: []
  type: TYPE_IMG
  zh: '![Skype](img/image_06_009.jpg)'
- en: 'Inside every user''s folder, we find all the databases storing information
    such as contacts list, chats, and so on. Here, the structure is pretty much the
    same as the PC/desktop version. In fact, you can open the `main.db` file, where
    you can find all information clearly stored, as you can see from the interesting
    names of the tables as follows:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个用户的文件夹内，我们可以找到所有存储信息的数据库，如联系人列表、聊天记录等。这里的结构与PC/桌面版本几乎相同。实际上，你可以打开`main.db`文件，在那里你可以清晰地看到所有信息，正如以下表格名称的有趣之处所展示：
- en: '[PRE12]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'Refer to the following screenshot:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 请参阅以下截图：
- en: '![Skype](img/image_06_010.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![Skype](img/image_06_010.jpg)'
- en: This means that you can use any of your favorite Skype analysis utilities to
    parse these files, such as **SkypeLogView** from **Nirsoft** and so on. Finally,
    within the application folder itself, you may also find the Voicemail messages
    and screenshots, as we have addressed previously in the *Snapshots* section, in
    addition to files transferred via Skype, logs, and much more.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着你可以使用任何你喜欢的Skype分析工具来解析这些文件，比如**Nirsoft**的**SkypeLogView**等等。最后，在应用程序文件夹内，你还可能找到语音邮件消息和截图，正如我们在*快照*部分所讨论的，除此之外还包括通过Skype传输的文件、日志等。
- en: WhatsApp
  id: totrans-197
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: WhatsApp
- en: 'Although it is technically an Instant Messaging application, WhatsApp has almost
    completely replaced the classical SMS. Therefore, it is very likely that you will
    encounter it during a mobile forensics analysis. Let''s have a look at its internal
    folder structure that, as you may have realized, differs really very little from
    one application to the other:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管它在技术上是一个即时消息应用程序，WhatsApp几乎完全取代了传统的短信。因此，在进行移动取证分析时，你很可能会遇到它。让我们来看看它的内部文件夹结构，正如你可能已经意识到的，它与不同应用程序之间的差异非常小：
- en: '[PRE13]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: We have now understood that to get a first hint and useful information for starting
    with an application, we may want to start looking inside the `plist` configuration
    file under `Library/Preferences/`. In this case, we are looking for `net.whatsapp.WhatsApp.plist`.
    Here again, you will find some basic information, such as the username, the phone
    number the WhatsApp account was linked to, and so on.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经理解了，要获得一些有用的初步信息以便开始分析一个应用程序，我们可以从`Library/Preferences/`下的`plist`配置文件开始查看。在这个案例中，我们要寻找的是`net.whatsapp.WhatsApp.plist`。在这里，你将再次找到一些基本信息，如用户名、WhatsApp账户关联的电话号码等。
- en: 'However, what we may realize here is that we don''t have the chat database,
    the famous `ChatStorage.sqlite` file. This is because Whatsapp is one of those
    applications that stores the data in the `/private/var/mobile/Containers/Shared/AppGroup/`
    folder:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，我们可能会发现一个问题，那就是我们没有找到聊天数据库——著名的`ChatStorage.sqlite`文件。这是因为WhatsApp是那些将数据存储在`/private/var/mobile/Containers/Shared/AppGroup/`文件夹中的应用之一：
- en: '[PRE14]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Regarding the actual content of the messages exchanged, the main database is
    `Documents/ChatStorage.sqlite`, whose structure is as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 关于交换消息的实际内容，主要的数据库是`Documents/ChatStorage.sqlite`，其结构如下：
- en: '[PRE15]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The `ZWAMESSAGE` table is the one containing the messages exchanged, their
    timestamp, the name of who the user was chatting with, and so on, as shown in
    the following screenshot:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '`ZWAMESSAGE`表包含了交换的消息，它们的时间戳，用户与谁聊天的名字等信息，如下图所示：'
- en: '![WhatsApp](img/image_06_011.jpg)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![WhatsApp](img/image_06_011.jpg)'
- en: The `ZWACHATSESSION` table stores information about the open chats, both with
    a single user and group chats, and you can correlate these data with those in
    the `ZWAGROUPMEMBER` and `ZWAGROUPINFO` tables in order to find out which users
    belong to which group chat. Finally, in `ZWAMEDIAITEM` stores references to the
    multimedia files (pictures, audio messages, and videos) exchanged, with an indication
    of the user involved, timestamps, and the location where the multimedia file has
    been stored within an iDevice.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '`ZWACHATSESSION`表存储关于打开的聊天信息，包括单人聊天和群聊，你可以将这些数据与`ZWAGROUPMEMBER`和`ZWAGROUPINFO`表中的数据进行关联，从而找出哪些用户属于哪个群聊。最后，`ZWAMEDIAITEM`表存储着交换的多媒体文件（图片、语音消息和视频）的引用，包含参与用户、时间戳以及多媒体文件在iDevice中存储的位置。'
- en: '![WhatsApp](img/image_06_012.jpg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![WhatsApp](img/image_06_012.jpg)'
- en: However, you will also find the chat contents inside `Documents/ChatSearch.sqlite`
    within the `docs_content` tables, as shown in the preceding screenshot.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，你也可以在`Documents/ChatSearch.sqlite`文件的`docs_content`表中找到聊天内容，如前面的截图所示。
- en: Facebook and Messenger
  id: totrans-210
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Facebook 和 Messenger
- en: Facebook is the most known and widely used social network. For this reason,
    other than for the fact that it is now integrated with iOS, you will most likely
    have to analyze the Facebook app in almost all of your investigations. As you
    can imagine, the amount of information stored by Facebook is very high, and in
    particular, it concerns three areas, user personal information, a cache of images
    related to profiles and visited pages, and information related to the external
    sites visited within the Facebook app through the links present on the posts.
    Due to the obviously large amount of possible information retrievable in the Facebook
    app and the page limitation of a book, the goal of this section is to give you
    a glimpse and some hints on possible artifacts and where to find them.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: Facebook是最著名和广泛使用的社交网络。因此，除了它现在与iOS集成之外，您在几乎所有调查中都很可能需要分析Facebook应用。正如您所想，Facebook存储的信息量非常大，特别涉及三个方面：用户个人信息、与个人资料和访问页面相关的图像缓存，以及通过帖子上的链接在Facebook应用内访问的外部网站信息。由于Facebook应用可以检索的大量信息以及书籍的页面限制，本节的目标是让您对可能的证据和它们的存储位置有所了解。
- en: The account information is saved inside `Library/Preferences/com.facebook.Facebook.plist`.
    Among other information, you will find the e-mail address and the Facebook ID
    of the profile configured within the app, as well as the date of the last time
    the app has been used.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 账户信息保存在`Library/Preferences/com.facebook.Facebook.plist`中。除了其他信息外，您可以找到配置在应用中的个人资料的电子邮件地址和Facebook
    ID，以及应用最后一次使用的日期。
- en: Information related to contacts is saved in `Library/Caches/_store_<ID>/messender_contacts_v1/fbsyncstore.db`
    within the `people` table.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 与联系人相关的信息保存在`Library/Caches/_store_<ID>/messender_contacts_v1/fbsyncstore.db`中的`people`表格内。
- en: In `Library/Caches/_store_<ID>/image_cache_v7/` are stored images viewed while
    surfing through the pages of the social network (for example, posts of other users
    and so on), while inside the `Library/WebKit/WebsiteData/LocalStorage/StorageTracker.db`
    database and the `Library/Caches/WebKit/NetworkCache/` folder are stored contents
    of other websites visited through the application internal browser, including
    the related URL and the corresponding files (for example, the JPG image, the HTML
    page, the CSS style sheet, and so on).
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 在`Library/Caches/_store_<ID>/image_cache_v7/`中存储了在浏览社交网络页面时查看的图像（例如，其他用户的帖子等），而在`Library/WebKit/WebsiteData/LocalStorage/StorageTracker.db`数据库和`Library/Caches/WebKit/NetworkCache/`文件夹中，存储了通过应用内部浏览器访问的其他网站内容，包括相关的URL和对应的文件（例如JPG图像、HTML页面、CSS样式表等）。
- en: Starting from April 2014, the instant messaging function has been completely
    moved from the Facebook app to Facebook Messenger app, launched by Facebook itself
    on August 2009\. Therefore, all Facebook users have been forced to download and
    use Messenger to communicate among themselves.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 从2014年4月起，即时通讯功能已完全从Facebook应用转移到Facebook Messenger应用，该应用由Facebook于2009年8月推出。因此，所有Facebook用户都被迫下载并使用Messenger进行相互通讯。
- en: Also in this case, interesting artifacts are stored in both the `.../Containers/Data/...`
    and `.../Containers/Shared/...` application folders. In particular, you will find
    the chat content database at `/private/var/mobile/Containers/Shared/AppGroup/<UUID>/_store_<ID>/messenger_messages_v1/orca2.db`.
    In this database, chats are saved as a blob data field within the tables.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，在这种情况下，相关的有趣数据存储在`.../Containers/Data/...`和`.../Containers/Shared/...`应用文件夹中。特别是，您会在`/private/var/mobile/Containers/Shared/AppGroup/<UUID>/_store_<ID>/messenger_messages_v1/orca2.db`中找到聊天内容数据库。在这个数据库中，聊天记录作为blob数据字段保存在表格中。
- en: Telegram
  id: totrans-217
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Telegram
- en: Telegram is probably the second most used Instant Messaging application after
    Whatsapp, therefore chances of having to deal with it during an analysis are quite
    high as well. As always, the account information can be found at `<App_folder>/Library/Preferences/`
    within the `ph.telegra.Teleraph.plist` file.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: Telegram可能是仅次于Whatsapp的第二大即时通讯应用，因此在分析过程中需要处理它的可能性也相当高。像往常一样，账户信息可以在`<App_folder>/Library/Preferences/`中找到，文件名为`ph.telegra.Teleraph.plist`。
- en: 'Similar to WhatsApp, Facebook, and Messenger, Telegram stores many of its data
    in the `.../Container/Shared/AppGroup/` folder, as we can see from the following
    folder structure:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 类似于WhatsApp、Facebook和Messenger，Telegram将其许多数据存储在`.../Container/Shared/AppGroup/`文件夹中，以下是该文件夹结构的示例：
- en: '[PRE16]'
  id: totrans-220
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: More specifically, under the `Documents` folder we find the `tgdata.db` database,
    which contains all information about contacts, conversations, exchanged files,
    and so on.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 更具体来说，在`Documents`文件夹下，我们可以找到`tgdata.db`数据库，它包含所有关于联系人、对话、交换的文件等信息。
- en: 'Some of the tables of particular interest are as follows:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 一些特别有趣的表如下：
- en: '`users_v29`: This contains the contact list and related Telegram user ID (uid).'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`users_v29`：这包含联系人列表和相关的Telegram用户ID（uid）。'
- en: '`contacts_v29`: This contains the list of all uid.'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`contacts_v29`：这是所有uid的列表。'
- en: '`messages_v29`: This contains the list of all messages exchanged, with to/from
    fields to identify who is the source and who is the destination, as well as a
    conversation ID (cid), so that it is easier to group messages belonging to the
    same conversation. Messages from secret chats are also clearly stored here.'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`messages_v29`：这包含所有交换的消息列表，包含发送方和接收方字段来识别消息源和目标，并有一个对话ID（cid），以便更容易将属于同一对话的消息分组。秘密聊天中的消息也清楚地存储在这里。'
- en: '`convesations_v29`: This contains the list of active conversations as seen
    in the **Chats** screen of the app, and also the last message exchanged. The name
    of the table does not contain a typo from us, but it really misses the *r* !'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`convesations_v29`：它包含应用程序**聊天**屏幕中显示的所有活动对话列表，并且还包含最后交换的消息。表的名称并不是我们写错的，而是确实缺少了*r*！'
- en: '`encrypted_cids_v29`: This contains the conversation IDs of the secret chats.
    All cid related to secret chats start with the `-` (minus) symbol.'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`encrypted_cids_v29`：这包含秘密聊天的对话ID。所有与秘密聊天相关的cid都以`-`（减号）符号开头。'
- en: 'Those listed here are just some of the interesting tables, to give you a glimpse
    of what you can find, but as you can see from the preceding `sqlite3` command
    output there are many more:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 这里列出的只是一些有趣的表，旨在给你展示你可以找到的一些内容，但正如从前面的`sqlite3`命令输出中可以看到的，还有更多：
- en: '![Telegram](img/Chapter-65100.jpg)'
  id: totrans-229
  prefs: []
  type: TYPE_IMG
  zh: '![Telegram](img/Chapter-65100.jpg)'
- en: Signal
  id: totrans-230
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Signal
- en: 'Last but not least, we could not exclude **Signal** from this list of IM apps
    analyzed. Unfortunately for the forensics analyst and fortunately for the end
    user, there is not much to say as Signal does indeed what it promises, all messages
    are securely encrypted within the device (data-at-rest) other than when sent/received
    through the network (data-in-transit). The folders structure is as follows:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 最后但同样重要的是，我们不能将**Signal**排除在这份分析的即时通讯应用列表之外。不幸的是，对于取证分析员来说，幸运的是对于终端用户来说，Signal确实做到了它承诺的，所有消息都在设备内安全加密（静态数据），仅在通过网络发送/接收时才会是加密的（传输中的数据）。文件夹结构如下：
- en: '[PRE17]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'All of Signal''s data (that is, chat messages, contact lists, and so on) is
    inside the `Document/Signal.sqlite` database that is, as we already said, encrypted.
    However, there are two things that are not encrypted. They are as follows:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: Signal的所有数据（即聊天消息、联系人列表等）都存储在`Document/Signal.sqlite`数据库中，如我们之前所说，它是加密的。然而，有两件事情是没有加密的，它们如下：
- en: '**Attachments**: Oddly enough, the attachments exchanged are clearly stored
    and can be retrieved from the `Document/Attachments/` folder.'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**附件**：奇怪的是，交换的附件被清楚地存储，并可以从`Document/Attachments/`文件夹中提取。'
- en: '**Snapshots**: Signal has an **Enable Screen Security** option that would prevent
    this, but for some reason is not set by default. Therefore, it is possible to
    find the screen snapshot (we have talked about snapshots in an earlier section of
    this chapter) in the `Library/Caches/Snapshots/` folder.'
  id: totrans-235
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**快照**：Signal有一个**启用屏幕安全**的选项，可以防止这种情况发生，但由于某些原因，默认情况下并未设置。因此，有可能会在`Library/Caches/Snapshots/`文件夹中找到屏幕快照（我们在本章前面的部分中已经讨论过快照）。'
- en: As we said, not too much information is available, but keep in mind the attachments
    and the snapshots, as they may reveal important traces for your investigation.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所说，信息并不多，但请记住附件和快照，因为它们可能会揭示对你调查非常重要的线索。
- en: Cloud storage applications
  id: totrans-237
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 云存储应用
- en: Cloud storage applications are very popular on mobile devices, since the Cloud
    somewhat extends the device storage capability and allows the user to have access
    to their data anywhere and anytime. Therefore, it is very probable that you will
    encounter at least one on this class of apps during your analysis. In this section,
    we just want to give you a glimpse of some artifacts you can find in two of the
    most popular cloud storage services.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 云存储应用在移动设备上非常流行，因为云存储在某种程度上扩展了设备的存储能力，并允许用户随时随地访问数据。因此，在分析过程中，你很可能会遇到至少一种此类应用。在本节中，我们仅想给你展示一下在两个最流行的云存储服务中可以找到的一些文物。
- en: Dropbox
  id: totrans-239
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Dropbox
- en: 'The Dropbox iOS app is stored in `/private/var/mobile/Containers/Data/Applications/9238CCE2-5C38-4843-9F76-D73B7C0CAB23/`.
    In the `Documents/Users/<user_id>/` folder there are several databases of interest,
    in particular the following:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: Dropbox iOS 应用存储在 `/private/var/mobile/Containers/Data/Applications/9238CCE2-5C38-4843-9F76-D73B7C0CAB23/`。在
    `Documents/Users/<user_id>/` 文件夹中有若干个有趣的数据库，特别是以下几个：
- en: '`Dropbox.sqlite`: This database, within the `ZCACHEDFILE` table, contains information
    about all the files the user interacted with, such as opened, saved, or simply
    browsed'
  id: totrans-241
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Dropbox.sqlite`：此数据库位于 `ZCACHEDFILE` 表中，包含用户与所有文件交互的信息，例如打开、保存或仅浏览过的文件。'
- en: '`Uploads.sqlite`: This database, within the `ZQUEUEDUPLOAD` table, contains
    the name/path of uploaded files, the file mime type, and timestamp of the upload'
  id: totrans-242
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Uploads.sqlite`：此数据库位于 `ZQUEUEDUPLOAD` 表中，包含上传文件的名称/路径、文件的 MIME 类型和上传时间戳。'
- en: The `Library/Caches/` folder contains a local copy of the *opened files*, but
    it is *available only if we can perform a physical acquisition* (not logical/backup
    acquisition).
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: '`Library/Caches/` 文件夹包含了已打开文件的本地副本，但只有在我们能够进行物理采集时（而非逻辑/备份采集）才能访问。'
- en: 'Finally, another interesting folder is `Library/Application Support/Dropbox/<hex_ID>/Account/contact_cache/`,
    where two very interesting json files, among others, are present:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，另一个有趣的文件夹是 `Library/Application Support/Dropbox/<hex_ID>/Account/contact_cache/`，其中包含两个非常有趣的
    JSON 文件，此外还有其他文件：
- en: '`me`: This contains information about the account holder such as name, surname,
    and e-mail address registered with the current account.'
  id: totrans-245
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`me`：此项包含账户持有者的相关信息，如姓名、姓氏和注册在当前账户上的电子邮件地址。'
- en: '`all_searchable`: This contains account information such as name, surname,
    and e-mail address of every accounts the user has ever shared a file with. This
    list also has historical records referring to account the user does not currently
    share files with anymore, but have done so in the past.'
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`all_searchable`：此项包含用户曾与其共享文件的每个账户的账户信息，如姓名、姓氏和电子邮件地址。此列表还包含历史记录，指的是用户当前已不再共享文件的账户，但在过去曾与之共享过文件。'
- en: Google Drive
  id: totrans-247
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: Google Drive
- en: The Google Drive iOS App is in `/private/var/mobile/Containers/Data/Application/F86EB4B3-5DB1-4C72-B576-546694440A5D/`.
    The folder structure is the usual, with `Documents` and `Library`, being the main
    folders where you can find interesting artifacts. More specifically, within `Documents/drivekit/users/<user_ID>/cello/cello.db`,
    you will find the database containing information about the Drive folders structure,
    files accessed, files moved to the Bin (with the timestamp) or definitely deleted
    (without the timestamp of when it happened), and so on, as well as a copy of the
    files saved into **My Drive** or as **Available Offline**.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: Google Drive iOS 应用存储在 `/private/var/mobile/Containers/Data/Application/F86EB4B3-5DB1-4C72-B576-546694440A5D/`。文件夹结构与常规结构相同，`Documents`
    和 `Library` 是你可以找到有趣文物的主要文件夹。更具体地说，在 `Documents/drivekit/users/<user_ID>/cello/cello.db`
    中，你将找到包含关于 Drive 文件夹结构、访问的文件、移入垃圾桶的文件（包含时间戳）或已彻底删除的文件（没有删除时间戳）等信息的数据库，以及保存至 **我的云盘**
    或标记为 **离线可用** 的文件副本。
- en: The `Library/Caches/com.google.commmon.SSO/<user_ID>/` folder contains, among
    others, the `Profile.plist` file that, as the name suggests, shows where the used
    information is stored such as name, surname, username, and e-mail address.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '`Library/Caches/com.google.commmon.SSO/<user_ID>/` 文件夹中包含多个文件，其中包括 `Profile.plist`
    文件，顾名思义，它显示了用于存储用户信息的位置，如姓名、姓氏、用户名和电子邮件地址。'
- en: Deleted data recovery
  id: totrans-250
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 删除数据恢复
- en: In this section, we will give you a quick overview on the difficulties of performing
    file carving operations on an iOS device and will help you understand why and
    what are the possibilities. We will also see the particular case of recovering
    the SQLite deleted records.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将简要介绍在 iOS 设备上执行文件雕刻操作的难点，并帮助你理解为什么以及有哪些可能性。我们还将看到恢复 SQLite 删除记录的特殊情况。
- en: File carving - is it feasible?
  id: totrans-252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 文件雕刻 - 这是否可行？
- en: 'Apple uses a technology called **Data Protection** in order to further protect
    data stored in flash memory on iDevices. Every time a file is created, a new 256-bit
    *per-file key* is generated and it is used to encrypt the file content using AES
    encryption. The *per-file key* is then wrapped with one of the data protection
    class keys and then stored in the file''s metadata, which is in turn encrypted
    with the filesystem key (the **EMF key**), which is generated from the unique
    hardware UID. The following diagram, which is taken directly from the Apple iOS
    Security official paper (last update on May 2016, refer to [Appendix A](apa.html
    "Appendix A. References"), *References*), summarizes the entire process:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 苹果使用一种名为**数据保护**的技术，进一步保护iDevice上闪存存储的数据。每当创建一个文件时，都会生成一个新的256位*每文件密钥*，并使用AES加密算法加密文件内容。*每文件密钥*随后被包装在其中一个数据保护类密钥中，并存储在文件的元数据中，这些元数据反过来又被文件系统密钥（**EMF密钥**）加密，而EMF密钥是通过唯一的硬件UID生成的。下图直接取自苹果iOS安全官方文档（最后更新于2016年5月，参见[附录A](apa.html
    "附录A. 参考文献")，*参考文献*），总结了整个过程：
- en: '![File carving - is it feasible?](img/image_06_013.jpg)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![文件雕刻 - 它可行吗？](img/image_06_013.jpg)'
- en: With this premise, it is clear that the classic file carving procedure will
    not work, since in the unallocated space there will only be encrypted content.
    An interesting approach on how to carve deleted images from the iOS devices has
    been published by D'Orazio and others (refer to [Appendix A](apa.html "Appendix A. References"),
    *References*). What they suggest is to exploit the journaling feature of the iOS
    filesystem, HFS+. In fact, by analyzing and comparing both the catalog and journal
    files of the HFS+ filesystem, it could be possible to identify information about
    deleted files, such as file and metadata locations, their timestamp, and so on.
    Based on this information from the journal, the analyst should be able to search
    and recover the deleted files, locate the cryptography keys, and then decrypt
    the image file. Heather Mahalik (her Twitter handle is `@HeatherMahalik`) also
    describes a similar approach in her book, *Practical Mobile Forensics*, by *Heather
    Mahalik*, published by *Packt Publishing*. Of course, such approaches require
    physical acquisition to be possible for the target device.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一前提下，很明显经典的文件雕刻方法将不起作用，因为未分配空间中将只有加密的内容。D'Orazio等人发布了一种有趣的关于如何从iOS设备中雕刻已删除图像的方法（参见[附录A](apa.html
    "附录A. 参考文献")，*参考文献*）。他们建议利用iOS文件系统HFS+的日志功能。事实上，通过分析和比较HFS+文件系统的目录文件和日志文件，有可能识别出有关已删除文件的信息，如文件和元数据的位置、时间戳等。基于来自日志的信息，分析员应该能够搜索并恢复已删除的文件，找到加密密钥，然后解密图像文件。Heather
    Mahalik（她的Twitter用户名是`@HeatherMahalik`）在她的书《*Practical Mobile Forensics*》中也描述了类似的方法，该书由*Packt
    Publishing*出版。当然，这些方法需要目标设备进行物理获取才可实现。
- en: However, that approach may work only if the device has not been restored, wiped,
    or upgraded to a new OS version, because in such cases, the filesystem key (EMF)
    would be erased and a new key recreated. Therefore, without the original EMF key,
    all contents in the unallocated space referring to a period prior to the restoring/wiping/upgrading
    is gone forever.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这种方法可能仅在设备未被恢复、擦除或升级到新操作系统版本的情况下有效，因为在这些情况下，文件系统密钥（EMF）将被擦除，并且会重新创建一个新密钥。因此，若没有原始的EMF密钥，所有指向恢复/擦除/升级之前的未分配空间的内容将永远丢失。
- en: Carving SQLite deleted records
  id: totrans-257
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SQLite已删除记录的雕刻
- en: 'We will not go into the details of the SQLite structure (for more information,
    refer to [Appendix A](apa.html "Appendix A. References"), *References*), since
    it is out of the scope of this book. However, it is important for you to know
    that other than deleted files, it is also possible to recover deleted records
    within the SQLite databases. Mari DeGrazia (her Twitter handle is `@maridegrazia`)
    has developed a useful Python script that parses the database file and carves
    out deleted entries. Its usage is as simple as running a single-line command as
    follows:'
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会深入讨论SQLite结构的细节（更多信息请参见[附录A](apa.html "附录A. 参考文献")，*参考文献*），因为它超出了本书的范围。然而，了解除了已删除的文件外，还可以恢复SQLite数据库中的已删除记录是很重要的。Mari
    DeGrazia（她的Twitter用户名是`@maridegrazia`）开发了一个有用的Python脚本，它解析数据库文件并雕刻出已删除的条目。它的使用方法非常简单，只需要运行如下的单行命令：
- en: '[PRE18]'
  id: totrans-259
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: You can find it on her website and GitHub repository; she has also provided
    a GUI version of the tool (refer to [Appendix A](apa.html "Appendix A. References"),
    *References*, and [Appendix B](apb.html "Appendix B. Tools for iOS Forensics"),
    *Tools for iOS Forensics*). Moreover, it is always useful to run a `strings` command
    on the database file as well. You may be able to recover a portion of deleted
    entries content that may have been missed by the tools.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在她的网站和GitHub库中找到它；她还提供了该工具的GUI版本（请参考[附录A](apa.html "附录A. 参考资料")，*参考资料*，以及[附录B](apb.html
    "附录B. iOS取证工具")，*iOS取证工具*）。此外，运行`strings`命令对数据库文件进行分析也是非常有用的。你可能能够恢复一些被工具遗漏的已删除条目内容。
- en: Case study - iOS analysis with Oxygen Forensics
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 案例研究 - 使用Oxygen Forensics进行iOS分析
- en: The acquisition of an iPhone made using Oxygen Forensics can be analyzed directly
    within the same tool. In fact, during the acquisition, all the files are parsed
    by the software, which offers the user a complete GUI to access and search for
    information in the data. The following screenshot used to show the different functionalities
    of the software, refers to a logical classic type of acquisition from an iPhone
    6s with iOS 9.3\. Some descriptions of the features of the Oxygen Forensics Suite
    have been taken directly from the vendor website at [http://www.oxygen-forensic.com](http://www.oxygen-forensic.com).
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Oxygen Forensics获取的iPhone数据可以直接在同一工具中进行分析。事实上，在获取数据的过程中，所有文件都会被软件解析，软件为用户提供了一个完整的图形用户界面（GUI），可以访问和搜索数据中的信息。以下截图展示了软件的不同功能，显示了一个从运行iOS
    9.3的iPhone 6s进行的逻辑经典类型的获取。Oxygen Forensics Suite的一些功能描述直接来自供应商网站[http://www.oxygen-forensic.com](http://www.oxygen-forensic.com)。
- en: 'The following screenshot summarizes the main information related to the acquired
    device model, operating system version, serial number, acquisition type, extraction
    date, investigator name, case number, and evidence number:'
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图总结了与已获取设备型号、操作系统版本、序列号、获取类型、提取日期、调查员姓名、案件编号和证据编号相关的主要信息：
- en: '![Case study - iOS analysis with Oxygen Forensics](img/image_06_014.jpg)'
  id: totrans-264
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensics进行iOS分析](img/image_06_014.jpg)'
- en: Moreover, two separate areas are also present, the first one refers to **Common
    sections**, that is the information related to native applications and to the
    grouping functionalities offered by the software; the second one refers to the
    activities of the main applications installed on the device by the user.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，还存在两个单独的区域，第一个区域涉及**常见部分**，即与本地应用程序相关的信息以及软件提供的分组功能；第二个区域则涉及用户在设备上安装的主要应用程序的活动。
- en: '![Case study - iOS analysis with Oxygen Forensics](img/image_06_015.jpg)'
  id: totrans-266
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensics进行iOS分析](img/image_06_015.jpg)'
- en: 'The analysis of native applications lets the analyst recover much information,
    such as the phonebook with assigned photos, calendar events and notes, call log
    (FaceTime, dialed, received, and missed calls), messages (SMS/MMS and iMessages),
    and voicemail. The following screenshot shows an example of a call history:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 对本地应用程序的分析可以让分析员恢复大量信息，如带有分配照片的电话簿、日历事件和备忘录、通话记录（FaceTime、拨打、接听和未接来电）、短信（SMS/MMS和iMessages）以及语音邮件。以下截图展示了通话历史的示例：
- en: '![Case study - iOS analysis with Oxygen Forensics](img/5100_06_16.jpg)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensics进行iOS分析](img/5100_06_16.jpg)'
- en: Moreover, with the Oxygen Forensics Suite, it is possible to recover information
    related to Wi-Fi access points, IP connections, and locations. The following screenshot
    shows the details of Wi-Fi networks stored in the device under analysis. For each
    network, the SSID, MAC address of the router/access point, and the connection
    timestamps (last joined time and last auto joined time) are listed. From websites
    such as [https://www.wigle.net/](https://www.wigle.net/), it is possible to trace
    the MAC addresses and find the physical position of where the device was.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，使用Oxygen Forensics Suite，可以恢复与Wi-Fi接入点、IP连接和位置相关的信息。以下截图展示了设备中存储的Wi-Fi网络的详细信息。对于每个网络，列出了SSID、路由器/接入点的MAC地址以及连接的时间戳（最后连接时间和最后自动连接时间）。通过网站如[https://www.wigle.net/](https://www.wigle.net/)，可以追踪MAC地址并找到设备所在的物理位置。
- en: '![Case study - iOS analysis with Oxygen Forensics](img/5100_06_17.jpg)'
  id: totrans-270
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用Oxygen Forensics进行iOS分析](img/5100_06_17.jpg)'
- en: 'Regarding the analysis of the applications installed by the user, the software
    extracts and interprets both databases and configuration files (usually in the
    `plist` format) for the most common applications present on the Apple Store. These
    applications are split in the following categories:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 关于用户安装应用程序的分析，软件会提取并解读数据库和配置文件（通常是 `plist` 格式）来分析 Apple Store 上常见的应用程序。这些应用程序被分为以下几类：
- en: '**Messengers**: Facebook, Skype, WhatsApp, Viber, Telegram, Facebook Messenger,
    ChatON, Fring, Kakao Talk, Tango, WeChat, Yahoo, Google Hangouts, KiK Messenger,
    QQ, testPlus, Line, and so on'
  id: totrans-272
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**消息应用**：Facebook、Skype、WhatsApp、Viber、Telegram、Facebook Messenger、ChatON、Fring、Kakao
    Talk、Tango、WeChat、Yahoo、Google Hangouts、KiK Messenger、QQ、testPlus、Line 等等'
- en: '**Navigations**: Google Maps, Apple Maps, Waze, and so on'
  id: totrans-273
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**导航**：Google Maps、Apple Maps、Waze 等等'
- en: '**Browser**: Safari, Google Chrome, Mercury, Dolphin, Yandex, and so on'
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**浏览器**：Safari、Google Chrome、Mercury、Dolphin、Yandex 等等'
- en: '**Social networks**: Facebook, LinkedIn, Twitter, Instagram, Google+, Tinder,
    Grindr, Foursqare, Snapchat, Vkontakte, Pokemon Go, and so on'
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**社交网络**：Facebook、LinkedIn、Twitter、Instagram、Google+、Tinder、Grindr、Foursquare、Snapchat、Vkontakte、Pokemon
    Go 等等'
- en: '**Travel**: Booking, SkyScanner, TripAdvisor, and so on'
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**旅行**：Booking、SkyScanner、TripAdvisor 等等'
- en: '**Productivity business**: Google Drive, Dropbox, Google Mail, OneDrive, Yahoo
    Mail, iBooks, and so on'
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**生产力业务**：Google Drive、Dropbox、Google Mail、OneDrive、Yahoo Mail、iBooks 等等'
- en: 'The following screenshot shows an example of Kik Messenger analysis:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了 Kik Messenger 分析的一个示例：
- en: '![Case study - iOS analysis with Oxygen Forensics](img/5100_06_18.jpg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![案例研究 - 使用 Oxygen Forensics 进行 iOS 分析](img/5100_06_18.jpg)'
- en: 'Finally, the software offers advanced functionalities for cross-searching data
    as follows:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，软件提供了以下的高级功能，用于数据的交叉搜索：
- en: '**Aggregated Contacts**: This section analyzes the contacts from multiple sources
    such as the Phonebook, Messages, Event Log, Skype, chat, and messaging applications
    in **Aggregated Contacts**. This section automatically reveals the same people
    in different sources and groups them in one metacontact.'
  id: totrans-281
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**汇总联系人**：本节分析了来自多个来源的联系人，如通讯录、短信、事件日志、Skype、聊天和消息应用中的联系人。在**汇总联系人**中，本节自动识别不同来源中相同的人，并将其分组为一个元联系人。'
- en: '**Dictionaries**: This section shows all the words ever entered in device messages,
    notes, and calendars.'
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**字典**：本节显示了设备中所有曾输入过的单词，包括消息、备忘录和日历中的内容。'
- en: '**Links and Stats**: This section reveals social connections between users
    of mobile devices under investigation and their contacts. The **Links and Stats**
    section provides a tool to explore social connections between device users by
    analyzing calls, text, multimedia and e-mail messages, and Skype activities.'
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**链接与统计**：本节揭示了正在调查的移动设备用户与其联系人之间的社交关系。**链接与统计**部分提供了一个工具，通过分析电话、短信、多媒体和电子邮件信息以及
    Skype 活动，探索设备用户之间的社交关系。'
- en: '**Timeline**: This section organizes all calls, messages, calendar events,
    geo data, and other activities in a chronological way, so that the analyst can
    follow the conversation history without the need to switch between different sections.'
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**时间线**：本节将所有通话、短信、日历事件、地理数据和其他活动按时间顺序组织，以便分析师可以在不需要切换不同部分的情况下跟踪对话历史。'
- en: '**Social Graph**: This section is a workplace that allows the analyst to review
    connections between mobile device owners and their contacts, pinpoint connections
    between multiple device owners, and detect their common contacts.'
  id: totrans-285
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**社交图谱**：本节是一个工作区，允许分析师查看移动设备所有者与其联系人之间的连接，确定多个设备所有者之间的连接，并检测他们的共同联系人。'
- en: Other than the automated analysis, the Oxygen Forensics Suite also offers the
    ability to navigate inside the filesystem and view all the different file types
    (documents, images, videos, and audio). There are also two embedded tools to view
    SQLite databases and `plist` files. The first one also offers the possibility
    to recover deleted records from databases, therefore, giving the possibility to
    retrieve calls, messages, photo thumbnails, contact photos, applications databases,
    and so on.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 除了自动分析，Oxygen Forensics Suite 还提供了在文件系统中导航的功能，可以查看所有不同类型的文件（文档、图片、视频和音频）。此外，还有两个嵌入式工具，用于查看
    SQLite 数据库和 `plist` 文件。第一个工具还提供了从数据库中恢复已删除记录的功能，因此可以检索通话记录、短信、照片缩略图、联系人照片、应用程序数据库等。
- en: The use of this software also made it very easy for users not having high technical
    skills. It allows performing searches of keywords in a very intuitive way, also
    applying filters on every field of the application analyzed. Finally, it also
    allows exporting findings and it automatically generates a report in different
    formats (Word, Excel, PDF, HTML, and so on).
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 使用此软件也使得没有高技术技能的用户变得非常容易操作。它允许以非常直观的方式进行关键字搜索，还可以在每个分析过的应用程序字段上应用过滤器。最后，它还允许导出结果，并自动生成多种格式的报告（Word、Excel、PDF、HTML等）。
- en: A detailed list of the feature available for the iOS devices can be found at
    [http://www.oxygen-forensic.com/en/compare/devices/software-for-iphone](http://www.oxygen-forensic.com/en/compare/devices/software-for-iphone).
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: iOS设备的详细功能列表可以在[http://www.oxygen-forensic.com/en/compare/devices/software-for-iphone](http://www.oxygen-forensic.com/en/compare/devices/software-for-iphone)找到。
- en: Summary
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we showed how to approach the analysis of both native iOS applications
    that come with every iOS device, and third-party applications. We saw some of
    the most common applications, but the approach is the same for any other. The
    importance of being able to parse the `plist` files and SQLite databases, and
    to carve out deleted records from the latter also became clear, since these are
    the two main data structures an analyst will have to deal with in every analysis.
    Last but not least, this chapter provided you with a good amount of locations
    of interesting forensics artifacts, as well as tools to analyze them. Remember
    that in-depth analysis, references, and tools are available at [Appendix A](apa.html
    "Appendix A. References"), *References*, and [Appendix B](apb.html "Appendix B. Tools
    for iOS Forensics"), *Tools for iOS Forensics*.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 本章展示了如何分析iOS设备上自带的原生应用程序以及第三方应用程序。我们探讨了一些最常见的应用程序，但方法适用于任何其他应用程序。解析`plist`文件和SQLite数据库的重要性也变得显而易见，因为这是分析师在每次分析中必须处理的两个主要数据结构，同时还需从后者中恢复已删除的记录。最后，本章为您提供了有关有趣取证数据的丰富位置，并附带了分析这些数据的工具。请记住，深入分析、参考资料和工具可以在[附录A](apa.html
    "附录A.参考资料")、*参考资料*，以及[附录B](apb.html "附录B.iOS取证工具")、*iOS取证工具*中找到。
- en: The next chapter is dedicated to the analysis of mobile applications, whether
    they are malicious/suspicious or not. We will go through the setup of an analysis
    environment and then learn the application analysis principle, which will allow
    you to analyze the complete behavior of a mobile application.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将专门分析移动应用程序，无论它们是否具有恶意或可疑性。我们将讲解分析环境的搭建，然后学习应用程序分析原理，这将使您能够分析移动应用程序的完整行为。
- en: Self-test questions
  id: totrans-292
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自我测试问题
- en: Q1\. In which iOS folder is most of the user's information of interest saved?
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: Q1. 用户的大部分关键信息保存在iOS的哪个文件夹中？
- en: '`/private/var/mobile/`'
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/mobile/`'
- en: '`/Users/mobile/`'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/Users/mobile/`'
- en: '`/private/var/user/mobile/`'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/user/mobile/`'
- en: '`/private/user/mobile/`'
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/user/mobile/`'
- en: Q2\. Which is the timestamp convention used in iOS?
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: Q2. iOS中使用的时间戳格式是什么？
- en: UNIX Epoch Time
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: UNIX纪元时间
- en: Apple Time
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Apple时间
- en: Windows Time
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows时间
- en: MAC Absolute Time
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: MAC绝对时间
- en: Q3\. What does the file `/private/var/root/Library/Lockdown/data_ark.plist`
    contain?
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: Q3. 文件`/private/var/root/Library/Lockdown/data_ark.plist`包含什么内容？
- en: Last store search
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最近的商店搜索
- en: Information about the device and about its account holder
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于设备及其账户持有人的信息
- en: List of installed applications
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装的应用程序列表
- en: Password saved in the iDevice
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 密码保存在iDevice中
- en: Q4\. In which file is the information related to the SIM card used in the iDevice
    stored?
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: Q4. 哪个文件中存储了iDevice中与SIM卡相关的信息？
- en: '`ClearedSections.plist`'
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`ClearedSections.plist`'
- en: '`com.apple.network.identification.plist`'
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`com.apple.network.identification.plist`'
- en: '`com.apple.commcenter.plist`'
  id: totrans-311
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`com.apple.commcenter.plist`'
- en: '`com.apple.springboard.plist`'
  id: totrans-312
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`com.apple.springboard.plist`'
- en: Q5\. What is the name of the database containing the user address book?
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: Q5. 包含用户地址簿的数据库名称是什么？
- en: '`AddressBook.db`'
  id: totrans-314
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`AddressBook.db`'
- en: '`AddressBook.sqlited`b'
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`AddressBook.sqlited`b'
- en: '`AddressBook.sqlite`'
  id: totrans-316
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`AddressBook.sqlite`'
- en: '`AB.db`'
  id: totrans-317
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`AB.db`'
- en: Q6\. In which folder is the call history saved?
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: Q6. 通话历史记录保存在哪个文件夹中？
- en: '`/private/var/CallHistory`'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/CallHistory`'
- en: '`/private/var/wireless/Library/CallHistory/`'
  id: totrans-320
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/wireless/Library/CallHistory/`'
- en: '`/private/var/wireless/Library/CallHistoryDB/`'
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/wireless/Library/CallHistoryDB/`'
- en: '`/private/var/Library/CallHistory/`'
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/private/var/Library/CallHistory/`'
- en: Q7\. What kind of file is used to store Safari browsing history?
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: Q7. 哪种文件用于存储Safari浏览历史？
- en: SQLite
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SQLite
- en: Txt
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Txt
- en: Plist
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Plist
- en: HTML
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: HTML
- en: Q8\. How is the file containing the keyboard cache used for auto correction
    and auto completion called?
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: Q8\. 包含键盘缓存用于自动校正和自动完成的文件叫什么？
- en: '`UserDictionary.txt`'
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`UserDictionary.txt`'
- en: '`Dict.dat`'
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Dict.dat`'
- en: '`Dynamic-Text.dat`'
  id: totrans-331
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Dynamic-Text.dat`'
- en: '`Text.dat`'
  id: totrans-332
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`Text.dat`'
