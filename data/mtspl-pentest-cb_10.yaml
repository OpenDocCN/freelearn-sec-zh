- en: Chapter 10. Social Engineer Toolkit
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章。社会工程工具包
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖：
- en: Getting started with Social Engineer Toolkit (SET)
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开始使用社会工程工具包（SET）
- en: Working with the SET config file
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用SET配置文件
- en: Spear-phishing attack vector
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼攻击向量
- en: Website attack vectors
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站攻击向量
- en: Multi-attack web method
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 多攻击网络方法
- en: Infectious media generator
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 传染性媒体生成器
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: Social engineering is an act of manipulating people to perform actions that
    they don't intend to do. A cyber-based socially engineered scenario is designed
    to trap a user into performing activities that can lead to the theft of confidential
    information or some malicious activity. The reason for the rapid growth of social
    engineering amongst hackers is that it is difficult to break the security of a
    platform, but it is far easier to trick the user of that platform into performing
    unintentional malicious activity. For example, it is difficult to break the security
    of Gmail in order to steal someone's password, but it is easy to create a social
    engineered scenario where the victim can be tricked to reveal his/her login information
    by sending a fake login/phishing page.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程是一种操纵人们执行意图之外行为的行为。基于网络的社会工程场景旨在诱使用户执行可能导致机密信息被盗或某些恶意活动的活动。黑客之间社会工程迅速增长的原因是很难突破平台的安全性，但更容易欺骗该平台的用户执行意外的恶意活动。例如，很难突破Gmail的安全性以窃取某人的密码，但很容易创建一个社会工程场景，通过发送虚假的登录/网络钓鱼页面来欺骗受害者透露他/她的登录信息。
- en: The Social Engineer Toolkit is designed to perform such tricking activities.
    Just like we have exploits and vulnerabilities for existing software and operating
    systems, SET is a generic exploit of humans in order to break their own conscious
    security. It is an official toolkit available at [www.social-engineer.org](http://www.social-engineer.org)
    and it comes as a default installation with BackTrack 5\. In this chapter, we
    will analyze the aspect of this tool and how it adds more power to the Metasploit
    framework. We will mainly focus on creating attack vectors and managing the configuration
    file which is considered as the heart of SET. So let us dive deeper into the world
    of social engineering.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程工具包旨在执行此类欺骗活动。就像我们对现有软件和操作系统有漏洞和漏洞利用一样，SET是一种用于破坏自己的意识安全的通用漏洞利用。它是一个官方工具包，可在[www.social-engineer.org](http://www.social-engineer.org)上获得，并且它作为BackTrack
    5的默认安装。在本章中，我们将分析这个工具的方面以及它如何为Metasploit框架增添更多功能。我们将主要关注创建攻击向量和管理被视为SET核心的配置文件。因此，让我们深入探讨社会工程的世界。
- en: Getting started with Social Engineer Toolkit (SET)
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用社会工程工具包（SET）
- en: Let us start our introductory recipe about SET where we will be discussing SET
    on different platforms.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始我们关于SET的介绍性配方，在这里我们将讨论不同平台上的SET。
- en: Getting ready
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: SET can be downloaded for different platforms from its official site, [www.social-engineer.com](http://www.social-engineer.com).
    It has both the GUI version, which runs through browser and the command-line version,
    which can be executed from the terminal. It comes pre-installed in BackTrack which
    will be our platform for discussion in this chapter.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 可以从其官方网站[www.social-engineer.com](http://www.social-engineer.com)下载SET的不同平台版本。它既有通过浏览器运行的GUI版本，也有可以从终端执行的命令行版本。它预装在BackTrack中，这将是我们在本章讨论的平台。
- en: How to do it...
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: 'To launch SET on BackTrack, start the terminal window and pass the following
    path:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 要在BackTrack上启动SET，请启动终端窗口并传递以下路径：
- en: '[PRE0]'
  id: totrans-17
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you are using SET for the first time, you can update the toolkit to get the
    latest modules and fix known bugs. To start the updating process, we will pass
    the `svn update` command. Once the toolkit is updated, it is ready for use.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您是第一次使用SET，可以更新工具包以获取最新模块并修复已知的错误。要开始更新过程，我们将传递`svn update`命令。一旦工具包更新完成，它就可以使用了。
- en: The GUI version of SET can be accessed by navigating to **Applications** | **Backtrack**
    | **Exploitation tools** | **Social Engineering Toolkit** | **set-web**.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过导航到**应用程序** | **Backtrack** | **利用工具** | **社会工程工具包** | **set-web**来访问SET的GUI版本。
- en: How it works...
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: Social Engineering Toolkit is a Python-based automation tool that creates a
    menu-driven application for us. Faster execution and the versatility of Python
    makes it the preferred language for developing modular tools like SET. It also
    makes it easy to integrate the toolkit with web servers. Any open source HTTP
    server can be used to access the browser version of SET. Apache is considered
    as the preferable server while working with SET.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 社会工程工具包是一个基于Python的自动化工具，为我们创建了一个菜单驱动的应用程序。Python的快速执行和多功能性使其成为开发模块化工具如SET的首选语言。它还使得将工具包与Web服务器集成变得容易。任何开源的HTTP服务器都可以用于访问SET的浏览器版本。在使用SET时，Apache被认为是首选服务器。
- en: Working with the SET config file
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SET配置文件
- en: In this recipe, we will take a close look at the SET config file which contains
    default values for different parameters that are used by the toolkit. The default
    configuration works fine with most of the attacks, but there can be situations
    when you have to modify the settings according to the scenario and requirements.
    So let us see what configuration settings are available in the config file.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将仔细研究SET配置文件，其中包含工具包使用的不同参数的默认值。默认配置对大多数攻击都有效，但在某些情况下，您可能需要根据情景和要求修改设置。因此，让我们看看配置文件中有哪些配置设置。
- en: Getting ready
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To launch the config file, move to config and open the `set_config` file.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动配置文件，请转到配置并打开`set_config`文件。
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The configuration file will be launched with some introductory statements,
    as shown in the following screenshot:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 配置文件将以一些介绍性陈述启动，如下面的屏幕截图所示：
- en: '![Getting ready](img/7423_10_01.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![准备工作](img/7423_10_01.jpg)'
- en: How to do it...
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: Let us see what configuration settings are available for us.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看有哪些配置设置可供我们使用。
- en: '[PRE2]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: The first configuration setting is related to the Metasploit installation directory.
    Metasploit is required by SET for proper functioning as it picks up payloads and
    exploits from the framework.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个配置设置与Metasploit安装目录有关。 SET需要Metasploit才能正常运行，因为它从框架中提取有效载荷和利用。
- en: '[PRE3]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `sendmail` e-mail server is primarily used for e-mail spoofing. This attack
    will work only if the target's e-mail server does not implement reverse lookup.
    By default, its value is set to `OFF`.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '`sendmail`电子邮件服务器主要用于电子邮件欺骗。此攻击仅在目标电子邮件服务器不实现反向查找时才有效。默认情况下，其值设置为“OFF”。'
- en: The following setting shows one of the most widely used attack vectors of SET.
    This configuration will allow you to sign a malicious Java applet with your name
    or with any fake name, and then it can be used to perform a browser-based Java
    applet infection attack.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 以下设置显示了SET最常用的攻击向量之一。此配置将允许您使用您的名称或任何虚假名称签署恶意Java小程序，然后可以用于执行基于浏览器的Java小程序感染攻击。
- en: '[PRE4]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'We will discuss this attack vector in a detail in later recipe. This attack
    vector will also require JDK to be installed on your system. Let us set its value
    to `ON` as we will be discussing this attack in detail:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在以后的食谱中详细讨论此攻击向量。此攻击向量还将需要在您的系统上安装JDK。让我们将其值设置为“ON”，因为我们将详细讨论此攻击：
- en: '[PRE5]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: The `AUTO_DETECT` flag is used by SET to auto-discover the network settings.
    It will enable SET to detect your IP address if you are using a NAT/Port forwarding
    and allows you to connect to the external internet.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '`AUTO_DETECT`标志由SET用于自动发现网络设置。它将使SET能够检测您的IP地址，如果您使用NAT/端口转发，并允许您连接到外部互联网。'
- en: 'The following setting is used to set up the Apache web server to perform web-based
    attack vectors. It is always preferred to set it to `ON` for better attack performance:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 以下设置用于设置Apache web服务器以执行基于Web的攻击向量。最好将其设置为“ON”以获得更好的攻击性能：
- en: '[PRE6]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The following setting is used to set up the SSL certificate while performing
    web attacks. Several bugs and issues have been reported for the `WEBATTACK_SSL`
    setting of SET. So, it is recommended to keep this flag `OFF:`
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 以下设置用于在执行Web攻击时设置SSL证书。已报告了SET的`WEBATTACK_SSL`设置的几个错误和问题。因此，建议将此标志保持为“OFF”：
- en: '[PRE7]'
  id: totrans-43
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following setting can be used to build a self-signed certificate for web
    attacks but there will be a warning message saying "Untrusted certificate". Hence,
    it is recommended to use this option wisely to avoid alerting the target user:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 以下设置可用于构建用于Web攻击的自签名证书，但将显示警告消息“不受信任的证书”。因此，建议明智地使用此选项以避免警告目标用户：
- en: '[PRE8]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The following setting is used to enable or disable the Metasploit listener
    once the attack is executed:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 以下设置用于在执行攻击后启用或禁用Metasploit监听器：
- en: '[PRE9]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The following configuration will allow you to use SET as a standalone toolkit
    without using Metasploit functionalities, but it is always recommended to use
    Metasploit along with SET in order to increase the penetration testing performance.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 以下配置将允许您将SET用作独立工具包，而无需使用Metasploit功能，但始终建议与SET一起使用Metasploit以提高渗透测试性能。
- en: '[PRE10]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: These are a few important configuration settings available for SET. Proper knowledge
    of the config file is essential to gain full control over the Social Engineer
    Toolkit.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是SET可用的一些重要配置设置。必须充分了解配置文件，以完全控制社会工程师工具包。
- en: How it works...
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: The SET config file is the heart of the toolkit as it contains the default values
    that SET will pick while performing various attack vectors. A misconfigured SET
    file can lead to errors during the operation so it is essential to understand
    the details defined in the config file in order to get the best results. The *How
    to do it* section clearly reflects the ease with which we can understand and manage
    the config file.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: SET配置文件是工具包的核心，因为它包含SET在执行各种攻击向量时将选择的默认值。配置错误的SET文件可能导致操作中出现错误，因此必须了解配置文件中定义的细节，以获得最佳结果。
    *如何操作*部分清楚地反映了我们可以理解和管理配置文件的简易性。
- en: Spear-phishing attack vector
  id: totrans-53
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼攻击向量
- en: 'A spear-phishing attack vector is an e-mail attack scenario that is used to
    send malicious mails to target/specific user(s). In order to spoof your own e-mail
    address you will require a `sendmail` server. Change the config setting to `SENDMAIL=ON`.
    If you do not have `sendmail` installed on your machine then it can be downloaded
    by entering the following command:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 鱼叉式网络钓鱼攻击向量是一种用于向目标/特定用户发送恶意邮件的电子邮件攻击场景。为了欺骗自己的电子邮件地址，您将需要一个`sendmail`服务器。将配置设置更改为`SENDMAIL=ON`。如果您的计算机上没有安装`sendmail`，则可以通过输入以下命令进行下载：
- en: '[PRE11]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Getting ready
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Before we move ahead with a phishing attack, it is imperative for us to know
    how the e-mail system works.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行网络钓鱼攻击之前，我们必须了解电子邮件系统的工作原理。
- en: Recipient e-mail servers, in order to mitigate these types of attacks, deploy
    gray-listing, SPF records validation, RBL verification, and content verification.
    These verification processes ensure that a particular e-mail arrived from the
    same e-mail server as its domain. For example if a spoofed e-mail address, `<[richyrich@gmail.com](mailto:richyrich@gmail.com)>`arrives
    from IP `202.145.34.23` it will be marked as malicious as this IP address does
    not belong to Gmail. Hence, in order to bypass these, the attacker should ensure
    that the server IP is not present in the RBL/SURL list. As the spear-phishing
    attack relies heavily on user perception, the attacker should conduct a recon
    of the content that is being sent and should ensure that the content looks as
    legitimate as possible.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减轻这些类型的攻击，收件人电子邮件服务器部署了灰名单、SPF记录验证、RBL验证和内容验证。这些验证过程确保特定的电子邮件来自与其域相同的电子邮件服务器。例如，如果一个伪造的电子邮件地址`<richyrich@gmail.com>`来自IP`202.145.34.23`，它将被标记为恶意，因为此IP地址不属于Gmail。因此，为了绕过这些，攻击者应确保服务器IP不在RBL/SURL列表中。由于鱼叉式网络钓鱼攻击严重依赖用户感知，攻击者应对发送的内容进行侦察，并确保内容看起来尽可能合法。
- en: Spear-phishing attacks are of two types—web-based content and payload based
    content.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 钓鱼攻击有两种类型——基于Web的内容和基于载荷的内容。
- en: In previous chapters we have already seen how to create a payload but as most
    of the e-mail systems do not allow executables, we should consider using different
    types of payloads embedded into the HTML content of the e-mail; for example, Java
    applet, Flash, PDF or MS Word/Excel, to name a few.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的章节中，我们已经看到如何创建载荷，但由于大多数电子邮件系统不允许可执行文件，我们应该考虑使用不同类型的载荷嵌入到电子邮件的HTML内容中；例如，Java小程序、Flash、PDF或MS
    Word/Excel等。
- en: How to do it...
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: The spear-phishing module has three different attack vectors at our disposal.
    Let us analyze each of them.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 钓鱼攻击模块有三种不同的攻击向量供我们使用。让我们分析每一个。
- en: '[PRE12]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Passing option `1` will start our mass-mailing attack. The attack vector starts
    with selecting a payload. You can select any vulnerability from the list of available
    Metasploit exploit modules. Then, we will be prompted to select a handler that
    can connect back to the attacker. The options will include setting the vnc server
    or executing the payload and starting the command line, and so on.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 选择选项`1`将启动我们的大规模邮件攻击。攻击向量始于选择一个载荷。您可以从可用的Metasploit exploit模块列表中选择任何漏洞。然后，我们将被提示选择一个处理程序，可以连接回攻击者。选项将包括设置vnc服务器或执行载荷并启动命令行等。
- en: 'The next few steps will be starting the `sendmail` server, setting a template
    for a malicious file format, and selecting a single or mass-mail attack:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的几个步骤将是启动`sendmail`服务器，为恶意文件格式设置模板，并选择单个或大规模邮件攻击：
- en: '![How to do it...](img/7423_10_02.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![如何做...](img/7423_10_02.jpg)'
- en: 'Finally, you will be prompted to either choose a known mail service such as
    Gmail and Yahoo or use your own server:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，您将被提示要么选择像Gmail和Yahoo这样的已知邮件服务，要么使用您自己的服务器：
- en: '[PRE13]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Setting up your own server cannot be very reliable as most of the mail services
    follow a reverse lookup to make sure that the e-mail has generated from the same
    domain name as the address name.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 设置自己的服务器可能不太可靠，因为大多数邮件服务都会进行反向查找，以确保电子邮件是从与地址名称相同的域名生成的。
- en: 'Let us analyze another attack vector of spear phishing. Creating a file format
    payload is another attack vector in which we can generate a file format with a
    known vulnerability and send it via e-mail to attack our target. It is preferred
    to use MS Word-based vulnerabilities as they are difficult to detect whether they
    are malicious or not, so they can be sent as an attachment via an e-mail:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们分析钓鱼攻击的另一个攻击向量。创建文件格式的载荷是另一个攻击向量，我们可以生成一个带有已知漏洞的文件格式，并通过电子邮件发送给目标进行攻击。最好使用MS
    Word的漏洞，因为很难检测它们是否是恶意的，所以它们可以作为附件通过电子邮件发送：
- en: '[PRE14]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: At last, we will be prompted whether we want to set up a listener or not. It
    will start the Metasploit listener and will wait for the user to open the malicious
    file and connect back to the attacking system.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将被提示是否要设置监听器。它将启动Metasploit监听器，并等待用户打开恶意文件并连接到攻击系统。
- en: The success of e-mail attacks depends on the e-mail client that we are targeting.
    So a proper analysis of this attack vector is essential.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件攻击的成功取决于我们所针对的电子邮件客户端。因此，对这种攻击向量进行适当的分析是必不可少的。
- en: How it works...
  id: totrans-74
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: As discussed earlier, the spear-phishing attack vector is a social engineering
    attack vector that targets specific users. An e-mail is sent from the attacking
    machine to the target user(s). The e-mail will contain a malicious attachment
    which will exploit a known vulnerability on the target machine and provide a shell
    connectivity to the attacker. SET automates the entire process. The major role
    that social engineering plays here is setting up a scenario that looks completely
    legitimate to the target, and fools the target into downloading the malicious
    file and executing it.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，钓鱼攻击向量是一种针对特定用户的社会工程攻击向量。一封电子邮件从攻击机器发送到目标用户。电子邮件将包含一个恶意附件，该附件将利用目标机器上已知的漏洞，并为攻击者提供一个shell连接。SET自动化了整个过程。社会工程在这里发挥的主要作用是建立一个对目标完全合法的情景，并愚弄目标下载恶意文件并执行它。
- en: Website attack vectors
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网站攻击向量
- en: 'The SET "web attack" vector is a unique way of utilizing multiple web-based
    attacks in order to compromise the intended victim. It is by far the most popular
    attack vector of SET. It works similar to browser autopwn where several (or specific)
    attacks can be sent to the target browser. It has the following attack vectors:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: SET的“web攻击”向量是利用多种基于Web的攻击方式来 compromise 目标受害者的独特方式。这是迄今为止SET最受欢迎的攻击向量。它类似于浏览器自动攻击，可以向目标浏览器发送多个（或特定）攻击。它具有以下攻击向量：
- en: '[PRE15]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Here in this recipe we will discuss the most popular attack vector, the Java
    applet attack method. Let us see how this attack is performed using SET.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个示例中，我们将讨论最流行的攻击向量，即Java小程序攻击方法。让我们看看如何使用SET执行这种攻击。
- en: Getting ready
  id: totrans-80
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To start with the Java applet attack method, we will have to select the first
    option. Then in the next step, we will be prompted to choose a webpage setup.
    We can either choose custom templates or clone a complete URL. Let us see how
    cloning will help us in performing the attack.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用Java小程序攻击方法，我们必须选择第一个选项。然后在下一步中，我们将被提示选择网页设置。我们可以选择自定义模板或克隆完整的URL。让我们看看克隆如何帮助我们执行攻击。
- en: How to do it...
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做...
- en: The target user will have to access the website that the pen-tester has decided
    to clone. Hence, the pen-tester should understand that the cloned site shouldn't
    digress from the actual sites functionality, vis-à-vis the phishing site.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 目标用户将不得不访问渗透测试人员决定克隆的网站。因此，渗透测试人员应该明白，克隆站点不应该偏离实际站点的功能，即钓鱼站点。
- en: 'To start with the cloning option, we will have to decide on a URL we want to
    clone. Let us clone the Facebook login page and proceed further:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始克隆选项，我们必须决定要克隆的URL。让我们克隆Facebook登录页面并进一步进行：
- en: '[PRE16]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: Once we are done with the cloning part, we will be prompted to choose a payload
    along with a backdoor that can be dropped onto the target machine.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦我们完成了克隆部分，我们将被提示选择一个有效载荷以及一个可以放置在目标机器上的后门。
- en: Once we're done with these steps, the SET web server will start along with msf.
    Msf will manage the handler that will receive the back connection once the payload
    is dropped into the target machine.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成这些步骤后，SET网络服务器将启动，并且msf也将启动。Msf将管理处理程序，一旦有效载荷被放置到目标机器中，将接收反向连接。
- en: You can find your cloned template along with jar at `/pentest/exploits/set/src/web_clone/site/template`.
    Now once the target user visits the cloned website (hosted on a fake domain),
    an applet message will pop up that will appear as a completely safe alert message:![How
    to do it...](img/7423_10_03.jpg)
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以在`/pentest/exploits/set/src/web_clone/site/template`找到您的克隆模板以及jar。现在一旦目标用户访问克隆的网站（托管在假域名上），将弹出一个小程序消息，看起来完全是一个安全的警报消息：![操作步骤...](img/7423_10_03.jpg)
- en: 'Now once the target user clicks on **Allow**, the malicious applet gets executed
    and it allows the execution of the payload. The Metasploit listener will receive
    a connection back from the target machine and, thus, we will have an active session:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 现在一旦目标用户点击**允许**，恶意小程序就会被执行，并允许执行有效载荷。Metasploit监听器将从目标机器接收到一个连接，因此我们将拥有一个活动会话：
- en: '[PRE17]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Similarly, we can perform other attacks as well. You can see how easily SET
    creates attack vectors for us and provides us with complete control over our scenario.
    The best thing about SET is that it can give you the full opportunity to implement
    your own modifications and changes whenever you want.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，我们也可以执行其他攻击。您可以看到SET如何轻松地为我们创建攻击向量，并为我们提供对我们的情景的完全控制。SET的最好之处在于它可以让您在任何时候实施自己的修改和更改。
- en: How it works...
  id: totrans-92
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: The Java applet infection is a popular Java applet vulnerability that allows
    the execution of applet outside the protected sandbox environment. Unsigned, or
    unsafe applets, are executed in a sandboxed environment with limited access to
    system resources. Once the malicious applet is allowed to execute after the warning
    message, it gains the privilege of full resource access on the target machine
    as now it is outside the sandboxed environment. This allows the applet to execute
    a Java vulnerability and allow remote code execution. Similarly other web-based
    attack vectors use a browser to transfer attacks to the target system. Social
    engineering again lies in the art of crafting a scenario which fools the user.
    The attacker can create a malicious link hidden under a `href` tag or the applet
    can be signed using fake signatures in order to make it look completely legitimate.
    SET templates are a good source of designing attacks.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Java小程序感染是一种常见的Java小程序漏洞，允许在受保护的沙箱环境之外执行小程序。未签名或不安全的小程序在受限制的系统资源访问权限的沙箱环境中执行。一旦恶意小程序在警告消息后被允许执行，它就获得了在目标机器上完全访问资源的特权，因为它现在处于沙箱环境之外。这允许小程序执行Java漏洞并允许远程代码执行。同样，其他基于网络的攻击向量使用浏览器将攻击传输到目标系统。社会工程再次在制造愚弄用户的情景方面发挥作用。攻击者可以在`href`标签下隐藏恶意链接，或者可以使用假签名对小程序进行签名，以使其看起来完全合法。SET模板是设计攻击的良好来源。
- en: Multi-attack web method
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 多攻击网络方法
- en: The multi-attack web method further takes web attack to the next level by combining
    several attacks into one. This attack method allows us to club several exploits
    and vulnerabilities under a single format. Once the file or URL is opened by the
    target user, then each attack is thrown one by one unless a successful attack
    is reported. SET automates the process of clubbing different attacks under a single
    web attack scenario. Let us move ahead and see how this is done.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 多攻击网络方法通过将多个攻击组合成一个攻击方法，将网络攻击提升到了一个新的水平。这种攻击方法允许我们将多个利用和漏洞组合到一个单一的格式中。一旦目标用户打开文件或URL，每个攻击都会依次进行，直到报告成功的攻击。SET自动化了将不同攻击组合成一个单一网络攻击方案的过程。让我们继续前进，看看这是如何完成的。
- en: How to do it...
  id: totrans-96
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: The multi-attack web method starts similar to other web-based attacks. We start
    with selecting a template which can either be imported or can be cloned. The difference
    lies in the next step where we can select various exploits that can be added into
    the web attack.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 多攻击网络方法与其他基于网络的攻击类似。我们首先选择一个模板，可以导入或克隆。不同之处在于下一步，我们可以选择可以添加到网络攻击中的各种利用。
- en: 'Select which attacks you want to use:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 选择要使用的攻击：
- en: '[PRE18]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: We can select different attacks and, once we are done, we can pass `8` and finally
    combine the selected attacks under a single vector. Finally, we will be prompted
    to select a payload and backdoor encoder.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以选择不同的攻击，一旦完成，我们可以输入`8`，最后将所选的攻击组合成一个单一的向量。最后，我们将被提示选择有效载荷和后门编码器。
- en: How it works...
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: Once different attacks have been selected, SET clubs them with a payload and
    builds a single malicious link that needs to be social engineered now. We will
    have to build a template that looks completely legitimate to the target user and
    force him to visit the malicious link. Once the link is clicked by the victim,
    different attacks are tried one by one unless a successful attack is launched.
    Once a vulnerability is found and exploited, the payload provides a back connectivity
    to the Metasploit listener.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦选择了不同的攻击，SET将它们与有效载荷结合起来，构建一个单一的恶意链接，现在需要进行社会工程。我们将不得不构建一个对目标用户看起来完全合法的模板，并迫使他访问恶意链接。一旦受害者点击链接，不同的攻击将依次尝试，直到成功发动攻击。一旦发现并利用了漏洞，有效载荷将为Metasploit监听器提供反向连接。
- en: Infectious media generator
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 传染性媒体生成器
- en: The infectious media generator is a relatively simple attack vector. SET will
    create a Metasploit-based payload, set up a listener for you, and generate a folder
    that needs to be burned or written to a DVD/USB drive. Once inserted, if auto-run
    is enabled, the code will automatically execute and take control of the machine.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 传染性媒体生成器是一种相对简单的攻击向量。SET将创建一个基于Metasploit的有效载荷，为您设置一个监听器，并生成一个需要刻录或写入DVD/USB驱动器的文件夹。一旦插入，如果启用了自动运行，代码将自动执行并控制机器。
- en: How to do it...
  id: totrans-105
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何做到这一点...
- en: This attack vector is based on a simple principle of generating a malicious
    executable, and then encoding it with available encoders so as to bypass antivirus
    protection.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 这种攻击向量基于一个简单的原则，即生成恶意可执行文件，然后使用可用的编码器对其进行编码，以绕过杀毒软件的保护。
- en: '[PRE19]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: How it works...
  id: totrans-108
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: After generating the encoded malicious file, the Metasploit listener starts
    waiting for back connections. The only limitation with this attack is that the
    removable media must have auto-run enabled, otherwise it will require a manual
    trigger.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在生成编码的恶意文件之后，Metasploit监听器开始等待反向连接。这种攻击的唯一限制是可移动媒体必须启用自动运行，否则将需要手动触发。
- en: This type of attack vector can be helpful in situations where the target user
    is behind a firewall. Most of the antivirus programes, now a days, disable auto-run,
    which in turn renders this type of attack useless. The pen-tester, along with
    auto-run based attacks should also ensure that a backdoor legitimate executable/PDF
    is provided along with the media. This would ensure that the victim would invariably
    execute one of the payload.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 这种攻击向量在目标用户身后有防火墙的情况下可能会有帮助。现在大多数的杀毒程序都会禁用自动运行，这也使得这种攻击方式变得无效。渗透测试人员除了基于自动运行的攻击之外，还应确保提供一个带有后门的合法可执行文件/PDF文件。这样可以确保受害者必然会执行其中一个有效载荷。
