- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: This book is a comprehensive guide on the privilege escalation process for Windows
    and Linux systems and is designed to be practical and hands-on by providing you
    with real-world exercises and scenarios in the form of vulnerable environments
    and virtual machines. The book starts off by introducing you to privilege escalation
    and covers the process of setting up a hands-on virtual hacking lab that will
    be used to demonstrate the practical aspects of the techniques covered during
    the course of this book. Each chapter of this book builds on the previous chapter
    and validates the learning process by providing you with exercises and scenarios
    that you can replicate.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本书是一本关于Windows和Linux系统特权提升过程的全面指南，旨在通过提供真实的练习和场景，采用易于操作的方式让读者掌握实用技能。本书从介绍特权提升开始，涵盖了搭建实操虚拟黑客实验室的过程，这个实验室将用于展示本书中所讨论的各种技术的实际应用。每一章内容都基于前一章展开，通过提供可以复制的练习和场景来验证学习过程。
- en: You will learn how to enumerate as much information as possible from a target
    system, utilize manual and automated enumeration tools, elevate privileges on
    Windows systems by leveraging various techniques, such as impersonation attacks
    or kernel exploits, among many others, and elevate privileges on Linux systems
    through the use of kernel exploits or by exploiting SUID binaries.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 你将学习如何从目标系统中枚举尽可能多的信息，利用手动和自动化枚举工具，通过多种技术（如冒充攻击或内核漏洞利用等）提升Windows系统的特权，并通过使用内核漏洞或利用SUID二进制文件提升Linux系统的特权。
- en: This book is sorted into three sections that build on each other, whereby the
    first section covers the introduction to privilege escalation, the process of
    obtaining the initial foothold on a target system, and enumerating information
    from target systems. The next two sections are dedicated to covering the various
    privilege escalation techniques and tools for both Windows and Linux systems.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书分为三个部分，互相衔接，第一部分涵盖特权提升的简介、如何在目标系统上获得初步立足点，以及如何从目标系统中枚举信息。接下来的两部分专注于介绍适用于Windows和Linux系统的各种特权提升技术和工具。
- en: This book will provide you with the necessary skills to enumerate information
    from target systems, identify potential vulnerabilities, and utilize manual techniques
    or automated tools in order to elevate their privileges on the target system.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本书将为你提供必要的技能，使你能够从目标系统中枚举信息，识别潜在漏洞，并利用手动技术或自动化工具提升目标系统的特权。
- en: Who this book is for
  id: totrans-5
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合谁阅读
- en: This book is designed for students, cyber security professionals, enthusiasts,
    security engineers, penetration testers, or for anyone who has a keen interest
    in penetration testing or information security. This book can be used as study
    material for individuals, companies, or training organizations.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本书面向学生、网络安全专业人员、爱好者、安全工程师、渗透测试人员，或者任何对渗透测试或信息安全有浓厚兴趣的人群。本书可以作为个人、公司或培训机构的学习材料。
- en: Regardless of whether you're a student new to the information technology industry
    or a seasoned professional, this book has something to offer and is packed with
    useful information that you can use to improve your penetration testing skills.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 无论你是信息技术行业的新手学生，还是经验丰富的专业人士，本书都能为你提供有价值的信息，帮助你提升渗透测试技能。
- en: What this book covers
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书内容
- en: '[*Chapter 1*](B17389_01_Final_PG_ePub.xhtml#_idTextAnchor014), *Introduction
    to Privilege Escalation*, introduces you to the privilege escalation process,
    the various types of privilege escalation attacks, and the differences between
    privilege escalation on Windows and Linux.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第1章*](B17389_01_Final_PG_ePub.xhtml#_idTextAnchor014)，*特权提升简介*，介绍了特权提升过程、各种特权提升攻击类型，以及Windows和Linux系统上特权提升的差异。'
- en: '[*Chapter 2*](B17389_02_Final_PG_ePub.xhtml#_idTextAnchor030), *Setting Up
    Our Lab*, introduces you to the concept of virtualization, how to build your own
    penetration testing lab, how to set up vulnerable virtual machines, and installing
    and configuring Kali Linux.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第2章*](B17389_02_Final_PG_ePub.xhtml#_idTextAnchor030)，*搭建实验环境*，介绍了虚拟化的概念，如何搭建自己的渗透测试实验室，如何设置易受攻击的虚拟机，以及如何安装和配置Kali
    Linux。'
- en: '[*Chapter 3*](B17389_03_Final_PG_ePub.xhtml#_idTextAnchor045), *Gaining Access
    (Exploitation)*, focuses on the process of setting up the Metasploit framework,
    performing information gathering with Nmap, identifying vulnerabilities, and exploiting
    them to gain access to a system.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第3章*](B17389_03_Final_PG_ePub.xhtml#_idTextAnchor045)，*获取访问权限（漏洞利用）*，重点讲解了设置Metasploit框架、使用Nmap进行信息收集、识别漏洞以及利用这些漏洞获取系统访问权限的过程。'
- en: '[*Chapter 4*](B17389_04_Final_PG_ePub.xhtml#_idTextAnchor058), *Performing
    Local Enumeration*, covers the process of enumerating information from Windows
    and Linux systems manually and automatically.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B17389_04_Final_PG_ePub.xhtml#_idTextAnchor058)，*执行本地枚举*，涵盖了手动和自动从Windows和Linux系统中枚举信息的过程。'
- en: '[*Chapter 5*](B17389_05_Final_PG_ePub.xhtml#_idTextAnchor075), *Windows Kernel
    Exploits*, explores the process of performing kernel exploitation manually and
    automatically with Metasploit in order to elevate your privileges.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B17389_05_Final_PG_ePub.xhtml#_idTextAnchor075)，*Windows内核漏洞利用*，探讨了通过Metasploit手动和自动执行内核漏洞利用，以提升权限的过程。'
- en: '[*Chapter 6*](B17389_06_Final_PG_ePub.xhtml#_idTextAnchor089), *Impersonation
    Attacks*, explains how Windows access tokens work, outlines the process of enumerating
    privileges, explains token impersonation attacks, and covers the process of elevating
    your privileges via the Rotten Potato attack.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B17389_06_Final_PG_ePub.xhtml#_idTextAnchor089)，*伪装攻击*，解释了Windows访问令牌的工作原理，概述了枚举权限的过程，讲解了令牌伪装攻击，并涵盖了通过腐烂土豆攻击提升权限的过程。'
- en: '[*Chapter 7*](B17389_07_Final_PG_ePub.xhtml#_idTextAnchor101), *Windows Password
    Mining*, explores the process of searching for passwords in files and Windows
    configuration files, searching for application passwords, dumping Windows hashes,
    and cracking dumped password hashes in order to elevate your privileges.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B17389_07_Final_PG_ePub.xhtml#_idTextAnchor101)，*Windows密码挖掘*，探讨了在文件和Windows配置文件中搜索密码、寻找应用程序密码、转储Windows哈希值并破解转储的密码哈希值，以提升权限的过程。'
- en: '[*Chapter 8*](B17389_08_Final_PG_ePub.xhtml#_idTextAnchor114), *Exploiting
    Services*, covers the process of exploiting unquoted service paths, exploiting
    the secondary logon handle, exploiting weak service permissions, and performing
    DLL hijacking.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*](B17389_08_Final_PG_ePub.xhtml#_idTextAnchor114)，*利用服务*，涵盖了利用未引用的服务路径、利用二级登录句柄、利用弱服务权限和执行DLL劫持的过程。'
- en: '[*Chapter 9*](B17389_09_Final_PG_ePub.xhtml#_idTextAnchor126), *Privilege Escalation
    through the Windows Registry*, examines the process of exploiting weak registry
    permissions, autorun programs, and exploiting the Always Install Elevated feature.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*](B17389_09_Final_PG_ePub.xhtml#_idTextAnchor126)，*通过Windows注册表提升权限*，研究了利用弱注册表权限、自动运行程序和利用“始终以管理员身份安装”功能的过程。'
- en: '[*Chapter 10*](B17389_10_Final_PG_ePub.xhtml#_idTextAnchor139), *Linux Kernel
    Exploits*, explains the workings of the Linux kernel and covers the process of
    performing kernel exploitation both manually and automatically with Metasploit.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*](B17389_10_Final_PG_ePub.xhtml#_idTextAnchor139)，*Linux内核漏洞利用*，解释了Linux内核的工作原理，并涵盖了通过Metasploit手动和自动执行内核漏洞利用的过程。'
- en: '[*Chapter 11*](B17389_11_Final_PG_ePub.xhtml#_idTextAnchor152), *Linux Password
    Mining*, focuses on the process of extracting passwords from memory, searching
    for passwords in configuration files, and searching for passwords in Linux history
    files.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*](B17389_11_Final_PG_ePub.xhtml#_idTextAnchor152)，*Linux密码挖掘*，重点讲解了从内存中提取密码、在配置文件中查找密码以及在Linux历史文件中查找密码的过程。'
- en: '[*Chapter 12*](B17389_12_Final_PG_ePub.xhtml#_idTextAnchor162), *Scheduled
    Tasks*, introduces you to cron jobs on Linux and covers the process of escalating
    your privileges by exploiting cron paths, cron wildcards, and cron file overwrites.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第12章*](B17389_12_Final_PG_ePub.xhtml#_idTextAnchor162)，*定时任务*，介绍了Linux中的cron作业，并涵盖了通过利用cron路径、cron通配符和cron文件覆盖来提升权限的过程。'
- en: '[*Chapter 13*](B17389_13_Final_PG_ePub.xhtml#_idTextAnchor175), *Exploiting
    SUID Binaries*, outlines how filesystem permissions on Linux work and explores
    the process of searching for SUID binaries and elevating your privileges through
    the use of shared object injection.'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第13章*](B17389_13_Final_PG_ePub.xhtml#_idTextAnchor175)，*利用SUID二进制文件*，概述了Linux中文件系统权限的工作原理，并探讨了寻找SUID二进制文件以及通过共享对象注入提升权限的过程。'
- en: To get the most out of this book
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: To get the most out of this book, you should have a fundamental understanding
    of networking, specifically TCP/IP, UDP, and their respective protocols. Furthermore,
    given the nature of the techniques covered in the book, you should have basic
    familiarity with the workings and functionality of Windows and Linux.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要最大限度地利用本书，你应当具备基本的网络知识，特别是 TCP/IP、UDP 以及它们各自的协议。此外，考虑到本书所涉及技术的性质，你还应对 Windows
    和 Linux 的工作原理和功能有所了解。
- en: 'The hardware required to follow the techniques and exploits in this book is
    fairly standard. You can use a laptop or desktop computer that supports virtualization
    and is capable of running Oracle VirtualBox. As per the hardware and operating
    system specifications, the following configuration is recommended:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 本书所需的硬件配置相对标准。你可以使用一台支持虚拟化并能够运行 Oracle VirtualBox 的笔记本或台式计算机。根据硬件和操作系统的规格，推荐以下配置：
- en: '**Operating system** (**Windows**): Windows 7 or later, preferably 64-bit'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统**（**Windows**）：Windows 7 或更高版本，最好是 64 位'
- en: '**Operating system** (**Linux**): Ubuntu, Debian, Fedora, or any stable distribution
    based on Debian or Fedora'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统**（**Linux**）：Ubuntu、Debian、Fedora 或任何基于 Debian 或 Fedora 的稳定发行版'
- en: '**Processor**: Intel i5 or higher'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**处理器**：Intel i5 或更高'
- en: '**RAM**: 8 GB or higher'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**RAM**：8 GB 或更高'
- en: '**HDD**: 500 GB hard drive'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**硬盘**：500 GB 硬盘'
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book''s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting of code.**'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果你使用的是本书的数字版，我们建议你自己输入代码或从本书的 GitHub 仓库访问代码（下一节中提供了链接）。这样可以帮助你避免复制和粘贴代码时可能出现的错误。**'
- en: Code in Action
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 代码实战
- en: The Code in Action videos for this book can be viewed at [https://bit.ly/3CPN0DU](https://bit.ly/3CPN0DU).
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的《代码实战》视频可以在[https://bit.ly/3CPN0DU](https://bit.ly/3CPN0DU)查看。
- en: Download the color images
  id: totrans-33
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781801078870_ColorImages.pdf](_ColorImages.pdf).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一份 PDF 文件，其中包含了本书中使用的截图和图表的彩色版本。你可以在此下载：[https://static.packt-cdn.com/downloads/9781801078870_ColorImages.pdf](_ColorImages.pdf)。
- en: Conventions used
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了一些文本约定。
- en: '**Code in text**: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "After downloading the Bash script to our Kali VM,
    we need to transfer the **linpeas.sh** file to our target virtual machine."'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**文本中的代码**：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。例如：“在将
    Bash 脚本下载到我们的 Kali 虚拟机后，我们需要将**linpeas.sh**文件传输到目标虚拟机。”'
- en: 'A block of code is set as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 一段代码如下所示：
- en: '#include <stdio.h>'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '#include <stdio.h>'
- en: '#include <stdlib.h>'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '#include <stdlib.h>'
- en: static void inject() __attribute__((constructor));
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: static void inject() __attribute__((constructor));
- en: void inject() {
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: void inject() {
- en: system("cp /bin/bash /tmp/bash && chmod +s /tmp/bash && /tmp/bash -p");
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: system("cp /bin/bash /tmp/bash && chmod +s /tmp/bash && /tmp/bash -p");
- en: '}'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望引起你注意代码块中特定部分时，相关行或项目会以粗体显示：
- en: '#include <stdio.h>'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '#include <stdio.h>'
- en: '#include <stdlib.h>'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: '#include <stdlib.h>'
- en: static void inject() __attribute__((constructor));
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: static void inject() __attribute__((constructor));
- en: void inject() {
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: void inject() {
- en: system(**"cp /bin/bash /tmp/bash && chmod +s /tmp/bash && /tmp/bash -p"**);
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: system(**"cp /bin/bash /tmp/bash && chmod +s /tmp/bash && /tmp/bash -p"**);
- en: '}'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '}'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 所有命令行输入或输出以如下格式书写：
- en: ls -al /home/user/
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ls -al /home/user/
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    "Select **System info** from the **Administration** panel."'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示一个新术语、一个重要单词或你在屏幕上看到的单词。例如，菜单或对话框中的单词会显示为**粗体**。例如：“从**管理**面板中选择**系统信息**。”'
- en: Tips or important notes
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 如此显示。
- en: Get in touch
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at [customercare@packtpub.com](mailto:customercare@packtpub.com) and
    mention the book title in the subject of your message.'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您对本书的任何内容有疑问，请通过电子邮件 [customercare@packtpub.com](mailto:customercare@packtpub.com)
    与我们联系，并在邮件主题中注明书名。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误**：尽管我们已尽力确保内容的准确性，但错误仍然可能发生。如果您在本书中发现了错误，我们将非常感激您向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    并填写表格。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packt.com](mailto:copyright@packt.com)
    with a link to the material.'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上遇到我们作品的任何非法复制形式，我们将非常感激您能提供相关的地址或网站名称。请通过电子邮件 [copyright@packt.com](mailto:copyright@packt.com)
    与我们联系，并附上相关材料的链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您有兴趣成为作者**：如果您在某个领域拥有专长，并且有意撰写或参与编写书籍，请访问 [authors.packtpub.com](http://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享您的想法
- en: Once you've read *Privilege Escalation Techniques*, we'd love to hear your thoughts!
    Please [click here to go straight to the Amazon review page](https://packt.link/r/1801078874)
    for this book and share your feedback.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 阅读完 *特权提升技术* 后，我们非常希望听到您的想法！请 [点击这里直接访问亚马逊评论页面](https://packt.link/r/1801078874)
    为本书留下反馈。
- en: Your review is important to us and the tech community and will help us make
    sure we're delivering excellent quality content.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 您的评论对我们和技术社区非常重要，将帮助我们确保提供优质内容。
