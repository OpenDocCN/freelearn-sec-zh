- en: Active Information Gathering
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主动信息收集
- en: Active information gathering can be used to provide very useful results during
    the reconnaissance phase of a penetration test. With this active approach, the
    penetration tester makes a direct connection to the actual target to gather specific
    details that **Open Source Intelligence** (**OSINT**) is unable to provide. Using
    active information gathering, the penetration tester is able to create a very
    detailed profile of the target, gathering information such as the type of operating
    system and running services. This information helps to research and identify vulnerabilities
    in relation to the target, thereby narrowing the scope in choosing specific exploits
    to unleash against it.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: '在渗透测试的侦察阶段，主动信息收集可以提供非常有用的结果。通过这种主动方法，渗透测试人员直接连接到实际目标，收集**开源情报**（**OSINT**）无法提供的具体细节。使用主动信息收集，渗透测试人员能够创建目标的非常详细的概要，收集操作系统类型和运行服务等信息。这些信息有助于研究和识别与目标相关的漏洞，从而缩小选择特定利用方式的范围。 '
- en: For this entire chapter, we will focus on directly engaging the target to gather
    specific details about it in order to help us profile any running services. Understanding
    how to perform active reconnaissance will provide us with vital assistance for
    the exploitation phase. During the information-gathering phase, you'll be able
    to identify vulnerabilities and determine suitable exploits to break into a system
    and network. You will also be able to retrieve sensitive information from network
    devices and systems.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个本章中，我们将专注于直接与目标进行互动，以收集有关其特定细节的信息，以帮助我们对任何正在运行的服务进行概要。了解如何执行主动侦察将为我们在利用阶段提供重要的帮助。在信息收集阶段，您将能够识别漏洞并确定适当的利用方式来入侵系统和网络。您还将能够从网络设备和系统中检索敏感信息。
- en: 'During the course of this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的过程中，我们将涵盖以下主题：
- en: Understanding active information gathering
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解主动信息收集
- en: DNS interrogation
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS询问
- en: Scanning
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描
- en: Nmap
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap
- en: Hping3
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Hping3
- en: SMB, LDAP enumeration, and null sessions
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: SMB、LDAP枚举和空会话
- en: Web footprints and enumeration with EyeWitness
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用EyeWitness进行网络足迹和枚举
- en: Metasploit auxiliary modules
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Metasploit辅助模块
- en: Technical requirements
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'The following are the technical requirements for this chapter:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是本章的技术要求：
- en: 'Kali Linux: [www.kali.org](http://www.kali.org)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Kali Linux: [www.kali.org](http://www.kali.org)'
- en: 'Wireshark: [www.wireshark.org](http://www.wireshark.org)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Wireshark: [www.wireshark.org](http://www.wireshark.org)'
- en: 'JXplorer: [https://github.com/pegacat/jxplorer](https://github.com/pegacat/jxplorer)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'JXplorer: [https://github.com/pegacat/jxplorer](https://github.com/pegacat/jxplorer)'
- en: 'EyeWitness: [https://github.com/FortyNorthSecurity/EyeWitness](https://github.com/FortyNorthSecurity/EyeWitness)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'EyeWitness: [https://github.com/FortyNorthSecurity/EyeWitness](https://github.com/FortyNorthSecurity/EyeWitness)'
- en: Understanding active information gathering
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 了解主动信息收集
- en: Active information gathering uses a direct approach to engage with our target;
    it involves actually making a connection between our machine and the target network
    and systems. By performing active information gathering, we are able to gather
    specific and detailed data such as live hosts, running services and application
    versions, network file shares, and user account information.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 主动信息收集使用直接方法与我们的目标进行互动；它实际上涉及在我们的机器和目标网络和系统之间建立连接。通过执行主动信息收集，我们能够收集特定和详细的数据，如活动主机、运行的服务和应用程序版本、网络文件共享和用户帐户信息。
- en: Performing active information gathering does pose a risk of detection.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 执行主动信息收集确实存在被检测的风险。
- en: Determining live hosts will give us an idea of the number of devices that are
    online. It doesn't make sense to target an offline device as it would be unresponsive.
    Knowing the operating system and running services on a target helps us to understand
    the role of that device in the network and the resources it provides to its clients.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 确定活动主机将让我们了解在线设备的数量。针对离线设备没有意义，因为它将无法响应。了解目标上的操作系统和运行的服务将帮助我们了解该设备在网络中的角色以及为其客户提供的资源。
- en: For example, if we were to find lots of file shares on the target system during
    active information gathering, this could mean that the target may be a file server
    that has a lot of important data on its shared drive. When performing active information
    gathering, the attacker machine (in our case, a Kali Linux-based machine) sends
    special queries to the potential victim in the hope that the victim machine will
    respond by providing some sort of confidential information (such as network shares
    and service versions) in return.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果在主动信息收集过程中在目标系统上找到了大量文件共享，这可能意味着目标可能是一个具有大量重要数据的文件服务器。在执行主动信息收集时，攻击者的机器（在我们的案例中是基于Kali
    Linux的机器）向潜在受害者发送特殊查询，希望受害者机器会通过提供某种机密信息（如网络共享和服务版本）来回应。
- en: Now that you have a better understanding of what active information gathering
    is, let's dive deep into its practices in the following sections.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您对主动信息收集有了更好的理解，让我们深入探讨以下各节中的实践。
- en: DNS interrogation
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS询问
- en: 'As a future cybersecurity professional, understanding the purpose of various
    applications and network protocols is very important. In this section, we are
    going to focus on a particular protocol: **Domain Name System** (**DNS**).'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 作为未来的网络安全专业人士，理解各种应用程序和网络协议的目的非常重要。在本节中，我们将专注于一个特定的协议：**域名系统**（**DNS**）。
- en: Let's begin by further understanding the role of DNS and how we can obtain information
    as a penetration tester.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先进一步了解DNS的作用以及作为渗透测试人员如何获取信息。
- en: What is DNS and why do we need it on a network?
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS是什么，为什么我们需要在网络上使用它？
- en: DNS is like a telephone directory containing names, addresses, and telephone
    numbers. DNS is used on networks—both the internal networks of organizations and
    external networks across the internet. The DNS protocol is used to resolve hostnames
    (domain names) to IP addresses.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: DNS就像一个包含名称、地址和电话号码的电话目录。DNS用于网络——组织的内部网络和互联网上的外部网络。DNS协议用于将主机名（域名）解析为IP地址。
- en: Before DNS, each computer contained a `hosts` file located in the `C:\Windows\System32\drivers\etc`
    directory. This file needed to be updated frequently to ensure that users were
    able to reach various websites or servers by specifying their hostnames or domain
    names. If the `hosts` file was not present, a user needed to specify the IP address
    of the server they would like to visit.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在DNS出现之前，每台计算机都包含一个位于`C:\Windows\System32\drivers\etc`目录中的`hosts`文件。为了确保用户能够通过指定其主机名或域名到达各种网站或服务器，需要经常更新此文件。如果没有`hosts`文件，用户需要指定他们想要访问的服务器的IP地址。
- en: All devices on a network have an assigned IP address. Remembering all of the
    IP addresses for each server or website you want to visit would be quite challenging.
    If the `hosts` file doesn't contain the most up-to-date records of new servers
    and websites, the user would have difficulty in reaching their destination.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 网络上的所有设备都有一个分配的IP地址。记住要访问的每个服务器或网站的所有IP地址将是非常具有挑战性的。如果“hosts”文件不包含新服务器和网站的最新记录，用户将难以到达他们的目的地。
- en: 'The following screenshot shows current entries within the `hosts` file of a
    Windows operating system:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了Windows操作系统的“hosts”文件中的当前条目：
- en: '![](img/e917ba89-ee3a-46d0-87d6-56818b1b673e.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e917ba89-ee3a-46d0-87d6-56818b1b673e.png)'
- en: Windows hosts file record
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: Windows主机文件记录
- en: DNS helps us to avoid depending on the `hosts` file. Many popular internet companies,
    such as Cisco, Google, and Cloudflare, have established public DNS servers that
    contain records of almost every domain name on the internet. To elaborate further,
    let's use a simple example to help you to understand how DNS works.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: DNS帮助我们避免依赖“hosts”文件。许多知名的互联网公司，如思科、谷歌和Cloudflare，都建立了包含几乎每个互联网域名记录的公共DNS服务器。为了进一步阐述，让我们用一个简单的例子来帮助您理解DNS的工作原理。
- en: 'Imagine you would like to visit a website, such as [www.example.com](http://www.example.com):'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，您想访问一个网站，比如[www.example.com](http://www.example.com)：
- en: Whenever a computer or device needs to resolve a hostname to an IP address,
    it sends a DNS query message to its DNS server, as indicated in *Step 1* in the
    following screenshot.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 每当计算机或设备需要将主机名解析为IP地址时，它会向其DNS服务器发送DNS查询消息，如下图中的*步骤1*所示。
- en: The DNS server will check its records and respond with a DNS reply providing
    the client computer with the IP address of the domain, as displayed in *Step 2*
    in the following screenshot.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DNS服务器将检查其记录，并在下图中的*步骤2*中向客户端计算机提供域的IP地址。
- en: 'Finally, the client receives the IP address and establishes a session between
    itself and the `www.example.com` domain, as shown in the following screenshot:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，客户端收到IP地址，并在下图中显示的*步骤3*中与`www.example.com`域建立会话：
- en: '![](img/b062ba1c-4040-4a76-a34f-bd46e6318028.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b062ba1c-4040-4a76-a34f-bd46e6318028.png)'
- en: DNS transactions
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: DNS交易
- en: 'There are many public DNS servers on the internet; some are malicious in nature,
    capturing your DNS information and redirecting you to harmful websites and domains.
    As a result, I recommend using a trusted DNS provider on all of your networking
    devices and computers to improve your online safety. The following are some popular
    DNS servers on the internet:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网上有许多公共DNS服务器；其中一些具有恶意性质，捕获您的DNS信息并将您重定向到有害的网站和域。因此，我建议在所有网络设备和计算机上使用受信任的DNS提供商，以提高您的在线安全性。以下是互联网上一些知名的DNS服务器：
- en: 'Cloudflare DNS: [https://1.1.1.1/](https://1.1.1.1/)'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cloudflare DNS：[https://1.1.1.1/](https://1.1.1.1/)
- en: 'Google Public DNS: [https://developers.google.com/speed/public-dns/](https://developers.google.com/speed/public-dns/)'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google Public DNS：[https://developers.google.com/speed/public-dns/](https://developers.google.com/speed/public-dns/)
- en: 'Cisco OpenDNS: [https://www.opendns.com/](https://www.opendns.com/)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Cisco OpenDNS：[https://www.opendns.com/](https://www.opendns.com/)
- en: Additionally, DNS servers not only resolve a hostname to an IP address, they
    also contain various records that are used for various types of resolution.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，DNS服务器不仅将主机名解析为IP地址，还包含用于各种类型解析的各种记录。
- en: 'The following are the different record types:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是不同的记录类型：
- en: '![](img/6e4b82f0-90c5-48cb-9e0a-627241b01a4a.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6e4b82f0-90c5-48cb-9e0a-627241b01a4a.png)'
- en: DNS record types
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: DNS记录类型
- en: An example of the **A** record type would be mapping the hostname of `www.example.com`
    to the IPv4 address `93.184.216.34`; the **AAAA** record of the same hostname
    would contain the IPv6 address `2606:2800:220:1:248:1893:25c8:1946`, and so on.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: '**A**记录类型的示例将是将`www.example.com`的主机名映射到IPv4地址`93.184.216.34`；相同主机名的**AAAA**记录将包含IPv6地址`2606:2800:220:1:248:1893:25c8:1946`，依此类推。'
- en: The **`nslookup`** utility is a very useful tool for validating DNS information.
    `nslookup` can perform various tasks, such as resolving each type of DNS record
    for a given domain, and it has the ability to query specific DNS servers.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '`nslookup`实用程序是验证DNS信息的非常有用的工具。 `nslookup`可以执行各种任务，例如解析给定域的每种类型的DNS记录，并且具有查询特定DNS服务器的能力。'
- en: '**DNS enumeration** is the technique of probing specific DNS records for a
    specific organization''s domain. In other words, we ask a DNS server about the
    IP addresses and server names for a target organization. Additionally, we attempt
    to perform a DNS zone transfer. A **DNS zone transfer** would allow the zone file
    to be copied from a master DNS server to another DNS server, such as a secondary
    DNS server.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**DNS枚举**是探测特定组织域的特定DNS记录的技术。换句话说，我们询问DNS服务器有关目标组织的IP地址和服务器名称。此外，我们尝试执行DNS区域传输。**DNS区域传输**将允许将区域文件从主DNS服务器复制到另一个DNS服务器，例如辅助DNS服务器。'
- en: However, DNS server administrators sometimes forget to apply security controls
    to prevent the copying of zone files to unauthorized servers. A successful DNS
    zone transfer can lead to a penetration tester obtaining the corporate network
    layout. In a worst-case scenario (for a targeted organization, that is), an organization
    may not separate the internal and external namespaces on their DNS servers. Such
    misconfigurations can lead to someone obtaining such information for malicious
    purposes.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，DNS服务器管理员有时会忘记应用安全控制以防止将区域文件复制到未经授权的服务器。成功的DNS区域传输可能导致渗透测试人员获取企业网络布局。在最坏的情况下（对于被定向的组织来说），组织可能没有在其DNS服务器上分离内部和外部命名空间。这样的错误配置可能导致某人为恶意目的获取这样的信息。
- en: 'In the following exercises, we are going to attempt the extraction of various
    DNS records for a given domain:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的练习中，我们将尝试提取给定域的各种DNS记录：
- en: DNS enumeration
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS枚举
- en: DNS zone transfer
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS区域传输
- en: Using the `host` utility to perform DNS analysis
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用`host`实用程序进行DNS分析
- en: DNS interrogation using **Fierce**
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用**Fierce**进行DNS询问
- en: Let's dive in and have some fun with DNS and Kali Linux!
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入研究并在Kali Linux上享受一些与DNS相关的乐趣！
- en: Performing DNS enumeration and zone transfer using dnsenum
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行DNS枚举和区域传输使用dnsenum
- en: 'dnsenum is a very simple and easy-to-use tool for enumerating and resolving
    DNS information for a given target. Additionally, it has the ability to automatically
    perform DNS zone transfers using the **nameserver** details:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: dnsenum是一个非常简单易用的工具，用于枚举和解析给定目标的DNS信息。此外，它具有使用**名称服务器**详细信息自动执行DNS区域传输的能力：
- en: Open a new Terminal window and execute the `dnsenum` command. The Help menu
    appears, providing detailed descriptions of various operators/parameters and their
    use.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端窗口并执行`dnsenum`命令。帮助菜单将显示，提供各种操作符/参数及其用法的详细描述。
- en: 'Use the `dnsenum zonetransfer.me` command to perform DNS enumeration on the
    `zonetransfer.me` domain, as shown in the following screenshot:'
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`dnsenum zonetransfer.me`命令对`zonetransfer.me`域执行DNS枚举，如下面的屏幕截图所示：
- en: '![](img/4195abba-027d-480e-97fd-800e33abba18.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: ！[](img/4195abba-027d-480e-97fd-800e33abba18.png)
- en: dnsenum
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: dnsenum
- en: dnsenum will attempt to obtain all of the servers and hostnames for the given
    domain. We are able to obtain the nameservers, mail servers (used for email exchange),
    and IP addresses for each server and hostname found.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: dnsenum将尝试获取给定域的所有服务器和主机名。我们能够获取找到的每个服务器和主机名的名称服务器、邮件服务器（用于电子邮件交换）和IP地址。
- en: 'dnsenum will attempt to perform a DNS zone transfer by querying the specific
    nameservers found during the enumeration process, as shown in the following screenshot:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: dnsenum将尝试通过查询枚举过程中找到的特定名称服务器来执行DNS区域传输，如下面的屏幕截图所示：
- en: '![](img/f5f241fe-9328-4b4f-896e-082f394169bf.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: ！[](img/f5f241fe-9328-4b4f-896e-082f394169bf.png)
- en: DNS zone transfer
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: DNS区域传输
- en: As in the preceding snippet, the dnsenum tool was able to successfully extract/replicate
    the **master zone records** from the `nsztml.digi.ninja` nameserver. Using the
    information found, a penetration tester will have better insights into the target
    organization's (`zonetransfer.me`) internal and external network devices.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 就像前面的片段一样，dnsenum工具能够成功地从`nsztml.digi.ninja`名称服务器中提取/复制**主区记录**。使用找到的信息，渗透测试人员将更好地了解目标组织（`zonetransfer.me`）的内部和外部网络设备。
- en: Access to sensitive information such as what we have found can potentially lead
    to a successful network breach in the target organization.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 访问敏感信息，例如我们发现的信息，可能会导致成功地入侵目标组织的网络。
- en: Up next, we will attempt to perform DNS analysis using a native Linux tool.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将尝试使用本机Linux工具进行DNS分析。
- en: Using the host utility to perform DNS analysis
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用`host`实用程序进行DNS分析
- en: 'The `host` utility is native to the Linux operating system and can help us
    to obtain various DNS information about a target domain:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '`host`实用程序是Linux操作系统的本机工具，可以帮助我们获取有关目标域的各种DNS信息：'
- en: 'Open a new Terminal on Kali Linux and execute the `host zonetransfer.me` command;
    the `host` tool will attempt to obtain the DNS records, such as the **A** and
    **MX** records, for the domain:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Kali Linux上打开一个新的终端并执行`host zonetransfer.me`命令；`host`工具将尝试获取域的DNS记录，如**A**和**MX**记录：
- en: '![](img/bb8cb216-fd91-4deb-8354-669c799333d1.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: ！[](img/bb8cb216-fd91-4deb-8354-669c799333d1.png)
- en: Retrieving DNS records using host
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`host`检索DNS记录
- en: 'Use the `host -t ns zonetransfer.me` command to attempt enumeration by obtaining
    the nameservers for the domain. The `-t` operator allows you to specify the DNS
    record:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`host -t ns zonetransfer.me`命令尝试通过获取域的名称服务器来进行枚举。`-t`操作符允许您指定DNS记录：
- en: '![](img/8df4df6e-b71b-45c0-8215-4a0679b422ef.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: ！[](img/8df4df6e-b71b-45c0-8215-4a0679b422ef.png)
- en: Nameserver records
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 名称服务器记录
- en: 'Now that we have obtained the nameservers for the domain, let''s use the information
    we have gathered so far. Let''s attempt to perform a DNS zone transfer by querying
    nameservers for the domain by using the `host -l zonetransfer.me nsztml.digi.ninja`
    command, as shown in the following screenshot:'
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经获取了域的名称服务器，让我们利用迄今为止收集的信息。让我们尝试通过使用`host -l zonetransfer.me nsztml.digi.ninja`命令查询域的名称服务器来执行DNS区域传输，如下面的屏幕截图所示：
- en: '![](img/8bedac8b-859f-4508-9ae7-4b8f86edc438.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: ！[](img/8bedac8b-859f-4508-9ae7-4b8f86edc438.png)
- en: DNS zone transfer with host
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 使用主机进行DNS区域传输
- en: Be sure to query all nameservers for a given domain—sometimes, one server may
    be misconfigured even though the others are secured.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 确保查询给定域的所有名称服务器 - 有时，一个服务器可能配置错误，即使其他服务器已经得到了保护。
- en: Now that you have the skills to perform DNS enumeration and zone transfers,
    let's attempt to discover subdomains using DNS.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经具备执行DNS枚举和区域传输的技能，让我们尝试使用DNS发现子域。
- en: Finding subdomains with dnsmap
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用dnsmap查找子域
- en: '**dnsmap** works a bit differently from the tools we looked at in the previous
    examples. dnsmap attempts to enumerate the subdomains of an organization''s domain
    name by querying a built-in wordlist on the Kali Linux operating system. Once
    a subdomain has been found, dnsmap will attempt to resolve the IP address.'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: '**dnsmap**与我们在前面的示例中看到的工具有些不同。dnsmap尝试通过查询Kali Linux操作系统上的内置单词列表来枚举组织域名的子域。一旦找到子域，dnsmap将尝试解析IP地址。'
- en: 'Using the `dnsmap microsoft.com` command, we are able to find subdomains for
    the organization and their corresponding IP addresses:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`dnsmap microsoft.com`命令，我们能够找到组织的子域和它们对应的IP地址：
- en: '![](img/150a577c-3a18-46ee-be35-617dd1f91147.png)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](img/150a577c-3a18-46ee-be35-617dd1f91147.png)'
- en: dnsmap results
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: dnsmap结果
- en: As mentioned in a previous section, discovering the subdomains of an organization
    can lead to finding hidden and sensitive portals and directories in a domain.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一节所述，发现组织的子域可以导致在域中找到隐藏的敏感门户和目录。
- en: As you may have noticed, each tool we have used so far gives us a bit more detail.
    In the next section, we will use a more aggressive tool to help us to extract
    more details about a target domain.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您可能已经注意到的，到目前为止我们使用的每个工具都为我们提供了更多的细节。在下一节中，我们将使用更具侵略性的工具来帮助我们提取有关目标域的更多细节。
- en: DNS interrogation using Fierce
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Fierce进行DNS审讯
- en: 'Fierce is considered a semi-lightweight DNS interrogation tool. It performs
    extensive lookups on IP spaces and hostnames for a given target domain. To use
    Fierce, we can execute the `fierce -dns example.com` command, as shown in the
    following screenshot:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Fierce被认为是一种半轻量级的DNS审讯工具。它对给定目标域的IP空间和主机名执行广泛的查找。要使用Fierce，我们可以执行`fierce -dns
    example.com`命令，如下面的屏幕截图所示：
- en: '![](img/f5b43e27-e343-40e5-9fe8-a6f01fe70811.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f5b43e27-e343-40e5-9fe8-a6f01fe70811.png)'
- en: Fierce DNS interrogation
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: Fierce DNS审讯
- en: Fierce will attempt to obtain all of the DNS records for a given domain and
    discover any subdomains with their corresponding IP addresses. This tool may take
    some time to complete its interrogation, as it implements an in-depth analysis
    of the target domain.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Fierce将尝试获取给定域的所有DNS记录，并发现任何子域及其相应的IP地址。该工具可能需要一些时间来完成其审讯，因为它对目标域实施了深入分析。
- en: We have now completed the exercises in this section. Next, we will directly
    engage the target to gather more specific details using various scanning techniques.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经完成了本节的练习。接下来，我们将直接与目标进行接触，使用各种扫描技术收集更具体的细节。
- en: Scanning
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扫描
- en: 'Let''s take our information gathering phase a bit further than we have done
    before. In this section, we are going to perform various scan types on a target.
    These will include the following:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们将信息收集阶段推进一步。在本节中，我们将对目标执行各种扫描类型。这些将包括以下内容：
- en: Ping sweep
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Ping扫描
- en: Operating system and service version detection
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 操作系统和服务版本检测
- en: Scanning for host devices that have ICMP disabled
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描禁用ICMP的主机设备
- en: Performing stealth scanning
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行隐蔽扫描
- en: Scanning UDP ports using Nmap
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nmap扫描UDP端口
- en: Performing evasion scanning techniques using Nmap
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Nmap执行规避扫描技术
- en: The objective of scanning is to identify live hosts on a network, determine
    open and closed ports on a system, identify running services on a target, and
    create a network diagram of the target's network infrastructure. The information
    obtained during the network-scanning phase is key in creating a profile of a target
    organization.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描的目标是识别网络上的活动主机，确定系统上的开放和关闭端口，识别目标上运行的服务，并创建目标网络基础设施的网络图。在网络扫描阶段获取的信息对于创建目标组织的概况至关重要。
- en: Scanning a target without permission is illegal in many countries. For this
    reason, we will be scanning devices within our lab.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多国家，未经许可进行目标扫描是非法的。因此，我们将在我们的实验室内扫描设备。
- en: Within a packet, there are many types of TCP flag that are used during communication
    between two or more hosts on a network. As a penetration tester, we can leverage
    certain vulnerabilities within the TCP/IP stack while performing our network scans.
    In other words, we are going to send specially crafted flags to a target to determine
    their port status, operating system, the services running, and their versions;
    we'll also to determine whether a firewall is monitoring inbound or outbound traffic,
    and so on.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在数据包中，有许多类型的TCP标志在网络上的两个或多个主机之间进行通信时使用。作为渗透测试人员，我们可以利用TCP/IP堆栈中的某些漏洞来执行网络扫描。换句话说，我们将向目标发送特制的标志，以确定其端口状态、操作系统、正在运行的服务及其版本；我们还将确定防火墙是否监视入站或出站流量等。
- en: 'The following TCP flags are within a packet:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 以下TCP标志位于数据包中：
- en: '`URG`: (**Urgent**) Indicates this packet should be processed immediately'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`URG`：（**紧急**）指示应立即处理此数据包'
- en: '`PSH`: (**Push**) Sends buffered data immediately'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PSH`：（**推送**）立即发送缓冲数据'
- en: '`FIN`: (**Finish**) Indicates there are no more transmissions to be sent'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`FIN`：（**结束**）指示没有更多的传输需要发送'
- en: '`ACK`: (**Acknowledgement**) Confirms receipt of a message'
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ACK`：（**确认**）确认收到消息'
- en: '`RST`: (**Reset**) Resets a network connection'
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`RST`：（**重置**）重置网络连接'
- en: '`SYN`: (**Synchronization**) Used to initialize a connection between host devices'
  id: totrans-115
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`SYN`：（**同步**）用于初始化主机设备之间的连接'
- en: By using a tool such as Wireshark ([www.wireshark.org](http://www.wireshark.org)),
    you can observe every detail within packets on a network.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 通过使用Wireshark（[www.wireshark.org](http://www.wireshark.org)）等工具，您可以观察网络上数据包的每个细节。
- en: 'The following snippet is a capture of a network packet where the `ACK` flag
    is set:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 以下片段是设置了`ACK`标志的网络数据包的捕获：
- en: '![](img/c5cb2d83-88ca-4217-aa77-c2a4ba04b59c.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c5cb2d83-88ca-4217-aa77-c2a4ba04b59c.png)'
- en: A packet with the ACK flag enabled
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 启用ACK标志的数据包
- en: Additionally, by observing the details in the packet, you can see the source
    and destination MAC addresses, IP addresses, ports, and other important characteristics.
    Wireshark is considered to be one of the best network protocol analyzers and sniffers
    among network and cybersecurity professionals alike.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，通过观察数据包中的细节，您可以看到源和目的地MAC地址、IP地址、端口和其他重要特征。Wireshark被认为是网络和网络安全专业人员中最好的网络协议分析器和嗅探器之一。
- en: Now that we understand the importance of scanning, let's learn about one of
    the most popular scanning tools in the industry, Nmap.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们了解了扫描的重要性，让我们了解一下行业中最流行的扫描工具之一，Nmap。
- en: Nmap
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Nmap
- en: Nmap is free and is one of the most powerful network scanning tools available
    for both Windows and Linux platforms. Nmap can help both network administrators
    and cybersecurity professionals in many ways.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap是免费的，是Windows和Linux平台上最强大的网络扫描工具之一。Nmap可以在许多方面帮助网络管理员和网络安全专业人员。
- en: 'Nmap features include the following:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap的功能包括以下内容：
- en: Creating a network inventory
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建网络清单
- en: Checking for live hosts
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查活动主机
- en: Determining operating systems
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定操作系统
- en: Determining running services and their version
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定运行的服务及其版本
- en: Identifying vulnerabilities on a host
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 识别主机上的漏洞
- en: Detecting sniffers
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检测嗅探器
- en: Determining whether a firewall is present on a network
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定网络上是否存在防火墙
- en: We will go over, to begin with, the basics of Nmap and move gradually on to
    advanced scanning techniques. As penetration testers, we must ensure that we have
    an arsenal of tools that will help us to perform our jobs efficiently. However,
    as professionals, we must also ensure that we are very familiar with, and know
    how to use, each tool available to us.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将首先介绍Nmap的基础知识，然后逐渐转向高级扫描技术。作为渗透测试人员，我们必须确保拥有一套工具，可以帮助我们高效地完成工作。然而，作为专业人士，我们还必须确保非常熟悉并知道如何使用我们可用的每个工具。
- en: 'So, we are going to start by performing a basic scan on a target:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们将从对目标进行基本扫描开始：
- en: 'Let''s begin by opening a new Terminal and using the following syntax: `nmap
    <target IP or hostname>`.'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从打开一个新的终端并使用以下语法开始：`nmap <目标IP或主机名>`。
- en: 'We are going to scan a website that has given us legal permission to perform
    a scan. Let''s use the `nmap scanme.nmap.org` command:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将扫描一个已经给予我们合法许可的网站。让我们使用`nmap scanme.nmap.org`命令：
- en: '![](img/73168080-b963-4a51-9621-5977998d41ce.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/73168080-b963-4a51-9621-5977998d41ce.png)'
- en: Nmap scan 1
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap扫描1
- en: By performing a regular scan on a target or network, Nmap checks the 1,000 most
    commonly used TCP/IP ports on the target.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 通过定期扫描目标或网络，Nmap会检查目标上使用最广泛的1000个TCP/IP端口。
- en: Observing the output, Nmap was able to identify the open ports, determine whether
    the open ports are TCP or UDP, identify the application layer protocols, and find
    out the IP addresses (IPv4 and IPv6) of the target.
  id: totrans-139
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 观察输出，Nmap能够识别开放的端口，确定开放的端口是TCP还是UDP，识别应用层协议，并找出目标的IP地址（IPv4和IPv6）。
- en: Identifying open ports on a target is like discovering an open door into the
    system, and identifying services can help us to narrow our scope in searching
    for, and exploiting, vulnerabilities.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 确定目标上的开放端口就像发现系统中的开放门一样，确定服务可以帮助我们缩小搜索和利用漏洞的范围。
- en: 'To perform a scan on an IPv6 address, you can include the `-6` operator, as
    in: `nmap -6 2600:3c01::f03c:91ff:fel8:bb2f`.'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 要对IPv6地址进行扫描，可以包括`-6`操作符，如：`nmap -6 2600:3c01::f03c:91ff:fel8:bb2f`。
- en: Nmap isn't that difficult, right? Let's take a few more steps with Nmap in the
    upcoming sections.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap并不那么难，对吧？让我们在接下来的部分中更深入地了解Nmap。
- en: Performing a ping sweep with Nmap
  id: totrans-143
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap进行ping扫描
- en: 'At times, you may need to identify all live hosts on a network during a penetration
    test. Nmap is able to perform a ping sweep across multiple targets, whether specifying
    a range or an entire subnet. Using the `-sn` operator will allow you to perform
    a ping scan only on the target:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，在渗透测试期间，您可能需要识别网络上的所有活动主机。Nmap能够在多个目标上执行ping扫描，无论是指定范围还是整个子网。使用`-sn`操作符将允许您仅对目标执行ping扫描：
- en: '![](img/3266d5e1-d6ed-4c09-9512-3859e5c59b7a.png)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3266d5e1-d6ed-4c09-9512-3859e5c59b7a.png)'
- en: Ping sweep with Nmap
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nmap进行ping扫描
- en: In the preceding snippet, Nmap has presented only the hosts that it thinks are
    alive on the network segment and was able to look up the MAC addresses of each
    host to determine the vendor.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的片段中，Nmap只呈现了它认为在网络段上是活动的主机，并且能够查找每个主机的MAC地址以确定供应商。
- en: 'If you would like to perform a range scan, you can use the following syntax:
    `nmap start ip addr - end ip addr`.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您想要执行范围扫描，可以使用以下语法：`nmap start ip addr - end ip addr`。
- en: 'If you would like to scan specific IP devices on a network, use the following
    syntax: `nmap host1 host2 host3`.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您想要扫描网络上的特定IP设备，请使用以下语法：`nmap host1 host2 host3`。
- en: 'Nmap also has support for scanning hosts that are listed within a text file
    by using the following syntax: `nmap –iL file.txt`.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap还支持使用以下语法扫描列在文本文件中的主机：`nmap –iL file.txt`。
- en: Let's now take things up a notch and learn more about how to use Nmap in the
    following section.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们提升一下，学习更多关于如何在接下来的部分中使用Nmap的知识。
- en: Obtaining operating system and service versions using Nmap
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap获取操作系统和服务版本
- en: So far, we have been able to gather basic details about a target. We can use
    Nmap to help users determine the operating system, the operating system version,
    and the service versions of any running applications on a target.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经能够收集有关目标的基本信息。我们可以使用Nmap帮助用户确定操作系统、操作系统版本以及目标上运行的应用程序的服务版本。
- en: Using the `-A` operator will initiate an aggressive scan, `-O` will profile
    the operating system, and `-sV` will identify service versions.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`-A`操作符将启动一个侵略性扫描，`-O`将对操作系统进行概要分析，`-sV`将识别服务版本。
- en: Performing an aggressive type of scan can potentially be flagged by an **Intrusive
    Detection System**/**Intrusive Prevention System** (**IDS**/**IPS**) or a firewall
    appliance. Be wary of this, as a big part of penetration testing is being as silent
    as possible to avoid detection.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 执行一种侵入式扫描可能会被**侵入检测系统**/**侵入预防系统**（**IDS**/**IPS**）或防火墙设备标记。要小心，因为渗透测试的一个重要部分是尽可能保持安静，以避免被发现。
- en: Using the `nmap -A -O -sV target` command on our Metasploitable VM as our target
    system, we will be able to obtain much more meaningful information about the target.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的目标系统Metasploitable VM上使用`nmap -A -O -sV target`命令，我们将能够获得关于目标的更有意义的信息。
- en: 'As you can see in the following snippet, for each port that is open, Nmap has
    identified a particular service operating on the port, and we were able to retrieve
    the application service version details as well:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您在以下片段中所看到的，对于每个开放的端口，Nmap已经确定了在该端口上运行的特定服务，并且我们还能够检索应用服务版本的详细信息：
- en: '![](img/7ef78224-85f8-43ca-a260-b12cb5d06f53.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7ef78224-85f8-43ca-a260-b12cb5d06f53.png)'
- en: Operating system and service version
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 操作系统和服务版本
- en: 'Scrolling down a bit more on the output, we can see that, by using the `-O`
    parameter, Nmap was able to determine the type of operating system:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在输出中再向下滚动一点，我们可以看到，通过使用`-O`参数，Nmap能够确定操作系统的类型：
- en: '![](img/adc54871-b19e-4032-9e42-a7ded6b2f17a.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/adc54871-b19e-4032-9e42-a7ded6b2f17a.png)'
- en: Detecting the kernel version
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 检测内核版本
- en: At this point, we have a much better idea of our target, the Metasploitable
    VM. We know all of the open ports, services, and service versions that are currently
    running, as well as the operating system.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们对我们的目标Metasploitable VM有了更好的了解。我们知道所有开放的端口、服务和当前正在运行的服务版本，以及操作系统。
- en: Nmap is awesome, isn't it? Let's learn how to use Nmap to scan a device that
    has ICMP disabled.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap很棒，不是吗？让我们学习如何使用Nmap扫描禁用了ICMP的设备。
- en: Scanning host devices with ICMP disabled
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扫描禁用ICMP的主机设备
- en: When Nmap is about to perform a scan on a host, it sends a ping packet to the
    host to determine whether the target is alive. If the target does not respond,
    Nmap will not attempt to execute the scan. However, system administration and
    cybersecurity professionals usually disable **Internet Control Message Protocol**
    (**ICMP**) responses on servers. Not receiving an ICMP echo reply from a target
    would indicate that the target device is down/offline; however, this technique
    sets out to basically trick a novice hacker into thinking the host is simply not
    available. Using the `–Pn` operator during an Nmap scan will skip the host discovery
    phase and treat the target as online.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 当Nmap要对主机执行扫描时，它会向主机发送一个ping数据包来确定目标是否存活。如果目标不响应，Nmap将不会尝试执行扫描。然而，系统管理和网络安全专业人员通常会在服务器上禁用**Internet控制消息协议**（**ICMP**）响应。从目标那里收不到ICMP回显回复将表明目标设备已关闭/离线；然而，这种技术旨在基本上欺骗一个新手黑客，让他认为主机根本不可用。在Nmap扫描期间使用`-Pn`操作符将跳过主机发现阶段，并将目标视为在线。
- en: 'The following is an example:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个例子：
- en: '[PRE0]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: During a penetration test, if you are not able to discover live hosts on the
    network, don't be overly concerned as network security professionals tend to apply
    security controls to their end devices and networks. Nmap can detect hidden systems,
    bypassing firewalls and network sniffers to detect security vulnerabilities on
    a host.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试期间，如果您无法在网络上发现活动主机，不要过分担心，因为网络安全专业人员倾向于在其终端设备和网络上应用安全控制。Nmap可以检测隐藏的系统，绕过防火墙和网络嗅探器，以检测主机上的安全漏洞。
- en: When performing a scan, there's a high possibility that the target will know
    a port scan is being done by an attacker or a penetration tester. In the next
    section, we will describe how to perform a stealth scan using Nmap.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在执行扫描时，目标很可能会知道正在进行端口扫描的是攻击者还是渗透测试人员。在接下来的部分中，我们将描述如何使用Nmap执行隐秘扫描。
- en: Performing a stealth scan using Nmap
  id: totrans-171
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap执行隐秘扫描
- en: 'By default, Nmap establishes a **TCP three-way handshake** on any open TCP
    ports found. After the handshake has been established, the messages are exchanged.
    The following snippet displays the handshake process, where **Host A** wants to
    communicate with **Host B**:'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Nmap会在找到的任何开放的TCP端口上建立**TCP三次握手**。握手建立后，消息被交换。以下片段显示了握手过程，其中**主机A**想要与**主机B**通信：
- en: '![](img/c7b26f71-e515-4559-9794-452593e8cb45.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c7b26f71-e515-4559-9794-452593e8cb45.png)'
- en: TCP three-way handshake
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: TCP三次握手
- en: During a penetration test, we need to remain as stealthy as possible on the
    network. This creates the effect of an actual hacker attempting to compromise
    the system/network without being caught by the organization's security controls
    and systems. By establishing a TCP three-way handshake with our target devices,
    we are making ourselves known to the target.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 在渗透测试期间，我们需要尽可能保持在网络上隐秘。这会产生一个实际黑客试图在不被组织的安全控制和系统发现的情况下入侵系统/网络的效果。通过与我们的目标设备建立TCP三次握手，我们让自己对目标设备有所了解。
- en: 'Therefore, we are going to perform a stealth scan (half-open) using Nmap. A
    stealth scan does not establish a full TCP handshake with the target:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，我们将使用Nmap执行隐秘扫描（半开放）。隐秘扫描不会与目标建立完整的TCP握手。
- en: The attacker machine tricks the target by sending a TCP SYN packet to a particular
    port on the target if the port is open on the target.
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击者机器通过向目标发送TCP SYN数据包来欺骗目标，如果目标上的特定端口是开放的。
- en: A TCP SYN/ACK packet is returned to the attacker machine.
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个TCP SYN/ACK数据包被返回给攻击者机器。
- en: 'Lastly, the attacker sends a TCP RST packet to reset the connection state on
    the target:'
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，攻击者发送一个TCP RST数据包来重置目标上的连接状态：
- en: '![](img/d9da960d-f408-47cd-89c3-9b88b7b14e47.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d9da960d-f408-47cd-89c3-9b88b7b14e47.png)'
- en: Stealth scan
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 隐秘扫描
- en: 'In our exercise, we are going to probe port `80` on our Metasploitable VM using
    stealth scanning with Nmap. Using the `-sS` operator to indicate a stealth scan,
    and with the `-p` operator scanning (probing) a particular port, we can execute
    the `nmap -sS -p 80 10.10.10.100` command on our Kali Linux machine:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的练习中，我们将使用Nmap对我们的Metasploitable VM上的端口`80`进行隐蔽扫描。使用`-sS`操作符表示隐蔽扫描，并使用`-p`操作符扫描（探测）特定端口，我们可以在我们的Kali
    Linux机器上执行`nmap -sS -p 80 10.10.10.100`命令：
- en: '![](img/aac02726-20c1-4e0a-8390-41e3079f4d34.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aac02726-20c1-4e0a-8390-41e3079f4d34.png)'
- en: A stealth scan using Nmap
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nmap进行隐蔽扫描
- en: 'Using Wireshark, we are able to see the flow of packets between our Kali Linux
    machine and the target. Packet number 18 indicates that an [SYN] packet was sent
    to the Metasploitable VM, packet number 19 indicates that an [SYN, ACK] packet
    was returned to the Kali Linux machine, and finally, packet number 20 indicates
    that our Kali Linux machine sent an [RST] packet to reset the connection:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Wireshark，我们能够看到我们的Kali Linux机器和目标之间的数据包流动。数据包编号18表明一个[SYN]数据包被发送到Metasploitable
    VM，数据包编号19表明一个[SYN, ACK]数据包被返回到Kali Linux机器，最后，数据包编号20表明我们的Kali Linux机器发送了一个[RST]数据包来重置连接：
- en: '![](img/be8c86d0-df1a-4b30-bd7d-42f5b4699fee.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](img/be8c86d0-df1a-4b30-bd7d-42f5b4699fee.png)'
- en: Stealth scan detected in Wireshark
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在Wireshark中检测到隐蔽扫描
- en: The final result is that we were able to successfully probe a given port on
    a target system and did not establish a network session between our machine and
    the target.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 最终结果是我们成功地探测了目标系统上的一个端口，并没有在我们的机器和目标之间建立网络会话。
- en: There are many services and protocols that use UDP as a preferred transportation
    method. UDP applications do not respond to a typical port scan by default. Whenever
    you perform a network/port scan using Nmap, the scanning engine searches for open
    TCP ports by default; this means UDP ports are usually missed in the results.
    In the next section, we'll take a look at performing a UDP port scan.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多服务和协议使用UDP作为首选的传输方法。UDP应用默认不会响应典型的端口扫描。每当使用Nmap执行网络/端口扫描时，默认情况下扫描引擎会搜索开放的TCP端口；这意味着UDP端口通常在结果中被忽略。在下一节中，我们将看一下如何执行UDP端口扫描。
- en: Scanning UDP ports using Nmap
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap扫描UDP端口
- en: 'There are many application layer protocols that use **User Datagram Protocol**
    (**UDP**) as their preferred transport protocol. Using the `-sU` operator will
    indicate the need to perform a UDP port scan on a given target. Using the following
    command, we can achieve this task:'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多应用层协议使用**用户数据报协议**（**UDP**）作为其首选传输协议。使用`-sU`操作符将指示需要对给定目标执行UDP端口扫描。使用以下命令，我们可以完成这个任务：
- en: '[PRE1]'
  id: totrans-192
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: We have now acquired the skills to perform a UDP scan on a target device or
    network. In the next section, we will take a look at evading security appliance
    and detection using Nmap.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经掌握了在目标设备或网络上执行UDP扫描的技能。在下一节中，我们将看一下如何使用Nmap规避安全设备和检测。
- en: Evading detection using Nmap
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap规避检测
- en: Whenever a packet is sent from one device to another, the source IP address
    is included within the header of the packet. This is the default behavior of the
    TCP/IP stack; all address details must be included within all packets that need
    to traverse a network. In performing a network scan on a target, our source IP
    address is included within all packets that our machine, Kali Linux, sends to
    the target.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 每当一个数据包从一个设备发送到另一个设备时，源IP地址都包含在数据包的头部。这是TCP/IP协议栈的默认行为；所有地址细节必须包含在需要穿越网络的所有数据包中。在对目标进行网络扫描时，我们的源IP地址包含在我们的机器Kali
    Linux发送到目标的所有数据包中。
- en: 'Nmap has the capability of using decoys to trick the target into believing
    that the network scans are originating from multiple sources rather than a single
    source IP address. The `-D` operator is followed by random IP addresses, which
    are the decoys. Let''s assume we want to scan an IP address, `10.10.10.100`, and
    set three decoys: `10.10.10.14`, `10.10.10.15`, and `10.10.10.19`. We can use
    the following command:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap有能力使用伪装来欺骗目标，使其相信网络扫描是来自多个源而不是单个源IP地址。`-D`操作符后面跟着随机IP地址，这些是伪装。假设我们想要扫描一个IP地址`10.10.10.100`，并设置三个伪装：`10.10.10.14`、`10.10.10.15`和`10.10.10.19`。我们可以使用以下命令：
- en: '[PRE2]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Observing the following Wireshark capture, we can see that packets containing
    both our source IP address and the decoys'' IP addresses were used during the
    port scan on our target:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 观察以下Wireshark捕获，我们可以看到在目标上进行端口扫描时，包含我们源IP地址和伪装IP地址的数据包被使用：
- en: '![](img/80c22611-9926-4be5-9550-9ec75d43947f.png)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](img/80c22611-9926-4be5-9550-9ec75d43947f.png)'
- en: Detecting decoys in Wireshark
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在Wireshark中检测伪装
- en: However, an RST packet is sent from the actual source address. Additionally,
    we can use other operators such as `--spoof-mac` to spoof the source MAC address.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，一个RST数据包是从实际的源地址发送的。此外，我们还可以使用其他操作符，如`--spoof-mac`来伪装源MAC地址。
- en: In the next section, we will learn how to evade firewall detection while performing
    a network scan using Nmap.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将学习如何在使用Nmap执行网络扫描时规避防火墙检测。
- en: Evading firewalls with Nmap
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nmap规避防火墙
- en: During your career as a cybersecurity professional, penetration tester, or ethical
    hacker, you'll often encounter organizations—be they small, medium, or large enterprises—that
    have some sort of firewall appliance or software on their network infrastructure.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 在您作为网络安全专业人士、渗透测试人员或道德黑客的职业生涯中，您经常会遇到一些组织——无论是小型、中型还是大型企业——在其网络基础设施上都有某种防火墙设备或软件。
- en: 'Firewalls can prevent network scans and create a challenge for us as penetration
    testers. The following are various operators that can be used in Nmap to evade
    firewalls:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 防火墙可以阻止网络扫描并给我们作为渗透测试人员带来挑战。以下是可以在Nmap中使用的各种操作符来规避防火墙：
- en: '![](img/ac7a1430-aad4-41b8-a51e-d0d5d19dc849.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ac7a1430-aad4-41b8-a51e-d0d5d19dc849.png)'
- en: Nmap's firewall evasion operators
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap的防火墙规避操作符
- en: Additionally, we can send custom probes with specific flags to a target and
    analyze the responses.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们可以发送带有特定标志的自定义探测到目标并分析响应。
- en: In the following sections, we'll take a look at how to determine whether a stateful
    firewall is present on a network.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我们将看看如何确定网络上是否存在有状态防火墙。
- en: Checking for a stateful firewall
  id: totrans-210
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 检查有状态防火墙
- en: 'In checking for a stateful firewall, we can send a probe to the target with
    the ACK flag enabled. If no response is provided from the target, this would indicate
    that a firewall is present:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在检查有状态防火墙时，我们可以向目标发送一个启用了ACK标志的探测。 如果目标没有提供响应，这将表明存在防火墙：
- en: '![](img/9746582b-7a7c-493b-9bc2-b12d74b70367.png)'
  id: totrans-212
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9746582b-7a7c-493b-9bc2-b12d74b70367.png)'
- en: Stateful firewall present
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 有状态防火墙存在
- en: 'However, if a packet is returned with the RST flag set, this would indicate
    that there is no firewall on the target system:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，如果返回的数据包设置了RST标志，这将表明目标系统上没有防火墙：
- en: '![](img/85436ee2-05c1-4737-b0aa-d379b7824871.png)'
  id: totrans-215
  prefs: []
  type: TYPE_IMG
  zh: '![](img/85436ee2-05c1-4737-b0aa-d379b7824871.png)'
- en: Stateful firewall is not present
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 防火墙状态不明
- en: 'We can use the `–sA` operator on Nmap to perform an ACK scan on a target. Let''s
    perform a scan on our Metasploitable VM to determine whether port `80` is open,
    and whether the system has a firewall present:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用Nmap上的`–sA`运算符对目标执行ACK扫描。 让我们对我们的Metasploitable VM执行扫描，以确定端口`80`是否打开，以及系统是否存在防火墙：
- en: 'Use the `nmap -sA -p 80 <target>` command:'
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`nmap -sA -p 80 <target>`命令：
- en: '![](img/f8b7d739-aa20-4443-a031-71981f137e48.png)'
  id: totrans-219
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f8b7d739-aa20-4443-a031-71981f137e48.png)'
- en: ACK scan using Nmap
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nmap进行ACK扫描
- en: 'We were able to identify port `80` as opened and unfiltered (no firewall) on
    the target. Additionally, by observing the packets, we saw that an RST packet
    was returned to our Kali Linux (attacker) machine:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们能够确定端口`80`在目标上是打开且未经过滤（没有防火墙）。 此外，通过观察数据包，我们看到RST数据包返回到我们的Kali Linux（攻击者）机器：
- en: '![](img/1f287ce9-f845-48ec-9d42-8381cc64e60f.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1f287ce9-f845-48ec-9d42-8381cc64e60f.png)'
- en: The port scan shown in Wireshark
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: Wireshark中显示的端口扫描
- en: 'Whenever you run a scan on a target and the results indicate `filtered`, this
    means there is a firewall present and that it''s actively monitoring the port,
    as shown in the following screenshot:'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 每当您对目标进行扫描并且结果表明`filtered`时，这意味着存在防火墙，并且它正在积极监视端口，如下图所示：
- en: '![](img/8fa76c5f-be8b-4b82-af3a-a2d2b3287f13.png)'
  id: totrans-225
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8fa76c5f-be8b-4b82-af3a-a2d2b3287f13.png)'
- en: Detecting a filtered port using Nmap
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nmap检测过滤端口
- en: 'Additionally, the following operators can be used to determine whether a firewall
    is present on a system:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以下运算符可用于确定系统上是否存在防火墙：
- en: '| **Operator** | **Description** |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| **运算符** | **描述** |'
- en: '| `-sX` | Performs an XMAS scan. The URG, FIN, and PSH flags are all set. |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| `-sX` | 执行XMAS扫描。 URG，FIN和PSH标志都已设置。 |'
- en: '| `-sF` | Performs a FIN scan. Only the FIN flag is set. |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| `-sF` | 执行FIN扫描。 仅设置FIN标志。 |'
- en: '| `-sN` | Performs a Null scan. No flags are set. |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| `-sN` | 执行Null扫描。 没有设置标志。 |'
- en: Additional Nmap operators
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 额外的Nmap运算符
- en: Nmap will interpret the responses and determine whether the ports on a target
    are filtered or unfiltered.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap将解释响应并确定目标上的端口是否经过过滤或未经过过滤。
- en: Having completed this section, you are now able to use Nmap to profile a target.
    In the next section, we will learn about the **Nmap Scripting Engine** (**NSE**).
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了本节后，您现在可以使用Nmap对目标进行分析。 在下一节中，我们将学习**Nmap脚本引擎**（**NSE**）。
- en: NSE scripts
  id: totrans-235
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: NSE脚本
- en: NSE is one of the most powerful features within Nmap. It allows users to create
    and automate scripting to perform customized scans on a target device. By performing
    scans using various Nmap scripts, you can quickly detect whether your target is
    susceptible to a known vulnerability, malware, open backdoors, and so on.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: NSE是Nmap中最强大的功能之一。 它允许用户创建和自动化脚本，以执行针对目标设备的定制扫描。 通过使用各种Nmap脚本执行扫描，您可以快速检测目标是否容易受到已知漏洞，恶意软件，开放后门等的攻击。
- en: 'The following are the main categories of NSE scripts:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是NSE脚本的主要类别：
- en: '![](img/72161386-df94-4f48-8eb8-e2179bd803a6.png)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![](img/72161386-df94-4f48-8eb8-e2179bd803a6.png)'
- en: NSE categories
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: NSE类别
- en: 'To execute an entire category of scripts, we can use the `--script category`
    command. The following snippet is an example of using the `vuln` category of scripts
    during an Nmap scan:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行整个脚本类别，我们可以使用`--script category`命令。 以下代码片段是在Nmap扫描期间使用`vuln`脚本类别的示例：
- en: '![](img/9175a49e-9f88-4e4c-a09d-e07e9163b187.png)'
  id: totrans-241
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9175a49e-9f88-4e4c-a09d-e07e9163b187.png)'
- en: Vulnerability found using NSE
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: 使用NSE找到的漏洞
- en: 'Running an entire category of scripts may not always be suitable for various
    situations. If you are performing a scan to search for systems that contain a
    specific vulnerability, such as **vsFTPd 2.3.4 backdoor (CVE-2011-2523)**, you
    can use the following command:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 运行整个脚本类别可能并不总是适用于各种情况。 如果您正在执行扫描以搜索包含特定漏洞的系统，例如**vsFTPd 2.3.4后门（CVE-2011-2523）**，您可以使用以下命令：
- en: '[PRE3]'
  id: totrans-244
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Each NSE script is stored locally on Kali Linux in the `/usr/share/nmap/scripts`
    directory. However, you should become familiar with using NSE scripts, as this
    will help you to save time and find specific information about a target much more
    quickly. To help you to further understand NSE scripts, please visit the official
    NSE documentation website at [https://nmap.org/nsedoc/](https://nmap.org/nsedoc/).
    The repository contains a detailed description of each NSE script available.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 每个NSE脚本都存储在Kali Linux的`/usr/share/nmap/scripts`目录中。 但是，您应该熟悉使用NSE脚本，因为这将帮助您节省时间，并更快地找到有关目标的特定信息。
    为了帮助您进一步了解NSE脚本，请访问官方NSE文档网站[https://nmap.org/nsedoc/](https://nmap.org/nsedoc/)。
    该存储库包含每个NSE脚本的详细描述。
- en: Having completed this section on Nmap and NSE, let's now learn about Zenmap,
    the GUI version of Nmap.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了关于Nmap和NSE的本节，现在让我们学习Nmap的GUI版本Zenmap。
- en: Zenmap
  id: totrans-247
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Zenmap
- en: Zenmap is the **graphical user interface** (**GUI**) version of Nmap and is
    supported on multiple platforms, such as Windows, Linux, and macOS. The creation
    of Zenmap was geared toward beginners as it's easier to use than the traditional
    command-line interface of Nmap. To download Zenmap on your system, please visit
    [https://nmap.org/zenmap/](https://nmap.org/zenmap/).
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap是Nmap的图形用户界面（GUI）版本，并支持多个平台，如Windows、Linux和macOS。Zenmap的创建是面向初学者的，因为它比Nmap的传统命令行界面更容易使用。要在您的系统上下载Zenmap，请访问[https://nmap.org/zenmap/](https://nmap.org/zenmap/)。
- en: 'The following shows the Zenmap interface. It''s quite simple to use: simply
    enter the target and select the type of scan you would like to perform. Depending
    on the type of scan you select, the necessary Nmap operators will be set in the
    command field.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 以下显示了Zenmap界面。它非常简单易用：只需输入目标并选择要执行的扫描类型。根据您选择的扫描类型，将在命令字段中设置必要的Nmap操作符。
- en: 'To demonstrate, let''s perform a quick scan on our Metasploitable VM by observing
    the following steps:'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 为了演示，让我们通过观察以下步骤在我们的Metasploitable VM上进行快速扫描：
- en: Enter the IP address of our target.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入我们目标的IP地址。
- en: Select the Quick scan option from the Profile menu.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从配置文件菜单中选择快速扫描选项。
- en: 'Click on Scan to begin, as shown in the following screenshot:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击扫描开始，如下图所示：
- en: '![](img/19b1db05-aac6-41c9-bc1b-3ce37048de50.png)'
  id: totrans-254
  prefs: []
  type: TYPE_IMG
  zh: '![](img/19b1db05-aac6-41c9-bc1b-3ce37048de50.png)'
- en: The Zenmap interface
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap界面
- en: Once the scan has completed, click on each tab to get further details about
    the target. If you're performing a scan on an entire network, the Topology tab
    will help you create a network diagram of the target network.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，单击每个选项卡以获取有关目标的更多详细信息。如果您正在对整个网络进行扫描，拓扑选项卡将帮助您创建目标网络的网络图。
- en: 'Customized scanning profiles can be created on Zenmap by performing the following
    steps:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 可以通过以下步骤在Zenmap上创建自定义扫描配置文件：
- en: To create a new scanning profile, click on Profile | New Profile or Command.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建新的扫描配置文件，请单击配置文件|新配置文件或命令。
- en: 'The Profile Editor will open, providing you with all of the options available
    for scanning in Nmap, as shown in the following screenshot:'
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置文件编辑器将打开，为您提供Nmap扫描的所有选项，如下图所示：
- en: '![](img/dacd1ddd-3956-44d8-8600-8e0b1f36d278.png)'
  id: totrans-260
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dacd1ddd-3956-44d8-8600-8e0b1f36d278.png)'
- en: Zenmap Profile Editor
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: Zenmap配置文件编辑器
- en: Be sure to visit each tab and familiarize yourself with the various options
    available, since they will be useful in the future.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 一定要访问每个选项卡，并熟悉各种可用的选项，因为它们将在将来有用。
- en: As you saw, Zenmap is very easy to use and user-friendly. In the next section,
    we will learn about Hping3, another tool with which to perform scanning.
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您所看到的，Zenmap非常易于使用和用户友好。在下一节中，我们将学习另一个工具Hping3，用它来执行扫描。
- en: Hping3
  id: totrans-264
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Hping3
- en: Hping3 is a command-line tool that allows a user to analyze TCP/IP messages
    on a network. Additionally, Hping3 allows use to assemble network packets, which
    can be beneficial to a penetration tester in performing device and service discovery
    and offensive actions, such as a **Denial-of-Service** (**DoS**) attack.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: Hping3是一个命令行工具，允许用户分析网络上的TCP/IP消息。此外，Hping3允许我们组装网络数据包，这对于渗透测试人员在执行设备和服务发现以及攻击性行动（如拒绝服务攻击）时可能有益。
- en: 'Hping3 is a tool that can perform the following tasks:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: Hping3是一个可以执行以下任务的工具：
- en: Host discovery on a network
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在网络上进行主机发现
- en: Fingerprinting host devices to determine services
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 指纹识别主机设备以确定服务
- en: Sniffing network traffic
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 嗅探网络流量
- en: Flooding packets (DoS)
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 洪水包（DoS）
- en: File transfer
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件传输
- en: As mentioned in the previous section, there are many servers and devices that
    have ICMP responses disabled as a security precaution. We can use Hping3 to probe
    a port on a target system to force an ICMP response back to our attacker machine.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 如前一节所述，有许多服务器和设备禁用了ICMP响应作为安全预防措施。我们可以使用Hping3来探测目标系统上的一个端口，以强制ICMP响应返回到我们的攻击者机器。
- en: 'To get started using Hping3, let''s use the following steps to perform a port
    scan on port `80`:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用Hping3，让我们使用以下步骤在端口`80`上执行端口扫描：
- en: 'We use the `ping` utility to send four ICMP echo request messages to our Windows
    Server machine (firewall enabled and ICMP disabled):'
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用`ping`实用程序向我们的Windows服务器机器（启用防火墙并禁用ICMP）发送四个ICMP回显请求消息：
- en: '![](img/91d4a945-3d52-4322-a7c9-09c74daa1b52.png)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![](img/91d4a945-3d52-4322-a7c9-09c74daa1b52.png)'
- en: Pinging a target
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 对目标进行ping
- en: 'Our attacker machine (Kali Linux) did not receive any responses from the target.
    A novice hacker would assume the target is offline and would probably move on.
    However, using Hping3 to probe a specific port by sending SYN packets will force
    the target to reveal itself. Using the `hping3 -S target ip addr -p port -c 2`
    syntax, we get the following responses:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们的攻击者机器（Kali Linux）没有从目标那里收到任何响应。一个新手黑客可能会认为目标已离线，并可能会离开。但是，使用Hping3来探测特定端口，发送SYN数据包将迫使目标显露自己。使用`hping3
    -S目标ip地址 -p端口 -c 2`语法，我们得到以下响应：
- en: '![](img/9f70b9a5-1094-4f99-af14-7b38b8b7904a.png)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9f70b9a5-1094-4f99-af14-7b38b8b7904a.png)'
- en: Port scan using Hping3
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Hping3进行端口扫描
- en: By looking at our results, we can see we have received successful responses
    from our target. This means that the `10.10.10.14` device is online and that port
    `80` is open.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 通过查看我们的结果，我们可以看到我们已经从目标那里收到了成功的响应。这意味着`10.10.10.14`设备在线，并且端口`80`是开放的。
- en: The `-S` operator indicates the sending of SYN packets, `-p` allows you to specify
    destination port numbers, and `-c` specifies the number of packets to be sent.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: '`-S`操作符表示发送SYN数据包，`-p`允许您指定目标端口号，`-c`指定要发送的数据包数量。'
- en: 'Additionally, we can take this step a bit further by performing port scanning
    on a range of network ports on a target device. Using the `hping3 -8 20-1000 -S
    10.10.10.14` command, we are able to perform an SYN scan on a range of ports from
    `20`-`1000` on our target. The following snippet indicates that ports `80`, `135`,
    `139`, `445`, `902`, and `912` are open on our target:'
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，我们可以进一步采取一步行动，通过在目标设备上的一系列网络端口上执行端口扫描。使用`hping3 -8 20-1000 -S 10.10.10.14`命令，我们能够在目标上的端口范围`20`-`1000`上执行SYN扫描。以下片段表明我们的目标上的端口`80`、`135`、`139`、`445`、`902`和`912`是开放的：
- en: '![](img/d0a189ae-a036-46ba-b258-c401f5ecb998.png)'
  id: totrans-283
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d0a189ae-a036-46ba-b258-c401f5ecb998.png)'
- en: Stealth scan using Hping3
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Hping3进行隐形扫描
- en: There are many more operators that can be combined when using Hping3; please
    be sure to check out the Help menu using the `hping3 -h` command on the Terminal.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用Hping3时，还有许多可以组合的操作符；请务必使用终端上的`hping3 -h`命令查看帮助菜单。
- en: Now that you are familiar with using Hping3 as a scanner, let's take a deep
    dive into performing enumeration on a target device.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经熟悉了使用Hping3作为扫描器，让我们深入研究在目标设备上执行枚举。
- en: SMB, LDAP enumeration, and null sessions
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SMB、LDAP枚举和空会话
- en: In this section, we are going to take a look at using various application protocols
    to help us extract sensitive data and records from a target system.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将研究使用各种应用程序协议来帮助我们从目标系统中提取敏感数据和记录。
- en: SMBmap and SMBclient
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SMBmap和SMBclient
- en: '**SMBmap** is a popular and easy-to-use tool that is used to help us discover
    any SMB shares on a device and detect permissions on any shares found:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: '**SMBmap**是一个流行且易于使用的工具，用于帮助我们发现设备上的任何SMB共享并检测任何发现的共享的权限：'
- en: 'Using the `smbmap -H target` syntax, we can attempt to perform a port scan,
    looking for ports that are used by the SMB service; in our target, it''s `445`
    and it''s open:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`smbmap -H target`语法，我们可以尝试执行端口扫描，寻找SMB服务使用的端口；在我们的目标上，它是`445`，并且是开放的：
- en: '![](img/481ba446-50dd-486d-bbbf-d484989bb080.png)'
  id: totrans-292
  prefs: []
  type: TYPE_IMG
  zh: '![](img/481ba446-50dd-486d-bbbf-d484989bb080.png)'
- en: SMB shares
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: SMB共享
- en: SMBmap will attempt to establish a session between the attacker machine and
    the target on port `445` to enumerate any share drives and folders. On our target
    (Metasploitable), there's the `tmp` folder, which gives us read and write permissions.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SMBmap将尝试在攻击者机器和目标端口`445`之间建立会话，以枚举任何共享驱动器和文件夹。在我们的目标（Metasploitable）上，有一个`tmp`文件夹，它给予我们读写权限。
- en: 'Using the `smbmap -H 10.10.10.100 -r tmp` command, we will be able to list
    the contents of the directory specified. In our example, we are listing the content
    of the `tmp` folder, as shown in the following screenshot:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`smbmap -H 10.10.10.100 -r tmp`命令，我们将能够列出指定目录的内容。在我们的示例中，我们正在列出`tmp`文件夹的内容，如下截图所示：
- en: '![](img/1a809591-326b-4b25-be51-cbe066e69961.png)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a809591-326b-4b25-be51-cbe066e69961.png)'
- en: SMBmap enumeration
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: SMBmap枚举
- en: SMBmap is an excellent tool for enumerating SMB shares on target devices; however,
    it's always good to have another tool available in your arsenal. Other tools include
    SMBlookup, SMBclient, and Nmap.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: SMBmap是一个枚举目标设备上SMB共享的绝佳工具；然而，始终最好在您的工具库中有另一个工具可用。其他工具包括SMBlookup、SMBclient和Nmap。
- en: 'Further information about SMBmap can be found at: [https://tools.kali.org/information-gathering/smbmap](https://tools.kali.org/information-gathering/smbmap).'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 有关SMBmap的更多信息，请访问：[https://tools.kali.org/information-gathering/smbmap](https://tools.kali.org/information-gathering/smbmap)。
- en: '**SMBclient** is another handy tool and works in a similar fashion to SMBmap.
    To enumerate SMB services on a target, we can use the `smbclient -L //target`
    command:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: '**SMBclient**是另一个方便的工具，工作方式类似于SMBmap。要在目标上枚举SMB服务，我们可以使用`smbclient -L //target`命令：'
- en: '![](img/2a63d131-89cd-4585-adac-f67b2512e8fe.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2a63d131-89cd-4585-adac-f67b2512e8fe.png)'
- en: SMBclient enumeration
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: SMBclient枚举
- en: 'SMBclient will attempt to extract any shares on the target device, as seen
    in the previous screenshot. Further information on SMBclient can be found at:
    [https://www.samba.org/samba/docs/current/man-html/smbclient.1.html](https://www.samba.org/samba/docs/current/man-html/smbclient.1.html).'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: SMBclient将尝试提取目标设备上的任何共享，如前面的截图所示。有关SMBclient的更多信息，请访问：[https://www.samba.org/samba/docs/current/man-html/smbclient.1.html](https://www.samba.org/samba/docs/current/man-html/smbclient.1.html)。
- en: Having completed this section, you have gained the skills to use both SMBmap
    and SMBclient to perform SMB enumeration on a target. In the next section, we
    will briefly discuss another popular tool for SMB enumeration, Enum4linux.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了本节后，您已经掌握了使用SMBmap和SMBclient在目标上执行SMB枚举的技能。在下一节中，我们将简要讨论另一个流行的SMB枚举工具Enum4linux。
- en: Enum4linux
  id: totrans-305
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Enum4linux
- en: '**Enum4linux** is an enumeration tool capable of detecting and extracting data
    from Windows and Linux operating systems, including those that are **Samba** (**SMB**)
    hosts on a network. Enum4linux is capable of discovering the following:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '**Enum4linux**是一种枚举工具，能够检测和提取Windows和Linux操作系统上的数据，包括网络上的**Samba**（**SMB**）主机。Enum4linux能够发现以下内容：'
- en: Password policies on a target
  id: totrans-307
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目标上的密码策略
- en: The operating system of a remote target
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 远程目标的操作系统
- en: Shares on a device (drives and folders)
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设备上的共享（驱动器和文件夹）
- en: Domain and group membership
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域和组成员资格
- en: User listings
  id: totrans-311
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户列表
- en: 'To scan a target, use the following command: `enum4linux target`. The tool
    will perform all the checks and enumeration that it can perform. The output can
    be a bit overwhelming at first: be sure to check the details carefully as they
    will contain meaningful information about your target.'
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 要扫描目标，请使用以下命令：`enum4linux target`。该工具将执行所有可能的检查和枚举。一开始输出可能有点压倒性：一定要仔细检查细节，因为它们将包含有关目标的有意义信息。
- en: Enum4linux comes in handy at times for performing a scan on the network to discover
    any shared resources. In the next section, we will take a deep dive into LDAP
    enumeration on a Windows network.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: Enum4linux有时会派上用场，用于在网络上执行扫描以发现任何共享资源。在下一节中，我们将深入探讨Windows网络上的LDAP枚举。
- en: LDAP enumeration
  id: totrans-314
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: LDAP枚举
- en: The **Lightweight Directory Access Protocol** (**LDAP**) is used to query a
    database or directory type of service. A common example is a corporate environment
    with an **Active Directory** (**AD**) server that manages the user accounts of
    the entire organization. End devices such as desktop computers need to query the
    AD server each time a user is attempting to log in to that desktop computer.
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: '**轻量级目录访问协议**（**LDAP**）用于查询数据库或目录类型的服务。一个常见的例子是一个拥有**Active Directory**（**AD**）服务器的企业环境，该服务器管理整个组织的用户账户。诸如台式电脑之类的终端设备需要在每次用户尝试登录到该台式电脑时查询AD服务器。'
- en: LDAP uses port `389` by default; however, packets are sent across the network
    in plaintext. Additionally, using **LDAPS** (**LDAP Secure**) ensures that the
    information sent between a client and the LDAP server is encrypted by default;
    LDAPS uses port `636` by default. We can use Nmap to scan for devices on a network
    that has ports `389` and `636` open.
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: LDAP默认使用端口`389`；然而，数据包以明文形式在网络上传输。另外，使用**LDAPS**（**LDAP安全**）确保了在客户端和LDAP服务器之间发送的信息默认是加密的；LDAPS默认使用端口`636`。我们可以使用Nmap扫描在网络上具有端口`389`和`636`开放的设备。
- en: We can use a tool called JXplorer ([http://jxplorer.org](http://jxplorer.org))
    to perform LDAP enumeration. This tool is not natively installed in Kali Linux;
    therefore, we'll need to download it from its GitHub repository and run it.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以使用一个名为JXplorer（[http://jxplorer.org](http://jxplorer.org)）的工具来执行LDAP枚举。这个工具不是在Kali
    Linux中原生安装的，因此，我们需要从它的GitHub存储库中下载并运行它。
- en: 'To get started with LDAP enumeration, let''s use the following steps:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: '要开始LDAP枚举，让我们使用以下步骤： '
- en: 'Use the following command to download and execute the tool:'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令来下载和执行这个工具：
- en: '[PRE4]'
  id: totrans-320
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Once you successfully execute the `./jxplorer.sh` script, the user interface
    will open. Click the Connect icon (located under File) to insert the details of
    your target:'
  id: totrans-321
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦成功执行`./jxplorer.sh`脚本，用户界面将会打开。点击连接图标（位于文件下方）来插入你的目标的详细信息：
- en: '![](img/207f67b3-e9fd-4e47-a5a7-b0f7f5b23047.png)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![](img/207f67b3-e9fd-4e47-a5a7-b0f7f5b23047.png)'
- en: The JXplorer interface
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: JXplorer界面
- en: 'In our lab, we have a Windows Server machine with the following configurations:'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的实验室中，我们有一台Windows Server机器，配置如下：
- en: Active Directory Domain Service installed
  id: totrans-325
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已安装Active Directory域服务
- en: Active Directory Lightweight Directory Services installed
  id: totrans-326
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已安装Active Directory轻量级目录服务
- en: 'Domain: `pentestlab.local`'
  id: totrans-327
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域：`pentestlab.local`
- en: 'The user account created: `bob` (belongs to the domain admin user group)'
  id: totrans-328
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建的用户账户：`bob`（属于域管理员用户组）
- en: Assuming that, by using a packet sniffing tool such as Wireshark during a penetration
    test, you are able to capture user credentials while they are attempting to authenticate
    to the AD server, you can use these user accounts in the Security field in the
    preceding screenshot.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 假设，在渗透测试期间，通过使用数据包嗅探工具如Wireshark，你能够在用户尝试对AD服务器进行身份验证时捕获用户凭据，你可以在前面的截图中的安全字段中使用这些用户账户。
- en: 'Using an administrator user account will provide the necessary privileges to
    extract information in JXplorer; you''ll be able to enumerate sensitive information
    from the Active Directory server, as shown in the following screenshot:'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: 使用管理员用户账户将提供在JXplorer中提取信息所需的权限；你将能够从Active Directory服务器中枚举敏感信息，如下图所示：
- en: '![](img/e7b8c7b8-0bf1-4981-bd94-70102e37d663.png)'
  id: totrans-331
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7b8c7b8-0bf1-4981-bd94-70102e37d663.png)'
- en: LDAP enumeration with JXplorer
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 使用JXplorer进行LDAP枚举
- en: You'll be able to view the entire directory from your attacker machine and extract
    sensitive information. If the service only uses LDAPS, this will be a challenge
    as the user credentials will be concealed.
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 你将能够从你的攻击者机器上查看整个目录并提取敏感信息。如果服务只使用LDAPS，这将是一个挑战，因为用户凭据将被隐藏。
- en: Having completed this exercise, let's use the **rpcclient** tool to perform
    a null session attack in the next section.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 完成了这个练习之后，让我们在下一节中使用**rpcclient**工具执行一个空会话攻击。
- en: Null sessions
  id: totrans-335
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 空会话
- en: In a null session, an attacker is able to log in to a target using a null account.
    A null account is an account that does not actually exist. How is this possible?
    Some systems are vulnerable to allowing anonymous login. Once a user is able to
    log in anonymously, the null user is able to retrieve sensitive information stored
    on the target.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 在一个空会话中，攻击者能够使用一个空账户登录到目标。空账户是一个实际上并不存在的账户。这是怎么可能的呢？一些系统容易受到允许匿名登录的漏洞。一旦用户能够匿名登录，空用户就能够检索存储在目标上的敏感信息。
- en: 'We can attempt a null session enumeration from our Kali Linux machine (attacker)
    on to the target, Metasploitable, by using the `rpcclient -U "" 10.10.10.100`
    command, as shown in the following screenshot:'
  id: totrans-337
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以尝试从我们的Kali Linux机器（攻击者）到目标Metasploitable上进行一个空会话枚举，使用`rpcclient -U "" 10.10.10.100`命令，如下图所示：
- en: '![](img/39cd647e-81c9-4cca-bbe8-f78fa963c091.png)'
  id: totrans-338
  prefs: []
  type: TYPE_IMG
  zh: '![](img/39cd647e-81c9-4cca-bbe8-f78fa963c091.png)'
- en: A null session attack
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 空会话攻击
- en: Using the `srvinfo` command, the target will return its operating system type
    to us. For a full listing of query commands, you can use the `rpcclient --help`
    command. Additionally, you can visit [https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html](https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html).
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`srvinfo`命令，目标将会向我们返回它的操作系统类型。要获取查询命令的完整列表，你可以使用`rpcclient --help`命令。另外，你可以访问[https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html](https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html)。
- en: Keep in mind that not all machines are vulnerable to this type of attack, but
    it's still worth performing during a penetration test. In the next section, we
    will discuss user enumeration through noisy authentication controls.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，并非所有的机器都容易受到这种类型的攻击，但在渗透测试中执行这种攻击仍然是值得的。在下一节中，我们将讨论通过嘈杂的身份验证控制进行用户枚举。
- en: User enumeration through noisy authentication controls
  id: totrans-342
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过嘈杂的身份验证控制进行用户枚举
- en: Enumeration is the technique in which a hacker or a penetration tester attempts
    to perform a brute-force attack to either guess or confirm valid users on a target
    system. A simple example is where a malicious user or a penetration tester performs
    a password-guessing or brute-force attack on an email portal.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 枚举是黑客或渗透测试人员尝试对目标系统执行暴力攻击以猜测或确认有效用户的技术。一个简单的例子是，恶意用户或渗透测试人员在电子邮件门户上执行密码猜测或暴力攻击。
- en: 'The following is an example of a typical login portal. The credentials shown
    in the following screenshot are an example and are not real:'
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个典型登录门户的示例。以下截图中显示的凭据是一个示例，不是真实的：
- en: '![](img/5860f2b0-7691-426d-b5f3-d7ee75d908af.png)'
  id: totrans-345
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5860f2b0-7691-426d-b5f3-d7ee75d908af.png)'
- en: An attacker can attempt various combinations of possible usernames and passwords
    until a valid user is found. However, such attacks are considered noisy rather
    than stealthy (quiet). As a comparison, imagine you are playing an online first-person
    shooter game, and your task is to invade the enemy base and steal a trophy without
    alerting the guards. If you are not careful enough and make any loud noises, the
    guards will be alerted and the mission will fail. In this analogy, the guards
    are the security controls, and the sensors are the firewalls, IDS/IPS, and anti-malware
    protection. Hence, this technique is not quiet on a network; however, this method
    can still get you access to a system, provided that the security controls do not
    perform a lockout action before you can gain access.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者可以尝试各种可能的用户名和密码组合，直到找到一个有效的用户。然而，这种攻击被认为是喧闹的而不是隐秘的。作为比较，想象一下你在玩一个在线第一人称射击游戏，你的任务是入侵敌人的基地并偷走一个奖杯而不引起警卫的注意。如果你不够小心并发出任何大声的声音，警卫就会被警觉，任务就会失败。在这个类比中，警卫是安全控制，传感器是防火墙、IDS/IPS和反恶意软件保护。因此，这种技术在网络上并不是安静的；然而，这种方法仍然可以让你访问系统，前提是安全控制在你获得访问权限之前不执行锁定操作。
- en: A lot of times, when a user enters an incorrect username on a login portal,
    an error message is returned, usually stating that an incorrect username has been
    entered. This clearly tells an attacker that the username provided does not exist
    in the database. Additionally, if the incorrect password was entered, the system
    usually returns a message stating that an incorrect password was entered for the
    username. So, from an attacker's point of view, the system is telling us that
    the username exists in the database, but we have not provided the correct password
    for it.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 很多时候，当用户在登录门户上输入错误的用户名时，通常会返回一个错误消息，通常说明已输入了错误的用户名。这清楚地告诉攻击者，提供的用户名在数据库中不存在。此外，如果输入了错误的密码，系统通常会返回一条消息，说明为该用户名输入了错误的密码。因此，从攻击者的角度来看，系统告诉我们，用户名存在于数据库中，但我们没有为它提供正确的密码。
- en: 'Web developers and security professionals now include generic responses when
    either a username or password is incorrect, with a similar message to this: *The
    username/password is incorrect*. This message does not state exactly which value
    is correct or incorrect.'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，Web开发人员和安全专业人员在用户名或密码不正确时都包含了通用响应，类似于这样的消息：*用户名/密码不正确*。这条消息并没有明确说明哪个值是正确的或不正确的。
- en: Now that you have a better understanding of noisy authentication controls, let's
    attempt to perform web enumeration in the following section.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您对喧闹的身份验证控件有了更好的理解，让我们尝试在下一节中执行Web枚举。
- en: Web footprints and enumeration with EyeWitness
  id: totrans-350
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用EyeWitness进行Web足迹和枚举
- en: '**EyeWitness** is a tool that allows a penetration tester to capture screenshots
    of a website without leaving the Terminal—the tool does all of the work in the
    background. Imagine having to visually profile multiple websites, open **Virtual
    Network Computing** (**VNC**) servers, and use **Remote Desktop Protocols** (**RDPs**).
    This can be a time-consuming task. EyeWitness takes the screenshots, stores them
    offline, and provides an HTML report:'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: '**EyeWitness**是一个允许渗透测试人员在不离开终端的情况下捕获网站截图的工具——该工具在后台完成所有工作。想象一下需要对多个网站进行视觉配置文件、打开**虚拟网络计算**（**VNC**）服务器和使用**远程桌面协议**（**RDPs**）的情况。这可能是一个耗时的任务。EyeWitness拍摄截图，将它们存储在离线状态，并提供HTML报告：'
- en: To begin, you'll need to download EyeWitness from its GitHub repository using
    `git clone https://github.com/FortyNorthSecurity/EyeWitness.git`.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，您需要使用`git clone https://github.com/FortyNorthSecurity/EyeWitness.git`从其GitHub存储库下载EyeWitness。
- en: 'Once the download has completed, access the `root/EyeWitness/setup` directory
    and run the `setup.sh` script using the following sequence of commands:'
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，访问`root/EyeWitness/setup`目录，并使用以下命令序列运行`setup.sh`脚本：
- en: '![](img/12d98d7c-a8ae-45c8-97b2-8eaf1f551d31.png)'
  id: totrans-354
  prefs: []
  type: TYPE_IMG
  zh: '![](img/12d98d7c-a8ae-45c8-97b2-8eaf1f551d31.png)'
- en: EyeWitness setup screen
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: EyeWitness设置屏幕
- en: 'Once the setup process is complete, use the `cd ..` command to go one directory
    up to the `root/EyeWitness` directory. To screenshot a single website, use the
    following command:'
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置过程完成后，使用`cd ..`命令进入`root/EyeWitness`目录。要对单个网站进行截图，使用以下命令：
- en: '[PRE5]'
  id: totrans-357
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: You can try this tool on one of the web applications on Metasploitable or OWASP
    BWA virtual machines.
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以在Metasploitable或OWASP BWA虚拟机上的一个Web应用程序上尝试这个工具。
- en: 'EyeWitness allows you to specify various protocols using operators such as:
    `--web`, `--rdp`, `--vnc`, and `--all-protocols`.'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: EyeWitness允许您使用`--web`、`--rdp`、`--vnc`和`--all-protocols`等操作符指定各种协议。
- en: 'Once the task completes, EyeWitness will indicate whether it was successful
    in capturing screenshots of the target(s) and provide you with the location of
    the offline report, as seen in the following screenshot:'
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 任务完成后，EyeWitness将指示是否成功捕获了目标的截图，并为您提供离线报告的位置，如下图所示：
- en: '![](img/46f904e0-5e3b-4dd1-a605-0eea354e98d2.png)'
  id: totrans-361
  prefs: []
  type: TYPE_IMG
  zh: '![](img/46f904e0-5e3b-4dd1-a605-0eea354e98d2.png)'
- en: EyeWitness reporting wizard
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: EyeWitness报告向导
- en: 'Upon opening the HTML report, the left-hand column contains information about
    the web request, while the right-hand column contains the screenshots:'
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开HTML报告后，左侧列包含有关Web请求的信息，而右侧列包含截图：
- en: '![](img/7f541fd7-bdcc-45e5-a921-1bc05a3dd3e0.png)'
  id: totrans-364
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7f541fd7-bdcc-45e5-a921-1bc05a3dd3e0.png)'
- en: Report from EyeWitness
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: EyeWitness的报告
- en: This tool is very handy when profiling multiple services and websites at once.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 这个工具在同时对多个服务和网站进行概要分析时非常方便。
- en: Further information on EyeWitness can be found at [https://tools.kali.org/information-gathering/eyewitness](https://tools.kali.org/information-gathering/eyewitness).
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 有关EyeWitness的更多信息，请访问[https://tools.kali.org/information-gathering/eyewitness](https://tools.kali.org/information-gathering/eyewitness)。
- en: Now that you have completed this section, you are able to perform web enumeration
    using the EyeWitness tool.
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经完成了这一部分，可以使用EyeWitness工具执行Web枚举。
- en: Metasploit auxiliary modules
  id: totrans-369
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Metasploit辅助模块
- en: 'Metasploit is an exploitation development framework created by Rapid7 ([www.rapid7.com](http://www.rapid7.com)).
    Metasploit contains many features and functions for penetration testing. There
    are many modules, such as exploits, payloads, encoders, and auxiliary. The auxiliary
    module contains port scanners, network sniffers, fuzzers, and a lot more to facilitate
    the information-gathering phase of a penetration test:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploit是由Rapid7创建的开发利用框架（[www.rapid7.com](http://www.rapid7.com)）。Metasploit包含许多用于渗透测试的功能和功能。有许多模块，如exploits、payloads、encoders和auxiliary。辅助模块包含端口扫描器、网络嗅探器、模糊器等，以便于渗透测试的信息收集阶段：
- en: 'To access the Metasploit interface, open a new Terminal and execute the following
    commands:'
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要访问Metasploit界面，请打开一个新的终端并执行以下命令：
- en: '[PRE6]'
  id: totrans-372
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Once the user interface loads, the `show auxiliary` command will provide a
    list of all of the auxiliary modules within Metasploit. Let''s use a simple example
    to demonstrate how to use a module: let''s imagine you would like to perform a
    stealth (SYN) scan on a target. You can begin by selecting a module.'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦用户界面加载，`show auxiliary`命令将提供Metasploit中所有辅助模块的列表。让我们用一个简单的例子来演示如何使用模块：假设您想对目标进行隐秘（SYN）扫描。您可以开始选择一个模块。
- en: Use the `use auxiliary/scanner/portscan/syn` command.
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`use auxiliary/scanner/portscan/syn`命令。
- en: Check the description and requirements by using the `show options` command.
  id: totrans-375
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`show options`命令检查描述和要求。
- en: This module requires that a remote host is configured; use the `set RHOSTS target`
    command.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此模块要求配置远程主机；使用`set RHOSTS target`命令。
- en: To execute the module, use the `run` command.
  id: totrans-377
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要执行模块，请使用`run`命令。
- en: 'The following screenshot is a demonstration of a stealth scan on our Windows
    Server machine (`10.10.10.14`) and the results provided at the bottom indicate
    that various ports were found open:'
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下截图演示了对我们的Windows服务器（`10.10.10.14`）进行隐秘扫描的结果底部显示了找到的各种开放端口：
- en: '![](img/71c7c9fa-34f1-49f2-8355-67fdcef8df66.png)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![](img/71c7c9fa-34f1-49f2-8355-67fdcef8df66.png)'
- en: Additionally, to search for a module within Metasploit, using the `search keyword`
    syntax can be very useful as there are a lot of different modules in the framework,
    and learning them all can be very challenging and overwhelming.
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 此外，在Metasploit中搜索模块时，使用`search keyword`语法非常有用，因为框架中有许多不同的模块，学习它们都可能非常具有挑战性和压倒性。
- en: In the later chapters in this book, we will dive deeper into using Metasploit
    to perform exploitation on target devices in our lab.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的后续章节中，我们将深入探讨如何使用Metasploit在我们的实验室中对目标设备进行利用。
- en: Summary
  id: totrans-382
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: During this chapter, we covered various DNS interrogation techniques using a
    variety of tools to discover important servers, subdomains, and IP addresses,
    and were able to successfully extract the zone files from a DNS server (zone transfer)
    due to a misconfiguration on the target's DNS server.
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们使用了各种DNS询问技术，使用各种工具发现了重要的服务器、子域和IP地址，并成功地从DNS服务器（区域传输）中提取了区域文件，因为目标DNS服务器的配置错误。
- en: Then, we used Nmap to perform various types of port scanning to determine the
    port status, running services and their versions, and the target's operating system;
    we also gained an indication of whether there's a firewall on the target. Finally,
    to close this chapter, we performed SMB and LDAP enumeration to gather user shares
    and directory records on our network devices.
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们使用Nmap执行各种类型的端口扫描，以确定端口状态、运行服务及其版本以及目标操作系统；我们还得知了目标是否有防火墙。最后，为了结束本章，我们执行了SMB和LDAP枚举，以收集网络设备上的用户共享和目录记录。
- en: Now that you have completed this chapter, you'll be able to successfully perform
    DNS zone transfers on vulnerable DNS servers; profile a system to discover its
    operating system, running services, and security vulnerabilities; evade detection
    while performing network scans; and perform LDAP and system enumeration on a target.
    You also obtained the skills to visually profile multiple websites at once. I
    hope this chapter has been helpful to your journey in learning penetration testing.
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经完成了本章，您将能够成功地在易受攻击的DNS服务器上执行DNS区域传输；对系统进行概要分析，发现其操作系统、运行服务和安全漏洞；在执行网络扫描时规避检测；并在目标上执行LDAP和系统枚举。您还获得了同时对多个网站进行视觉概要分析的技能。希望本章对您学习渗透测试的旅程有所帮助。
- en: In [Chapter 7](075f58ca-ff2a-48c7-9b90-17ddd4e408c9.xhtml), *Working with Vulnerability
    Scanners*, we will cover the importance of using vulnerability scanners to find
    security weaknesses and flaws on a target.
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第7章](075f58ca-ff2a-48c7-9b90-17ddd4e408c9.xhtml)中，*使用漏洞扫描器*，我们将介绍使用漏洞扫描器查找目标上的安全漏洞和缺陷的重要性。
- en: Questions
  id: totrans-387
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'The following are some questions based on the topics we have covered in this
    chapter:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是基于本章内容的一些问题：
- en: What is the primary purpose of using DNS?
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用DNS的主要目的是什么？
- en: What is meant by a DNS zone transfer?
  id: totrans-390
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DNS区域传输是什么意思？
- en: What tool allows us to perform a scan on a target system and determine its running
    services and operating system?
  id: totrans-391
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么工具允许我们对目标系统进行扫描，并确定其运行的服务和操作系统？
- en: What method is used to evade a firewall during a scan?
  id: totrans-392
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在扫描期间使用了什么方法来规避防火墙？
- en: What tool can be used to enumerate Active Directory?
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以用什么工具来枚举Active Directory？
- en: Further reading
  id: totrans-394
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: '**Information Gathering and Vulnerability Assessment**: [https://hub.packtpub.com/information-gathering-and-vulnerability-assessment-0/](https://hub.packtpub.com/information-gathering-and-vulnerability-assessment-0/)'
  id: totrans-395
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信息收集和漏洞评估：[https://hub.packtpub.com/information-gathering-and-vulnerability-assessment-0/](https://hub.packtpub.com/information-gathering-and-vulnerability-assessment-0/)
- en: '**Open Source Intelligence**: [https://hub.packtpub.com/open-source-intelligence/](https://hub.packtpub.com/open-source-intelligence/)'
  id: totrans-396
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 开源情报：[https://hub.packtpub.com/open-source-intelligence/](https://hub.packtpub.com/open-source-intelligence/)
- en: '**Gather Intel and Plan Attack Strategies**: [https://hub.packtpub.com/gather-intel-and-plan-attack-strategies/](https://hub.packtpub.com/gather-intel-and-plan-attack-strategies/)'
  id: totrans-397
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集情报并制定攻击策略：[https://hub.packtpub.com/gather-intel-and-plan-attack-strategies/](https://hub.packtpub.com/gather-intel-and-plan-attack-strategies/)
