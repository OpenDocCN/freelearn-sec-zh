- en: '1'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '1'
- en: Getting Started with OWASP Zed Attack Proxy
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始使用 OWASP Zed Attack Proxy
- en: In this chapter, you will learn how to set up OWASP **Zed Attack Proxy** (**ZAP**)
    and the testing environments we will use throughout this book. We are going to
    cover what software is required to run ZAP and show you how to download and install
    it on your local machine. You will also learn how to install Docker and use it
    to set up OWASP Juice Shop, which we will use to perform the labs in this book.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你将学习如何设置 OWASP **Zed Attack Proxy**（**ZAP**）以及我们将在本书中使用的测试环境。我们将介绍运行 ZAP
    所需的软件，并展示如何在本地机器上下载和安装它。你还将学习如何安装 Docker 并使用它设置 OWASP Juice Shop，这是我们将在本书中执行实验的环境。
- en: Moreover, we will walk you through the process of downloading and installing
    ZAP, which we will use throughout the book. We will also cover various ways of
    installing ZAP on your computer and explain in what situation you might want to
    use one method rather than the other. Additionally, we will cover how to install
    Zed Attack Proxy directly from the JAR file as well as by using the Docker image
    of Zed Attack Proxy.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我们将引导你完成下载和安装 ZAP 的过程，ZAP 是我们将在全书中使用的工具。我们还将介绍几种安装 ZAP 的方法，并解释在什么情况下你可能想选择一种方法而不是另一种方法。我们还将介绍如何直接从
    JAR 文件安装 Zed Attack Proxy，以及如何使用 Zed Attack Proxy 的 Docker 镜像来安装它。
- en: ZAP is an open source application built and maintained by the **Open Web Application
    Security Project** (**OWASP**). ZAP is built specifically for testing web applications
    for vulnerabilities. ZAP is a **man-in-the-middle** (**MITM**) proxy application.
    Once it is installed and configured, ZAP sits in the middle between the web application
    and the security tester’s browser, aka clientside. ZAP works by intercepting and
    inspecting the responses and the requests sent to or from the web application.
    After the interception, these requests and responses can be modified, if required,
    and sent on their way.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 是由 **开放网页应用安全项目**（**OWASP**）构建和维护的一个开源应用程序。ZAP 专门用于测试网页应用程序的漏洞。ZAP 是一个 **中间人**（**MITM**）代理应用程序。一旦安装并配置完成，ZAP
    就会处于网页应用程序和安全测试人员的浏览器之间，也就是客户端。ZAP 通过拦截并检查发送到网页应用程序或从网页应用程序发送的请求和响应来工作。在拦截后，这些请求和响应可以根据需要进行修改，然后继续传送。
- en: The two testing environments we will use in this book are used by many professionals
    to learn and practice their skills. OWASP **Juice Shop** is a locally hosted environment
    that you will learn how to deploy on your machine. You will also use **PortSwigger
    Academy** to learn about more complicated subjects that you can’t learn from a
    locally hosted environment.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将在本书中使用的两个测试环境被许多专业人士用来学习和实践他们的技能。OWASP **Juice Shop** 是一个本地托管的环境，你将学习如何在你的机器上部署它。你还将使用
    **PortSwigger Academy** 来学习一些更复杂的内容，这些是本地托管环境无法提供的。
- en: At the end of this chapter, you will learn how to set up your browser to proxy
    the traffic from OWASP Juice Shop and the PortSwigger Academy. This will be the
    primary environment we will use to perform all the different testing explained
    in this book.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结束时，你将学会如何设置浏览器以代理 OWASP Juice Shop 和 PortSwigger Academy 的流量。这将是我们用于执行本书中所有不同测试的主要环境。
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍以下内容：
- en: Downloading ZAP
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载 ZAP
- en: Setting up the testing environment
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置测试环境
- en: Setting up a browser proxy and certificate
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置浏览器代理和证书
- en: Testing ZAP setup
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试 ZAP 设置
- en: Downloading ZAP
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载 ZAP
- en: In this section, we will run through detailed instructions on installing ZAP
    on Windows and macOS and using the cross-platform package on both Windows and
    macOS. We will also cover ZAP requirements, installing Java, configuring the browser,
    and installing the certificate. In addition, we will cover installing and setting
    up Docker, setting up the testing environments, and testing to make sure everything
    is working as expected.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将详细介绍如何在 Windows 和 macOS 上安装 ZAP，并使用适用于 Windows 和 macOS 的跨平台包。我们还将介绍
    ZAP 的要求，如何安装 Java，配置浏览器，以及安装证书。此外，我们将介绍如何安装和设置 Docker，设置测试环境，并测试以确保一切如预期工作。
- en: Getting ready
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: In order to proceed with this recipe, you need to ensure that you have administrator
    privileges on your laptop, desktop, or whichever environment is being used that
    has sufficient hard drive space and RAM for operating ZAP.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 为了继续本教程，你需要确保你的笔记本、台式机或所使用的环境具有管理员权限，并且有足够的硬盘空间和内存来运行 ZAP。
- en: How to do it...
  id: totrans-16
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 操作步骤...
- en: The first step, with any tool, is downloading the application. This requires
    several other applications to correctly run and use. In this recipe, you will
    learn the best approach for running ZAP on any common operating system and how
    to install Java.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 使用任何工具的第一步是下载应用程序。这需要其他几个应用程序才能正确运行和使用。在本教程中，您将学习如何在任何常见操作系统上运行 ZAP 的最佳方法，以及如何安装
    Java。
- en: Installing Java
  id: totrans-18
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安装 Java
- en: 'Take the following steps to install Java:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 安装 Java 的步骤如下：
- en: 'Navigate to the Java download page at [java.com/en/download/](http://java.com/en/download/).
    Click on **Agree and Start Free Download**, as shown in *Figure 1**.1*:'
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 Java 下载页面：[java.com/en/download/](http://java.com/en/download/)。点击**同意并开始免费下载**，如*图
    1.1*所示：
- en: '![Figure 1.1 – Java download agreement](image/Figure_1.01_B18829.jpg)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.1 – Java 下载协议](image/Figure_1.01_B18829.jpg)'
- en: Figure 1.1 – Java download agreement
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.1 – Java 下载协议
- en: 'Open the installer once it’s downloaded, and click on **Install**, which is
    highlighted in the following screenshot:'
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，打开安装程序，并点击**安装**，如以下截图所示：
- en: "![Figure 1.2 – Java install prompt\uFEFF](image/Figure_1.02_B18829.jpg)"
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.2 – Java 安装提示](image/Figure_1.02_B18829.jpg)'
- en: Figure 1.2 – Java install prompt
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.2 – Java 安装提示
- en: This is how to install Java. In the next section, we will demonstrate several
    ways to install ZAP, depending on your requirements.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是如何安装 Java。在接下来的部分，我们将演示根据您的需求安装 ZAP 的几种方法。
- en: Installing ZAP on Windows
  id: totrans-27
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 Windows 上安装 ZAP
- en: The first step to installing ZAP on Windows is to install Java. This is because
    ZAP is dependent on Java. Refer to the previous *Installing Java* section for
    instructions on how to install Java.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上安装 ZAP 的第一步是安装 Java。这是因为 ZAP 依赖于 Java。有关如何安装 Java，请参考前面的*安装 Java*部分。
- en: 'To download the installer for Windows, do the following:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载适用于 Windows 的安装程序，请执行以下操作：
- en: 'Navigate to the ZAP download page at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click on the **Download** button next to **Windows (64) Installer** or **Windows
    (32) Installer**, depending on your computer’s processor. *Figure 1**.3* shows
    what this looks like:'
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 ZAP 下载页面：[www.zaproxy.org/download/](http://www.zaproxy.org/download/)。点击**Windows
    (64) 安装程序**或**Windows (32) 安装程序**旁的**下载**按钮，具体取决于您的计算机处理器。*图 1.3*显示了此界面：
- en: .
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: .
- en: '![Figure 1.3 – ZAP Windows installers](image/Figure_1.03_B18829.jpg)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.3 – ZAP Windows 安装程序](image/Figure_1.03_B18829.jpg)'
- en: Figure 1.3 – ZAP Windows installers
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.3 – ZAP Windows 安装程序
- en: 'Open the installer once it is downloaded, and click on **Next >**:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完安装程序后，打开并点击**下一步 >**：
- en: '![Figure 1.4 – ZAP Windows installation wizard](image/Figure_1.04_B18829.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.4 – ZAP Windows 安装向导](image/Figure_1.04_B18829.jpg)'
- en: Figure 1.4 – ZAP Windows installation wizard
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.4 – ZAP Windows 安装向导
- en: 'Accept the agreement by checking the circle next to **I accept the agreement**
    and clicking on **Next >**, as you can see in *Figure 1**.5*:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过勾选**我接受协议**旁的圆圈并点击**下一步 >**来接受协议，正如您在*图 1.5*中看到的：
- en: '![Figure 1.5 – ZAP License Agreement](image/Figure_1.05_B18829.jpg)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.5 – ZAP 许可协议](image/Figure_1.05_B18829.jpg)'
- en: Figure 1.5 – ZAP License Agreement
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.5 – ZAP 许可协议
- en: 'Then, check the circle next to **Standard installation** and click on **Next
    >**, as seen in the following screenshot:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，勾选**标准安装**旁边的圆圈，并点击**下一步 >**，如以下截图所示：
- en: '![Figure 1.6 – Select Installation Type](image/Figure_1.06_B18829.jpg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.6 – 选择安装类型](image/Figure_1.06_B18829.jpg)'
- en: Figure 1.6 – Select Installation Type
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.6 – 选择安装类型
- en: 'On the next page, click on **Install**, as shown in *Figure 1**.7*:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一页面，点击**安装**，如*图 1.7*所示：
- en: '![Figure 1.7 – Starting the installation](image/Figure_1.07_B18829.jpg)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.7 – 开始安装](image/Figure_1.07_B18829.jpg)'
- en: Figure 1.7 – Starting the installation
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.7 – 开始安装
- en: 'Click on **Finish** to complete the setup. Please refer to *Figure 1**.8* to
    see what that looks like:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**以完成设置。请参见*图 1.8*查看最终效果：
- en: '![Figure 1.8 – Installation completion](image/Figure_1.08_B18829.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.8 – 安装完成](image/Figure_1.08_B18829.jpg)'
- en: Figure 1.8 – Installation completion
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.8 – 安装完成
- en: This concludes the ZAP Windows installation; the next section will go over ZAP
    installation on macOS.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是 ZAP Windows 安装的全部内容；接下来的部分将介绍如何在 macOS 上安装 ZAP。
- en: Installing ZAP on macOS
  id: totrans-50
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在 macOS 上安装 ZAP
- en: 'To download the installer for macOS, follow these steps:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 要下载适用于 macOS 的安装程序，请按照以下步骤操作：
- en: 'Navigate to the download section on the ZAP main website at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click on the **Download** button next to **macOS Installer**, as shown in the
    following screenshot:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 ZAP 官方网站的下载部分，网址是 [www.zaproxy.org/download/](http://www.zaproxy.org/download/)。点击
    **下载** 按钮旁边的 **macOS 安装程序**，如以下截图所示：
- en: '![Figure 1.9 – The ZAP macOS Installer](image/Figure_1.09_B18829.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.9 – ZAP macOS 安装程序](image/Figure_1.09_B18829.jpg)'
- en: Figure 1.9 – The ZAP macOS Installer
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.9 – ZAP macOS 安装程序
- en: 'When the download is complete, open the installer. You may get an error stating
    **“OWASP ZAP” cannot be opened because the developer cannot be verified.** The
    following screenshot shows the error message:'
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载完成后，打开安装程序。你可能会遇到一个错误提示，显示 **“OWASP ZAP” 无法打开，因为无法验证开发者。** 以下截图展示了该错误消息：
- en: '![Figure 1.10 – Error message](image/Figure_1.10_B18829.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.10 – 错误消息](image/Figure_1.10_B18829.jpg)'
- en: Figure 1.10 – Error message
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.10 – 错误消息
- en: 'In that case, go to the **Security & Privacy** settings on the Macintosh computer,
    navigate to **General**, and click on **Open Anyway**. Let’s see what all this
    looks like:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这种情况下，前往 Macintosh 计算机上的 **安全性与隐私** 设置，导航到 **常规**，然后点击 **仍要打开**。让我们看看这些步骤的具体操作：
- en: '![Figure 1.11 – The macOS Security & Privacy window](image/Figure_1.11_B18829.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.11 – macOS 安全性与隐私窗口](image/Figure_1.11_B18829.jpg)'
- en: Figure 1.11 – The macOS Security & Privacy window
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.11 – macOS 安全性与隐私窗口
- en: After updating the settings, click on the installer again to begin the install.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 更新设置后，再次点击安装程序以开始安装。
- en: Installing ZAP using the cross-platform package
  id: totrans-62
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用跨平台包安装 ZAP
- en: The **cross-platform package** is a ZIP file that contains ZAP in a **.jar**
    format, a **.bat** script (for Windows), and a **.sh** script (for Unix-based
    systems). The scripts check the best memory option for the system before running
    ZAP from the **.jar** file. However, the cross-platform package requires Java
    *version 8* or newer to work. Therefore, Java is required to be installed on Windows
    or Linux operating systems. Refer to the *Installing Java* section for instructions
    on how to install Java.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: '**跨平台包**是一个 ZIP 文件，包含以 **.jar** 格式打包的 ZAP、一个 **.bat** 脚本（适用于 Windows）以及一个 **.sh**
    脚本（适用于基于 Unix 的系统）。这些脚本会在从 **.jar** 文件运行 ZAP 之前，检查系统的最佳内存选项。然而，跨平台包需要 Java *版本
    8* 或更高版本才能正常工作。因此，Windows 或 Linux 操作系统上需要安装 Java。有关安装 Java 的说明，请参考 *安装 Java* 部分。'
- en: 'To download the cross-platform package, take the following steps:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 下载跨平台包的步骤如下：
- en: 'Navigate to the download section on the ZAP main website at [www.zaproxy.org/download/](http://www.zaproxy.org/download/).
    Click the **Download** button next to **Cross Platform Package**, as shown here:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 前往 ZAP 官方网站的下载部分，网址是 [www.zaproxy.org/download/](http://www.zaproxy.org/download/)。点击
    **下载** 按钮旁边的 **跨平台包**，如图所示：
- en: '![Figure 1.12 – ZAP Cross Platform Package](image/Figure_1.12_B18829.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.12 – ZAP 跨平台包](image/Figure_1.12_B18829.jpg)'
- en: Figure 1.12 – ZAP Cross Platform Package
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.12 – ZAP 跨平台包
- en: 'The following screenshot shows the extracted folder:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了已解压的文件夹：
- en: '![Figure 1.13 – The cross-platform downloaded folder](image/Figure_1.13_B18829.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.13 – 跨平台下载文件夹](image/Figure_1.13_B18829.jpg)'
- en: Figure 1.13 – The cross-platform downloaded folder
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.13 – 跨平台下载文件夹
- en: To use the cross-platform package on a Unix-based operating system, open a new
    terminal window, navigate to the folder (directory) that we have downloaded and
    contains the **.jar** file, and type the **sh** command and the name of the file
    appended with **.sh**. In this example, the name of the file is **zap.sh**.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在基于 Unix 的操作系统上使用跨平台包时，打开一个新的终端窗口，导航到我们已下载并包含 **.jar** 文件的文件夹，输入 **sh** 命令，并在文件名后加上
    **.sh**。在这个例子中，文件名是 **zap.sh**。
- en: 'Press *Enter* or *return* depending on your keyboard layout. ZAP will then
    start after running this command:'
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下 *Enter* 或 *Return*，具体取决于你的键盘布局。运行此命令后，ZAP 将启动：
- en: '![Figure 1.14 – Starting zap.sh](image/Figure_1.14_B18829.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.14 – 启动 zap.sh](image/Figure_1.14_B18829.jpg)'
- en: Figure 1.14 – Starting zap.sh
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.14 – 启动 zap.sh
- en: On a Windows computer, after installing Java version 8 or newer, navigate to
    the folder where the files are stored and double-click the **.bat** file (**zap.bat**).
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 计算机上，安装 Java 版本 8 或更高版本后，导航到存储文件的文件夹，双击 **.bat** 文件（**zap.bat**）。
- en: Installing Docker
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Docker
- en: We are going to be using **Docker** throughout this book as a testing environment,
    and this section will help you install Docker on your machine if you don’t have
    it already running. You will need to download and install Docker on your computer.
    You can navigate to [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)
    and install the Docker version that is compatible with your computer.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们将使用**Docker**作为测试环境，本节将帮助你在计算机上安装Docker，如果你还没有运行它。你需要下载并安装Docker。你可以访问[https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)并安装与你的计算机兼容的Docker版本。
- en: For Windows
  id: totrans-78
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 对于Windows
- en: You will need to check the requirements and decide whether you are going to
    use *WSL 2 backend* or *Hyper-V backend* and Windows containers. After making
    sure you meet the installation requirements, go ahead and install Docker and make
    sure it is running on your system by running the **docker -v** command, as seen
    in *Figure 1**.15*. In doing this, you should see the version of the Docker environment
    you have installed on your machine.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 你需要检查系统要求并决定是否使用*WSL 2后端*或*Hyper-V后端*及Windows容器。在确认满足安装要求后，继续安装Docker，并通过运行**docker
    -v**命令来确保它在你的系统上运行，如*图 1.15*所示。这样，你应该能看到你在计算机上安装的Docker环境的版本。
- en: 'Congratulations! You have now installed Docker and are ready to install ZAP
    on Docker:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 恭喜！你已经安装了Docker，并准备好在Docker上安装ZAP：
- en: "![Figure 1.15 – Docker \uFEFFversion on Windows](image/Figure_1.15_B18829.jpg)"
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.15 – Windows上的Docker版本](image/Figure_1.15_B18829.jpg)'
- en: Figure 1.15 – Docker version on Windows
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.15 – Windows上的Docker版本
- en: For macOS
  id: totrans-83
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 对于macOS
- en: 'When installing Docker on an Apple computer, you will need to make sure you
    install the correct version depending on whether you have a Macintosh with an
    Intel chip or with an Apple chip. After installing the version that works with
    your computer, you can test it by running the **docker -v** command on a terminal,
    as seen in *Figure 1**.16*. You have now installed Docker and are ready to install
    ZAP:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在苹果计算机上安装Docker时，你需要确保根据你的Mac是否使用Intel芯片或Apple芯片来安装正确的版本。安装适合你计算机的版本后，你可以通过在终端上运行**docker
    -v**命令来测试它，如*图 1.16*所示。现在你已经安装了Docker，并准备好安装ZAP：
- en: '![Figure 1.16 – Docker version on macOS](image/Figure_1.16_B18829.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.16 – macOS上的Docker版本](image/Figure_1.16_B18829.jpg)'
- en: Figure 1.16 – Docker version on macOS
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.16 – macOS上的Docker版本
- en: See also
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: There are several other ways to install ZAP on different platforms. Please visit
    https://www.zaproxy.org/download/ to learn more.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他几种在不同平台上安装ZAP的方法。请访问[https://www.zaproxy.org/download/](https://www.zaproxy.org/download/)了解更多信息。
- en: Setting up the testing environment
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置测试环境
- en: In this section, you will set up the testing environment you will use in each
    chapter of this book. We will go through the process of setting up OWASP Juice
    Shop and signing up for PortSwigger Academy.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你将设置在本书每一章中使用的测试环境。我们将一起完成设置OWASP Juice Shop和注册PortSwigger Academy的过程。
- en: Getting ready
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: To prepare, we recommend using a common browser such as Google Chrome or Mozilla
    Firefox. In addition, ensure you have root or administrator permissions to run
    a terminal (Linux or macOS) or command prompt (Windows).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 为了准备，我们建议使用常见的浏览器，如Google Chrome或Mozilla Firefox。此外，请确保你具有root或管理员权限，以便运行终端（Linux或macOS）或命令提示符（Windows）。
- en: How to do it...
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The upcoming recipes will aid you in preparing the testing/lab environment that
    will be used throughout the recipes used in this book. These are commonly used
    labs, and are easy to sign up for or install and are free to use.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的配方将帮助你准备将在本书中使用的测试/实验环境。这些是常用的实验室，易于注册或安装，并且可以免费使用。
- en: OWASP Juice Shop setup
  id: totrans-95
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: OWASP Juice Shop设置
- en: 'OWASP Juice Shop is an open source, insecure web application used for training
    and learning various types of attacks. OWASP Juice Shop includes OWASP’s top ten
    vulnerabilities as well as flaws found in the real world. You can find more information
    about the project at [https://owasp.org/www-project-juice-shop/](https://owasp.org/www-project-juice-shop/).
    We are going to be using the Docker image for the simplicity of setup:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: OWASP Juice Shop是一个开源的不安全Web应用程序，用于培训和学习各种类型的攻击。OWASP Juice Shop包括OWASP的十大漏洞以及在实际中发现的缺陷。你可以在[https://owasp.org/www-project-juice-shop/](https://owasp.org/www-project-juice-shop/)找到更多关于该项目的信息。为了简化设置，我们将使用Docker镜像：
- en: 'The first step is to pull the image from Docker Hub by running the **docker
    pull bkimminich/juice-shop** command on your terminal after confirming that Docker
    is running on your machine:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是在确认Docker正在你的机器上运行后，使用终端运行**docker pull bkimminich/juice-shop**命令，从Docker
    Hub拉取镜像：
- en: '![Figure 1.17 – Pulling the Juice Shop image from Docker Hub](image/Figure_1.17_B18829.jpg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.17 – 从Docker Hub拉取Juice Shop镜像](image/Figure_1.17_B18829.jpg)'
- en: Figure 1.17 – Pulling the Juice Shop image from Docker Hub
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.17 – 从Docker Hub拉取Juice Shop镜像
- en: If everything works correctly, you will get a response similar to the screenshot
    in *Figure 1**.17*.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切正常，你将收到一个与*图 1.17*中截图类似的响应。
- en: 'The next step is to launch the Docker image. You can do this by running the
    **docker run --rm -p 3000:3000 bkimminich/juice-shop** command line on your terminal,
    as shown in the following screenshot:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步是启动Docker镜像。你可以在终端中运行**docker run --rm -p 3000:3000 bkimminich/juice-shop**命令，如下图所示：
- en: '![Figure 1.18 – Launching the Docker image](image/Figure_1.18_B18829.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.18 – 启动Docker镜像](image/Figure_1.18_B18829.jpg)'
- en: Figure 1.18 – Launching the Docker image
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.18 – 启动Docker镜像
- en: 'After the Docker image finishes installing, you can navigate to **localhost:3000**
    on your browser, and you will see the OWASP Juice Shop application running on
    your machine. Please refer to *Figure 1**.19* for an example of this:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Docker镜像安装完成后，你可以在浏览器中导航到**localhost:3000**，你将看到OWASP Juice Shop应用程序在你的机器上运行。请参考*图
    1.19*，看看它的示例：
- en: '![Figure 1.19 – OWASP Juice Shop](image/Figure_1.19_B18829.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.19 – OWASP Juice Shop](image/Figure_1.19_B18829.jpg)'
- en: Figure 1.19 – OWASP Juice Shop
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.19 – OWASP Juice Shop
- en: At this point, you have set up OWASP Juice Shop. Congratulations! You have OWASP
    Juice Shop installed on your computer.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 到目前为止，你已经设置好了OWASP Juice Shop。恭喜你！你已经在计算机上安装了OWASP Juice Shop。
- en: Sign up for PortSwigger Academy
  id: totrans-108
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注册PortSwigger Academy
- en: 'PortSwigger Academy is a free web security platform created by the creators
    of *Burp Suite*. We are going to use their lab environment to test some vulnerabilities
    that are not found in OWASP Juice Shop and for the simplicity of having a vulnerable
    lab without the need for a complex environment setup:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: PortSwigger Academy是由*Burp Suite*的创建者创建的一个免费的网络安全平台。我们将使用他们的实验室环境来测试一些在OWASP
    Juice Shop中找不到的漏洞，并且可以通过简单的环境设置来使用漏洞实验室：
- en: First, you will need to navigate to [https://portswigger.net/web-security](https://portswigger.net/web-security)
    and sign up for a free account.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，你需要访问[https://portswigger.net/web-security](https://portswigger.net/web-security)并注册一个免费账户。
- en: 'After you sign up for a free account, you can log in and navigate to [https://portswigger.net/web-security/all-labs](https://portswigger.net/web-security/all-labs).
    You can find all the labs provided by PortSwigger on this page, as shown in *Figure
    1**.20*, and we will use some of the labs during the course of this book:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注册一个免费账户后，你可以登录并访问[https://portswigger.net/web-security/all-labs](https://portswigger.net/web-security/all-labs)。你可以在该页面找到PortSwigger提供的所有实验室，如*图
    1.20*所示，我们将在本书的过程中使用其中的一些实验室：
- en: '![Figure 1.20 – PortSwigger labs](image/Figure_1.20_B18829.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.20 – PortSwigger实验室](image/Figure_1.20_B18829.jpg)'
- en: Figure 1.20 – PortSwigger labs
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.20 – PortSwigger实验室
- en: Now that you have set up your two testing environments, you are ready to start
    learning how to identify and test vulnerabilities with OWASP ZAP in the upcoming
    chapters.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经设置好了两个测试环境，准备在接下来的章节中学习如何使用OWASP ZAP识别和测试漏洞。
- en: How it works...
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: It is important to use the testing environment we described to follow along
    with the rest of the cookbook and its recipes. We will also work with some of
    the PortSwigger Academy labs that skip the need for setting up complex environments
    and additional servers to carry out attacks.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 使用我们描述的测试环境非常重要，以便跟随本书的其余部分和食谱。我们还将使用一些PortSwigger Academy的实验室，这些实验室不需要设置复杂的环境和额外的服务器即可进行攻击。
- en: There’s more...
  id: totrans-117
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: Other testing environments can be used, such as **OWASP Mutillidae** or **bWAPP**,
    in place of OWASP Juice Shop.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 也可以使用其他测试环境，如**OWASP Mutillidae**或**bWAPP**，来替代OWASP Juice Shop。
- en: Setting up a browser proxy and certificate
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置浏览器代理和证书
- en: In this section, we will cover how to configure ZAP to run with your browser
    as well as how to set up a ZAP CA certificate to proxy HTTPS connections. Also,
    we are going to use the browser extension, **FoxyProxy**, which provides an easy
    way to change proxy configurations and switch between multiple proxies or disable
    a direct connection. ZAP proxy allows you to capture all the requests made by
    your browser, then modify or edit those requests to find vulnerabilities in the
    web app you will be testing.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 本节将介绍如何配置 ZAP 使其与浏览器一起运行，并设置 ZAP CA 证书来代理 HTTPS 连接。此外，我们将使用浏览器扩展 **FoxyProxy**，它提供了一种简单的方法来更改代理配置，并在多个代理之间切换或禁用直接连接。ZAP
    代理允许你捕获浏览器发出的所有请求，然后修改或编辑这些请求，以便发现你正在测试的 Web 应用中的漏洞。
- en: Getting ready
  id: totrans-121
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: To proceed with this recipe, you need to have a basic understanding of navigating
    internet settings or browser network configuration. In addition, you need to understand
    how to navigate the browser marketplace to install extensions.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 要继续进行此步骤，你需要具备基本的互联网设置或浏览器网络配置的知识。此外，你需要了解如何浏览浏览器市场以安装扩展程序。
- en: How to do it...
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'FoxyProxy allows you to easily change the proxy configuration of browsers that
    do not have a simple setting to change proxy settings. You will need to take the
    following steps:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: FoxyProxy 允许你轻松更改那些没有简单设置界面来更改代理设置的浏览器的代理配置。你需要按照以下步骤操作：
- en: 'Navigate to Google and search for **FoxyProxy** on Chrome and navigate to the
    **Chrome Web Store** where you can install the plugin on your browser. Once you
    have navigated to the **chrome web store**, it should look like the following
    screenshot, at which point you can then click on **Add to Chrome** and follow
    the prompts to install the plugin:'
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 Google，搜索 **FoxyProxy**，然后进入 **Chrome 网上应用店**，在浏览器中安装插件。进入 **Chrome 网上应用店**
    后，界面应如下图所示，此时可以点击 **添加到 Chrome**，并按照提示完成插件安装：
- en: '![Figure 1.21 – Adding FoxyProxy to Chrome](image/Figure_1.21_B18829.jpg)'
  id: totrans-126
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.21 – 将 FoxyProxy 添加到 Chrome](image/Figure_1.21_B18829.jpg)'
- en: Figure 1.21 – Adding FoxyProxy to Chrome
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.21 – 将 FoxyProxy 添加到 Chrome
- en: 'To pin the extension on Chrome, click on the extension’s icon and click the
    pin-down icon, as seen in *Figure 1**.22*, which will attach the FoxyProxy extension
    to the top bar of your browser:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将扩展程序固定到 Chrome 上，请点击扩展程序图标，然后点击固定图标，如 *图 1.22* 所示，这样就能将 FoxyProxy 扩展程序固定到浏览器的顶部栏：
- en: '![Figure 1.22 – Pinning FoxyProxy](image/Figure_1.22_B18829.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.22 – 固定 FoxyProxy](image/Figure_1.22_B18829.jpg)'
- en: Figure 1.22 – Pinning FoxyProxy
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.22 – 固定 FoxyProxy
- en: 'Next, click on the FoxyProxy icon. Click on **Options**, as seen in *Figure
    1**.23*, to open the options setting window where we will set up the proxy settings:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击 FoxyProxy 图标，点击 **选项**，如 *图 1.23* 所示，打开选项设置窗口，在这里我们将设置代理设置：
- en: '![Figure 1.23 – The Options button](image/Figure_1.23_B18829.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.23 – 选项按钮](image/Figure_1.23_B18829.jpg)'
- en: Figure 1.23 – The Options button
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.23 – 选项按钮
- en: 'On the options screen, click **Add New Proxy** to set up the new proxy configurations
    for the ZAP proxy:'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选项界面中，点击 **添加新代理** 来为 ZAP 代理设置新的代理配置：
- en: '![Figure 1.24 – Adding a new proxy](image/Figure_1.24_B18829.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.24 – 添加新代理](image/Figure_1.24_B18829.jpg)'
- en: Figure 1.24 – Adding a new proxy
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.24 – 添加新代理
- en: 'On the **Proxy settings** window, in the **Proxy Details** tab, set the **Host
    or IP Address** field to the value of your ZAP proxy configuration. As you can
    see from *Figure 1**.25*, my ZAP proxy configuration is **127.0.0.1** for the
    IP, and the port is **8080**. Then click **Save** to store your settings:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 **代理设置** 窗口中，进入 **代理详情** 标签，将 **主机或 IP 地址** 字段设置为你的 ZAP 代理配置的值。如 *图 1.25*
    所示，我的 ZAP 代理配置为 IP 地址 **127.0.0.1**，端口为 **8080**。然后点击 **保存** 以保存设置：
- en: '![Figure 1.25 – Proxy settings](image/Figure_1.25_B18829.jpg)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.25 – 代理设置](image/Figure_1.25_B18829.jpg)'
- en: Figure 1.25 – Proxy settings
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.25 – 代理设置
- en: 'To verify whether the settings are saved, click on the FoxyProxy icon on the
    browser. Notice on the following screenshot that the setting states **Use proxy
    127.0.0.1:8080 for** **all URLs**:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要验证设置是否已保存，请点击浏览器中的 FoxyProxy 图标。请注意以下截图，设置中显示 **为所有 URL 使用代理 127.0.0.1:8080**：
- en: '![Figure 1.26 – Using the created proxy](image/Figure_1.26_B18829.jpg)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.26 – 使用创建的代理](image/Figure_1.26_B18829.jpg)'
- en: Figure 1.26 – Using the created proxy
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.26 – 使用创建的代理
- en: 'The last step is to validate that your proxy is working with the ZAP proxy:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步是验证你的代理是否与 ZAP 代理一起正常工作：
- en: "![Figure 1.27 – Valida\uFEFFtion that the proxy is being used](image/Figure_1.27_B18829.jpg)"
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.27 – 验证代理正在使用中](image/Figure_1.27_B18829.jpg)'
- en: Figure 1.27 – Validation that the proxy is being used
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.27 – 验证代理正在使用中
- en: CA Certificate
  id: totrans-146
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: CA 证书
- en: Before proceeding to intercept web traffic, the self-signed ZAP certificate
    will need to be installed into the root CA authority of your browser of choice.
    This will prevent the browser from flagging the ZAP proxy as malicious and getting
    stuck at the **Browser Warning** screen. This happens because you don’t have a
    trusted **CA Certificate** installed on your browser. This section will focus
    on testing in the Google Chrome browser.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行 Web 流量拦截之前，您需要将自签名的 ZAP 证书安装到您选择的浏览器的根 CA 颁发机构中。这将防止浏览器将 ZAP 代理标记为恶意，并停留在
    **浏览器警告** 屏幕上。这是因为您没有在浏览器中安装受信任的 **CA 证书**。本节将重点介绍在 Google Chrome 浏览器中的测试。
- en: 'To install the ZAP certificate, navigate to the ZAP proxy, then go to **Tools**
    > **Options** > **Dynamic SSL Certificates** and save the certificate. Let’s look
    at it in the following screenshot:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 ZAP 证书，请导航到 ZAP 代理，然后进入 **工具** > **选项** > **动态 SSL 证书** 并保存证书。我们将在下一个截图中查看：
- en: '![Figure 1.28 – The Dynamic SSL Certificates tab](image/Figure_1.28_B18829.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.28 – 动态 SSL 证书标签](image/Figure_1.28_B18829.jpg)'
- en: Figure 1.28 – The Dynamic SSL Certificates tab
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.28 – 动态 SSL 证书标签
- en: 'Another option is to go to **http://localhost:8080** on your browser and click
    the **Download** button under **HTTPS Warnings Prevention**, as shown in *Figure
    1**.29*. This will allow you to download the certificate:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种方法是通过浏览器访问 **http://localhost:8080**，并点击 **HTTPS 警告预防** 下的 **下载** 按钮，如*图
    1.29*所示。这将允许您下载证书：
- en: "![Figu\uFEFFre 1.29 – The certificate download](image/Figure_1.29_B18829.jpg)"
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.29 – 证书下载](image/Figure_1.29_B18829.jpg)'
- en: Figure 1.29 – The certificate download
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.29 – 证书下载
- en: 'To install the ZAP certificate to Chrome, you will need to take the following
    steps:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 要将 ZAP 证书安装到 Chrome，请按照以下步骤操作：
- en: Go to the Chrome **Settings** page by clicking the three dots on the top right
    corner of the screen or by visiting **chrome://settings** and going to **Security**
    **and Privacy**.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击屏幕右上角的三个点，或访问 **chrome://settings**，并进入 **安全性和隐私** 页面来打开 Chrome 的 **设置**
    页面。
- en: Click on **Manage Certificates** under **Security**.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **管理证书**，位于 **安全性** 下。
- en: On a macOS computer, click on **File** and then **Import items**, and select
    the certificate file while you are on the **Certificates** tab to start the certificate
    installation process. On a Windows computer, in the **Intended purpose** box,
    select **<All>**, navigate to the **Trusted Root Certification Authorities** tab,
    click on **Import**, then **Next**. Select the certificate file and click **Next**.
    On this window, keep the default options and click on **Next**, and then click
    **Finish**.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 macOS 计算机上，点击 **文件**，然后点击 **导入项**，选择证书文件，进入 **证书** 标签页，开始证书安装过程。在 Windows
    计算机上，在 **预定用途** 框中选择 **<所有>**，进入 **受信任的根证书颁发机构** 标签，点击 **导入**，然后点击 **下一步**。选择证书文件并点击
    **下一步**。在此窗口中，保持默认选项并点击 **下一步**，然后点击 **完成**。
- en: 'To install ZAP CA to Firefox, follow these steps:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 要将 ZAP CA 安装到 Firefox，请按照以下步骤操作：
- en: Go to **Preferences**.
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入**偏好设置**。
- en: Open the **Advanced** tab.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 **高级** 标签。
- en: Open the **Cryptography/Certificates** tab.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开**加密/证书**标签页。
- en: Click **View Certificates**.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **查看证书**。
- en: Click the **Authorities** tab.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**受信任的机构**标签。
- en: Click **Import** and choose the saved **owasp_zap_root_ca.cer** file.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 **导入**，选择已保存的 **owasp_zap_root_ca.cer** 文件。
- en: In the wizard, choose to **Trust this certificate to identify websites** (check
    all the boxes).
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在向导中，选择**信任此证书以识别网站**（勾选所有框）。
- en: Finalize the wizard.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成向导。
- en: How it works...
  id: totrans-167
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理…
- en: Preparing the browser and certificate will allow you to quickly get testing
    on the application come start day versus wasting precious time having to configure
    network proxy settings or capturing web requests and responses.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 准备浏览器和证书将使您能够在应用程序开始测试的当天迅速开始测试，而不是浪费宝贵时间配置网络代理设置或捕获 Web 请求和响应。
- en: Testing the ZAP setup
  id: totrans-169
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试 ZAP 设置
- en: This recipe will help troubleshoot the connection to ZAP and verify that each
    step has been set up correctly.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 该操作步骤将帮助排查与 ZAP 的连接问题，并验证每个步骤是否已正确设置。
- en: Getting ready
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: In order to proceed with this recipe, you need to reboot your computer to ensure
    the installation process is complete and the tool is working properly.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 为了继续此操作步骤，您需要重新启动计算机以确保安装过程完成并且工具正常工作。
- en: How to do it...
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To ensure that ZAP has been set up correctly, follow these steps:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 为确保 ZAP 已正确设置，请按照以下步骤操作：
- en: 'On the Chrome browser, start ZAP, open the **Extensions** menu, and double
    click the **Use proxy 127.0.0.1:8080 for all URLs** option, as shown in the following
    screenshot:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Chrome 浏览器中，启动 ZAP，打开**扩展**菜单，然后双击**为所有 URL 使用代理 127.0.0.1:8080**选项，如下图所示：
- en: '![Figure 1.30 – Choosing the created proxy](image/Figure_1.30_B18829.jpg)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.30 – 选择已创建的代理](image/Figure_1.30_B18829.jpg)'
- en: Figure 1.30 – Choosing the created proxy
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.30 – 选择已创建的代理
- en: 'Navigate to [google.com](http://google.com). The first time you use ZAP after
    setting up the proxy and installing the certificate, you will see the **Welcome
    to the Zap HUD** message and/or the options to the right and left of the browser
    window, as shown in the following screenshot:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问 [google.com](http://google.com)。在设置代理并安装证书后首次使用 ZAP 时，您将看到**欢迎使用 ZAP HUD**消息和/或浏览器窗口右侧和左侧的选项，如下图所示：
- en: '![Figure 1.31 – ZAP HUD](image/Figure_1.31_B18829.jpg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![图 1.31 – ZAP HUD](image/Figure_1.31_B18829.jpg)'
- en: Figure 1.31 – ZAP HUD
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 图 1.31 – ZAP HUD
- en: How it works...
  id: totrans-181
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Setting up and testing OWASP ZAP is performed to help you determine whether
    any errors are occurring with its use and functionality and allows you to have
    a clean installation working when it comes to starting an assessment during the
    testing window (start/stop dates). There’s nothing worse than getting to the first
    day of testing and realizing that something is broken or not working.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 设置并测试 OWASP ZAP 是为了帮助您确定其使用和功能中是否存在错误，并确保在测试窗口（开始/停止日期）期间进行评估时能够拥有一个正常工作的干净安装环境。没有什么比在测试的第一天才发现某些功能损坏或无法使用更糟糕的事情了。
