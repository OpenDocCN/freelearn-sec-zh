- en: Installing Kali and the Lab Setup
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Kali 和实验室设置
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Lab architecture and considerations
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实验室架构和考虑事项
- en: Installing VirtualBox
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 VirtualBox
- en: Installing Kali on VirtualBox
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 VirtualBox 上安装 Kali
- en: Using Kali Linux from bootable media
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从可启动介质使用 Kali Linux
- en: Upgrading Kali Linux
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 升级 Kali Linux
- en: Understanding the advanced customization and optimization of Kali
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 理解 Kali 的高级定制和优化
- en: Installing Windows machines
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Windows 机器
- en: Installing Metasploitable
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Metasploitable
- en: Installing OWASP-BWA
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 OWASP-BWA
- en: Understanding hack me and other online resources
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解 hack me 和其他在线资源
- en: Introduction
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: In order to set the stage for the rest of this book and to help you reproduce
    the recipes and their output, I strongly recommend that you create a test environment
    where you can run various tools that are included with Kali Linux. In this chapter,
    we will be focusing on building our testing environment based on free or low-cost
    applications to minimize cost.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 为了为本书的其余部分奠定基础，并帮助你复现各个配方及其输出，我强烈建议你创建一个测试环境，在其中运行 Kali Linux 附带的各种工具。本章将重点介绍如何基于免费或低成本的应用程序来构建我们的测试环境，以尽量减少成本。
- en: Starting with installing the virtualization platform, VirtualBox, we will walk
    through a few common installation techniques for Kali Linux; you will also learn
    how to update and maintain your installation.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 从安装虚拟化平台 VirtualBox 开始，我们将介绍一些 Kali Linux 的常见安装技巧；你还将学习如何更新和维护你的安装。
- en: Lab architecture and considerations
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实验室架构和考虑事项
- en: In this section, we will discuss our lab design and provide some information
    that you can use to expand it in the future.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论我们的实验室设计，并提供一些信息，帮助你将来扩展实验室。
- en: As we begin to set up our lab, we want to take some time to discuss the lab
    setup and some of the considerations that we will take when using the lab. Some
    of these considerations are designed to make the lab more effective, while others
    are used for the protection of the networks our lab is connected to. We also want
    you to be in a position to easily expand or grow this network with other test
    machines as you master the Kali recipes that follow.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们开始设置实验室时，我们希望花些时间讨论实验室的设置和一些使用实验室时需要考虑的事项。部分考虑事项旨在提高实验室的效率，另一些则用于保护实验室连接的网络。我们还希望让你能够轻松扩展或发展这个网络，随着你掌握随后的
    Kali 配方，可以加入更多测试机器。
- en: How to do it...
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: In this section, we will be discussing general topics as opposed to specific
    recipes.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论一些通用话题，而非具体的配方。
- en: The hypervisor selection
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化管理程序选择
- en: Today, there are many different hypervisors that will allow you to run multiple
    virtual machines on a single physical machine. For our specific purposes, we have
    chosen to show you how to setup the initial lab in VirtualBox due to several compelling
    factors. It's free to use, has multi-platform support, and it's able to run within
    your main operating system. However, as we progress past the first chapter, we
    will be switching to VMware ESXi. This will not affect recipes in any way between
    using VirtualBox and VMware ESXi. Our main reason for switching is the amount
    of compute resources that are available to us in our dedicated lab. We have the
    ability to run many virtual machines at once, and we will have the ability to
    insert firewalls and other security devices between our Kali instance and our
    testing hosts, as needed. We also have the flexibility to create more complex
    environments.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，市面上有许多不同的虚拟化管理程序，可以让你在一台物理机上运行多个虚拟机。出于特定目的，我们选择在 VirtualBox 中展示如何设置初始实验室，原因有很多。它是免费的，支持多平台，且能够在你的主操作系统内运行。然而，随着我们进入本书的后续章节，我们将转向
    VMware ESXi。使用 VirtualBox 和 VMware ESXi 之间的配方不会受到影响。我们更换的主要原因是，在我们专用的实验室中可以获得更多计算资源。我们能够同时运行多个虚拟机，并且可以根据需要在
    Kali 实例和测试主机之间插入防火墙等安全设备。我们还拥有创建更复杂环境的灵活性。
- en: If, for any reason, you are looking to build a larger test network or have a
    different hypervisor of choice that better suits your purposes, feel free to use
    it, as we will assume you will be able to translate our instructions between the
    different hypervisors.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 如果由于任何原因你需要构建一个更大的测试网络，或者有一个更适合你需求的虚拟化管理程序，可以自由使用它，我们会假设你能够在不同的虚拟化管理程序之间翻译我们的操作指南。
- en: The hypervisor networking
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化管理程序的网络配置
- en: 'In our lab, we are going to be using two networks within VirtualBox: a NAT
    network and a host-only network. Our Kali box will be connected to both the networks,
    so it can communicate with devices on the internet, download updates, and get
    software packages as needed. Our target machines will only be connected to the
    host-only network. The host-only network can only talk within the host and among
    other devices connected to the host-only network. It cannot communicate through
    your Ethernet or wireless networks. This setup is extremely critical to our testing
    environment, as we do not ever want to expose our testing hosts to the outside
    world, as they are very vulnerable and will be hacked rather quickly.'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的实验室中，我们将在 VirtualBox 中使用两个网络：一个是 NAT 网络，另一个是主机专用网络。我们的 Kali 系统将连接到这两个网络，以便与互联网上的设备通信、下载更新和获取软件包。我们的目标机器只连接到主机专用网络。主机专用网络只能在主机内部及主机专用网络上连接的其他设备之间通信。它不能通过您的以太网或无线网络进行通信。这种设置对我们的测试环境非常关键，因为我们绝不希望将我们的测试主机暴露给外部世界，因为它们非常容易受到攻击。
- en: To further protect the networks that your lab is connected to, we would actually
    suggest disconnecting the virtual adapter of the Kali virtual machine that connects
    to the NAT network, unless specifically required for the recipe operation. This
    way, your network is protected from accidental exposures to any attacks you may
    be sourcing from Kali.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步保护您的实验室所连接的网络，我们建议实际上断开连接到 NAT 网络的 Kali 虚拟机的虚拟适配器，除非特别需要按照配方操作。这样，您的网络就可以免受来自
    Kali 的任何意外攻击的影响。
- en: Vulnerable workstations
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 可能存在漏洞的工作站
- en: One of the many questions frequently asked is why we soften machines or use
    machines that have vulnerabilities. The fact is that a properly patched, properly
    configured, and properly hardened machine is quite difficult to get into. Penetration
    testing is not trying to get through to hardened devices but looking specifically
    for those devices that have vulnerabilities. In a typical engagement, you may
    find only one or two machines that have vulnerabilities. You can then use these
    machines to gain a foothold into an environment to compromise other more hardened
    machines. If you start doing regular engagements as a penetration tester, you
    will be surprised by just how many machines you may be able to find that have
    vulnerabilities. This is especially true with the proliferation of low cost **Internet
    of Things** (**IoT**) devices such as internet connected cameras, thermostats,
    automation systems, and monitoring. These devices often run Linux-type embedded
    operating systems and are rarely patched and often overlooked. More importantly,
    they are often riddled with bugs and vulnerabilities that we can use for our purposes.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 经常被问及的一个问题是为什么我们软化机器或使用有漏洞的机器。事实是，一个正确打补丁、正确配置和正确加固的机器是非常难以进入的。渗透测试并不是试图进入加固设备，而是专门寻找那些有漏洞的设备。在典型的测试中，你可能只会找到一两台有漏洞的机器。你可以利用这些机器来进入一个环境，以便入侵其他更加加固的机器。如果你作为渗透测试人员开始进行定期测试，你会惊讶地发现有多少机器可能存在漏洞。这在低成本**物联网**（**IoT**）设备如连接到互联网的摄像头、恒温器、自动化系统和监控方面尤为明显。这些设备通常运行Linux类型的嵌入式操作系统，很少打补丁并且经常被忽视。更重要的是，它们通常充满了我们可以利用的漏洞和错误。
- en: Installing VirtualBox
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 VirtualBox
- en: To set the foundation for our lab, we will be using VirtualBox as a virtual
    hardware platform to host our images. This recipe will outline the steps necessary
    to do so. In the event that you wish to use an alternate virtualization platform,
    the same general principles will apply.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 为了建立我们实验室的基础，我们将使用 VirtualBox 作为虚拟硬件平台来托管我们的镜像。本文将概述完成此操作所需的步骤。如果您希望使用其他虚拟化平台，同样的基本原则也适用。
- en: When it comes to learning a new set of skills or sharpening the ones you already
    have, the importance of a testing environment cannot be overstated. It is imperative
    that you have the means to test against systems in a known state so that you can
    validate the results of your tests.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 当涉及到学习新技能或提升您已有技能时，测试环境的重要性不可高估。必须确保您有测试对系统在已知状态下的系统的手段，以便验证您测试的结果。
- en: One method of saving resources, both physical hardware and computing resources,
    is to utilize a virtual environment where your testing devices reside. One very
    popular example of a virtualization platform is Oracle's VirtualBox—a purpose
    build virtualization environment designed for use with x86 platforms that can
    host many virtual machines on one physical computer. This allows for the sharing
    of resources such as disk, RAM, CPU, and so on. Additionally, because VirtualBox
    supports importing and exporting virtual appliances, resources can be easily moved,
    shared, and so on.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 一种节省资源（包括物理硬件和计算资源）的方法是利用一个虚拟环境，您可以在其中测试设备。一个非常流行的虚拟化平台示例是Oracle的VirtualBox——这是一个专为x86平台设计的虚拟化环境，可以在一台物理计算机上托管许多虚拟机。这允许共享磁盘、RAM、CPU等资源。此外，由于VirtualBox支持导入和导出虚拟设备，资源可以轻松移动和共享等。
- en: Getting ready
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'To prepare for the use of VirtualBox for the remainder of this book, we will
    need to ensure that we have enough resources on our server to be able to run several
    of the virtual guests at the same time. The following chart highlights the amount
    of resources that each of our intended guest systems will require:'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 为了在本书的其余部分中使用VirtualBox，我们需要确保服务器上有足够的资源来同时运行几个虚拟客户系统。以下表格突出显示了我们打算的每个客户系统所需的资源量：
- en: '| Name | Disk required | Memory required | CPU required | Chapters used |'
  id: totrans-34
  prefs: []
  type: TYPE_TB
  zh: '| Name | Disk required | Memory required | CPU required | Chapters used |'
- en: '| Kali Linux | 80 GB | 8 GB | 2 | 1-10 |'
  id: totrans-35
  prefs: []
  type: TYPE_TB
  zh: '| Kali Linux | 80 GB | 8 GB | 2 | 1-10 |'
- en: '| Metasploitable | 65 GB | 4 GB | 1 | 1,2,4-7,10 |'
  id: totrans-36
  prefs: []
  type: TYPE_TB
  zh: '| Metasploitable | 65 GB | 4 GB | 1 | 1,2,4-7,10 |'
- en: '| Ubuntu 16.4 LTS | 15 GB | 2 Gb | 1 | 1,6,10 |'
  id: totrans-37
  prefs: []
  type: TYPE_TB
  zh: '| Ubuntu 16.4 LTS | 15 GB | 2 Gb | 1 | 1,6,10 |'
- en: '| Windows XP SP3 | 10 GB | 1 GB | 1 | 1,2,4-7,10 |'
  id: totrans-38
  prefs: []
  type: TYPE_TB
  zh: '| Windows XP SP3 | 10 GB | 1 GB | 1 | 1,2,4-7,10 |'
- en: '| Windows 7 - host 1 | 10 GB (thin) | 2 GB | 1 | 1-7 |'
  id: totrans-39
  prefs: []
  type: TYPE_TB
  zh: '| Windows 7 - host 1 | 10 GB (thin) | 2 GB | 1 | 1-7 |'
- en: '| Windows 7 - host 2 | 10 GB (thin) | 2 GB | 1 | 1-7 |'
  id: totrans-40
  prefs: []
  type: TYPE_TB
  zh: '| Windows 7 - host 2 | 10 GB (thin) | 2 GB | 1 | 1-7 |'
- en: '| Windows 2008 Server | 25 GB (thin) | 2 GB | 1 | 1-7 |'
  id: totrans-41
  prefs: []
  type: TYPE_TB
  zh: '| Windows 2008 Server | 25 GB (thin) | 2 GB | 1 | 1-7 |'
- en: '| OWASP-BWA | 10 GB | 1 GB | 1 | 1,9 |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| OWASP-BWA | 10 GB | 1 GB | 1 | 1,9 |'
- en: '| VulnOS | 32 GB | 1 GB | 1 | 1,7 |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| VulnOS | 32 GB | 1 GB | 1 | 1,7 |'
- en: How to do it...
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何实现…
- en: 'In this section, we will build out an environment that will allow you to perform
    security testing without the need for physical hardware:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将建立一个环境，让您能够进行安全测试，而无需使用物理硬件：
- en: 'Ensure that you have the following resources free on your host machine to support
    the system combinations mentioned in preceding list. In totality, you will need
    the following in addition to the resources needed by VirtualBox itself:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保主机机器上除了VirtualBox本身所需的资源外，还需要以下资源来支持上述系统组合：
- en: 5 CPU
  id: totrans-47
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 5 CPU
- en: 1500+ GB free disk space
  id: totrans-48
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1500+ GB 硬盘空间可用
- en: 16 GB free memory
  id: totrans-49
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 16 GB 内存空闲
- en: Download the appropriate version of VirtualBox for your lab environment from
    [www.virtualbox.org](https://www.virtualbox.org/).
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[www.virtualbox.org](https://www.virtualbox.org/)下载适合您实验环境的VirtualBox版本。
- en: It would also be good to familiarize yourself with the detailed options available
    from the VirtualBox manual, which can be found at [https://www.virtualbox.org/manual/ch01.html.](https://www.virtualbox.org/manual/ch01.html)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 也许熟悉一下VirtualBox手册中提供的详细选项会很有帮助，该手册可以在[https://www.virtualbox.org/manual/ch01.html.](https://www.virtualbox.org/manual/ch01.html)找到。
- en: 'Once you have downloaded the installer, locate it, and start the installation.
    As the application begins the installation, you will see the following dialog
    boxes. As of the time of writing this book, the version available was 5.1.8\.
    When you are greeted with the dialog box seen in the following figure, select
    Next:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载安装程序后，找到它并开始安装。当应用程序开始安装时，您将看到以下对话框。在撰写本书时，可用版本为5.1.8。当您看到下图中的对话框时，请选择“下一步”：
- en: '![](assets/9ac09c4b-67f9-4685-bd9a-f1236e725842.png) Initial installation screen'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9ac09c4b-67f9-4685-bd9a-f1236e725842.png) 初始安装屏幕'
- en: 'When given the option at the first Custom Setup screen, as seen in the following
    figure, leave the default options in place, and select Next:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在第一个自定义设置屏幕上获得选项时，请保持默认选项不变，然后选择“下一步”：
- en: '![](assets/2184951a-a381-4d13-82dd-51383f531f06.png) First custom setup screen'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/2184951a-a381-4d13-82dd-51383f531f06.png) 第一个自定义设置屏幕'
- en: 'At the second Custom Setup screen, as seen in the following figure, review
    the options and determine which are appropriate to your preferences, and select
    Next:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下图中看到的第二个自定义设置屏幕上，回顾选项并确定哪些选项符合您的偏好，然后选择“下一步”：
- en: '![](assets/123d80a2-f45a-4b58-885f-2a79a04425d2.png) Second custom setup screenIf
    you leave Register file associations, this will configure your system to use VirtualBox,
    to open virtual disk images automatically.'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/123d80a2-f45a-4b58-885f-2a79a04425d2.png)第二个自定义设置屏幕。如果勾选了“注册文件关联”（Register
    file associations），这将配置你的系统使用 VirtualBox 来自动打开虚拟磁盘镜像。'
- en: After the basic configuration options have been decided, the setup will now
    begin to make changes to the host computer. One such step is the installation
    of the dedicated virtual network adapters that allow VirtualBox to provide different
    options in regard to how your systems use networking. During the installation
    of these drivers, you may experience a brief loss of connectivity; so when prompted,
    acknowledge this fact by selecting Yes.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在基本配置选项决定后，设置将开始对主机计算机进行更改。一个步骤是安装专用的虚拟网络适配器，允许 VirtualBox 提供关于如何使用网络的不同选项。在这些驱动程序安装过程中，你可能会遇到短暂的连接中断；因此，当出现提示时，请选择“是”来确认这一点。
- en: Once ready to kick off the installation, select Install from the next dialog
    box, and wait until the installation process is complete.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当准备好开始安装时，从下一个对话框中选择“安装”（Install），并等待安装过程完成。
- en: During the installation process, you will be prompted to allow the installation
    of device drivers. These drivers are predominantly used for the virtual network
    devices. You may choose to trust device drivers signed by Oracle in the future,
    or leave that option unchecked.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装过程中，你将被提示允许安装设备驱动程序。这些驱动程序主要用于虚拟网络设备。你可以选择以后信任由 Oracle 签名的设备驱动程序，或保持此选项不选中。
- en: Once the installation is complete, you will be given the option to finish, or
    finish and then start VirtualBox.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，你将可以选择完成安装，或者选择完成后直接启动 VirtualBox。
- en: Depending on what other uses for this lab you may have in the future, this would
    be a good time to install the VirtualBox expansion set that includes support for
    the USB 2.0 and 3.0 USB controllers, host web camera, RDP services, and other
    features. It is recommended that you install these at this time before starting
    VirtualBox.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你未来可能在此实验室中的其他使用场景，现在是安装 VirtualBox 扩展包的好时机，该扩展包包括对 USB 2.0 和 3.0 控制器、主机网络摄像头、RDP
    服务和其他功能的支持。建议你在启动 VirtualBox 之前安装这些扩展包。
- en: 'Once you start VirtualBox, you will need to confirm the settings for network
    connectivity. You are going to want to find the Preferences item under the VirtualBoxmenu
    heading; now, select it. Then, select the network option along the top, and you
    will be presented with the following window:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 VirtualBox 后，你需要确认网络连接的设置。你需要找到虚拟机菜单中的“首选项”（Preferences）项，然后选择它。接着，选择顶部的网络选项，你将看到以下窗口：
- en: '![](assets/084ea215-b58a-4c68-abf1-f7eb146be787.png)VirtualBox preferences
    dialog - network'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/084ea215-b58a-4c68-abf1-f7eb146be787.png)VirtualBox 首选项对话框 - 网络'
- en: By default, NatNetwork should already be created for you. However, if one is
    not displayed, click on the + button on the top right to add one.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，NatNetwork 应该已经为你创建好了。如果没有显示，请点击右上角的 + 按钮来添加一个。
- en: In the next section, we will be creating networks that exist only on your PC.
    Although these networks will only be seen on your PC, we strongly recommend that
    you use subnets that do not coincide with any of the existing networks that you
    may have access to.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将创建仅存在于你电脑上的网络。尽管这些网络只会在你的电脑上显示，但我们强烈建议你使用与任何你可能访问的现有网络不冲突的子网。
- en: 'Once added, review the setup of the network by clicking on the wrench icon,
    on the lower-right part, and you will be presented with the following dialog box.
    You can modify the IP subnet as needed. Ensure that Enable Network is selected,
    and click on OK to continue:'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 添加后，通过点击右下角的扳手图标来查看网络的设置，你将看到以下对话框。你可以根据需要修改 IP 子网。确保选中“启用网络”（Enable Network），然后点击“确定”（OK）以继续：
- en: '![](assets/bff62510-03e0-4890-a2ce-7a958904034f.png)NatNetwork configuration
    dialog'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/bff62510-03e0-4890-a2ce-7a958904034f.png)NatNetwork 配置对话框'
- en: 'Create our test network. Select Host-only Networks. By default, no network
    is created, so click on the + icon in the upper right-hand corner to create the
    vboxnet0 network:'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建我们的测试网络。选择仅主机网络（Host-only Networks）。默认情况下，未创建任何网络，因此请点击右上角的 + 图标来创建 vboxnet0
    网络：
- en: '![](assets/52c1478a-9e6f-432b-a70f-0bbb76c149e6.png)Host-only networks dialog
    box'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/52c1478a-9e6f-432b-a70f-0bbb76c149e6.png)仅主机网络对话框'
- en: 'Ensure that the vboxnet0 interface is highlighted, and click on the wrench
    icon in the lower-right part of the screen. An IPv4 address will already be populated
    for you. If you are putting this into an existing lab network, or if this range
    is used in other places in your existing environment, feel free to designate a
    different network if necessary, as this will be your dirty network for testing
    purposes:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保 vboxnet0 接口已被选中，并点击屏幕右下角的扳手图标。IPv4 地址已经为你预填。如果你将其放入现有实验室网络，或者该地址范围在你现有环境中其他地方已被使用，可以根据需要指定不同的网络，因为这将是你的脏网络，用于测试目的：
- en: '![](assets/4d4bba63-ce58-4738-96b4-2c7037480812.png)Host-only network adapter
    dialog'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/4d4bba63-ce58-4738-96b4-2c7037480812.png)仅主机网络适配器对话框'
- en: Let's review and modify the DHCP Server section by selecting it. The defaults
    should be fine, but you can adjust them as you feel appropriate.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们通过选择 DHCP 服务器部分进行回顾和修改。默认设置应该没有问题，但你可以根据需要调整。
- en: Do not use the whole range for DHCP, as you may want to statically assign IP
    Addresses to servers on your dirty network.![](assets/1c903e6f-d5dd-445b-89f4-2a34eb9f674e.png)
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 不要将整个范围用于 DHCP，因为你可能希望为你的脏网络中的服务器静态分配 IP 地址。![](assets/1c903e6f-d5dd-445b-89f4-2a34eb9f674e.png)
- en: Once these steps have been completed, your VirtualBox environment is ready for
    the next section.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦完成这些步骤，你的 VirtualBox 环境就准备好进入下一部分。
- en: How it works...
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理...
- en: In this section, we will download and install the virtual compute environment,
    VirtualBox, to build the base of our test lab. We configured the basic network
    configurations and set up DHCP to help with dynamic host networking.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将下载并安装虚拟计算环境 VirtualBox，以构建我们的测试实验室基础。我们配置了基本的网络设置，并设置了 DHCP 以帮助动态主机网络连接。
- en: Installing Kali on VirtualBox
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 VirtualBox 上安装 Kali
- en: In this section, we will install Kali Linux into a virtual host in the VirtualBox
    environment, as we described in the previous section.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将在 VirtualBox 环境中为虚拟主机安装 Kali Linux，正如我们在上一节中描述的那样。
- en: Kali Linux (Kali) is based on the Debian operating system; and it is a self-contained
    environment that includes hundreds of tools that can be used for security auditing
    and testing purposes. It provides a platform, which you can use to build your
    penetration testing skills. It is one of the most widely used platforms for this
    purpose.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux（Kali）基于 Debian 操作系统；它是一个自包含的环境，包含了数百个可用于安全审计和测试目的的工具。它提供了一个平台，你可以利用这个平台来提升你的渗透测试技能。它是最广泛使用的渗透测试平台之一。
- en: Kali comes in a variety of different flavors – we will be using the full Kali
    install using the Gnome windows manager, inside an Oracle VirtualBox environment.
    However, Kali can be installed on any hypervisor; it can be non-destructively
    run from a USB or CD drive, on Raspberry Pi's, or other similar single board computers.
    It supports installation on both the Intel and Arm processors.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: Kali 提供多种不同版本——我们将使用完整的 Kali 安装，采用 Gnome 窗口管理器，并在 Oracle VirtualBox 环境中运行。然而，Kali
    可以安装在任何虚拟化平台上；它可以非破坏性地从 USB 或 CD 驱动器运行，也可以在 Raspberry Pi 或其他类似的单板计算机上运行。它支持在 Intel
    和 Arm 处理器上安装。
- en: When you first go to the Kali website and look at the downloads section ([www.kali.org/downloads](http://www.kali.org/downloads)),
    it may be a bit overwhelming with all the options at first, so let's run through
    some of them, so you understand the differences.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 当你第一次访问 Kali 官网并查看下载部分（[www.kali.org/downloads](http://www.kali.org/downloads)）时，可能会因为各种选项而感到有些不知所措，因此让我们逐一了解这些选项，帮助你理解它们之间的差异。
- en: With reference to the following image, you will note that the top two entries,
    the Kali 64 bit and the Kali 32 bit, are the default full install of the operating
    system using the Gnome windows manager.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 参考下图，你会注意到前两项，Kali 64 位和 Kali 32 位，是使用 Gnome 窗口管理器的操作系统默认完整安装版本。
- en: The next two entries denoted by lightare a minimal install of Kali with the
    Gnome Windows manager for some space constrained systems. You can use this along
    with manually installing only the needed tools for your specific purposes.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的两项由 light 指示，是为一些空间受限的系统提供的最小安装版本，包含 Gnome 窗口管理器。你可以使用此版本，并手动安装仅满足你特定需求的工具。
- en: The next four entries denoted with e17, Mate, Xfce, and LXDE are full installs
    of the Kali operating system, each using a different graphical windows manager
    for its desktop interface. If you happen to have an older device, consider running
    Kali with the XFCE interface, as it requires less resources than Gnome. I would
    only suggest these if you are familiar with them, and opt not to use the default
    Gnome windows manager or have a specific purpose to do so such as resource constraints.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来的四个条目，标注为 e17、Mate、Xfce 和 LXDE，都是 Kali 操作系统的完整安装版本，每个版本都使用不同的图形窗口管理器来处理桌面界面。如果您使用的是较旧的设备，建议使用带有
    XFCE 界面的 Kali，因为它比 Gnome 界面占用更少的资源。仅当您熟悉这些界面时，或者不想使用默认的 Gnome 窗口管理器，或出于特定目的（如资源限制）时，才建议使用这些版本。
- en: The last two entries, armhf and armel, are for those two flavors of the arm
    architecture with armhf supporting the older ARMv4 instruction set, and the armel
    supporting the new version 7 instruction set.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 最后两个条目，armhf 和 armel，分别用于这两种 ARM 架构，其中 armhf 支持旧版的 ARMv4 指令集，armel 支持新版的 ARMv7
    指令集。
- en: 'Please also note that the sha256 value is displayed. This allows you to validate
    that you have downloaded an unaltered version of the image:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，sha256 值会显示在此处。这可以帮助您验证是否下载了未被修改的镜像版本：
- en: '![](assets/3cc28e99-3d93-442e-bc8b-4c10bdd0f856.png)Kali.org download page,
    image section, as of May 2017'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3cc28e99-3d93-442e-bc8b-4c10bdd0f856.png)Kali.org 下载页面，图像部分，截止到
    2017 年 5 月'
- en: If you scroll down the page a bit more, you will see the section that allows
    you to download pre-prepared images that can automatically run without going through
    the setup process; in addition, it supports various hypervisors, or, in the case
    of ARM, has images and scripts for popular arm-based computers, such as Raspberry
    Pi's or other popular arm-based devices.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您稍微向下滚动页面，您会看到一个部分，允许您下载预先准备好的镜像，这些镜像可以自动运行而无需经过设置过程；此外，它支持各种虚拟机管理程序，或者对于
    ARM 架构，提供了适用于流行 ARM 设备（如树莓派等）的镜像和脚本。
- en: We will not be using these images as we want to walk you through a full installation
    and setup of Kali, so you have a better understanding of the process.![](assets/fbf8524e-de1d-49cd-9764-cc957303880f.png) Kali.org
    download page, hypervisor and arm section, as of May 2017
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我们不会使用这些图像，因为我们希望引导您完成 Kali 的完整安装和设置过程，这样您能更好地理解整个过程。![](assets/fbf8524e-de1d-49cd-9764-cc957303880f.png) Kali.org
    下载页面，虚拟机和 ARM 部分，截止到 2017 年 5 月
- en: Getting ready
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备开始
- en: 'Before installing Kali Linux, we need to ensure the minimum requirements are
    met:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装 Kali Linux 之前，我们需要确保满足最低要求：
- en: Your computer is connected to the internet
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的计算机已连接到互联网
- en: You have a minimum of 4 GB of RAM (8 GB is recommended)
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的计算机至少需要 4 GB 的内存（推荐 8 GB）
- en: You have a minimum of 25 GB hard drive space available (80 GB is recommended
    for [Chapter 3](efecc8fd-4746-4428-9662-854d418bcba2.xhtml), *Vulnerability Analysis*)
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要至少 25 GB 的硬盘空间（推荐 80 GB，用于[第 3 章](efecc8fd-4746-4428-9662-854d418bcba2.xhtml)，*漏洞分析*）
- en: VirtualBox installation is complete and currently running
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VirtualBox 安装完成并正在运行
- en: Download the appropriate Kali disk image from [https://www.kali.org/downloads/](https://www.kali.org/downloads/)
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从[https://www.kali.org/downloads/](https://www.kali.org/downloads/)下载适当的 Kali
    镜像文件
- en: For our purposes, we will be using the Kali 64 bit version. Please refer to
    the recipe introduction for more details about these options.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的目的，我们将使用 Kali 64 位版本。更多关于这些选项的细节，请参见配方介绍。
- en: How to do it...
  id: totrans-99
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin the process of installing Kali:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始安装 Kali 的过程：
- en: 'Click on New in the upper left-hand corner of the screen:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击屏幕左上角的“新建”：
- en: '![](assets/b641861c-65f8-48bc-a46b-407a345cb229.png)Main VirtualBox screen'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b641861c-65f8-48bc-a46b-407a345cb229.png)VirtualBox 主界面'
- en: 'Name your virtual machine `Kali Linux`, select type as Linux, and select the
    version as Linux 2.6 / 3.x / 4.x (64-bit). Press the Continue button when complete:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为虚拟机命名为 `Kali Linux`，选择类型为 Linux，并选择版本为 Linux 2.6 / 3.x / 4.x (64 位)。完成后点击“继续”按钮：
- en: '![](assets/c8cb7e7f-b089-4659-886c-e1c329a84ffb.png) Name and operating system
    selection screen'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/c8cb7e7f-b089-4659-886c-e1c329a84ffb.png) 名称和操作系统选择界面'
- en: 'Memory size: You will be presented with a slider for memory size, with the
    ability to manually enter a value: in the box type in `4096`. The 4 GB of memory
    will provide a smooth and responsive Kali install. Click on Continue.'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 内存大小：您将看到一个内存大小滑块，也可以手动输入数值：在框中输入 `4096`。4 GB 的内存将提供流畅且响应迅速的 Kali 安装体验。点击“继续”。
- en: 'Hard disk: select Create a virtual hard disk now and press on Create.'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 硬盘：选择“现在创建虚拟硬盘”并点击“创建”。
- en: You will note that on this screen, it will refer to a recommended hard disk
    size of 8 GB. Please note that this is not sufficient for a full Kali install,
    and we will be allowed to change it in a future step.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到在此界面上，会提到推荐的硬盘大小为 8 GB。请注意，这不足以进行完整的 Kali 安装，我们将在后续步骤中更改它。
- en: 'Hard disk file type: take the default file type of VDI (VirtualBox Disk Image).
    Select Continue.'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 硬盘文件类型：选择默认的 VDI（VirtualBox 磁盘映像）文件类型。点击继续。
- en: If you are interested in having easy compatibility with other hypervisors, you
    can select one of the other types available. **Virtual Hard Disk** (**VHD**) is
    widely used for Windows HyperV. **Virtual Machine Disk** (**VMD**) is widely used
    for VMware deployments.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望与其他虚拟化平台的兼容性更好，可以选择其他可用类型。**虚拟硬盘** (**VHD**) 被广泛用于 Windows HyperV。**虚拟机磁盘**
    (**VMD**) 被广泛用于 VMware 部署。
- en: Regarding the storage on physical hard disk, leave the default of Dynamically
    allocated and click on Continue.
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关于物理硬盘上的存储，保留默认的动态分配并点击继续。
- en: If you are running an older spinning disk versus a solid state drive and have
    the available space on the disk, the recommendation would be to use Fixed size.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是较旧的旋转磁盘而不是固态硬盘，并且磁盘上有足够的空间，建议选择固定大小。
- en: 'File location and size: leave the name and location with the default, and either
    move the slider or enter `25.00` GB directly into the box. Click on Create.'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 文件位置和大小：保留默认的名称和位置，调整滑块或直接在框中输入 `25.00` GB。点击创建。
- en: 25 GB is a nice size for the install plus some extras. If you have limited space
    requirements please see our discussions of the various Kali image and installation
    options for more guidance in the introduction section of this recipe.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 25 GB 是一个不错的大小，适合安装和一些额外内容。如果您的空间要求有限，请参阅本食谱简介部分中的 Kali 镜像和安装选项讨论，获取更多指导。
- en: 'Click on Kali Linux to highlight it; then click on Settings:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击 Kali Linux 以突出显示它；然后点击设置：
- en: '![](assets/83aa10f1-e32d-49c9-b649-a060a7d7dec1.png)VirtualBox main screen
    - with Kali Linux VM shown'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/83aa10f1-e32d-49c9-b649-a060a7d7dec1.png)VirtualBox 主界面 - 显示 Kali
    Linux 虚拟机'
- en: 'From here, we will select the Storage option. Originally under Controller:
    IDE it will say Empty.Click to highlight Empty. Click on the circular disk icon
    to the right of IDE Secondary Master. An option dialog will be brought up, and
    select Choose Virtual Optical Disk File. This will bring up a file manager dialog,
    which will allow you to find and select the Kali image you downloaded previously.
    Once completed, your screen should look similar to the following:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从这里，我们将选择存储选项。最初在控制器：IDE下会显示为空。点击突出显示“空”。点击 IDE Secondary Master 右侧的圆形磁盘图标，将弹出一个选项对话框，选择“选择虚拟光盘文件”。这将打开文件管理器对话框，允许您找到并选择之前下载的
    Kali 镜像。完成后，您的屏幕应该类似于以下内容：
- en: '![](assets/554f0dda-ef39-42d1-8224-cc7ec5a6df33.png) Kali Linux VirtualBox
    settings storage option'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/554f0dda-ef39-42d1-8224-cc7ec5a6df33.png)Kali Linux VirtualBox 设置存储选项'
- en: 'Click on Network and verify that Adapter 1 shows attached to NAT Network with
    the name NatNetwork:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击网络，并验证适配器 1 是否连接到 NAT 网络，并显示名称为 NatNetwork：
- en: '![](assets/d21b5489-9b6a-4649-a266-62b7b8126405.png)Kali Linux - network adapter
    1'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d21b5489-9b6a-4649-a266-62b7b8126405.png)Kali Linux - 网络适配器 1'
- en: 'Click on Adapter 2 and for Attached to select Host-only Adapter with the Name
    as vboxnet0, then click on OK:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击适配器 2，选择附加到主机专用适配器，名称为 vboxnet0，然后点击确定：
- en: '![](assets/acd87e21-10e5-48b7-a0d3-3053961276e1.png)Kali Linux - network adapter
    2'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/acd87e21-10e5-48b7-a0d3-3053961276e1.png)Kali Linux - 网络适配器 2'
- en: 'We are brought back to the main manager screen. Let''s click on Kali Linux
    to highlight it, and then click on Start:'
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将返回主管理界面。点击 Kali Linux 以突出显示它，然后点击启动：
- en: '![](assets/698e2b60-fe90-473f-9cc8-88991733b4d6.png)VirtualBox manager screen'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/698e2b60-fe90-473f-9cc8-88991733b4d6.png)VirtualBox 管理器界面'
- en: 'We will now be brought to the main Kali installation screen. Let''s click on
    Graphical install:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们将进入 Kali 的主安装界面。点击“图形安装”：
- en: '![](assets/5cbc102b-ea86-48f7-ab77-11b10b224d3c.png) Kali main installation
    screen'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/5cbc102b-ea86-48f7-ab77-11b10b224d3c.png)Kali 主安装界面'
- en: 'Select an appropriate language; for our use, we will select English and click
    on Continue:'
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的语言；对于我们的使用，选择英语并点击继续：
- en: '![](assets/d1ba2cd1-ad87-44a9-8f00-2e7ddbb7e246.png)Select a language screenYou
    may click on X on the boxes at the top, if any, as they are only informational.'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d1ba2cd1-ad87-44a9-8f00-2e7ddbb7e246.png)选择语言界面您可以点击顶部框中的 X（如果有的话），它们仅供参考。'
- en: Select the proper keymap for your region. For our purposes, we will select American
    English. Then, click on Continue. The VM will then start by loading installer
    components. This should only take a moment or two based on the performance of
    your device. It will also detect and connect to your network automatically.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适合您所在地区的键盘布局。对于我们来说，我们将选择美式英语。然后，点击继续。虚拟机将开始加载安装程序组件。这应该只需一两分钟，具体取决于您的设备性能。它还将自动检测并连接到您的网络。
- en: 'You will be brought to a screen where you must enter the hostname. Let''s simply
    call our install `Kali` and click on Continue:'
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将进入一个屏幕，要求您输入主机名。我们就简单地将安装命名为`Kali`并点击继续：
- en: '![](assets/7bbf35c1-6e68-4d5f-b420-94f3c95ce94a.png)Kali configure network
    screen'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/7bbf35c1-6e68-4d5f-b420-94f3c95ce94a.png) Kali 配置网络屏幕'
- en: The next screen will ask for your domain name. We will leave this blank, and
    simply click on Continue.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一个屏幕将要求输入您的域名。我们将留空此项，直接点击继续。
- en: Our next screen will ask us to enter a root password. Select a strong password.
    Enter it for a second time to validate it, and click on Continue. The install
    will continue through some further steps.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一屏幕将要求我们输入root密码。选择一个强密码，第二次输入以验证它，然后点击继续。安装将继续进行一些后续步骤。
- en: 'Once completed, you will be brought to a configure clock screen. Select the
    appropriate time zone; for our purposes, we will select Eastern, then click on
    Continue:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，您将进入一个配置时钟屏幕。选择适当的时区；在我们的示例中，我们选择东部时区，然后点击继续：
- en: '![](assets/8ad0872f-8e25-4076-80ff-b8c5db4064d6.png) Configure clock screen'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/8ad0872f-8e25-4076-80ff-b8c5db4064d6.png) 配置时钟屏幕'
- en: 'Partitioning disks: for simplicity, we will select Guided - use entire disk,and
    click on Continue:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 分区磁盘：为了简便，我们将选择引导式——使用整个磁盘，然后点击继续：
- en: '![](assets/c6d5cc88-1e47-4dd0-9afe-c97cf4b82fed.png) Partition disksIt''s important
    to note that, for our example here, we want to just keep it straightforward. When
    actually setting this up for production testing, I have a dedicated laptop and
    use a fully encrypted LVM. This would be a recommendation when you move from working
    in a sandbox and go to actual engagements; as a pen tester, you need to protect
    your work as well as your client''s information. Encryption, in that case, is
    paramount.'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/c6d5cc88-1e47-4dd0-9afe-c97cf4b82fed.png) 分区磁盘需要注意的是，在这里的示例中，我们只需保持简单。在实际设置生产测试时，我会使用一台专用笔记本，并使用完全加密的LVM。当你从沙盒环境转向实际工作时，这是一项推荐的做法；作为渗透测试员，你需要保护你的工作以及客户的信息。在这种情况下，加密是至关重要的。'
- en: You may also want to keep in mind crossing borders with encrypted laptops and
    what the border security rights are. In the US, even for US citizens, they can
    ask for your passwords to get into the machines, remove them from your immediate
    control, and confiscate them. You may want to take situations like this into consideration;
    you can ship that encrypted laptop to and from the destination as needed, or complete
    your reports prior to leaving, and wipe the hard drive. Remember that deleting
    files is not securely wiping information - you can use a tool such as **Darik's
    Boot and Nuke** (**DBAN**) [https://dban.org/](https://dban.org/) and use `5220.22-m`
    wipe methods.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能还需要考虑带有加密笔记本电脑跨境时，边境安全的相关规定。在美国，即便是美国公民，他们也可以要求你提供密码以进入机器，拿走它们并将其没收。您可能需要考虑类似的情况；您可以根据需要将加密笔记本电脑寄送到目的地，或者在离开前完成报告并清除硬盘。请记住，删除文件并不是安全地擦除信息——您可以使用**Darik的启动和清除工具**（**DBAN**）[https://dban.org/](https://dban.org/)并使用`5220.22-m`擦除方法。
- en: 'You will be brought to a partition disks screen for confirmation. Click on
    the disk to highlight it, and click on Continue:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将进入一个分区磁盘确认屏幕。点击磁盘以高亮显示它，然后点击继续：
- en: '![](assets/11d54cd3-b8e3-4410-8d14-09050417c599.png)Partition disksPlease note
    that as you are inside a virtual machine when it references, your disk will be
    erased; it is only talking about the virtual partition and not your disk. If you
    have decided to load this on your PC as the native operating system, it will erase
    the entire drive.'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/11d54cd3-b8e3-4410-8d14-09050417c599.png) 分区磁盘请注意，当你在虚拟机中操作时，提到的磁盘将被擦除；它只是在谈论虚拟分区，而不是你的实际磁盘。如果你决定将此操作系统加载到你的个人电脑上，它将擦除整个硬盘。'
- en: 'Select All files in one partition (recommended for new users) and click on
    Continue:'
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择所有文件在一个分区中（推荐给新用户），然后点击继续：
- en: '![](assets/a8a2a720-9790-4d06-9614-db983dfce3c4.png)Partition disks - screen
    2'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/a8a2a720-9790-4d06-9614-db983dfce3c4.png) 分区磁盘 - 屏幕2'
- en: 'Select Finish partitioning and write changes to disk. Click on Continue:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择完成分区并将更改写入磁盘。点击继续：
- en: '![](assets/ce241e09-13b2-4b01-bd38-8a3eb0a9b7be.png)Partition disks - screen
    3'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/ce241e09-13b2-4b01-bd38-8a3eb0a9b7be.png)分区磁盘 - 屏幕 3'
- en: 'Click on Yes to write changes to disk. Click on Continue:'
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“是”以将更改写入磁盘。点击继续：
- en: '![](assets/29479adc-659e-422c-b26d-2a76763f08d7.png) Partition disks - screen
    4Your system will begin installing further. This process will take several minutes,
    so please be patient.'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/29479adc-659e-422c-b26d-2a76763f08d7.png) 分区磁盘 - 屏幕 4您的系统将开始进一步安装。此过程将持续几分钟，请耐心等待。'
- en: Upon the completion of the install, you will be asked whether you want to use
    a Network Mirror for your package manager. Select Yes and click on Continue.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，系统将询问您是否要使用网络镜像作为软件包管理器。选择“是”并点击继续。
- en: You will be asked to enter a proxy server if needed. Please enter any required
    information (for most installs, you will leave this blank). Click on Continue.
    Kali will continue to install packages.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果需要，您将被要求输入代理服务器信息。请输入所需的信息（对于大多数安装，您可以留空此项）。点击继续。Kali 将继续安装软件包。
- en: Select **Yes** to install the GRUB boot loader and click on Continue.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**是**以安装 GRUB 引导加载程序，然后点击继续。
- en: 'Select the single drive listed to highlight it, and then click on Continue.This
    will finish the installation:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择列出的单个驱动器并高亮显示它，然后点击继续。这将完成安装：
- en: '![](assets/c5aa3b6e-6ed2-48ac-9ecf-c40a251db320.png)Install GRUB boot loader'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/c5aa3b6e-6ed2-48ac-9ecf-c40a251db320.png)安装 GRUB 引导加载程序'
- en: 'After a short time, you will be brought back to the Finish the Installation
    screen. This will ask to boot your computer to ensure that you have removed the
    installation media. Under most circumstances, VirtualBox or other hypervisors
    will honor the disk eject command issued when Kali finishes installation, but
    we need to be sure. At this point in time, do nothing:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 稍等片刻，您将回到“完成安装”屏幕。系统将提示您重启计算机，以确保您已移除安装介质。在大多数情况下，当 Kali 完成安装时，VirtualBox 或其他虚拟机管理程序会自动执行磁盘弹出命令，但我们需要确保这一点。此时请不要做任何操作：
- en: '![](assets/d83d5620-51f9-4c98-b070-b19ad37b8a6e.png) Kali Linux: finish the
    installation'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d83d5620-51f9-4c98-b070-b19ad37b8a6e.png) Kali Linux：完成安装'
- en: 'Move the installation windows to the side to expose the main VirtualBox manager
    screen. Click on to highlight the Kali Linux VM. Click on Settings, and next click
    on Storage.If under Controller: IDE, you do not see Empty, click on the install
    media shown to highlight it. Click on the icon at the far right that looks like
    a disk, and select Remove Disk from Virtual Drive.Click on OK:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将安装窗口移到一边，露出主 VirtualBox 管理器屏幕。点击以高亮显示 Kali Linux 虚拟机。点击设置，然后点击存储。如果在控制器：IDE
    下看不到 Empty，点击所显示的安装介质以高亮显示它。点击最右侧的磁盘图标，选择从虚拟驱动器中移除磁盘。点击确定：
- en: '![](assets/f0b7db91-1337-4320-8c55-50f603bfd936.png) VirtualBox manager'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/f0b7db91-1337-4320-8c55-50f603bfd936.png) VirtualBox 管理器'
- en: 'Go back to the Kali Installation screen, and now click on Continue. It will
    finish a couple items up, and reboot the virtual machine bringing you to the login
    screen:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回 Kali 安装屏幕，点击继续。系统将完成剩余项，并重启虚拟机，带您进入登录界面：
- en: '![](assets/d8db07ca-1054-43ce-b785-53bacd770cd4.png)Kali Linux finish the installationRemember
    that when logging into the system, your username is `root` and the password that
    you created during installation.'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d8db07ca-1054-43ce-b785-53bacd770cd4.png)Kali Linux 完成安装记住，当登录系统时，您的用户名是
    `root`，密码是您在安装过程中创建的密码。'
- en: Using Kali Linux from bootable media
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 Kali Linux 启动媒体
- en: As you will see in the pages that follow, there are a tremendous number of uses
    for Kali Linux, and for these uses, it is not always practical to dedicate a device
    to one particular use case, as this would be a tremendous waste of resources.
    To address this, you can use the Kali Linux installation ISO downloaded in the
    previous section as a live CD as well; or you can maintain persistence with a
    live USB drive with persistence (with or without Linux Unified Key Setup encryption).
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 如您将在后续页面看到的那样，Kali Linux 有很多用途，对于这些用途，通常不适合将设备专门分配给某一特定用途，因为这将是资源的巨大浪费。为了解决这个问题，您可以将前一部分下载的
    Kali Linux 安装 ISO 作为 Live CD 使用；或者您可以使用具有持久化的 Live USB 驱动器（支持或不支持 Linux 统一密钥设置加密）。
- en: We will show you how to create the Live USB (no persistence, no history maintained).
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将向您展示如何创建 Live USB（无持久化，无历史记录）。
- en: Additional options such as live USB with persistence, live USB with encrypted
    persistence, and custom rolled Kali Linux ISO (which can be incorporated into
    the bootable USB options) can be found on the Kali Linux documentation wiki at
    [http://docs.kali.org](http://docs.kali.org) under the section called 02\. Kali
    Linux Live.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 诸如带持久性的实时 USB、带加密持久性的实时 USB 以及定制版 Kali Linux ISO（可加入可启动 USB 选项）等附加选项可以在 Kali
    Linux 文档 wiki 上找到，网址为 [http://docs.kali.org](http://docs.kali.org)，位于 02\. Kali
    Linux Live 部分。
- en: Getting ready
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'In order to be able to complete this section successfully, you will need the
    following:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 为了能够成功完成此部分，您将需要以下内容：
- en: USB Drive (8 GB or larger)
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB 驱动器（8 GB 或更大）
- en: USB disk imager (Win32DiskImager)
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB 磁盘映像工具（Win32DiskImager）
- en: How to do it...
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s begin the process of creating a bootable Kali Linux USB device:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们开始创建可启动 Kali Linux USB 设备的过程：
- en: Starting with the Kali Linux ISO file we downloaded in the earlier recipe, installing
    VirtualBox, we will use Win32DiskImager ([https://sourceforge.net/projects/win32diskimager/](https://sourceforge.net/projects/win32diskimager/))
    to create a bootable USB using the ISO. Download and install Win32DiskImager.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从我们之前在安装 VirtualBox 时下载的 Kali Linux ISO 文件开始，我们将使用 Win32DiskImager ([https://sourceforge.net/projects/win32diskimager/](https://sourceforge.net/projects/win32diskimager/))
    来创建一个可启动的 USB。下载并安装 Win32DiskImager。
- en: Once installed, launch Win32DiskImager.
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，启动 Win32DiskImager。
- en: In order to format the USB drive and to write the raw image, Win32DiskImager
    needs admin permissions to run. You will need to give permission for it to run
    when the user access control dialog is presented.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 为了格式化 USB 驱动器并写入原始映像，Win32DiskImager 需要管理员权限才能运行。当用户访问控制对话框弹出时，您需要授予其运行权限。
- en: Win32DiskImager will use IMG files, but we will tell it to use an ISO file as
    the source. From the application screen, click on the File Open button, and when
    presented with the File Open box, change the file filter to *.* in the lower right,
    and navigate to the Kali Linux ISO file.
  id: totrans-170
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Win32DiskImager 将使用 IMG 文件，但我们将告诉它使用 ISO 文件作为源。在应用程序界面上，点击文件打开（File Open）按钮，当弹出文件打开框时，右下角将文件过滤器更改为
    *.*，并导航到 Kali Linux ISO 文件。
- en: 'Select the drive letter of your USB device, and click on Write:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 USB 设备的驱动器字母，然后点击写入（Write）：
- en: '![](assets/6d2cd64e-1e22-4fa2-898c-70f5c2644091.png)FW32 DiskImager example'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6d2cd64e-1e22-4fa2-898c-70f5c2644091.png)FW32 DiskImager 示例'
- en: Once the image has been written to the USB drive, you will be able to boot from
    this device on machines that support the USB bootable media. In this configuration,
    you now have a bootable USB drive that will from which the Kali Linux operating
    system will boot, as if it were installed onto the local disk. Across reboots,
    you will lose any documents you may have created. If you choose it, you can create
    an additional partition on the USB drive that will be persistent, and keep files
    and documents you may wish to keep. The step-by-step instructions on how to extend
    this functionality can be found on the Kali Linux documentation wiki at [http://docs.kali.org](http://docs.kali.org)
    under 02\. Kali Linux Live.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦映像写入 USB 驱动器，您将能够在支持 USB 启动媒体的机器上从该设备启动。在这种配置下，您现在拥有一个可启动的 USB 驱动器，从中将启动 Kali
    Linux 操作系统，就像它已安装到本地磁盘上一样。在重新启动后，您将丢失任何您可能创建的文档。如果您选择这样做，您可以在 USB 驱动器上创建一个额外的分区，该分区将保持持久性，并保留您可能希望保存的文件和文档。如何扩展此功能的逐步说明可以在
    Kali Linux 文档 wiki 上找到，网址是 [http://docs.kali.org](http://docs.kali.org)，位于 02\.
    Kali Linux Live 部分。
- en: Upgrading Kali Linux
  id: totrans-174
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 升级 Kali Linux
- en: Now that we have a base install of Kali, let's run through any updates and upgrades
    required. This is something you want to do periodically with the system, to make
    sure you are using the most up-to-date information.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们有了 Kali 的基础安装，让我们执行任何需要的更新和升级。您需要定期执行此操作，以确保您使用的是最新的信息。
- en: Getting ready
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before you start, ensure the following prerequisites:'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，请确保满足以下先决条件：
- en: Your computer is connected to the internet
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的计算机已连接到互联网
- en: Your installation of Kali is running
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的 Kali 安装正在运行
- en: You are logged in as root
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您已作为 root 用户登录
- en: How to do it...
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To bring an existing Kali Linux installation up to date, you will do the following:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 要将现有的 Kali Linux 安装更新到最新版本，您需要执行以下操作：
- en: 'From the main Kali desktop, let''s click on the terminal icon in the upper-left
    part of the screen:'
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从主 Kali 桌面上，让我们点击屏幕左上角的终端图标：
- en: '![](assets/6e9076dd-d3aa-44db-ab39-105b09766b48.png) Kali Linux desktopSince
    we are already logged in as the root, we will not require any elevation of privileges
    using the `su` or `sudo` commands.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6e9076dd-d3aa-44db-ab39-105b09766b48.png)Kali Linux 桌面由于我们已经以 root
    用户登录，因此不需要使用 `su` 或 `sudo` 命令来提升权限。'
- en: 'From the Command Prompt, type this:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令提示符下，输入以下内容：
- en: '[PRE0]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](assets/9c15d565-e4d4-4d31-8cba-58a0b468f4c2.png) Kali Linux Command PromptAfter
    the initial installation, this process could take several minutes to complete.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/9c15d565-e4d4-4d31-8cba-58a0b468f4c2.png)Kali Linux 命令提示符安装完成后，这个过程可能需要几分钟才能完成。'
- en: 'Once complete, we will actually upgrade the system by entering the following
    at the Command Prompt:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，我们将在命令提示符下输入以下内容来实际升级系统：
- en: '[PRE1]'
  id: totrans-189
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](assets/c8224362-5c6c-42e8-a852-da95884d0e49.png)Kali Linux Command Prompt'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/c8224362-5c6c-42e8-a852-da95884d0e49.png)Kali Linux 命令提示符'
- en: 'After a minute or two, you will get a screen explaining what will be upgraded
    and what needs to be installed for the upgrades to occur. When ready to continue,
    type `Y` and press *Enter*:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 过一两分钟后，您将看到一个屏幕，解释将升级的内容以及需要安装哪些升级项。准备好继续时，输入`Y`并按*Enter*：
- en: '![](assets/13c8d7a7-e90c-4a14-b11e-c7e9635c9943.png)Kali linux Command PromptThis
    process will take quite some time to complete, so please be patient as your system
    upgrades.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/13c8d7a7-e90c-4a14-b11e-c7e9635c9943.png)Kali linux 命令提示符该过程将花费相当长的时间，因此请耐心等待，直到您的系统完成升级。'
- en: 'Once complete, we will reboot the system to ensure we have a fresh running
    environment. To continue, type this:'
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，我们将重启系统，以确保拥有一个全新的运行环境。继续操作时，输入以下内容：
- en: '[PRE2]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](assets/3bd375c8-7454-43bd-a0a5-29e17b54065b.png)Kali Linux Command Prompt'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/3bd375c8-7454-43bd-a0a5-29e17b54065b.png)Kali Linux 命令提示符'
- en: There's more..
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'During the upgrade, you may get prompted for a couple of items such as following:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 在升级过程中，您可能会被提示几个项目，如下所示：
- en: 'apt-listchanges: news section'
  id: totrans-198
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: apt-listchanges：新闻部分
- en: 'You may get paused at an apt-listchanges: news section, and you will be presented
    with a : sign at the bottom; you can use your arrow keys to read the notice, and
    then just press *q* to quit and continue.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '您可能会在 apt-listchanges: 新闻部分暂停，底部会显示一个冒号（:）；您可以使用箭头键阅读通知，然后按 *q* 退出并继续。'
- en: The configuring macchanger
  id: totrans-200
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置 macchanger
- en: 'You can set up the system to change the mac automatically per boot. For our
    testing purposes, it''s not required; however, if you are doing this in a live
    environment, you may want to configure it. Select No:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以设置系统在每次启动时自动更改 MAC 地址。对于我们的测试目的，这不是必需的；但是，如果您在实际环境中进行此操作，可能需要配置它。选择否：
- en: '![](assets/71c950ec-49e3-4876-856f-ab8283336383.png)Configuring macchanger
    dialog box'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/71c950ec-49e3-4876-856f-ab8283336383.png)配置 macchanger 对话框'
- en: The service restart
  id: totrans-203
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 服务重启
- en: 'You maybe asked to restart services automatically to ease upgrades; select
    Yes:'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 系统可能会提示您自动重启服务以便简化升级；选择是：
- en: '![](assets/be933699-5a3a-4405-810f-02b3df8d05ad.png)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/be933699-5a3a-4405-810f-02b3df8d05ad.png)'
- en: Understanding the advanced customization and optimization of Kali
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 Kali 的高级自定义和优化
- en: Now that we have our Kali Linux virtual machine installed and updated, let's
    do a bit of customization.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经安装并更新了 Kali Linux 虚拟机，让我们做一些自定义设置。
- en: Getting ready
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'Before you start, ensure the following prerequisites:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，请确保以下前提条件：
- en: Your computer is connected to the internet
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的计算机已连接到互联网
- en: Your installation of Kali is running
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您的 Kali 安装正在运行
- en: You are logged in as root
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您已以 root 用户登录
- en: How to do it...
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: There are several customization and advanced settings that we can perform.
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以执行几个自定义和高级设置。
- en: Upgrading the Linux kernel
  id: totrans-215
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 升级 Linux 内核
- en: 'To update the Linux kernel, you will do the following:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更新 Linux 内核，您需要执行以下操作：
- en: 'Open a terminal window by selecting its icon on the left tool bar, and enter
    the following:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择左侧工具栏中的图标打开终端窗口，并输入以下内容：
- en: '[PRE3]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Follow the prompts to complete the installation, and reboot the virtual machine
    when complete.
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按照提示完成安装，安装完成后重启虚拟机。
- en: Removing unneeded packages
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 移除不需要的软件包
- en: 'To remove unneeded packages, we will do the following:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 为了移除不需要的软件包，我们将执行以下操作：
- en: 'Open a terminal window by selecting its icon on the left tool bar, and enter
    the following:'
  id: totrans-222
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过选择左侧工具栏中的图标打开终端窗口，并输入以下内容：
- en: '[PRE4]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Adjusting or disabling the screen lock
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 调整或禁用屏幕锁定
- en: 'During the use of this book, you may find yourself leaving your system to run
    commands or in between sections. During this time, the screen may lock and force
    you to login in more frequently than you would prefer. To change this behavior,
    do the following:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用本书的过程中，您可能会离开系统运行命令或在章节之间切换。在此期间，屏幕可能会锁定，并迫使您比期望的更频繁地登录。要更改这种行为，请按照以下步骤操作：
- en: 'In the upper right-hand corner of the screen, click on the down arrow, which
    will provide various pieces of information about the current state of the computer.
    In the lower left-hand corner of that box, click on the settings icon:'
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕的右上角点击下拉箭头，它将提供有关当前计算机状态的各种信息。在该框的左下角，点击设置图标：
- en: '![](assets/b8395902-219f-4ba0-83af-a0cd5a007a98.png)System status box'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b8395902-219f-4ba0-83af-a0cd5a007a98.png)系统状态框'
- en: 'From the All Settings screen, click on the purple privacy icon in the first
    row to display the privacy dialog box, then select the Screen Lock entry:'
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“所有设置”屏幕中，点击第一行的紫色隐私图标以显示隐私对话框，然后选择“屏幕锁定”条目：
- en: '![](assets/84984b0a-30c6-4422-9ad4-2a8cae9832c5.png) Privacy box'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/84984b0a-30c6-4422-9ad4-2a8cae9832c5.png)隐私框'
- en: 'Adjust the settings as desired; in the following example I have set the timer
    to 1 hour:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据需要调整设置；在以下示例中，我将计时器设置为1小时：
- en: '![](assets/0bca6781-f215-4e95-b041-39b8ae35cf77.png)Screen Lock'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/0bca6781-f215-4e95-b041-39b8ae35cf77.png)屏幕锁定'
- en: Finish by clicking on the Xs at the top until you are back at the main screen.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，点击顶部的“X”按钮，直到返回主屏幕。
- en: Correcting the Ethernet interface configuration
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 修正以太网接口配置
- en: 'Since only one interface can be on at a time, we will set up networking as
    follows:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 由于每次只能启用一个接口，我们将按以下方式设置网络：
- en: 'In the upper right-hand corner of the screen, click on the down arrow, which
    will provide various pieces of information about the current state of the computer.
    In the lower left-hand corner of that box, click on the settings icon:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕的右上角点击下拉箭头，它将提供有关当前计算机状态的各种信息。在该框的左下角，点击设置图标：
- en: '![](assets/7bd164cd-a409-482c-a4fd-484b4f55af70.png)System status box'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/7bd164cd-a409-482c-a4fd-484b4f55af70.png)系统状态框'
- en: 'Next to one of the interfaces, select the arrow icon, which will expose another
    level of menus. Click on Wired Settings:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在其中一个接口旁边，选择箭头图标，展开另一级菜单。点击“有线设置”：
- en: '![](assets/6bca4193-b868-4bbf-9856-68632fffbf14.png)System status box'
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6bca4193-b868-4bbf-9856-68632fffbf14.png)系统状态框'
- en: 'Select Add Profile from the bottom:'
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从底部选择“添加配置文件”：
- en: '![](assets/21693fc9-4cc0-4f69-845a-1813229f22b3.png)Network window'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/21693fc9-4cc0-4f69-845a-1813229f22b3.png)网络窗口'
- en: 'From the New Profile window, select Identity on the left; and for Name, enter
    `Host-Only Network`:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“新建配置文件”窗口中，选择左侧的“身份”，然后在“名称”处输入`Host-Only Network`：
- en: '![](assets/342346cd-188b-49ce-8b18-41f27a0118cc.png)New Profile window'
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/342346cd-188b-49ce-8b18-41f27a0118cc.png)新建配置文件窗口'
- en: 'In the left column, click on IPv4 and scroll all the way to the bottom and
    put a check in the box labeled Use this connection only for resources on its network,
    and then click on Add:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧列中，点击IPv4，滚动到底部，勾选“仅将此连接用于其网络上的资源”框，然后点击添加：
- en: '![](assets/6e86fb2c-6037-47ce-9ac4-1762571f5628.png)New Profile window'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6e86fb2c-6037-47ce-9ac4-1762571f5628.png)新建配置文件窗口'
- en: 'Assign eth1 to the host-only network that we just created by clicking on eth1
    to highlight it. Click on host-only network. Verify that eth0 is assigned to the
    wired connection network by clicking on eth1.You should now be able to have both
    interfaces enabled simultaneously:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过点击eth1以突出显示它，将eth1分配给我们刚刚创建的仅主机网络。点击“仅主机网络”。通过点击eth1确认eth0已分配给有线连接网络。现在，您应该能够同时启用两个接口：
- en: '![](assets/d735027f-70cf-494d-a945-56b93df948dd.png)Network window'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d735027f-70cf-494d-a945-56b93df948dd.png)网络窗口'
- en: Connecting and disconnecting Ethernet interfaces
  id: totrans-247
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 连接和断开以太网接口
- en: 'Kali Linux makes it easy to manage network connections using network manager.
    This is how you will connect and disconnect network interfaces:'
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux使得通过网络管理器轻松管理网络连接。这就是您将如何连接和断开网络接口：
- en: 'In the upper right-hand corner of the screen, click on the down arrow, which
    will provide various pieces of information about the current state of the computer:'
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕的右上角点击下拉箭头，它将提供有关当前计算机状态的各种信息：
- en: '![](assets/b465ae64-6ca2-47b4-83d1-aa831eda8f3c.png)System status box'
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b465ae64-6ca2-47b4-83d1-aa831eda8f3c.png)系统状态框'
- en: You will see entries for both your eth0 and eth1 interfaces. If you have followed
    our guide, the eth0 network is connected to the NAT network and allows access
    to the internet and networks outside of your virtual machine. The eth1 interface
    is the host-only network, which connects to your test machine. You can toggle
    these on and off as required.
  id: totrans-251
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到你的 eth0 和 eth1 接口的条目。如果你按照我们的指南操作，eth0 网络连接到 NAT 网络，可以访问虚拟机外部的互联网和网络。eth1
    接口是仅主机网络，连接到你的测试机器。你可以根据需要切换这些接口的开关。
- en: Installing Windows machines
  id: totrans-252
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Windows 系统
- en: Creating a lab environment where we can safely perform security testing is key
    to being able to develop a repeatable set of skills. In this section, we will
    cover the installation and configuration of Windows desktop machines, as well
    as an active directory server.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 创建一个我们可以安全进行安全测试的实验环境是能够培养可重复技能集的关键。在本节中，我们将介绍 Windows 桌面机器的安装和配置，以及活动目录服务器的设置。
- en: As the Microsoft Windows operating system is the most commonly employed operating
    system, we will be looking to test the windows platform with Kali Linux in our
    lab.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Microsoft Windows 操作系统是最常用的操作系统，我们将在实验室中测试 Windows 平台与 Kali Linux 的配合。
- en: Getting ready
  id: totrans-255
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To complete this section, you will need the following:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节内容，你将需要以下资料：
- en: Installation media for Windows 7 and Windows server 2008. Due to licensing restrictions,
    we are unable to provide installation media for Microsoft software products.
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows 7 和 Windows Server 2008 的安装媒体。由于许可限制，我们无法提供 Microsoft 软件产品的安装媒体。
- en: These versions are preferable as they are old enough to have well-documented
    vulnerabilities and low resource requirements. Since Windows 7 for desktops and
    Windows server 2008 are most commonly seen as of the time of the writing of this
    book, we recommend these be used for your test lab, and will be used as examples
    in this book.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 这些版本较为适宜，因为它们足够旧，拥有完善的漏洞文档和较低的资源需求。由于 Windows 7 桌面版和 Windows Server 2008 在本书写作时最为常见，我们建议在测试实验室中使用这些版本，并将在本书中作为示例。
- en: A virtual machine platform such as VirtualBox which we configured in previous
    steps.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如同我们在前面步骤中配置的虚拟机平台，例如 VirtualBox。
- en: 'Starting from your VirtualBox interface, select the New button from the upper-left
    corner to create a new virtual host for Windows to be installed into. You will
    need to use a system template that matches the version of Windows you are going
    to be installing:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从你的 VirtualBox 界面开始，选择左上角的“新建”按钮，创建一个新的虚拟主机以安装 Windows。你需要使用与将要安装的 Windows 版本匹配的系统模板：
- en: '![](assets/98c55077-4947-46c7-8ecf-375ed2786f19.png)Create new virtual machine'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/98c55077-4947-46c7-8ecf-375ed2786f19.png)创建新的虚拟机'
- en: Since this machine will be for testing only, assign it 1 or 2 gigabytes of memory,
    and use the default values for all of the remaining options by clicking on Next
    until you reach the end of the configuration section.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于此机器仅用于测试，请为其分配 1 或 2 GB 的内存，并通过点击“下一步”直到完成配置部分，使用所有剩余选项的默认值。
- en: Once the initial virtual host has been configured, you will need to go back
    into the settings to tell the virtual host to boot from the installation media.
    Right-click on the virtual system that you just created and go to settings. Once
    in the settings dialog window, select Storage from the menu on the left, highlight
    the topmost controller device, click on the Add Storage Attachment button, and
    select Add Optical Drive.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦初始虚拟主机配置完成，你需要进入设置界面，告知虚拟主机从安装媒体启动。右击你刚创建的虚拟系统，进入设置。进入设置对话框后，从左侧菜单中选择“存储”，高亮显示最上方的控制器设备，点击“添加存储附件”按钮，并选择“添加光驱”。
- en: From the next dialog box, select Use Existing when asked whether you would like
    to leave the storage option empty. When prompted, navigate to your Windows installation
    media, and click on Open; then complete the configuration session by clicking
    on OK.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个对话框中，当询问是否希望留空存储选项时，选择“使用现有”。当系统提示时，导航到你的 Windows 安装媒体并点击“打开”；然后通过点击“确定”完成配置过程。
- en: Start your new virtual machine by clicking on the parentheses start button.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击括号内的启动按钮，启动你的新虚拟机。
- en: From this point, you will follow the default operating system installation process
    specific to the version of Windows you have selected. When given the option of
    installing additional services, use only the default options selected.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从这一点开始，您将按照所选 Windows 版本的默认操作系统安装过程进行操作。当给出安装附加服务的选项时，仅使用默认选择的选项。
- en: During installation, we will name our systems something easy to remember. We
    will name the desktop clients `Windows Desktop 1` and `Windows Desktop 2`, and
    the server `AD Server`.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程中，我们将给系统起个容易记住的名字。我们将桌面客户端命名为 `Windows Desktop 1` 和 `Windows Desktop 2`，服务器命名为
    `AD Server`。
- en: 'When prompted to configure the Windows update services, ensure that you do
    not enable the automatic installation of Windows updates:'
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当系统提示您配置 Windows 更新服务时，请确保不要启用 Windows 更新的自动安装：
- en: '![](assets/6a12a112-3238-4c09-a635-97bfec3fab34.png) De-selection of automatic
    Windows updatesOn certain platforms, you may select the option to download but
    not install updates if you so choose. This will allow you to evaluate the security
    of the system, both prior to and after the installation of Windows updates. You
    maybe asked to create a password for the administrative user. If this is the case,
    then create a user and password that will be easy to remember and refer to in
    future chapters.'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/6a12a112-3238-4c09-a635-97bfec3fab34.png) 取消选择自动 Windows 更新在某些平台上，您可以选择仅下载但不安装更新。如果您选择此选项，这将允许您评估系统的安全性，无论是在安装
    Windows 更新之前还是之后。系统可能会要求您为管理员用户创建密码。如果是这种情况，请创建一个容易记住的用户名和密码，方便在后续章节中引用。'
- en: Once you have completed the installation of Windows 7, reboot the machine, and
    login when presented with the login screen.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成 Windows 7 安装后，重启机器，并在登录屏幕出现时登录。
- en: Once logged in, change the machine name to `Win7_Desktop_1`, and reboot.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，将机器名称更改为 `Win7_Desktop_1`，并重新启动。
- en: Go into the virtual host settings, and ensure that the network adapter is assigned
    to the host-only network that we created earlier in this section.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 进入虚拟主机设置，确保网络适配器已分配到我们在本节中创建的仅主机网络。
- en: Now that the machine has been properly configured, we will clone it to create
    a second instance of Windows 7 desktop.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在机器已经正确配置，我们将克隆它以创建第二个 Windows 7 桌面实例。
- en: Cloning of machines makes it very easy to create a gold image and working copies
    from this image. It is different than snapshots, which create point-in-time references
    that can be rolled back to if need be.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 机器的克隆使得从该镜像创建金像和工作副本变得非常容易。它不同于快照，后者创建的是时间点参考，可以在需要时回滚。
- en: 'To create a clone of the Windows desktop machine, you will need to power it
    up using the Start option. Once started, do not log into the machine; but rather
    from the desktop view, from the top menu bar, select Machine | Take Snapshot...
    to start the snapshot creation process:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要创建 Windows 桌面机器的克隆，您需要使用“启动”选项启动它。启动后，不要登录机器；而是从桌面视图的顶部菜单栏中选择“机器 | 创建快照...”以启动快照创建过程：
- en: '![](assets/403e1fad-d041-477d-bc37-2a6a2cc7954e.png)Create snapshot'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/403e1fad-d041-477d-bc37-2a6a2cc7954e.png)创建快照'
- en: 'In the next screen, you will be given the opportunity to name and provide details
    about the purpose of this snapshot. Since it is likely that we will be returning
    to this state frequently, name it `Initial Installation`, and in the description,
    indicate that this is a clean Windows build, and that the snapshot was taken before
    AD domain membership:'
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕中，您将有机会为此快照命名并提供关于此快照目的的详细信息。由于我们很可能会频繁返回此状态，请将其命名为 `Initial Installation`，并在描述中注明这是一个干净的
    Windows 安装，并且快照是在加入 AD 域之前创建的：
- en: '![](assets/d4b8caac-ed55-4184-9edf-8cf262571410.png)Creating a VirtualBox snapshot'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/d4b8caac-ed55-4184-9edf-8cf262571410.png)创建 VirtualBox 快照'
- en: VirtualBox will now generate a snapshot. Depending on the system, this may take
    several minutes. Once complete, power down the system using the power buttons
    on the lower-right part of the login screen – do not login at this time.
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VirtualBox 将开始生成一个快照。根据系统的不同，这可能需要几分钟。完成后，使用登录屏幕右下角的电源按钮关闭系统——此时不要登录。
- en: 'Now that the initial host has been set up, we will need to create the clone
    of this device. To do so, right-click on Windows 7 Desktop 1, and select Clone...
    from the dropdown menu:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在初始主机已经设置完毕，我们需要创建该设备的克隆。为此，右键点击 Windows 7 Desktop 1，选择下拉菜单中的“克隆...”：
- en: '![](assets/770c1844-2828-4245-bfe7-f549a84f93b0.png)Start cloning process'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/770c1844-2828-4245-bfe7-f549a84f93b0.png)开始克隆过程'
- en: When prompted, name this `Windows Desktop 2`, and select the option to reinitialize
    the MAC address of all available cards. Click on Next.
  id: totrans-282
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当提示时，将其命名为`Windows Desktop 2`，并选择重新初始化所有可用网卡的MAC地址的选项。点击“下一步”。
- en: When given the option to do so, select Full Clone as the clone type, and click
    on Next.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当有选项时，选择“完全克隆”作为克隆类型，然后点击“下一步”。
- en: Since we will be creating a new snapshot of this system in a subsequent step,
    choose the option for Current Machine State as the options for snapshots, and
    click on Next. This will start the cloning process, which may take several minutes.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 由于我们将在后续步骤中创建此系统的新快照，因此选择“当前机器状态”作为快照选项，然后点击“下一步”。这将开始克隆过程，可能需要几分钟。
- en: Once completed, we will start this host as well as we did with the first Windows
    7 Desktop 1, but this time, we will log in when prompted to do so.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，我们将像启动第一个Windows 7桌面1时那样启动此主机，但这次我们将在提示时登录。
- en: Once logged in, you will need to change the name of the machine to `Win7_Desktop_2`.
    Allow the machine to reboot.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录后，你需要将机器名称更改为`Win7_Desktop_2`。允许机器重启。
- en: Once back at the login screen, create a snapshot as we described earlier.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 回到登录界面后，按照之前的描述创建一个快照。
- en: We will now install the Windows 2008 server in the same manner we did the Windows
    7 desktops, ensuring that the device is assigned to the host-only network that
    we created in a previous section.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将以与配置Windows 7桌面相同的方式安装Windows 2008服务器，确保设备分配到我们在之前部分中创建的仅主机网络。
- en: 'With all the default options chosen, install Windows 2008, and log in for the
    first time. The first time you log in, you will be presented with the Initial
    Configuration Tasks tool. From this tool, configure only the following:'
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择所有默认选项，安装Windows 2008，并第一次登录。第一次登录时，你将看到初始配置任务工具。通过此工具，只配置以下内容：
- en: '| Set time zone | Set to your timezone |'
  id: totrans-290
  prefs: []
  type: TYPE_TB
  zh: '| 设置时区 | 设置为你的时区 |'
- en: '| Configure networking | Set the IP information as follows: IP Address: `192.168.56.10`'
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: '| 配置网络 | 设置IP信息如下：IP地址：`192.168.56.10` |'
- en: 'Subnet Mask: `255.255.255.0`'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 子网掩码：`255.255.255.0`
- en: 'Gateway: `192.168.56.1`'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 网关：`192.168.56.1`
- en: 'DNS Server: `192.268.56.1` |'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: DNS服务器：`192.268.56.1` |
- en: '| Computer name and domain | Computer name: `AD-Server` Leave set to workgroup
    for now |'
  id: totrans-295
  prefs: []
  type: TYPE_TB
  zh: '| 计算机名称和域 | 计算机名称：`AD-Server` 目前保持为工作组 |'
- en: 'Initial Windows server configuration:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 初始Windows服务器配置：
- en: Reboot the server after these options are set, and log in. The Initial Configuration
    Tasks wizard will open again. Scroll down to the section named Add Roles; here
    we will add the DNS and DHCP roles to this server.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在设置完这些选项后重启服务器并登录。初始配置任务向导将再次打开。向下滚动到“添加角色”部分；在这里我们将向此服务器添加DNS和DHCP角色。
- en: 'Select all the default options, except the following:'
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择所有默认选项，除了以下内容：
- en: '| **Page** | **Option** | **Setting** |'
  id: totrans-299
  prefs: []
  type: TYPE_TB
  zh: '| **页面** | **选项** | **设置** |'
- en: '| Specify IPv4 DNS Server Settings | Parent Domain | `kalicookbook.local` |'
  id: totrans-300
  prefs: []
  type: TYPE_TB
  zh: '| 指定IPv4 DNS服务器设置 | 上级域 | `kalicookbook.local` |'
- en: '| Add of Edit DHCP Scopes (click on ADD) | Scope Name | Lab |'
  id: totrans-301
  prefs: []
  type: TYPE_TB
  zh: '| 添加或编辑DHCP作用域（点击添加） | 作用域名称 | Lab |'
- en: '|  | Starting IP Address | `192.168.56.100` |'
  id: totrans-302
  prefs: []
  type: TYPE_TB
  zh: '|  | 起始IP地址 | `192.168.56.100` |'
- en: '|  | Ending IP Address | `192.168.56.150` |'
  id: totrans-303
  prefs: []
  type: TYPE_TB
  zh: '|  | 结束IP地址 | `192.168.56.150` |'
- en: '|  | Default Gateway | `192.168.56.1` |'
  id: totrans-304
  prefs: []
  type: TYPE_TB
  zh: '|  | 默认网关 | `192.168.56.1` |'
- en: '| Configure IPv8 Stateless Mode | Select the DHCPv6 Stateless Mode... | Disable
    DHCPv6 stateless mode for this server |'
  id: totrans-305
  prefs: []
  type: TYPE_TB
  zh: '| 配置IPv8无状态模式 | 选择DHCPv6无状态模式... | 禁用此服务器的DHCPv6无状态模式 |'
- en: Initial role configuration
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 初始角色配置
- en: Once all the preceding has been completed, reboot the server, and log into each
    of the desktops to make sure that they get an IP address from the AD server and
    that you can ping each host by their IP addresses. We will configure DNS in a
    later step.
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成上述所有步骤后，重启服务器，并登录到每台桌面电脑，确保它们从AD服务器获取到IP地址，并且你可以通过IP地址ping通每台主机。我们将在后续步骤中配置DNS。
- en: After you have confirmed that network connectivity between your hosts is working
    properly, close all open windows, and create a snapshot as we have done in the
    past.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在确认主机之间的网络连接正常后，关闭所有打开的窗口，并像之前一样创建一个快照。
- en: With the desktop machines created and functioning, you will need to enable basic
    services on the AD server. After logging into the server, you will be presented
    with the Initial Configuration Tasks wizard again. Once presented, scroll down
    to Customize this Server section, and click on Add Role.
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建并使桌面机器正常运行后，你需要在AD服务器上启用基本服务。登录到服务器后，初始配置任务向导将再次显示。此时，向下滚动到“自定义此服务器”部分，点击“添加角色”。
- en: 'In the section called Select Server Roles, select and install the following:'
  id: totrans-310
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择服务器角色”部分，选择并安装以下内容：
- en: File services
  id: totrans-311
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件服务
- en: Remote desktop services
  id: totrans-312
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 远程桌面服务
- en: Web server (IIS)
  id: totrans-313
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web服务器（IIS）
- en: If you are prompted to include dependencies, accept, and continue.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 如果系统提示需要包括依赖项，请接受并继续。
- en: 'As you progress, you will need to select certain options for each of the roles
    added previously:'
  id: totrans-315
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程中，你需要为之前添加的每个角色选择某些选项：
- en: 'Remote desktop services:'
  id: totrans-316
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 远程桌面服务：
- en: Select only Remote Desktop Session Host and click on Next
  id: totrans-317
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅选择远程桌面会话主机，点击“下一步”。
- en: Select Do Note Require Network Level Authentication
  id: totrans-318
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择“不要求网络级身份验证”
- en: Select Configure Later to defer the licensing of the remote desktop until a
    later date (120 days max)
  id: totrans-319
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择“稍后配置”以将远程桌面许可推迟到稍后的日期（最多120天）。
- en: 'Permitted user groups: Leave administrators in place and continue'
  id: totrans-320
  prefs:
  - PREF_IND
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 允许的用户组：保持管理员不变并继续
- en: Leave all the remaining options as the default and continue. Reboot when prompted
    to do so, and log in once more; you will automatically return to the Add Roles
    wizard. Confirm that the installation was successful.
  id: totrans-321
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保持所有其他选项为默认，并继续。根据提示重启系统，并再次登录；你将自动返回到添加角色向导。确认安装成功。
- en: Return to the Add Role wizard, and select this time to install Active Directory
    Domain Services. Click on Install AD DS Anyway (not recommended) when presented
    with the dialog box confirming installation on a domain controller, and accept
    any dependencies that maybe required. Continue through the installation process
    with the remaining default options. When complete, select Close.
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 返回添加角色向导，选择这次安装活动目录域服务。遇到确认在域控制器上安装时的对话框时，点击“无论如何安装AD DS”（不推荐），并接受任何可能需要的依赖项。继续安装过程，保持其余默认选项。完成后，选择“关闭”。
- en: 'In the left menu, select Active Directory Domain Services; and in the right
    pane, select Run the Active Directory Domain Services Installation Wizard (dcpromo.exe).
    As you go through the wizard, select the default options, except for the following:'
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中选择“活动目录域服务”；在右侧窗格中选择“运行活动目录域服务安装向导（dcpromo.exe）”。在向导中选择默认选项，除了以下内容：
- en: 'Choose a deployment configuration: Create new domain in a new forest'
  id: totrans-324
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择部署配置：在新林中创建新域
- en: 'FQDN of the forest root domain: `kalicookbook.local`'
  id: totrans-325
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 林根域的FQDN：`kalicookbook.local`
- en: 'Forest functional model: Windows server 2008 R2'
  id: totrans-326
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 林功能级别：Windows Server 2008 R2
- en: Once prompted, reboot. Confirm there are no errors
  id: totrans-327
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 系统提示时，重启并确认没有错误。
- en: You will now need to log into each of the Windows 7 desktops and join them to
    the `kalicookbook.local` domain.
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，你需要登录每台Windows 7桌面计算机，并将它们加入到`kalicookbook.local`域。
- en: Log into each machine and ensure that Windows updates are disabled. Make sure
    the Windows firewall is also disabled.
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 登录每台计算机，确保禁用Windows更新。确保Windows防火墙也已禁用。
- en: Create snapshots of each to give us a foundation to work from as we progress
    through this book. Snapshots will allow us to go back to pre-determined points
    in time.
  id: totrans-330
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建每台计算机的快照，为我们在本书中逐步操作提供基础。快照将允许我们回到预定的时间点。
- en: Installing Metasploitable
  id: totrans-331
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Metasploitable
- en: Metasploitable is a key component of our testing environment. It is based on
    the Ubuntu Linux operating system and is made specifically exploitable for penetration
    testing purposes. This VM should never be exposed directly to the internet, and,
    for our purposes, we will use the host-only network to bind to.
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploitable是我们测试环境的关键组成部分。它基于Ubuntu Linux操作系统，专门为渗透测试目的而设计。此虚拟机不应直接暴露在互联网上，为了我们的目的，我们将使用仅主机网络进行绑定。
- en: Getting ready
  id: totrans-333
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Before you start, ensure the following prerequisites:'
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前，请确保以下先决条件：
- en: The VirtualBox hypervisor is running
  id: totrans-335
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VirtualBox虚拟化程序正在运行
- en: The Kali Linux VM is shut down
  id: totrans-336
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux虚拟机已关闭
- en: You download the Metasploitable image from [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从[https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)下载Metasploitable镜像。
- en: Take note that the default username, and the password is `msfadmin` for both
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 请注意，默认的用户名和密码均为`msfadmin`。
- en: How to do it...
  id: totrans-339
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The installation of Metasploitable is done in the following manner:'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploitable的安装按照以下方式进行：
- en: Start by unzipping the Metasploitable ZIP (at the time of publication this was
    `metasploitable-linux-2.0.0.zip`) file that you previously downloaded.
  id: totrans-341
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先解压您之前下载的 Metasploitable ZIP 文件（发布时该文件为 `metasploitable-linux-2.0.0.zip`）。
- en: Change the directory name that was extracted to `metasploitable`.
  id: totrans-342
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将解压后的目录名称更改为 `metasploitable`。
- en: Find where your main VirtualBox storage is.
  id: totrans-343
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到您的主要 VirtualBox 存储位置。
- en: Windows default: `c:\users\<username>\virtualBox VMs`
  id: totrans-344
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows 默认路径：`c:\users\<username>\virtualBox VMs`
- en: Mac default: `/users/<username>/VirtualBox VMs`
  id: totrans-345
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Mac 默认路径：`/users/<username>/VirtualBox VMs`
- en: You should see a directory under the main path for the Kali Linux VM you installed
    earlier.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该能在主路径下看到之前安装的 Kali Linux 虚拟机的目录。
- en: 'In this directory, create a new folder called `Virtual Disks`. This will make
    the following path:'
  id: totrans-347
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在该目录中，创建一个名为 `Virtual Disks` 的新文件夹。这将形成以下路径：
- en: '`...\VirtualBox VMs\Virtual Disks.`'
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '`...\VirtualBox VMs\Virtual Disks.`'
- en: Move the `metasploitable` directory that was created when you unzipped the file
    earlier under the `\Virtual Disks\` directory you created.
  id: totrans-349
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您在解压文件时创建的 `metasploitable` 目录移动到您之前创建的 `\Virtual Disks\` 目录下。
- en: Open the VirtualBox manager application, and select New from the top-left corner.
    To quicken the installation if we are not in expert mode, let's select it by clicking
    on Expert Mode at the bottom.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 VirtualBox 管理器应用程序，并在左上角选择“新建”。为了加速安装，如果我们不是专家模式，请点击底部的“专家模式”。
- en: You will know you are in Expert Mode if you see an option for Guided Mode at
    the bottom.![](assets/dd84d3cf-b01b-45fd-874c-5f2e93150854.png)
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 如果看到底部有“引导模式”选项，则表示您处于专家模式！ ![](assets/dd84d3cf-b01b-45fd-874c-5f2e93150854.png)
- en: Let's name our VM `Metasploitable`. Select Type as Linux and Version as Linux
    2.6 / 3.x / 4.x (64-bit), enter `2048` for the memory size.
  id: totrans-352
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将虚拟机命名为 `Metasploitable`。选择类型为 Linux，版本为 Linux 2.6 / 3.x / 4.x (64-bit)，并为内存大小输入
    `2048`。
- en: Select Use an existing virtual hard disk file, and click on the file icon on
    the right; and browse for the `metasploitable.vmdk` file under the directory from
    the prior step; then click on Create.
  id: totrans-353
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择“使用现有虚拟硬盘文件”，点击右侧的文件图标，浏览到上一步中提到的目录下，找到 `metasploitable.vmdk` 文件，然后点击“创建”。
- en: We will now be brought back to the main VM VirtualBox manager screen. Click
    on the `Metasploitable` VM to highlight it, and then click on Settings.
  id: totrans-354
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们将返回到 VirtualBox 管理器的主界面。点击 `Metasploitable` 虚拟机以高亮显示它，然后点击“设置”。
- en: 'Click on Network and, for Adapter 1, select the Host-only Adapter and the Name
    as vboxnet0; lastly, click on OK:'
  id: totrans-355
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“网络”，在适配器 1 处选择“仅主机适配器”并将名称设置为 vboxnet0；最后，点击确定：
- en: '![](assets/4db944a8-91b0-40e8-a498-d233dbcf30d7.png)Metasploitable - network
    dialog'
  id: totrans-356
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/4db944a8-91b0-40e8-a498-d233dbcf30d7.png)Metasploitable - 网络对话框'
- en: You will now be brought back to the main VirtualBox manager screen. Click on
    Metasplotable to highlight it and click on Start.
  id: totrans-357
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将返回到 VirtualBox 管理器的主界面。点击 Metasploitable 高亮显示它并点击“启动”。
- en: 'Once the VM is started, you will be brought to the main login screen:'
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦虚拟机启动，您将看到主登录屏幕：
- en: '![](assets/69698116-c63f-41c1-a1c3-8d19b98b472f.png) Metasploitable main login
    screenTo shut down this VM, you have to log in and issue the command, `sudo shutdown
    -h now`. Although the VM itself shuts down, it will not end the VirtualBox session.
    You must select the Red X at the top of the screen. This will provide a dialog
    box; select the radio button Power off the machine and click on Ok.'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/69698116-c63f-41c1-a1c3-8d19b98b472f.png) Metasploitable 主登录屏幕要关闭此虚拟机，您必须登录并输入命令
    `sudo shutdown -h now`。尽管虚拟机本身会关闭，但它不会结束 VirtualBox 会话。您必须选择屏幕顶部的红色 X 按钮，这将弹出一个对话框；选择“关机”单选按钮并点击确定。'
- en: Installing OWASP-BWA
  id: totrans-360
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 OWASP-BWA
- en: The **Open Web Application Security Project** (**OWASP**), is a global community
    that focuses on security awareness and the development of secure applications.
    While this may be thought of as a single application or platform, OWASP is actually
    a collection of projects that can focus on any number of aspects of applications
    security. For this recipe, we will focus on the OWASP **Broken Web Application** (**BWA**)
    project to provide us with a standardized platform for the testing of our tools
    in later chapters.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: '**开放式 Web 应用安全项目** (**OWASP**) 是一个全球社区，专注于安全意识和安全应用的开发。虽然这可能被认为是一个单一的应用程序或平台，但
    OWASP 实际上是一个项目集合，涉及应用程序安全的各个方面。在本节中，我们将专注于 OWASP **破损的 Web 应用** (**BWA**) 项目，为我们提供一个标准化平台，用于后续章节中工具的测试。'
- en: Getting ready
  id: totrans-362
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'To install the OWASP-BWA image, we will need to do the following:'
  id: totrans-363
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装 OWASP-BWA 映像，我们需要执行以下操作：
- en: Download the latest version of OWASP-BWA in compressed form from [https://sourceforge.net/projects/owaspbwa/](https://sourceforge.net/projects/owaspbwa/)
  id: totrans-364
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 [https://sourceforge.net/projects/owaspbwa/](https://sourceforge.net/projects/owaspbwa/)
    下载最新版本的压缩文件 OWASP-BWA。
- en: Have VirtualBox installed and configured
  id: totrans-365
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 已安装并配置 VirtualBox
- en: How to do it...
  id: totrans-366
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To install OWASP-BWA into our VirtualBox environment, we will do the following:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 要将 OWASP-BWA 安装到我们的 VirtualBox 环境中，我们将执行以下操作：
- en: Unzip the ZIP file containing the OWASP-BWA files into a location you will reference
    in the next few steps.
  id: totrans-368
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压包含 OWASP-BWA 文件的 ZIP 文件到您将在接下来的步骤中引用的目录。
- en: From the console of VirtualBox, on the upper left, we will select the New icon
    to begin the creation of a new virtual machine.
  id: totrans-369
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 VirtualBox 的控制台中，点击左上角的“新建”图标开始创建新虚拟机。
- en: We will name our new virtual machine `OWASP-BWA`, and define it as a 64 bit
    Ubuntu Linux system:![](assets/a29a7d39-f16b-486d-92c6-9c5cd576d401.png)Creating
    a virtual machine for OWASP-BWA
  id: totrans-370
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们将新虚拟机命名为 `OWASP-BWA`，并定义为 64 位 Ubuntu Linux 系统：![](assets/a29a7d39-f16b-486d-92c6-9c5cd576d401.png)为
    OWASP-BWA 创建虚拟机
- en: Leave the default memory allocation as 1024 MB, and click Next.
  id: totrans-371
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保留默认内存分配为 1024 MB，点击“下一步”。
- en: 'You will now select Use existing virtual hard disk and navigate to the directory
    where you unpacked OWASP-BWA. From that directory, select the following and click
    Create:'
  id: totrans-372
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您需要选择“使用现有虚拟硬盘”并导航到您解压 OWASP-BWA 的目录。从该目录中，选择以下内容并点击“创建”：
- en: '![](assets/b8d7ae07-6ca8-4cb6-ae7e-787a27ea98e8.png)Selection of OWASP-BWA
    virtual disk'
  id: totrans-373
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/b8d7ae07-6ca8-4cb6-ae7e-787a27ea98e8.png)选择 OWASP-BWA 虚拟磁盘'
- en: 'Once you have created the virtual machine, we will need to make sure that the
    correct network interface has been designated. Right-click on on our new host
    on the left, and select Settings. Navigate to Network and ensure that the Adapter
    1 is attached to the Host-only Adapter, and that the other adapters are not enabled:'
  id: totrans-374
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建完虚拟机后，我们需要确保已指定正确的网络接口。右键点击左侧的新主机，选择“设置”。导航到“网络”，确保适配器 1 连接到“仅主机适配器”，并且其他适配器没有启用：
- en: '![](assets/159a7e0d-1f60-46e1-995b-aa2b730bb2fd.png)Designating the network
    adapter for OWASP-BWA in VirtualBox'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/159a7e0d-1f60-46e1-995b-aa2b730bb2fd.png)在 VirtualBox 中为 OWASP-BWA
    指定网络适配器'
- en: Once complete, start the new virtual machine and ensure that it boots properly.
  id: totrans-376
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，启动新的虚拟机并确保它能够正常启动。
- en: It is very likely that fsck will run when first started due to the length of
    time since last run. You can allow this to complete to ensure there is no observed
    disk corruption - it only takes a few minutes.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 由于上次运行时间较长，fsck 很可能会在首次启动时运行。您可以允许其完成，以确保没有磁盘损坏问题——这个过程只需要几分钟。
- en: Once fully booted, login as `root` with the password `owaspbwa`.
  id: totrans-378
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完全启动后，以 `root` 用户登录，密码为 `owaspbwa`。
- en: Ensure that you are receiving an IP address from DHCP by issuing `ifconfig eth0`
    from the command line.
  id: totrans-379
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在命令行中执行 `ifconfig eth0`，确保您从 DHCP 获得了 IP 地址。
- en: 'Open a web browser, and navigate it to the IP address of the OWASP-BWA guest.
    Ensure that you are able to see the different projects within OWASP-BWA. If you
    are able to see the following web page, you have successfully configured OWASP-BWA:'
  id: totrans-380
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器，导航到 OWASP-BWA 客户机的 IP 地址。确保您能够看到 OWASP-BWA 中的不同项目。如果您能够看到以下网页，说明您已成功配置
    OWASP-BWA：
- en: '![](assets/66d8421f-ede6-4cd5-8f31-341e4f40b749.png)Confirmation of services
    running on OWASP-BWA'
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: '![](assets/66d8421f-ede6-4cd5-8f31-341e4f40b749.png)确认 OWASP-BWA 上运行的服务'
- en: Understanding hack me and other online resources
  id: totrans-382
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解 hack me 和其他在线资源
- en: 'There are several other resources that can be accessed either online or installed
    in VirtualBox that you can use to hone your penetration testing skills. The following
    list contains few resources you may want to explore as a supplement to the exercises
    in this book:'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: 还有其他一些可以在线访问或安装到 VirtualBox 中的资源，您可以利用它们来磨练您的渗透测试技能。以下是一些您可能想要探索的资源，作为本书练习的补充：
- en: '| hack.me | Easy to advanced challenges | [https://hack.me/](https://hack.me/)
    |'
  id: totrans-384
  prefs: []
  type: TYPE_TB
  zh: '| hack.me | 从简单到高级的挑战 | [https://hack.me/](https://hack.me/) |'
- en: '| Hack this site | Easy to advanced challenges | [https://www.hackthissite.org/](https://www.hackthissite.org/)
    |'
  id: totrans-385
  prefs: []
  type: TYPE_TB
  zh: '| Hack this site | 从简单到高级的挑战 | [https://www.hackthissite.org/](https://www.hackthissite.org/)
    |'
- en: '| Vulnerable by design | Easy to advanced challenges | [https://www.vulnhub.com/](https://www.vulnhub.com/)
    |'
  id: totrans-386
  prefs: []
  type: TYPE_TB
  zh: '| Vulnerable by design | 从简单到高级的挑战 | [https://www.vulnhub.com/](https://www.vulnhub.com/)
    |'
- en: '| Bee-Box | Vulnerable web sites | [https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/)
    |'
  id: totrans-387
  prefs: []
  type: TYPE_TB
  zh: '| Bee-Box | 易受攻击的免费网站 | [https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/)
    |'
- en: '| Moth | Vulnerable web applications | [http://www.bonsai-sec.com/en/research/moth.php](http://www.bonsai-sec.com/en/research/moth.php)
    |'
  id: totrans-388
  prefs: []
  type: TYPE_TB
  zh: '| Moth | 易受攻击的Web应用 | [http://www.bonsai-sec.com/en/research/moth.php](http://www.bonsai-sec.com/en/research/moth.php)
    |'
- en: '| RasPwn | Vulnerable Raspberry Pi image | [http://raspwn.org/](http://raspwn.org/)
    |'
  id: totrans-389
  prefs: []
  type: TYPE_TB
  zh: '| RasPwn | 易受攻击的树莓派镜像 | [http://raspwn.org/](http://raspwn.org/) |'
- en: '| OWASP-BWA | OWASP broken web application | [https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project](https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project)
    |'
  id: totrans-390
  prefs: []
  type: TYPE_TB
  zh: '| OWASP-BWA | OWASP破损Web应用程序 | [https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project](https://www.owasp.org/index.php/OWASP_Broken_Web_Applications_Project)
    |'
- en: '| Hackfest 2016 Sedna | Medium difficulty - root access | [https://www.vulnhub.com/entry/hackfest2016-sedna,181/](https://www.vulnhub.com/entry/hackfest2016-sedna,181/)
    |'
  id: totrans-391
  prefs: []
  type: TYPE_TB
  zh: '| Hackfest 2016 Sedna | 中等难度 - root访问 | [https://www.vulnhub.com/entry/hackfest2016-sedna,181/](https://www.vulnhub.com/entry/hackfest2016-sedna,181/)
    |'
- en: '| Hackfest 2016 Quaoar | Easy machine to own | [https://www.vulnhub.com/entry/hackfest2016-quaoar,180/](https://www.vulnhub.com/entry/hackfest2016-quaoar,180/)
    |'
  id: totrans-392
  prefs: []
  type: TYPE_TB
  zh: '| Hackfest 2016 Quaoar | 易于攻破的机器 | [https://www.vulnhub.com/entry/hackfest2016-quaoar,180/](https://www.vulnhub.com/entry/hackfest2016-quaoar,180/)
    |'
- en: '| Pentester Lab: XSS and MySQL File | Easy SQL injection example | [https://www.vulnhub.com/entry/pentester-lab-xss-and-mysql-file,66/](https://www.vulnhub.com/entry/pentester-lab-xss-and-mysql-file,66/)
    |'
  id: totrans-393
  prefs: []
  type: TYPE_TB
  zh: '| Pentester Lab: XSS和MySQL文件 | 简单的SQL注入示例 | [https://www.vulnhub.com/entry/pentester-lab-xss-and-mysql-file,66/](https://www.vulnhub.com/entry/pentester-lab-xss-and-mysql-file,66/)
    |'
- en: '| SQLInjection to Shell | Intermediate - SQL injection to shell | [https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell-ii,69/](https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell-ii,69/)
    |'
  id: totrans-394
  prefs: []
  type: TYPE_TB
  zh: '| SQL注入到Shell | 中级 - SQL注入到Shell | [https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell-ii,69/](https://www.vulnhub.com/entry/pentester-lab-from-sql-injection-to-shell-ii,69/)
    |'
- en: '| Damn vulnerable web application | Vulnerable - PHP/MySQL application | [https://github.com/Hackademic/hackademic](https://github.com/Hackademic/hackademic)
    |'
  id: totrans-395
  prefs: []
  type: TYPE_TB
  zh: '| Damn vulnerable web application | 易受攻击的PHP/MySQL应用 | [https://github.com/Hackademic/hackademic](https://github.com/Hackademic/hackademic)
    |'
- en: '| Hackxor | Webapp hacking game | [http://hackxor.sourceforge.net/cgi-bin/index.pl](http://hackxor.sourceforge.net/cgi-bin/index.pl)
    |'
  id: totrans-396
  prefs: []
  type: TYPE_TB
  zh: '| Hackxor | Web应用黑客游戏 | [http://hackxor.sourceforge.net/cgi-bin/index.pl](http://hackxor.sourceforge.net/cgi-bin/index.pl)
    |'
- en: '| WebGoat | Medium level challenge | [https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project](https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project)
    |'
  id: totrans-397
  prefs: []
  type: TYPE_TB
  zh: '| WebGoat | 中等难度挑战 | [https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project](https://www.owasp.org/index.php/Category:OWASP_WebGoat_Project)
    |'
- en: There's more...
  id: totrans-398
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'The preceding resources will be installed on a variety of different methods
    that are beyond the scope of this book. But I will quickly mention some of the
    deployment options:'
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 上述资源将通过多种不同的方法进行安装，这些方法超出了本书的范围。但我会简要提到一些部署选项：
- en: Virtual machines that, can be installed in VirtualBox
  id: totrans-400
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以安装在VirtualBox中的虚拟机
- en: Scripts that can be run on standard Linux machines to build applications and
    make them specifically vulnerable to attacks
  id: totrans-401
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可在标准Linux机器上运行的脚本，用于构建应用程序并使其专门对攻击易感
- en: Resources that you may attack over the internet
  id: totrans-402
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你可以通过互联网攻击的资源
- en: Complete self contained hacking environments
  id: totrans-403
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 完整自包含的黑客环境
- en: Please ensure that as you are working with these sites, you read carefully the
    terms of service and understand all requirements and limitations of the environment or
    tools you are working with. Also be careful if you are remotely hacking sites
    across the internet. Although there are some of these options available for testing
    and it may be perfectly legal to do so, your **Internet Service Provider** (**ISP**)
    may flag the activity as malicious and take action against you.
  id: totrans-404
  prefs: []
  type: TYPE_NORMAL
  zh: 请确保在使用这些网站时，仔细阅读服务条款，并理解你正在使用的环境或工具的所有要求和限制。如果你在互联网上远程攻击网站，请特别小心。尽管其中一些选项是为测试提供的，并且这样做可能是合法的，但你的**互联网服务提供商**(**ISP**)可能会将此活动标记为恶意并采取相应措施。
