- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: The industrial cybersecurity industry has grown significantly in recent years.
    To truly secure today's critical infrastructure, red teams must be employed to
    continuously test and exploit the security integrity of a company's people, processes,
    and products. This pentesting book takes a slightly different approach than most
    by helping you to gain hands-on experience with equipment that you'll come across
    in the field. This will enable you to understand how industrial equipment interacts
    and operates within an operational environment.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 工业网络安全行业近年来有了显著增长。为了真正保护今天的关键基础设施，红队必须不断测试和利用公司员工、流程和产品的安全性。本书与大多数书籍的不同之处在于，它帮助你获得与实际设备的动手经验，这些设备你将在实际工作中遇到。这样，你将能够理解工业设备如何在运营环境中相互作用和操作。
- en: The book begins by helping you get to grips with the basics of industrial processes,
    and then shows you how to create and break the process, along with gathering open
    source intel to create a threat landscape for your potential customer. As you
    advance, you'll find out how to install and utilize offensive techniques used
    by professional hackers. Throughout the book, you'll explore industrial equipment,
    open source intel gathering, port and service discovery, pivoting, and finally,
    launching attacks against systems in an industrial network.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本书从帮助你掌握工业过程的基础开始，然后向你展示如何创建和破坏这一过程，同时收集开源情报，为你的潜在客户创建一个威胁环境。随着学习的深入，你将了解如何安装并使用专业黑客常用的进攻性技术。全书内容包括工业设备、开源情报收集、端口和服务发现、跳跃攻击，最后对工业网络中的系统发起攻击。
- en: By the end of this penetration testing book, you'll not only understand how
    to analyze and navigate the intricacies of an **Industrial Control System** (**ICS**)
    but will also have gained essential offensive and defensive skills to proactively
    protect industrial networks from modern cyber-attacks.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书结束时，你不仅能理解如何分析和应对**工业控制系统**（**ICS**）的复杂性，还将获得重要的进攻性和防御性技能，以积极保护工业网络免受现代网络攻击。
- en: Who this book is for
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书的读者对象
- en: This book started out as purely a manual for industrial pentesting and in doing
    so it was aimed at people who wanted learn about industrial pentesting; however,
    it grew into more of a convergence effort because I had numerous people ask me
    about getting into the **Operational Technology** (**OT**) security space, I figured
    that I would try and cover topics that addressed both sides of the convergence
    the OT and IT personas. IT security personnel who want a hands-on introduction
    to industrial pentesting will learn about the automation and controls aspect of
    industrial pentesting, while automation/control engineers who want to better understand
    their potential threat landscape will learn more about the IT networking aspects.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书最初只是一本工业渗透测试的手册，旨在帮助那些想了解工业渗透测试的人；然而，随着很多人向我询问如何进入**操作技术**（**OT**）安全领域，它逐渐发展成了一本涵盖两个领域融合的书。我想尽量涵盖OT和IT人员这两个方面的内容。希望进行工业渗透测试的IT安全人员，将学习到工业渗透测试中的自动化和控制方面的知识；而想更好理解潜在威胁环境的自动化/控制工程师，则将学习更多关于IT网络方面的知识。
- en: What this book covers
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[*Chapter 1*](B16321_01_Epub_AM.xhtml#_idTextAnchor013), *Using Virtualization*,
    will walk you through the basic building blocks of virtualization, and then progress
    into building out a hypervisor that will support our virtual ICS lab.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第一章*](B16321_01_Epub_AM.xhtml#_idTextAnchor013)，*使用虚拟化*，将带你了解虚拟化的基本构建模块，然后逐步构建一个支持我们虚拟ICS实验室的虚拟机监控器（hypervisor）。'
- en: '[*Chapter 2*](B16321_02_Epub_AM.xhtml#_idTextAnchor027), *Route the Hardware*,
    covers the principles of setting up a **Programmable Logic Controller** (**PLC**),
    and then moves on to the fundamentals of connecting that PLC to a virtual machine
    on our newly minted hypervisor.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第二章*](B16321_02_Epub_AM.xhtml#_idTextAnchor027)，*硬件路由*，介绍了设置**可编程逻辑控制器**（**PLC**）的原理，并进一步讲解如何将该PLC连接到我们新创建的虚拟机监控器上的虚拟机。'
- en: '[*Chapter 3*](B16321_03_Epub_AM.xhtml#_idTextAnchor033), *I Love My Bits –
    Lab Setup*, takes us through the steps of writing, downloading, and uploading
    our first program to our PLC.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第三章*](B16321_03_Epub_AM.xhtml#_idTextAnchor033)，*我爱我的比特 – 实验室设置*，将带领我们完成编写、下载并上传第一个程序到PLC的步骤。'
- en: '[*Chapter 4*](B16321_04_Epub_AM.xhtml#_idTextAnchor040), *Open Source Ninja*,
    teaches you about the power of Google-Fu, oversharing on LinkedIn, exposed devices
    on Shodan.io, navigating ExploitDB, and finally, leveraging the national vulnerability
    database.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*](B16321_04_Epub_AM.xhtml#_idTextAnchor040)，*开源忍者*，教你如何运用Google-Fu技巧，在LinkedIn上过度分享，在Shodan.io上查找暴露设备，浏览ExploitDB，最后利用国家漏洞数据库。'
- en: '[*Chapter 5*](B16321_05_Epub_AM.xhtml#_idTextAnchor049), *Span Me If You Can*,
    teaches you about SPANs and TAPs and how they can be leveraged in a pentesting
    engagement, and then we will take a deep dive into intrusion detection systems.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*](B16321_05_Epub_AM.xhtml#_idTextAnchor049)，*如果你能做到，拦截我*，教你关于SPAN和TAP的知识，以及它们如何在渗透测试中得到应用，接着我们将深入探讨入侵检测系统。'
- en: '[*Chapter 6*](B16321_06_Epub_AM.xhtml#_idTextAnchor063), *Packet Deep Dive*,
    walks through the structure of a typical packet, teaching you how to capture packets
    from the wire, and then analyzing those packets for key information.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*](B16321_06_Epub_AM.xhtml#_idTextAnchor063)，*数据包深入分析*，带你了解典型数据包的结构，教你如何从网络中捕获数据包，并分析这些数据包中的关键信息。'
- en: '[*Chapter 7*](B16321_07_Epub_AM.xhtml#_idTextAnchor081), *Scanning 101*, starts
    out by building a live SCADA system, and then moves on to using NMAP, RustScan,
    Gobuster, and feroxbuster to perform scanning techniques on our live SCADA system.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*](B16321_07_Epub_AM.xhtml#_idTextAnchor081)，*扫描101*，从构建一个实时SCADA系统开始，然后使用NMAP、RustScan、Gobuster和feroxbuster对我们的实时SCADA系统进行扫描技术操作。'
- en: '[*Chapter 8*](B16321_08_Epub_AM.xhtml#_idTextAnchor097), *Protocols 202*, takes
    a deep dive into Modbus and Ethernet/IP and the ways we can utilize these protocols
    to perform pentesting tasks inside the ICS.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*](B16321_08_Epub_AM.xhtml#_idTextAnchor097)，*协议202*，深入探讨Modbus和Ethernet/IP协议以及我们如何利用这些协议在工业控制系统内执行渗透测试任务。'
- en: '[*Chapter 9*](B16321_09_Epub_AM.xhtml#_idTextAnchor106), *Ninja 308*, leverages
    FoxyProxy and Burp Suite to analyze and attack the SCADA user interface.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*](B16321_09_Epub_AM.xhtml#_idTextAnchor106)，*忍者308*，利用FoxyProxy和Burp
    Suite分析并攻击SCADA用户界面。'
- en: '[*Chapter 10*](B16321_10_Epub_AM.xhtml#_idTextAnchor112), *I Can Do It 420*,
    starts off by installing and configuring a corporate-side firewall to provide
    a more holistic lab setup. Then, we continue on to scanning, exploiting, and then
    landing reverse shells.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*](B16321_10_Epub_AM.xhtml#_idTextAnchor112)，*我可以做到420*，从安装和配置公司侧的防火墙开始，以提供更完整的实验室设置。然后，我们继续进行扫描、利用漏洞，最后获得反向shell。'
- en: '[*Chapter 11*](B16321_11_Epub_AM.xhtml#_idTextAnchor130), *Whoot… I Have To
    Go Deep*, now that we have the shells, looks at running post-exploitation modules
    to glean data from inside the network. We will escalate privileges on the machines
    that we compromise, and then pivot down to the lower segments.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*](B16321_11_Epub_AM.xhtml#_idTextAnchor130)，*哇……我得深入*，现在我们已经得到了shell，探讨了如何运行后渗透模块以获取网络内部数据。我们将提升我们所攻破机器的权限，然后向下进行pivot，深入到更低的网络段。'
- en: '[*Chapter 12*](B16321_12_Epub_AM.xhtml#_idTextAnchor139), *I See the Future*,
    looks at the dangers of credential reuse by taking you through the steps of leveraging
    credentials discovered in previous steps and then accessing the SCADA interface
    for ultimate control of the system.'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第12章*](B16321_12_Epub_AM.xhtml#_idTextAnchor139)，*我看到了未来*，通过带你了解如何利用前一步发现的凭证，并接入SCADA界面，从而实现对系统的最终控制，探讨了凭证重用的危险。'
- en: '[*Chapter 13*](B16321_13_Epub_AM.xhtml#_idTextAnchor147), *Pwnd but with Remorse*,
    discusses the core deliverable, the report. If there is no evidence, did a test
    actually occur? We will prepare a template for future assessments/pentests, then
    discuss the critical information that lands inside the report, and then finally,
    document recommendations that can be used by the blue team to protect their systems
    into the future.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第13章*](B16321_13_Epub_AM.xhtml#_idTextAnchor147)，*被攻陷但有悔意*，讨论了核心交付物——报告。如果没有证据，测试真的发生了吗？我们将为未来的评估/渗透测试准备一个模板，然后讨论报告中包含的关键信息，最后，记录可以供蓝队未来保护其系统使用的建议。'
- en: To get the most out of this book
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用这本书
- en: You should try and get your hands on a mini-PC that can handle 32 GB+ of RAM
    and has at least two Ethernet ports. Intel NUC, GIGABYTE BRIX, and Zotac Z-Box
    are examples of devices that would be very useful to run your virtual images on.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该尽量获得一台能够支持32GB以上内存并至少有两个以太网端口的迷你PC。Intel NUC、GIGABYTE BRIX和Zotac Z-Box是适合运行虚拟镜像的非常有用的设备示例。
- en: '**If you are using the digital version of this book, we advise you to type
    the code yourself or access the code from the book''s GitHub repository (a link
    is available in the next section). Doing so will help you avoid any potential
    errors related to the copying and pasting of code.**'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果您使用的是本书的数字版本，我们建议您自己输入代码或通过本书的 GitHub 仓库获取代码（链接将在下一节中提供）。这样可以帮助您避免由于复制和粘贴代码而导致的潜在错误。**'
- en: Code in Action
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 行动中的代码
- en: The Code in Action videos for this book can be viewed at [https://bit.ly/3iZpT2f](https://bit.ly/3iZpT2f).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的《行动中的代码》视频可以在 [https://bit.ly/3iZpT2f](https://bit.ly/3iZpT2f) 上观看。
- en: Download the color images
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图像
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [http://www.packtpub.com/sites/default/files/downloads/9781800202382_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781800202382_ColorImages.pdf).'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了包含本书中使用的截图和图表的彩色图像的 PDF 文件。您可以在此处下载：[http://www.packtpub.com/sites/default/files/downloads/9781800202382_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781800202382_ColorImages.pdf)。
- en: Conventions used
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本规范。
- en: '**Code in text**: Indicates code words in text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "Go ahead and open the PCAP file labeled **4SICS-GeekLounge-151021.pcap**
    with Wireshark."'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '**文本中的代码**：表示文本中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 账户。例如：“继续打开标记为
    **4SICS-GeekLounge-151021.pcap** 的 PCAP 文件，使用 Wireshark。”'
- en: 'A block of code is set as follows:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 一块代码设置如下：
- en: 'def run_async_server():'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 'def run_async_server():'
- en: store = ModbusSlaveContext(
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: store = ModbusSlaveContext(
- en: di=ModbusSequentialDataBlock(0, [17]*100),
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: di=ModbusSequentialDataBlock(0, [17]*100),
- en: co=ModbusSequentialDataBlock(0, [17]*100),
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: co=ModbusSequentialDataBlock(0, [17]*100),
- en: hr=ModbusSequentialDataBlock(0, [17]*100),
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: hr=ModbusSequentialDataBlock(0, [17]*100),
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们希望您特别关注代码块的某个部分时，相关行或项会用粗体显示：
- en: import logging
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: import logging
- en: FORMAT = ('%(asctime)-15s %(threadName)-15s'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: FORMAT = ('%(asctime)-15s %(threadName)-15s'
- en: '''%(levelname)-8s %(module)-15s:%(lineno)-8s %(message)s'')'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: '''%(levelname)-8s %(module)-15s:%(lineno)-8s %(message)s'')'
- en: '**logging.basicConfig(format=FORMAT)**'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**logging.basicConfig(format=FORMAT)**'
- en: log = logging.getLogger()
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: log = logging.getLogger()
- en: log.setLevel(logging.DEBUG)
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: log.setLevel(logging.DEBUG)
- en: 'Any command-line input or output is written as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都如下所示：
- en: tcpdump -i <interface> -v -X
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: tcpdump -i <interface> -v -X
- en: '**Bold**: Indicates a new term, an important word, or words that you see onscreen.
    For instance, words in menus or dialog boxes appear in **bold**. Here is an example:
    "We will want to set the port mirroring, so select the **Monitoring** option from
    the menu on the left and then select **Port Mirror**."'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示新术语、重要词汇或您在屏幕上看到的词汇。例如，菜单或对话框中的词汇以 **粗体** 显示。示例：“我们将设置端口镜像，请从左侧菜单中选择
    **监控** 选项，然后选择 **端口镜像**。”'
- en: Tips or important notes
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种形式出现。
- en: Get in touch
  id: totrans-48
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 联系我们
- en: Feedback from our readers is always welcome.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 我们始终欢迎读者的反馈。
- en: '**General feedback**: If you have questions about any aspect of this book,
    email us at **customercare@packtpub.com** and mention the book title in the subject
    of your message.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**一般反馈**：如果您对本书的任何内容有疑问，请发送电子邮件至 **customercare@packtpub.com**，并在邮件主题中注明书名。'
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    and fill in the form.'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: '**勘误表**：尽管我们已尽一切努力确保内容的准确性，但错误仍然会发生。如果您在本书中发现错误，请报告给我们。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)
    并填写表单。'
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at **copyright@packt.com** with a link
    to the material.'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: '**盗版**：如果您在互联网上发现任何非法复制的本书作品，请提供该材料的网址或网站名称。请通过 **copyright@packt.com** 联系我们，并提供链接。'
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [authors.packtpub.com](http://authors.packtpub.com).'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**如果你有兴趣成为作者**：如果你在某个领域有专业知识，并且有兴趣撰写或参与编写书籍，请访问[authors.packtpub.com](http://authors.packtpub.com)。'
- en: Share Your Thoughts
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分享你的想法
- en: Once you've read *Pentesting Industrial Control Systems*, we'd love to hear
    your thoughts! Please click here to go straight to the Amazon review page for
    this book and share your feedback.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你读完*渗透测试工业控制系统*，我们很想听听你的想法！请点击此处直接前往亚马逊的书籍评论页面并分享你的反馈。
- en: Your review is important to us and the tech community and will help us make
    sure we're delivering excellent quality content.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 你的评论对我们以及技术社区非常重要，将帮助我们确保提供优质内容。
