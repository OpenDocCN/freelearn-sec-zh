- en: Chasing a User's Identity
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 追踪用户的身份
- en: In the last chapter, you learned different techniques you can use to compromise
    a system. However, in the current threat landscape, compromised credentials are
    now being used to compromise systems and networks further. According to the 2016
    *Data Breach Investigation Report* from Verizon, 63% of confirmed data breaches
    happened due to weak, default, or stolen passwords, which was driven by the number
    of attacks targeting the user's credentials. This threat landscape pushes enterprises
    to develop new strategies to enhance the overall security aspect of a user's identity.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，你学习了不同的技巧，可以用来攻破系统。然而，在当前的威胁环境中，被盗用的凭证正被用来进一步攻破系统和网络。根据Verizon 2016年发布的*数据泄露调查报告*，63%的确认数据泄露事件发生在由于密码弱、默认设置或被盗的情况下，这一现象主要是因为大量攻击瞄准了用户的凭证。这个威胁环境促使企业制定新的策略，以增强用户身份的整体安全性。
- en: 'In this chapter, we''re going to be covering the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将覆盖以下主题：
- en: Identity is the new perimeter
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 身份是新的边界
- en: Strategies to compromise a user's identity
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻破用户身份的策略
- en: Hacking a user's identity
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑客攻击用户身份
- en: Identity is the new perimeter
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 身份是新的边界
- en: As was briefly explained in [Chapter 1](3a4a477a-d673-4f0d-bbe8-f8e2a1289d38.xhtml),
    *Security Posture* the protection surrounding the identity must be enhanced, and
    that's why the industry is in common agreement that identity is the new perimeter.
    This occurs because every time a new credential is created, the majority of the
    time this credential is composed only of a username and password. While multifactor
    authentication is gaining popularity, it is still not the default method used
    to authenticate users. On top of that, there are lots of legacy systems that rely
    purely on usernames and passwords in order to work properly.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 正如在[第1章](3a4a477a-d673-4f0d-bbe8-f8e2a1289d38.xhtml)中简要解释的那样，*安全态势*，保护身份的措施必须得到加强，这也是业界普遍认同身份是新的安全边界的原因。每当一个新的凭证被创建时，这个凭证大多数时候只是由用户名和密码组成。虽然多因素认证正逐渐流行，但它仍然不是用来验证用户的默认方法。此外，还有很多依赖用户名和密码才能正常工作的遗留系统。
- en: 'Credential theft is a growing trend in different scenarios, such as:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 凭证盗窃在不同的场景中正成为一个日益增长的趋势，例如：
- en: '**Enterprise users**: Hackers that are trying to gain access to a corporate
    network and want to infiltrate without making any noise. One of the best ways
    to do that is by using valid credentials to authenticate, and be part of, the
    network.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**企业用户**：试图访问公司网络并希望悄无声息地渗透其中的黑客。实现这一目标的最佳方式之一就是使用有效的凭证进行身份验证，并成为网络的一部分。'
- en: '**Home users**: Many banking Trojans, such as the Dridex family, are still
    actively in use because they target a user''s bank credentials, and that''s where
    money is.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**家庭用户**：许多银行木马病毒，如Dridex家族，仍然在活跃使用，因为它们针对的是用户的银行凭证，而银行凭证是黑客最关心的地方。'
- en: The problem with this current identity threat landscape is that home users are
    also corporate users, and are bringing their own devices to consume corporate
    data. Now you have a scenario where a user's identity for his personal application,
    resides in the same device that has his corporate credentials in use to access
    corporate-related data.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 当前身份威胁环境的问题在于，家庭用户也同时是企业用户，他们将自己的设备带入企业环境，使用这些设备访问公司数据。现在你面临的情形是，一个用户的个人应用身份与其企业凭证存在于同一设备中，而后者用于访问公司相关的数据。
- en: The problem with users handling multiple credentials for different tasks is
    that users might utilize the same password for these different services.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 用户处理多种凭证的一个问题是，用户可能会对这些不同服务使用相同的密码。
- en: For example, a user using the same password for his cloud-based email service
    and corporate domain credentials will help hackers because they only need to identify
    the username, since once one password is cracked, all others will be the same.
    Nowadays, browsers are being used as the main platform for users to consume applications,
    and browser's vulnerabilities can be exploited to steal a user's credentials.
    Such a scenario happened in May 2017, when a vulnerability was discovered in Google
    Chrome.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 举个例子，一个用户在他的云端电子邮件服务和公司域凭证中使用相同密码，这将帮助黑客，因为他们只需要识别用户名，一旦破解一个密码，所有的密码都将相同。如今，浏览器被用作用户消费应用程序的主要平台，而浏览器的漏洞可以被利用来窃取用户凭证。类似的情形发生在2017年5月，当时谷歌Chrome浏览器发现了一个漏洞。
- en: 'Although the issue seems to be related to end users and enterprises, the reality
    is that no one is safe, and anyone can be targeted, even someone in politics.
    In an attack revealed in June 2017 by *The Times*, it was reported that the email
    addresses and passwords of Justine Greening (the education secretary) and Greg
    Clark (the business secretary) of the UK government, were among the tens of thousands
    of government officials'' credentials that were stolen, and later sold on the
    darknet. The problem with stolen credentials is not only using those credentials
    to access privileged information, but also being used to start a targeted spear-phishing
    campaign. The following diagram shows an example of how stolen credentials can
    be used:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这个问题似乎与最终用户和企业有关，但现实情况是没有人是安全的，任何人都可能成为目标，甚至是政治人物。2017年6月，《泰晤士报》披露的一起攻击事件中，报道称英国政府教育部长贾斯廷·格林宁和商务部长格雷格·克拉克的电子邮件地址和密码，正是被盗取的成千上万名政府官员凭证中的一部分，之后这些凭证被出售到暗网。被盗凭证的问题不仅仅在于利用这些凭证访问特权信息，还可以用来发起针对性的鱼叉式钓鱼攻击。下图展示了被盗凭证的使用示例：
- en: '![](assets/3ab621f4-4488-4aa2-a832-1afe729cae82.png)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/3ab621f4-4488-4aa2-a832-1afe729cae82.png)'
- en: An interesting part of the workflow shown in the previous diagram, is that the
    hacker doesn't really need to prepare the entire infrastructure to launch the
    attack. Nowadays, they can just rent bots that belong to someone else. This strategy
    was used in 2016 during the IoT DDoS attack, and according to ZingBox, *"*the
    price for 50,000 bots with attack duration of 3600 secs (1 hour) and 5-10-minute
    cooldown time is approximately $3,000 to $4,000 per 2 weeks."
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 上图所示工作流程中一个有趣的部分是，黑客实际上不需要为发动攻击准备完整的基础设施。如今，他们只需租用属于他人的机器人即可。这一策略在2016年物联网DDoS攻击中曾被使用，根据ZingBox的报告，*“50,000个机器人的攻击持续时间为3600秒（1小时），且5-10分钟冷却时间的租赁费用大约为每两周3,000到4,000美元。”*
- en: As cloud computing grows, the amount of **Software as a Service** (**SaaS**)
    apps that use the cloud provider's identity management system also grows, which
    means, more Google accounts, more Microsoft Azure accounts, and so on. These cloud
    vendors usually offer two-factor authentication, to add an extra layer of protection.
    However, the weakest link is still the user, which means this is not a bulletproof
    system. While it is correct to say that two-factor authentication enhances the
    security of the authentication process, it has been proved that it is possible
    to hack into this process.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 随着云计算的增长，使用云服务提供商身份管理系统的**软件即服务**（**SaaS**）应用程序数量也在增加，这意味着更多的Google账户、更多的Microsoft
    Azure账户等等。这些云服务商通常提供双因素认证，以增加一层保护。然而，最薄弱的环节仍然是用户，这意味着这一系统并非铁壁防御。尽管可以说双因素认证增强了认证过程的安全性，但事实证明，它是可以被破解的。
- en: One famous example of broken two-factor authentication involved the activist
    DeRay Mckesson. Hackers called Verizon, and using social engineering skills, they
    pretended they were Mckesson, and convinced them that his phone had a problem.
    They convinced the Verizon technician to reset his SIM card. They activated the
    new SIM with the phone in their possession, and when the text message came the
    hackers were able to get the code and it was game over.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 一个著名的双因素认证被突破的例子涉及活动家DeRay Mckesson。黑客致电Verizon，并通过社交工程技巧假装自己是Mckesson，骗过了客服人员，称他的手机出现了问题。他们说服Verizon的技术人员重置了他的SIM卡。然后他们用手中的手机激活了新的SIM卡，当短信到达时，黑客成功获取了验证码，结果也就此结束。
- en: Strategies for compromising a user's identity
  id: totrans-19
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 攻击用户身份的策略
- en: 'As you can see, identity plays a big role in how hackers gain access to the
    system and execute their mission, which in most cases is to access privileged
    data or hijack that data. The **Red Team** must be aware of all these risks, and
    how to exploit them during the attack exercise. For this reason, it is important
    to establish a plan of attack before we start acting. This plan should take into
    consideration the current threat landscape, which includes three stages:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，身份在黑客如何获得系统访问权限并执行任务中扮演了重要角色，而任务大多数情况下是访问特权数据或劫持这些数据。**红队**必须意识到所有这些风险，并了解如何在攻击演练中加以利用。因此，在开始行动之前，制定攻击计划非常重要。这个计划应考虑当前的威胁形势，涵盖三个阶段：
- en: '![](assets/8441f5cf-c690-4430-8596-921e5c3a058c.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/8441f5cf-c690-4430-8596-921e5c3a058c.png)'
- en: During **Stage 1**, the **Red Team** will study the different adversaries that
    the company has. In other words, who can potentially attack us? The first step
    to answer this question is to perform a self-assessment and understand what type
    of information the company has, and who would benefit from obtaining it. You might
    not be able to map all adversaries, but at least you will be able to create a
    basic adversary profile, and based on that you can move on to the next stage.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 在**第一阶段**，**红队**将研究公司面临的不同对手。换句话说，谁有可能攻击我们？回答这个问题的第一步是进行自我评估，了解公司拥有哪些类型的信息，以及哪些人会从获取这些信息中受益。你可能无法列出所有对手，但至少能够创建一个基本的对手画像，并基于此进入下一个阶段。
- en: In **Stage 2**, the **Red Team** will research the most common attacks launched
    by these adversaries. Remember, that many of these groups have a pattern. While
    it is not fully guaranteed that they will use the same technique, they might use
    a similar workflow. By understanding the category of the attack, and how they
    are created, you can try to emulate something similar during your attack exercise.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在**第二阶段**，**红队**将研究这些对手常用的攻击方式。记住，很多这些组织有着一定的攻击模式。虽然无法完全保证他们会使用相同的技术，但他们可能会使用类似的工作流程。通过理解攻击的类别以及它们的产生方式，你可以在演练中尝试模仿类似的攻击。
- en: The last stage again starts with research, but this time to understand how these
    attacks are executed, the order in which they were executed, and so on.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一阶段再次以研究开始，但这一次是为了理解这些攻击是如何执行的，执行的顺序，以及其他相关细节。
- en: The goal here is to learn from this stage, and apply them to production during
    the exercise. What the Red Team is doing here is just trying to be accurate with
    reality. It doesn't really help if the Red Team starts an attack exercise without
    a purpose and without tangible evidence that other hacking groups might do the
    same.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的目标是从这一阶段中学习，并在演练过程中应用这些知识。红队在此阶段的任务仅仅是尽量与现实情况相符。如果红队没有明确目标，且没有足够证据证明其他黑客组织可能会进行类似攻击，那么演练就没有实际意义。
- en: Another important aspect of this planning phase is to understand that attackers
    will not stop if they fail to infiltrate on the first attempt, they are likely
    to attack again, but this time using different techniques, until they are able
    to break in. The Red Team must operate with this hacker mindset, and continue
    their mission despite initial failure.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 规划阶段的另一个重要方面是要理解，攻击者如果第一次尝试渗透失败，他们不会停止攻击，反而可能会再次攻击，这一次使用不同的技术，直到成功突破。红队必须以黑客的心态行动，尽管初次失败，依然要继续执行任务。
- en: The Red Team needs to define some strategies to gain access to user credentials,
    and continue their attack within the network until the mission is accomplished.
    In most cases the mission is to gain access to privileged information. Therefore,
    before you start the exercise it is important to be clear on this mission. Efforts
    must be synchronized and organized otherwise you increase the likelihood of being
    caught, and the Blue Team wins.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 红队需要定义一些策略，以获取用户凭证，并在网络中继续攻击，直到任务完成。在大多数情况下，任务是获取特权信息。因此，在开始演练之前，明确任务目标非常重要。所有的努力必须同步和有序，否则会增加被发现的风险，蓝队将获胜。
- en: It is important to keep in mind that this is a suggestion of how to create attack
    exercises. Each company should perform a self-assessment, and based on the result
    of this assessment, create exercises that are relevant to their reality.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 需要记住的是，这是创建攻击演练的一种建议方式。每家公司都应进行自我评估，并根据评估结果，设计符合自身现实的演练。
- en: Gaining access to the network
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取网络访问权限
- en: 'Part of the planning process is to gain access to a user''s credentials and
    understand how to get access to the internal network from outside (external-internet).
    One of the most successful attacks is still the old phishing email. The reason
    this attack is so successful is because it uses social engineering techniques
    to entice the end user to perform a specific action. Before creating a crafted
    email with a malicious dropper, it is recommended to perform recon using social
    media to try to understand the target user''s behavior outside of work. Try to
    identify things such as:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 规划过程的一部分是获取用户凭证并了解如何从外部（外部互联网）访问内部网络。最成功的攻击之一仍然是老式的钓鱼电子邮件。这个攻击之所以如此成功，是因为它利用了社会工程学技术来诱使最终用户执行特定操作。在创建带有恶意掉落程序的精心制作的电子邮件之前，建议通过社交媒体进行侦察，试图了解目标用户在工作之外的行为。尝试识别以下内容：
- en: Hobbies
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 兴趣爱好
- en: Places that he/she usually checks into
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 他/她通常签到的地点
- en: Preferred food
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 喜欢的食物
- en: Sites that are commonly visited
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常访问的站点
- en: The intent here is to be able to create a crafted email that it is relevant
    to one of those subjects. By elaborating an email that has relevance to the user's
    daily activities you are increasing the likelihood that this user will read the
    email, and take the desired action.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 这里的目的是能够创建一封与这些主题相关的精心制作的电子邮件。通过制定一封与用户日常活动相关的电子邮件，你在增加该用户阅读电子邮件并执行期望操作的可能性。
- en: Harvesting credentials
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 收集凭证
- en: If during the recon process you have already identified unpatched vulnerabilities
    that could lead to credential exploitation, this could be the easiest path to
    take.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在侦察过程中你已经发现了可能导致凭证利用的未修补漏洞，这可能是最容易采取的路径。
- en: For example, if the target computer is vulnerable to CVE-2017-8563 (allows an
    elevation of privilege vulnerability due to Kerberos falling back to NTLM Authentication
    Protocol), it will be easier to perform a privilege escalation, and potentially
    gain access to a local administrator account. Most attackers will perform a lateral
    movement within the network, trying to obtain access to an account that has privileged
    access to the system, therefore the same approach should be used by the Red Team.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果目标计算机易受CVE-2017-8563漏洞的攻击（该漏洞由于Kerberos回退到NTLM身份验证协议，允许特权提升漏洞），那么执行特权升级将更容易，并且可能获得对本地管理员账户的访问权限。大多数攻击者会在网络中进行横向移动，尝试获取具有系统特权访问权限的账户，因此红队也应采用相同的方法。
- en: One attack that gained popularity once Hernan Ochoa published the Pass-The-Hash
    Toolkit, is the pass-the-hash attack. To understand how this attack works, you
    need to understand that a password has a hash, and this hash is a direct, one-way,
    mathematical derivation of the password itself, which only changes when the user
    changes the password. Depending on how the authentication is performed, it is
    possible to present the password hash instead of a plaintext password as proof
    of the user's identity to the operating system. Once the attacker obtains this
    hash, he can use it to assume the identity of the user (victim), and continue
    his attack within the network.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一种在Hernan Ochoa发布Pass-The-Hash工具包后获得流行的攻击是传递哈希攻击。要理解这种攻击如何工作，您需要理解密码有一个哈希值，这个哈希值是密码本身的直接单向数学衍生物，只有当用户更改密码时才会改变。根据身份验证的方式，可能会将密码哈希值而不是明文密码作为证明用户身份的凭证提交给操作系统。一旦攻击者获得这个哈希值，他可以使用它假冒用户（受害者）的身份，并在网络中继续进行攻击。
- en: '![](assets/4bf3b813-76dc-4c57-aac9-025cfd580e7a.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/4bf3b813-76dc-4c57-aac9-025cfd580e7a.png)'
- en: Lateral movement is very useful for compromising more machines within the environment,
    and it can also be used to hop between systems to harvest more valuable information.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 横向移动对妥协环境中的更多机器非常有用，它也可以用来在系统之间跳跃，收集更有价值的信息。
- en: Remember that the mission is to obtain sensitive data, and sometimes you don't
    need to move to the server in order to obtain this data.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 记住，任务是获取敏感数据，有时你不需要进入服务器就能获取这些数据。
- en: In the previous image, there was a lateral movement from Alex to Sandra's computer,
    and a privilege escalation from Sandra to the web server. This can be done because
    within Sandra's workstation there was another user that had administrative access
    to this server.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的图像中，Alex对Sandra的计算机进行了横向移动，并从Sandra的计算机提升了特权到Web服务器。这是可能的，因为在Sandra的工作站中有另一个用户具有该服务器的管理员访问权限。
- en: It is important to emphasize that the account that was harvested locally by
    the attacker cannot be used in further attacks. Using the previous diagram as
    an example, if a domain admin account was never used to authenticate on Alex and
    Sandra's workstations, this account will not be available to an attacker that
    has compromised these workstations.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 需要强调的是，攻击者在本地窃取的账户不能在进一步的攻击中使用。以之前的示意图为例，如果域管理员账户从未在Alex和Sandra的工作站上进行身份验证，那么该账户将无法被已攻陷这些工作站的攻击者使用。
- en: 'As mentioned previously, to execute the pass the hash attack successful, you
    must obtain access to an account with administrative privileges on the Windows
    system. Once the Red Team gains access to the local computer, they can try to
    steal the hash from the following locations:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，要成功执行通过哈希值攻击，必须获得具有管理员权限的Windows系统账户。一旦红队获取了本地计算机的访问权限，他们可以尝试从以下位置窃取哈希值：
- en: The **Security Accounts Manager** (**SAM**) database
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全账户管理器**（**SAM**）数据库'
- en: The **Local Security Authority Subsystem** (**LSASS**) process memory
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**本地安全机构子系统**（**LSASS**）进程内存'
- en: The **Domain Active Directory Database** (domain controllers only)
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**域活动目录数据库**（仅限域控制器）'
- en: The **Credential Manager** (**CredMan**) store
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**凭证管理器**（**CredMan**）存储'
- en: The **Local Security Authority** (**LSA**) secrets in the registry
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 注册表中的**本地安全机构**（**LSA**）机密信息
- en: In the next section, you will learn how to perform these actions in a lab environment
    prior to executing your attack exercise.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，你将学习如何在实验室环境中执行这些操作，然后再进行攻击演练。
- en: Hacking a user's identity
  id: totrans-52
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 黑客攻击用户身份
- en: 'Now that you know the strategies, it is time for some hands-on activity. However,
    before that, here are some important considerations:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你已经了解了策略，是时候进行一些动手操作了。但是在此之前，以下是一些重要的注意事项：
- en: Do not perform these steps in a production environment
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请勿在生产环境中执行这些步骤
- en: Create an isolated lab to test any type of Red Team operation
  id: totrans-55
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个隔离的实验室以测试任何类型的红队操作
- en: Once all tests are done and validated, make sure you build your own plan to
    reproduce these tasks in a production environment as part of the Red Team attack
    exercise
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦所有测试完成并验证无误，确保制定自己的计划，在生产环境中重新执行这些任务，作为红队攻击演练的一部分
- en: Before performing the attack exercise, make sure you have the agreement of your
    manager, and that the entire command chain is aware of this exercise
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在执行攻击演练之前，确保已获得经理的同意，并且整个指挥链都知道此次演练。
- en: The tests that follow could be applied in an on-premises environment, as well
    as in a VM located in the cloud (IaaS).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 以下测试可应用于本地环境，也可以应用于位于云中的虚拟机（IaaS）。
- en: Brute force
  id: totrans-59
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 暴力破解
- en: 'The first attack exercise might be the oldest one, but it is still valid for
    testing two aspects of your defense controls:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个攻击演练可能是最旧的，但它仍然有效，可以测试防御控制的两个方面：
- en: '**The accuracy of your monitoring system**: Since brute force attacks may cause
    noise, it is expected that your defense security controls can catch the activity
    while it is happening. If it doesn''t catch it, you have a serious problem in
    your defense strategy.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**你的监控系统的准确性**：由于暴力破解攻击可能产生噪声，因此预计你的防御安全控制能够在活动发生时捕获这些行为。如果没有捕获到，那么你的防御策略就存在严重问题。'
- en: '**How strong is your password policy?**: If your password policy is weak, chances
    are that this attack will be able to obtain many credentials. If it does, you
    have another serious problem.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**你的密码策略有多强？**：如果你的密码策略较弱，那么很可能这次攻击将能够获取许多凭证。如果真的获取到了，你将面临另一个严重问题。'
- en: For this exercise, there is an assumption that the attacker is already part
    of the network and it could be a case of an internal threat trying to compromise
    a user's credentials for nefarious reasons.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 本次演练假设攻击者已经是网络的一部分，可能是内部威胁尝试窃取用户凭证以达到恶意目的。
- en: 'On a Linux computer running Kali, open the Applications menu, click Exploitation
    Tools, and select metasploit-framework:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行Kali的Linux计算机上，打开“应用程序”菜单，点击“Exploitation Tools”，然后选择metasploit-framework：
- en: '![](assets/f2052b54-0a16-4862-b3c9-26937910f2d1.png)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/f2052b54-0a16-4862-b3c9-26937910f2d1.png)'
- en: 'When the Metasploit console opens, type `use exploit/windows/smb/psexec`, and
    your prompt will change as shown in the following screenshot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 当Metasploit控制台打开时，输入`use exploit/windows/smb/psexec`，你的提示符将会改变，如下图所示：
- en: '![](assets/bb7044f2-83cd-4582-83a3-0dda24ca3ba7.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/bb7044f2-83cd-4582-83a3-0dda24ca3ba7.png)'
- en: Now, switch prompt again since you will leverage the SMB Login Scanner. For
    that, type `use auxiliary/scanner/smb/smb_login`. Configure the remote host using
    the command `set rhosts <target>`, configure the user that you want to attack
    with the command set `smbuser <username>`, and make sure to turn verbose mode
    on by using the command `set verbose true`.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，再次切换提示符，因为你将使用SMB登录扫描器。为此，输入`use auxiliary/scanner/smb/smb_login`。使用命令`set
    rhosts <target>`配置远程主机，使用命令`set smbuser <username>`配置你想要攻击的用户，并确保通过使用命令`set verbose
    true`开启详细模式。
- en: 'Once all this is done, you can follow the steps from the following screenshot:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦完成所有这些，你可以按照以下截图中的步骤操作：
- en: '![](assets/58bcce10-e7da-433a-b78d-5a735b092e97.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/58bcce10-e7da-433a-b78d-5a735b092e97.png)'
- en: As you can see, the command sequence is simple. The power of the attack relies
    on the password file. If this file contains a lot of combinations you increase
    the likelihood of success, but it will also take more time and potentially trigger
    alerts in the monitoring system due to the amount of SMB traffic. If, for some
    reason, it does raise alerts, as a member of the Red Team you should back off,
    and try a different approach.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，命令序列很简单。攻击的威力依赖于密码文件。如果这个文件包含大量组合，你就增加了成功的可能性，但也会花费更多时间，并可能由于大量的SMB流量触发监控系统的警报。如果由于某种原因触发了警报，作为红队成员，你应该撤退并尝试其他方法。
- en: Social engineering
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 社交工程
- en: The next exercise starts from outside. In other words, the attacker is coming
    from the internet, and gaining access to the system in order to perform the attack.
    One approach to that is by driving the user's activity to a malicious site in
    order to obtain a user's identity.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个练习从外部开始。换句话说，攻击者来自互联网，并通过访问系统来执行攻击。一种方法是将用户引导到一个恶意网站，从而获取用户身份。
- en: Another method that is commonly used is sending a phishing email that will install
    a piece of malware in the local computer. Since this is one of the most effective
    methods, we will use this one for this example. To prepare this crafted email,
    we will use the **Social Engineering Toolkit** (**SET**) which comes with Kali.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种常用的方法是发送一封钓鱼邮件，安装一段恶意软件到本地计算机。由于这是最有效的方法之一，我们将使用这个方法来做示范。为了准备这封精心制作的邮件，我们将使用**社交工程工具包**（**SET**），该工具包随Kali一起提供。
- en: 'On the Linux computer running Kali, open the Applications menu, click Exploitation
    Tools, and select Social Engineering Toolkit:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 在运行Kali的Linux计算机上，打开应用菜单，点击“利用工具”，并选择社交工程工具包：
- en: '![](assets/0bff682c-7a22-4f7b-802a-416e58488309.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/0bff682c-7a22-4f7b-802a-416e58488309.png)'
- en: 'On this initial screen you have six options to select from. Since the intent
    is to create a crafted email that will be used for a socially engineered attack,
    select option 1 and you will see the following screen:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个初始屏幕上，你有六个选项可以选择。由于目的是创建一封用于社交工程攻击的精心制作的电子邮件，选择选项1，你将看到以下屏幕：
- en: '![](assets/99128da9-0d01-4387-8bd6-4fdd4cd2e459.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/99128da9-0d01-4387-8bd6-4fdd4cd2e459.png)'
- en: 'Select the first option in this screen, which will allow you to start creating
    a crafted email to be used in your spear-phishing attack:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在此屏幕上选择第一个选项，这将允许你开始创建一封精心制作的电子邮件，用于你的目标钓鱼攻击：
- en: '![](assets/6b01d3e6-03ab-4ee8-b21d-6c3d34fa0ee9.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/6b01d3e6-03ab-4ee8-b21d-6c3d34fa0ee9.png)'
- en: As member of the Red Team, you probably don't want to use the first option (mass
    email attack), since you have a very specific target obtained during your recon
    process via social media.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 作为红队成员，你可能不想使用第一个选项（大规模电子邮件攻击），因为你已经在侦查过程中通过社交媒体获得了非常具体的目标。
- en: 'For this reason, the right choices at this point are either the second (payload)
    or the third (template). For the purpose of this example, you will use the second
    option:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 出于这个原因，此时的正确选择是第二个（有效载荷）或第三个（模板）。为了本例的目的，你将使用第二个选项：
- en: '![](assets/24a08d4c-49f2-4b7d-aeaf-7147aef8ac0c.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/24a08d4c-49f2-4b7d-aeaf-7147aef8ac0c.png)'
- en: 'Let''s say that during your recon process you noticed that the user you are
    targeting uses a lot of PDF files, which makes him a very good candidate to open
    an email that has a PDF attached. In this case, select option 16 (Adobe PDF Embedded
    EXE Social Engineering), and you will see the following screen:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 假设在你的侦查过程中，你注意到目标用户使用大量的PDF文件，这使得他成为打开带有PDF附件的电子邮件的非常合适人选。在这种情况下，选择选项16（Adobe
    PDF嵌入式EXE社交工程），你将看到以下屏幕：
- en: '![](assets/c865d084-3a8a-44f2-94de-0e106094c664.png)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/c865d084-3a8a-44f2-94de-0e106094c664.png)'
- en: 'The option that you choose here depends on having a PDF or not. If you, as
    a member of the Red Team, have a crafted PDF, select option 1, but for the purpose
    of this example use option 2 to use a built-in blank PDF for this attack. Once
    you select this option the following screen appears:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 你在此处选择的选项取决于是否有PDF文件。如果你作为红队成员有一个精心制作的PDF，选择选项1，但为了本示例的目的，选择选项2使用内置的空白PDF进行此攻击。选择该选项后，以下屏幕将出现：
- en: '![](assets/c78c5028-b8e3-47cf-8399-a829c50730a4.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/c78c5028-b8e3-47cf-8399-a829c50730a4.png)'
- en: 'Select option 2, and follow the interactive prompt that appears asking about
    your local IP address to be used as `LHOST`, and the port to connect back with
    this host:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 选择选项2，并按照交互式提示输入你的本地IP地址作为`LHOST`，以及连接此主机时使用的端口：
- en: '![](assets/e04e0b89-b275-4a7e-9469-180733725076.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/e04e0b89-b275-4a7e-9469-180733725076.png)'
- en: 'Now you want to be cool, and select the second option to customize the file
    name. In this case the file name will be `financialreport.pdf`. Once you type
    the new name, the available options are shown as follows:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你想显得酷一些，选择第二个选项自定义文件名。在此情况下，文件名将是`financialreport.pdf`。输入新名称后，以下是可用选项：
- en: '![](assets/6606457e-bf51-4cd0-96dc-ece408c1a8d9.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/6606457e-bf51-4cd0-96dc-ece408c1a8d9.png)'
- en: 'Since this is a specific-target attack, and you know the email addresses of
    the victim, select the first option:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是一个特定目标的攻击，并且你已经知道受害者的电子邮件地址，选择第一个选项：
- en: '![](assets/731a3e83-d610-47ac-bdd9-302638866e9d.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/731a3e83-d610-47ac-bdd9-302638866e9d.png)'
- en: 'In this case, we will select the status report, and after selecting this option
    you have to provide the target''s email and the sender''s email. Notice that for
    this case, we are using the second option, which is a Gmail account:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，我们将选择状态报告，选择此选项后，你需要提供目标的电子邮件和发件人的电子邮件。注意，在此情况下，我们使用的是第二个选项，即Gmail账户：
- en: '![](assets/65cf2a1e-9be7-4b70-b203-8e7c25042c73.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/65cf2a1e-9be7-4b70-b203-8e7c25042c73.png)'
- en: 'At this point the file `financialreport.pdf` is already saved in the local
    system. You can use the command `ls` to view the location of this file as shown
    in the following screenshot:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 到此为止，文件`financialreport.pdf`已经保存在本地系统中。你可以使用命令`ls`来查看该文件的位置，具体如下截图所示：
- en: '![](assets/7f7989b0-aa91-4510-9a18-8de9d1d3ea5a.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/7f7989b0-aa91-4510-9a18-8de9d1d3ea5a.png)'
- en: This 60 KB PDF file will be enough for you to gain access to the user's command
    prompt and from there use `mimikatz` to compromise a user's credentials as you
    will see in the next section.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 这个60 KB的PDF文件足够让你访问用户的命令提示符，从那里你可以使用`mimikatz`来破解用户凭证，正如你将在下一部分中看到的那样。
- en: 'If you want to evaluate the content of this PDF, you can use the PDF Examiner
    from [https://www.malwaretracker.com/pdfsearch.php](https://www.malwaretracker.com/pdfsearch.php).
    Upload the PDF file to this site, click submit, and check the results. The core
    report should look like this:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想评估此PDF的内容，可以使用来自[https://www.malwaretracker.com/pdfsearch.php](https://www.malwaretracker.com/pdfsearch.php)的PDF检查器。将PDF文件上传到此站点，点击提交并检查结果。核心报告应如下所示：
- en: '![](assets/0a1ada22-bf56-4453-b2a9-77e056fb2da3.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/0a1ada22-bf56-4453-b2a9-77e056fb2da3.png)'
- en: 'Notice that there is an execution of an `.exe` file. If you click on the hyperlink
    for this line, you will see that this executable is `cmd.exe`, as shown in the
    following screenshot:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，执行了一个`.exe`文件。如果你点击该行的超链接，你将看到该可执行文件是`cmd.exe`，如下所示：
- en: '![](assets/84ff8e18-1405-4842-9902-72e2ff0ceef3.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/84ff8e18-1405-4842-9902-72e2ff0ceef3.png)'
- en: The last decoding piece of this report shows the action Launch for the executable
    `cmd.exe`.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 该报告的最后一部分解码显示了执行`cmd.exe`的启动操作。
- en: Pass the hash
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 传递哈希
- en: At this point you have access to `cmd.exe`, and from there you can launch PowerShell
    using the command `start powershell -NoExit`. The reason you want to launch PowerShell
    is because you want to download `mimikatz` from GitHub.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 此时你已经访问了`cmd.exe`，从这里你可以使用命令`start powershell -NoExit`启动PowerShell。你希望启动PowerShell，因为你需要从GitHub下载`mimikatz`。
- en: 'To do that, run the following command:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，运行以下命令：
- en: '[PRE0]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Also, make sure to download the PsExec tool from Sysinternals, since you will
    need it later. To do that, use the following command from the same PowerShell
    console:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，确保从Sysinternals下载PsExec工具，因为稍后你将需要它。为此，可以在同一个PowerShell控制台中使用以下命令：
- en: '[PRE1]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'In the PowerShell console, use the command `expand-archive -path` to extract
    the content from `mimikatz_trunk.zip`. Now you can launch `mimikatz`. One of the
    first steps is to verify if the user running command prompt has administrative
    privileges. If they do, you will see the following results when you run the `privilege::debug`
    command:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在 PowerShell 控制台中，使用命令`expand-archive -path`来解压`mimikatz_trunk.zip`的内容。现在你可以启动`mimikatz`。第一步之一是验证运行命令提示符的用户是否具有管理员权限。如果有，你在运行`privilege::debug`命令时将看到以下结果：
- en: '![](assets/c5b61ae2-2925-4b07-9edc-4f9a6ccb6802.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/c5b61ae2-2925-4b07-9edc-4f9a6ccb6802.png)'
- en: The next step is to dump all active users, services, and their associated NTLM/SHA1
    hashes. This is a very important step, because it will give you an idea of the
    number of users that you can try to compromise to continue your mission.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 下一步是转储所有活动用户、服务及其相关的 NTLM/SHA1 哈希值。这是一个非常重要的步骤，因为它将让你了解你可以尝试攻击的用户数量，从而继续你的任务。
- en: 'To do that, use the command `sekurlsa::logonpasswords`:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 为此，使用命令`sekurlsa::logonpasswords`：
- en: '![](assets/ff26de25-f529-4053-8736-c0078812629a.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/ff26de25-f529-4053-8736-c0078812629a.png)'
- en: If the target computer is running any Windows version up to Windows 7, you may
    see the actual password in clear text. The reason we say "may," is because if
    the target computer has the MS16-014 update installed, Windows will forcibly clear
    leaked logon session credentials after 30 seconds.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果目标计算机运行的是 Windows 7 或更早版本，你可能会看到实际的密码以明文显示。我们之所以说“可能”，是因为如果目标计算机安装了 MS16-014
    更新，Windows 会在 30 秒后强制清除泄露的登录会话凭据。
- en: 'Moving forward you can perform the attack, since you now have had the hash.
    The attack can be performed on a Windows system using mimikatz and the `psexec`
    tool (the one that you downloaded previously). For this scenario, we are going
    to use the following command as an example:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 继续执行攻击，因为你现在已经获得了哈希值。攻击可以在 Windows 系统上使用 mimikatz 和`psexec`工具（你之前下载的那个）来执行。在这个场景中，我们将使用以下命令作为示例：
- en: '[PRE2]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The command prompt will open using the context of that particular user. If
    that user has administrative privileges, it''s game over. The execution of the
    attack can also be done from Metasploit, on a computer running Kali. The sequence
    of commands is shown as follows:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 命令提示符将以该特定用户的上下文打开。如果该用户具有管理员权限，那么攻击就算成功。攻击的执行也可以通过在运行 Kali 的计算机上使用 Metasploit
    来完成。命令序列如下所示：
- en: '[PRE3]'
  id: totrans-119
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Once these steps are done, run the `exploit` command and see the results:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 完成这些步骤后，运行`exploit`命令并查看结果：
- en: '![](assets/23bde0ee-2f8d-4989-bcf2-c98197028101.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](assets/23bde0ee-2f8d-4989-bcf2-c98197028101.png)'
- en: Since this is only a Red Team exercise, the intent here is to prove that the
    system is vulnerable to this type of attack. Notice that we didn't compromise
    any data, only showed how vulnerable the entire identity protection really is.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这只是红队演习，目的是证明系统容易受到这种类型的攻击。请注意，我们没有泄露任何数据，只是展示了整个身份保护系统的脆弱性。
- en: Other methods to hack identity
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他身份盗窃方法
- en: While it is safe to say that a lot of damage can be done using the three approaches
    that were previously mentioned, it also safe to say that there are still more
    ways to hack identities. The Red Team can use the cloud infrastructure as the
    target for the attack. The Nimbostratus tool by Andres Riancho is a great resource
    for exploiting Amazon Cloud infrastructure.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然可以肯定地说，通过前面提到的三种方法可以造成很大的损害，但同样可以说，依然有更多方式可以攻击身份。红队可以利用云基础设施作为攻击目标。Andres
    Riancho 开发的 Nimbostratus 工具是一个非常好的利用 Amazon 云基础设施的资源。
- en: As a member of the Red Team, you may also need to pursue attacks against the
    hypervisor (VMWare or Hyper-V). For this type of attack, you can use PowerMemory
    ([https://github.com/giMini/PowerMemory/](https://github.com/giMini/PowerMemory/))
    to exploit the VM's passwords.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 作为红队成员，你可能还需要对虚拟化程序（VMWare 或 Hyper-V）进行攻击。对于这种类型的攻击，你可以使用 PowerMemory（[https://github.com/giMini/PowerMemory/](https://github.com/giMini/PowerMemory/)）来利用虚拟机的密码。
- en: References
  id: totrans-126
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 参考文献
- en: 'Stealing Windows Credentials Using Google Chrome: [http://defensecode.com/news_article.php?id=21](http://defensecode.com/news_article.php?id=21)'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Google Chrome 偷取 Windows 凭据：[http://defensecode.com/news_article.php?id=21](http://defensecode.com/news_article.php?id=21)
- en: Russian hackers selling login credentials of UK politicians, diplomats - report
    [https://www.theregister.co.uk/2017/06/23/russian_hackers_trade_login_credentials/](https://www.theregister.co.uk/2017/06/23/russian_hackers_trade_login_credentials/)
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 俄罗斯黑客出售英国政治家和外交官的登录凭证——报告 [https://www.theregister.co.uk/2017/06/23/russian_hackers_trade_login_credentials/](https://www.theregister.co.uk/2017/06/23/russian_hackers_trade_login_credentials/)
- en: Botnet-as-a-Service is For Sale this Cyber Monday! [https://www.zingbox.com/blog/botnet-as-a-service-is-for-sale-this-cyber-monday/](https://www.zingbox.com/blog/botnet-as-a-service-is-for-sale-this-cyber-monday/)
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Botnet-as-a-Service 在这个网络星期一出售！[https://www.zingbox.com/blog/botnet-as-a-service-is-for-sale-this-cyber-monday/](https://www.zingbox.com/blog/botnet-as-a-service-is-for-sale-this-cyber-monday/)
- en: 'How Anywhere Computing Just Killed Your Phone-Based Two-Factor Authentication:
    [http://fc16.ifca.ai/preproceedings/24_Konoth.pdf](http://fc16.ifca.ai/preproceedings/24_Konoth.pdf)'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 随着任何地方计算的出现，手机基于二次身份验证的方式已经被终结：[http://fc16.ifca.ai/preproceedings/24_Konoth.pdf](http://fc16.ifca.ai/preproceedings/24_Konoth.pdf)
- en: 'Attackers Hit Weak Spots in 2-Factor Authentication: [https://krebsonsecurity.com/2012/06/attackers-target-weak-spots-in-2-factor-authentication/](https://krebsonsecurity.com/2012/06/attackers-target-weak-spots-in-2-factor-authentication/)'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击者攻击二次身份验证中的弱点：[https://krebsonsecurity.com/2012/06/attackers-target-weak-spots-in-2-factor-authentication/](https://krebsonsecurity.com/2012/06/attackers-target-weak-spots-in-2-factor-authentication/)
- en: 'Microsoft Windows CVE-2017-8563 Remote Privilege Escalation Vulnerability:
    [https://www.symantec.com/security_response/vulnerability.jsp?bid=99402](https://www.symantec.com/security_response/vulnerability.jsp?bid=99402)'
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Microsoft Windows CVE-2017-8563 远程权限提升漏洞：[https://www.symantec.com/security_response/vulnerability.jsp?bid=99402](https://www.symantec.com/security_response/vulnerability.jsp?bid=99402)
- en: 'Pass-The-Hash Toolkit: [https://www.coresecurity.com/corelabs-research-special/open-source-tools/pass-hash-toolkit](https://www.coresecurity.com/corelabs-research-special/open-source-tools/pass-hash-toolkit)'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Pass-The-Hash 工具包：[https://www.coresecurity.com/corelabs-research-special/open-source-tools/pass-hash-toolkit](https://www.coresecurity.com/corelabs-research-special/open-source-tools/pass-hash-toolkit)
- en: 'Nimbostratus Tool: [http://andresriancho.github.io/nimbostratus/](http://andresriancho.github.io/nimbostratus/)'
  id: totrans-134
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Nimbostratus 工具：[http://andresriancho.github.io/nimbostratus/](http://andresriancho.github.io/nimbostratus/)
- en: How activist DeRay Mckesson's Twitter account was hacked
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 活动家 DeRay Mckesson 的 Twitter 账户是如何被黑客攻击的
- en: '[https://techcrunch.com/2016/06/10/how-activist-deray-mckessons-twitter-account-was-hacked/](https://techcrunch.com/2016/06/10/how-activist-deray-mckessons-twitter-account-was-hacked/)'
  id: totrans-136
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://techcrunch.com/2016/06/10/how-activist-deray-mckessons-twitter-account-was-hacked/](https://techcrunch.com/2016/06/10/how-activist-deray-mckessons-twitter-account-was-hacked/)'
- en: Summary
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: In this chapter, you learned about the importance of identity for the overall
    security posture of an organization. You learned about the different strategies
    to compromise a user's identity that can be used by the Red Team. By learning
    more about the current threat landscape, the potential adversaries, and how they
    act, you can create a more accurate attack exercise to test the defense security
    controls. You learned about brute force attacks, social engineering using SET
    from Kali, pass-the-hash, and how these attacks can be used to perform lateral
    movement in order to accomplish the attack's mission.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你了解了身份对组织整体安全态势的重要性。你学习了红队可能用来妥协用户身份的不同策略。通过更多地了解当前的威胁形势、潜在的对手以及他们的行为方式，你可以创建更准确的攻击演练来测试防御安全控制。你了解了暴力破解攻击、使用Kali中的SET进行社会工程攻击、Pass-the-Hash攻击，以及这些攻击如何用来执行横向移动，以完成攻击任务。
- en: In the next chapter, you will learn more about lateral movement, how the Red
    Team will use the hacker's mindset to continue their mission of mapping the network,
    and avoiding alerts.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将进一步了解横向移动，红队如何利用黑客思维继续进行网络映射任务，并避免触发警报。
