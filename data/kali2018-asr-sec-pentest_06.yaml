- en: Vulnerability Scanning
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞扫描
- en: Vulnerability mapping is the process of identifying and analyzing the critical
    security flaws in a target environment. This is sometimes also referred to as
    a vulnerability assessment. It is one of the key areas of a vulnerability management
    program, through which the security controls of an IT infrastructure can be analyzed
    against known vulnerabilities. Once the operations of information gathering, discovery,
    and enumeration are complete, it is time to investigate the vulnerabilities in
    the target infrastructure that could lead to compromising the target and violating
    the confidentiality, integrity, and availability of a business system.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 漏洞映射是识别和分析目标环境中关键安全缺陷的过程。有时也被称为漏洞评估。这是漏洞管理计划的关键领域之一，通过它可以分析IT基础设施的安全控制与已知漏洞之间的关系。一旦信息收集、发现和枚举操作完成，就是时候调查目标基础设施中可能导致目标被攻破并侵犯商业系统的机密性、完整性和可用性的漏洞了。
- en: 'In this chapter, we will discuss two common types of vulnerabilities, present
    various standards for the classification of vulnerabilities, and explain some
    of the well-known vulnerability assessment tools provided under the Kali Linux
    operating system. This chapter explores the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论两种常见的漏洞类型，介绍各种用于分类漏洞的标准，并解释Kali Linux操作系统下提供的一些著名漏洞评估工具。本章探讨以下主题：
- en: 'The concepts of two generic types of vulnerabilities: local and remote.'
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 两种通用类型的漏洞概念：本地和远程。
- en: The vulnerability taxonomy that points to the industry standard, which can be
    used to classify any vulnerability according to its unifying commonality pattern.
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞分类法指向行业标准，可用于根据其统一的共性模式对任何漏洞进行分类。
- en: A number of security tools that can assist us in finding and analyzing the security
    vulnerabilities present in a target environment. The tools presented are categorized
    according to their basic function in a security assessment process. These include
    Nessus, Cisco, fuzzing tools, SMB, SNMP, and web application analysis tools.
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些安全工具可以帮助我们发现和分析目标环境中存在的安全漏洞。这些工具根据它们在安全评估过程中的基本功能进行分类。其中包括Nessus、思科、模糊测试工具、SMB、SNMP和Web应用程序分析工具。
- en: Note that the manual and automated vulnerability assessment procedures should
    be treated equally when handling any type of penetration testing assignment, whether
    internal or external. Relying strictly on automation may sometimes produce false
    positives and false negatives. The degree of the auditor's knowledge of technology-relevant
    assessment tools may be a determining factor when performing penetration tests.
    Both the tools used and the skill of the tester should be continually updated
    to ensure success. Moreover, it is necessary to mention that automated vulnerability
    assessment is not the final solution; there are situations where automated tools
    fail to identify logic errors, undiscovered vulnerabilities, unpublished software
    vulnerabilities, and the human variable that impacts security.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，在处理任何类型的渗透测试任务时，无论是内部还是外部，手动和自动漏洞评估程序应当受到同等对待。严格依赖自动化有时可能会产生误报和漏报。审计员对技术相关评估工具的了解程度可能是执行渗透测试时的决定性因素。测试人员使用的工具和技能应当不断更新以确保成功。此外，有必要提到自动漏洞评估并非最终解决方案；在某些情况下，自动化工具可能无法识别逻辑错误、未发现的漏洞、未公开的软件漏洞以及影响安全性的人为因素。
- en: Therefore, it is recommended that an integrated approach be used that leverages
    both automated and manual vulnerability assessment methods. This will heighten
    the probability of successful penetration tests, and provide the best possible
    information to correct vulnerabilities.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，建议使用综合方法，结合自动化和手动漏洞评估方法。这将提高成功渗透测试的可能性，并为纠正漏洞提供最佳信息。
- en: Technical requirements
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: A laptop or desktop with a minimum of 6 GB RAM, quad-core CPU, and 500 GB HDD
    space. For the operating system, we will be using Kali Linux 2018.2 or 2018.3
    (as a virtual machine, or installed on the HDD, SD card, or USB flash drive).
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 一台至少配备6GB RAM、四核CPU和500GB HDD空间的笔记本电脑或台式机。对于操作系统，我们将使用Kali Linux 2018.2或2018.3（作为虚拟机，或安装在HDD、SD卡或USB闪存驱动器上）。
- en: Types of vulnerabilities
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞类型
- en: 'There are three main classes of vulnerability by which the distinction for
    the types of flaws, both local and remote, can be made. These classes are generally
    divided into the categories of design, implementation, and operational vulnerabilities:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 有三个主要的漏洞类别，可以根据这些类别对缺陷的类型进行区分，包括本地和远程漏洞。这些类别通常分为设计、实施和操作漏洞：
- en: '**Design vulnerabilities**: These are discovered owing to the weaknesses found
    in the software specifications.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设计漏洞**：这些是由于软件规范中发现的弱点而被发现的。'
- en: '**Implementation vulnerabilities**: These are technical security glitches found
    in the code of a system.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实施漏洞**：这些是在系统代码中发现的技术安全漏洞。'
- en: '**Operational vulnerabilities**: These are vulnerabilities that may arise due
    to the improper configuration and deployment of a system in a specific environment.'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作漏洞**：这些是由于系统在特定环境中的不正确配置和部署而可能出现的漏洞。'
- en: Based on these three classes, we have two generic types of vulnerabilities,
    local and remote, which can appear in any class of the vulnerabilities explained.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 基于这三类，我们有两种通用类型的漏洞，即本地和远程漏洞，它们可以出现在任何类别的漏洞中。
- en: Local vulnerability
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本地漏洞
- en: A condition where the attacker requires local access in order to trigger the
    vulnerability by executing a piece of code is known as a local vulnerability.
    By taking advantage of this type of vulnerability, an attacker can increase their
    access privileges to gain unrestricted access to the computer.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者需要本地访问才能通过执行一段代码触发漏洞的情况被称为本地漏洞。通过利用这种类型的漏洞，攻击者可以提高其访问权限，获得对计算机的无限制访问。
- en: Let's take an example in which Bob has local access to a system running MS Windows
    Server 2008 (32-bit, x86 platform). His access has been restricted by the administrator
    through the implementation of a security policy, which will not allow him to run
    the specific application. Under extreme conditions, he found out that by using
    a malicious piece of code, he could gain system-level or kernel-level access to
    the computer. By exploiting a well known vulnerability (for example, CVE-2013-0232,
    GP Trap Handler nt!KiTrap0D), he gained escalated privileges that allowed him
    to perform all the administrative tasks and gain unrestricted access to the application.
    This shows us clearly how the malicious adversary exploited the vulnerability to
    gain unauthorized access to the system.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们举一个例子，鲍勃可以访问运行MS Windows Server 2008（32位，x86平台）的系统。 通过实施安全策略，管理员限制了他的访问权限，这将不允许他运行特定应用程序。
    在极端情况下，他发现通过使用恶意代码，他可以获得系统级或内核级访问权限。 通过利用已知的漏洞（例如CVE-2013-0232，GP Trap Handler
    nt!KiTrap0D），他获得了提升的特权，从而可以执行所有管理任务并无限制地访问应用程序。 这清楚地向我们展示了恶意对手如何利用漏洞来未经授权地访问系统。
- en: More information about CVE-2013-0232 MS Windows privilege escalation vulnerability
    can be found at [http://www.exploit-db.com/exploits/11199/](http://www.exploit-db.com/exploits/11199/).
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 有关CVE-2013-0232 MS Windows权限提升漏洞的更多信息，请访问[http://www.exploit-db.com/exploits/11199/](http://www.exploit-db.com/exploits/11199/)。
- en: Remote vulnerability
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 远程漏洞
- en: Remote vulnerability is a condition where the attacker has no prior access,
    but the vulnerability can still be exploited by triggering the malicious piece
    of code over the network. This type of vulnerability allows an attacker to gain
    remote access to a computer without facing any physical or local barriers.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 远程漏洞是指攻击者没有先前访问权限，但仍然可以通过网络触发恶意代码来利用漏洞。 这种类型的漏洞允许攻击者远程访问计算机，而无需面对任何物理或本地障碍。
- en: For instance, Bob and Alice are individually connected to the internet. Both
    of them have different IP addresses, and are geographically dispersed in two different
    regions. Let's assume that Alice's computer is running on a Windows XP operating
    system and holds secret biotech information. We also assume that Bob already knows
    the operating system and IP address of Alice's machine. Bob now looks for a solution
    that can allow him to gain remote access to her computer. In time, he finds out
    that the MS08-067 Windows Server Service's vulnerability can easily be exploited
    remotely against a Windows XP machine.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，鲍勃和爱丽丝分别连接到互联网。 他们两人有不同的IP地址，并且地理上分散在两个不同的地区。 假设爱丽丝的计算机正在运行Windows XP操作系统，并且保存着秘密的生物技术信息。
    我们还假设鲍勃已经知道爱丽丝机器的操作系统和IP地址。 现在鲍勃正在寻找一个可以让他远程访问她的计算机的解决方案。 最终，他发现MS08-067 Windows
    Server Service的漏洞可以轻松地远程利用Windows XP机器。
- en: He then triggers the exploit against Alice's computer and gains full access
    to it.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，他触发了针对爱丽丝计算机的利用，并完全访问了它。
- en: More information about MS08-067 MS Windows Server Service vulnerability can
    be found at [http://www.exploit-db.com/exploits/6841/](http://www.exploit-db.com/exploits/6841/).
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 有关MS08-067 MS Windows Server Service漏洞的更多信息，请访问[http://www.exploit-db.com/exploits/6841/](http://www.exploit-db.com/exploits/6841/)。
- en: Vulnerability taxonomy
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 漏洞分类
- en: 'With the increase in the available number of technologies over the past few
    years, there have been various attempts to introduce the best taxonomy that could
    categorize all of the common sets of vulnerabilities. However, no single taxonomy
    has been produced to represent all of the common coding mistakes that may affect
    the system''s security. This is owing to the fact that a single vulnerability
    might fall into more than one category or class. Additionally, every system platform
    has its own base for connectivity, complexity, and extensibility, with which it
    interacts with its environment. Thus, the taxonomy standards presented in the
    following table will help you identify most of the common security glitches whenever
    possible. Note that most of these taxonomies have already been implemented in
    a number of security assessment tools to investigate software security problems
    in real time:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在过去几年中，随着可用技术数量的增加，人们已经尝试引入最佳分类法，以对所有常见的漏洞集进行分类。 但是，没有一个单一的分类法能够代表可能影响系统安全的所有常见编码错误。
    这是因为单个漏洞可能属于多个类别。 此外，每个系统平台都有其与环境交互的连接性、复杂性和可扩展性基础。 因此，以下表中提出的分类标准将帮助您尽可能地识别大多数常见的安全漏洞。
    请注意，这些分类法中的大多数已经在许多安全评估工具中实施，以实时调查软件安全问题：
- en: '| **Security taxonomy** | **Resource link** |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: 安全分类资源链接
- en: '| Seven pernicious kingdoms | [http://www.cigital.com/papers/download/bsi11-taxonomy.pdf](http://www.cigital.com/papers/download/bsi11-taxonomy.pdf)
    |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: 七个有害王国[http://www.cigital.com/papers/download/bsi11-taxonomy.pdf](http://www.cigital.com/papers/download/bsi11-taxonomy.pdf)
- en: '| Common weakness enumeration | [http://cwe.mitre.org/data/index.html](http://cwe.mitre.org/data/index.html)
    |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: 常见弱点枚举[http://cwe.mitre.org/data/index.html](http://cwe.mitre.org/data/index.html)
- en: '| OWASP Top 10 | [http://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](http://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)
    |'
  id: totrans-30
  prefs: []
  type: TYPE_TB
  zh: OWASP十大漏洞[http://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](http://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)
- en: '| Klocwork | [http://www.klocwork.com/products/documentation/Insight-9.1/Taxonomy](http://www.klocwork.com/products/documentation/Insight-9.1/Taxonomy)
    |'
  id: totrans-31
  prefs: []
  type: TYPE_TB
  zh: Klocwork[http://www.klocwork.com/products/documentation/Insight-9.1/Taxonomy](http://www.klocwork.com/products/documentation/Insight-9.1/Taxonomy)
- en: '| WASC threat classification | [http://projects.webappsec.org/Threat-Classification](http://projects.webappsec.org/Threat-Classification)
    |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: WASC威胁分类[http://projects.webappsec.org/Threat-Classification](http://projects.webappsec.org/Threat-Classification)
- en: The primary function of each of these taxonomies is to organize sets of security
    vulnerabilities that can be used by security practitioners and developers to identify
    the specific errors that may have an impact on the system's security. Thus, no
    single taxonomy should be considered complete and accurate.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 每个这些分类法的主要功能是组织一组安全漏洞，这些漏洞可以被安全从业人员和开发人员用来识别可能对系统安全产生影响的特定错误。因此，没有一个分类法应被认为是完整和准确的。
- en: Automated vulnerability scanning
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动漏洞扫描
- en: The purist penetration testers will often comment that using an automated vulnerability
    scanner is cheating, but in some cases, such as penetration testing with a limited
    amount of time available, vulnerability scanners are critical to gaining a great
    deal of information about a target network in a short amount of time.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 纯粹的渗透测试人员经常评论使用自动漏洞扫描器是作弊，但在某些情况下，例如在有限的时间内进行渗透测试时，漏洞扫描器对于在短时间内获得有关目标网络的大量信息至关重要。
- en: Vulnerability scanning with Nessus 7
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Nessus 7进行漏洞扫描
- en: Tenable's Nessus is a very popular vulnerability assessment tool and has been
    around for almost two decades. Nessus can accessed with an annual subscription;
    however, the good folks at Tenable have made Nessus Professional available as
    a 7-day trial for those that may wish to try it.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: Tenable的Nessus是一个非常受欢迎的漏洞评估工具，已经存在了将近20年。Nessus可以通过年度订阅来访问；然而，Tenable的工作人员已经将Nessus专业版作为7天试用版提供给那些希望尝试的人。
- en: Before we install Nessus, you may wish to take note of the version of Kali Linux
    that you are running, to ensure that you download the appropriate version of Nessus.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在安装Nessus之前，您可能希望注意您正在运行的Kali Linux版本，以确保您下载适当版本的Nessus。
- en: 'To do this, simply type `uname –a` in a Terminal, as follows:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 要做到这一点，只需在终端中输入`uname -a`，如下所示：
- en: '![](img/87959570-cf53-44da-bb33-230d2f98bee6.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](img/87959570-cf53-44da-bb33-230d2f98bee6.png)'
- en: In this screenshot, we can see that I am using the 64-bit version (amd64) of
    Kali Linux based on Debian. As such, I will need to download the 64-bit version
    for Debian builds.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个截图中，我们可以看到我正在使用基于Debian的64位版本（amd64）的Kali Linux。因此，我需要下载Debian构建的64位版本。
- en: Installing the Nessus vulnerability scanner
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Nessus漏洞扫描器
- en: To install Nessus in Kali Linux, open a browser and navigate to the Nessus evaluation
    page at [https://www.tenable.com/try](https://www.tenable.com/try). The evaluation
    version comes with all the features of the full version, except for a 16-IP limitation
    scan.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Kali Linux中安装Nessus，打开浏览器并导航到Nessus评估页面[https://www.tenable.com/try](https://www.tenable.com/try)。评估版本具有完整版本的所有功能，但扫描受到16个IP的限制。
- en: You will be required to register with Tenable so that an evaluation code can
    be sent to your email.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您将需要在Tenable注册，以便评估代码可以发送到您的电子邮件。
- en: 'Once you have received the email with your evaluation code, you can then download
    the appropriate version of Nessus in Kali Linux, as shown here:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 收到带有评估代码的电子邮件后，您可以按照以下步骤在Kali Linux中下载适当版本的Nessus，如下所示：
- en: '![](img/4d12d21d-1c84-4b8e-8cd9-261499746044.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d12d21d-1c84-4b8e-8cd9-261499746044.png)'
- en: Select the version of Nessus to install, click on Accept to agree with the Nessus
    usage terms, and then save the Nessus download by clicking on the Save File option
    when prompted. This will save the file to your Downloads folder in Kali Linux.
    For this instance, I've selected the 64-bit version of Nessus (`Nessus-7.1.3-debian6_amd64.deb`).
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 选择要安装的Nessus版本，点击接受以同意Nessus使用条款，然后在提示时点击保存文件选项保存Nessus下载。这将把文件保存到Kali Linux的Downloads文件夹中。在这个例子中，我选择了64位版本的Nessus（`Nessus-7.1.3-debian6_amd64.deb`）。
- en: 'Once the download has completed, open a new Terminal and change to the Downloads
    directory by typing `cd Downloads`. Type `ls` to view the contents of the Downloads
    directory. Doing this will also be useful as we can copy the name of the Nessus
    download file and paste it in the following command. We then install Nessus by
    typing `dpkg –i Nessus-7.1.3-debian6_amd64.deb`, as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 下载完成后，打开一个新的终端，并通过输入`cd Downloads`来切换到Downloads目录。输入`ls`以查看Downloads目录的内容。这样做也很有用，因为我们可以复制Nessus下载文件的名称，并将其粘贴到以下命令中。然后，通过输入`dpkg
    -i Nessus-7.1.3-debian6_amd64.deb`来安装Nessus，如下所示：
- en: '![](img/a1a236f1-5538-4e7d-8e73-d4c32a2804e1.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a1a236f1-5538-4e7d-8e73-d4c32a2804e1.png)'
- en: If newer versions of Nessus are available, copy the name of your specific download
    file and version when executing the `dpkg -i` command.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 如果有更新版本的Nessus可用，执行`dpkg -i`命令时复制您特定的下载文件和版本的名称。
- en: 'While still within the Downloads folder, start the Nessus service by typing
    `service nessusd start`. Enter your password for Kali Linux when prompted, as
    follows:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在Downloads文件夹中，通过输入`service nessusd start`来启动Nessus服务。在提示时输入Kali Linux的密码，如下所示：
- en: '![](img/aa88c09f-15ba-48af-badf-cf5810947fb5.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aa88c09f-15ba-48af-badf-cf5810947fb5.png)'
- en: 'To use Nessus, open your browser and type the `https://localhost:8834` URL
    in the address bar and press *Enter*. When the insecure warning banner is displayed,
    click on the Advanced button, then click on Add Exception, then lastly click on
    Confirm Security Exception, as shown here:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Nessus，打开浏览器，在地址栏中输入`https://localhost:8834` URL，然后按*Enter*。当显示不安全警告横幅时，点击高级按钮，然后点击添加异常，最后点击确认安全异常，如下所示：
- en: '![](img/1ccb4d49-4cf9-44b8-aad2-4abea278c9bc.png)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1ccb4d49-4cf9-44b8-aad2-4abea278c9bc.png)'
- en: Follow steps 1-3 as prompted by first creating an account, specifying a username
    and account, and then clicking on Continue.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 按照提示执行步骤1-3，首先创建一个帐户，指定用户名和帐户，然后点击继续。
- en: 'In step 2, leave the default Scanner Type option set to Home, Professional,
    or Manager, and paste the activation code you received via email into the Activation
    Code field. Click on Continue to proceed. If all is well, Nessus will begin initializing
    by downloading and compiling the required plugins, as shown here:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在第2步中，将默认的扫描器类型选项设置为家庭、专业或管理器，并将通过电子邮件收到的激活代码粘贴到激活代码字段中。点击继续继续。如果一切顺利，Nessus将开始初始化，下载和编译所需的插件，如下所示：
- en: '![](img/6225136e-f27c-415d-97dc-805811b2bcff.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6225136e-f27c-415d-97dc-805811b2bcff.png)'
- en: This may take several minutes depending on your internet connection speed. In
    the meantime, feel free to browse Packt Publishing's many titles on penetration
    testing and Kali Linux at [www.packtpub.com](http://www.packtpub.com).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这可能需要几分钟，具体取决于您的互联网连接速度。与此同时，随时可以浏览Packt Publishing在渗透测试和Kali Linux上的许多标题[www.packtpub.com](http://www.packtpub.com)。
- en: 'Once all updates have been completed, the Nessus interface will be loaded.
    Click on the New Scan button in the top-right corner to view all scan types available,
    as seen in the following screenshot:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 完成所有更新后，Nessus界面将加载。单击右上角的“新扫描”按钮，以查看所有可用的扫描类型，如下截图所示：
- en: '![](img/0c72f543-31e0-4bcd-9920-4d9590f09739.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0c72f543-31e0-4bcd-9920-4d9590f09739.png)'
- en: 'There are a variety of scan templates to choose from, apart from a few that
    are only available with a paid subscription. In addition to performing host discovery
    and advanced scans, Nessus can perform many types of advanced vulnerability scans,
    including the following:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 除了一些仅适用于付费订阅的模板外，还有各种扫描模板可供选择。除了执行主机发现和高级扫描外，Nessus还可以执行许多类型的高级漏洞扫描，包括以下内容：
- en: Cloud infrastructure scanning
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 云基础设施扫描
- en: Local and remote bad shell detection scanning
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 本地和远程恶意shell检测扫描
- en: Internal PCI network scanning
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内部PCI网络扫描
- en: Linux and Windows malware scanning
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Linux和Windows恶意软件扫描
- en: Spectre and Meltdown scanning
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Spectre和Meltdown扫描
- en: Wannacry ransomware scanning
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wannacry勒索软件扫描
- en: Web vulnerability scanning
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web漏洞扫描
- en: 'Some of these are shown in the following screenshot:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 其中一些显示在以下截图中：
- en: '![](img/73d7bbe9-94d9-4af9-a8f6-b3eb2b1468e7.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/73d7bbe9-94d9-4af9-a8f6-b3eb2b1468e7.png)'
- en: For this assessment, I'll be using a vulnerable Linux web server for the purpose
    of demonstrating vulnerability disclosure. As mentioned in [Chapter 2](573e3579-5017-4c33-acd8-01e866ed66d8.xhtml),
    *Setting Up Your Test Lab, *you can choose to set up Metasploitable 2, Metasploitable
    3, Damn Vulnerable Linux, or even BadStore.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此评估，我将使用一个易受攻击的Linux Web服务器来演示漏洞披露的目的。如[第2章](573e3579-5017-4c33-acd8-01e866ed66d8.xhtml)中所述，*设置您的测试实验室*，您可以选择设置Metasploitable
    2、Metasploitable 3、Damn Vulnerable Linux，甚至BadStore。
- en: 'Click on the Advanced Scan template in the scanner window and populate the
    fields in the BASIC section. In the Targets field, specify the host or range of
    hosts to be scanned using the Advanced Scan template, as shown here:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 单击扫描窗口中的高级扫描模板，并填写基本部分中的字段。在目标字段中，指定要使用高级扫描模板扫描的主机或主机范围，如下所示：
- en: '![](img/994d1e37-16ee-45b9-a34d-59dd42908a69.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](img/994d1e37-16ee-45b9-a34d-59dd42908a69.png)'
- en: 'Explore the other sections of the left-hand column, as there are a number of
    different settings. Each of these allows you to customize the scan to fit your
    specific requirements:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 探索左侧栏的其他部分，因为有许多不同的设置。这些设置允许您自定义扫描以满足您的特定要求：
- en: 'Discovery: Nessus utilizes a number of different methods for discovering live
    hosts. Here you can set specific parameters for host discovery.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现：Nessus利用多种不同的方法来发现活动主机。在这里，您可以为主机发现设置特定参数。
- en: 'Assessment: This allows you to set the type and depth of scan.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估：这允许您设置扫描的类型和深度。
- en: 'Reporting: When it is time to prepare a penetration testing report, having
    detailed information about the vulnerability scan is important. This feature allows
    you to set the reporting parameters.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告：当准备渗透测试报告时，具有有关漏洞扫描的详细信息很重要。此功能允许您设置报告参数。
- en: 'Advanced: The advanced settings allow you to change the number of hosts scanned
    at once, and other timing parameters.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 高级：高级设置允许您更改一次扫描的主机数量和其他时间参数。
- en: Once you have configured your scan, you may either select Save or Launch. You
    will now see your scan listed under My Scans.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 配置完扫描后，可以选择保存或启动。现在，您将在“我的扫描”下看到您的扫描列表。
- en: 'Click on the Play icon to the right of your given scan name. This will run
    the scan. If you click on the scan name while it is running, you will see the
    hosts and general vulnerability information, as follows:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 单击给定扫描名称右侧的播放图标。这将运行扫描。如果您在扫描运行时单击扫描名称，将会看到主机和一般的漏洞信息，如下所示：
- en: '![](img/175fc56d-726c-4274-b701-383febd8f80e.png)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![](img/175fc56d-726c-4274-b701-383febd8f80e.png)'
- en: 'Clicking on the host brings you to a more detailed list of vulnerabilities
    discovered. The vulnerabilities are color-coded as follows:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 单击主机将带您进入发现的漏洞的更详细列表。漏洞按以下方式进行颜色编码：
- en: Red – critical
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 红色-关键
- en: Orange – high
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 橙色-高
- en: Yellow – medium
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黄色-中
- en: Green – low
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 绿色-低
- en: Blue – informational
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 蓝色-信息性
- en: 'As seen in the following screenshot, the scan results show a total of 70 vulnerabilities
    discovered, of which 6 are critical and 17 are high, meaning that this machine
    is highly vulnerable:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，扫描结果显示发现了70个漏洞，其中6个是关键的，17个是高级的，这意味着这台机器非常容易受攻击：
- en: '![](img/8bee9fc3-d629-4a2e-85df-91afc34c0bd7.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8bee9fc3-d629-4a2e-85df-91afc34c0bd7.png)'
- en: 'Clicking on the colored vulnerability categories displays the vulnerabilities
    in order of most vulnerable (that is, critical), to least vulnerable (informational):'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 单击有颜色的漏洞类别，按照最易受攻击（即关键）到最不易受攻击（信息性）的顺序显示漏洞：
- en: '![](img/45e21df9-caa0-4b0d-bb81-46ed80517ef0.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45e21df9-caa0-4b0d-bb81-46ed80517ef0.png)'
- en: 'Clicking on a vulnerability gives the tester more detailed information about
    the vulnerability, as shown here:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 单击漏洞将为测试人员提供有关漏洞的更详细信息，如下所示：
- en: '![](img/5d3837f8-4a08-4b14-80af-ca6d54fb23cd.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5d3837f8-4a08-4b14-80af-ca6d54fb23cd.png)'
- en: 'This information includes not only information about the vulnerability, but
    also information on whether there is an exploit available. This allows the penetration
    tester the ability to craft additional attacks against these vulnerabilities:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 这些信息不仅包括有关漏洞的信息，还包括是否有可用的利用程序的信息。这使得渗透测试人员能够针对这些漏洞制定额外的攻击：
- en: '![](img/3ecbc0d7-f578-4221-83fa-5ad4f3599232.png)'
  id: totrans-95
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3ecbc0d7-f578-4221-83fa-5ad4f3599232.png)'
- en: Nessus is a powerful tool to use in any penetration testing engagement. It provides
    a great deal of information and functionality that could not be addressed in this
    section. It is recommended that you spend some time getting to understand the
    features available and how to use them. In addition, Tenable has made the home
    version free of charge for you to test. In the event that you have external IPs,
    or are using Nessus for a client, you will have to use the paid version.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus是在任何渗透测试中使用的强大工具。它提供了大量信息和功能，本节无法涵盖。建议您花一些时间了解可用的功能以及如何使用它们。此外，Tenable已经免费提供了家庭版本供您测试。如果您有外部IP，或者正在为客户使用Nessus，您将不得不使用付费版本。
- en: Vulnerability scanning with OpenVAS
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用OpenVAS进行漏洞扫描
- en: '**Open Vulnerability Assessment System** (**OpenVAS**) is an open source vulnerability
    scanning framework. OpenVAS is simple to install and has a user-friendly interface
    for performing vulnerability assessments. According to the OpenVAS website ([http://www.openvas.org/about.html](http://www.openvas.org/about.html)),
    there are over 50,000 **Network Vulnerability Tests** (**NVTs**) within the framework,
    which is a part of the Greenbone Networks commercial vulnerability management
    framework.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: '**Open Vulnerability Assessment System**（**OpenVAS**）是一个开源漏洞扫描框架。OpenVAS安装简单，具有用户友好的界面，用于执行漏洞评估。根据OpenVAS网站（[http://www.openvas.org/about.html](http://www.openvas.org/about.html)），框架中有超过50,000个**网络漏洞测试**（**NVTs**），这是Greenbone
    Networks商业漏洞管理框架的一部分。'
- en: 'To install OpenVAS, open a new Terminal and type `apt-get install openvas`,
    as follows:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 要安装OpenVAS，请打开新的终端并输入`apt-get install openvas`，如下所示：
- en: '![](img/89942236-5f3f-46cb-ac99-2b7a1b9ebe35.jpg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/89942236-5f3f-46cb-ac99-2b7a1b9ebe35.jpg)'
- en: 'Once OpenVAS has been successfully installed, type `openvas-setup` into the
    Terminal to start the setup and configuration. This process may take quite some
    time, depending on your download speeds:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦OpenVAS安装成功，输入`openvas-setup`到终端开始设置和配置。这个过程可能需要一些时间，取决于你的下载速度：
- en: '![](img/c46cdddc-63bc-4cf9-bfc9-f07757d54d37.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c46cdddc-63bc-4cf9-bfc9-f07757d54d37.jpg)'
- en: 'At the end of the setup and configuration process, OpenVAS will generate a
    password key that will be required when starting OpenVAS:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置和配置过程结束时，OpenVAS将生成一个密码密钥，启动OpenVAS时将需要该密钥：
- en: '![](img/49b48b7d-3ea5-43a2-9f41-bba548476d99.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](img/49b48b7d-3ea5-43a2-9f41-bba548476d99.jpg)'
- en: To start the OpenVAS service, type `openvas-start`, then connect to the web
    interface by typing `https://127.0.0.1:9392` or `https://localhost:9392` in a
    browser window.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动OpenVAS服务，请输入`openvas-start`，然后在浏览器窗口中输入`https://127.0.0.1:9392`或`https://localhost:9392`连接到Web界面。
- en: When using OpenVAS again, simply open a Terminal and type `openvas-start`, as
    there will be no need to run the setup again.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 再次使用OpenVAS时，只需打开终端并输入`openvas-start`，因此无需再次运行设置。
- en: 'You will also have to click on Advanced, then Add Exception, and then lastly Confirm
    Security Exception after entering the previous URL, as shown in the following
    screenshot:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 您还需要点击高级，然后添加异常，最后在输入先前的URL后确认安全异常，如下面的屏幕截图所示：
- en: '![](img/2df559de-a9e0-4247-a86f-c94cefcc913c.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2df559de-a9e0-4247-a86f-c94cefcc913c.jpg)'
- en: 'When prompted, log in with the username `admin` and the password generated
    in the setup process. Be sure to keep this login stored securely, as you will
    be required to log in whenever using OpenVAS, as shown here:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 提示时，请使用用户名`admin`和在设置过程中生成的密码登录。请确保将此登录信息安全存储，因为您在使用OpenVAS时将需要登录，如下所示：
- en: '![](img/efa7b472-8fc3-489c-bbd6-73bd5660a301.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/efa7b472-8fc3-489c-bbd6-73bd5660a301.jpg)'
- en: 'To run a scan, click on Scans and then Tasks. An information box will open,
    prompting you to position the mouse over the Task Wizard, the purple icon at the
    top-left of the screen, as shown here:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要运行扫描，请点击扫描，然后点击任务。一个信息框将打开，提示您将鼠标放在屏幕左上角的紫色图标上的任务向导上，如下所示：
- en: '![](img/4d309c1d-e054-4d43-8cac-8329c5ad5181.jpg)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d309c1d-e054-4d43-8cac-8329c5ad5181.jpg)'
- en: 'Click on Advanced Task Wizard. Enter the relevant information into the given
    fields. Note that the Scan Config field has several scan types to choose from,
    including Discovery, Full and Fast, Full and fast ultimate, and Full and very
    deep ultimate (the most time- and resource-consuming option). The Start time option
    allows the penetration tester to schedule the scan. This can be quite useful,
    as scans may be disruptive on the network, so you may wish to run scans after
    working hours or on weekends, if necessary:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 单击高级任务向导。在给定字段中输入相关信息。请注意，扫描配置字段有多种扫描类型可供选择，包括发现、完整和快速、完整和快速终极以及完整和非常深的终极（最耗时和资源消耗的选项）。开始时间选项允许渗透测试人员安排扫描。这可能非常有用，因为扫描可能会对网络造成干扰，因此您可能希望在工作时间之后或周末运行扫描，如果有必要的话：
- en: '![](img/280b4af1-5aa0-498a-abdf-3c4fdbff4ea1.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/280b4af1-5aa0-498a-abdf-3c4fdbff4ea1.jpg)'
- en: 'Once all relevant fields have been completed, scroll down and click on Create.
    This starts the scan and displays a summary of the scan details and status, as
    seen here:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 完成所有相关字段后，向下滚动并单击创建。这将启动扫描并显示扫描详细信息和状态摘要，如下所示：
- en: '![](img/aed4ce65-4537-43ec-b0fd-bb0ba2cde7a8.jpg)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aed4ce65-4537-43ec-b0fd-bb0ba2cde7a8.jpg)'
- en: 'To view more details of the task, click on the task name within the Name field:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看任务的更多详细信息，请单击名称字段内的任务名称：
- en: '![](img/988f92d0-43c4-403d-a705-55384d3c9ec8.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/988f92d0-43c4-403d-a705-55384d3c9ec8.jpg)'
- en: 'When the scan is complete, click on Done. This generates a report listing the
    vulnerabilities found, along with a severity rating for each one:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，点击完成。这将生成一个报告，列出找到的漏洞以及每个漏洞的严重程度评级：
- en: '![](img/b76dbf59-51ae-45b5-8cae-8bb9ad2e17fd.jpg)'
  id: totrans-120
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b76dbf59-51ae-45b5-8cae-8bb9ad2e17fd.jpg)'
- en: 'Clicking on each of the vulnerabilities listed shows more information, including
    a Summary, Impact, Solution, Affected Software/OS, and other insights, as shown
    in more detail in the following screenshot:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 单击列出的每个漏洞会显示更多信息，包括摘要、影响、解决方案、受影响的软件/操作系统以及其他见解，如下面的屏幕截图所示：
- en: '![](img/217c2fd1-21e7-41f4-b0b5-153f4176e253.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![](img/217c2fd1-21e7-41f4-b0b5-153f4176e253.jpg)'
- en: Linux vulnerability scanning with Lynis
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Lynis进行Linux漏洞扫描
- en: Developed by Cisofy ([www.cisofy.com](http://www.cisofy.com)), Lynis is a command-line
    security auditing tool available within Kali Linux. Lynis is free to use, but
    an enterprise version also available. Lynis can be used to perform automated security
    audit assessments and vulnerability scans on various versions of Linux, macOS
    X, and Unix-based operating systems.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 由Cisofy（[www.cisofy.com](http://www.cisofy.com)）开发，Lynis是Kali Linux中可用的命令行安全审计工具。Lynis可免费使用，但也有企业版可用。Lynis可用于对各个版本的Linux、macOS
    X和基于Unix的操作系统执行自动化安全审计评估和漏洞扫描。
- en: What makes Lynis stand out is its focus on performing various HIPAA, PCIDSS,
    SOX, and GLBA compliance audits, which hold much value in an enterprise that has
    adopted various standards for compliance. Lynis can be downloaded and installed
    on standalone systems, thereby eliminating much of the traffic generated by remote
    auditing and vulnerability assessment tools, although there is the option to perform
    remote assessments.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: Lynis的特点在于它专注于执行各种HIPAA、PCIDSS、SOX和GLBA合规审计，在已采用各种合规标准的企业中具有很大的价值。Lynis可以下载并安装在独立系统上，从而消除了远程审计和漏洞评估工具产生的大部分流量，尽管也可以选择执行远程评估。
- en: Lynis is part of the Kali Linux suite, but can can also be cloned from GitHub
    ([https://github.com/CISOfy/lynis](https://github.com/CISOfy/lynis)) or downloaded
    directly from the official website ([https://cisofy.com/documentation/lynis/get-started/#installation](https://cisofy.com/documentation/lynis/get-started/#installation)).
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: Lynis是Kali Linux套件的一部分，但也可以从GitHub（[https://github.com/CISOfy/lynis](https://github.com/CISOfy/lynis)）克隆或直接从官方网站（[https://cisofy.com/documentation/lynis/get-started/#installation](https://cisofy.com/documentation/lynis/get-started/#installation)）下载。
- en: 'To run Lynis in Kali, you can do so via the main menu by clicking on Applications,
    thenVulnerability Analysis, then Lynis, or by typing `lynis` in the Terminal.
    This command displays the installed version of Lynis (in this case, 2.6.2) and
    initializes the program. Helpful command options are also displayed, as seen in
    the following screenshot:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Kali中运行Lynis，可以通过单击“应用程序”，然后单击“漏洞分析”，然后单击“Lynis”，或者在终端中键入`lynis`来执行。此命令显示了Lynis的安装版本（在本例中为2.6.2）并初始化程序。还显示了一些有用的命令选项，如下图所示：
- en: '![](img/32b1daa4-4e7b-4c26-af01-cdef0c835606.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/32b1daa4-4e7b-4c26-af01-cdef0c835606.png)'
- en: 'You may also type **`lynis show commands`** at any time to view the available
    commands within Lynis:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以随时键入**`lynis show commands`**来查看Lynis中可用的命令：
- en: '![](img/9ff880ee-5c7e-46b0-a9a4-cfd9cebbcfac.png)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9ff880ee-5c7e-46b0-a9a4-cfd9cebbcfac.png)'
- en: 'With Lynis being a fully automated audit assessment tool, there are minimal
    commands to use. To audit your entire Kali Linux machine, simply type `lynis audit
    system`. The timeframe for this assessment depends on the specifications of the
    Kali Linux machine running the assessment, but usually ranges from 15 to 30 minutes.
    The audit is shown here:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 由于Lynis是一个完全自动化的审计评估工具，因此使用的命令很少。要对整个Kali Linux机器进行审计，只需键入`lynis audit system`。此评估的时间取决于运行评估的Kali
    Linux机器的规格，但通常为15至30分钟。审计显示如下：
- en: '![](img/868dc2e4-59a5-42d4-92de-611d332ab931.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/868dc2e4-59a5-42d4-92de-611d332ab931.jpg)'
- en: 'Some of the testing and audits performed against the system include the following:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 对系统执行的一些测试和审计包括以下内容：
- en: Debian tests
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Debian测试
- en: Boot and services
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 引导和服务
- en: Kernel
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内核
- en: Memory and processes
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内存和进程
- en: Users, groups, and authentication
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户、组和身份验证
- en: Shells
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外壳
- en: Filesystem
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文件系统
- en: USB devices
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: USB设备
- en: Networking and firewalls
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络和防火墙
- en: Ports and printers
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口和打印机
- en: Kernel hardening
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内核加固
- en: '![](img/5bdfc838-a44e-4877-a4a8-595836b3085f.jpg)'
  id: totrans-145
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5bdfc838-a44e-4877-a4a8-595836b3085f.jpg)'
- en: 'The following screenshot shows a snippet of the Lynis audit results, with 4
    warnings and 40 suggestions:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了Lynis审计结果的片段，其中有4个警告和40个建议：
- en: '![](img/9cdd1abf-63cf-4c0b-9b26-19181ab34a82.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9cdd1abf-63cf-4c0b-9b26-19181ab34a82.png)'
- en: 'Scrolling to the end of the audit assessment, we can find the summarized details
    of the Lynis audit as follows:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 滚动到审计评估的末尾，我们可以找到Lynis审计的摘要详情如下：
- en: '![](img/d84ee4f1-1d92-4389-9ff2-93b6e3adf2c1.jpg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d84ee4f1-1d92-4389-9ff2-93b6e3adf2c1.jpg)'
- en: Vulnerability scanning and enumeration using SPARTA
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用SPARTA进行漏洞扫描和枚举
- en: SPARTA is a GUI network infrastructure penetration testing tool, authored by
    SECFORCE's Antonio Quina and Leonidas Stavliotis, and is available within Kali
    Linux. SPARTA automates the scanning, enumeration, and vulnerability assessment
    processes within one tool. Apart from its scanning and enumeration capabilities,
    SPARTA also has a built-in brute-force tool for cracking passwords.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: SPARTA是一个GUI网络基础设施渗透测试工具，由SECFORCE的Antonio Quina和Leonidas Stavliotis编写，并内置在Kali
    Linux中。SPARTA自动化了扫描、枚举和漏洞评估过程。除了其扫描和枚举功能外，SPARTA还具有用于破解密码的内置暴力破解工具。
- en: The latest versions of SPARTA can also be downloaded from GitHub and cloned
    to your local machine using the `git clone https://github.com/secforce/sparta.git`
    command.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 最新版本的SPARTA也可以从GitHub下载，并使用`git clone https://github.com/secforce/sparta.git`命令克隆到本地机器。
- en: To start SPARTA within Kali Linux 2018, click on Applications, then Vulnerability
    Analysis, then select SPARTA.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Kali Linux 2018中启动SPARTA，请单击“应用程序”，然后单击“漏洞分析”，然后选择SPARTA。
- en: 'In the SPARTA 1.0.3 GUI, click on the left pane to add your host or hosts to
    the scope. This can also be done by clicking on File, then Add host(s) to scope,
    as shown here:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 在SPARTA 1.0.3 GUI中，单击左窗格以将主机或主机添加到范围。也可以通过单击“文件”，然后单击“将主机添加到范围”来完成此操作，如下所示：
- en: '![](img/1337574f-32c9-4c01-a31c-009d8b110d94.jpg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1337574f-32c9-4c01-a31c-009d8b110d94.jpg)'
- en: 'Once hosts are added, Nmap host discovery and staged Nmap scans are run against
    the targets, as these options were selected in the previous screenshot. The following
    screenshot shows the scans in progress:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 添加主机后，针对目标运行Nmap主机发现和分阶段Nmap扫描，因为在上一个屏幕截图中选择了这些选项。以下屏幕截图显示了正在进行的扫描：
- en: '![](img/9039c6da-db3a-42db-b06a-0c498fc22a2a.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9039c6da-db3a-42db-b06a-0c498fc22a2a.png)'
- en: Once the Nmap scan is complete, SPARTA provides several tabs in the main window,
    such as Services, Scripts, Information, Notes, Nikto, and Screenshot tabs, all
    with very useful information.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 完成Nmap扫描后，SPARTA在主窗口中提供了几个选项卡，如Services、Scripts、Information、Notes、Nikto和Screenshot选项卡，都提供非常有用的信息。
- en: 'By default, we are first presented with a list of open ports and services under
    the Services tab, as shown here:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，我们首先在Services选项卡下看到了一个开放端口和服务列表，如下所示：
- en: '![](img/ed07fd38-861a-49cd-a96a-3832ec4cac9b.jpg)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ed07fd38-861a-49cd-a96a-3832ec4cac9b.jpg)'
- en: 'Clicking on the Information tab displays host information gathered, including
    IP information; number of ports open, closed, and filtered (if any); as well as
    the operating system and version with an accuracy rating:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 点击Information选项卡会显示收集的主机信息，包括IP信息；开放、关闭和过滤的端口数量（如果有）；以及操作系统和版本的准确度评级：
- en: '![](img/1c6dfb6b-32a6-4dcc-bfba-455a1d217adb.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1c6dfb6b-32a6-4dcc-bfba-455a1d217adb.png)'
- en: 'With the target in this case being a Linux web server, the Nikto web scanning
    tool was also run as part of the process. Clicking the nikto (80/tcp) tab reveals
    a list of vulnerabilities found:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在这种情况下，目标是一个Linux Web服务器，Nikto Web扫描工具也作为流程的一部分运行。点击nikto（80/tcp）选项卡会显示发现的漏洞列表：
- en: '![](img/ccf05705-04a8-42fb-ad2f-6ce50fd9dab3.png)'
  id: totrans-164
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ccf05705-04a8-42fb-ad2f-6ce50fd9dab3.png)'
- en: Many of the vulnerabilities found have the prefix OSVBD, which indicates that
    they can be searched for in databases such as the **Common Vulnerabilites and
    Exposures** (**CVE**) and **Open Source Vulnerabilities Database** (**OSVDB**) websites.
    A penetration tester could, for example, use a simple Google search for OSVDB-3268,
    which was revealed as a present vulnerability by SPARTA in the previous scan,
    to find more information about this vulnerability. They could then exploit this
    via various tools, such as Metasploit, as discussed in the following chapters
    of this book.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 发现的许多漏洞都带有OSVBD前缀，这表明它们可以在**通用漏洞和暴露**（**CVE**）和**开放源漏洞数据库**（**OSVDB**）等数据库中搜索。例如，渗透测试人员可以通过简单的Google搜索OSVDB-3268，找到SPARTA在先前扫描中发现的存在漏洞的更多信息。然后他们可以利用各种工具，如Metasploit，来利用这一点，这将在本书的后续章节中讨论。
- en: 'Looking at another Windows machine included in the scan (**10.10.22.217**),
    clicking on the Services tab reveals several open ports, as seen in the following
    screenshot:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 查看扫描中包含的另一台Windows机器（**10.10.22.217**），点击Services选项卡会显示几个开放端口，如下截图所示：
- en: '![](img/170687a0-e2fc-4379-b1d2-989862585584.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![](img/170687a0-e2fc-4379-b1d2-989862585584.jpg)'
- en: 'As a Windows machine was detected, the `smbenum` tool was run by SPARTA to
    enumerate the Windows machine to check for NULL sessions and perform enumeration
    tasks, including a search for users and shares, as shown here:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 由于检测到了Windows机器，SPARTA运行了`smbenum`工具来枚举Windows机器，以检查空会话并执行枚举任务，包括搜索用户和共享，如下所示：
- en: '![](img/c74d4806-6cd6-4f94-b374-7a65b4856d2d.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c74d4806-6cd6-4f94-b374-7a65b4856d2d.png)'
- en: SPARTA takes the scanning, enumeration, and vulnerability assessment another
    step further by allowing the penetration tester to actually perform various network
    penetration testing functions. In the Services tab, we can right-click on any
    of the open ports to perform these tasks.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: SPARTA通过允许渗透测试人员执行各种网络渗透测试功能，将扫描、枚举和漏洞评估推进了一步。在Services选项卡中，我们可以右键单击任何开放端口来执行这些任务。
- en: 'In the following screenshot, right-clicking on open port 3306 presents options
    to attempt opening the port with Telnet, Netcat, or with a MySQL client (as root).
    There is also an option to Send to Brute to attempt to crack passwords by brute
    force:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在下面的截图中，右键单击开放端口3306会呈现尝试使用Telnet、Netcat或MySQL客户端（作为root）打开端口的选项。还有一个选项是发送到Brute，尝试通过暴力破解来破解密码：
- en: '![](img/cafa5a47-1764-4c64-9eb1-89decac2edda.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cafa5a47-1764-4c64-9eb1-89decac2edda.png)'
- en: 'Clicking on Send to Brute attempts a brute-force attack via the selected port
    using the THC Hydra password cracking tool. Username and password lists can also
    be used in the attempt, along with various options to try a blank password, try
    the login as a password, and others. After specifying your options, click on Run
    to attempt the attack:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 点击Send to Brute会尝试通过所选端口使用THC Hydra密码破解工具进行暴力攻击。还可以在尝试中使用用户名和密码列表，以及各种选项尝试空密码、尝试登录作为密码等。在指定选项后，点击Run尝试进行攻击：
- en: '![](img/55fc817f-5279-4366-8990-c852bd05df2d.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/55fc817f-5279-4366-8990-c852bd05df2d.jpg)'
- en: 'These are by no means the only tools available in Sparta. For example, right-clicking
    on open port 445 on a Windows machine displays many more options available to
    the penetration tester, as seen here:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 这些绝不是Sparta中唯一可用的工具。例如，在Windows机器上右键单击开放端口445会显示渗透测试人员可用的更多选项，如下所示：
- en: '![](img/9b5608f3-603f-4b8a-a29b-feb99a315197.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b5608f3-603f-4b8a-a29b-feb99a315197.png)'
- en: Summary
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: 'In this chapter, we discussed the process of identifying and analyzing the
    critical security vulnerabilities based on a selection of tools used in Kali Linux.
    We also mentioned three main classes of vulnerabilities—design, implementation,
    and operational—and discussed how they could fall into two generic types of vulnerabilities:
    local and remote. Afterwards, we discussed several vulnerability taxonomies that
    could be followed by the security auditor to categorize the security flaws according
    to their unifying commonality patterns. In order to carry out a vulnerability
    assessment, we presented you with a number of tools that allow for automated scans
    and vulnerability assessments, including Nessus, OpenVAS, Lynis, and SPARTA.'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了基于Kali Linux中使用的一些工具的过程，以识别和分析关键的安全漏洞。我们还提到了三种主要类别的漏洞——设计、实施和操作，并讨论了它们如何分为两种通用类型的漏洞：本地和远程。之后，我们讨论了几种漏洞分类法，安全审计员可以按照它们的统一共性模式对安全漏洞进行分类。为了进行漏洞评估，我们向您介绍了一些允许进行自动化扫描和漏洞评估的工具，包括Nessus、OpenVAS、Lynis和SPARTA。
- en: In the next chapter, we will discuss the art of deception and explain various
    ways to exploit human vulnerabilities in order to acquire the target. Although
    this process is sometimes optional, it is considered vital when there is a lack
    of information available to allow us to exploit the target infrastructure.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论欺骗的艺术，并解释利用人类的各种弱点以获取目标的各种方法。虽然这个过程有时是可选的，但在缺乏信息可用以允许我们利用目标基础设施时，它被认为是至关重要的。
- en: Questions
  id: totrans-180
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What is the relationship between a vulnerability and an exploit?
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 漏洞和利用之间有什么关系？
- en: Which class of vulnerability is considered to be the worst to resolve?
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪类漏洞被认为是最难解决的？
- en: What website can be used to get information on the latest vulnerabilities?
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个网站可以用来获取最新漏洞的信息？
- en: What is the definition of a remote vulnerability?
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 远程漏洞的定义是什么？
- en: Which tool can perform internal and external PCI DSS scans?
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个工具可以执行内部和外部PCI DSS扫描？
- en: Which tool was built specifically for auditing Linux systems?
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个工具是专门用于审核Linux系统的？
- en: Which tool is integrated into Sparta to perform website scanning?
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个工具集成到Sparta中用于进行网站扫描？
- en: Further reading
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: Exploit and vulnerability information:  [https://www.exploit-db.com/](https://www.exploit-db.com/)
  id: totrans-189
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用和漏洞信息：[https://www.exploit-db.com/](https://www.exploit-db.com/)
- en: 'Common vulnerabilities and exposures database: [https://cve.mitre.org/](https://cve.mitre.org/)'
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 常见漏洞和暴露数据库：[https://cve.mitre.org/](https://cve.mitre.org/)
- en: 'Rapid7 vulnerability and exploit database: [https://www.rapid7.com/db](https://www.rapid7.com/db)'
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Rapid7漏洞和利用数据库：[https://www.rapid7.com/db](https://www.rapid7.com/db)
- en: Nessus scanning tutorials:  [https://docs.tenable.com/nessus/Content/Scans.htm](https://docs.tenable.com/nessus/Content/Scans.htm)
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus扫描教程：[https://docs.tenable.com/nessus/Content/Scans.htm](https://docs.tenable.com/nessus/Content/Scans.htm)
- en: 'OpenVAS community forum: [https://community.greenbone.net/](https://community.greenbone.net/)'
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OpenVAS社区论坛：[https://community.greenbone.net/](https://community.greenbone.net/)
