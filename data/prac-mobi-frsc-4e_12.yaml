- en: Android Data Analysis and Recovery
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安卓数据分析与恢复
- en: In the previous chapter, we covered various logical and physical extraction
    techniques. In physical extraction, a bit-by-bit image of the Android device is
    obtained, which contains valuable information. In this chapter, we will learn
    how to analyze and extract relevant data, such as call logs and text messages,
    from an image file. While the data extraction and analysis techniques provide
    information about various details, not all techniques can provide information
    about the deleted data. Data recovery is a crucial aspect of mobile forensics,
    as it helps to unearth the deleted items.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一章中，我们介绍了各种逻辑和物理数据提取技术。在物理提取中，会获取到安卓设备的逐位图像，其中包含了宝贵的信息。在本章中，我们将学习如何从图像文件中分析并提取相关数据，如通话记录和短信。尽管数据提取和分析技术能够提供各种细节的信息，但并非所有技术都能提供关于已删除数据的信息。数据恢复是移动取证中的一个关键环节，因为它有助于揭示已删除的项目。
- en: This chapter aims at covering various techniques, that can be used by a forensic
    analyst to recover the data from an Android device.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章旨在介绍可以被取证分析师用于从安卓设备中恢复数据的各种技术。
- en: 'In this chapter, we will cover the following two major topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下两个主要内容：
- en: Analyzing and extracting data from Android image files using the Autopsy tool
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用Autopsy工具分析并提取安卓图像文件中的数据
- en: Understanding techniques to recover deleted files from an SD card and the internal
    memory
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 了解从SD卡和内存中恢复已删除文件的技术
- en: Analyzing and extracting data from Android image files using the Autopsy tool
  id: totrans-6
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Autopsy工具分析并提取安卓图像文件中的数据
- en: The term **Android image** refers to the physical image (also called a forensic
    image or raw image) that is obtained by performing any of the physical data extraction
    techniques. Using the techniques explained in [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*, you can image the entire `/data/data` block
    or any particular block that is of relevance to the investigation. Once the image
    is obtained, an investigator like you can manually go through the contents of
    the file or take advantage of the available tools to parse through the contents.
    Commercial tools, such as Cellebrite and XRY, can drill into the data and present
    a comprehensive picture of the contents. Autopsy is one of the very widely used
    open source tools in the forensics world that performs an excellent job of analyzing
    an Android image.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '**安卓图像**一词指的是通过执行任何物理数据提取技术所获得的物理图像（也称为取证图像或原始图像）。使用[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)中解释的*安卓数据提取技术*，你可以对整个`/data/data`块或任何与调查相关的特定块进行成像。一旦获取到图像，像你这样的调查员可以手动浏览文件内容，或者利用现有工具解析内容。商业工具，如Cellebrite和XRY，能够深入数据并呈现出全面的内容图像。Autopsy是取证领域中广泛使用的开源工具之一，能够出色地分析安卓图像。'
- en: The Autopsy platform
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Autopsy平台
- en: Autopsy is a forensic platform and acts as a GUI for the Sleuth Kit. It is available
    for free; you can download it at [http://www.sleuthkit.org/](http://www.sleuthkit.org/).
    The Sleuth Kit is a collection of Unix and Windows-based tools and utilities,
    which are used to perform forensic analysis. Autopsy displays the results by forensically
    analyzing a given volume, and thereby helps investigators to focus on relevant
    sections of the data. Autopsy is free and extensible and has several modules that
    can be plugged in. Autopsy can be used to load and analyze an Android image that
    is obtained after physical extraction.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: Autopsy是一个取证平台，作为Sleuth Kit的图形界面（GUI）。它是免费的，你可以在[http://www.sleuthkit.org/](http://www.sleuthkit.org/)下载。Sleuth
    Kit是一个包含Unix和Windows工具及实用程序的集合，用于执行取证分析。Autopsy通过对给定卷进行取证分析来显示结果，从而帮助调查员集中注意数据的相关部分。Autopsy是免费的且具有可扩展性，拥有多个可以插件化的模块。Autopsy可以用来加载和分析通过物理提取获得的安卓图像。
- en: Adding an image to Autopsy
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 向Autopsy中添加图像
- en: 'Once you have downloaded and installed Autopsy, follow these steps to add an
    image to Autopsy:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 下载并安装Autopsy后，请按照以下步骤将图像添加到Autopsy中：
- en: 'Open the Autopsy tool and select the Create New Case option, as shown in the
    following screenshot:'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Autopsy工具并选择“创建新案件”选项，如下图所示：
- en: '![](img/7bcd8c15-85e4-473c-b9b5-a5d2ba2da1de.png)'
  id: totrans-13
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7bcd8c15-85e4-473c-b9b5-a5d2ba2da1de.png)'
- en: Creating a new case in Autopsy
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中创建新案件
- en: 'Enter all of the necessary case details, including the name of the case, the
    location where data needs to be stored, and so on, as shown in the following screenshot:'
  id: totrans-15
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入所有必要的案件详细信息，包括案件名称、数据存储位置等，如下图所示：
- en: '![](img/56ad49d1-b9fc-41b8-bb2f-15104f4a7417.png)'
  id: totrans-16
  prefs: []
  type: TYPE_IMG
  zh: '![](img/56ad49d1-b9fc-41b8-bb2f-15104f4a7417.png)'
- en: Entering case information in Autopsy
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中输入案件信息
- en: Enter the case number and examiner details, and click on Finish.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入案件编号和检查员详细信息，然后点击完成。
- en: 'Now, click on the Add Data Source button, add the image file to be analyzed,
    and click on Next:'
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，点击添加数据源按钮，添加要分析的镜像文件，并点击下一步：
- en: '![](img/19d316c7-1514-472b-b0ba-d2068d1843a4.png)'
  id: totrans-20
  prefs: []
  type: TYPE_IMG
  zh: '![](img/19d316c7-1514-472b-b0ba-d2068d1843a4.png)'
- en: Entering data source information in Autopsy
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中输入数据源信息
- en: 'On the next screen, you can configure what modules have to be run on the images,
    as shown in the following screenshot. It is recommended to select the Recent Activity,
    Exif Parser, Keyword Search, and Android Analyzer modules. In the next step, click
    on Finish:'
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在下一个屏幕上，您可以配置需要在镜像上运行的模块，如下图所示。建议选择最近活动、Exif解析器、关键字搜索和Android分析器模块。在下一步中，点击完成：
- en: '![](img/74334196-b009-4843-9e35-183edf3011f4.png)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![](img/74334196-b009-4843-9e35-183edf3011f4.png)'
- en: Configuring modules in Autopsy
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中配置模块
- en: Once this is done, the tool usually takes a few minutes to parse through the
    image depending on its size. During this time, you might see some errors or warning
    messages if any are encountered by the tool. However, Autopsy provides the fastest
    access to the artifacts and the filesystem when compared to other tools.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此操作后，工具通常需要几分钟时间来解析镜像，具体取决于镜像的大小。在此期间，如果工具遇到任何错误或警告信息，您可能会看到相关提示。然而，与其他工具相比，Autopsy提供了最快的访问速度，能够更快速地获取工件和文件系统。
- en: Analyzing an image using Autopsy
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Autopsy分析镜像
- en: 'Once the image is loaded, expand the file present under Data Sources to see
    data present in the image. For example, the following screenshot shows the contents
    of the `/data/` folder:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 加载镜像后，展开“数据源”下的文件，以查看镜像中的数据。例如，以下截图显示了`/data/` 文件夹的内容：
- en: '![](img/f59c327a-baa5-44f9-9d76-2411f1a28b8b.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f59c327a-baa5-44f9-9d76-2411f1a28b8b.png)'
- en: Analyzing an image in Autopsy
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中分析镜像
- en: 'In the preceding example, only the `/data` portion of the device has been imaged.
    If the entire device had been imaged, then the tool would show more volumes. Depending
    on the underlying details of the investigation, relevant portions need to be analyzed.
    In the following example, by examining the folders present under `com.android.browser`,
    we can extract the list of various sites visited by the user along with their
    access dates:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述示例中，仅对设备的`/data`部分进行了镜像。如果对整个设备进行了镜像，那么工具会显示更多的卷。根据调查的具体细节，必须分析相关部分。在下面的示例中，通过检查`com.android.browser`下的文件夹，我们可以提取出用户访问过的各种网站的列表及其访问日期：
- en: '![](img/c32ae2e2-df40-4ebd-a120-e66c47f35afc.png)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c32ae2e2-df40-4ebd-a120-e66c47f35afc.png)'
- en: Analyzing browsing details in Autopsy
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在Autopsy中分析浏览详情
- en: Valuable data, such as text messages, browsing history, chats, call history,
    pictures, videos, and location details, could be unearthed by analyzing the data
    present under various sections. In the next section, we shall look into data recovery
    from an SD card and the internal memory.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 通过分析各种部分下的数据，可以挖掘出有价值的数据，如短信、浏览历史、聊天记录、通话历史、图片、视频和位置信息。在下一节中，我们将研究如何从SD卡和内部存储中恢复数据。
- en: Understanding techniques to recover deleted files from the SD card and the internal
    memory
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 理解从SD卡和内部存储恢复已删除文件的技巧
- en: Data recovery is one of the most significant and powerful aspects of forensic
    analysis. The ability to recover deleted data can be crucial to crack many civil
    and criminal cases. From a normal user's point of view, recovering data that has
    been deleted would usually refer to the operating system's built-in solutions,
    such as the Recycle Bin in Windows. While it's true that data can be recovered
    from these locations, due to an increase in user awareness, these options don't
    often work. For instance, on a desktop computer, people now use *Shift* + *Delete*
    as a way to delete a file completely from their desktop.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 数据恢复是法医分析中最重要和最强大的方面之一。恢复已删除数据的能力对于破解许多民事和刑事案件至关重要。从普通用户的角度来看，恢复已删除的数据通常是指操作系统内置的解决方案，如Windows中的回收站。虽然确实可以从这些位置恢复数据，但由于用户意识的提高，这些选项通常不起作用。例如，在桌面计算机上，人们现在使用*Shift*
    + *Delete*作为完全删除文件的方式。
- en: 'Data recovery is the process of retrieving deleted data from a device when
    it cannot be accessed normally. Consider the scenario where a mobile phone has
    been seized from a terrorist. Wouldn''t it be of the greatest importance to know
    which items were deleted by the terrorist? Access to any deleted SMS messages,
    pictures, dialed numbers, application data, and more can be of critical importance,
    as they often reveal sensitive information. With Android, it is possible to recover
    most of the deleted data if the device files are properly acquired. However, if
    proper care is not taken while handling the device, the deleted data could be
    lost forever. To ensure that the deleted data is not overwritten, it is recommended
    to keep the following points in mind:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 数据恢复是指在设备无法正常访问时，从设备中恢复已删除数据的过程。考虑到一个手机被从恐怖分子手中扣押的情境，知道恐怖分子删除了哪些内容岂不是至关重要吗？访问任何已删除的短信、图片、拨打的电话号码、应用程序数据等都可能至关重要，因为它们常常揭示敏感信息。在
    Android 系统中，如果设备文件正确获取，通常可以恢复大多数已删除的数据。然而，如果在处理设备时没有采取适当的措施，已删除的数据可能永远丢失。为了确保已删除的数据不会被覆盖，建议牢记以下几点：
- en: Do not use the phone for any activity after seizing it. The deleted data exists
    on the device until space is needed by some other incoming data. Hence, the phone
    must not be used for any sort of activity to prevent the data from being overwritten.
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在扣押手机后，不要进行任何操作。已删除的数据会存在于设备中，直到有其他即将到来的数据需要占用空间。因此，必须避免对手机进行任何活动，以防数据被覆盖。
- en: Even when the phone is not used, without any intervention from our end, data
    can be overwritten. For instance, an incoming SMS would automatically occupy space,
    which could overwrite the data marked for deletion. To prevent the occurrence
    of such events, you should follow the forensic handling methods described in the
    previous chapters. The easiest solution is to place the device in airplane mode
    or disable all connectivity options on the device. This prevents the delivery
    of any new messages.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 即使手机未被使用，并且没有任何来自我们端的干预，数据仍然可能被覆盖。例如，收到一条短信会自动占用空间，这可能会覆盖被标记为删除的数据。为了防止这种情况发生，你应该遵循前几章描述的法医处理方法。最简单的解决方案是将设备设置为飞行模式，或禁用设备上的所有连接选项。这样可以防止任何新消息的传输。
- en: 'All Android filesystems have metadata that contains information about the hierarchy
    of files, filenames, and so on. Deletion will not really erase this data but remove
    the filesystem metadata. When text messages or any other files are deleted from
    the device, they are just made invisible to the user, but the files are still
    present on the device. Essentially, the files are simply marked for deletion,
    but they reside on the filesystem until being overwritten. Recovering deleted
    data from an Android device involves two scenarios: recovering data that is deleted
    from the SD card, such as pictures, videos, application data, and more, and recovering
    data that is deleted from the internal memory of the device. The following sections
    cover the techniques that can be used to recover deleted data from both the SD
    card and the internal memory of the Android device.'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 所有 Android 文件系统都有包含文件层次结构、文件名等信息的元数据。删除操作并不会真正删除这些数据，而是移除文件系统的元数据。当短信或任何其他文件从设备中删除时，它们只是对用户不可见，但文件仍然存在于设备上。本质上，这些文件只是被标记为删除，直到被覆盖，才会从文件系统中完全移除。从
    Android 设备中恢复已删除的数据有两种情况：恢复从 SD 卡中删除的数据，如图片、视频、应用程序数据等，以及恢复从设备内存中删除的数据。以下章节将介绍从
    SD 卡和 Android 设备内部存储中恢复已删除数据的技术。
- en: Recovering deleted data from an external SD card
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从外部 SD 卡恢复已删除的数据
- en: Data present on SD cards can reveal a lot of information to forensic investigators.
    SD cards are capable of storing pictures and videos taken by the phone's camera,
    voice recordings, application data, cached files, and more. Essentially, anything
    that can be stored on a computer hard drive can be stored on an SD card as much
    as the available space allows.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: SD 卡上的数据可以向法医调查员透露大量信息。SD 卡能够存储手机相机拍摄的图片和视频、语音录音、应用程序数据、缓存文件等。基本上，任何可以存储在计算机硬盘上的内容，都可以存储在
    SD 卡上，只要有足够的空间。
- en: Recovering the deleted data from an external SD card is a straightforward process.
    SD cards can be mounted as an external mass storage device and forensically acquired
    using standard digital forensic methods, as discussed in [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*. As mentioned in the previous chapters, SD
    cards in Android devices often use the FAT32 filesystem. The main reason for this
    is that the FAT32 filesystem is widely supported in most operating systems, including
    Windows, Linux, and macOS X. The maximum file size on a FAT32 formatted drive
    is around 4 GB. With increasingly high-resolution formats now available, this
    limit is commonly reached. Apart from this, FAT32 can only be used on partitions
    that are less than 32 GB in size. Hence, the exFAT filesystem, which overcomes
    these problems, is now being used in some of the devices.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 从外部SD卡恢复已删除的数据是一个直接的过程。SD卡可以作为外部大容量存储设备挂载，并通过标准的数字取证方法进行法证获取，如[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)《*安卓数据提取技术*》中所述。如前几章所提到，安卓设备中的SD卡通常使用FAT32文件系统。主要原因是FAT32文件系统在大多数操作系统中得到了广泛支持，包括Windows、Linux和macOS
    X。FAT32格式化驱动器的最大文件大小约为4GB。随着如今高分辨率格式的普及，这一限制经常被达到。除此之外，FAT32只能用于小于32GB的分区。因此，exFAT文件系统由于解决了这些问题，现在被一些设备所采用。
- en: 'Recovering the deleted data from an external SD card can be easily accomplished
    if it can be mounted as a drive. Hence, if the SD card is removable, connect it
    to a workstation using a write blocker for acquisition. However, the latest Android
    devices do not usually mount as a mass storage. This is because these devices
    use the **Media Transfer Protocol** (**MTP**) or **Picture Transfer Protocol**
    (**PTP**) protocols instead of USB mass storage. The problem with USB mass storage
    is that the computer would need exclusive access to the storage. In other words,
    the external storage needs to be completely disconnected from the Android OS when
    it is connected to a workstation. This has led to several other complications
    for mobile apps. When an Android device uses MTP, it appears to the computer as
    a media device and not as Removable Storage, as shown in the following screenshot:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 如果外部SD卡可以作为驱动器挂载，恢复已删除的数据是非常简单的。因此，如果SD卡是可拆卸的，可以使用写保护器将其连接到工作站进行获取。然而，最新的安卓设备通常不会作为大容量存储设备挂载。这是因为这些设备使用**媒体传输协议**（**MTP**）或**图片传输协议**（**PTP**）协议，而不是USB大容量存储。USB大容量存储的问题在于，计算机需要对存储设备具有独占访问权限。换句话说，外部存储设备在连接到工作站时，必须与安卓操作系统完全断开。这给移动应用带来了其他一些复杂问题。当安卓设备使用MTP时，它在计算机上显示为媒体设备，而不是可移动存储，如下图所示：
- en: '![](img/0cc751b4-0dd5-42dd-8374-9e338934d118.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0cc751b4-0dd5-42dd-8374-9e338934d118.png)'
- en: Android device connection using MTP
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 使用MTP连接安卓设备
- en: But the normal data recovery tools would need a mount drive to perform a scan.
    Hence, most of the latest devices that use MTP/PTP are not treated as a mount
    drive, and so the traditional data recovery tools that work for computers do not
    work on them.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，普通的数据恢复工具需要一个挂载的驱动器才能执行扫描。因此，大多数最新的使用MTP/PTP协议的设备不会被视为挂载驱动器，因此适用于计算机的传统数据恢复工具无法在它们上工作。
- en: For this reason, when the device uses MTP/PTP and is not mounted as a drive,
    the recovery can be done by certain Android-specific data recovery tools that
    need the USB debugging option to be turned on. Almost all Android data recovery
    tools in the market need you to enable USB debugging so that your device and the
    SD card can be recognized before starting Android data recovery.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，当设备使用MTP/PTP且未作为驱动器挂载时，可以通过某些特定的安卓数据恢复工具进行恢复，这些工具需要开启USB调试选项。市面上几乎所有的安卓数据恢复工具都需要你启用USB调试，这样设备和SD卡才能在开始数据恢复之前被识别。
- en: You must understand that Android devices might use space on the SD card to cache
    application data; therefore, it is important to make sure that as much data as
    possible is obtained from the device prior to removing the SD card. Some older
    devices automatically mount the device as a drive when connected through USB.
    It is a sound forensic practice to not work directly on the device for data extraction,
    data recovery, and so on. Hence, a physical image of the SD card needs to be taken
    and all required analysis is performed on the image itself. It is recommended
    to acquire the SD card through the device as well as separately to ensure that
    all data is obtained. To achieve the SD card image, `dd` through `adb` can be
    used while the device is running to obtain an image of the SD card of the device
    if the device cannot be powered off due to possible evidence running in the memory.
    If the SD card is removed and connected to the workstation through a card reader,
    it appears as external mass storage, which can then be imaged using the standard
    forensic techniques described in earlier chapters.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 你必须明白，Android 设备可能会使用 SD 卡上的空间来缓存应用程序数据；因此，在移除 SD 卡之前，确保尽可能多地从设备中获取数据非常重要。一些旧设备在通过
    USB 连接时会自动将设备挂载为驱动器。对于数据提取、数据恢复等操作，最佳的法医实践是不直接在设备上进行操作。因此，需要对 SD 卡进行物理镜像，并在镜像文件上进行所有必要的分析。建议通过设备和单独获取
    SD 卡，以确保所有数据都被提取。为了获得 SD 卡的镜像，如果设备由于可能有证据在内存中运行无法关闭，可以使用 `dd` 通过 `adb` 在设备运行时获取
    SD 卡的镜像。如果将 SD 卡取出并通过读卡器连接到工作站，它将作为外部大容量存储显示，之后可以使用之前章节中描述的标准法医技术对其进行镜像。
- en: Once the image is obtained, it can be analyzed using any standard forensic tools,
    such as FTK Imager. FTK Imager is a simple tool that can be used to create and
    analyze disk images. It is available for download at [https://accessdata.com/product-download/ftk-imager-version-3.2.0](https://accessdata.com/product-download/ftk-imager-version-3.2.0).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 获取镜像后，可以使用任何标准法医工具进行分析，例如 FTK Imager。FTK Imager 是一个简单的工具，可以用来创建和分析磁盘镜像。它可以在[https://accessdata.com/product-download/ftk-imager-version-3.2.0](https://accessdata.com/product-download/ftk-imager-version-3.2.0)下载。
- en: 'The following is a step-by-step process to recover the deleted files from an
    SD card image using FTK Imager:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用 FTK Imager 从 SD 卡镜像恢复已删除文件的分步过程：
- en: 'Start FTK Imager and click on File, then click on Add Evidence Item... in the
    menu:'
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动 FTK Imager，点击“文件”，然后在菜单中点击“添加证据项...”：
- en: '![](img/f9157927-aeda-4160-b896-13aacb1227cb.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f9157927-aeda-4160-b896-13aacb1227cb.png)'
- en: Adding evidence in FTK Imager
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FTK Imager 中添加证据
- en: 'Select Image File as the evidence type in the Select Source dialog, and click
    on Next:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择源”对话框中选择图像文件作为证据类型，然后点击“下一步”：
- en: '![](img/88ef8592-2aa5-49c6-8fcc-a64e4c705149.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88ef8592-2aa5-49c6-8fcc-a64e4c705149.png)'
- en: Selecting file type in FTK Imager
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FTK Imager 中选择文件类型
- en: 'In the Select File dialog, go to the location where the `SDCARD.dd` SD card
    image file is present, select it, and click on Finish:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在“选择文件”对话框中，定位到 `SDCARD.dd` SD 卡镜像文件所在的位置，选择该文件，然后点击“完成”：
- en: '![](img/55fd1ac0-095a-4d90-8013-82442a372936.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/55fd1ac0-095a-4d90-8013-82442a372936.png)'
- en: Selecting the image file for analysis in FTK Imager
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FTK Imager 中选择分析的镜像文件
- en: 'The contents of the SD card image are then shown in the View pane. You can
    browse through the folders by clicking on the + sign. When a folder is highlighted,
    the contents are shown on the right pane. When a file is selected, its contents
    can be seen in the bottom pane. As shown in the following screenshot, the deleted
    files are also shown with a red cross mark over the icon:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SD 卡镜像的内容随后显示在“视图”窗格中。你可以通过点击“+”号浏览文件夹。当文件夹被高亮显示时，右侧窗格将显示其中的内容。当选择某个文件时，它的内容将在底部窗格中显示。如以下截图所示，已删除的文件也会在图标上显示红色叉标记：
- en: '![](img/d7b02a85-49af-428f-9f32-64b7a357eb48.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d7b02a85-49af-428f-9f32-64b7a357eb48.png)'
- en: Deleted files shown with a red cross over the icons in FTK Imager
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FTK Imager 中，已删除的文件会显示带有红色叉标记的图标
- en: 'To copy the deleted files to the workstation, right-click on the marked file
    and select Export Files..., as shown in the following screenshot:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将已删除的文件复制到工作站，右键点击标记的文件并选择“导出文件...”，如下所示：
- en: '![](img/4d7afc47-f079-44d2-aa77-778c938e6ec8.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d7afc47-f079-44d2-aa77-778c938e6ec8.png)'
- en: Recovering deleted images in FTK Imager
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 在 FTK Imager 中恢复已删除的图片
- en: 'It is also recommended to check whether the device has any backup applications
    or files installed. The initial release of Android did not include a mechanism
    for users to back up their personal data. Hence, several backup applications were
    used extensively by users. Using these apps, users can back up their data either
    to the SD card or to the cloud. For example, the **Super Backup** app contains
    the options to back up call logs, contacts, SMS, and more, as shown in the following
    screenshot:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 还建议检查设备是否安装了任何备份应用程序或文件。安卓的初始版本并未包含供用户备份个人数据的机制。因此，许多备份应用程序被广泛使用。通过这些应用，用户可以将数据备份到
    SD 卡或云端。例如，**超级备份**应用包含备份通话记录、联系人、短信等选项，如下图所示：
- en: '![](img/3613f886-2579-4196-8738-221a53c6ba08.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3613f886-2579-4196-8738-221a53c6ba08.png)'
- en: The Super Backup Android app
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 超级备份安卓应用
- en: Upon detection of a backup application, you must attempt to determine where
    the data is stored. Usually, the backup folder path is the internal SD card. The
    folder path is also present in the backup app's settings. The data saved in a
    backup may contain important information, and hence, looking for any third-party
    backup app on the device would be very helpful.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦检测到备份应用程序，您必须尝试确定数据存储位置。通常，备份文件夹的路径是内部 SD 卡。文件夹路径也可以在备份应用的设置中找到。备份中保存的数据可能包含重要信息，因此，在设备上寻找任何第三方备份应用将非常有帮助。
- en: Recovering data deleted from the internal memory
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从内部存储器恢复已删除数据
- en: 'Recovering files that are deleted from an Android device''s internal memory
    (such as SMS, contacts, and app data) is not supported by all analytical tools
    and may require manual carving. Unlike some media containing common filesystems,
    such as SD cards, the filesystem may not be recognized and mounted by forensic
    tools. Also, you cannot get access to the raw partitions of the internal memory
    of an Android phone unless the phone is rooted. It is recommended to image the
    device before and after the rooting process happens. The following are some of
    the other issues that you may face when attempting to recover data from the internal
    memory on Android devices:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复从安卓设备内部存储器中删除的文件（如短信、联系人和应用数据）并不是所有分析工具都支持的，可能需要手动恢复。与某些包含常见文件系统的媒体（如 SD 卡）不同，文件系统可能无法被取证工具识别和挂载。此外，除非手机已经
    root，否则无法访问安卓手机的内部存储原始分区。建议在 root 过程开始前和结束后对设备进行镜像。以下是您在尝试从安卓设备的内部存储器恢复数据时可能遇到的一些其他问题：
- en: To get access to the internal memory, you can try to root the phone. However,
    the rooting process might involve writing some data to the `/data` partition,
    and this process could overwrite the data of value on the device.
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 若要访问内部存储器，您可以尝试对手机进行 root 操作。然而，root 过程可能涉及将一些数据写入 `/data` 分区，这一过程可能会覆盖设备中有价值的数据。
- en: Unlike SD cards, the internal filesystem here is not FAT32 (which is widely
    supported by forensic tools). The internal filesystem could be YAFFS2 (on older
    devices), EXT3, EXT4, RFS, or something proprietary built to run on Android. Therefore,
    many of the recovery tools designed for use with Windows filesystems won't work.
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 SD 卡不同，这里的内部文件系统不是 FAT32（该格式被大多数取证工具广泛支持）。内部文件系统可能是 YAFFS2（用于较老设备）、EXT3、EXT4、RFS
    或专为安卓系统设计的专有格式。因此，许多为 Windows 文件系统设计的恢复工具将无法使用。
- en: Application data on Android devices is commonly stored in the SQLite format.
    While most forensic tools provide access to the database files, they may have
    to be exported and viewed in a native browser. You must examine the raw data to
    ensure that the deleted data is not overlooked by the forensic tool.
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安卓设备上的应用数据通常以 SQLite 格式存储。虽然大多数取证工具提供对数据库文件的访问，但可能需要导出并在本地浏览器中查看。您必须检查原始数据，以确保删除的数据没有被取证工具忽视。
- en: The discussed reasons make it difficult, but not impossible, to recover the
    deleted data from the internal memory. The internal memory of Android devices
    holds the bulk of the user data and the possible keys to your investigation. As
    previously mentioned, the device must be rooted to access the raw partitions.
    Most of the Android recovery tools on the market do not highlight the fact that
    they only work on rooted phones. Let's now take a look at how we can recover deleted
    data from an Android phone.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 讨论的原因使得从内部存储恢复已删除的数据变得困难，但并非不可能。Android设备的内部存储包含了大部分用户数据和可能与调查相关的关键数据。如前所述，必须对设备进行root权限处理才能访问原始分区。市面上的大多数Android恢复工具并未强调它们仅能在已root的手机上工作。现在，让我们来看看如何从Android手机恢复已删除的数据。
- en: Recovering deleted files by parsing SQLite files
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通过解析SQLite文件恢复已删除文件
- en: Android uses SQLite files to store most data. Data related to text messages,
    emails, and certain app data is stored in SQLite files. SQLite databases can store
    deleted data within the database itself. Files marked for deletion by the user
    no longer appear in the active SQLite database files. Therefore, it is possible
    to recover the deleted data, such as text messages and contacts. There are two
    areas within a SQLite page that can contain deleted data—unallocated blocks and
    free blocks.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: Android使用SQLite文件来存储大部分数据。与短信、电子邮件以及某些应用数据相关的数据存储在SQLite文件中。SQLite数据库可以在数据库本身内存储已删除的数据。用户标记为删除的文件将不再出现在活动的SQLite数据库文件中。因此，可以恢复已删除的数据，如短信和联系人。在SQLite页面内有两个区域可能包含已删除的数据——未分配块和空闲块。
- en: Most of the commercial tools that recover deleted data scan the unallocated
    blocks and free blocks of the SQLite pages. Parsing the deleted data can be done
    using the available forensic tools, such as **Oxygen Forensics SQLite Viewer**.
    The trial version of the SQLite Viewer can be used for this purpose; however,
    there are certain limitations on the amount of data that you can recover. You
    can write your own script to parse the files for deleted content, and for this,
    you need to have a good understanding of the SQLite file format. The [http://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html) page is
    a good place to start. If you do not want to reinvent the wheel and want to reuse
    the existing scripts, you can try the available open source Python scripts ([http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html](http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html))
    to parse the SQLite files for deleted records.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数用于恢复已删除数据的商业工具扫描SQLite页面中的未分配块和空闲块。解析已删除数据可以使用现有的取证工具，如**Oxygen Forensics
    SQLite Viewer**。可以使用SQLite Viewer的试用版本来实现这一目的，但有一定的限制，限制了你能恢复的数据量。你也可以编写自己的脚本来解析文件中的已删除内容，为此你需要对SQLite文件格式有良好的理解。[http://www.sqlite.org/fileformat.html](http://www.sqlite.org/fileformat.html)
    页面是一个不错的起点。如果你不想从头开始并希望重用现有的脚本，可以尝试使用现有的开源Python脚本（[http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html](http://az4n6.blogspot.in/2013/11/python-parser-to-recover-deleted-sqlite.html)）来解析SQLite文件中的已删除记录。
- en: 'For our example, we will recover deleted SMSes from an Android device. Recovering
    deleted SMSs from an Android phone is quite often requested as part of the forensic
    analysis of a device, mainly because text messages contain data, which can reveal
    a lot of information. There are different ways to recover deleted text messages
    on an Android device. First, we need to understand where the messages are being
    stored on the device. In [Chapter 9](bf232566-3a17-4914-992b-80674dd379de.xhtml),
    *Android Data Extraction Techniques*, we explained the important locations on
    the Android device where user data is stored. Here is a quick recap of this:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的示例中，我们将从Android设备恢复已删除的短信。恢复已删除的短信是Android手机取证分析中经常要求的一部分，主要是因为短信包含的数据能够揭示大量信息。恢复Android设备上已删除短信的方法有很多。首先，我们需要了解这些短信存储在设备的哪个位置。在[第9章](bf232566-3a17-4914-992b-80674dd379de.xhtml)，*Android数据提取技术*中，我们解释了Android设备中存储用户数据的重要位置。这里是一个简要回顾：
- en: Every application stores its data under the `/data/data` folder (again, this
    requires root access to acquire data).
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个应用程序都会将其数据存储在 `/data/data` 文件夹下（同样，这需要root权限才能获取数据）。
- en: The files under the location, `/data/data/com.android.providers.telephony/databases`,
    contain details about the SMS/MMS.
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 位于 `/data/data/com.android.providers.telephony/databases` 位置的文件包含有关短信/MMS的详细信息。
- en: 'Under the mentioned locations, text messages are stored in an SQLite database
    file, which is named `mmssms.db`. Deleted text messages can be recovered by examining
    this file. Here are the steps to recover deleted SMSes using the `mmssms.db` file:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述位置，短信被存储在一个名为`mmssms.db`的SQLite数据库文件中。通过检查此文件可以恢复已删除的短信。以下是使用`mmssms.db`文件恢复已删除短信的步骤：
- en: 'On the Android device, enable the USB debugging mode and connect the device
    to the forensic workstation. Using the `adb` command-line tool, extract the databases
    folder present at `/data/data/` by issuing the following command:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在Android设备上，启用USB调试模式并将设备连接到取证工作站。使用`adb`命令行工具，通过发出以下命令提取位于`/data/data/`路径下的数据库文件夹：
- en: '[PRE0]'
  id: totrans-84
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The output can be seen as follows:'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 输出结果如下所示：
- en: '![](img/c0fa3c4a-cf09-4b3f-a49d-bfc7153176a6.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c0fa3c4a-cf09-4b3f-a49d-bfc7153176a6.png)'
- en: ADB pull command
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ADB拉取命令
- en: Once the files are extracted to the local machine, use the Oxygen Forensics
    SQLite Viewer tool to open the `mmssms.db` file.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦文件提取到本地计算机，使用Oxygen Forensics SQLite Viewer工具打开`mmssms.db`文件。
- en: Click on the table named `sms` and observe the current message under the Tables
    data tab in the tool.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击名为`sms`的表格，并在工具的Tables数据标签下观察当前消息。
- en: 'One way to view the deleted data is by clicking on the Blocks containing deleted
    data tab, as shown in the following screenshot:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看已删除数据的一种方式是点击包含已删除数据的块标签，如下图所示：
- en: '![](img/cd09b6cc-c32f-4012-927d-7a1a21324e42.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cd09b6cc-c32f-4012-927d-7a1a21324e42.png)'
- en: Recovering deleted SMS messages
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复已删除的短信
- en: Similarly, other data residing on Android devices that is stored in SQLite files
    can be recovered by parsing for deleted content. When the preceding method doesn't
    provide access to the deleted data, you should look at the file in raw hex file
    for data marked as deleted, which can be manually carved and reported.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 类似地，存储在Android设备上的其他数据，若以SQLite文件形式存储，也可以通过解析删除内容来恢复。当上述方法无法访问已删除数据时，应查看文件的原始十六进制文件，寻找标记为已删除的数据，这些数据可以手动雕刻并报告。
- en: Recovering files using file-carving techniques
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文件雕刻技术恢复文件
- en: File carving is an extremely useful method in forensics because it allows data
    that has been deleted or hidden to be recovered for analysis. In simple terms,
    file carving is the process of reassembling computer files from fragments in the
    absence of filesystem metadata. In file carving, specified file types are searched
    for and extracted across the binary data to create a forensic image of a partition
    or an entire disk. File carving recovers files from the unallocated space in a
    drive based merely on file structure and content without any matching filesystem
    metadata. Unallocated space refers to the part of the drive that no longer holds
    any file information indicated by the filesystem structures, such as the file
    table.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 文件雕刻是一种极其有用的取证方法，因为它允许恢复已删除或隐藏的数据进行分析。简而言之，文件雕刻是指在没有文件系统元数据的情况下，从文件碎片中重新组装计算机文件的过程。在文件雕刻中，指定的文件类型会在二进制数据中进行搜索和提取，以创建分区或整个磁盘的取证镜像。文件雕刻通过仅依赖文件结构和内容，而不依赖任何匹配的文件系统元数据，从驱动器的未分配空间中恢复文件。未分配空间是指驱动器上不再包含任何文件信息的部分，这些信息由文件系统结构（如文件表）表示。
- en: Files can be recovered or reconstructed by scanning the raw bytes of the disk
    and reassembling them. This can be done by examining the header (the first few
    bytes) and footer (the last few bytes) of a file.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 文件可以通过扫描磁盘的原始字节并重新组装它们来恢复或重建。这可以通过检查文件的头部（前几个字节）和尾部（最后几个字节）来完成。
- en: File-carving methods are categorized based on the underlying technique in use.
    The header-footer carving method relies on recovering the files based on their
    header and footer information. For instance, for JPEG files, these start with
    `0xffd8` and end with `0xffd9`.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 文件雕刻方法根据所使用的底层技术进行分类。头尾雕刻方法依赖于通过文件的头部和尾部信息来恢复文件。例如，对于JPEG文件，它们以`0xffd8`开头，以`0xffd9`结尾。
- en: The locations of the header and footer are identified and everything between
    those two endpoints is carved. Similarly, the carving method based on the file
    structure uses the internal layout of a file to reconstruct the file. However,
    the traditional file-carving techniques, such as the ones that we've already explained,
    may not work if the data is fragmented. To overcome this, new techniques, such
    as smart carving, use the fragmentation characteristics of several popular filesystems
    to recover the data.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 文件头和文件尾的位置被识别出来，两个端点之间的所有内容都被切割。同样，基于文件结构的切割方法利用文件的内部布局来重建文件。然而，传统的文件切割技术，如我们已经解释过的技术，在数据碎片化的情况下可能无法有效工作。为了解决这个问题，新的技术，如智能切割，利用一些流行文件系统的碎片特征来恢复数据。
- en: 'Once the phone is imaged, it can be analyzed using tools such as **Scalpel**.
    Scalpel is a powerful open source utility to carve files. This tool analyzes the
    block database storage, identifies the deleted files, and recovers them. Scalpel
    is filesystem-independent and is known to work on various filesystems, including
    FAT, NTFS, EXT2, EXT3, HFS, and more. More details about Scalpel can be found
    at [https://github.com/sleuthkit/scalpel](https://github.com/sleuthkit/scalpel).
    The following steps explain how to use Scalpel on an Ubuntu workstation:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦手机镜像制作完成，可以使用像**Scalpel**这样的工具进行分析。Scalpel是一个强大的开源工具，用于切割文件。该工具分析块数据库存储，识别已删除的文件并恢复它们。Scalpel是与文件系统无关的，已知可以在多种文件系统上工作，包括FAT、NTFS、EXT2、EXT3、HFS等。关于Scalpel的更多信息可以在 [https://github.com/sleuthkit/scalpel](https://github.com/sleuthkit/scalpel)找到。以下步骤说明如何在Ubuntu工作站上使用Scalpel：
- en: Install Scalpel on the Ubuntu workstation using the `sudo apt-get install scalpel`
    command.
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用命令`sudo apt-get install scalpel`在Ubuntu工作站上安装Scalpel。
- en: 'The `scalpel.conf` file present under the `/etc/scalpel` directory contains
    information about the supported file types, as shown in the following screenshot:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/etc/scalpel`目录下的`scalpel.conf`文件包含关于支持的文件类型的信息，如下图所示：'
- en: '![](img/f4de510a-e735-4e48-9f5f-cb550289245a.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f4de510a-e735-4e48-9f5f-cb550289245a.png)'
- en: The scalpel configuration file
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Scalpel配置文件
- en: This file needs to be modified to mention the files that are related to Android.
    A sample `scalpel.conf` file can be downloaded from [https://www.nowsecure.com/tools-and-trainings/#viaforensics](https://www.nowsecure.com/tools-and-trainings/#viaforensics).
    You can also uncomment the files and save the `conf` file to select file types
    of your choice. Once this is done, replace the original `conf` file with the one
    that is downloaded.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 该文件需要修改，以提到与Android相关的文件。可以从 [https://www.nowsecure.com/tools-and-trainings/#viaforensics](https://www.nowsecure.com/tools-and-trainings/#viaforensics)下载示例的`scalpel.conf`文件。你也可以取消注释相关文件并保存`conf`文件，选择你想要的文件类型。完成后，替换掉原始的`conf`文件，使用下载的文件。
- en: 'Scalpel needs to be run along with the preceding configuration file on the
    `dd` image being examined. You can run the tool using the following command by
    inputting the configuration file and the `dd` file:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Scalpel需要与前述配置文件一起在正在检查的`dd`镜像上运行。你可以通过输入配置文件和`dd`文件，使用以下命令运行该工具：
- en: '[PRE1]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Once this command is run, the tool starts to carve the files and build them
    accordingly as shown in the following screenshot:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦运行这个命令，工具就会开始切割文件并根据需要构建它们，如下图所示：
- en: '![](img/16e1d626-b359-4783-975b-f0a94337a8c7.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](img/16e1d626-b359-4783-975b-f0a94337a8c7.png)'
- en: Running the Scalpel tool on a dd file
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在`dd`文件上运行Scalpel工具
- en: 'The `output` folder that was specified in the preceding command now contains
    lists of folders that are based on the file types, as shown in the following screenshot.
    Each of these folders contains data that is based on the folder name. For instance,
    `jpg 2-0` contains files related to the `.jpg` extension that have been recovered:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前述命令中指定的`output`文件夹现在包含基于文件类型的文件夹列表，如下图所示。每个文件夹内的内容是根据文件夹名称恢复的。例如，`jpg 2-0`包含与`.jpg`扩展名相关的恢复文件：
- en: '![](img/b0debf76-fb4c-4bbd-aacb-61d273c26730.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b0debf76-fb4c-4bbd-aacb-61d273c26730.png)'
- en: Output folder after running the Scalpel tool
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 运行Scalpel工具后的输出文件夹
- en: 'As shown in the preceding screenshot, each folder contains recovered data from
    the Android device, such as images, PDF files, ZIP files, and more. While some
    pictures are recovered completely, some are not recovered fully, as shown in the
    following screenshot:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如前述截图所示，每个文件夹包含来自Android设备的恢复数据，如图片、PDF文件、ZIP文件等。虽然一些图片被完全恢复，但也有一些没有完全恢复，如下图所示：
- en: '![](img/478b1fcc-46d1-4250-8609-a88ece1a76b7.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/478b1fcc-46d1-4250-8609-a88ece1a76b7.png)'
- en: Recovered data using the Scalpel tool
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Scalpel工具恢复的数据
- en: Applications such as **DiskDigger** can be installed on Android devices to recover
    different types of files from both the internal memory and SD cards. DiskDigger
    includes support for JPG files, MP3 and WAV audio, MP4 and 3GP video, raw camera
    formats, Microsoft Office files (DOC, XLS, and PPT), and more. However, as mentioned
    earlier, the application requires root privileges on the Android device to recover
    the content from the internal memory. These changes should be clearly documented
    by you. The DiskDigger Android app operates in two different modes, basic scan
    mode and full scan mode.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 如**DiskDigger**等应用程序可以安装在Android设备上，从设备的内部存储和SD卡中恢复不同类型的文件。DiskDigger支持JPG文件、MP3和WAV音频、MP4和3GP视频、原始相机格式、Microsoft
    Office文件（DOC、XLS和PPT）等文件。然而，正如前面所提到的，应用程序需要在Android设备上获得root权限才能从内部存储中恢复内容。您应当清楚地记录这些更改。DiskDigger
    Android应用程序提供两种模式：基础扫描模式和完整扫描模式。
- en: 'The full scan mode works only on rooted devices, whereas the basic scan mode
    works on any device. As shown in the following screenshot, on a rooted phone,
    the app automatically locates and displays the available partitions:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 完整扫描模式仅适用于已获取root权限的设备，而基础扫描模式适用于任何设备。如以下截图所示，在已root的手机上，应用程序会自动定位并显示可用的分区：
- en: '![](img/dbc0b996-23c3-4b2e-8733-34ff4a2ba878.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dbc0b996-23c3-4b2e-8733-34ff4a2ba878.png)'
- en: The DiskDigger app
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: DiskDigger应用程序
- en: 'After you select the memory partition, the tool now prompts you to select the
    types of files that you would like to recover. Proceed by selecting the file types
    of interest:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 选择内存分区后，工具会提示您选择要恢复的文件类型。请继续选择感兴趣的文件类型：
- en: '![](img/8ea75d5e-d4be-4683-a3a5-611fc544acb1.png)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ea75d5e-d4be-4683-a3a5-611fc544acb1.png)'
- en: The DiskDigger app file selection screen
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: DiskDigger应用的文件选择界面
- en: Once the scanning begins, the DiskDigger app will automatically show you the
    files that are available for recovery. The recovered files can be either saved
    to the app or to the device directly. Hence, file-carving techniques play a very
    important role in recovering important deleted files from the device's internal
    memory.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描开始后，DiskDigger应用程序将自动显示可恢复的文件。恢复的文件可以保存到应用程序中或直接保存到设备上。因此，文件修复技术在从设备内存中恢复重要已删除文件时起着至关重要的作用。
- en: Recovering contacts using your Google account
  id: totrans-124
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Google账户恢复联系人
- en: 'You can also restore the contacts on the device using the Contacts app through
    the Google account that is configured on the device. This would work if the user
    of the device has previously synced their contacts using the Sync Settings option
    available in Android. This option synchronizes the contacts and other details
    and stores them in the cloud. A forensic examiner like you with legal authority
    or proper consent can restore the deleted contacts if you can get access to the
    Google account configured on the device. Once the account is accessed, perform
    the following steps to restore the data:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以通过设备上配置的Google账户使用联系人应用恢复设备上的联系人。如果设备用户以前使用Android中的“同步设置”选项同步了联系人，这种方式将有效。该选项将联系人及其他信息同步并存储在云端。作为一名具有法律授权或适当许可的法医专家，如果您能访问设备上配置的Google账户，则可以恢复已删除的联系人。访问账户后，执行以下步骤恢复数据：
- en: Log in to your Google Contacts app on the Android device using the configured
    Google account. The following example is attempt on a OnePlus 5 device running
    the Android Pie version.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用已配置的Google账户登录到Android设备上的Google联系人应用程序。以下示例是在运行Android Pie版本的OnePlus 5设备上进行的尝试。
- en: 'Click on Settings and then look for Restore, as shown in the following screenshot:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击设置，然后查找恢复选项，如下图所示：
- en: '![](img/8ca9b41a-46bc-4948-ba14-50d7b4c9b11b.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8ca9b41a-46bc-4948-ba14-50d7b4c9b11b.png)'
- en: The Restore menu in the Contacts app
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 联系人应用中的恢复菜单
- en: 'Click on Restore, and the following screen will appear:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“恢复”，然后将显示以下界面：
- en: '![](img/76745b73-595a-4ca2-b80a-7924728abe8e.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/76745b73-595a-4ca2-b80a-7924728abe8e.png)'
- en: The Restore contacts dialog box
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复联系人对话框
- en: 'As you can see, you can restore the contact list to a previous state when the
    backup was taken at various points in time. You can also use the Undo changes
    option under the Settings menu to restore the contacts to any state in the past
    30 days:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，您可以将联系人列表恢复到备份创建时的历史状态。您还可以在“设置”菜单下使用“撤销更改”选项将联系人恢复到过去30天内的任何状态：
- en: '![](img/e817a2aa-d067-4158-b2ec-ae006e0bafb9.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e817a2aa-d067-4158-b2ec-ae006e0bafb9.png)'
- en: Restore deleted contacts in Google account
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 恢复Google账户中的已删除联系人
- en: Hence, using any one of the preceding techniques, a forensic examiner like you
    can attempt to easily recover deleted data.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，使用前面提到的任何一种技术，像你这样的法医检查员可以尝试轻松恢复已删除的数据。
- en: Summary
  id: totrans-137
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we learned various techniques to recover deleted data from
    an Android device. This process depends on various factors, which heavily rely
    on access to the data residing in the internal memory and SD card. We saw various
    techniques to recover deleted data from both SD card as well as internal memory.
    While the recovery of deleted items from external storage, such as an SD card,
    is easy, the recovery of deleted items from the internal memory takes considerable
    effort. We have also learned SQLite file-parsing and file-carving techniques,
    using which deleted data can be extracted from an Android device. With this knowledge,
    you can now perform data recovery during a forensic investigation.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们学习了从安卓设备恢复已删除数据的各种技术。这个过程依赖于多个因素，特别依赖于对内部存储和SD卡中数据的访问。我们探讨了从SD卡和内部存储中恢复已删除数据的不同技术。虽然从外部存储（如SD卡）中恢复已删除项较为简单，但从内部存储中恢复已删除项则需要相当大的努力。我们还学习了SQLite文件解析和文件雕刻技术，利用这些技术可以从安卓设备中提取已删除的数据。掌握了这些知识，你现在可以在法医调查过程中进行数据恢复。
- en: The next chapter discusses the forensic analysis of Android apps and malware
    and the reverse engineering of Android apps.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 下一章将讨论安卓应用和恶意软件的法医分析，以及安卓应用的逆向工程。
