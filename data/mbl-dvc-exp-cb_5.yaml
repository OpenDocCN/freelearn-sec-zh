- en: Chapter 5. Working with Other Platforms
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第5章。与其他平台合作
- en: 'In this chapter, we will cover:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍：
- en: Setting up the Blackberry development environment and simulator
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Blackberry 开发环境和模拟器
- en: Setting up the Blackberry pentesting environment
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Blackberry 渗透测试环境
- en: Setting up the Windows phone development environment and simulator
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Windows 手机开发环境和模拟器
- en: Setting up the Windows phone pentesting environment
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Windows 手机渗透测试环境
- en: Configuring traffic interception settings for Blackberry phones
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置 Blackberry 手机的流量拦截设置
- en: Stealing data from Windows phones applications
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 Windows 手机应用程序中窃取数据
- en: Stealing data from Blackberry applications
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 Blackberry 应用程序中窃取数据
- en: Reading local data in Windows phone
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Windows 手机中读取本地数据
- en: NFC-based attacks
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 基于 NFC 的攻击
- en: Introduction
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: In this chapter, we will introduce other mobile platforms. So far we have focused
    on Android and iOS platforms in this book. Here we take an opportunity to introduce
    Blackberry and Windows Phone as next popular mobile platforms.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将介绍其他移动平台。到目前为止，我们在本书中重点讨论了 Android 和 iOS 平台。这里，我们利用机会介绍 Blackberry 和
    Windows Phone 作为下一个流行的移动平台。
- en: Blackberry has been the favorite mobile of Enterprise users for a long time.
    Though the Blackberry market share has reduced in SmartPhone segment, it still
    has got the usage to be introduced and discussed in this book. QWERTY keypads
    used to differentiate earlier Blackberry phones.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Blackberry 长期以来一直是企业用户的最爱手机。尽管 Blackberry 在智能手机市场的份额有所下降，但它仍然具有足够的用户群体，因此值得在本书中介绍和讨论。QWERTY
    键盘曾经是早期 Blackberry 手机的特点。
- en: Windows Mobiles are picking up with an increased number of users opting for
    the same. Windows 7 and 8 have been a success and successive phones are planned
    to bring about more innovations. The vertical swipe movement of screens differentiates
    the Windows mobiles.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 手机正受到越来越多用户的青睐。Windows 7 和 8 的成功推动了这一趋势，后续的手机计划带来更多创新。屏幕的垂直滑动动作是 Windows
    手机的一个特点。
- en: The most common aspects to learn for mobile platforms are setting up development
    and pentest environments and learning about simulators, traffic interception setup,
    and reading/stealing data from these phones. So let us gear ourselves up to learn
    these for Blackberry and Windows platforms in this bonus chapter. Also there is
    a bonus recipe on **Near Field Communication** (**NFC**) based attacks.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 学习移动平台的最常见方面包括设置开发和渗透测试环境、学习模拟器、配置流量拦截设置，以及读取/窃取这些手机中的数据。因此，让我们在本章中为 Blackberry
    和 Windows 平台的学习做好准备。此外，还有一项关于 **近场通信**（**NFC**）攻击的奖励配方。
- en: Setting up the Blackberry development environment and simulator
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置 Blackberry 开发环境和模拟器
- en: 'To start learning any new mobile platform, you should follow the mentioned
    sequence:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始学习任何新的移动平台，您应该按照以下顺序操作：
- en: Learn to setup the **Integrated Development Environment** (**IDE**)
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习设置 **集成开发环境**（**IDE**）
- en: Learn programming language and to code apps
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习编程语言并编写应用程序
- en: Learn the simulators and emulators to debug the apps
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习使用模拟器和仿真器调试应用程序
- en: Setup the pentest environment
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置渗透测试环境
- en: Learn pentesting aspects in the (current) mobile platform
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习在（当前）移动平台上的渗透测试方面
- en: Download the Momentics IDE for **Blackberry** (**BB**). Install it and setup
    the IDE. It can connect to both Blackberry Phones and Blackberry Simulators.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 下载 **Blackberry**（**BB**）的 Momentics IDE。安装并设置 IDE。它可以连接到 Blackberry 手机和 Blackberry
    模拟器。
- en: Here onwards we focus on Blackberry Simulators.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 从这里开始，我们将重点讨论 Blackberry 模拟器。
- en: Getting ready
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 做好准备
- en: 'Download the **Blackberry Device 10 Simulator**. We have used Windows OS for
    the same. The corresponding Simulator can be downloaded from: [http://developer.blackberry.com/develop/simulator/simulator_installing.html](http://developer.blackberry.com/develop/simulator/simulator_installing.html)'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 下载 **Blackberry Device 10 Simulator**。我们使用了 Windows 操作系统。对应的模拟器可以从以下网址下载：[http://developer.blackberry.com/develop/simulator/simulator_installing.html](http://developer.blackberry.com/develop/simulator/simulator_installing.html)
- en: How to do it...
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Run the installer file; it will guide you through the installation steps. Once
    the installation completes, you get a screen as follows:![How to do it...](graphics/image_05_001.jpg)
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行安装程序文件，它会指导你完成安装步骤。安装完成后，你将看到如下界面：![如何操作...](graphics/image_05_001.jpg)
- en: Next, locate and run `runBB10Simulator.bat` file. Post running the bat file,
    the listening component gets started for Blackberry Simulator.
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，定位并运行 `runBB10Simulator.bat` 文件。运行该 bat 文件后，Blackberry 模拟器的监听组件将启动。
- en: Now locate the VMware file `BlackBerry10Simulator.vmx` and start the VMware.
    The VMware image boots up and a simulator starts for you, as follows:![How to
    do it...](graphics/image_05_002.jpg)
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在找到 VMware 文件 `BlackBerry10Simulator.vmx` 并启动 VMware。VMware 镜像启动后，会为你启动一个模拟器，如下所示：![如何操作...](graphics/image_05_002.jpg)
- en: How it works...
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The batch file is a listening component for the Blackberry Simulators. It is
    compulsory to run the batch file, without which Blackberry Simulator will not
    run. Note that the batch file DOS window needs to be open till the time BB10 Simulator
    is in use.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 批处理文件是黑莓模拟器的监听组件。必须运行批处理文件，否则黑莓模拟器将无法运行。请注意，批处理文件的 DOS 窗口需要保持打开状态，直到 BB10 模拟器使用完毕。
- en: BB10 Simulator starts in the virtual machine image. It can be configured as
    per our requirements. Please refer to the BB10 simulator user guide mentioned
    under the *See also* section of this recipe.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: BB10 模拟器在虚拟机镜像中启动。可以根据我们的需求进行配置。请参考本食谱中*另请参见*部分提到的 BB10 模拟器用户指南。
- en: There's more...
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Momentics IDE can be used to connect to BB phones or BB Simulators. This completes
    the development environment and its runtime integration. Applications can be developed
    in IDE and can be debugged or run in a linked device or simulator.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: Momentics IDE 可用于连接到 BB 手机或 BB 模拟器。这完成了开发环境及其运行时集成。可以在 IDE 中开发应用程序，并可以在连接的设备或模拟器中进行调试或运行。
- en: See also
  id: totrans-36
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另请参见
- en: '[https://developer.blackberry.com/devzone/files/develop/simulator/BB10_Device_Simulator_UG.pdf](https://developer.blackberry.com/devzone/files/develop/simulator/BB10_Device_Simulator_UG.pdf)'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://developer.blackberry.com/devzone/files/develop/simulator/BB10_Device_Simulator_UG.pdf](https://developer.blackberry.com/devzone/files/develop/simulator/BB10_Device_Simulator_UG.pdf)'
- en: Setting up the Blackberry pentesting environment
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置黑莓渗透测试环境
- en: 'Once you are familiar with Blackberry as a platform, simulators, and/or phone,
    get into the mood of penetration testing. Penetration testing for mobile application,
    can be broadly classified under four categories:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你熟悉了黑莓平台、模拟器和/或手机，便可以进入渗透测试的状态。移动应用程序的渗透测试可以大致分为四个类别：
- en: Mobile application traffic related attacks
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动应用流量相关的攻击
- en: Mobile device storage-related attacks
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动设备存储相关的攻击
- en: Mobile application source code-related attacks
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动应用源代码相关的攻击
- en: Attacks involving mobile OS features used by mobile applications
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 涉及移动操作系统功能的攻击，这些功能被移动应用程序使用
- en: A lab for pentesting should be well equipped with basic necessities to cater
    for the preceding four categorical needs.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 渗透测试实验室应当配备基本设施，以满足上述四个类别的需求。
- en: Getting ready
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'We have to set up a lab for Blackberry pentesting. To get going, we need the
    following:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要为黑莓渗透测试搭建一个实验室。为了开始，我们需要以下工具：
- en: Blackberry IDE
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑莓 IDE
- en: Blackberry phones
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑莓手机
- en: Blackberry simulators
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑莓模拟器
- en: Proxy tools such as Charles, Burp Suite, and Fiddler
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理工具，如 Charles、Burp Suite 和 Fiddler
- en: A Wi-Fi network
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一台 Wi-Fi 网络
- en: Blackberry backup tools
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑莓备份工具
- en: A data cable
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据线
- en: Decompiler tools
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 反编译工具
- en: How to do it...
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let us see how each of these tools help:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这些工具如何提供帮助：
- en: '**Blackberry IDE**: This IDE is needed majorly for code review assignments.
    The code of the BB apps can be analyzed to discover any insecurity from the development-generic
    or business logic errors. This step is usually not required in case of pure pentest-based
    assignments. Installation of the Blackberry IDE is covered in the previous recipe.'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黑莓 IDE**：此 IDE 主要用于代码审查任务。可以分析 BB 应用的代码，以发现来自开发常见错误或业务逻辑错误的安全问题。在纯粹的渗透测试任务中，通常不需要此步骤。黑莓
    IDE 的安装在前面的食谱中有详细介绍。'
- en: '**Blackberry phones**: Run-time applications have to be tested. BB phones are
    needed to install and run the app to be able to do the pentest.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黑莓手机**：必须测试运行时应用程序。需要 BB 手机来安装并运行应用程序，以便进行渗透测试。'
- en: '**Blackberry simulators**: Simulators also provide a runtime environment for
    debugging and pentesting purposes. Simulators are life savers; when the phones
    of specific versions are not available, we can switch over to the simulator of
    that particular version. However, if RAM or disk space is limited, Simulators
    may be slow and may become difficult to use. Blackberry Simulators get installed
    as part of an IDE; this we have learnt in previous recipes.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**黑莓模拟器**：模拟器还提供了用于调试和渗透测试的运行时环境。模拟器是救命稻草；当特定版本的手机不可用时，我们可以切换到该版本的模拟器。然而，如果
    RAM 或磁盘空间有限，模拟器可能会变得很慢，使用起来也会变得困难。黑莓模拟器作为 IDE 的一部分安装；我们在之前的食谱中已经学过这个。'
- en: '**Proxy tools such as Charles, Burp Suite, and Fiddler**: Various proxy tools
    can be downloaded from their websites. These are quite straightforward and there
    are guides and help forums about those as well. These tools are easy to install;
    just download the installer from the respective websites and a few clicks will
    make the tool ready to use.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代理工具，如Charles、Burp Suite和Fiddler**：各种代理工具可以从它们的网站上下载。这些工具非常直接，也有相关的指南和帮助论坛。这些工具容易安装；只需从各自的网站下载安装程序，点击几下就能使工具准备就绪。'
- en: '**A Wi-Fi network**: We need a Wi-Fi network for interception of Wi-Fi traffic.
    We will later set up a proxy for mobile devices to a laptop running proxy tools,
    both on the same Wi-Fi network.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Wi-Fi网络**：我们需要一个Wi-Fi网络来拦截Wi-Fi流量。稍后我们将为移动设备设置一个代理，使其连接到运行代理工具的笔记本电脑，并且二者都在同一个Wi-Fi网络上。'
- en: Either you can use a Wi-Fi router to set up your personal Wi-Fi network or you
    can use one of the free tools available to create a hotspot from your laptop.
    In our experience, it is sometimes difficult to work with the latter option, so
    we suggest using the first option.
  id: totrans-62
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以使用Wi-Fi路由器来设置个人Wi-Fi网络，或者使用一些免费工具将笔记本电脑设置为热点。根据我们的经验，使用后者有时会遇到困难，因此我们建议使用前者。
- en: '**Blackberry backup tools**: Tools to take Blackberry backups and extract or
    mine data from the backup. Traditionally, data stored on the BB phone has been
    difficult to steal. This can be overcome by taking a phone backup from the phone
    that and mining the data from backup.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Blackberry备份工具**：用于获取Blackberry备份并从备份中提取或挖掘数据的工具。传统上，BB手机上存储的数据很难被窃取。这可以通过从手机获取备份并从备份中挖掘数据来解决。'
- en: Tools such as Blackberry Extractor or BlackBerry Backup Extractor are helpful
    in this regard.
  id: totrans-64
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 像Blackberry Extractor或BlackBerry Backup Extractor这样的工具在这方面非常有用。
- en: '**Data cable**: It is also important to own a data cable. Later we will use
    it to connect to the phone to read data and to conduct attacks originating via
    USB.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据线**：拥有一根数据线也非常重要。稍后我们将使用它连接手机，读取数据并进行通过USB发起的攻击。'
- en: '**Decompiler tools**: It is also important that these tools are ready in our
    lab. These small tools help us in the decompilation of applications. We will use
    a tool called Coddec in a recipe to follow in this chapter. There we will cover
    the installation and usage of this tool.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**反编译工具**：这些工具在我们的实验室中也非常重要。这些小工具帮助我们进行应用程序的反编译。在本章中，我们将使用一个名为Coddec的工具，并在接下来的步骤中进行演示，涵盖此工具的安装和使用方法。'
- en: How it works...
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'With the tools ready at our Pentest lab, let us see how we can link the penetration
    testing use cases to different categories while using the tools:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 准备好我们的渗透测试实验室工具后，让我们看看如何将渗透测试的使用案例与不同类别的工具进行关联：
- en: '**Mobile application traffic-related attacks**: This is where the Wi-Fi network
    and proxy tools are going to come in handy. A laptop with Charles or Burp proxy
    installed is connected to Wi-Fi. A mobile device running the application is directed
    to the laptop proxy, using proxy configuration on the device. Since both laptop
    and mobile device are on the same Wi-Fi network, application traffic gets routed
    via Charles or Burp proxy tools. Configure the appropriate proxy settings in the
    simulator or phone to be able to route the traffic to Charles or Burp proxy tools.'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移动应用流量相关攻击**：在这一部分，Wi-Fi网络和代理工具将派上用场。一台安装了Charles或Burp代理的笔记本电脑连接到Wi-Fi网络。一台运行应用程序的移动设备通过设备上的代理配置连接到笔记本代理。由于笔记本电脑和移动设备位于同一Wi-Fi网络上，应用程序流量将通过Charles或Burp代理工具路由。配置模拟器或手机中的适当代理设置，以便将流量路由到Charles或Burp代理工具。'
- en: Effectively this whole process makes application traffic readable and editable
    via proxy tools and we can conduct various attacks such as parameter manipulation
    to bypass business logics or to gain privilege access.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 实际上，整个过程使得应用程序流量可以通过代理工具进行读取和编辑，我们可以进行各种攻击，如参数篡改以绕过业务逻辑或获取特权访问。
- en: '**Mobile device storage-related attacks**: We have a data cable to connect
    the phone to the laptop. We have the Simulator on the laptop. Both of them can
    run mobile applications. Use Blackberry desktop software to connect the phone
    to the laptops. This channel can lead to data stealing attacks such as directly
    reading the phone data or taking the backup of phone for offline data mining.'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移动设备存储相关攻击**：我们需要一根数据线将手机连接到笔记本电脑。笔记本上安装有模拟器，二者都可以运行移动应用程序。使用Blackberry桌面软件将手机连接到笔记本电脑。这个通道可能导致数据窃取攻击，例如直接读取手机数据或为离线数据挖掘而备份手机数据。'
- en: '**Mobile application source code-related attacks**: Decompiling the BB applications
    results in the raw source code. The Coddec tool can be used for this purpose.
    The hardcoded sensitive data present in the application source code is revealed.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与移动应用源代码相关的攻击**：反编译BB应用程序会得到原始源代码。可以使用Coddec工具来执行此操作。应用程序源代码中硬编码的敏感数据会被揭示出来。'
- en: There's more...
  id: totrans-73
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Attacks involving mobile OS features used by mobile application is the most
    complicated category. There are various BB OS related features which applications
    interact with such as Bluetooth, NFC, intents, broadcast receivers, and so on.
    These also need to be covered in an offensive penetration test.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 涉及移动操作系统特性以及被移动应用程序使用的攻击是最复杂的一类。有各种BB OS相关的功能，应用程序与之交互，例如蓝牙、NFC、意图、广播接收器等。这些也需要在渗透测试中涵盖。
- en: See also
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[http://us.blackberry.com/software/desktop.html](http://us.blackberry.com/software/desktop.html)'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://us.blackberry.com/software/desktop.html](http://us.blackberry.com/software/desktop.html)'
- en: '[http://www.blackberryextractor.com/](http://www.blackberryextractor.com/)'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://www.blackberryextractor.com/](http://www.blackberryextractor.com/)'
- en: Setting up the Windows phone development environment and simulator
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Windows手机开发环境和模拟器
- en: 'As we learned previously, to start with a new mobile platform, we have to follow
    this sequence:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们之前所学，为了开始一个新的移动平台开发，我们需要遵循以下顺序：
- en: Learn to set up the integrated development environment
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习如何设置集成开发环境
- en: Learn programming language and to code apps
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习编程语言并开发应用程序
- en: Learn the simulators and emulators to debug the apps
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习使用模拟器和仿真器调试应用程序
- en: Set up the pentest environment
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置渗透测试环境
- en: Learn pentesting aspects in the (current) mobile platform
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 学习当前移动平台的渗透测试方面
- en: Visual Studio has been the development framework for Windows apps.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: Visual Studio一直是Windows应用程序的开发框架。
- en: Since Windows 10, **Universal Windows Platform** (**UWP**) is used for application
    development. UWP apps as the name suggests can run on any type of Windows platform
    (tablets, phones, and desktops).
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 从Windows 10开始，**通用Windows平台**（**UWP**）被用于应用程序开发。正如其名，UWP应用可以在任何类型的Windows平台（平板电脑、手机和桌面）上运行。
- en: Getting ready
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: Download the Windows Phone SDK from the repository at [https://dev.windows.com/en-us/downloads/sdk-archive](https://dev.windows.com/en-us/downloads/sdk-archive)
    .
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 从[https://dev.windows.com/en-us/downloads/sdk-archive](https://dev.windows.com/en-us/downloads/sdk-archive)下载Windows
    Phone SDK。
- en: Emulators can also be downloaded from the same repository. For Universal Windows
    App, SDK, and emulator download links are present in the top section of the above
    mentioned repository link.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 模拟器也可以从相同的代码库中下载。对于通用Windows应用程序，SDK和模拟器的下载链接位于上述代码库链接的顶部部分。
- en: We used Windows 8.1 SDK and Emulator in this recipe.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在本教程中使用了Windows 8.1 SDK和模拟器。
- en: How to do it...
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Download the Windows 8.1 SDK from [http://go.microsoft.com/fwlink/p/?LinkId=323507](http://go.microsoft.com/fwlink/p/?LinkId=323507).
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从[http://go.microsoft.com/fwlink/p/?LinkId=323507](http://go.microsoft.com/fwlink/p/?LinkId=323507)下载Windows
    8.1 SDK。
- en: Run the installer file; it will guide you through the installation steps. The
    following screen allows you to choose the features you want to install:![How to
    do it...](graphics/image_05_003.jpg)
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行安装程序文件，它将引导你完成安装步骤。以下界面允许你选择要安装的功能：![如何操作...](graphics/image_05_003.jpg)
- en: Once the installation completes, the **Welcome to the Windows Software Development
    Kit for Windows 8.1** message is displayed.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，会显示**欢迎使用Windows 8.1软件开发工具包**的消息。
- en: 'Now go ahead and download and install the Windows 8.1 Emulator from:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，请继续从以下地址下载并安装Windows 8.1模拟器：
- en: '[https://www.microsoft.com/en-us/download/details.aspx?id=43719](https://www.microsoft.com/en-us/download/details.aspx?id=43719)'
  id: totrans-96
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: '[https://www.microsoft.com/en-us/download/details.aspx?id=43719](https://www.microsoft.com/en-us/download/details.aspx?id=43719)'
- en: The emulator can be launched using `xde.exe`. Once the initial set of preferences
    are selected, the emulator window launches and you now have the Windows application
    development and runtime environment created.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可以使用`xde.exe`启动模拟器。一旦选择了初始偏好设置，模拟器窗口就会启动，现在你已经创建了Windows应用开发和运行时环境。
- en: How it works...
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: Development work in Windows 8.1 requires SDK, Emulator, and .Net Framework.
    The applications can be coded in Windows 8.1 and can be run in Emulator. Alternatively,
    precoded applications and built applications can be run independently in the Emulator.
    This is possible because Emulators can also be launched outside the SDK as Hyper-V
    VM and runs as a VHD.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在Windows 8.1上进行开发需要SDK、模拟器和.Net框架。应用程序可以在Windows 8.1上进行编码，并且可以在模拟器中运行。或者，预编码的应用程序和构建好的应用程序可以独立在模拟器中运行。这是因为模拟器也可以作为Hyper-V虚拟机在SDK外部启动，并作为VHD运行。
- en: With Microsoft promoting **Universal Windows Platform** (**UWP**) on Windows
    10, development is expected to migrate to Windows 10 and UWP. It makes sense to
    code applications once and use them in multiple places such as phone, tablets,
    and desktops. UWP is expected to change the whole Windows application development
    landscape.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 随着微软在Windows 10上推广**通用Windows平台**（**UWP**），开发预计将向Windows 10和UWP迁移。一次性编写应用并可以在手机、平板和桌面等多个地方使用是有意义的。UWP有望改变整个Windows应用程序开发的格局。
- en: There's more...
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: Once you are through with the SDK and Emulator, it is time to code the first
    application. It is suggested that readers try out coding basic apps in Windows
    8.1 or in Windows 10 UWP platform to gain better familiarity with platform specifics.
    The Microsoft website itself is a very good place to start for first apps as they
    provide sample code for learning purposes. The link for the sample application
    is mentioned under the *See also* section of this recipe.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你掌握了SDK和模拟器，接下来就是编码第一个应用程序了。建议读者尝试在Windows 8.1或Windows 10 UWP平台上编写基本应用，以便更好地了解平台的特性。微软官网本身就是一个很好的起点，它提供了很多学习用的示例代码。示例应用的链接可在本节的*另见*部分找到。
- en: See also
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[http://insidethecloudos.azurewebsites.net/running-windows-8-1-phone-emulator-outside-of-visual-studio-2013-and-2015/](http://insidethecloudos.azurewebsites.net/running-windows-8-1-phone-emulator-outside-of-visual-studio-2013-and-2015/)'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://insidethecloudos.azurewebsites.net/running-windows-8-1-phone-emulator-outside-of-visual-studio-2013-and-2015/](http://insidethecloudos.azurewebsites.net/running-windows-8-1-phone-emulator-outside-of-visual-studio-2013-and-2015/)'
- en: '[https://channel9.msdn.com/Series/Windows-Phone-8-1-Development-for-Absolute-Beginners/Part-11-Working-with-the-Windows-Phone-8-1-Emulator](https://channel9.msdn.com/Series/Windows-Phone-8-1-Development-for-Absolute-Beginners/Part-11-Working-with-the-Windows-Phone-8-1-Emulator)'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://channel9.msdn.com/Series/Windows-Phone-8-1-Development-for-Absolute-Beginners/Part-11-Working-with-the-Windows-Phone-8-1-Emulator](https://channel9.msdn.com/Series/Windows-Phone-8-1-Development-for-Absolute-Beginners/Part-11-Working-with-the-Windows-Phone-8-1-Emulator)'
- en: '[https://dev.windows.com/en-us/samples](https://dev.windows.com/en-us/samples)'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://dev.windows.com/en-us/samples](https://dev.windows.com/en-us/samples)'
- en: Setting up the Windows phone pentesting environment
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Windows手机渗透测试环境
- en: 'Once you gain the basics of Windows platform SDK, emulators and phones, it
    is the time to get ready to do penetration testing. As you have learned previously,
    for Windows also, we will analyze penetration testing under four broad categories:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你掌握了Windows平台SDK、模拟器和手机的基础，就可以开始准备进行渗透测试了。正如你之前所学，我们将以四大类为框架来分析Windows平台的渗透测试：
- en: Mobile Application Traffic related attacks
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动应用流量相关的攻击
- en: Mobile Device Storage related attacks
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动设备存储相关的攻击
- en: Mobile Application Source Code related attacks
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与移动应用源代码相关的攻击
- en: Attacks involving mobile OS features used by mobile application
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 涉及移动操作系统特性的攻击，通常由移动应用使用
- en: The Windows platform pentest lab also needs to be well equipped with basic necessities
    to cater for the preceding four categorical needs.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: Windows平台的渗透测试实验室还需要配备基本的必需品，以满足前述四类需求。
- en: Getting ready
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'We have to set up a lab for Windows mobile pentesting. To get going, we need
    the following:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要为Windows手机渗透测试搭建实验室。开始之前，我们需要以下设备：
- en: Windows phone SDK
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows手机SDK
- en: Windows mobiles or tablets
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows手机或平板
- en: Windows phone emulators
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Windows手机模拟器
- en: Proxy tools such as Charles, Burp Suite, and Fiddler
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 代理工具，如Charles、Burp Suite和Fiddler
- en: A Wi-Fi network
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一张Wi-Fi网络
- en: A data cable
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一根数据线
- en: How to do it...
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Let us see how each of these tools help:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看这些工具如何帮助：
- en: '**Windows phone SDK**: This SDK is needed majorly for code review assignments.
    The code of the Windows apps can be analyzed to discover any insecurity from the
    development - generic or business logic errors. This step is usually not required
    in case of pure pentest based assignments.'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows Phone SDK**：该SDK主要用于代码审查任务。Windows应用的代码可以被分析，以发现开发过程中的任何安全问题——如通用错误或业务逻辑错误。在纯渗透测试任务中，通常不需要这一环节。'
- en: Also Windows SDK may come in handy for reading code files stolen from the packaged
    app. We have set up Windows phone SDK in the previous recipe.
  id: totrans-125
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 同时，Windows SDK 在读取从打包应用中窃取的代码文件时也会派上用场。我们已经在前面的配方中设置了 Windows 手机 SDK。
- en: '**Windows mobiles/tablets**: Run time applications have to be tested. Windows
    mobiles and tablets are needed to install and run the app to be able to do the
    pentest.'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 移动设备/平板电脑**：必须测试运行时应用程序。需要 Windows 移动设备和平板电脑来安装和运行应用程序，以便进行渗透测试。'
- en: '**Windows phone emulators**: Emulators also provide runtime environments for
    debugging and pentesting purposes. The emulators are life savers; when the phones
    of specific versions are not available, we can switch over to Emulator of that
    particular version. The emulator is accessible by launching `xde.exe` from the
    SDK installation.'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 手机模拟器**：模拟器还为调试和渗透测试提供了运行时环境。模拟器是救命稻草；当无法获取特定版本的手机时，我们可以切换到该特定版本的模拟器。通过从
    SDK 安装目录启动 `xde.exe` 可以访问模拟器。'
- en: '**Proxy tools such as Charles, Burp Suite, and Fiddler**: Various proxy tools
    can be downloaded from their websites. These are quite straightforward and there
    are guides and help forums about those as well. These tools are easy to install;
    just download the installer from the respective websites and a few clicks will
    make the tool ready to use. A Wi-Fi network: We need a Wi-Fi network for interception
    of Wi-Fi traffic. We will later set up a proxy for mobile devices to a laptop
    running proxy tools, both on the same Wi-Fi network.'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代理工具，如 Charles、Burp Suite 和 Fiddler**：各种代理工具可以从它们的官方网站下载。这些工具非常简单，而且有相关的指南和帮助论坛。这些工具很容易安装；只需从各自的网站下载安装程序，点击几下就能使工具准备就绪。Wi-Fi
    网络：我们需要一个 Wi-Fi 网络来截获 Wi-Fi 流量。我们稍后会将移动设备的代理设置为运行代理工具的笔记本电脑，并确保它们在同一个 Wi-Fi 网络上。'
- en: Either you can use a Wi-Fi router to set up your personal Wi-Fi network or you
    can use one of the free tools available to create a hotspot from your laptop.
    In our experience, it is sometimes difficult to work with the latter option, so
    we prefer using the first option.
  id: totrans-129
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 你可以使用 Wi-Fi 路由器设置自己的个人 Wi-Fi 网络，或者使用一些免费的工具从笔记本电脑创建热点。根据我们的经验，后者有时较为困难，因此我们更倾向于使用前者。
- en: '**Data cable**: It is also important to own a data cable. Later we will use
    it to connect to the phone to read data and to conduct attacks originating via
    USB.'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据线**：拥有一根数据线也很重要。稍后我们将使用它连接手机以读取数据并执行通过 USB 发起的攻击。'
- en: How it works...
  id: totrans-131
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'With the tools ready at our Pentest lab, let us see how we can link the penetration
    testing use cases to different categories while using the tools:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的渗透测试实验室中，工具已准备就绪，接下来让我们看看如何将渗透测试用例与使用这些工具的不同类别关联起来：
- en: '**Mobile application traffic-related attacks**: A Wi-Fi network and proxy tools
    are used to attack mobile application traffic. A laptop with Charles or Burp proxy
    installed is connected to Wi-Fi. A mobile device running the application is directed
    to the laptop proxy, using proxy configuration on the device. Since both laptop
    and mobile device are on the same Wi-Fi network, application traffic gets routed
    via Charles or Burp proxy tools. Configure the appropriate proxy settings in the
    emulator or phone to be able to route the traffic to Charles or Burp proxy tools.
    Now the traffic can be tampered with the proxy tools and it is possible to conduct
    parameter manipulation, and injection kinds of attack.'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与移动应用流量相关的攻击**：Wi-Fi 网络和代理工具用于攻击移动应用流量。安装了 Charles 或 Burp 代理的笔记本电脑连接到 Wi-Fi。运行应用程序的移动设备被指向笔记本电脑代理，并使用设备上的代理配置。由于笔记本电脑和移动设备在同一
    Wi-Fi 网络上，应用流量通过 Charles 或 Burp 代理工具进行路由。在模拟器或手机中配置适当的代理设置，以便将流量路由到 Charles 或
    Burp 代理工具。现在，流量可以通过代理工具进行篡改，从而进行参数操控、注入等类型的攻击。'
- en: '**Mobile device storage-related attacks**: We have a data cable to connect
    the phone to the laptop. We have the emulator on the laptop. Both of them can
    run mobile applications. Use WP Power tools to connect the phone to the laptops.
    This channel can lead to data stealing attacks such as directly reading or tampering
    the phone data. We will demonstrate this in the last but one recipe of this chapter.'
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**与移动设备存储相关的攻击**：我们有数据线将手机连接到笔记本电脑。我们有模拟器可以在笔记本电脑上运行移动应用程序。使用 WP Power 工具将手机连接到笔记本电脑。这个通道可能导致数据窃取攻击，例如直接读取或篡改手机数据。我们将在本章的倒数第二个配方中演示这一点。'
- en: '**Mobile application source code-related attacks**: Using SDK and other decompiler
    tools, raw source code of the Windows phone application can be obtained. This
    step is performed to uncover the hardcoded sensitive data or sensitive business
    logic coded in the client-side mobile application source code.'
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**移动应用源代码相关攻击**：通过使用SDK和其他反编译工具，可以获取Windows手机应用的原始源代码。执行此步骤是为了揭示硬编码的敏感数据或在客户端移动应用源代码中编写的敏感业务逻辑。'
- en: There's more...
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容…
- en: Attacks involving mobile OS features used by mobile applications is the most
    complicated category. There are various Windows OS related features which applications
    interact with such as Bluetooth, NFC, intents, broadcast receivers, and so on.
    These also need to be covered in an offensive penetration test.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 涉及移动操作系统特性（由移动应用使用）的攻击是最复杂的一类。这些应用与许多Windows操作系统相关特性交互，如蓝牙、NFC、意图、广播接收器等。这些内容也需要在渗透测试中进行覆盖。
- en: See also
  id: totrans-138
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[http://pen-testing.sans.org/blog/2011/10/28/mobile-application-assessments-part-2-a-look-at-windows-mobile](http://pen-testing.sans.org/blog/2011/10/28/mobile-application-assessments-part-2-a-look-at-windows-mobile)'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://pen-testing.sans.org/blog/2011/10/28/mobile-application-assessments-part-2-a-look-at-windows-mobile](http://pen-testing.sans.org/blog/2011/10/28/mobile-application-assessments-part-2-a-look-at-windows-mobile)'
- en: '[http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/](http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/)'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/](http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/)'
- en: '[https://www.securityninja.co.uk/application-security/windows-phone-app-analyser-v1-0-released-today-2/](https://www.securityninja.co.uk/application-security/windows-phone-app-analyser-v1-0-released-today-2/)'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.securityninja.co.uk/application-security/windows-phone-app-analyser-v1-0-released-today-2/](https://www.securityninja.co.uk/application-security/windows-phone-app-analyser-v1-0-released-today-2/)'
- en: Configuring traffic interception settings for Blackberry phones
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置Blackberry手机的流量拦截设置
- en: Traditionally, Blackberry phones never used to provide an option to set up a
    proxy to the users. There was no option to specify proxy settings (proxy IP address
    and port number). Because of this, we cannot set a proxy to these phones. However,
    for testing purposes we used Simulator and set a proxy and conducted our testing.
    Let us now learn how to set a proxy to the Blackberry simulator.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 传统上，Blackberry手机并未提供为用户设置代理的选项。没有选项可以指定代理设置（代理IP地址和端口号）。因此，我们无法为这些手机设置代理。但是，为了测试目的，我们使用了模拟器，并设置了代理进行测试。现在让我们学习如何为Blackberry模拟器设置代理。
- en: Getting ready
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'We need to get our environment ready first. This recipe requires that any of
    the following be installed on the test machine:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我们需要准备好环境。此步骤要求在测试机上安装以下任意工具：
- en: '**MDS server with Blackberry simulator**: Use the combination of MDS and Blackberry
    simulator to simulate the connection services of **Blackberry Enterprise server**
    (**BES**).'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MDS服务器与Blackberry模拟器**：使用MDS和Blackberry模拟器的组合来模拟**Blackberry企业服务器**（**BES**）的连接服务。'
- en: '**Blackberry 10 simulator**: Use the Blackberry 10 simulator as a standalone
    device. Previously in this book, we learned about Blackberry 10 simulators.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Blackberry 10模拟器**：将Blackberry 10模拟器作为独立设备使用。在本书的前面，我们已经学习了Blackberry 10模拟器的相关内容。'
- en: '**Blackberry phone devices**: Proxy can be set on Blackberry 10 phones as well.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Blackberry手机设备**：也可以在Blackberry 10手机上设置代理。'
- en: How to do it...
  id: totrans-149
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: The installation can be done using two of the following methods.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 安装可以通过以下两种方法之一完成。
- en: Case 1 - Using MDS server and Blackberry simulator
  id: totrans-151
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 案例1 - 使用MDS服务器和Blackberry模拟器
- en: This combination comes in handy when simulating a BES server kind of environment.
    The proxy settings have to be made via changes in the MDS server's configuration
    file. This configuration file is responsible for network connections and hence
    the traffic from the device gets routed via a specified proxy.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 这种组合在模拟BES服务器类型的环境时非常有用。必须通过修改MDS服务器的配置文件来设置代理。该配置文件负责网络连接，因此设备的流量将通过指定的代理进行路由。
- en: 'Here are the configurations required in the MDS server''s configurations:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在MDS服务器配置中所需的配置：
- en: Locate the `rimpublic.property` file in the installation directory. We found
    the path at our end, `C:\Program Files\Research In Motion\Blackberry JDE 5.0.0\MDS\config`.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装目录中找到`rimpublic.property`文件。我们在我们的设备上找到了该路径：`C:\Program Files\Research In
    Motion\Blackberry JDE 5.0.0\MDS\config`。
- en: 'In the `rimpublic.property` file, navigate to the `[HTTP_HANDLER]` section
    and modify this section by adding the proxy configuration specification lines
    as follows:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `rimpublic.property` 文件中，找到 `[HTTP_HANDLER]` 部分，并通过添加以下代理配置规范行来修改此部分：
- en: '[PRE0]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Case 2 - Blackberry 10 simulators
  id: totrans-157
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 案例 2 - 黑莓 10 模拟器
- en: 'Assuming that you have followed the *Setting up the Blackberry Development
    Environment and Simulator* recipe and have the setup ready, you are all set for
    the current recipe:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您已经按照*设置黑莓开发环境和模拟器*的步骤完成了设置，您现在可以开始当前的操作：
- en: Search for network connections and locate **Networks and Connections** under
    **System Settings**. Your Simulator screen should look similar to the following
    screenshot:![Case 2 - Blackberry 10 simulators](graphics/image_05_004.jpg)
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索网络连接并在**系统设置**下找到**网络和连接**。您的模拟器屏幕应该类似于以下截图：![案例 2 - 黑莓 10 模拟器](graphics/image_05_004.jpg)
- en: Now go ahead with **Networks and Connections** and add your device to the available
    Wi-Fi network of the lab setup.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在继续操作**网络和连接**，并将您的设备添加到实验室设置的可用 Wi-Fi 网络中。
- en: Under the connecting SSID settings, configure proxy details such as **Proxy
    Server***, **Proxy Port**, **Username**, and **Password** (if applicable), in
    the following screen:![Case 2 - Blackberry 10 simulators](graphics/image_05_005.jpg)
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在连接的 SSID 设置下，配置代理详细信息，如**代理服务器**、**代理端口**、**用户名**和**密码**（如适用），如以下屏幕所示：![案例
    2 - 黑莓 10 模拟器](graphics/image_05_005.jpg)
- en: This would connect the Simulator to the proxy tool via Wi-Fi and now you can
    tamper the application traffic.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 这将通过 Wi-Fi 将模拟器连接到代理工具，您现在可以篡改应用程序流量。
- en: Case 3 - Blackberry 10 phones
  id: totrans-163
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 案例 3 - 黑莓 10 手机
- en: Follow similar steps as in Case 2 on the Blackberry phone instead of the simulator.
    Your phone should start sending application traffic via HTTP proxy tools.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 按照案例 2 中的类似步骤，在黑莓手机上进行设置，而不是模拟器。您的手机应该开始通过 HTTP 代理工具发送应用程序流量。
- en: How it works...
  id: totrans-165
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 工作原理...
- en: 'Now let us see how interception works. First, we need to configure Burp proxy
    to run on `9999`. The following screenshot shows how the interface should look
    after it is configured to run on `9999`. Change the default port number of Burp
    proxy by clicking on the **Edit** button and update the port number field with
    `9999`. Once you click on the **OK** button, the **Proxy Listeners** tab looks
    as shown in the following screenshot:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们看看拦截是如何工作的。首先，我们需要配置 Burp 代理以在 `9999` 端口上运行。以下截图显示了配置为在 `9999` 端口上运行后的界面。点击**编辑**按钮，修改端口号字段为
    `9999`，点击**确定**按钮后，**代理监听器**选项卡将如下所示：
- en: '![How it works...](graphics/image_05_006.jpg)'
  id: totrans-167
  prefs: []
  type: TYPE_IMG
  zh: '![工作原理...](graphics/image_05_006.jpg)'
- en: Now that Blackberry Simulator and Burp Proxy is working, the application traffic
    can be captured and edited. Various web application-related attacks can be done
    now by manipulating the application traffic.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 现在黑莓模拟器和 Burp Proxy 正在工作，应用程序流量可以被捕获和编辑。通过篡改应用程序流量，可以进行各种与 Web 应用程序相关的攻击。
- en: There's more...
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: 'Try different proxy tools:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试不同的代理工具：
- en: In our experience, we have noted that sometimes some proxies cannot handle all
    mobile app traffic. Generally, it is a good idea to switch proxy tools if application
    capture does not work. Usually Burp Suite and Charles Proxy are able to handle
    most types of mobile application traffic.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我们的经验，我们注意到有时某些代理工具无法处理所有移动应用流量。通常，如果应用捕获无法正常工作，切换代理工具是一个好主意。通常，Burp Suite
    和 Charles Proxy 能够处理大多数类型的移动应用流量。
- en: Also Burp Proxy's default `8080` port creates a conflict with MDS, which is
    why we used port `9999` in our configurations. Using Charles Proxy, the default
    port is `8888` which means you will not face the MDS conflict by-default.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Burp Proxy 默认的 `8080` 端口与 MDS 存在冲突，这就是我们在配置中使用端口 `9999` 的原因。使用 Charles Proxy
    时，默认端口为 `8888`，这意味着您默认不会遇到 MDS 冲突。
- en: See also
  id: totrans-173
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-the-BlackBerry-MDS-Simulator-to-work-behind-a-proxy/ta-p/446115](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-the-BlackBerry-MDS-Simulator-to-work-behind-a-proxy/ta-p/446115)'
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-the-BlackBerry-MDS-Simulator-to-work-behind-a-proxy/ta-p/446115](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Configure-the-BlackBerry-MDS-Simulator-to-work-behind-a-proxy/ta-p/446115)'
- en: '[http://prashantverma21.blogspot.in/2011/12/setting-up-proxy-for-blackberry.html](http://prashantverma21.blogspot.in/2011/12/setting-up-proxy-for-blackberry.html)'
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://prashantverma21.blogspot.in/2011/12/setting-up-proxy-for-blackberry.html](http://prashantverma21.blogspot.in/2011/12/setting-up-proxy-for-blackberry.html)'
- en: Stealing data from Windows phones applications
  id: totrans-176
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从 Windows Phone 应用程序窃取数据
- en: 'Stealing data from the application source code residing on the phone is an
    important attack vector. OWASP Mobile Top 10 puts it up as M10: Lack of Binary
    Protection. Reverse engineering the mobile application to obtain the decompiled
    source code and then mining the data hardcoded in the application may result in
    sensitive data revealing. At times developers tend to hardcode connection strings,
    passwords, keys, or access tokens in the application.'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 从存储在手机上的应用程序源代码中窃取数据是一个重要的攻击路径。OWASP 移动应用程序十大漏洞将其列为 M10：缺乏二进制保护。逆向工程移动应用程序以获取反编译的源代码，然后挖掘硬编码在应用程序中的数据，可能会导致敏感数据泄露。有时开发者会在应用程序中硬编码连接字符串、密码、密钥或访问令牌。
- en: This recipe performs decompiling to steal data from Windows Phone apps which
    are in `.xap` format.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 这个方案执行反编译以窃取 Windows Phone 应用程序中 `.xap` 格式的数据。
- en: Getting ready
  id: totrans-179
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备中
- en: 'The tool to convert the `.dll` to a `.cs` or `.vb` project file is shown as
    following:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 将 `.dll` 文件转换为 `.cs` 或 `.vb` 项目文件的工具如下所示：
- en: '**ILSpy**: ILSpy is a very useful open source tool to decompile and manipulate
    .NET apps. We will use it to convert DLL files to the original `.cs` or `.vb`
    files.'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ILSpy**：ILSpy 是一个非常有用的开源工具，用于反编译和操作 .NET 应用程序。我们将使用它将 DLL 文件转换为原始的 `.cs`
    或 `.vb` 文件。'
- en: '**Decompresser tool**: Winrar/WinZip/7zip'
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**解压工具**：Winrar/WinZip/7zip'
- en: '![Getting ready](graphics/image_05_007.jpg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![准备中](graphics/image_05_007.jpg)'
- en: 'Windows Market applications are **Digital Rights Management** (**DRM**) protected
    and it may not be easy to obtain DLLs just by uncompressing the file:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 市场应用程序是 **数字版权管理** (**DRM**) 保护的，可能并不容易通过解压文件直接获取 DLL：
- en: Study the contents of the application package and note the `.dll` file present:![Getting
    ready](graphics/image_05_008.jpg)
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 学习应用程序包的内容，并注意其中存在的 `.dll` 文件：![准备中](graphics/image_05_008.jpg)
- en: Now use ILSpy to decompile the DLL file and obtain the original source code.
    In the ILSpy console, go to **Open** under **File** menu and provide the path
    of the DLL file to be decompiled:![Getting ready](graphics/image_05_009.jpg)
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在使用 ILSpy 来反编译 DLL 文件并获取原始源代码。在 ILSpy 控制台中，点击 **文件** 菜单下的 **打开**，并提供要反编译的 DLL
    文件路径：![准备中](graphics/image_05_009.jpg)
- en: The result of this process is the entire application source code (a snippet
    of which is shown in the following screenshot). The source code can now be searched
    for hardcoded secrets such as keys, passwords, PIN, and so on:![Getting ready](graphics/image_05_010.jpg)
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这个过程的结果是整个应用程序的源代码（以下截图显示了其中的一部分）。现在可以在源代码中查找硬编码的机密信息，如密钥、密码、PIN 等：![准备中](graphics/image_05_010.jpg)
- en: How it works...
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Windows Phone compiler suite compiles the developer's .net files into DLL
    object code files, and then the `.dll` files are converted into `.xap` files.
    XAP are Silverlight or Windows phone compatible applications.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone 编译套件将开发者的 .net 文件编译成 DLL 对象代码文件，然后将 `.dll` 文件转换为 `.xap` 文件。XAP
    是 Silverlight 或 Windows Phone 兼容的应用程序。
- en: 'The main objective of this method is to get hold of the intermediate `.dll`
    file and then use a `.net` decompiler to decompile the same and obtain a project
    file. We did this in two steps discussed:'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这个方法的主要目标是获取中间的 `.dll` 文件，然后使用 `.net` 反编译器来反编译它并获取项目文件。我们在前面已经讨论了这两步：
- en: The XAP file is analyzed and DLL is obtained.
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 分析 XAP 文件并获取 DLL。
- en: ILSpy is used to obtain decompiled source code from the DLL file.
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 ILSpy 获取 DLL 文件的反编译源代码。
- en: There's more...
  id: totrans-193
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Source code is available in decompiled format. What next?
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 反编译后的源代码现在可以使用。接下来做什么？
- en: Apply tricks such as decompiler tool search features or extract decompiled code
    in a folder and use a `grep` or `find` command. Use keywords such as `password`,
    `pwd`, `key`, `connection`, `encryption`, and `o-auth` in static string searches
    to find sensitive information.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 使用反编译工具的搜索功能，或者将反编译后的代码提取到一个文件夹中，并使用 `grep` 或 `find` 命令。可以使用 `password`、`pwd`、`key`、`connection`、`encryption`
    和 `o-auth` 等关键字在静态字符串搜索中查找敏感信息。
- en: Manually, browse through the file names which may look to implement critical
    business logic, authentication, or encryption.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 手动浏览文件名，这些文件可能实现了关键的业务逻辑、身份验证或加密。
- en: Try breaking into the application server with the obtained information from
    the source code.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试使用从源代码中获得的信息破解应用服务器。
- en: Obfuscators are used by smart developers to make hackers and crackers tasks
    more difficult. Source code is obfuscated which makes interpretation of the decompiled
    code difficult.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 混淆器被智能开发者用来让黑客和破解者的任务变得更加困难。源代码被混淆，使得反编译后的代码难以理解。
- en: See also
  id: totrans-199
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '**Free, open source obfuscator**: [http://yck1509.github.io/ConfuserEx/](http://yck1509.github.io/ConfuserEx/)'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**免费的开源混淆器**：[http://yck1509.github.io/ConfuserEx/](http://yck1509.github.io/ConfuserEx/)'
- en: Stealing data from Blackberry applications
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从Blackberry应用程序中窃取数据
- en: 'Stealing data from the application source code residing on the phone, as also
    recognized under OWASP Mobile Top 10 as M10: Lack of Binary Protection, is a source
    of leakage of sensitive hardcoded data. Reverse engineering the mobile application
    to obtain the decompiled source code and then mining the data hardcoded in the
    application is performed. At times developers tend to hardcode connection strings,
    passwords, keys, or access tokens in the application.'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 从手机上存储的应用程序源代码中窃取数据，正如OWASP Mobile Top 10中识别的M10：缺乏二进制保护，成为泄露敏感硬编码数据的来源。逆向工程移动应用程序以获取反编译后的源代码，然后挖掘应用程序中硬编码的数据。有时开发者倾向于将连接字符串、密码、密钥或访问令牌硬编码在应用程序中。
- en: This recipe extends the goal of the previous recipe to the Blackberry platform
    and attempts to decompile the Blackberry application that is in `.cod` format.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程将前一个教程的目标扩展到Blackberry平台，并尝试反编译`.cod`格式的Blackberry应用程序。
- en: Getting ready
  id: totrans-204
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following tools are required for the readiness in accordance with the current
    recipe:'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 根据当前的操作步骤，需要以下工具进行准备：
- en: '**Coddec**: A tool to convert `.cod` file to `.java` file is needed. We used
    Coddec for the same.'
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Coddec**：需要一个工具将`.cod`文件转换为`.java`文件。我们使用了Coddec来完成这个工作。'
- en: '**A few .cod files**: We need a few application files that are `.cod` files
    to attempt decompilation.'
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**一些`.cod`文件**：我们需要一些`.cod`文件格式的应用程序文件来尝试反编译。'
- en: How to do it...
  id: totrans-208
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps:'
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Copy all the `.cod` files from the device onto your machine (these `.cod` files
    can be found in the external SD card of the Blackberry phone provided you install
    the application on an external SD card). Open the same in notepad and check for
    encryption and non-readable forms:![How to do it...](graphics/image_05_011.jpg)
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将所有`.cod`文件从设备复制到计算机上（这些`.cod`文件可以在安装应用程序于外部SD卡的Blackberry手机的外部SD卡中找到）。用记事本打开这些文件并检查加密和不可读的形式：![如何操作...](graphics/image_05_011.jpg)
- en: Now, extract the `coddec` tool as shown in the following screenshot. The `doit.bat`
    file is the command to execute and perform the decompilation:![How to do it...](graphics/image_05_012.jpg)
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，按照以下截图提取`coddec`工具。`doit.bat`文件是执行命令并进行反编译的命令：![如何操作...](graphics/image_05_012.jpg)
- en: Copy the `.cod` files into the `coddec` tools folder source.
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`.cod`文件复制到`coddec`工具文件夹中。
- en: Run the command `doit.bat *.cod` in the command line. This action converts non-readable
    `.cod` files to readable notepad files with source code now more interpretable.
  id: totrans-213
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在命令行中运行`doit.bat *.cod`命令。此操作将不可读的`.cod`文件转换为可读的记事本文件，并使源代码更容易解读。
- en: How it works...
  id: totrans-214
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The Blackberry compiler suite compiles the developer's Java files into class
    files, and then the class files are converted into `.cod` files. The `.cod` files
    relate to code files of Blackberry. These are proprietary Blackberry application
    code package format.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: Blackberry编译器套件将开发者的Java文件编译成类文件，然后将类文件转换为`.cod`文件。`.cod`文件与Blackberry的代码文件有关。这些是Blackberry专有的应用程序代码包格式。
- en: To reverse the application source code, we used a tool called Coddec which helped
    us to translate the encrypted `.cod` proprietary code to a code-equivalent readable
    file.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 为了逆向应用程序源代码，我们使用了一个叫Coddec的工具，它帮助我们将加密的`.cod`专有代码转换为可读的代码文件。
- en: There's more...
  id: totrans-217
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多...
- en: Once the application code is decompiled, let us locate some sensitive useful
    data. Let us browse through the contents of the code and search for the treasure
    key words such as `keys`, `algorithm`, `password`, `authentication`, `formula`
    and so on.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦应用程序代码被反编译，我们就可以定位一些敏感的有用数据。让我们浏览代码内容并搜索诸如`keys`、`algorithm`、`password`、`authentication`、`formula`等关键字。
- en: In our case, we obtained RIM API or library references used. Though this may
    not directly lead to a hack, it helps us understand the mobile application design.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的案例中，我们获取了RIM API或库引用。虽然这可能不会直接导致破解，但它帮助我们理解移动应用程序的设计。
- en: Blackberry platform latest versions are equipped with further stronger compilation
    processes, making it more difficult to obtain the code references.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 黑莓平台的最新版本配备了更强大的编译过程，使得获取代码引用变得更加困难。
- en: Obfuscation can be used on Blackberry platforms as well to protect the source
    code. This can be done by following certain steps within Blackberry JDE itself.
    Please follow the link mentioned underneath for the same.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在黑莓平台上也可以使用混淆技术来保护源代码。通过在Blackberry JDE中执行特定步骤可以实现此功能。请按照下面的链接进行操作。
- en: See also
  id: totrans-222
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[https://supportforums.blackberry.com/t5/Java-Development/Obfuscate-code-in-a-BlackBerry-application/ta-p/444843](https://supportforums.blackberry.com/t5/Java-Development/Obfuscate-code-in-a-BlackBerry-application/ta-p/444843)'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://supportforums.blackberry.com/t5/Java-Development/Obfuscate-code-in-a-BlackBerry-application/ta-p/444843](https://supportforums.blackberry.com/t5/Java-Development/Obfuscate-code-in-a-BlackBerry-application/ta-p/444843)'
- en: Reading local data in Windows phone
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在Windows Phone中读取本地数据
- en: 'As we have learned previously in this book, mobile apps tend to store data
    on the phone. The data stored can be in multiple formats on different mobile platforms
    like `.plist`, `.sqlite`, and `.xml` file. OWASP recognizes this under M2: Insecure
    Data Storage. Data mining in the application folders (such as `/data/data` in
    case of Android) may result in the leakage of sensitive data present there. This
    recipe is intended to provide you with details on how to read locally stored data
    from the Windows Phone memory.'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们在本书中之前学到的，移动应用通常会将数据存储在手机上。存储的数据在不同的移动平台上可能采用不同的格式，如`.plist`、`.sqlite`和`.xml`文件。OWASP在M2中识别了这一点：不安全的数据存储。在应用程序文件夹中（例如Android的`/data/data`）进行数据挖掘可能导致敏感数据泄露。本节内容旨在为您提供如何从Windows
    Phone内存中读取本地存储数据的详细信息。
- en: Getting ready
  id: totrans-226
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following tools are required for the readiness in accordance with the current
    recipe:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 根据当前食谱，准备工作所需的工具如下：
- en: '**WP Power Tools**: Windows Phone Power Tools allow you to interact with your
    applications and perform activities such as storage analysis'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WP Power Tools**：Windows Phone Power Tools允许您与应用程序交互并执行存储分析等操作'
- en: '**The XAP of the application**: We would need a few XAP files to analyse their
    storage'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**应用程序的XAP文件**：我们需要几个XAP文件来分析它们的存储'
- en: How to do it...
  id: totrans-230
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Perform the following steps:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Install Windows Phone Power tools from this link ([http://wptools.codeplex.com/releases/view/97029](http://wptools.codeplex.com/releases/view/97029))
    onto the Windows 8 system. Connect the Windows phone to the laptop via a USB cable.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从此链接安装Windows Phone Power Tools到Windows 8系统上（[http://wptools.codeplex.com/releases/view/97029](http://wptools.codeplex.com/releases/view/97029)）。通过USB连接将Windows
    Phone与笔记本电脑连接。
- en: Once installed, launch WP Power Tools and connect it to the Windows device from
    the **connect to a device** tab. This is depicted in the following screenshot:![How
    to do it...](graphics/image_05_013.jpg)
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，启动WP Power Tools并通过**连接到设备**选项卡将其连接到Windows设备。如下图所示：![如何操作…](graphics/image_05_013.jpg)
- en: Using **WP Power Tools**, install the XAP on the Windows device as shown in
    the following screenshot:![How to do it...](graphics/image_05_014.jpg)
  id: totrans-234
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用**WP Power Tools**，将XAP文件安装到Windows设备上，如下图所示：![如何操作…](graphics/image_05_014.jpg)
- en: Once the application has been installed on the device, browse through it and
    exit.
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦应用程序安装在设备上，浏览并退出应用程序。
- en: Open the **Isolated Storage** tab of WP Power Tools and right-click on the icon
    with the application name. This is depicted in the following screenshot (using
    a test app). Click on **Refresh** to populate the data:![How to do it...](graphics/image_05_015.jpg)
  id: totrans-236
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开WP Power Tools的**隔离存储**选项卡，右键单击应用程序名称图标。如下图所示（使用测试应用）。点击**刷新**以填充数据：![如何操作…](graphics/image_05_015.jpg)
- en: Browse through the files within the folder named after the application:![How
    to do it...](graphics/image_05_016.jpg)
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览名为应用程序的文件夹中的文件：![如何操作…](graphics/image_05_016.jpg)
- en: How it works...
  id: totrans-238
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: 'Windows Phone Power Tools work by installing a windows app (`.xap` file) and
    analyzing the file structure created by the application. This eventually leads
    us to the locally stored data. For example, in case of the example taken in this
    recipe, an SQLite file was found that is displayed in the following screenshot:'
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Phone Power Tools通过安装Windows应用程序（`.xap`文件）并分析应用程序创建的文件结构来工作。这最终会将我们引导到本地存储的数据。例如，在本食谱中提到的示例中，发现了一个SQLite文件，如下图所示：
- en: '![How it works...](graphics/image_05_017.jpg)'
  id: totrans-240
  prefs: []
  type: TYPE_IMG
  zh: '![它是如何工作的…](graphics/image_05_017.jpg)'
- en: Since this works by installation of an application, the applications installed
    from Windows Store can't be analyzed this way.
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 由于该过程依赖于应用程序的安装，因此从 Windows Store 安装的应用程序无法通过这种方式进行分析。
- en: There's more...
  id: totrans-242
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: 'As part of Windows Phone 8 SDK, there is a tool called Isolated Storage Explorer.
    This command line tool can read and modify files in the application''s local data
    folder in the phone (this can be related to the ADB tool of Android). The usage
    information for Isolated Storage Explorer can be found here:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 作为 Windows Phone 8 SDK 的一部分，有一个名为 Isolated Storage Explorer 的工具。这个命令行工具可以读取和修改手机应用程序本地数据文件夹中的文件（这与
    Android 的 ADB 工具类似）。关于 Isolated Storage Explorer 的使用信息可以在这里找到：
- en: '[https://msdn.microsoft.com/en-in/library/windows/apps/hh286408(v=vs.105).aspx](https://msdn.microsoft.com/en-in/library/windows/apps/hh286408(v=vs.105).aspx)'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://msdn.microsoft.com/en-in/library/windows/apps/hh286408(v=vs.105).aspx](https://msdn.microsoft.com/en-in/library/windows/apps/hh286408(v=vs.105).aspx)'
- en: See also
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 参见
- en: '[http://wptools.codeplex.com/releases/view/97029](http://wptools.codeplex.com/releases/view/97029)'
  id: totrans-246
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://wptools.codeplex.com/releases/view/97029](http://wptools.codeplex.com/releases/view/97029)'
- en: '[http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/](http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/)'
  id: totrans-247
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/](http://resources.infosecinstitute.com/windows-phone-digital-forensics-2/)'
- en: NFC-based attacks
  id: totrans-248
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 基于 NFC 的攻击
- en: '**Near Field Communication** (**NFC**) is a communication mechanism for proximity
    devices. NFC-enabled peers can communicate with each other without internet just
    like Bluetooth devices can. A hardware chip is present in NFC-enabled phones that
    enables NFC communication with other peers.'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '**近场通信**（**NFC**）是一种为近距离设备设计的通信机制。支持 NFC 的设备可以像蓝牙设备一样互相通信，而无需互联网。支持 NFC 的手机中配备了一种硬件芯片，使得
    NFC 能够与其他设备进行通信。'
- en: A few organizations have started using MiFare cards and card readers that are
    NFC enabled. User attendance and access control records are logged this way. These
    cards can also be used to make payments at cafeterias, and so on.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 一些组织已经开始使用支持 NFC 的 MiFare 卡和卡片读取器。用户的出勤和访问控制记录通过这种方式进行日志记录。这些卡片还可以用来在食堂等地方进行支付。
- en: Google Wallet is a good example of a mobile app that can use NFC for payments.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: Google Wallet 是一个很好的例子，它可以使用 NFC 进行支付。
- en: Getting ready
  id: totrans-252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To try out NFC based hacks, you need:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 要尝试基于 NFC 的黑客攻击，你需要：
- en: NFC-enabled phones
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 NFC 的手机
- en: NFC tag(s) or NFC credit cards
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: NFC 标签或 NFC 信用卡
- en: Applications such as NFCProxy for Android phone
  id: totrans-256
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 例如 Android 手机上使用的 NFCProxy 应用程序
- en: NFC applications such as NFC Reader or Advanced NFC System downloaded from the
    Play Store
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 Play Store 下载的 NFC 应用程序，如 NFC Reader 或 Advanced NFC System
- en: How to do it...
  id: totrans-258
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps:'
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Install NFCProxy tool and other NFC apps (NFC Reader and Advanced NFC System)
    on your Android phone.
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的 Android 手机上安装 NFCProxy 工具和其他 NFC 应用程序（如 NFC Reader 和 Advanced NFC System）。
- en: NFCProxy can be downloaded from [https://sourceforge.net/projects/nfcproxy/](https://sourceforge.net/projects/nfcproxy/).
    Other tools are present on the Play Store.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: NFCProxy 可以从 [https://sourceforge.net/projects/nfcproxy/](https://sourceforge.net/projects/nfcproxy/)
    下载。其他工具也可以在 Play Store 中找到。
- en: Touch the NFC tag with the Phone running NFC tools
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用运行 NFC 工具的手机触碰 NFC 标签
- en: Notice that with the interaction in NFC communication range (less than 4 cms),
    the data stored on the NFC tag is read by these NFC applications.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 注意，在 NFC 通信范围内（不到 4 厘米），这些 NFC 应用程序可以读取存储在 NFC 标签上的数据。
- en: Here is the screen you see when you use **Advanced NFC System**:![How to do
    it...](graphics/image_05_018.jpg)Notice that you can read, reset, or configure
    NFC tags with it.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 这是使用 **Advanced NFC System** 时你看到的界面：![如何操作...](graphics/image_05_018.jpg)注意，你可以使用它读取、重置或配置
    NFC 标签。
- en: You can use NFCProxy to proxy the transactional data between the NFC card reader
    and the NFC-enabled card. Here is a snapshot of the tool showing saved NFC data
    (made available by the tool creators):![How to do it...](graphics/image_05_019.jpg)
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以使用 NFCProxy 代理 NFC 卡片读取器和支持 NFC 的卡片之间的交易数据。以下是工具显示保存的 NFC 数据的截图（由工具创作者提供）：![如何操作...](graphics/image_05_019.jpg)
- en: How it works...
  id: totrans-266
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'NFC can be attacked in multiple ways. Common attacks on NFC include:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: NFC 可以通过多种方式受到攻击。常见的 NFC 攻击包括：
- en: Eavesdropping
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 窃听
- en: Data tampering
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据篡改
- en: Data fuzzing
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据模糊处理
- en: Eavesdropping
  id: totrans-271
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 窃听
- en: A common problem with NFC has been missing encryption. NFC communication can
    be sniffed by a rogue proximity device and since the encryption is missing or
    weak encoding is used, the data transmitted can be obtained.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: NFC 的一个常见问题是缺乏加密。NFC 通信可以被恶意的近距离设备嗅探，因为加密缺失或使用了弱编码，因此传输的数据可以被获取。
- en: If in the enterprise scenario, communication of NFC-enabled MiFare cards is
    sniffed, data such as employee IDs and their uniquely associated tokens to record
    their attendance is stolen. This stolen data can then be cloned to create rogue
    NFC peers and the entire organization's access control can be bypassed.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在企业场景中，嗅探到启用NFC的MiFare卡之间的通信，那么员工ID以及与之唯一关联的令牌（用于记录员工考勤）等数据就会被盗取。然后，这些被盗数据可以被克隆，用来创建恶意NFC设备，进而绕过整个组织的访问控制。
- en: Data tampering
  id: totrans-274
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据篡改
- en: NFC Proxy is an android application. It can be used to set up a proxy between
    an RFID card and the reader. The captured sensitive data via proxy mode can be
    displayed, replayed, or deleted. The saved date can later be used to clone payment
    cards thereby creating duplicate NFC peers. These fake cards would later be used
    for fraudulent transactions, or the captured transaction can be replayed multiple
    times to cause financial harm to the victim.
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: NFC Proxy是一个安卓应用程序。它可以用来在RFID卡和读卡器之间设置代理。通过代理模式捕获的敏感数据可以显示、重放或删除。保存的数据稍后可以用来克隆支付卡，从而创建重复的NFC设备。这些伪造的卡片后来将被用于欺诈交易，或者捕获的交易可以被重复多次，从而对受害者造成经济损失。
- en: Data fuzzing
  id: totrans-276
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据模糊处理
- en: The captured data once under our control can be tampered with, can also be fuzzed
    with long strings. This may lead to buffer overflow kinds of attack.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们控制了捕获的数据，它可以被篡改，也可以用长字符串进行模糊处理。这可能导致类似缓冲区溢出的攻击。
- en: There's more...
  id: totrans-278
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 还有更多……
- en: Mobile apps tend to store data on the phone. Weak NFC communication settings
    in the phone can be a boon to the attackers. NFC apps may use the stored data
    on the phone to communicate. Weak settings such as authentication requirement
    for NFC peers along with missing encryption in NFC becomes a boon.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 移动应用程序往往将数据存储在手机上。手机中较弱的NFC通信设置可能成为攻击者的助力。NFC应用可能会利用手机中存储的数据进行通信。像NFC设备身份验证要求缺失以及NFC中缺少加密这样的弱设置，成了攻击者的利器。
- en: Consider the payment app that stores credit card information in the phone and
    flashes the same when a payment is to be made. A targeted attack here can sniff
    the credit card details being exchanged between the other two NFC peers.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 考虑一下支付应用程序，它将信用卡信息存储在手机中，并在进行支付时显示相应的信息。在这里进行有针对性的攻击可以嗅探到在两个NFC设备之间交换的信用卡详细信息。
- en: 'It is very important to securely configure NFC on the mobile phones. A few
    security measures:'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 确保手机上安全地配置NFC是非常重要的。以下是一些安全措施：
- en: Turn off NFC when it is not needed
  id: totrans-282
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在不需要时关闭NFC
- en: Keep your device updated with the latest NFC patch
  id: totrans-283
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持设备更新，安装最新的NFC补丁
- en: Configure authentication passwords for other NFC peers, if the device permits
    you to do so.
  id: totrans-284
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为其他NFC设备配置身份验证密码，如果设备允许的话。
- en: See also
  id: totrans-285
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 另见
- en: '[http://blackwinghq.com/assets/labs/presentations/EddieLeeDefcon20.pdf](http://blackwinghq.com/assets/labs/presentations/EddieLeeDefcon20.pdf)'
  id: totrans-286
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://blackwinghq.com/assets/labs/presentations/EddieLeeDefcon20.pdf](http://blackwinghq.com/assets/labs/presentations/EddieLeeDefcon20.pdf)'
- en: '[http://sourceforge.net/projects/nfcproxy/](http://sourceforge.net/projects/nfcproxy/)'
  id: totrans-287
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[http://sourceforge.net/projects/nfcproxy/](http://sourceforge.net/projects/nfcproxy/)'
