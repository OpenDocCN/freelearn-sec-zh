- en: Getting Started
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入门
- en: 'The following recipes will be covered in this chapter:'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍以下内容：
- en: Configuring a security lab with VMware Player (Windows)
  id: totrans-2
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 VMware Player 配置安全实验室（Windows）
- en: Configuring a security lab with VMware Fusion (macOS)
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用 VMware Fusion 配置安全实验室（macOS）
- en: Installing Ubuntu Server
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Ubuntu Server
- en: Installing Metasploitable2
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Metasploitable2
- en: Installing Windows Server
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Windows Server
- en: Increasing the Windows attack surface
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 增加 Windows 攻击面
- en: Installing Kali Linux
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Kali Linux
- en: Using text editors (Vim and GNU nano)
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用文本编辑器（Vim 和 GNU nano）
- en: Keeping Kali updated
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持 Kali 更新
- en: Managing Kali services
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理 Kali 服务
- en: Configuring and using SSH
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 配置和使用 SSH
- en: Installing Nessus on Kali Linux
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Kali Linux 上安装 Nessus
- en: Introduction
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: This first chapter covers the basics of setting up and configuring a virtual
    security lab, which can be used to practice most of the scenarios and exercises
    addressed throughout this book. Topics addressed in this chapter include the installation
    of the virtualization software, the installation of various systems in the virtual
    environment, and the configuration of some of the tools that will be used in the
    exercises.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了设置和配置虚拟安全实验室的基础知识，虚拟安全实验室可以用来练习本书中大多数场景和练习。章节内容包括虚拟化软件的安装、虚拟环境中各种系统的安装，以及一些将用于练习的工具的配置。
- en: Configuring a security lab with VMware Player (Windows)
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用 VMware Player 配置安全实验室（Windows）
- en: You can run a virtual security lab on a Windows PC with relatively few available
    resources by installing VMware Player on your Windows workstation. You can get
    VMware Player for free or get the more functional alternative, VMware Player Plus,
    for a low cost.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在 Windows 工作站上安装 VMware Player，你可以在资源相对较少的 Windows PC 上运行虚拟安全实验室。你可以免费获得 VMware
    Player，或者以低价购买功能更强大的 VMware Player Plus。
- en: Getting ready
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'To download and install VMware Player on the Windows system, follow these steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要在 Windows 系统上下载并安装 VMware Player，请按照以下步骤操作：
- en: To install VMware Player on your Windows workstation, you will first need to
    download the software. The download for the free version of VMware Workstation
    Player can be found at [https://my.vmware.com/web/vmware/free](https://my.vmware.com/web/vmware/free).
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在 Windows 工作站上安装 VMware Player，你需要首先下载软件。你可以在 [https://my.vmware.com/web/vmware/free](https://my.vmware.com/web/vmware/free)
    下载 VMware Workstation Player 的免费版本。
- en: On this page, scroll down to the VMware Workstation Player link and click on
    Download.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此页面上，向下滚动到 VMware Workstation Player 链接，然后点击下载。
- en: On page that opens up, select the Windows 64-bit installation package and then
    click on Download.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在打开的页面上，选择 Windows 64 位安装包，然后点击下载。
- en: There are installation packages available for Linux 64-bit systems as well.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 也有适用于 Linux 64 位系统的安装包。
- en: How to do it…
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Follow these steps to setup the virtual environment:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤设置虚拟环境：
- en: Once the software package has been downloaded, you should find it in your default
    download directory. Double-click on the executable file in this directory to start
    the installation process. Once started, it is as easy as following the on-screen
    instructions to complete the installation.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载软件包后，你应该能够在默认的下载目录中找到它。双击该目录中的可执行文件开始安装过程。启动后，只需按照屏幕上的指示完成安装。
- en: 'After the installation is complete, you should be able to start VMware Player
    using the desktop icon, the quick launch icon, or from All Programs. Once it''s
    loaded, you will see the virtual machine library. This library will not yet contain
    any virtual machines, but they will be populated as you create them in the left-hand
    side of the screen, as shown in the following screenshot:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，你应该能够通过桌面图标、快速启动图标或从“所有程序”中启动 VMware Player。加载后，你将看到虚拟机库。此时库中尚未包含任何虚拟机，但它们将在你创建时显示在屏幕左侧，如下图所示：
- en: '![](../images/00406.jpeg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00406.jpeg)'
- en: 'Once you have opened VMware Workstation Player, you can select Create a New
    Virtual Machine to get started. This will initialize a very easy-to-use virtual
    machine installation wizard:'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你打开 VMware Workstation Player，你可以选择创建一个新的虚拟机来开始。这样会启动一个非常易于使用的虚拟机安装向导：
- en: '![](../images/00173.jpeg)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00173.jpeg)'
- en: The first task you need to perform in the installation wizard is to define the
    installation media. You can choose to install it directly from your host machine's
    optical drive, or you can use an ISO image file. ISOs will be used for most of
    the installations discussed in this section, and the place you can get them from
    will be mentioned in each specific recipe.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装向导中首先需要执行的任务是定义安装介质。您可以选择直接从主机的光驱安装，或者使用ISO镜像文件。此部分讨论的大多数安装将使用ISO文件，您可以在每个特定的操作步骤中找到获取这些ISO文件的途径。
- en: 'For now, we will assume that we browsed to an existing ISO file and clicked
    on Next. VMware Workstation Player will attempt to determine the operating system
    of the ISO file you selected. In some cases, it cannot and will ask you what operating
    system you are installing. In this example, we will choose Debian 8.x and click
    on Next:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，我们假设我们浏览到一个现有的ISO文件并点击了“下一步”。VMware Workstation Player将尝试确定您选择的ISO文件的操作系统。在某些情况下，它无法识别，并会询问您正在安装哪种操作系统。在本例中，我们将选择Debian
    8.x并点击“下一步”：
- en: '![](../images/00174.jpeg)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00174.jpeg)'
- en: 'You then need to assign a name for the virtual machine. The virtual machine
    name is merely an arbitrary value that serves as a label to identify and distinguish
    it from other VMs in your library. Since a security lab is often classified by
    a diversity of operating systems, it can be useful to indicate the operating system
    as part of the virtual machine''s name:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，您需要为虚拟机分配一个名称。虚拟机名称只是一个任意值，用作标签来标识并与库中的其他虚拟机区分开来。由于安全实验室通常按不同操作系统进行分类，因此在虚拟机名称中指明操作系统会很有用：
- en: '![](../images/00175.jpeg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00175.jpeg)'
- en: 'The next screen requests a value for the maximum size of the installation.
    The virtual machine will only consume hard drive space as required, but it will
    not exceed the value specified here. You should be aware of the minimum required
    disk space for your operating system and budget appropriately. Additionally, you
    can also define whether the virtual machine will be contained within a single
    file or spread across multiple files, as seen in the following screenshot:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一屏幕要求输入安装的最大大小值。虚拟机只会按需占用硬盘空间，但不会超过此处指定的值。您应该了解操作系统的最小磁盘空间要求，并适当分配空间。此外，您还可以定义虚拟机是被包含在一个文件中，还是分散在多个文件中，如以下截图所示：
- en: '![](../images/00177.jpeg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00177.jpeg)'
- en: 'Once you are done with specifying the disk capacity, you will see the following:'
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成磁盘容量指定后，您将看到如下界面：
- en: '![](../images/00578.jpeg)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00578.jpeg)'
- en: 'The final step provides a summary of the configurations. You can either select
    the Finish button to finalize the creation of the virtual machine or select the
    Customize Hardware… button to manipulate more advanced configurations. Have a
    look at the following screenshot for the advanced configurations:'
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后一步会提供配置摘要。您可以选择“完成”按钮以最终确定虚拟机的创建，或者选择“自定义硬件…”按钮以调整更高级的配置。请查看以下截图以了解高级配置：
- en: '![](../images/00636.jpeg)'
  id: totrans-41
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00636.jpeg)'
- en: 'The advanced configuration settings give you full control over shared resources,
    virtual hardware configurations, and networking. Most of the default configurations
    should be sufficient for your security lab, but if changes need to be made at
    a later time, these configurations can be readdressed by accessing the virtual
    machine settings. When you are done with setting up the advanced configuration,
    you will see something similar to the following:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 高级配置设置使您可以完全控制共享资源、虚拟硬件配置和网络设置。大多数默认配置应该足够用于您的安全实验室，但如果稍后需要进行更改，您可以通过访问虚拟机设置重新调整这些配置。当您完成高级配置设置后，您将看到类似以下的界面：
- en: '![](../images/00089.jpeg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00089.jpeg)'
- en: After the installation wizard has finished, you should see the new virtual machine
    listed in your virtual machine library. From here, it can now be launched by pressing
    the Play virtual machine button. Multiple virtual machines can be run simultaneously
    by opening multiple instances of VMware Workstation Player and a unique VM in
    each instance.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装向导完成后，您应该会在虚拟机库中看到新的虚拟机。在这里，您可以通过按下“播放虚拟机”按钮来启动它。通过打开多个VMware Workstation
    Player实例并在每个实例中运行一个唯一的虚拟机，可以同时运行多个虚拟机。
- en: How it works…
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理……
- en: VMware creates a virtualized environment in which resources from a single hosting
    system can be shared to create an entire network environment. Virtualization software
    such as VMware has made it significantly easier and cheaper to build a security
    lab for personal, independent study.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: VMware 创建了一个虚拟化环境，在这个环境中，单一主机系统的资源可以共享，从而创建整个网络环境。像 VMware 这样的虚拟化软件使得搭建个人独立学习用的安全实验室变得更加简单且便宜。
- en: Configuring a security lab with VMware Fusion (macOS)
  id: totrans-47
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 VMware Fusion (macOS) 上配置安全实验室
- en: You can also run a virtual security lab on macOS with relative ease by installing
    VMware Fusion on your Mac. VMware Fusion does require a license that has to be
    purchased, but it is very reasonably priced.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以通过在 Mac 上安装 VMware Fusion，轻松地运行虚拟安全实验室。VMware Fusion 需要购买许可证，但价格非常合理。
- en: Getting ready
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: To install VMware Player on your Mac, you will first need to download the software.
    To download the free trial or purchase the software, go to [https://www.vmware.com/products/fusion/](https://www.vmware.com/products/fusion/).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 要在你的 Mac 上安装 VMware Player，首先需要下载软件。要下载免费试用版或购买软件，请访问[https://www.vmware.com/products/fusion/](https://www.vmware.com/products/fusion/)。
- en: How to do it…
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'These steps will help you to set up the virtual environment in the macOS:'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 以下步骤将帮助你在 macOS 上设置虚拟环境：
- en: Once the software package has been downloaded, you should find it in your default
    download directory. Run the `.dmg` installation file and then follow the on-screen
    instructions to install it.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦软件包下载完成，你应该能够在默认的下载目录中找到它。运行 `.dmg` 安装文件，并按照屏幕上的指示进行安装。
- en: 'Once the installation is complete, you can launch VMware Fusion either from
    the dock or within the `Applications` directory in Finder. Once it''s loaded,
    you will see the Virtual Machine Library window. This library will not yet contain
    any virtual machines, but they will be populated as you create them in the left-hand
    side of the screen. The following screenshot shows the Virtual Machine Library
    window:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，你可以从 Dock 或 Finder 中的`应用程序`目录启动 VMware Fusion。启动后，你将看到虚拟机库窗口。此时，虚拟机库中还没有任何虚拟机，但随着你在屏幕左侧创建它们，它们会逐渐出现在库中。以下截图展示了虚拟机库窗口：
- en: '![](../images/00217.jpeg)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00217.jpeg)'
- en: 'To get started, click on the Add button in the top-left corner of the screen
    and then click on New. This will start the virtual machine installation wizard.
    The installation wizard is a very simple guided process to set up your virtual
    machine, as shown in the following screenshot:'
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始操作，请点击屏幕左上角的“添加”按钮，然后点击“新建”。这将启动虚拟机安装向导。安装向导是一个非常简单的引导过程，帮助你设置虚拟机，如下图所示：
- en: '![](../images/00105.jpeg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00105.jpeg)'
- en: The first step requests that you select your installation method. VMware Fusion
    gives you options to install from a disc or image (ISO file) and offers several
    techniques to migrate existing systems to a new virtual machine. For all of the
    virtual machines discussed in this section, select the first option.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步要求你选择安装方式。VMware Fusion 提供了从光盘或映像（ISO 文件）安装的选项，并且提供多种技术来迁移现有系统到新的虚拟机。对于本节讨论的所有虚拟机，请选择第一个选项。
- en: After selecting the first option, Install from disc or image, you will be prompted
    to select the installation disc or image to be used. If nothing is populated automatically,
    or if the automatically populated option is not the image you want to install,
    click on the Use another disc or disc image... button. This should open up Finder,
    and it will allow you to browse to the image you would like to use. The place
    where you can get specific system image files will be discussed in subsequent
    recipes in this chapter. You may be directed to a screen with a Use Easy Install
    option. If so, just uncheck the Use Easy Install option and click on Continue.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择第一个选项“从光盘或映像安装”后，系统会提示你选择要使用的安装光盘或映像。如果没有自动填充内容，或者自动填充的选项不是你想要安装的映像，点击“使用其他光盘或光盘映像...”按钮。这将打开
    Finder，允许你浏览并选择想要使用的映像。关于如何获取具体的系统映像文件，本章后续的配方会进行讨论。如果你看到一个带有“使用简易安装”选项的屏幕，只需取消选中“使用简易安装”选项并点击“继续”。
- en: '![](../images/00178.jpeg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00178.jpeg)'
- en: 'Finally, we are directed to the Finish window:'
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，我们会看到完成窗口：
- en: '![](../images/00461.jpeg)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00461.jpeg)'
- en: 'After you have selected the image file you wish to use, click on the Continue
    button, and you will be brought to the summary screen. This will provide an overview
    of the configurations you selected. If you wish to make changes to these settings,
    click on the Customize Settings button. Otherwise, click on the Finish button
    to create the virtual machine. When you click on it, you will be requested to
    save the file(s) associated with the virtual machine. The name you use to save
    it will be the name of the virtual machine and will be displayed in your Virtual
    Machine Library, as shown in the following screenshot:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在选择了你想使用的镜像文件后，点击继续按钮，你将进入总结页面。该页面会显示你所选择的配置概览。如果你希望更改这些设置，请点击自定义设置按钮；如果不需要更改，点击完成按钮来创建虚拟机。点击后，你将被要求保存与虚拟机关联的文件。你用来保存的名称将成为虚拟机的名称，并显示在你的虚拟机库中，如下图所示：
- en: '![](../images/00181.jpeg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00181.jpeg)'
- en: As you add more virtual machines, you will see them included in the Virtual
    Machine Library in the left-hand side of the screen. After selecting a particular
    virtual machine, you can launch it by clicking on the Start Up button at the top.
    Additionally, you can use the Settings button to modify configurations or use
    the Snapshots button to save the virtual machine at various moments in time. You
    can run multiple virtual machines simultaneously by starting each one independently
    from the library.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 随着你添加更多虚拟机，你会看到它们出现在屏幕左侧的虚拟机库中。选择特定虚拟机后，你可以通过点击顶部的启动按钮来启动它。此外，你还可以使用设置按钮来修改配置，或者使用快照按钮在不同时间点保存虚拟机。你可以通过独立启动每个虚拟机，实现同时运行多个虚拟机。
- en: How it works…
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Using VMware Fusion within the macOS operating system, you can create a virtualized
    lab environment in order to create an entire network environment on an Apple host
    machine. Virtualization software such as VMware has made it significantly easier
    and cheaper to build a security lab for personal, independent study.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 在 macOS 操作系统中使用 VMware Fusion，你可以创建一个虚拟化实验环境，在 Apple 主机上构建整个网络环境。像 VMware 这样的虚拟化软件使得为个人独立学习建立安全实验室变得更加容易和便宜。
- en: Installing Ubuntu Server
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Ubuntu Server
- en: Ubuntu Server is an easy-to-use Linux distribution that can be used to host
    network services and/or vulnerable software for testing in a security lab. Feel
    free to use other Linux distributions if you prefer; however, Ubuntu is a good
    choice for beginners because there are a lot of reference materials and resources
    publicly available.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu Server 是一个易于使用的 Linux 发行版，可用于托管网络服务和/或用于安全实验室测试的易受攻击软件。如果你更喜欢其他 Linux
    发行版，也可以随意使用；然而，Ubuntu 是一个很好的选择，尤其适合初学者，因为有大量公开的参考资料和资源。
- en: Getting ready
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Prior to installing Ubuntu Server in VMware, you will need to download the image
    disc (ISO file). This file can be downloaded from Ubuntu's website at [http://www.ubuntu.com/server](http://www.ubuntu.com/server). 
    For the purposes of this book, we will be using Ubuntu 16.10.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在 VMware 中安装 Ubuntu Server 之前，你需要下载镜像光盘（ISO 文件）。这个文件可以从 Ubuntu 的官方网站 [http://www.ubuntu.com/server](http://www.ubuntu.com/server)
    下载。为了本书的目的，我们将使用 Ubuntu 16.10。
- en: How to do it…
  id: totrans-72
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'Now the virtual machine is ready, but first, we need to install Ubuntu on the
    VM. Follow along to install Ubuntu on the VM:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 现在虚拟机已经准备好，但首先，我们需要在虚拟机上安装 Ubuntu。请按照以下步骤在虚拟机上安装 Ubuntu：
- en: 'After the image file has been loaded and the virtual machine has been booted
    from it, you will see the default Ubuntu menu, shown in the following screenshot.
    This includes multiple installation and diagnostic options. The menu can be navigated
    to with the keyboard. For a standard installation, ensure that the Install Ubuntu
    Server option is highlighted, and press the *Enter* key:'
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在镜像文件加载并从中启动虚拟机后，你将看到默认的 Ubuntu 菜单，如下图所示。该菜单包含多个安装和诊断选项，可以使用键盘进行导航。对于标准安装，请确保选中“安装
    Ubuntu Server”选项，然后按*Enter*键：
- en: '![](../images/00473.jpeg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00473.jpeg)'
- en: 'Press the *F6* key and check the following options: acpi=off, noapic, and nolapic. 
    Once this is done, click on Install Ubuntu Server:'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*F6*键并勾选以下选项：acpi=off、noapic 和 nolapic。完成后，点击安装 Ubuntu Server：
- en: '![](../images/00184.jpeg)'
  id: totrans-77
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00184.jpeg)'
- en: 'When the installation process begins, you will be asked a series of questions
    to define the configurations of the system. The first two options request that
    you specify your language and country of residence. After answering these questions,
    you will be required to define your keyboard layout configuration, as shown in
    the following screenshot:'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当安装过程开始时，系统会要求你回答一系列问题以定义系统的配置。前两个选项要求你指定语言和居住国家。回答这些问题后，你将需要定义键盘布局配置，如下图所示：
- en: '![](../images/00185.jpeg)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00185.jpeg)'
- en: There are multiple options available to define the keyboard layout. One option
    is detection, in which you will be prompted to press a series of keys that will
    allow Ubuntu to detect the keyboard layout you are using. You can use keyboard
    detection by clicking on Yes. Alternatively, you can select your keyboard layout
    manually by clicking on No. This process is streamlined by defaulting to the most
    likely choice based on your country and language.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有多种选项可供选择来定义键盘布局。一个选项是检测模式，在此模式下，你需要按一系列键，Ubuntu将自动检测你使用的键盘布局。你可以通过点击“是”来启用键盘检测。或者，你也可以通过点击“否”手动选择键盘布局。默认情况下，该过程会根据你的国家和语言默认选择最可能的选项。
- en: 'After you have defined your keyboard layout, you are requested to enter a hostname
    for the system. If you will be joining the system to a domain, ensure that the
    hostname is unique. Next, you will be asked for the full name of the new user
    and a username. Unlike the full name of the user, the username should consist
    of a single string of lowercase letters. Numbers can also be included in the username,
    but they cannot be the first character. Have a look at the following screenshot:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定义键盘布局后，系统会要求你为系统输入主机名。如果你将该系统加入到一个域中，确保主机名是唯一的。接下来，系统会要求输入新用户的全名和用户名。与用户的全名不同，用户名应由一串小写字母组成。用户名中也可以包含数字，但数字不能是第一个字符。请看以下截图：
- en: '![](../images/00187.jpeg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00187.jpeg)'
- en: 'After you have provided the username of the new account, you will be requested
    to provide a password. Ensure that the password is something you can remember
    as you may later need to access this system to modify configurations. Have a look
    at the following screenshot:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供新账户的用户名后，你将被要求设置密码。确保密码是你能记住的，因为稍后你可能需要访问该系统以修改配置。请看以下截图：
- en: '![](../images/00188.jpeg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00188.jpeg)'
- en: 'After supplying a password, you will be asked to decide whether the home directories
    for each user should be encrypted. While this offers an additional layer of security,
    it is not essential in a lab environment as the systems will not be holding any
    actual sensitive data. You will next be asked to configure the system clock, as
    shown in the following screenshot:'
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 提供密码后，系统会要求你决定是否加密每个用户的主目录。虽然这提供了额外的安全性，但在实验环境中并非必需，因为系统中不会保存任何实际的敏感数据。接下来，你将被要求配置系统时钟，如下图所示：
- en: '![](../images/00189.jpeg)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00189.jpeg)'
- en: 'Even though your system is on an internal IP address, it will attempt to determine
    the public IP address through which it is routing out and will use this information
    to guess your appropriate time zone. If the guess provided by Ubuntu is correct,
    select Yes; if not, select No to manually choose the time zone. After the time
    zone is selected, you will be asked to define the disk partition configurations,
    as shown in the following screenshot:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 尽管你的系统使用的是内部IP地址，它会尝试确定公用IP地址，并通过该地址推测适当的时区。如果Ubuntu提供的时区猜测正确，选择“是”；如果不正确，选择“否”以手动选择时区。选择时区后，你将被要求定义磁盘分区配置，如下图所示：
- en: '![](../images/00192.jpeg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00192.jpeg)'
- en: 'If you have no reason to select differently, it is recommended you choose the
    default selection. It is unlikely that you will need to perform any manual partitioning
    in a security lab as each virtual machine will usually be using a single dedicated
    partition. After selecting the partitioning method, you will be asked to select
    the disk. Unless you have added additional disks to the virtual machine, you should
    only see the following option here:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果没有特别的理由选择其他选项，建议选择默认选项。在安全实验室中，你通常不需要进行手动分区，因为每台虚拟机通常只会使用一个单独的分区。选择分区方式后，你将被要求选择磁盘。除非你为虚拟机添加了额外的磁盘，否则这里应该只会看到以下选项：
- en: '![](../images/00194.jpeg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00194.jpeg)'
- en: 'After selecting the disk, you will be asked to review the configurations. Verify
    that everything is correct and then confirm the installation. You will then be
    asked for the amount of the volume group to use for guided partitioning. This
    should be the full amount you specified for the drive, as shown in the following
    screenshot:'
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择磁盘后，你将被要求审查配置。验证所有内容无误后，确认安装。接下来，你会被问到要为引导分区选择的卷组大小。这应该是你为磁盘指定的全部大小，如下截图所示：
- en: '![](../images/00528.jpeg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00528.jpeg)'
- en: 'Prior to the installation process, you will be asked to configure your HTTP
    proxy. For the purposes of this book, a separate proxy is unnecessary, and you
    can leave this field blank:'
  id: totrans-93
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在安装过程之前，你会被要求配置HTTP代理。对于本书的目的，单独的代理并不必要，你可以将此字段留空：
- en: '![](../images/00197.jpeg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00197.jpeg)'
- en: 'You will then be asked how you want to manage upgrades on the system. Use the
    No automatic updates selection:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，你会被问到如何管理系统的升级。请选择“不自动更新”选项：
- en: '![](../images/00199.jpeg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00199.jpeg)'
- en: 'Finally, you will be asked whether you want to install any software on the
    operating system, as shown in the following screenshot:'
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，你会被询问是否要在操作系统上安装任何软件，如下截图所示：
- en: '![](../images/00200.jpeg)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00200.jpeg)'
- en: 'To select any given software, use the spacebar. To increase the attack surface,
    I have included multiple services, only excluding virtual hosting and additional
    manual package selection. Once you have selected your desired software packages,
    press the *Enter* key to complete the process. You will be asked some questions
    about the software you selected to install. Just follow the prompts; for most
    cases, the default selections will be fine:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要选择任何给定的软件，请使用空格键。为了增加攻击面，我已经包括了多个服务，只有虚拟主机和额外的手动软件包选择被排除。选定所需的软件包后，按*Enter*键完成该过程。系统会问你一些关于你选择安装的软件的问题。只需按照提示操作，对于大多数情况，默认选项即可：
- en: '![](../images/00201.jpeg)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00201.jpeg)'
- en: Once the software is installed, you will be asked whether you want to install
    the GRUB bootloader on the hard disk. Select Yes, and your installation is complete.
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 软件安装完成后，系统会问你是否希望将GRUB引导加载程序安装到硬盘上。选择“是”，然后你的安装过程就完成了。
- en: How it works…
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理…
- en: Ubuntu Server has no GUI and is exclusively command-line driven. To use it effectively,
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Ubuntu Server没有图形用户界面，只能通过命令行操作。为了有效使用它，
- en: I recommended you use SSH. To configure and use SSH, refer to the *Configuring
    and*
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 我建议你使用SSH。要配置和使用SSH，请参考*配置和*
- en: '*using SSH* recipe later in this chapter.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '*稍后在本章中使用SSH*的配方。'
- en: Installing Metasploitable2
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Metasploitable2
- en: '**Metasploitable2** is an intentionally vulnerable Linux distribution and is
    also a highly effective security training tool. It comes fully loaded with a large
    number of vulnerable network services and also includes several vulnerable web
    applications.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**Metasploitable2**是一个故意存在漏洞的Linux发行版，也是一个非常有效的安全训练工具。它包含大量易受攻击的网络服务，并且还包括几个易受攻击的Web应用程序。'
- en: Getting ready
  id: totrans-108
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'Prior to installing Metasploitable2 in your virtual security lab, you will
    need to download it from the Web. There are many mirrors and torrents available
    for this. One relatively easy method to acquire Metasploitable2 is to download
    it from SourceForge from this URL: [http://sourceforge.net/projects/metasploitable/files/Metasploitable2/](http://sourceforge.net/projects/metasploitable/files/Metasploitable2/).'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的虚拟安全实验室安装Metasploitable2之前，你需要从网上下载它。有许多镜像站和种子文件可以选择。获取Metasploitable2的一个相对简单的方法是通过SourceForge从以下网址下载：[http://sourceforge.net/projects/metasploitable/files/Metasploitable2/](http://sourceforge.net/projects/metasploitable/files/Metasploitable2/)。
- en: How to do it…
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: Installing Metasploitable2 is likely to be one of the easiest installations
    that you will perform in your security lab. This is because it is already prepared
    as a VMware virtual machine when it is downloaded from SourceForge.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Metasploitable2可能是你在安全实验室中进行的最简单的安装之一。因为它在从SourceForge下载后已经准备好作为VMware虚拟机。
- en: 'Once the ZIP file has been downloaded, you can easily extract its contents
    on Windows or macOS by double-clicking on it in Explorer or Finder, respectively.
    Have a look at the following screenshot:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦ZIP文件下载完成，你可以通过在资源管理器或Finder中双击它，轻松地在Windows或macOS上解压其内容。请看以下截图：
- en: '![](../images/00202.jpeg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00202.jpeg)'
- en: 'Once extracted, the ZIP file will return a directory with five additional files
    inside. Included among these files is the VMware VMX file. To use Metasploitable2
    in VMware, just click on the File drop-down menu and click on Open. Then, browse
    to the directory created from the ZIP extraction process, and open `Metasploitable.vmx`,
    as shown in the following screenshot:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 解压缩后，ZIP 文件会返回一个包含五个附加文件的目录。目录中包括 VMware 的 VMX 文件。要在 VMware 中使用 Metasploitable2，只需点击文件下拉菜单中的“打开”，然后浏览到通过
    ZIP 解压缩过程创建的目录，打开`Metasploitable.vmx`，如以下截图所示：
- en: '![](../images/00203.jpeg)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00203.jpeg)'
- en: 'Once the VMX file has been opened, it should be included in your virtual machine
    library. Select it from the library and click on Run to start the VM and get the
    following screen:'
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开 VMX 文件后，它应该会出现在你的虚拟机库中。从库中选择它，点击“运行”以启动虚拟机并显示以下屏幕：
- en: '![](../images/00205.jpeg)'
  id: totrans-117
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00205.jpeg)'
- en: After the VM loads, the splash screen will appear and request login credentials.
    The default credentials are `msfadmin` for both the username and password. This
    machine can also be accessed via SSH, as addressed in the *Configuring and using
    SSH* recipe later in this recipe.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当虚拟机加载完成后，启动画面将出现，并请求登录凭据。默认凭据是`msfadmin`，用户名和密码均为该值。此机器也可以通过 SSH 访问，稍后在*配置和使用
    SSH*的章节中会介绍。
- en: How it works…
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Metasploitable was built with the idea of security testing education in mind.
    This is a highly effective tool, but it must be handled with care. The Metasploitable
    system should never be exposed to any untrusted networks. It should never be assigned
    a publicly routable IP address, and port forwarding should not be used to make
    services accessible over the **Network Address Translation** (**NAT**) interface.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: Metasploitable 是为了安全测试教育而构建的。它是一个非常有效的工具，但必须小心处理。Metasploitable 系统绝不应暴露于任何不可信的网络中。它绝不应分配公开可路由的
    IP 地址，也不应使用端口转发将服务通过**网络地址转换**（**NAT**）接口暴露。
- en: Installing Windows Server
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Windows Server
- en: Having a Windows operating system in your testing lab is critical to learning
    security skills as it is the most prominent operating system environment used
    in production systems. In the scenarios provided, an installation of Windows XP
    **Service Pack 2** (**SP2**) is used. Since Windows XP is an older operating system,
    there are many flaws and vulnerabilities that can be exploited in a test environment.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 在测试实验室中拥有一个 Windows 操作系统对学习安全技能至关重要，因为它是生产系统中使用最广泛的操作系统环境。在提供的场景中，使用的是 Windows
    XP **Service Pack 2**（**SP2**）。由于 Windows XP 是一个较旧的操作系统，因此在测试环境中可以利用其许多缺陷和漏洞。
- en: Getting ready
  id: totrans-123
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: To complete the tasks discussed in this recipe and some of the exercises later
    in this book, you will need to acquire a copy of a Windows operating system. If
    possible, Windows XP SP2 should be used because it was the operating system used
    while writing this book. One of the reasons this operating system was selected
    is because it is no longer supported by Microsoft and can be acquired with relative
    ease and at little to no cost. However, because it is no longer supported, you
    will need to purchase it from a third-party vendor or acquire it by other means.
    I'll leave the acquisition of this product up to you.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 要完成本食谱中讨论的任务以及本书后续的一些练习，你需要获得一个 Windows 操作系统的副本。如果可能，应该使用 Windows XP SP2，因为这是在编写本书时使用的操作系统。选择此操作系统的原因之一是它不再得到
    Microsoft 的支持，并且可以相对轻松且几乎无成本地获取。然而，由于它不再得到支持，你需要从第三方供应商处购买或通过其他方式获取它。获取此产品的方式由你决定。
- en: How to do it…
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Let''s install Windows XP on the VM:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们在虚拟机上安装 Windows XP：
- en: After booting from the Windows XP image file, a blue menu screen will load,
    which will ask you a series of questions to guide you through the installation
    process. Initially, you will be asked to define the partition that the operating
    system will be installed to. Unless you have made custom changes to your virtual
    machine, you should only see a single option here. You can then select either
    a quick or full-disk format. Either option should be sufficient for the virtual
    machine.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Windows XP 镜像文件启动后，会加载一个蓝色的菜单界面，询问一系列问题，引导你完成安装过程。最初，你需要定义操作系统将要安装到的分区。除非你对虚拟机进行了自定义更改，否则这里应该只有一个选项。然后，你可以选择快速格式化或全盘格式化。无论哪种选择，都足以满足虚拟机的需求。
- en: 'Once you have answered these preliminary questions, you will be provided with
    a series of questions regarding operating system configurations. Then, you will
    be directed to the following screen:'
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在回答完这些初步问题后，你将收到一系列有关操作系统配置的问题。然后，你将被引导到以下屏幕：
- en: '![](../images/00207.jpeg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00207.jpeg)'
- en: First, you will be asked to provide a Name and Organization. The name is assigned
    to the initial account that was created, but the organization name is merely included
    for metadata purposes and has no effect on the performance of the operating system.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，系统会要求你提供名称和组织名称。名称会分配给创建的初始账户，而组织名称仅用于元数据目的，对操作系统的性能没有影响。
- en: 'Next, you will be requested to provide the Computer name and Administrator
    password, as shown in the following screenshot:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，系统会要求你提供计算机名称和管理员密码，如下图所示：
- en: '![](../images/00210.jpeg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00210.jpeg)'
- en: 'If you will be adding the system to a domain, it is recommended you use a unique
    computer name. The admin password should be one that you will remember as you
    will need to log in to this system to test or configure changes. You will then
    be asked to set the date, time, and time zone. These will likely be automatically
    populated, but ensure that they are correct as misconfiguring the date and time
    can affect system performance. Have a look at the following screenshot:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你将系统加入到域中，建议使用一个独特的计算机名称。管理员密码应该是你能记住的，因为你需要登录到这个系统以进行测试或配置更改。然后，系统会要求你设置日期、时间和时区。通常这些会自动填写，但请确保它们是正确的，因为错误的日期和时间配置可能会影响系统性能。请查看以下截图：
- en: '![](../images/00618.jpeg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00618.jpeg)'
- en: 'After configuring the time and date, you will be asked to assign the system
    to either a workgroup or domain. Most of the exercises discussed within this book
    can be performed with either configuration. However, there are a few remote SMB
    auditing tasks, which will be discussed, that require that the system be domain
    joined. The following screenshot shows the Help protect your PC window:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置时间和日期后，系统会要求你将计算机加入工作组或域。书中讨论的大多数练习都可以使用这两种配置之一来执行。然而，有一些远程 SMB 审计任务需要系统加入域。以下截图展示了“帮助保护你的电脑”窗口：
- en: '![](../images/00628.jpeg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00628.jpeg)'
- en: After the installation process has been completed, you will be prompted to help
    protect your PC with automatic updates. The default selection for this is to enable
    automatic updates. However, because we want to increase the number of testing
    opportunities available to us, we will select the Not right now option.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装过程完成后，系统会提示你通过自动更新来帮助保护你的电脑。默认选项是启用自动更新。然而，由于我们希望增加可供测试的机会，因此我们将选择“稍后再说”选项。
- en: How it works…
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理…
- en: Windows XP SP2 is an excellent addition to any beginner's security lab. Since
    it is an older operating system, it offers a large number of vulnerabilities that
    can be tested and exploited. However, as one becomes more skilled in the art of
    penetration testing, it is important to begin to further polish your skills by
    introducing newer and more secure operating systems such as Windows 7.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: Windows XP SP2 是任何初学者安全实验室的绝佳补充。由于它是一个较旧的操作系统，因此存在大量可以测试和利用的漏洞。然而，随着你在渗透测试技术方面的熟练度提升，重要的是要通过引入更新、更安全的操作系统（如
    Windows 7）来进一步提升你的技能。
- en: Increasing the Windows attack surface
  id: totrans-140
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 增加 Windows 攻击面
- en: To further increase the availability of the attack surface on the Windows operating
    system, it is important to add vulnerable software and enable or disable certain
    integrated components.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 为了进一步增加 Windows 操作系统的攻击面，重要的是要添加易受攻击的软件，并启用或禁用某些集成功能。
- en: Getting ready
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Prior to modifying the configurations in Windows to increase the attack surface,
    you will need to have the operating system installed on one of your virtual machines.
    If this has not been done already, refer to the previous recipe.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在修改 Windows 配置以增加攻击面之前，你需要将操作系统安装到你的虚拟机之一。如果尚未完成此操作，请参阅前面的步骤。
- en: How to do it…
  id: totrans-144
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 操作方法…
- en: 'Now, follow these steps to make Windows XP more vulnerable:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，按照以下步骤使 Windows XP 更加脆弱：
- en: 'Enabling remote services, especially unpatched remote services, is usually
    an effective way of introducing some vulnerabilities into a system. First, you''ll
    want to enable **Simple Network Management Protocol** (**SNMP**) on your Windows
    system. To do this, open the Start menu in the bottom-left corner and then click
    on Control Panel. Double-click on the Add or Remove Programs icon, and then click
    on the Add/Remove Windows Components link on the left-hand side of the screen
    to get the following screen:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用远程服务，尤其是未修补的远程服务，通常是向系统引入漏洞的有效方法。首先，您需要在Windows系统上启用**简单网络管理协议**（**SNMP**）。为此，请打开左下角的“开始”菜单，然后点击“控制面板”。双击“添加或删除程序”图标，再点击屏幕左侧的“添加/删除Windows组件”链接，您将看到如下屏幕：
- en: '![](../images/00218.jpeg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00218.jpeg)'
- en: 'From here, you will see a list of components that can be enabled or disabled
    on the operating system. Scroll down to Management and Monitoring Tools and double-click
    on it to open the options contained within, as shown in the following screenshot:'
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在这里，您将看到一个可以在操作系统上启用或禁用的组件列表。向下滚动到“管理和监控工具”并双击打开其中的选项，如下图所示：
- en: '![](../images/00219.jpeg)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00219.jpeg)'
- en: 'Once opened, ensure that both checkboxes, Simple Network Management Protocol
    and WMI SNMP Provider, are checked. This will allow remote SNMP queries to be
    performed on the system. After clicking on OK, the installation of these services
    will begin. This installation will require the Windows XP image disc, which VMware
    likely removed after the virtual machine was imaged. If this is the case, you
    will receive a popup requesting you to insert the disc, as shown in the following
    screenshot:'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开后，确保“简单网络管理协议”和“WMI SNMP提供程序”两个复选框已勾选。这样将允许对系统执行远程SNMP查询。点击“确定”后，这些服务的安装将开始。此安装将需要Windows
    XP的镜像光盘，VMware可能在虚拟机镜像创建后删除了该光盘。如果是这种情况，您将看到一个弹出窗口要求您插入光盘，如下图所示：
- en: '![](../images/00223.jpeg)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00223.jpeg)'
- en: 'To use the disc image, access the virtual machine settings. Ensure that the
    virtual optical media drive is enabled, then browse to the ISO file in your host
    filesystem to add the disc:'
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用光盘镜像，请访问虚拟机设置。确保启用了虚拟光驱，然后浏览主机文件系统中的ISO文件以添加光盘：
- en: '![](../images/00226.jpeg)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00226.jpeg)'
- en: 'Once the disc is detected, the installation of SNMP services will be completed
    automatically. The Windows Components Wizard window should notify you when the
    installation is complete. In addition to adding services, you should also remove
    some default services included in the operating system. To do this, open Control
    Panel again and double-click on the Security Center icon. Scroll to the bottom
    of the page, click on the link for Windows Firewall, and ensure that this feature
    is turned off, as shown in the following screenshot:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦检测到光盘，SNMP服务的安装将自动完成。Windows组件向导窗口应在安装完成时通知您。除了添加服务外，您还应该删除一些操作系统中默认包含的服务。为此，请再次打开控制面板并双击“安全中心”图标。向下滚动页面，点击“Windows防火墙”链接，并确保该功能已关闭，如下图所示：
- en: '![](../images/00676.jpeg)'
  id: totrans-155
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00676.jpeg)'
- en: After you have turned off the Windows Firewall feature, click on OK to return
    to the previous menu. Scroll to the bottom once again, click on the Automatic
    Updates link, and ensure that it is also turned off.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭Windows防火墙功能后，点击“确定”返回上一级菜单。再次向下滚动，点击“自动更新”链接，确保它也已关闭。
- en: How it works…
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: The enabling of functional services and disabling of security services on an
    operating system drastically increases the risk of compromise. By increasing the
    number of vulnerabilities present on the operating system, we also increase the
    number of opportunities available to learn attack patterns and exploitation. This
    particular recipe only addressed the manipulation of integrated components in
    Windows to increase the attack surface. However, it can also be useful to install
    various third-party software packages that have known vulnerabilities.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在操作系统上启用功能服务和禁用安全服务会大大增加被攻破的风险。通过增加操作系统中存在的漏洞数量，我们也增加了学习攻击模式和利用机会的数量。本特定步骤仅涉及通过操作Windows集成功能来增加攻击面。但它也可以通过安装各种已知存在漏洞的第三方软件包来达到同样效果。
- en: 'Vulnerable software packages can be found at the following URLs:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 易受攻击的软件包可以在以下网址找到：
- en: '[http://www.exploit-db.com/](http://www.exploit-db.com/)'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.exploit-db.com/](http://www.exploit-db.com/)'
- en: '[http://www.oldversion.com/](http://www.oldversion.com/)'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: '[http://www.oldversion.com/](http://www.oldversion.com/)'
- en: Installing Kali Linux
  id: totrans-162
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Kali Linux
- en: '**Kali Linux** is known as one of the best hacking distributions, providing
    an entire arsenal of penetration testing tools. The developers recently released
    Kali Linux 2016.2, which solidified their efforts in making it a rolling distribution.
    Different desktop environments have been released alongside GNOME in this release,
    such as e17, LXDE, Xfce, MATE, and KDE. Kali Linux will be kept updated with the
    latest improvements and tools by weekly updated ISOs. For the purposes of this
    book, we will be using Kali Linux 2016.2 with GNOME as our development environment
    for many of the scanning scripts that will be discussed throughout this book.'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '**Kali Linux** 被誉为最优秀的黑客发行版之一，提供了完整的渗透测试工具集。开发人员最近发布了 Kali Linux 2016.2，巩固了他们将其打造为滚动发行版的努力。与
    GNOME 一起发布的还有其他桌面环境，如 e17、LXDE、Xfce、MATE 和 KDE。在未来的每周更新中，Kali Linux 将持续更新最新的改进和工具。本书中将使用
    Kali Linux 2016.2 与 GNOME 作为开发环境，来讨论本书中涉及的许多扫描脚本。'
- en: Getting ready
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备中
- en: Prior to installing Kali Linux in your virtual security testing lab, you will
    need to acquire
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的虚拟安全测试实验室安装 Kali Linux 之前，您需要获取
- en: the ISO file (image file) from a trusted source. The Kali Linux ISO can be downloaded
    at [http://www.kali.org/downloads/](http://www.kali.org/downloads/).
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 从可信的来源下载 ISO 文件（镜像文件）。Kali Linux ISO 文件可以在 [http://www.kali.org/downloads/](http://www.kali.org/downloads/)
    下载。
- en: How to do it…
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'These steps will guide you to install Kali Linux on the VM:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 这些步骤将指导您在虚拟机上安装 Kali Linux：
- en: 'After selecting the Kali Linux ISO file, you will be asked what operating system
    you are installing. Currently Kali Linux is built on Debian 8.x. Choose this and
    click on Continue:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 Kali Linux ISO 文件后，系统会询问您正在安装的操作系统。目前，Kali Linux 基于 Debian 8.x 构建。选择此选项并点击继续：
- en: '![](../images/00229.jpeg)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00229.jpeg)'
- en: 'You will see a finish screen, but let''s customize the settings first. Kali
    Linux requires at least 15 GB of hard disk space and a minimum of 512 MB RAM:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到一个完成屏幕，但我们先来定制设置。Kali Linux 至少需要 15 GB 的硬盘空间和最低 512 MB 的内存：
- en: '![](../images/00233.jpeg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00233.jpeg)'
- en: 'After booting from the Kali Linux image file, you will be presented with the
    initial boot menu. Here, scroll down to the sixth option, Install, and press the *Enter* key
    to start the installation process:'
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Kali Linux 镜像文件启动后，您将看到初始启动菜单。此时，向下滚动到第六个选项“Install”，按下 *Enter* 键以开始安装过程：
- en: '![](../images/00234.jpeg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00234.jpeg)'
- en: Once it has started, you will be guided through a series of questions to complete
    the installation process. Initially, you will be asked to provide your location
    (country) and language. You will then be provided with an option to manually select
    your keyboard configuration or use a guided detection process.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动后，您将通过一系列问题来完成安装过程。首先，您将被要求提供您的位置（国家）和语言。然后，您可以选择手动设置键盘配置或使用自动检测过程。
- en: 'The next step will request that you provide a hostname for the system. If the
    system will be joined to a domain, ensure that the hostname is unique, as shown
    in the following screenshot:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下一步将要求您为系统提供主机名。如果系统将加入域，请确保主机名是唯一的，如下图所示：
- en: '![](../images/00236.jpeg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00236.jpeg)'
- en: 'Next, you will need to set the password for the root account. It is recommended
    that this be a fairly complex password that will not be easily compromised. Have
    a look at the following screenshot:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您需要为 root 账户设置密码。建议设置一个复杂的密码，以防止轻易被破解。请看下面的截图：
- en: '![](../images/00238.jpeg)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00238.jpeg)'
- en: 'Next, you will be asked to provide the time zone you are located in. The system
    will use IP geolocation to provide its best guess of your location. If this is
    not correct, manually select the correct time zone:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，系统会询问您所在的时区。系统会使用 IP 地理定位来猜测您的位置。如果猜测不正确，请手动选择正确的时区：
- en: '![](../images/00240.jpeg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00240.jpeg)'
- en: 'For setting up your disk partition, using the default method and partitioning
    scheme should be sufficient for lab purposes:'
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于磁盘分区的设置，使用默认方法和分区方案应该足够满足实验室需求：
- en: '![](../images/00243.jpeg)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00243.jpeg)'
- en: 'It is recommended that you use a mirror to ensure that your software in Kali
    Linux is kept up to date:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 建议使用镜像源来确保您的 Kali Linux 软件保持最新：
- en: '![](../images/00106.jpeg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00106.jpeg)'
- en: 'Next, you will be asked to provide an HTTP proxy address. An external HTTP
    proxy is not required for any of the exercises addressed in this book, so this
    can be left blank:'
  id: totrans-186
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，你将被要求提供一个HTTP代理地址。本书中的任何练习都不需要外部HTTP代理，因此可以留空：
- en: '![](../images/00117.jpeg)'
  id: totrans-187
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00117.jpeg)'
- en: 'Finally, choose Yes to install the GRUB boot loader and then press the *Enter* key
    to complete the installation process. When the system loads, you can log in with
    the root account and the password provided during the installation:'
  id: totrans-188
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，选择“Yes”安装GRUB启动加载器，然后按*Enter*键完成安装过程。当系统加载时，你可以使用安装过程中提供的root账户和密码登录：
- en: '![](../images/00129.jpeg)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00129.jpeg)'
- en: How it works…
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Kali Linux is a Debian Linux distribution that has a large number of preinstalled,
    third-party penetration tools. While all of these tools could be acquired and
    installed independently, the organization and implementation that Kali Linux provides
    makes it a useful tool for any serious penetration tester.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux是一个Debian Linux发行版，预装了大量第三方渗透测试工具。虽然所有这些工具都可以独立获取和安装，但Kali Linux所提供的组织和实现方式使其成为任何严肃渗透测试人员的有用工具。
- en: Using text editors (Vim and GNU nano)
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用文本编辑器（Vim和GNU nano）
- en: Text editors will be frequently used to create or modify existing files in the
    filesystem. You should use a text editor anytime you want to create a custom script
    in Kali. You should also use a text editor anytime you want to modify a configuration
    file or existing penetration testing tool.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 文本编辑器将被频繁使用来创建或修改文件系统中的现有文件。每当你想在Kali中创建自定义脚本时，都应使用文本编辑器。每当你想修改配置文件或现有的渗透测试工具时，也应使用文本编辑器。
- en: Getting ready
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: There are no additional steps that must be taken prior to using the text editor
    tools in Kali Linux. Both Vim and GNU nano are integrated tools and come preinstalled
    on the operating system.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在Kali Linux中使用文本编辑器工具之前，不需要进行额外的步骤。Vim和GNU nano是集成工具，已经预装在操作系统中。
- en: How to do it…
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Working with Linux editors:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Linux编辑器：
- en: 'To create a file using the Vim text editor in Kali, use the `vim` command followed
    by the name of the file to be created or modified:'
  id: totrans-198
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要在Kali中使用Vim文本编辑器创建文件，请使用`vim`命令，后跟要创建或修改的文件名：
- en: '![](../images/00252.jpeg)'
  id: totrans-199
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00252.jpeg)'
- en: In the example provided, the `vim` command is used to create a file named `vim_demo.txt`.
    Since no file currently exists in the active directory by that name, Vim automatically
    creates a new file and opens an empty text editor.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 在提供的示例中，使用`vim`命令创建一个名为`vim_demo.txt`的文件。由于当前目录中没有该文件，Vim会自动创建一个新文件并打开一个空白文本编辑器。
- en: 'To start entering text into the editor, press the *I* key or the *Insert* button.
    Then, start entering the desired text, as follows:'
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要开始在编辑器中输入文本，请按*I*键或*Insert*按钮。然后，开始输入所需的文本，如下所示：
- en: '![](../images/00255.jpeg)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00255.jpeg)'
- en: In the example provided, only a single line was added to the text file. However,
    in most cases, you will most likely use multiple lines when creating a new file.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 在提供的示例中，仅添加了一行文本。然而，在大多数情况下，当创建新文件时，你可能会使用多行文本。
- en: 'Once finished, press the *Esc* key to exit insert mode and enter command mode
    in Vim. Then, type `:wq` and press the *Enter* key to save. You can then verify
    that the file exists and verify its contents using the following bash commands:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，按下*Esc*键退出插入模式并进入Vim的命令模式。然后，输入`:wq`并按*Enter*键保存。接着，你可以使用以下bash命令来验证文件是否存在并检查其内容：
- en: '![](../images/00542.jpeg)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00542.jpeg)'
- en: The `ls` command can be used to view the contents of the current directory.
    Here, you can see that the `vim_demo.txt` file was created. The `cat` command
    can be used to read and display the contents of the file.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用`ls`命令查看当前目录的内容。在这里，你可以看到`vim_demo.txt`文件已被创建。可以使用`cat`命令来读取和显示文件的内容。
- en: 'An alternative text editor that can also be used is GNU nano. The basic usage
    of GNU nano is very similar to Vim. To get started, use the `nano` command, followed
    by the name of the file to be created or modified:'
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 另一种可用的文本编辑器是GNU nano。GNU nano的基本用法与Vim非常相似。要开始使用，请使用`nano`命令，后跟要创建或修改的文件名：
- en: '![](../images/00545.jpeg)'
  id: totrans-208
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00545.jpeg)'
- en: In the example provided, the `nano` command is used to open a file called `nano_demo.txt`.
    Since no file currently exists with that name, a new file is created.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 在提供的示例中，使用`nano`命令打开一个名为`nano_demo.txt`的文件。由于当前没有该名称的文件，因此会创建一个新文件。
- en: 'Unlike Vim, there is no separate command and writing mode. Instead, writing
    to the file can be done automatically, and commands are executed by pressing the
    *Ctrl* button in conjunction with a particular letter key. A list of these commands
    can be seen at the bottom of the text editor interface at all times:'
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 与Vim不同，这里没有独立的命令模式和写入模式。相反，文件写入是自动完成的，命令通过按下*Ctrl*键并结合特定字母键来执行。你可以随时在文本编辑器界面的底部看到这些命令的列表：
- en: '![](../images/00547.jpeg)'
  id: totrans-211
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00547.jpeg)'
- en: 'In the example provided, a single line was written to the `nano_demo.txt` file.
    To close the editor, you can use *Ctrl* + *X*. You will then be prompted to either
    save the file with `y` or not save it with `n`. You will be asked to confirm the
    filename to be written to. By default, this will be populated with the name that
    was provided when the `nano` command was executed. However, this value can be
    changed and the contents of the file saved to a different filename, as follows:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在示例中，向`nano_demo.txt`文件写入了一行内容。要关闭编辑器，可以使用*Ctrl* + *X*。然后系统会提示你是否保存文件，按`y`保存或按`n`不保存。系统还会询问你确认写入的文件名。默认情况下，文件名会填充为执行`nano`命令时所提供的名称。不过，你可以修改该值，并将文件内容保存到不同的文件名中，如下所示：
- en: '![](../images/00548.jpeg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00548.jpeg)'
- en: Once you're done, the `ls` and `cat` commands can be used again to verify that
    the file was written to the directory and to verify the contents of the file,
    respectively.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成后，可以再次使用`ls`和`cat`命令来验证文件是否已写入目录，并分别验证文件的内容。
- en: The intention of this recipe was to discuss the basic use of each of these editors
    to write and manipulate files. However, it is important to note that these are
    both very robust text editors that have a large number of other capabilities for
    file editing. For more information on the usage of either, access the man pages
    with the `man` command followed by the name of the specific text editor.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程的目的是讨论如何使用这两款编辑器编写和操作文件。然而，值得注意的是，这两款文本编辑器都非常强大，拥有大量其他文件编辑功能。欲了解更多关于这两款编辑器的使用信息，请使用`man`命令后接特定文本编辑器的名称，查看其手册。
- en: How it works…
  id: totrans-216
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: Text editors are nothing more than command-line-driven word-processing tools.
    Each of these tools and all of their associated functions can be executed without
    the use of any graphical interface. Without any graphical component, these tools
    require very little overhead and are extremely fast. As such, they are highly
    effective for quickly modifying files or handling them over a remote Terminal
    interface, such as SSH or Telnet.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 文本编辑器不过是命令行驱动的文字处理工具。每一个工具及其相关功能都可以在没有图形界面的情况下执行。由于缺乏图形组件，这些工具所需的资源非常少，运行速度极快。因此，它们非常适合快速修改文件或通过远程终端接口（如SSH或Telnet）进行处理。
- en: Keeping Kali updated
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 保持Kali更新
- en: Now that we have Kali Linux installed, we will want to keep it updated with
    the latest tools, patches, and improvements.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经安装了Kali Linux，接下来我们需要保持其更新，确保工具、补丁和改进始终是最新的。
- en: Getting ready
  id: totrans-220
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Prior to modifying the Kali Linux configuration, you will need to have installed
    the operating system on a virtual machine. If you haven't already done this, refer
    to the *Installing Kali Linux* recipe.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 在修改Kali Linux配置之前，你需要在虚拟机上安装操作系统。如果你还没有完成这一步，请参考*安装Kali Linux*这篇教程。
- en: How to do it…
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: Kali Linux should be ready and configured after installation, but we should
    check anyway. Kali uses a package manager called `apt-get`.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux在安装后应该已经准备好并配置完成，但我们还是需要进行检查。Kali使用名为`apt-get`的软件包管理器。
- en: The first thing we want to do is check the sources `apt-get` will use to look
    for updates. Navigate to the `/etc/apt/` directory; there you should see a file
    named `sources.list`. If the file doesn’t exist, it's okay; we will create it.
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们要做的第一件事是检查`apt-get`用于查找更新的源。进入`/etc/apt/`目录，你应该能看到一个名为`sources.list`的文件。如果该文件不存在，也没关系；我们将会创建它。
- en: 'Run the following command from the Terminal. If the file exists, it will open;
    if not, it will create it:'
  id: totrans-225
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在终端运行以下命令。如果文件存在，它会被打开；如果不存在，则会创建该文件：
- en: '![](../images/00551.jpeg)'
  id: totrans-226
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00551.jpeg)'
- en: 'Now, let''s add the following sources to the file if they don’t already exist. Make
    sure that you do not add any additional sources as they may break your Kali installation:'
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，如果以下资源尚未添加到文件中，我们需要将它们添加进去。确保不要添加任何额外的资源，以免破坏你的Kali安装：
- en: '[PRE0]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Your file should look like the following:'
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你的文件应该如下所示：
- en: '![](../images/00554.jpeg)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00554.jpeg)'
- en: 'Once the file matches what we previously stated, save and close it. Now we
    will run a few commands. These commands should be run periodically to keep your
    system updated. The `-y` flag appended to `apt-get upgrade` and `apt-get dist-upgrade`
    tells the command to assume *yes* when prompted:'
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦文件与我们之前所述的匹配，保存并关闭它。现在我们将运行一些命令。这些命令应该定期运行，以保持系统更新。`apt-get upgrade` 和 `apt-get
    dist-upgrade` 命令后面加上的 `-y` 标志表示在提示时默认选择 *yes*：
- en: '![](../images/00558.jpeg)'
  id: totrans-232
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00558.jpeg)'
- en: It may take the commands a while to execute, so feel free to get your caffeine
    fix while you are waiting. Reboot Kali Linux, and the procedure is done. You will
    want to run the previous commands periodically to keep your system up to date.
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 命令执行可能需要一段时间，所以你可以在等待时去喝杯咖啡。重启 Kali Linux，过程就完成了。你将需要定期运行之前的命令，以保持系统最新。
- en: How it works…
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理……
- en: Using a Kali Linux rolling update provides you with the latest package versions
    of your applications and testing tools, rather than needing to wait for the next
    static version of the operating system to be rolled out. Kali Linux comes pre-bundled
    with `apt-get`, this is the same package manager used by Ubuntu, and is what Kali
    Linux uses to keeping your distribution up to date.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Kali Linux 的滚动更新可以让你获取应用程序和测试工具的最新软件包版本，而不需要等待操作系统下一个静态版本的发布。Kali Linux 默认预装了
    `apt-get`，这是与 Ubuntu 相同的软件包管理工具，也是 Kali Linux 用来保持系统更新的工具。
- en: Managing Kali services
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 管理 Kali 服务
- en: Having certain services start automatically can be useful in Kali Linux. For
    example, let's say I want to be able to SSH (covered in the *Configuring and using
    SSH* recipe) to my Kali Linux distribution. By default, the SSH server does not
    start in Kali, so I would need to log in to the virtual machine, open a Terminal,
    and run the command to start the service.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kali Linux 中，某些服务自动启动会非常有用。例如，假设我希望能够通过 SSH 连接到我的 Kali Linux 发行版（在 *配置和使用
    SSH* 这一节中有讲解）。默认情况下，Kali 中的 SSH 服务器不会自动启动，因此我需要登录虚拟机，打开终端，运行命令以启动该服务。
- en: Getting ready
  id: totrans-238
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Prior to modifying the Kali Linux configuration, you will need to have installed
    the operating system on a virtual machine. If you have not already done this,
    refer to the *Installing Kali Linux* recipe.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在修改 Kali Linux 配置之前，你需要已经在虚拟机上安装了操作系统。如果你还没有做这一步，请参考 *安装 Kali Linux* 这一节。
- en: How to do it…
  id: totrans-240
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Working with Kali Linux:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 Kali Linux：
- en: 'We begin by logging in to our Kali Linux distribution and opening a Terminal
    window. Type in the following command:'
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们首先登录到 Kali Linux 发行版并打开一个终端窗口。输入以下命令：
- en: '![](../images/00560.jpeg)'
  id: totrans-243
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00560.jpeg)'
- en: 'More than likely, it is already installed, and you will see a message like
    this:'
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 很可能它已经安装，你会看到类似下面的信息：
- en: '![](../images/00561.jpeg)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00561.jpeg)'
- en: 'So now that we know it is installed, let us see whether the service is running. 
    From the Terminal, type this:'
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 既然我们知道它已安装，让我们查看服务是否正在运行。从终端中输入以下命令：
- en: '![](../images/00562.jpeg)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00562.jpeg)'
- en: 'If the SSH server is not running, you will see something like this:'
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果 SSH 服务器未运行，你会看到类似以下内容：
- en: '![](../images/00565.jpeg)'
  id: totrans-249
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00565.jpeg)'
- en: 'Type *Ctrl* + *C* to get back to the prompt. Now let''s start the service and
    check the status again by typing the following command:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按 *Ctrl* + *C* 返回提示符。现在让我们启动服务并通过输入以下命令再次检查状态：
- en: '![](../images/00567.jpeg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00567.jpeg)'
- en: 'You should now see something like the following:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你现在应该会看到类似下面的内容：
- en: '![](../images/00570.jpeg)'
  id: totrans-253
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00570.jpeg)'
- en: 'So now, the service is running. Great, but if we reboot, we will see that the
    service does not start automatically. To get the service to start every time we
    boot, we need to make a few configuration changes. Kali Linux puts in extra measures
    to make sure you do not have services starting automatically.  Specifically, it
    has a service whitelist and blacklist file. So to get SSH to start at boot, we
    will need to remove the SSH service from the blacklist. To do this, open a Terminal
    window and type the following command:'
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，服务正在运行。太好了，但如果我们重启计算机，我们会发现该服务不会自动启动。为了让服务在每次启动时都能自动启动，我们需要进行一些配置更改。Kali
    Linux 采取了一些额外的措施，确保你不会让服务自动启动。具体来说，它有一个服务白名单和黑名单文件。因此，要使 SSH 服务在启动时自动启动，我们需要将
    SSH 服务从黑名单中移除。为此，打开一个终端窗口并输入以下命令：
- en: '![](../images/00574.jpeg)'
  id: totrans-255
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00574.jpeg)'
- en: 'Navigate down to the section labeled `List of blacklisted init scripts` and
    find `ssh`. Now, we will just add a `#` symbol to the beginning of that line,
    save the file, and exit. The file should look similar to the following screenshot:'
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到标记为 `List of blacklisted init scripts` 的部分，找到 `ssh`。现在，我们只需在该行的开头添加一个 `#`
    符号，保存文件并退出。文件应如下图所示：
- en: '![](../images/00577.jpeg)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00577.jpeg)'
- en: 'Now that we have removed the blacklist policy, all we need to do is enable
    SSH at boot. To do this, run the following commands from your Terminal:'
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们已经移除了黑名单策略，接下来只需要启用 SSH 在启动时自动运行。为此，请从终端运行以下命令：
- en: '![](../images/00579.jpeg)'
  id: totrans-259
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00579.jpeg)'
- en: That's it! Now when you reboot, the service will begin automatically. You can
    use this same procedure to start other services automatically at boot time.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 就是这样！现在，当您重新启动时，服务将自动启动。您可以使用相同的程序在启动时自动启动其他服务。
- en: How it works…
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: The `rc.local` file is executed after all the normal Linux services have started. It
    can be used to start services you want available after you boot your machine.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: '`rc.local` 文件在所有正常的 Linux 服务启动后执行。它可用于启动您希望在开机后可用的服务。'
- en: Configuring and using SSH
  id: totrans-263
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 配置和使用 SSH
- en: Dealing with multiple virtual machines simultaneously can become tedious, time-consuming,
    and frustrating. To reduce the requirement of jumping from one VMware screen to
    the next and to increase the ease of communication between your virtual systems,
    it is very helpful to have SSH configured and enabled on each of them. This recipe
    will discuss how you can use SSH on each of your Linux virtual machines.
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 同时处理多个虚拟机可能会变得繁琐、耗时且令人沮丧。为了减少从一个 VMware 屏幕跳转到另一个屏幕的需求，并提高虚拟系统之间的通信便利性，配置并启用每个虚拟机上的
    SSH 非常有帮助。本篇将讨论如何在每个 Linux 虚拟机上使用 SSH。
- en: Getting ready
  id: totrans-265
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: To use SSH on your virtual machines, you must first have an SSH client installed
    on your host system. An SSH client is integrated into most Linux and macOS systems
    and can be accessed from a Terminal interface. If you are using a Windows host,
    you will need to download and install a Windows Terminal services client. One
    that is free and easy to use is PuTTY.
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 要在虚拟机上使用 SSH，您必须首先在主机系统上安装 SSH 客户端。大多数 Linux 和 macOS 系统都集成了 SSH 客户端，并可以通过终端接口访问。如果您使用的是
    Windows 主机，您需要下载并安装一个 Windows 终端服务客户端。一个免费的、易于使用的客户端是 PuTTY。
- en: PuTTY can be downloaded from [http://www.putty.org/](http://www.putty.org/).
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: PuTTY 可以从 [http://www.putty.org/](http://www.putty.org/) 下载。
- en: How to do it…
  id: totrans-268
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Follow along to configure the SSH client (we are using PuTTY) on the Kali Linix:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 跟着步骤配置 Kali Linux 上的 SSH 客户端（我们使用的是 PuTTY）：
- en: 'You will initially need to enable SSH directly from the Terminal in the graphical
    desktop interface. This command will need to be run directly within the virtual
    machine client. With the exception of the Windows XP virtual machine, all of the
    other virtual machines in the lab are Linux distributions and should natively
    support SSH. If you followed along in the *Managing Kali Services* recipe, the
    SSH service should already be running. If not, the technique to enable this is
    the same in nearly all Linux distributions and is shown as follows:'
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您最初需要直接从图形桌面界面的终端启用 SSH。此命令需要在虚拟机客户端中直接运行。除了 Windows XP 虚拟机外，实验室中的其他所有虚拟机都是
    Linux 发行版，应该原生支持 SSH。如果您按照 *管理 Kali 服务* 的方法操作，SSH 服务应该已经在运行。如果没有，启用方法几乎适用于所有 Linux
    发行版，如下所示：
- en: '![](../images/00580.jpeg)'
  id: totrans-271
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00580.jpeg)'
- en: The `/etc/init.d/ssh start` command will start the service. You will need to
    prepend `sudo` to this command if you are not logged in as root.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`/etc/init.d/ssh start` 命令将启动该服务。如果您没有以 root 用户身份登录，需要在此命令前加上 `sudo`。'
- en: If an error is received, it is possible that the SSH daemon has not been installed
    on the device. If this is the case, the `apt-get install ssh` command can be used
    to install the SSH daemon. Then, `ifconfig` can be used to acquire the IP address
    of the system, which will be used to establish the SSH connection.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果收到错误提示，可能是设备上未安装 SSH 守护进程。如果是这种情况，可以使用 `apt-get install ssh` 命令安装 SSH 守护进程。然后，可以使用
    `ifconfig` 获取系统的 IP 地址，用于建立 SSH 连接。
- en: Once activated, it is possible to access the VMware guest system using SSH from
    your host system. To do this, minimize the virtual machine and open your host's
    SSH client.
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启用后，您可以通过 SSH 从主机系统访问 VMware 客户系统。为此，请最小化虚拟机并打开主机的 SSH 客户端。
- en: 'If you are using macOS or Linux for your host system, the client can be called
    directly from the Terminal. Alternatively, if you are running your VMs on a Windows
    host, you will need to use a Terminal emulator such as PuTTY. In the following
    example, an SSH session is established by supplying the IP address of the Kali
    virtual machine:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你使用的是 macOS 或 Linux 作为主机系统，可以直接从终端调用客户端。或者，如果你在 Windows 主机上运行虚拟机，则需要使用终端模拟器，如
    PuTTY。在以下示例中，SSH 会话是通过提供 Kali 虚拟机的 IP 地址来建立的：
- en: '![](../images/00582.jpeg)Downloading the example code'
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: '![](../images/00582.jpeg)下载示例代码'
- en: You can download the example code files for all Packt books you have purchased
    from your account at [http://www.packtpub.com](http://www.packtpub.com). If you
    purchased this book elsewhere, you can visit [http://www.packtpub.com/support](http://www.packtpub.com/support)
    and register to have the files e-mailed directly to you.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以从[http://www.packtpub.com](http://www.packtpub.com)账户下载所有已购买的 Packt 图书的示例代码文件。如果你是从其他地方购买的这本书，可以访问[http://www.packtpub.com/support](http://www.packtpub.com/support)并注册，文件会直接通过电子邮件发送给你。
- en: 'Once the connection configurations have been set, click on the Open button
    to launch the session. We will then be prompted for the username and password.
    We should enter the credentials for the system that we are connecting to. Once
    the authentication process is completed, we will be granted remote Terminal access
    to the system, as seen in the following screenshot:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置好连接配置后，点击“打开”按钮以启动会话。然后，系统会提示输入用户名和密码。我们需要输入连接目标系统的凭据。完成身份验证后，我们将获得远程终端访问权限，如下图所示：
- en: '![](../images/00586.jpeg)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00586.jpeg)'
- en: 'It is possible to avoid having to authenticate every time by providing your
    public key in the `authorized_keys` file on the remote host. The process to do
    this is as follows:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在远程主机的`authorized_keys`文件中提供你的公钥，可以避免每次都进行身份验证。具体操作流程如下：
- en: '[PRE1]'
  id: totrans-281
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../images/00588.jpeg)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00588.jpeg)'
- en: 'Once you have done this, you should be able to connect to SSH without having
    to supply the password for authentication:'
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成上述步骤后，你应该能够在不输入密码的情况下直接通过 SSH 连接：
- en: '![](../images/00589.jpeg)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00589.jpeg)'
- en: How it works…
  id: totrans-285
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: SSH establishes an encrypted communication channel between the client and server.
    This channel can be used to provide remote management services and to securely
    transfer files with **Secure Copy** (**scp**).
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: SSH 建立了客户端和服务器之间的加密通信通道。这个通道可用于提供远程管理服务，并通过**安全拷贝**（**scp**）安全地传输文件。
- en: Installing Nessus on Kali Linux
  id: totrans-287
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Kali Linux 上安装 Nessus
- en: Nessus is a highly functional vulnerability scanner that can be installed on
    the Kali Linux platform. This recipe will discuss the process to install, enable,
    and activate the Nessus service.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus 是一款功能强大的漏洞扫描器，可以安装在 Kali Linux 平台上。本节将讨论安装、启用并激活 Nessus 服务的过程。
- en: Getting ready
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Prior to attempting to install the Nessus vulnerability scanner on Kali Linux,
    you will need to obtain a plugin feed activation code. This activation code is
    necessary to acquire the audit plugins used by Nessus to evaluate networked systems.
    If you are going to be using Nessus at home or exclusively within your lab, you
    can acquire a *home feed key* for free. Alternatively, if you are going to be
    using Nessus to audit production systems, you will need to acquire a *professional
    feed key*. In either case, you can acquire this activation code at [http://www.tenable.com/products/nessus/nessus-plugins/obtain-an-activation-code](http://www.tenable.com/products/nessus/nessus-plugins/obtain-an-activation-code).
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试在 Kali Linux 上安装 Nessus 漏洞扫描器之前，你需要获取插件源激活码。这个激活码是必须的，用于获取 Nessus 用于评估网络系统的审计插件。如果你仅在家中或实验室中使用
    Nessus，可以免费获得一个*家庭源密钥*。另外，如果你打算将 Nessus 用于生产系统的审计，你需要获取一个*专业源密钥*。无论哪种情况，你都可以在[http://www.tenable.com/products/nessus/nessus-plugins/obtain-an-activation-code](http://www.tenable.com/products/nessus/nessus-plugins/obtain-an-activation-code)上获得该激活码。
- en: How to do it…
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作…
- en: 'To install Nessus on the system, follow these steps:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 要在系统上安装 Nessus，请按以下步骤操作：
- en: 'Once you have acquired your plugin feed activation code, you will need to download
    the Nessus installation package, available at [https://www.tenable.com/products/nessus/select-your-operating-system](http://www.tenable.com/products/nessus/select-your-operating-system).
    The following screenshot displays a list of the various platforms that Nessus
    can run on and their corresponding installation packages:'
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦你获得了插件激活码，你需要下载 Nessus 安装包，下载地址为 [https://www.tenable.com/products/nessus/select-your-operating-system](http://www.tenable.com/products/nessus/select-your-operating-system)。以下截图展示了
    Nessus 可以运行的各种平台及其对应的安装包：
- en: '![](../images/00592.jpeg)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00592.jpeg)'
- en: 'Select the appropriate installation package for the architecture of the operating
    system that you have installed. Once you have selected it, read and agree to the
    subscription agreement provided by Tenable. Your system will then download the
    installation package. Click on Save File, and then browse to the location you
    would like to save it to:'
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择与你安装的操作系统架构相匹配的安装包。选择后，阅读并同意 Tenable 提供的订阅协议。系统将自动下载安装包。点击“保存文件”，然后选择你希望保存的位置：
- en: '![](../images/00593.jpeg)'
  id: totrans-296
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00593.jpeg)'
- en: 'In the example provided, I have saved the installation package to the root
    directory. Once it''s downloaded, you can complete the installation from the command
    line. This can be done over SSH or via a Terminal on the graphical desktop in
    the following manner:'
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提供的示例中，我将安装包保存到了根目录。一旦下载完成，你可以通过命令行完成安装。这可以通过 SSH 或图形桌面上的终端以以下方式完成：
- en: '![](../images/00595.jpeg)'
  id: totrans-298
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00595.jpeg)'
- en: Use the `ls` command to verify that the installation package is in the current
    directory. You should see it listed in the response. You can then use the **debian
    package manager** (**dpkg**) tool to install the service.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 `ls` 命令验证安装包是否在当前目录中。你应该会在响应中看到它。然后可以使用 **debian 包管理器**（**dpkg**）工具安装该服务。
- en: The `-i` argument tells the package manager to install the specified package.
    Once the installation is complete, the service can be started with the command,
    `/etc/init.d/nessusd start`. Nessus runs completely from a web interface and can
    easily be accessed from other machines. If you want to manage Nessus from your
    Kali system, you can access it via your web browser at `https://127.0.0.1:8834/`.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '`-i` 参数告诉包管理器安装指定的包。安装完成后，可以使用命令 `/etc/init.d/nessusd start` 启动服务。Nessus 完全通过
    Web 界面运行，并且可以轻松地从其他机器访问。如果你想从 Kali 系统管理 Nessus，可以通过 Web 浏览器访问 `https://127.0.0.1:8834/`。'
- en: 'Alternatively, you can access it from a remote system (such as your host operating
    system) via a web browser using the IP address of the Kali Linux virtual machine.
    In the example provided, the appropriate URL to access the Nessus service from
    the host operating system is `https://172.16.36.244:8834`:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 或者，你可以通过网页浏览器使用 Kali Linux 虚拟机的 IP 地址，从远程系统（如主机操作系统）访问它。在提供的示例中，从主机操作系统访问 Nessus
    服务的适当 URL 是 `https://172.16.36.244:8834`：
- en: '![](../images/00597.jpeg)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00597.jpeg)'
- en: 'By default, a self-signed SSL certificate is used by the Nessus service, so
    you will receive an untrusted connection warning. For security lab usage, you
    can disregard this warning and proceed. This can be done by expanding the I Understand
    the Risks option, as shown in the following screenshot:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 默认情况下，Nessus 服务使用自签名 SSL 证书，因此你会收到不受信任的连接警告。对于安全实验室的使用，你可以忽略此警告并继续操作。可以通过展开“我理解风险”选项来实现，如下图所示：
- en: '![](../images/00599.jpeg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00599.jpeg)'
- en: 'When you expand this option, you can click on the Add Exception button. This
    will prevent you from having to deal with this warning every time you try to access
    the service. After adding the service as an exception, you will receive a welcome
    screen. From here, click on the Get Started button. This will take you to the
    following screen:'
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 展开此选项后，你可以点击“添加例外”按钮。这将防止你每次尝试访问服务时都要处理此警告。添加服务为例外后，你将看到欢迎界面。从这里点击“开始使用”按钮，接着会跳转到下一个界面：
- en: '![](../images/00601.jpeg)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00601.jpeg)'
- en: 'The first configurations that have to be set are the administrator''s user
    account and associated password. These credentials will be used to log in and
    use the Nessus service. After entering the new username and password, click on
    Next to continue; you will see the following screen:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先需要设置的配置是管理员的用户帐户和相关密码。这些凭据将用于登录并使用 Nessus 服务。在输入新用户名和密码后，点击“下一步”继续；你将看到以下屏幕：
- en: '![](../images/00602.jpeg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00602.jpeg)'
- en: 'You will then need to enter your plugin feed activation code. If you do not
    have an activation code, refer back to the *Getting ready* section of this recipe.
    Finally, after you have entered your activation code, you will be returned to
    the login page and asked to enter your username and password. Here, you need to
    enter the same credentials that you created during the installation process. The
    following is the default screen that Nessus will load each time you access the
    URL in future:'
  id: totrans-309
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 然后，你需要输入插件订阅激活码。如果没有激活码，请参考本教程的*准备工作*部分。最后，在输入激活码后，你将返回登录页面并要求输入用户名和密码。在这里，你需要输入在安装过程中创建的相同凭据。以下是
    Nessus 每次访问该 URL 时加载的默认屏幕：
- en: '![](../images/00603.jpeg)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![](../images/00603.jpeg)'
- en: How it works…
  id: totrans-311
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的…
- en: Once installed properly, the Nessus vulnerability scanner should be accessible
    from the host system and all of the virtual machines that have a graphic web browser
    installed. This is due to the fact that the Nessus service is hosted on the TCP
    port `8834` and both the host and all other virtual systems have network interfaces
    sitting in the same private IP space.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦正确安装，Nessus 漏洞扫描器应该可以从主机系统以及所有安装了图形网页浏览器的虚拟机中访问。这是因为 Nessus 服务托管在 TCP 端口`8834`上，并且主机与所有其他虚拟系统的网络接口都位于相同的私有
    IP 地址空间中。
