- en: Network Penetration Testing - Pre-Connection Attacks
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络渗透测试 - 连接前攻击
- en: Many organizations have a wireless network. Imagine gaining access to a corporate
    wireless network and then using the wireless as a medium or channel to break into
    the wired network and compromise other systems and devices. It is essential to
    understand wireless penetration testing in order to be able to identify loopholes
    that would allow such security breaches. These skills will help you as a penetration
    tester, as you will be required to perform wireless security testing on target
    networks.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 许多组织都有无线网络。想象一下获得对企业无线网络的访问权限，然后利用无线作为进入有线网络并破坏其他系统和设备的媒介或通道。了解无线渗透测试是至关重要的，以便能够识别可能导致此类安全漏洞的漏洞。这些技能将帮助您作为渗透测试人员，因为您将需要在目标网络上执行无线安全测试。
- en: In this chapter, we will take a deep dive into wireless hacking tools such as
    aircrack-ng. Furthermore, we will cover the essentials of understanding how various
    wireless attacks work. These attacks include deauthenticating users who are associated
    with a wireless access point, creating a fake access point, and performing password
    cracking.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将深入研究诸如aircrack-ng之类的无线黑客工具。此外，我们将介绍了解各种无线攻击工作的基本知识。这些攻击包括取消与无线访问点关联的用户、创建虚假访问点和执行密码破解。
- en: 'During the course of this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Getting started with packet sniffing using airodump-ng
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用airodump-ng开始数据包嗅探
- en: Targeted packet sniffing using airodump-ng
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用airodump-ng进行有针对性的数据包嗅探
- en: Deauthenticating clients on a wireless network
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在无线网络上取消客户端的认证
- en: Creating a rogue AP/evil twin
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个伪装AP/恶意双胞胎
- en: Performing a password spraying attack
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行密码喷洒攻击
- en: Setting up watering hole attacks
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置诱饵攻击
- en: Weak encryption exploitation for credential stealing
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用弱加密进行凭证窃取
- en: Technical requirements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'The following are the technical requirements for this chapter:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是本章的技术要求：
- en: '**Kali Linux**: [https://www.kali.org/](https://www.kali.org/)'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kali Linux**：[https://www.kali.org/](https://www.kali.org/)'
- en: '**Airgeddon**: [https://github.com/v1s1t0r1sh3r3/airgeddon](https://github.com/v1s1t0r1sh3r3/airgeddon)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Airgeddon**：[https://github.com/v1s1t0r1sh3r3/airgeddon](https://github.com/v1s1t0r1sh3r3/airgeddon)'
- en: '**WordPress server**: [https://www.turnkeylinux.org/wordpress](https://www.turnkeylinux.org/wordpress)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**WordPress服务器**：[https://www.turnkeylinux.org/wordpress](https://www.turnkeylinux.org/wordpress)'
- en: '**Bee-Box**: [https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Bee-Box**：[https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/)'
- en: Getting started with packet sniffing using airodump-ng
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用airodump-ng开始数据包嗅探
- en: To get started with packet sniffing, we are going to use the `airodump-ng` tool.
    `airodump-ng` has many functionalities, including performing the raw capture of
    IEEE 802.11 frames. Additionally, using this tool, we'll be able to view wireless
    APs, associated and unassociated client devices (stations), encryption types,
    SSID, the manufacturer of the APs, and so on.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始数据包嗅探，我们将使用`airodump-ng`工具。 `airodump-ng`具有许多功能，包括执行IEEE 802.11帧的原始捕获。此外，使用此工具，我们将能够查看无线AP、关联和未关联的客户端设备（站点）、加密类型、SSID、AP的制造商等。
- en: In [Chapter 8](d0922997-8773-40e5-becc-71d0f63d3a68.xhtml), *Understanding Network
    Penetration Testing*, we outlined the procedures involved in connecting a wireless
    network adapter to your Kali Linux machine and in enabling monitor mode. For this
    exercise, you'll need to repeat the process once more.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在[第8章](d0922997-8773-40e5-becc-71d0f63d3a68.xhtml)中，*了解网络渗透测试*，我们概述了将无线网络适配器连接到Kali
    Linux机器并启用监视模式所涉及的程序。对于这个练习，您需要再次重复这个过程。
- en: 'To enable monitor mode, perform the following steps:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 要启用监视模式，请执行以下步骤：
- en: Connect the wireless adapter to Kali Linux. Use the `ifconfig` command to verify
    the status of the adapter.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将无线适配器连接到Kali Linux。使用`ifconfig`命令验证适配器的状态。
- en: Terminate any process that may hamper the enabling of monitor mode by using
    the `airmon-ng check kill` command.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过使用`airmon-ng check kill`命令终止可能妨碍启用监视模式的任何进程。
- en: Enable monitor mode on your wireless adapter using the `airmon-ng start wlan0`
    command.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`airmon-ng start wlan0`命令在无线适配器上启用监视模式。
- en: 'Now that your wireless adapter is in monitor mode, let''s use the `airodump-ng`
    tool to view a list of all nearby APs and stations. To perform this action, use
    the following command:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您的无线适配器处于监视模式，让我们使用`airodump-ng`工具查看所有附近AP和站点的列表。要执行此操作，请使用以下命令：
- en: '[PRE0]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Your Terminal window will now begin to display all of the nearby APs, displaying
    the following information:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 您的终端窗口现在将开始显示所有附近的AP，显示以下信息：
- en: '`BSSID`: This is the MAC address of the AP or wireless router.'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`BSSID`：这是AP或无线路由器的MAC地址。'
- en: '`PWR`: This is the power rating. The lower the power rating, the further away
    the AP is from the wireless adapter.'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`PWR`：这是功率评级。功率评级越低，AP距离无线适配器越远。'
- en: '`Beacons`: The beacons are the advertisements sent from an AP. Beacons usually
    contain information about the AP, such as the network name and operation.'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Beacons`：信标是从AP发送的广告。信标通常包含有关AP的信息，例如网络名称和操作。'
- en: '`#Data`: This is the amount of captured data packets per network.'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`#Data`：这是每个网络捕获的数据包数量。'
- en: '`#/s`: This field indicates the number of packets per second over a 10-second
    period.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`#/s`：此字段表示在10秒内每秒的数据包数量。'
- en: '`CH`: This is the operating channel for the AP.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`CH`：这是AP的操作频道。'
- en: '`MB`: This field outlines the maximum speed that is supported by the AP.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`MB`：此字段概述了AP支持的最大速度。'
- en: '`ENC`: This determines the encryption cipher being used on the wireless network.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ENC`：这确定了无线网络上使用的加密密码。'
- en: '`AUTH`: This determines the type of authentication protocol on the wireless
    network.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`AUTH`：这确定了无线网络上的认证协议类型。'
- en: '`ESSID`: The **Extended Service Set Identifier** (**ESSID**) and the name of
    the network SSID are the same.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`ESSID`：**扩展服务集标识符**（**ESSID**）和网络SSID的名称相同。'
- en: '`STATION`: This displays the MAC addresses of both associated and unassociated
    devices.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`STATION`：显示关联和未关联设备的MAC地址。'
- en: 'Upon executing the command, your wireless adapter will perform live scanning
    and monitoring of all wireless networks and devices nearby. You should receive
    a screenshot similar to the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 执行命令后，您的无线适配器将执行所有附近无线网络和设备的实时扫描和监视。您应该会收到类似以下的屏幕截图：
- en: '![](img/3c428bee-6610-477f-a6ef-30298fc6d69f.png)'
  id: totrans-39
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3c428bee-6610-477f-a6ef-30298fc6d69f.png)'
- en: Based on your geographic location, the listed devices and networks will always
    vary.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 根据您的地理位置，列出的设备和网络将会有所不同。
- en: 'Viewing network traffic in real time can be overwhelming, especially in our
    situation where we can see all nearby devices. The `airodump-ng` tool allows us
    to use the `--bssid` parameter to filter the output for a specific AP. Additionally,
    using the `-c` parameter allows us to specify a channel the AP is operating on.
    Use the following syntax:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 实时查看网络流量可能会让人不知所措，特别是在我们可以看到所有附近设备的情况下。`airodump-ng`工具允许我们使用`--bssid`参数来过滤特定AP的输出。此外，使用`-c`参数允许我们指定AP所在的信道。使用以下语法：
- en: '[PRE1]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You''ll get a similar output to the following, where the specific details about
    your target wireless network will be shown:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 您将得到类似以下的输出，其中将显示有关目标无线网络的具体细节：
- en: '![](img/e8f51204-2e0b-405a-9805-84ba4e2cc1f8.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e8f51204-2e0b-405a-9805-84ba4e2cc1f8.png)'
- en: Now that you are able to perform packet sniffing, let's attempt to direct our
    attack to a specific target in the next section.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 现在您已经能够进行数据包嗅探，让我们在下一节尝试将我们的攻击定向到特定目标。
- en: Targeted packet sniffing using airodump-ng
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用airodump-ng进行目标数据包嗅探
- en: In this section, we are going to learn about additional features in airodump-ng.
    Most importantly, we will use airodump-ng to target a specific network; this will
    allow us to focus our attack on a **specific** **target** and not cause any harm
    to other nearby wireless networks.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将学习airodump-ng中的附加功能。最重要的是，我们将使用airodump-ng来针对特定网络；这将允许我们将攻击重点放在**特定**
    **目标**上，而不会对其他附近的无线网络造成任何伤害。
- en: 'Even though you''re filtering your view, the traffic (packets) are not being
    saved offline for post-analysis. Using the `-w` parameter will allow you to specify
    the file location to save the content. Therefore, the following command will help
    you to achieve this task:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 即使您正在过滤您的视图，流量（数据包）并没有被离线保存以供后续分析。使用`-w`参数将允许您指定文件位置以保存内容。因此，以下命令将帮助您完成此任务：
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Using the `ls -l` command on your Terminal, you''ll see that the data has been
    written offline in the `root` directory:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在您的终端上使用`ls -l`命令，您会看到数据已经离线写入`root`目录：
- en: '![](img/b4818f88-b7ad-4536-a52a-0a4192d0bfc6.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b4818f88-b7ad-4536-a52a-0a4192d0bfc6.png)'
- en: airodump-ng usually writes the captured data into five file types; these are
    the `.cap`, `.csv`, `.kistmet.csv`, `.kismet.netxml`, and `.log.csv` formats.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: airodump-ng通常将捕获的数据写入五种文件类型中；这些是`.cap`、`.csv`、`.kistmet.csv`、`.kismet.netxml`和`.log.csv`格式。
- en: The longer you leave the `airodump-ng` tool running, the more packets will be
    written in the offline files and will eventually capture the WPA/WPA2 handshake
    between the clients and the targeted AP. During packet sniffing with Airodump-ng,
    you'll see a **WPA handshake** message appear in the top-right corner; this is
    an indication that the WPA/WPA2 handshake has been captured by airodump-ng. Capturing
    the WPA/WPA2 handshake will assist us in cracking the password for the target
    wireless network.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 您让`airodump-ng`工具运行的时间越长，离线文件中将写入越多的数据包，并最终捕获到客户端和目标AP之间的WPA/WPA2握手。在使用Airodump-ng进行数据包嗅探时，您将看到右上角出现**WPA握手**消息；这表明WPA/WPA2握手已被airodump-ng捕获。捕获WPA/WPA2握手将帮助我们破解目标无线网络的密码。
- en: In the next section, we will attempt to deauthenticate users from a wireless
    network.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将尝试从无线网络中去认证用户。
- en: Deauthenticating clients on a wireless network
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在无线网络上去认证客户端
- en: Whenever a client device, such as a laptop or smartphone, is attempting to create
    an association with a password-protected wireless network, the user will need
    to provide the correct passphrase. If the user provides the correct passphrase,
    the device will be authenticated on the network and will be able to access any
    resources available.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 每当客户端设备，如笔记本电脑或智能手机，试图与受密码保护的无线网络建立关联时，用户将需要提供正确的密码。如果用户提供了正确的密码，设备将在网络上得到认证，并能够访问任何可用的资源。
- en: In a deauthentication attack, the attacker, or penetration tester, is attempting
    to knock (kick) every associated device off a wireless AP. This attack is executed
    where the attacker machine is not connected (associated) in any way to the target
    wireless AP or network.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 在去认证攻击中，攻击者或渗透测试人员试图将每个关联设备从无线AP中踢出。这种攻击是在攻击者机器与目标无线AP或网络没有任何连接（关联）的情况下执行的。
- en: 'For the attacker machine to send a deauthentication frame to the wireless AP,
    a reason code is inserted within the body of the frame. The codes are used to
    inform the access point or wireless router of a change on the network. The reason
    code will indicate one of the following:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 对于攻击者机器来说，要向无线AP发送去认证帧，需要在帧的主体中插入一个原因代码。这些代码用于通知接入点或无线路由器网络上的变化。原因代码将指示以下之一：
- en: '**Code 2**: Previous authentication no longer valid'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代码2**：以前的认证不再有效'
- en: '**Code 3**: Deauthentication leaving'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**代码3**：去认证离开'
- en: 'This will create the effect of each client being deauthenticated from the targeted
    AP. The following is an illustration of the attack on a network:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这将导致每个客户端从目标AP中被去认证。以下是对网络攻击的示例：
- en: '![](img/107805e1-7dec-4732-8d0b-cc4effe154ea.png)'
  id: totrans-62
  prefs: []
  type: TYPE_IMG
  zh: '![](img/107805e1-7dec-4732-8d0b-cc4effe154ea.png)'
- en: 'To launch a deauthentication attack, perform the following steps:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 要发起去认证攻击，请执行以下步骤：
- en: Enable monitor mode on your wireless adapter.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的无线适配器上启用监视模式。
- en: Use the `airodump-ng wlan0mon` command to discover your target's BSSID address.
    The BSSID will be used to launch our attack specifically toward a particular AP.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`airodump-ng wlan0mon`命令来发现您目标的BSSID地址。BSSID将被用来专门针对特定AP发动我们的攻击。
- en: Once the target AP has been discovered, take note of its BSSID and operating
    channel, and then terminate the scanning of nearby APs by using *Ctrl* + *C*.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦发现目标AP，记下它的BSSID和操作频道，然后通过使用*Ctrl* + *C* 终止对附近AP的扫描。
- en: 'Narrow your scope on wireless monitoring to the specific target AP just by
    using the following syntax: `airodump-ng --bssid <bssid value> -c <channel #>
    wlan0mon`. This current Terminal window will be used to monitor the progress of
    our attack.'
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '通过使用以下语法将无线监视范围缩小到特定目标AP：`airodump-ng --bssid <bssid value> -c <channel #>
    wlan0mon`。这个当前的终端窗口将用于监视我们攻击的进展。'
- en: Open a new Terminal window. This window will be used to launch the attack using
    the `aireplay-ng` tool. The `aireplay-ng -0 0 -a <BSSID> wlan0mon` command will
    send a continuous stream of deauthentication frames to the target AP.
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开一个新的终端窗口。这个窗口将用于使用`aireplay-ng`工具发动攻击。`aireplay-ng -0 0 -a <BSSID> wlan0mon`命令将向目标AP发送持续的去认证帧。
- en: 'Your results should be similar to the following screenshot:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 您的结果应该类似于以下截图：
- en: '![](img/35b3ef5a-5251-4aa5-8c84-155bf31c6175.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](img/35b3ef5a-5251-4aa5-8c84-155bf31c6175.png)'
- en: In the screenshot, we can see that `aireplay-ng` is sending a continuous stream
    of deauthentication frames to our targeted access point.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 在截图中，我们可以看到`aireplay-ng`正在向我们的目标接入点发送持续的去认证帧。
- en: During the attack, switch back to the first Terminal window where you are monitoring
    your target network. Soon, you'll see that the clients (stations) are being disconnected
    and, eventually, the WPA/WPA2 handshake will be captured. You will notice on your
    Terminal with airodump-ng that the WPA handshake value will appear in the top-right
    corner of the window. This is an indication that the WPA/WPA2 handshake has been
    captured. In the next chapter, we will perform password cracking on a wireless
    network.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 在攻击过程中，切换回到您监视目标网络的第一个终端窗口。很快，您会看到客户端（站点）被断开连接，最终，WPA/WPA2握手将被捕获。您将在您的终端上注意到，使用airodump-ng，WPA握手值将出现在窗口的右上角。这表明WPA/WPA2握手已经被捕获。在下一章中，我们将对无线网络进行密码破解。
- en: You can use tools such as **Hashcat** ([https://hashcat.net/hashcat/](https://hashcat.net/hashcat/))
    and **John the Ripper** ([https://www.openwall.com/john/](https://www.openwall.com/john/))
    to perform password cracking as well.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用诸如**Hashcat** ([https://hashcat.net/hashcat/](https://hashcat.net/hashcat/))
    和**John the Ripper** ([https://www.openwall.com/john/](https://www.openwall.com/john/))
    进行密码破解。
- en: 'Additionally, if you would like to deauthenticate a specific client (station)
    from an AP, the following command will allow this action:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，如果您想要从AP中去认证特定的客户端（站点），以下命令将允许这个操作：
- en: '[PRE3]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following are descriptions of each parameter we used:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们使用的每个参数的描述：
- en: '`-0`: This indicates that it''s a deauthentication attack.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-0`：这表示这是一个去认证攻击。'
- en: '`0`: This specifies the number of frames to inject. Using `0` will create a
    continuous attack; if you specify `2`, only two deauthentication frames will be
    injected.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`0`：这指定要注入的帧的数量。使用`0`将创建一个持续的攻击；如果您指定`2`，则只会注入两个去认证帧。'
- en: '`-c`: This allows you to specify the client''s MAC address.'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`-c`：这允许您指定客户端的MAC地址。'
- en: In the next section, we'll be creating a honeypot using Kali Linux and various
    wireless tools.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将使用Kali Linux和各种无线工具创建一个蜜罐。
- en: Creating a rogue AP/evil twin
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建一个伪装AP/恶意双胞胎
- en: As a future penetration tester or ethical hacker, you may be tasked with conducting
    extensive wireless security testing for your company or a client organization.
    Creating a rogue AP with an interesting SSID (wireless network name), such as
    `VIP_WiFi` or `Company-name_VIP`, will lure employees to establish a connection.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 作为未来的渗透测试人员或道德黑客，您可能被要求为您的公司或客户组织进行广泛的无线安全测试。创建一个具有吸引力的SSID（无线网络名称）的伪装AP，例如`VIP_WiFi`或`Company-name_VIP`，将诱使员工建立连接。
- en: 'In creating a rogue AP, the objective is to capture user credentials and sensitive
    information and to detect any vulnerable wireless clients in an organization.
    The following are some tips to consider when deploying your rogue AP:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建一个伪装AP时，目标是捕获用户凭据和敏感信息，并检测组织中的任何易受攻击的无线客户端。在部署伪装AP时，请考虑以下一些提示：
- en: Choose a suitable location to ensure there is maximum coverage for the potential
    victims.
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 选择一个合适的位置，以确保潜在受害者有最大的覆盖范围。
- en: Deauthenticate clients from the real AP, causing them to create an association
    with the rogue AP.
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从真实AP中去认证客户端，导致他们与伪装AP建立关联。
- en: Create a captive portal to capture user credentials.
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个捕获用户凭据的强制门户。
- en: To get started, we are going to use **Airgeddon**. This tool contains a lot
    of features and functions that will assist us, from gathering information about
    a target wireless network and its clients to launching various types of attacks
    and luring users to associate with our rogue AP.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，我们将使用**Airgeddon**。这个工具包含了很多功能和功能，将帮助我们，从收集关于目标无线网络及其客户端的信息到发动各种类型的攻击和诱使用户与我们的伪装AP关联。
- en: 'To get started with creating a fake access point, please follow these steps:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始创建一个虚假的接入点，请按照以下步骤进行：
- en: 'Download Airgeddon from its GitHub repository and give the `airgeddon.sh` script
    executable permissions on your user account. Use the following commands:'
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从其GitHub存储库下载Airgeddon，并在您的用户帐户上给予`airgeddon.sh`脚本可执行权限。使用以下命令：
- en: '[PRE4]'
  id: totrans-90
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: On your Terminal window, use the `./airgeddon.sh` command to start the Airgeddon
    interface. Once the script has been initiated, Airgeddon will begin checking for
    the essential hardware and software requirements on your Kali Linux machine.
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的终端窗口中，使用`./airgeddon.sh`命令启动Airgeddon界面。一旦脚本被启动，Airgeddon将开始检查您的Kali Linux机器上的基本硬件和软件要求。
- en: 'Hit *Enter* a few times until you''ve reached the interface selection prompt;
    be sure to select your wireless adapter, as shown in the following screenshot:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按*Enter*几次，直到您到达接口选择提示；请务必选择您的无线适配器，如下面的屏幕截图所示：
- en: '![](img/4e3359e2-4c52-413f-9e8e-0387a61cdfb1.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4e3359e2-4c52-413f-9e8e-0387a61cdfb1.png)'
- en: Select option `2`, which has the wlan0 interface, and hit *Enter*.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 选择选项`2`，它具有wlan0接口，并按*Enter*。
- en: If Airgeddon has indicated that you're missing any tools, please be sure to
    install them before continuing.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 如果Airgeddon指出您缺少任何工具，请务必在继续之前安装它们。
- en: 'You''ll now be presented with the main dashboard of Airgeddon. Here, you can
    choose to switch between monitor or managed mode on your wireless adapter. You''ll
    be able to launch various types of attacks, such as **Denial-of-Service** (**DoS**)
    attacks, attempt to crack wireless passwords, capture and decrypt wireless handshakes,
    perform an evil twin attack, or create a rogue AP:'
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，您将看到Airgeddon的主要仪表板。在这里，您可以选择在无线适配器上在监视模式或托管模式之间切换。您将能够发动各种类型的攻击，如**拒绝服务**（**DoS**）攻击，尝试破解无线密码，捕获和解密无线握手，执行恶意双子攻击，或创建一个恶意AP：
- en: '![](img/3f024bda-63f4-4225-bd93-d2aea1a01e8f.png)'
  id: totrans-97
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3f024bda-63f4-4225-bd93-d2aea1a01e8f.png)'
- en: For our attack, we are going to create a honeypot to lure victims into connecting
    to our fake AP to intercept, redirect, and capture sensitive information.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的攻击，我们将创建一个蜜罐，诱使受害者连接到我们的假AP，以拦截、重定向和捕获敏感信息。
- en: 'Next, set your wireless adapter to monitor mode. You can do this within the
    Airgeddon menu using the **Put interface in monitor mode** option. Once completed,
    you should see the status of your wireless adapter now changed to **Monitor**
    mode, as shown in the following screenshot:'
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，将您的无线适配器设置为监视模式。您可以在Airgeddon菜单中使用**将接口置于监视模式**选项来完成这个操作。完成后，您应该看到您的无线适配器的状态现在已更改为**监视**模式，如下面的屏幕截图所示：
- en: '![](img/3f992a7d-b09f-4789-a4b7-0e1daca2f62f.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3f992a7d-b09f-4789-a4b7-0e1daca2f62f.png)'
- en: 'Select the Evil Twin attacks menu option and hit *Enter*. You''ll be presented
    with the following options:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择恶意双子攻击菜单选项并按*Enter*。您将看到以下选项：
- en: '![](img/95928872-dd3a-4d7b-8bc4-173139007a85.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/95928872-dd3a-4d7b-8bc4-173139007a85.png)'
- en: Not only does Airgeddon allow us to easily set up a rogue AP or evil twin, but
    it also provides us with additional features, such as sniffing the victim's traffic,
    performing SSL stripping of any SSL/TLS connections, performing browser exploitation,
    and even creating a captive portal for gathering user credentials.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Airgeddon不仅允许我们轻松设置一个恶意AP或恶意双子，而且还为我们提供了其他功能，如嗅探受害者的流量，执行任何SSL/TLS连接的SSL剥离，执行浏览器利用，甚至创建一个用于收集用户凭据的囚犯门户。
- en: 'Let''s first look for a target. Choose option `4` and hit *Enter*. A pop-up
    Terminal window will open, displaying all nearby APs. When you''re ready to choose
    a target, choose the scanning window:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们首先寻找一个目标。选择选项`4`并按*Enter*。一个弹出的终端窗口将打开，显示所有附近的AP。当您准备好选择一个目标时，请选择扫描窗口：
- en: '![](img/1027ca72-3fb5-498b-a0dc-8c5a8a2c69e2.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1027ca72-3fb5-498b-a0dc-8c5a8a2c69e2.png)'
- en: 'Choose your target AP and hit *Enter* to continue. At this point, we have set
    our wireless adapter to Monitor mode and chosen our target:'
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择您的目标AP并按*Enter*继续。此时，我们已经将无线适配器设置为监视模式并选择了我们的目标：
- en: '![](img/b7d42a28-eb97-4387-a99a-e24e6dd6e76e.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b7d42a28-eb97-4387-a99a-e24e6dd6e76e.png)'
- en: 'Let''s perform an evil twin attack with sniffing. Choose option `6` and hit
    *Enter*. The following menu will become available:'
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们进行一个带嗅探的恶意双子攻击。选择选项`6`并按*Enter*。接下来的菜单将变为可用：
- en: '![](img/3abb0448-2f1c-443e-9fe9-9e7fac27013c.png)'
  id: totrans-109
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3abb0448-2f1c-443e-9fe9-9e7fac27013c.png)'
- en: 'Select option `2` to perform a deauthentication attack to the target wireless
    network; this will force the clients of the real network to disconnect (deauthenticate)
    and they will attempt to connect to our rogue AP/evil twin. Airgeddon will ask
    you to choose a physical interface that is connected to the internet/physical
    network. The purpose is to provide the illusion of regular network connectivity
    to the victims. When they are connected and accessing the local resources, the
    victims will think it''s the legitimate network:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择选项`2`来对目标无线网络执行去认证攻击；这将迫使真实网络的客户端断开连接（去认证），他们将尝试连接到我们的恶意双子/恶意双子。Airgeddon将要求您选择连接到互联网/物理网络的物理接口。目的是为受害者提供常规网络连接的假象。当他们连接并访问本地资源时，受害者会认为这是合法的网络：
- en: '![](img/cb876ff2-a25b-48c4-af19-4e2182b37add.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb876ff2-a25b-48c4-af19-4e2182b37add.png)'
- en: Choose the appropriate interface and hit *Enter* to continue; hit *Enter* once
    more to verify the selected interface.
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择适当的接口并按*Enter*继续；再次按*Enter*以验证所选的接口。
- en: Choose the option to spoof your MAC address to change your identity.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 选择欺骗你的MAC地址来改变你的身份。
- en: 'When you''re ready, launch the attack. Airgeddon will open a few smaller Terminal
    windows displaying the status of each attack it''s performing, as shown in the
    following screenshot:'
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当你准备好时，发动攻击。Airgeddon将打开几个较小的终端窗口，显示它正在执行的每次攻击的状态，如下面的屏幕截图所示：
- en: '![](img/923af4e8-36bf-4e34-b040-b39327950a33.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](img/923af4e8-36bf-4e34-b040-b39327950a33.png)'
- en: Once a client is connected, the appropriate Terminal window will provide you
    with an update. With just a few steps, you now have your own rogue AP/evil twin.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦客户端连接，适当的终端窗口将为您提供更新。只需几个步骤，你现在拥有了自己的恶意双子/恶意双子。
- en: In the next section, we will discuss and demonstrate password spraying on a
    target system.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一部分，我们将讨论并演示对目标系统的密码喷洒。
- en: Performing a password spraying attack
  id: totrans-118
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行密码喷洒攻击
- en: Password spraying (sometimes referred to as reverse brute force) is a technique
    whereby multiple login attempts are made by using a valid username(s) and a word
    list containing various possibilities of the password. The objective of performing
    a password spraying attack is to obtain a set of valid user credentials.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 密码喷洒（有时被称为反向暴力破解）是一种通过使用有效的用户名和包含密码各种可能性的单词列表进行多次登录尝试的技术。进行密码喷洒攻击的目标是获得一组有效的用户凭据。
- en: To perform a password spraying attack, we are going to use our existing WordPress
    server as our target **Burp Suite** to obtain the username and password input
    field on a web page, and `hydra` to perform our password spraying attack to find
    valid user credentials.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行密码喷洒攻击，我们将使用我们现有的WordPress服务器作为我们的目标**Burp Suite**，以在网页上获取用户名和密码输入字段，并使用`hydra`执行我们的密码喷洒攻击以找到有效的用户凭据。
- en: 'To get started, please use the following instructions:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请使用以下说明：
- en: Configure your web browser to use the Burp Suite proxy settings. Once you've
    done that, open Burp Suite and turn on its Intercept mode.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 配置您的网络浏览器以使用Burp Suite代理设置。完成后，打开Burp Suite并打开其拦截模式。
- en: Next, on your web browser, go to the WordPress login portal. The URL should
    be `http://<server address>/wp-login.php`. Please note that you should not attempt
    any attacks on any devices or networks where you have not acquired legal permission
    from the appropriate authorities. The tasks performed in this section are conducted
    in a lab environment for educational purposes only.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在您的网络浏览器上，转到WordPress登录门户。URL应为`http://<服务器地址>/wp-login.php`。请注意，您不应该在未经适当权限的设备或网络上尝试任何攻击。本节中执行的任务仅在实验环境中进行，仅用于教育目的。
- en: 'Enter the following user credentials in the username and password fields and
    hit *Enter* to send a login request:'
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在用户名和密码字段中输入以下用户凭据，然后按*Enter*发送登录请求：
- en: '`uname`'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`uname`'
- en: '`pass`'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`pass`'
- en: 'Head back over to Burp Suite. On the Proxy | Intercept tab, hit the forward
    button a few times until you see an HTTP `POST` message in the **Raw** sub-tab,
    as shown in the following screenshot:'
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 请返回到Burp Suite。在代理|拦截选项卡上，点击几次前进按钮，直到在**原始**子选项卡中看到一个HTTP `POST`消息，如下面的屏幕截图所示：
- en: '![](img/de17e88f-1e19-4ba6-ab67-0ef157acedd2.png)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![](img/de17e88f-1e19-4ba6-ab67-0ef157acedd2.png)'
- en: Within the `POST` message, take note of the directory (`/wp-login.php`) in the
    first line and the username/password field.
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在`POST`消息中，注意第一行中的目录(`/wp-login.php`)和用户名/密码字段。
- en: 'Be sure to record the login error message on the web page as it is required
    in the later steps:'
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保记录网页上的登录错误消息，因为它在后续步骤中是必需的：
- en: '![](img/7765a672-0c5b-485f-82ab-0985ab9d98eb.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7765a672-0c5b-485f-82ab-0985ab9d98eb.png)'
- en: 'In our exercise, two custom word lists have been created: the first word list
    contains a list of possible usernames, and the second contains a list of possible
    passwords. Using the `hydra` tool on Kali Linux, you will be able to perform a
    **password spraying** attack on the target WordPress server.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的练习中，已创建了两个自定义字词表：第一个字词表包含可能的用户名列表，第二个包含可能的密码列表。使用Kali Linux上的`hydra`工具，您将能够对目标WordPress服务器执行**密码喷洒**攻击。
- en: 'Using `hydra`, we can have the following syntax:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`hydra`，我们可以得到以下语法：
- en: '[PRE5]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Substituting each value in the syntax, we get the following command:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 替换语法中的每个值，我们得到以下命令：
- en: '[PRE6]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: Replacing `uname` with `^USER^` and `pass` with `^PASS^`, we can tell `hydra`
    that these are the username and password fields. Additionally, `–V` is specified
    to produce a verbose output on the Terminal window.
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将`uname`替换为`^USER^`，将`pass`替换为`^PASS^`，我们可以告诉`hydra`这些是用户名和密码字段。另外，指定`-V`以在终端窗口上产生详细输出。
- en: 'After executing the command, the following is an example of the expected output.
    The rows that begin with `[80] [http-post-form]` provide a possible valid username
    and password for the target, as shown in the following screenshot:'
  id: totrans-138
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 执行命令后，以下是预期输出的示例。以`[80] [http-post-form]`开头的行提供了目标的可能有效的用户名和密码，如下面的屏幕截图所示：
- en: '![](img/b4691dc9-934c-40d6-b28b-e8bd218891f2.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b4691dc9-934c-40d6-b28b-e8bd218891f2.png)'
- en: Be sure to check each username and password to verify its authenticity on the
    target system. Rapidly firing usernames and passwords to a target system may cause
    a lockout and stop the attack on our end. To create a 10-second wait period between
    attempts, use the `-w 10` parameters. This is optional; however, it may reduce
    the chances of being locked out or blocked by the target.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 确保检查每个用户名和密码以验证其在目标系统上的真实性。快速向目标系统发送用户名和密码可能会导致锁定并停止我们的攻击。为了在尝试之间创建10秒的等待时间，使用`-w
    10`参数。这是可选的；但是，它可能会减少被目标锁定或阻止的机会。
- en: In the next section, we will cover the essentials of a watering hole attacks.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将介绍饮水源攻击的基本知识。
- en: Setting up watering hole attacks
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置饮水源攻击
- en: Within the field of IT security, learning about various types of attacks and
    threats is very important. Some of these attacks have some very unusual names,
    and, in this section, we will cover the fundamentals of a **watering hole attack**.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在IT安全领域，了解各种类型的攻击和威胁非常重要。其中一些攻击有一些非常不寻常的名称，在本节中，我们将介绍**饮水源攻击**的基础知识。
- en: Let's imagine you're the IT security administrator or engineer for a company.
    You've implemented the best security appliances within the industry to proactively
    detect and prevent any sort of threats, whether internal or external. You've also
    implemented industry best practices, adhered to standards, and ensured that your
    users (employees of the organization) are frequently trained in user security
    practices. You have built a security fortress within the organization and ensured
    that the network perimeter is also on guard for new and emerging threats.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您是一家公司的IT安全管理员或工程师。您已经在行业内实施了最佳的安全设备，以主动检测和防止任何内部或外部的威胁。您还实施了行业最佳实践，遵守了标准，并确保您的用户（组织的员工）经常接受用户安全实践培训。您已经在组织内建立了一个安全堡垒，并确保网络边界也对新兴威胁保持警惕。
- en: Attackers would notice that they are unable to penetrate your network, and even
    social engineering techniques such as phishing emails would not be successful
    against your organization. This would create a big challenge to compromise the
    organization (target), as it's very well protected. One method of doing this is
    to perform a watering hole attack.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 攻击者会注意到他们无法渗透您的网络，甚至社会工程技术，如钓鱼邮件，也无法成功针对您的组织。这将对妥协组织（目标）造成很大挑战，因为它受到了很好的保护。其中一种方法是进行饮水源攻击。
- en: Imagine that, during their lunch break, a few employees visit the nearby coffee
    shop for a warm or cold beverage. Hackers could be monitoring the movements of
    the employees of an organization—say they visit places that contain public Wi-Fi
    quite often during their breaks, or even after work. Let's say there's a group
    of employees who frequent the local coffee shop. The attacker can compromise the
    coffee shop's Wi-Fi network and plant a payload that downloads to any device connected
    to the network and runs in the background.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一下，在午餐时间，一些员工去附近的咖啡店喝一杯热饮或冷饮。黑客可能正在监视组织员工的活动——比如说，他们在休息时间经常去到有公共 Wi-Fi 的地方，甚至下班后也是如此。假设有一群员工经常光顾当地的咖啡店。攻击者可以妥协咖啡店的
    Wi-Fi 网络，并植入一个下载到连接到网络的任何设备并在后台运行的 payload。
- en: By compromising the coffee shop's Wi-Fi network, the attack is poisoning the
    watering hole, which everyone, including the employees of the target organization,
    is using while they enjoy their beverages. Let's imagine Alice's smartphone is
    compromised at the coffee shop; she carries it back to the organization and connects
    to the internal (Wi-Fi) network. At this point, the attack is being generated
    from the inside and can compromise the remaining segments of the network, or even
    attempt to create a backdoor in the target organization.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 通过 compromise 咖啡店的 Wi-Fi 网络，攻击者正在对饮水源进行污染，包括目标组织的员工在享用饮料时使用的饮水源。假设 Alice 的智能手机在咖啡店被攻击；她将其带回组织并连接到内部（Wi-Fi）网络。此时，攻击是从内部生成的，并且可以危害网络的其余部分，甚至尝试在目标组织中创建后门。
- en: There are many other methods for creating a watering hole attack; this was just
    one example. Another example would be compromising a legitimate website that a
    lot of users visit often and planting malware on the potential victims' systems.
    When the systems are infected with malware, the payload can target other websites
    or networks.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多其他方法可以创建饮水源攻击；这只是一个例子。另一个例子是妥协经常有许多用户访问的合法网站，并在潜在受害者的系统上种植恶意软件。当系统感染恶意软件时，payload
    可以针对其他网站或网络。
- en: In the next section, we will discuss and demonstrate how credentials can be
    stolen from systems that use weak encryption systems.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一节中，我们将讨论并演示如何从使用弱加密系统的系统中窃取凭据。
- en: Exploiting weak encryption to steal credentials
  id: totrans-150
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用弱加密窃取凭据
- en: Encryption plays is a key role in our daily lives; whether we are checking our
    emails on the go, browsing a favorite website, or simply sending a message to
    a friend, data encryption provides us with an acceptable level of privacy from
    prying eyes. Quite often, IT professionals don't always keep track of their compliance
    levels in maintaining encryption techniques to secure data on a system. This leads
    to a malicious user or hacker compromising a vulnerable system to retrieve confidential
    data due to poor encryption practices.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 加密在我们的日常生活中扮演着关键角色；无论是在外出时检查电子邮件，浏览喜爱的网站，还是简单地给朋友发送消息，数据加密为我们提供了一定程度的隐私保护，使得我们免受窥探。很多时候，IT
    专业人员并不总是跟踪他们在维护加密技术方面的合规水平。这导致恶意用户或黑客通过攻击易受攻击的系统来获取机密数据，因为加密实践不当。
- en: In this exercise, we will attempt to discover one of the most common vulnerabilities
    in encryption on a target. Once found, we will then exploit the weak encryption
    vulnerability.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个练习中，我们将尝试发现目标上加密中最常见的漏洞。一旦找到，我们将利用弱加密漏洞。
- en: 'To get started, perform the following steps:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始，请执行以下步骤：
- en: Download and set up the **bee-box** virtual machine. The bee-box file can be
    found at [https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/).
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 下载并设置**bee-box**虚拟机。bee-box 文件可以在[https://sourceforge.net/projects/bwapp/files/bee-box/](https://sourceforge.net/projects/bwapp/files/bee-box/)找到。
- en: Once installed, open the web browser on your Kali Linux (attacker machine),
    enter the IP address of bee-box, and hit *Enter*.
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，在您的 Kali Linux（攻击者机器）上打开 Web 浏览器，输入 bee-box 的 IP 地址，然后点击*Enter*。
- en: 'The following screen will appear. Click on the **bWAPP** link, as shown in
    the following screenshot:'
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将出现以下屏幕。点击**bWAPP**链接，如下截图所示：
- en: '![](img/d729380b-f83c-4dd4-98b3-a89b991fb809.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d729380b-f83c-4dd4-98b3-a89b991fb809.png)'
- en: 'You''ll encounter a login portal. Insert the username `bee` and the password
    `bug` to log on:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将遇到一个登录门户。输入用户名`bee`和密码`bug`进行登录：
- en: '![](img/04aaae79-65aa-40ec-8be4-1e24f41f70b7.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](img/04aaae79-65aa-40ec-8be4-1e24f41f70b7.png)'
- en: 'In the top-left corner of the screen, use the drop-down menu and select Heartbleed
    Vulnerability. Then, click Hack to load the vulnerability on the target virtual
    machine:'
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在屏幕的左上角，使用下拉菜单并选择 Heartbleed Vulnerability。然后，点击 Hack 以加载目标虚拟机上的漏洞：
- en: '![](img/33bf6c86-3348-4ef5-9edc-30de33a9badd.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](img/33bf6c86-3348-4ef5-9edc-30de33a9badd.png)'
- en: 'Next, you''ll be presented with the following screen:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将看到以下屏幕：
- en: '![](img/051381cd-5022-4d8c-9ec5-09821cdd673c.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/051381cd-5022-4d8c-9ec5-09821cdd673c.png)'
- en: On your Kali Linux machine, enter the new URL with the port number `8443` in
    the address bar and hit *Enter*. The new URL should be `https://10.10.10.131:8443`.
    Be sure to log in to the bWAPP application again using the credentials provided
    in *Step 4*.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在您的Kali Linux机器上，在地址栏中输入带有端口号`8443`的新URL，然后点击*Enter*。新的URL应该是`https://10.10.10.131:8443`。确保再次使用*步骤4*中提供的凭据登录bWAPP应用程序。
- en: 'Using Nmap, we can perform a vulnerability scan to determine whether the heartbleed
    vulnerability exists on a target. To perform this task, use the following command:'
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用Nmap，我们可以执行漏洞扫描，以确定目标上是否存在心脏出血漏洞。要执行此任务，请使用以下命令：
- en: '[PRE7]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'If the vulnerability exists on the target, Nmap will present us with the following
    screen:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果目标上存在漏洞，Nmap将向我们呈现以下屏幕：
- en: '![](img/91322818-3fa2-4ccc-b625-00d965aedb99.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](img/91322818-3fa2-4ccc-b625-00d965aedb99.png)'
- en: 'Now that we are certain that the heartbleed vulnerability exists on our target,
    it''s time to use Metasploit to perform a bit of exploitation. Within Metasploit,
    let''s use the `search` command to help us find a suitable module:'
  id: totrans-169
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们确定了目标上存在心脏出血漏洞，是时候使用Metasploit进行一些利用了。在Metasploit中，让我们使用`search`命令来帮助我们找到一个合适的模块：
- en: '![](img/9c7b20c7-6a47-4bd3-a594-b118cd85f6e4.png)'
  id: totrans-170
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9c7b20c7-6a47-4bd3-a594-b118cd85f6e4.png)'
- en: 'The search returned two available modules. We will use the `auxiliary/scanner/ssl/openssl_heartbleed`
    module. Additionally, we will set `RHOSTS` as the target''s IP address and `RPORTS`
    as `8443`, as specified in the hint from the bWAPP interface. The following snippet
    shows the configurations:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索返回了两个可用的模块。我们将使用`auxiliary/scanner/ssl/openssl_heartbleed`模块。此外，我们将把`RHOSTS`设置为目标的IP地址，`RPORTS`设置为`8443`，如bWAPP界面的提示所指定的。以下片段显示了配置：
- en: '![](img/eec001a7-ae79-4aaa-9dc5-573e41130c78.png)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eec001a7-ae79-4aaa-9dc5-573e41130c78.png)'
- en: 'Upon launching the module, you''ll observe that the data is being leaked in
    the following screen:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 启动模块后，您会注意到数据正在以下屏幕中泄漏：
- en: '![](img/991a6026-aa4c-4dfb-b472-bd4baf69f32c.png)'
  id: totrans-174
  prefs: []
  type: TYPE_IMG
  zh: '![](img/991a6026-aa4c-4dfb-b472-bd4baf69f32c.png)'
- en: Carefully examining the output, you can see that the exploit has returned the
    `Printable info leaked` section, which is followed by HTTP session information
    in plaintext; the target machine responded with a data leak. If no leak was found,
    the target machine won't return any data to our Metasploit interface. By default,
    a dump of the data has been extracted and stored in the `/root/.msf4/loot/…` location
    on your Kali Linux machine.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 仔细检查输出，您会看到利用返回了`可打印信息泄漏`部分，随后是明文的HTTP会话信息；目标机器以数据泄漏做出了响应。如果没有发现泄漏，目标机器将不会向我们的Metasploit界面返回任何数据。默认情况下，数据的转储已被提取并存储在您的Kali
    Linux机器上的`/root/.msf4/loot/…`位置。
- en: 'Using the `show info` command, you''ll see the available actions to perform
    under the `openssl_heartbleed` module, as shown in the following screenshot:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用`show info`命令，您将看到`openssl_heartbleed`模块下可执行的操作，如下图所示：
- en: '![](img/cddebdb6-feb0-4e2b-aed5-a583104737b7.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cddebdb6-feb0-4e2b-aed5-a583104737b7.png)'
- en: 'These actions can be changed using the following commands:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 可以使用以下命令更改这些操作：
- en: '`set action DUMP`'
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set action DUMP`'
- en: '`set action KEYS`'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set action KEYS`'
- en: '`set action SCAN`'
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`set action SCAN`'
- en: 'The following is the content of the `.bin` file after a `set action DUMP` command
    was used:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在使用`set action DUMP`命令后`.bin`文件的内容：
- en: '![](img/51804a0e-fc70-4b64-8dba-0c195f9a3ba3.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](img/51804a0e-fc70-4b64-8dba-0c195f9a3ba3.png)'
- en: Additionally, the more people are currently accessing the vulnerable application
    the higher the possibility of gathering more confidential information, such as
    login credentials. However, in our exercise, I was able to capture the cookie
    data.
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，越多的人当前访问易受攻击的应用程序，收集更多机密信息的可能性就越高，例如登录凭据。然而，在我们的练习中，我能够捕获cookie数据。
- en: Summary
  id: totrans-185
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: During this chapter, you learned how to perform wireless packet sniffing, familiarized
    yourselves with the basics of packet sniffing, and targeted packet sniffing using
    `aircrack-ng`. Additionally, you learned the essential skills required to perform
    a deauthentication attack on a target wireless access point during the *Deauthenticating
    clients on a wireless network* section.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您学习了如何执行无线数据包嗅探，熟悉了数据包嗅探的基础知识，并使用`aircrack-ng`进行了有针对性的数据包嗅探。此外，您还学会了在*在无线网络上去认证客户端*部分对目标无线访问点执行去认证攻击所需的基本技能。
- en: In the *Creating a rogue AP/evil twin* section, you learned how to use Airgeddon
    to chain multiple attacks together and create an evil twin/rogue access point.
    Furthermore, the section on password spraying provided the skills necessary to
    gain access to a remote system while acquiring the skills to exploit systems that
    use weak encryption.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 在*创建一个恶意AP/恶意孪生*部分，您学习了如何使用Airgeddon将多个攻击链接在一起，并创建一个恶意孪生/恶意访问点。此外，密码喷洒部分提供了获取远程系统访问权限所需的技能，同时还提供了利用使用弱加密的系统的技能。
- en: In the next chapter, [Chapter 10](d5124b0a-e923-4b55-93bb-ee34ae8fbd4c.xhtml),
    *Network Penetration Testing - Gaining Access*, we will be covering network penetration
    in greater detail.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，[第10章](d5124b0a-e923-4b55-93bb-ee34ae8fbd4c.xhtml)，*网络渗透测试-获取访问权限*，我们将更详细地介绍网络渗透。
- en: Questions
  id: totrans-189
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: What tool can enable monitor mode for your wireless network adapter?
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么工具可以为您的无线网络适配器启用监视模式？
- en: What is another name for the SSID?
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: SSID的另一个名称是什么？
- en: During a deauthentication attack, what codes are used to disconnect clients?
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在去认证攻击期间，用于断开客户端的代码是什么？
- en: What tool is used to perform deauthentication?
  id: totrans-193
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 用于执行去认证的工具是什么？
- en: Further reading
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'The following are some additional reading resources:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一些额外的阅读资源：
- en: '**Deauthentication attacks**: [https://www.aircrack-ng.org/doku.php?id=deauthentication](https://www.aircrack-ng.org/doku.php?id=deauthentication)'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**去认证攻击**：[https://www.aircrack-ng.org/doku.php?id=deauthentication](https://www.aircrack-ng.org/doku.php?id=deauthentication)'
- en: '**Common WLAN protection mechanisms and their flaws**: [https://hub.packtpub.com/common-wlan-protection-mechanisms-and-their-flaws/](https://hub.packtpub.com/common-wlan-protection-mechanisms-and-their-flaws/)'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**常见WLAN保护机制及其缺陷**：[https://hub.packtpub.com/common-wlan-protection-mechanisms-and-their-flaws/](https://hub.packtpub.com/common-wlan-protection-mechanisms-and-their-flaws/)'
- en: '**Advanced wireless sniffing**: [https://hub.packtpub.com/advanced-wireless-sniffing/](https://hub.packtpub.com/advanced-wireless-sniffing/)'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**高级无线嗅探**：[https://hub.packtpub.com/advanced-wireless-sniffing/](https://hub.packtpub.com/advanced-wireless-sniffing/)'
