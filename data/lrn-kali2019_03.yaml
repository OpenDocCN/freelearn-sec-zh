- en: Setting Up Kali - Part 1
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Kali - 第1部分
- en: 'As a future ethical hacker and/or penetration tester, it is quite important
    when testing payloads or practicing hacking skills that you do not disrupt or
    cause any sort of harm or damage to other people''s computers or network infrastructure,
    such as that of your organization. To elaborate further, we''ll use a simple analogy.
    Imagine you work for a company called ACME (a fictional organization) and you''re
    the network/system administrator. Your IT director has noticed you express an
    interest in cybersecurity and that you have significant potential in becoming
    a penetration tester or an ethical hacker. They, therefore, approve official training
    in penetration testing certification for you. Once the training has ended, access
    to the virtual labs through the **Authorized Training Centre** (**ATC**) is usually
    terminated, which poses a real challenge for you: how are you going to practice
    your hacking skills when the training course and lab access has ended? Another
    challenge is the fact that practicing hacking techniques on an organization''s
    network is intrusive and illegal.'
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 作为未来的道德黑客和/或渗透测试人员，在测试有效载荷或练习黑客技能时，非常重要的一点是不要干扰或对其他人的计算机或网络基础设施造成任何伤害或损害，比如您所在组织的计算机或网络。为了进一步阐述，我们将使用一个简单的类比。想象一下，您在一个名为ACME（一个虚构的组织）的公司工作，您是网络/系统管理员。您的IT主管注意到您对网络安全表现出兴趣，并且认为您有成为渗透测试人员或道德黑客的潜力。因此，他们批准您接受官方的渗透测试认证培训。一旦培训结束，通过**授权培训中心**（**ATC**）访问虚拟实验室的权限通常会被终止，这对您来说是一个真正的挑战：在培训课程和实验室访问结束后，您将如何练习您的黑客技能？另一个挑战是，在组织的网络上练习黑客技术是具有侵入性和非法的。
- en: This brings us to the importance of building our own personal lab environment
    for practicing and improving our skill set. Furthermore, having our own penetration
    testing lab will allow us to try new attacks, tools, and techniques without worrying
    about being intrusive or creating a security breach in a company network. Most
    importantly, throughout this chapter, you will learn about the importance of building
    and designing a suitable penetration testing lab for practicing various hacking
    techniques on Windows and Linux operating systems.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 这使我们意识到建立自己的个人实验室环境对于练习和提高技能非常重要。此外，拥有自己的渗透测试实验室将使我们能够尝试新的攻击、工具和技术，而不必担心对公司网络造成侵入性或安全漏洞。最重要的是，在本章中，您将了解建立和设计适合在Windows和Linux操作系统上练习各种黑客技术的渗透测试实验室的重要性。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Lab overview
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实验室概述
- en: Building our lab
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 建立我们的实验室
- en: Setting up Kali Linux
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置Kali Linux
- en: Installing Nessus
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Nessus
- en: Setting up Android emulators
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置Android模拟器
- en: Installing Metasploitable 2
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装Metasploitable 2
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the exercises in this chapter, please ensure that you
    have met the following hardware and software requirements:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟上本章的练习，请确保您已满足以下硬件和软件要求：
- en: Oracle VM VirtualBox
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Oracle VM VirtualBox
- en: VMware Workstation Pro
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Workstation Pro
- en: Kali Linux 2019.2
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 2019.2
- en: Nessus vulnerability scanner
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus漏洞扫描程序
- en: Android operating system (x86 version 4.4-r4)
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Android操作系统（x86版本4.4-r4）
- en: Metasploitable 2
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Metasploitable 2
- en: Lab overview
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实验室概述
- en: In this section, we are going to discuss the methodology and components required
    for designing and setting up our own penetration testing lab. To build our lab,
    we are going to build a virtual lab infrastructure to ensure that we are able
    to save money, as opposed to having to buy physical computers and networking equipment.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将讨论设计和设置我们自己的渗透测试实验室所需的方法和组件。为了建立我们的实验室，我们将建立一个虚拟实验室基础设施，以确保我们能够节省金钱，而不是不得不购买物理计算机和网络设备。
- en: In the following sections, we will begin our discussion on the importance of
    using virtualization in building our penetration testing lab environment, as virtualization
    plays an important role throughout this chapter and the remainder of the book.
    Afterward, we will dive into installing Kali Linux and creating a virtual network.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将开始讨论在建立我们的渗透测试实验室环境中使用虚拟化的重要性，因为虚拟化在本章和本书的其余部分中起着重要作用。之后，我们将深入安装Kali
    Linux并创建一个虚拟网络。
- en: Virtualization
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化
- en: In my experience as a student, instructor, and professional, when a person is
    embarking on their studies within the field of IT, that individual normally believes
    that a physical lab infrastructure is definitely required. To some extent, this
    is true, but there are many downsides associated with building a physical lab.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我作为学生、教师和专业人士的经验，当一个人在IT领域开始学习时，通常认为需要一个物理实验室基础设施。在某种程度上，这是正确的，但建立物理实验室也有许多不利因素。
- en: 'These downsides include, but are by no means limited to, the following:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 这些不利因素包括但不限于以下内容：
- en: The physical space required to store the many servers and networking appliances
    that are needed.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存储所需的物理空间，用于存放许多所需的服务器和网络设备。
- en: The power consumption per device will result in an overall high rate of financial
    expenditure.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个设备的功耗将导致整体高额的财政支出。
- en: The cost of building/purchasing each physical device, whether it's a network
    appliance or a server.
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个物理设备的建造/购买成本，无论是网络设备还是服务器。
- en: These are just some of the primary concerns of a student or beginner. In most
    cases, a person has a single computer, be it a desktop or laptop machine. The
    conception of **virtualization**, emerging as a response to these downsides, opened
    a multitude of doors in IT and enabled many people and organizations to optimize
    and manage their hardware resources efficiently.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 这些只是学生或初学者的一些主要关注点。在大多数情况下，一个人只有一台计算机，无论是台式机还是笔记本电脑。**虚拟化**的概念作为对这些不利因素的回应，为IT开启了许多大门，并使许多人和组织能够有效地优化和管理他们的硬件资源。
- en: '*What is virtualization and how is it helpful?* The concept of virtualization
    within the IT industry allows organizations to reduce the need for multiple items
    of physical equipment, such as servers and networking and security appliances.
    In the early days of IT, an operating system such as Microsoft Windows Server
    would need to be installed on a single physical device. Usually, a server-like
    device would consist of a high-end processor for the CPU, large amounts of RAM,
    and a lot of storage. However, there would be many times when the hardware resources
    (CPU and RAM) would be underutilized by the host operating system (Microsoft Windows
    Server). This wastage of resources is commonly known as **server sprawl**.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '*什么是虚拟化，它有什么帮助？* IT行业中的虚拟化概念允许组织减少对多个物理设备（如服务器和网络安全设备）的需求。在IT的早期阶段，例如Microsoft
    Windows Server这样的操作系统需要安装在单个物理设备上。通常，类似服务器的设备会包括用于CPU的高端处理器、大量的RAM和大量的存储空间。然而，很多时候硬件资源（CPU和RAM）会被主机操作系统（Microsoft
    Windows Server）低效利用。这种资源浪费通常被称为**服务器扩展**。'
- en: 'The following diagram shows three physical servers, each with their own host
    operating system and hardware resources available:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了三台物理服务器，每台都有自己的主机操作系统和可用的硬件资源：
- en: '![](img/1535eedf-9d43-410c-b3d3-0be704722be4.png)'
  id: totrans-30
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1535eedf-9d43-410c-b3d3-0be704722be4.png)'
- en: To quickly view the utilization of your resources on a Microsoft Windows operating
    system, simply open Task Manager and select the Performance tab. The following
    screenshot is a capture of my current device.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 要快速查看Microsoft Windows操作系统上资源的利用情况，只需打开任务管理器并选择性能选项卡。以下截图是我当前设备的截图。
- en: 'We can see that CPU, Memory, and other resources are currently underutilized;
    looking closely at the **CPU** and **Memory** graphs, we can see that they are
    not over 80%-90%, and less than 50% of their capacity is being used:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到CPU、内存和其他资源目前都没有充分利用；仔细观察**CPU**和**内存**图表，我们可以看到它们没有超过80%-90%，使用的容量不到50%：
- en: '![](img/2e27c71a-e62e-44c0-b5da-47827a6653a1.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2e27c71a-e62e-44c0-b5da-47827a6653a1.png)'
- en: What if we were able to run multiple operating systems (such as Windows and
    Linux) on a single physical device? We could definitely utilize virtualization.
    This would enable us to better manage and efficiently maximize the resources available,
    using a component known as a **hypervisor**.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们能够在单个物理设备上运行多个操作系统（如Windows和Linux），我们肯定可以利用虚拟化。这将使我们能够更好地管理和有效地最大化可用资源，使用一种称为**虚拟化管理程序**的组件。
- en: Hypervisors
  id: totrans-35
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟化管理程序
- en: The hypervisor is the most important component in virtualization. It is responsible
    for creating an emulated environment that a guest operating system uses to function.
    Each type of operating system, irrespective of whether it is designed for a desktop,
    server, network, or mobile device, requires particular hardware components to
    ensure optimal and seamless functioning. This is where the hypervisor works its
    magic to make the impossible happen, allowing you to run multiple different operating
    systems on a single computer.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化管理程序是虚拟化中最重要的组件。它负责创建一个模拟环境，供客户操作系统用于运行。无论操作系统是为桌面、服务器、网络还是移动设备设计的，都需要特定的硬件组件来确保最佳和无缝的运行。这就是虚拟化管理程序发挥作用的地方，它让不可能的事情变为可能，允许您在一台计算机上运行多个不同的操作系统。
- en: 'A hypervisor can be installed in one of two ways on a hardware device, which
    will be explored in more detail later in the chapter:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟化管理程序可以以两种方式之一安装在硬件设备上，这将在本章的后面更详细地探讨：
- en: It can be installed on top of a host operating system, such as Windows, Linux,
    or macOS.
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以安装在主机操作系统上，如Windows、Linux或macOS。
- en: It can be installed directly on top of hardware in order to function as the
    native operating system.
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它可以直接安装在硬件顶部以作为本机操作系统运行。
- en: A **host operating system** refers to the operating system that is installed
    directly on a device, such as a desktop or a laptop computer running Windows 10\.
    A **guest operating system** is an operating system that is installed within a
    hypervisor (considered to be virtualized).
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '**主机操作系统**是指直接安装在设备上的操作系统，比如运行Windows 10的台式机或笔记本电脑。**客户操作系统**是安装在虚拟化管理程序中的操作系统（被视为虚拟化）。'
- en: 'Listed here are the types of hypervisors available:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是可用的虚拟化管理程序类型：
- en: Type 1
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类型1
- en: Type 2
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 类型2
- en: In the next two sections, we will look at the two types of hypervisors and understand
    their similarities and differences.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的两节中，我们将看看两种类型的虚拟化管理程序，并了解它们的相似之处和不同之处。
- en: Type 1 hypervisor
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 类型1虚拟化管理程序
- en: A type 1 hypervisor is sometimes referred to as a **bare-metal hypervisor**
    as it is typically deployed directly onto the hardware of the physical server.
    In this model, any operating system that is installed on the hypervisor has direct
    access to the hardware resources, such as the CPU, RAM, and **Network Interface
    Card** (**NIC**). This model allows each guest operating system to interact directly
    with any hardware component available on the physical device; therefore, rendering
    the deployment model more efficient than the type 2 model.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 类型1虚拟化管理程序有时被称为**裸金属虚拟化管理程序**，因为它通常直接部署到物理服务器的硬件上。在这种模型中，安装在虚拟化管理程序上的任何操作系统都可以直接访问硬件资源，如CPU、RAM和**网络接口卡**（**NIC**）。这种模型允许每个客户操作系统直接与物理设备上的任何硬件组件交互；因此，使部署模型比类型2模型更有效。
- en: 'The following diagram illustrates how each guest operating system (virtual
    machine) interacts with the physical hardware components of a single physical
    server chassis through the hypervisor. For example, virtual machines have direct
    access to the physical hardware through the hypervisor:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表说明了每个客户操作系统（虚拟机）如何通过虚拟化管理程序与单个物理服务器机箱的物理硬件组件进行交互。例如，虚拟机通过虚拟化管理程序直接访问物理硬件：
- en: '![](img/a975ed87-2cfe-410b-b05d-a03b85ca8fb6.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a975ed87-2cfe-410b-b05d-a03b85ca8fb6.png)'
- en: 'The following is a list of both free and commercial type 1 hypervisors:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是免费和商业类型1虚拟化管理程序的列表：
- en: VMware ESXi (free)
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware ESXi（免费）
- en: VMware ESX (commercial)
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware ESX（商业）
- en: Microsoft Hyper-V Server (free)
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Hyper-V Server（免费）
- en: XCP-ng (free/commercial)
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: XCP-ng（免费/商业）
- en: Now you have a better understanding of the type 1 hypervisor, let's learn about
    the type 2 hypervisor.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你对类型1的虚拟化管理程序有了更好的理解，让我们来了解一下类型2的虚拟化管理程序。
- en: Type 2 hypervisor
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 类型2虚拟化管理程序
- en: In a type 2 hypervisor deployment model, the hypervisor application is installed
    on top of a host operating system rather than on the hardware components directly.
    Examples of host operating systems include Microsoft Windows, the Apple macOS,
    and various flavors of Linux. The hypervisor does not have direct access to the
    hardware resources on the local system, as it would in the type 1 deployment model.
    Instead, the hypervisor in a type 2 deployment interfaces with the host operating
    system to access whatever resources are available. The host operating system usually
    requires a certain amount of resources, such as CPU and RAM utilization, in order
    to function optimally, and the remainder is then provided to the type 2 hypervisor
    for the guest virtual machines.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 在类型2的虚拟化管理程序部署模型中，虚拟化管理程序应用程序安装在主机操作系统之上，而不是直接安装在硬件组件上。主机操作系统的示例包括Microsoft
    Windows、Apple macOS和各种Linux版本。在类型2部署模型中，虚拟化管理程序无法直接访问本地系统上的硬件资源，就像在类型1部署模型中那样。相反，在类型2部署中，虚拟化管理程序与主机操作系统接口，以访问可用的任何资源。主机操作系统通常需要一定数量的资源，如CPU和内存利用率，以便能够以最佳方式运行，剩下的资源则提供给类型2虚拟机。
- en: 'The following is a diagram illustrating how each component interfaces with
    the other on a single system, such as a desktop or laptop computer. Looking closely,
    each virtual machine has indirect access to the resources (CPU, memory, and so
    on). The operating system will have priority when it comes to hardware resources,
    and what is left is then made available to the running virtual machines:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个图表，说明了每个组件在单个系统上（如台式机或笔记本电脑）如何与其他组件接口。仔细观察，每个虚拟机都间接访问资源（CPU、内存等）。操作系统在硬件资源方面具有优先权，剩下的资源则提供给正在运行的虚拟机：
- en: '![](img/3976ec0e-72c4-487a-bf9e-49d4b44cd72d.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3976ec0e-72c4-487a-bf9e-49d4b44cd72d.png)'
- en: 'The following is a brief list of type 2 hypervisors. Please note that some
    are free while others are commercial:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是类型2虚拟化管理程序的简要列表。请注意，有些是免费的，而有些是商业的：
- en: Microsoft Virtual PC (free)
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Microsoft Virtual PC（免费）
- en: Oracle VM VirtualBox (free)
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Oracle VM VirtualBox（免费）
- en: VMware Player (free)
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Player（免费）
- en: VMware Workstation Pro (commercial)
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Workstation Pro（商业）
- en: VMware Fusion (commercial)
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: VMware Fusion（商业）
- en: Parallels Desktop for Mac (commercial)
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Parallels Desktop for Mac（商业）
- en: You may be wondering which hypervisor is the better option—type 1 or type 2?
    Honestly, it really depends on your situation. Personally, I have a type 2 hypervisor
    installed on my laptop with a few virtual machines, which I use for training and
    other situations at remote locations. While at home, I have a type 1 hypervisor
    installed on an Intel NUC in my home lab, which has multiple virtual machines,
    each for a different purpose.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能想知道哪种虚拟化管理程序更好——类型1还是类型2？老实说，这真的取决于你的情况。就我个人而言，我在我的笔记本电脑上安装了一个类型2的虚拟化管理程序，里面有几台虚拟机，我用它们进行培训和在远程位置的其他情况。而在家里，我在我的家庭实验室的Intel
    NUC上安装了一个类型1的虚拟化管理程序，里面有多台虚拟机，每台都有不同的用途。
- en: Now that you have a better idea of the concepts of hypervisors, let's learn
    about the features of a hypervisor, as that will help us to build a virtual network
    for creating our penetration testing lab.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你对虚拟化管理程序的概念有了更好的了解，让我们来了解一下虚拟化管理程序的特性，因为这将帮助我们构建一个用于创建渗透测试实验室的虚拟网络。
- en: Additional components
  id: totrans-68
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 其他组件
- en: In this section, we outline the additional components needed to complete our
    lab, including looking at what virtual switches are and the different types of
    operating systems we are going to use in the lab.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，我们将概述完成我们的实验室所需的其他组件，包括查看虚拟交换机是什么以及我们将在实验室中使用的不同类型的操作系统。
- en: Virtual switches
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 虚拟交换机
- en: You may be wondering, since we are going to create a virtualized lab environment,
    how we are going to create a network to ensure that all the various virtual machines
    have connectivity with one another. Do we need some network cables, a network
    switch, or even other network appliances? Most importantly, we need to ensure
    that our virtual environment is isolated from the rest of our existing network
    and from the internet, as we do not want to be launching an inadvertent attack
    on a public server, as this would be illegal and entail legal complications.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能会想，既然我们要创建一个虚拟化实验室环境，我们要如何创建一个网络，以确保各种虚拟机之间具有连接性。我们需要一些网络电缆、网络交换机，甚至其他网络设备吗？最重要的是，我们需要确保我们的虚拟环境与我们现有网络和互联网隔离开来，因为我们不希望对公共服务器发动无意的攻击，这将是非法的并涉及法律问题。
- en: Fortunately for us, each hypervisor contains a virtual switch, which provides
    us with a basic layer 2 switching functionality. Some hypervisors provide **virtual
    LAN** (**VLAN**) assignments on their virtual switches, while others do not. Since
    we are proceeding to build an isolated virtual lab, we'll need a single virtual
    switch to connect our attacker machine with the other vulnerable machines.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 幸运的是，每个虚拟化管理程序都包含一个虚拟交换机，为我们提供基本的第二层交换功能。一些虚拟化管理程序在它们的虚拟交换机上提供虚拟局域网（VLAN）分配，而其他一些则没有。由于我们将继续构建一个隔离的虚拟实验室，我们将需要一个单独的虚拟交换机来将我们的攻击者机器与其他易受攻击的机器连接起来。
- en: Operating systems
  id: totrans-73
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 操作系统
- en: 'As a future ethical hacker, penetration tester, or cybersecurity professional,
    it''s recommended that you test various techniques to simulate real-world attacks
    on different types of operating systems. At times, when you are conducting a penetration
    test or performing a vulnerability assessment on an organization''s network and
    servers, you will encounter many different operating systems. We will be using
    the following operating systems in our lab environment, and I''ll provide a download
    link for each operating system:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 作为未来的道德黑客、渗透测试员或网络安全专业人员，建议您测试各种技术，模拟对不同类型操作系统的真实攻击。有时，在对组织的网络和服务器进行渗透测试或进行漏洞评估时，您会遇到许多不同的操作系统。我们将在实验室环境中使用以下操作系统，并为每个操作系统提供下载链接：
- en: '**Windows 10**: [https://www.microsoft.com/en-us/evalcenter/evaluate-windows-10-enterprise](https://www.microsoft.com/en-us/evalcenter/evaluate-windows-10-enterprise)'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows 10**：[https://www.microsoft.com/en-us/evalcenter/evaluate-windows-10-enterprise](https://www.microsoft.com/en-us/evalcenter/evaluate-windows-10-enterprise)'
- en: '**Windows Server 2016**: [https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2016](https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2016)'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Windows Server 2016**：[https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2016](https://www.microsoft.com/en-us/evalcenter/evaluate-windows-server-2016)'
- en: '**Ubuntu Server**: [https://www.ubuntu.com/download/server](https://www.ubuntu.com/download/server)'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Ubuntu Server**：[https://www.ubuntu.com/download/server](https://www.ubuntu.com/download/server)'
- en: '**Kali Linux**: [https://www.kali.org/downloads/](https://www.kali.org/downloads/)'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kali Linux**：[https://www.kali.org/downloads/](https://www.kali.org/downloads/)'
- en: '**Metasploitable**: [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)'
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Metasploitable**：[https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)'
- en: '**OWASPBWA**: [https://sourceforge.net/projects/owaspbwa/](https://sourceforge.net/projects/owaspbwa/)'
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OWASPBWA**：[https://sourceforge.net/projects/owaspbwa/](https://sourceforge.net/projects/owaspbwa/)'
- en: Each operating system listed here has a unique purpose in our lab. In the remainder
    of this chapter, we will execute various types of attacks on each.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 此处列出的每个操作系统在我们的实验室中都有独特的用途。在本章的其余部分，我们将对每个操作系统执行各种类型的攻击。
- en: The Microsoft Evaluation Center ([https://www.microsoft.com/en-us/evalcenter/](https://www.microsoft.com/en-us/evalcenter/))
    allows users to download and test drive any application and operating system available
    on their platform for a period of 180 days while providing full functional support
    for the application of your choice.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: Microsoft评估中心（[https://www.microsoft.com/en-us/evalcenter/](https://www.microsoft.com/en-us/evalcenter/)）允许用户下载和测试其平台上提供的任何应用程序和操作系统，为期180天，并为您选择的应用程序提供完整的功能支持。
- en: The **Open Web Application Security Project** (**OWASP**) ([https://www.owasp.org](https://www.owasp.org))
    has created a virtual machine that allows cybersecurity professionals to execute
    various applications with known vulnerabilities; this is the **OWASP Broken Web
    Applications** (**OWASPBWA**) virtual machine. Metasploitable is a vulnerable
    Linux-based virtual machine created by Rapid7 ([https://www.rapid7.com](https://www.rapid7.com)).
    Its objective is to help people learn about, and practice, penetration testing
    in a safe environment.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '**开放式Web应用安全项目**（**OWASP**）（[https://www.owasp.org](https://www.owasp.org)）创建了一个虚拟机，允许网络安全专业人员执行具有已知漏洞的各种应用程序；这就是**OWASP破损Web应用程序**（**OWASPBWA**）虚拟机。Metasploitable是由Rapid7创建的一个易受攻击的基于Linux的虚拟机（[https://www.rapid7.com](https://www.rapid7.com)）。它的目标是帮助人们在安全的环境中学习和实践渗透测试。'
- en: In this section, we covered the essentials of virtualization—including the core
    component, the hypervisor—and we are now ready to build virtual lab environments
    to support many operating systems and use cases. In the next section, we will
    be looking at putting all the pieces together and building our lab.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们介绍了虚拟化的基本知识，包括核心组件hypervisor，现在我们已经准备好构建虚拟实验室环境，支持许多操作系统和用例。在下一节中，我们将研究如何将所有组件放在一起，构建我们的实验室。
- en: Building our lab
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 建立我们的实验室
- en: Now it's time to assemble all the components and configure our own penetration
    testing lab. We'll need to decide what resources are currently available to us
    before choosing a type of hypervisor. If you currently have a single laptop or
    desktop computer, we'll be using a type 2 hypervisor, such as Oracle VM VirtualBox
    or VMware Workstation Pro. As mentioned previously, a type 2 hypervisor deployment
    will allow us to use our existing resources, such as a single laptop or desktop
    computer, to build our virtual lab environment, without being concerned about
    purchasing additional hardware components such as servers.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候组装所有组件并配置我们自己的渗透测试实验室了。在选择hypervisor类型之前，我们需要决定当前可用的资源。如果您目前只有一台笔记本电脑或台式电脑，我们将使用第2类型hypervisor，如Oracle
    VM VirtualBox或VMware Workstation Pro。如前所述，第2类型hypervisor部署将允许我们使用现有资源，如一台笔记本电脑或台式电脑，构建我们的虚拟实验室环境，而无需担心购买额外的硬件组件，如服务器。
- en: 'To begin installing our hypervisor, let''s download and install Oracle VM VirtualBox:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始安装我们的hypervisor，让我们下载并安装Oracle VM VirtualBox：
- en: 'Go to [www.virtualbox.org](http://www.virtualbox.org), then navigate to the
    Downloads section of the website, and choose your platform type based on your
    current operating system:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到[www.virtualbox.org](http://www.virtualbox.org)，然后转到网站的下载部分，并根据当前操作系统选择您的平台类型：
- en: '![](img/7dfede74-8f52-42c5-b0f7-c9594da818f3.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7dfede74-8f52-42c5-b0f7-c9594da818f3.png)'
- en: 'Once the application has been downloaded, it''s time to install it. Be sure
    to use the default configurations presented during the installation wizard. Once
    completed, open VirtualBox to ensure that the installation was successful. You
    should be presented with something similar to the following screenshot:'
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 应用程序下载完成后，是时候安装它了。确保在安装向导期间使用默认配置。安装完成后，打开VirtualBox以确保安装成功。您应该看到类似以下截图的内容：
- en: '![](img/440f5bc3-85d4-4205-ab1a-067f2cd89c9f.png)'
  id: totrans-91
  prefs: []
  type: TYPE_IMG
  zh: '![](img/440f5bc3-85d4-4205-ab1a-067f2cd89c9f.png)'
- en: 'Optionally, if you prefer using VMware Workstation for your lab, it is currently
    available at [https://www.vmware.com/products/workstation-pro.html](https://www.vmware.com/products/workstation-pro.html).
    Once downloaded, proceed to install the application using the default configuration
    during the installation process. Once completed, you should be presented with
    the user interface, as shown in the following screenshot:'
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您更喜欢使用VMware Workstation进行实验，您可以在[https://www.vmware.com/products/workstation-pro.html](https://www.vmware.com/products/workstation-pro.html)上找到它。下载后，按照安装过程中的默认配置安装应用程序。完成后，您将看到用户界面，如下截图所示：
- en: '![](img/1579471e-2011-4254-9a6a-8fa197a34762.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1579471e-2011-4254-9a6a-8fa197a34762.png)'
- en: If you are using an older version of Oracle VM VirtualBox or VMware Workstation,
    you do not need to upgrade, as the previous editions already contain the features
    required to continue configuring our lab.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是较旧版本的Oracle VM VirtualBox或VMware Workstation，则无需升级，因为先前的版本已经包含了继续配置我们实验室所需的功能。
- en: One of the most important things about designing a proper penetration testing
    lab is ensuring that we have the optimal network design for interconnecting our
    virtual machines. In the next section, we will cover in detail how to create a
    virtual network using both Oracle VM VirtualBox and VMware Workstation Pro.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 设计适当的渗透测试实验室最重要的一点是确保我们有最佳的网络设计来互连我们的虚拟机。在接下来的部分中，我们将详细介绍如何使用Oracle VM VirtualBox和VMware
    Workstation Pro创建虚拟网络。
- en: Creating a virtual network
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建虚拟网络
- en: 'The following diagram shows the general network topology we are going to use
    in our virtual lab environment:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表显示了我们将在虚拟实验室环境中使用的一般网络拓扑结构：
- en: '![](img/a30fc364-0ddf-4ce5-9c17-ea54dcec265d.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a30fc364-0ddf-4ce5-9c17-ea54dcec265d.png)'
- en: In the upcoming section, we will assign an appropriate IP address to each virtual
    machine within our lab. Each virtual machine is interconnected using a virtual
    switch within the hypervisor. Routers are not required, as this is just a simple
    lab design.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的部分中，我们将为实验室中的每台虚拟机分配适当的IP地址。每台虚拟机使用虚拟机监控程序内的虚拟交换机进行互连。路由器不是必需的，因为这只是一个简单的实验室设计。
- en: A Windows Server 2008 machine is optional and is not required.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: Windows Server 2008机器是可选的，不是必需的。
- en: 'Let''s see how to build a virtual network:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们看看如何构建虚拟网络：
- en: 'If you''re using VirtualBox, click on the menu icon on the right-hand side
    of Tools | Network:'
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您使用的是VirtualBox，请单击右侧的菜单图标，然后单击“工具”|“网络”：
- en: '![](img/441a68a2-3a76-44d3-af55-28d7c9391afb.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![](img/441a68a2-3a76-44d3-af55-28d7c9391afb.png)'
- en: A new window will open, giving you the option to Create, Remove, or modify the
    properties of a virtual network adapter. In this exercise, we are going to create
    a new virtual adapter, which will be used to connect each of our virtual machines
    within the hypervisor. This accomplishes the effect of a virtual switch.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 将打开一个新窗口，让您选择创建、删除或修改虚拟网络适配器的属性。在本练习中，我们将创建一个新的虚拟适配器，用于连接我们的每台虚拟机在虚拟机监控程序中。这实现了虚拟交换机的效果。
- en: 'Click on Create to add a new virtual adapter:'
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击“创建”以添加新的虚拟适配器：
- en: '![](img/7b45f672-73bf-4783-aa89-384ed85ce319.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7b45f672-73bf-4783-aa89-384ed85ce319.png)'
- en: Your host operating system will take a few minutes to create the new virtual
    network adapter on your computer.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 您的主机操作系统将花费几分钟的时间在计算机上创建新的虚拟网络适配器。
- en: Once the virtual network adapter has been created, the network manager component
    within VirtualBox will automatically assign an IP address to the interface. However,
    we are going to configure the IP addressing scheme as per our preferences. To
    begin, simply select the virtual network adapter, and then click on Properties
    to modify the configurations.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建虚拟网络适配器后，VirtualBox中的网络管理器组件将自动为接口分配IP地址。但是，我们将根据自己的偏好配置IP地址方案。首先，只需选择虚拟网络适配器，然后单击“属性”以修改配置。
- en: 'Ensure that you choose the option to configure the adapter manually, using
    the IP address and subnet mask shown in the following screenshot. Click Apply
    to register the configurations on the network adapter:'
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保选择手动配置适配器的选项，使用以下截图中显示的IP地址和子网掩码。单击“应用”以在网络适配器上注册配置：
- en: '![](img/d52e26e4-6750-4589-bfa1-a28309a5c367.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d52e26e4-6750-4589-bfa1-a28309a5c367.png)'
- en: 'Optionally, we can configure the **Dynamic Host Configuration Protocol** (**DHCP**)
    server on the virtual network adapter to provide a range of IP addresses to each
    virtual machine that is connected to this virtual network. If you would like to
    enable the DHCP service, please use the following configurations:'
  id: totrans-111
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 可选地，我们可以在虚拟网络适配器上配置动态主机配置协议（DHCP）服务器，以为连接到此虚拟网络的每台虚拟机提供一系列IP地址。如果您想启用DHCP服务，请使用以下配置：
- en: '![](img/f59b1002-9d54-4640-b227-29b0d2765d4b.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f59b1002-9d54-4640-b227-29b0d2765d4b.png)'
- en: 'For those of you who prefer VMware Workstation, we''ve got you covered. Configuring
    a virtual network within VMware Workstation is quite simple. Open the VMware Workstation
    application and select Edit | Virtual Network Editor..., as shown in the following
    screenshot:'
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对于那些更喜欢VMware Workstation的人，我们也为您提供了支持。在VMware Workstation中配置虚拟网络非常简单。打开VMware
    Workstation应用程序，然后选择“编辑”|“虚拟网络编辑器...”，如下截图所示：
- en: '![](img/6d9918e4-9c9b-404a-969a-d3d99f47caf9.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6d9918e4-9c9b-404a-969a-d3d99f47caf9.png)'
- en: 'The **User Access Control** (**UAC**) on Windows will prompt you for administrator
    privileges. Upon providing the authorization, the Virtual Network Editor window
    will open. As you can see, there are three virtual network adapters present:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Windows上的用户访问控制（UAC）将提示您获取管理员权限。在提供授权后，虚拟网络编辑器窗口将打开。如您所见，有三个虚拟网络适配器：
- en: '![](img/f15186bf-eedb-4607-a94d-8821fabc0e3e.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f15186bf-eedb-4607-a94d-8821fabc0e3e.png)'
- en: We are going to modify the VMnet1 virtual adapter. The host-only adapter creates
    a virtual network for all connected virtual machines and the host computer. This
    type of configuration allows all virtual machines to communicate seamlessly while
    isolated and in the absence of an internet connection.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将修改VMnet1虚拟适配器。主机专用适配器为所有连接的虚拟机和主机计算机创建了一个虚拟网络。这种类型的配置允许所有虚拟机在没有互联网连接的情况下无缝通信。
- en: 'To modify the VMnet1 adapter, select the adapter and adjust your configurations,
    as shown in the following screenshot:'
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要修改VMnet1适配器，请选择适配器并调整配置，如下面的屏幕截图所示：
- en: '![](img/a2c3a179-8e14-4fdf-b13c-c950113b660e.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a2c3a179-8e14-4fdf-b13c-c950113b660e.png)'
- en: These configurations replicate those executed previously within Oracle VM VirtualBox.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 这些配置复制了先前在Oracle VM VirtualBox中执行的配置。
- en: Now that we have the knowledge required to build our virtual network using both
    Oracle VM VirtualBox and VMware Workstation Pro, let's begin installing virtual
    machines and setting up Kali Linux in our lab.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经掌握了使用Oracle VM VirtualBox和VMware Workstation Pro构建虚拟网络所需的知识，让我们开始在实验室中安装虚拟机并设置Kali
    Linux。
- en: Setting up Kali Linux
  id: totrans-122
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Kali Linux
- en: 'Let''s set up our first virtual machine, our attacker machine, Kali Linux.
    The Kali Linux operating system is a Debian-based Linux platform consisting of
    over 300 tools for both penetration testing and forensics. It''s one of the most
    popular platforms used by penetration testers as it contains many features and
    considerable functionality, such as the following:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们设置我们的第一个虚拟机，我们的攻击者机器，Kali Linux。Kali Linux操作系统是基于Debian的Linux平台，包含300多种用于渗透测试和取证的工具。它是渗透测试人员使用最广泛的平台之一，因为它包含许多功能和相当的功能，例如以下内容：
- en: Full-disk encryption
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全盘加密
- en: Support for **Linux Unified Key Setup** (**LUKS**) encryption with emergency
    self-destruction (Nuke)
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 支持具有紧急自毁（Nuke）功能的**Linux统一密钥设置**（**LUKS**）加密
- en: Accessibility features
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 辅助功能
- en: Forensics mode
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 取证模式
- en: Live USB with multiple persistence
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 带有多个持久性的Live USB
- en: To get started, Kali Linux can be found at the official website ([www.kali.org](http://www.kali.org))
    and at the Offensive Security domain ([https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/)).
    There are many methods when it comes to setting up Kali Linux, such as installing
    from an ISO file and importing a virtual preconfigured image into a hypervisor.
    For our setup procedure, we are going to use the latter approach. Importing the
    virtual appliance is seamless and takes very little time; it also avoids the chances
    of misconfiguration that come with installation using an ISO file.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用Kali Linux，可以在官方网站([www.kali.org](http://www.kali.org))和Offensive Security域([https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/))上找到。在设置Kali
    Linux时有许多方法，例如从ISO文件安装和导入预配置的虚拟映像到虚拟化程序。对于我们的设置过程，我们将使用后一种方法。导入虚拟设备是无缝的，需要很少的时间；它还避免了使用ISO文件安装时出现的错误配置的可能性。
- en: 'In my personal experience, setting up Kali Linux using the preconfigured virtual
    image also works more efficiently in most situations. To get started, we can take
    the following steps:'
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 根据我的个人经验，使用预配置的虚拟映像设置Kali Linux在大多数情况下也更有效。要开始，我们可以采取以下步骤：
- en: 'Navigate to [https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/)
    and download either the 32-bit or 64-bit Kali Linux VMware image, based on your
    operating system architecture. Choose either the VMware or the VirtualBox image,
    based on the vendor of your hypervisor software:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到[https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/](https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/)，根据您的操作系统架构下载32位或64位的Kali
    Linux VMware映像。根据您的虚拟化程序软件的供应商选择VMware或VirtualBox映像：
- en: '![](img/4fce2d67-efca-4c58-9790-9a7160cf2f92.png)'
  id: totrans-132
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4fce2d67-efca-4c58-9790-9a7160cf2f92.png)'
- en: 'Whether you''ve downloaded the VirtualBox or VMware image, ensure that you
    unzip the contents. If you''ve downloaded the VirtualBox image, within the folder
    there will be a file with a similar naming convention, as shown in the following
    screenshot:'
  id: totrans-133
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 无论您下载了VirtualBox还是VMware映像，请确保解压内容。如果您下载了VirtualBox映像，在文件夹中将会有一个类似命名约定的文件，如下面的屏幕截图所示：
- en: '![](img/f2a47a81-80aa-433a-a21d-3eb3c7f6f393.png)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f2a47a81-80aa-433a-a21d-3eb3c7f6f393.png)'
- en: 'You can right-click on File and choose Open with | VirtualBox Manager:'
  id: totrans-135
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以右键单击文件，然后选择“打开方式”| VirtualBox Manager：
- en: '![](img/034daf01-e49e-4d2f-8dff-5f7e7c02591a.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](img/034daf01-e49e-4d2f-8dff-5f7e7c02591a.png)'
- en: 'Next, the **Import Virtual Appliance** wizard will appear. Simply click on
    Import. The importing process will take a few minutes to complete:'
  id: totrans-137
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**导入虚拟设备**向导将出现。只需单击导入。导入过程将需要几分钟才能完成：
- en: '![](img/5577fb02-c687-4f72-bae1-35db653fed03.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5577fb02-c687-4f72-bae1-35db653fed03.png)'
- en: 'Once the importing process is complete, you''ll see your new virtual machine
    available on the VirtualBox dashboard:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 导入过程完成后，您将在VirtualBox仪表板上看到新的虚拟机可用：
- en: '![](img/d9d782b0-c874-4aed-a597-d48bd893fd8b.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d9d782b0-c874-4aed-a597-d48bd893fd8b.png)'
- en: 'Import Kali Linux into VMware Workstation. Ensure that you''ve downloaded and
    unzipped the virtual image folder. The following are the contents of the extracted
    folder. Right-click on the highlighted file shown in the following screenshot,
    and choose Open with | VMware Workstation:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将Kali Linux导入VMware Workstation。确保您已经下载并解压了虚拟映像文件夹。以下是提取文件夹的内容。右键单击下面屏幕截图中显示的突出显示的文件，然后选择“打开方式”|
    VMware Workstation：
- en: '![](img/0291999b-06ff-4139-848f-3ecb7ec08246.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0291999b-06ff-4139-848f-3ecb7ec08246.png)'
- en: 'VMware Workstation will then open, providing the Import Virtual Machine window.
    Click on Import:'
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: VMware Workstation将打开，提供导入虚拟机窗口。单击导入：
- en: '![](img/5ebd2e79-0f7b-4145-8c02-27018ac1a4a7.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5ebd2e79-0f7b-4145-8c02-27018ac1a4a7.png)'
- en: 'This process should take a few minutes to complete. Once complete, the new
    virtual machine will be available in your library on VMware Workstation:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 这个过程应该需要几分钟的时间来完成。完成后，新的虚拟机将在VMware Workstation的库中可用：
- en: '![](img/e7451c83-6dce-4560-932a-712d53a4f87c.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7451c83-6dce-4560-932a-712d53a4f87c.png)'
- en: The benefit of importing a virtual image over manually installing an operating
    system using an ISO image is that all the configuration is done automatically.
    Configuration would include creating a virtual hard drive for storage and the
    assignment of resources, such as a processor, RAM, and NIC. Importing a virtual
    image eliminates the chances of any misconfigurations during the installation
    phase. Once the importing phase is complete, the user can subsequently make adjustments
    to the individual virtual machine, such as increasing or reducing the resources
    per virtual machine.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 导入虚拟镜像的好处是自动完成所有配置，而不是手动使用ISO镜像安装操作系统。配置将包括为存储创建虚拟硬盘以及分配资源，如处理器、RAM和NIC。导入虚拟镜像消除了在安装阶段发生任何错误配置的可能性。导入阶段完成后，用户随后可以对各个虚拟机进行调整，例如增加或减少每个虚拟机的资源。
- en: Attaching the virtual network to a virtual machine
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将虚拟网络连接到虚拟机
- en: At this point, we have created our virtual network adapter and imported Kali
    Linux into our hypervisor. It's now time to attach our attacker machine, Kali
    Linux, to our virtual network (virtual switch).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，我们已经创建了我们的虚拟网络适配器，并将Kali Linux导入到我们的hypervisor中。现在是时候将我们的攻击者机器Kali Linux连接到我们的虚拟网络（虚拟交换机）。
- en: 'Firstly, I''ll guide you through the steps to configuring the hardware resources
    through Oracle VM VirtualBox:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我将指导您通过Oracle VM VirtualBox配置硬件资源的步骤：
- en: 'Select the Kali Linux virtual machine and click on Settings:'
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择Kali Linux虚拟机，然后点击设置：
- en: '![](img/071ef45e-7506-438b-82ef-1c73a8841ef5.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](img/071ef45e-7506-438b-82ef-1c73a8841ef5.png)'
- en: 'Once the settings window has opened, select the Network option. Here, you''ll
    be able to enable/disable network adapters on the current virtual machine. Select
    the Host-only Adapter option, and the virtual network adapter will be automatically
    selected underneath:'
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦设置窗口打开，选择网络选项。在这里，您可以启用/禁用当前虚拟机上的网络适配器。选择仅主机适配器选项，虚拟网络适配器将自动选择在下面：
- en: '![](img/a476e3b9-a38a-4222-b16c-afe3f76c2777.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a476e3b9-a38a-4222-b16c-afe3f76c2777.png)'
- en: 'Next, we are going to make the same adjustments on VMware Workstation. Firstly,
    click on Edit virtual machine settings on the Kali Linux virtual machine:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，我们将在VMware Workstation上进行相同的调整。首先，在Kali Linux虚拟机上点击编辑虚拟机设置：
- en: '![](img/1fb9fb58-0907-48d2-b7da-7498a0fd26df.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1fb9fb58-0907-48d2-b7da-7498a0fd26df.png)'
- en: The Virtual Machine Settings window will open. Here, you can customize the settings
    on any hardware component within the hypervisor menu.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 虚拟机设置窗口将打开。在这里，您可以自定义hypervisor菜单中的任何硬件组件的设置。
- en: 'Select Network Adapter, and then choose Custom: Specific virtual network |
    VMnet1 (Host-only):'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择网络适配器，然后选择自定义：特定虚拟网络| VMnet1（仅主机）：
- en: '![](img/0a161fdf-5df6-438e-bf9f-b611315fd184.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0a161fdf-5df6-438e-bf9f-b611315fd184.png)'
- en: Remember that the VMnet1 adapter has our custom IP scheme.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，VMnet1适配器具有我们的自定义IP方案。
- en: We can power on our Kali Linux virtual machine to ensure that it is working
    properly. The default username/password for Kali Linux is `root`/`toor`.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们可以启动Kali Linux虚拟机，以确保它正常工作。Kali Linux的默认用户名/密码是`root`/`toor`。
- en: 'Once you''ve successfully logged in, you''ll have access to the desktop:'
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您成功登录，您将可以访问桌面：
- en: '![](img/333fcc43-362c-42a2-8d58-f15216c94cd1.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/333fcc43-362c-42a2-8d58-f15216c94cd1.png)'
- en: Now we have a clear understanding of how to set up a virtual machine within
    Oracle VM VirtualBox and VMware Workstation, and how to configure a virtual network
    within each hypervisor application. Let's move on to setting up additional applications
    and other types of virtual machines within our lab.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们清楚地了解了如何在Oracle VM VirtualBox和VMware Workstation中设置虚拟机，以及如何在每个hypervisor应用程序中配置虚拟网络。让我们继续设置实验室中的其他类型的应用程序和虚拟机。
- en: Installing Nessus
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Nessus
- en: When you get into the field of penetration testing and vulnerability assessment,
    one tool you must be familiar with using is **Nessus**. Nessus is one of the most
    popular vulnerability assessment tools available on the market. The Nessus application
    is controlled using a web interface that allows its users to create customized
    scans. Additionally, Nessus contains prebuilt scanning templates for various types
    of industries, such as the **Payment Card Industry** (**PCI**) compliance scanner.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 当您进入渗透测试和漏洞评估领域时，您必须熟悉使用的一个工具是Nessus。Nessus是市场上最流行的漏洞评估工具之一。Nessus应用程序使用Web界面进行控制，允许用户创建自定义扫描。此外，Nessus包含各种行业的预构建扫描模板，例如**支付卡行业**（PCI）合规性扫描仪。
- en: Tenable, the creator of Nessus, has indicated that Nessus is capable of detecting
    over 47,000 **common vulnerabilities and exposures** (**CVE**). As a future ethical
    hacker/penetration tester, using Nessus during your security auditing phase will
    aid you significantly in discovering security vulnerabilities quickly.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus的创建者Tenable表示，Nessus能够检测超过47,000个常见漏洞和暴露（CVE）。作为未来的道德黑客/渗透测试人员，在安全审计阶段使用Nessus将帮助您快速发现安全漏洞。
- en: 'Nessus is supported on many platforms, such as Windows and Kali Linux. The
    **Nessus Home** edition is free for personal use, and is capable of scanning up
    to 16 IP addresses per scan. To get the Nessus Home edition, simply go to [https://www.tenable.com/products/nessus-home](https://www.tenable.com/products/nessus-home)
    and complete the registration form in order to obtain an activation license. After
    registration, you''ll be redirected to the download center, where you can choose
    a suitable version for your platform:'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: Nessus 受到许多平台的支持，如 Windows 和 Kali Linux。**Nessus Home** 版本可供个人免费使用，并且能够在每次扫描中扫描多达
    16 个 IP 地址。要获取 Nessus Home 版本，只需转到 [https://www.tenable.com/products/nessus-home](https://www.tenable.com/products/nessus-home)
    并填写注册表格以获取激活许可证。注册后，您将被重定向到下载中心，在那里您可以为您的平台选择合适的版本：
- en: '![](img/484d38d9-45a0-4260-a68b-95012d35a646.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/484d38d9-45a0-4260-a68b-95012d35a646.png)'
- en: If you're installing Nessus on a Windows operating system, the procedure is
    quite simple. Download the Windows executable file, and run it.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在 Windows 操作系统上安装 Nessus，则该过程非常简单。下载 Windows 可执行文件并运行它。
- en: 'However, to install Nessus on Kali Linux, follow these steps:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，要在 Kali Linux 上安装 Nessus，请按照以下步骤进行：
- en: 'Open Terminal and run the following commands to upgrade all currently installed
    applications on the platform:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开终端并运行以下命令，以升级平台上当前安装的所有应用程序：
- en: '[PRE0]'
  id: totrans-173
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Obtain an activation code from Tenable by completing the registration form at
    [https://www.tenable.com/products/nessus/nessus-essentials](https://www.tenable.com/products/nessus/nessus-essentials)[.](https://www.tenable.com/products/nessus/nessus-essentials)
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在 [https://www.tenable.com/products/nessus/nessus-essentials](https://www.tenable.com/products/nessus/nessus-essentials)
    完成注册表格，从 Tenable 获取激活代码。
- en: 'Navigate to the Nessus Downloads page at [https://www.tenable.com/downloads/nessus](https://www.tenable.com/downloads/nessus)
    and download either the 32-bit or the 64-bit version, based on your operating
    system architecture:'
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到 [https://www.tenable.com/downloads/nessus](https://www.tenable.com/downloads/nessus)
    的 Nessus 下载页面，并根据您的操作系统架构下载 32 位或 64 位版本：
- en: '![](img/cb5164ef-2eaa-45d8-8cfb-2ea500f43c1b.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb5164ef-2eaa-45d8-8cfb-2ea500f43c1b.png)'
- en: 'Once Nessus has been downloaded on Kali Linux, open Terminal, change the directory
    to the `Downloads` folder, and begin installation using the following command:'
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 Nessus 在 Kali Linux 上被下载，打开终端，将目录更改为 `Downloads` 文件夹，并使用以下命令开始安装：
- en: '[PRE1]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The output of running the preceding command is as follows:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 运行上述命令的输出如下：
- en: '![](img/7211af98-3be5-4c1e-a901-2e42ea844f6a.png)'
  id: totrans-180
  prefs: []
  type: TYPE_IMG
  zh: '![](img/7211af98-3be5-4c1e-a901-2e42ea844f6a.png)'
- en: 'Once the installation is complete, use the following command to start the Nessus
    service on Kali Linux:'
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装完成后，使用以下命令在 Kali Linux 上启动 Nessus 服务：
- en: '[PRE2]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Optionally, if you would like the Nessus service to start automatically during
    the Kali Linux boot process, the following command can be used to enable this
    feature:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望 Nessus 服务在 Kali Linux 启动过程中自动启动，可以使用以下命令启用此功能：
- en: '[PRE3]'
  id: totrans-184
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Once the installation has been completed on Kali Linux, enter `https://localhost:8834/`
    into your web browser. At this point, you''ll be prompted to create a user account:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦在 Kali Linux 上完成安装，输入 `https://localhost:8834/` 到您的网络浏览器。此时，您将被提示创建用户帐户：
- en: '![](img/aa5898fc-715d-4eb0-8a84-4975080a242b.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aa5898fc-715d-4eb0-8a84-4975080a242b.png)'
- en: 'Next, you''ll be prompted to enter your Nessus license to activate the product.
    You''ll need the activation code from *step 2* to complete this stage:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，您将被提示输入您的 Nessus 许可证以激活产品。您需要来自 *步骤 2* 的激活代码来完成此阶段：
- en: '![](img/b618d846-80cf-439f-9319-10abbdb829fa.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b618d846-80cf-439f-9319-10abbdb829fa.png)'
- en: 'After completing the activation phase, Nessus will attempt to connect to the
    internet to download additional resources. This process should take a few minutes
    to complete:'
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 完成激活阶段后，Nessus 将尝试连接到互联网以下载其他资源。此过程应该需要几分钟来完成：
- en: '![](img/ef680084-5db7-4edb-a89d-a52ec4ce3498.png)'
  id: totrans-190
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ef680084-5db7-4edb-a89d-a52ec4ce3498.png)'
- en: 'Once you''re logged in, your user dashboard will be available. Here, you can
    create new scans and templates and modify existing resources as per your preferences:'
  id: totrans-191
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦您登录，您的用户仪表板将可用。在这里，您可以根据自己的喜好创建新的扫描和模板，并修改现有资源：
- en: '![](img/12df5508-3901-461a-84c4-e619b7aeb42e.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](img/12df5508-3901-461a-84c4-e619b7aeb42e.png)'
- en: During the course of this book, we'll be exploring the capabilities of Nessus
    during our penetration testing phases.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书的过程中，我们将在渗透测试阶段探索 Nessus 的功能。
- en: Having completed this section, you are now able to install and set up the Nessus
    vulnerability scanner on Kali Linux. In the next section, you will learn how to
    install Android as a virtual machine within your lab environment.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节后，您现在可以在 Kali Linux 上安装和设置 Nessus 漏洞扫描器。在下一节中，您将学习如何在实验室环境中安装 Android 作为虚拟机。
- en: Setting up Android emulators
  id: totrans-195
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置 Android 模拟器
- en: Being a penetration tester and/or ethical hacker, you'll encounter a lot of
    different types of targets and operating systems in the field. One type of operating
    system that has made its way into the field of cybersecurity is the mobile platform
    Android. In this section, we will discover how to set up the Android operating
    system version 4.4 as a virtual machine that will be part of your penetration
    testing lab environment.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 作为渗透测试人员和/或道德黑客，您将在现场遇到许多不同类型的目标和操作系统。已经进入网络安全领域的一种操作系统是移动平台 Android。在本节中，我们将发现如何将
    Android 操作系统版本 4.4 设置为虚拟机，以成为您渗透测试实验室环境的一部分。
- en: Note that [www.osboxes.org](http://www.osboxes.org) has a repository of virtual
    images of almost every type of operating system, including desktop, server, and
    even mobile operating systems. This website allows you to download a virtual image
    of your choice and simply load it seamlessly into a hypervisor, such as Oracle
    VM VirtualBox or VMware Workstation.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，[www.osboxes.org](http://www.osboxes.org) 拥有几乎每种类型操作系统的虚拟镜像仓库，包括桌面、服务器甚至移动操作系统。该网站允许您下载您选择的虚拟镜像，并将其无缝加载到诸如
    Oracle VM VirtualBox 或 VMware Workstation 等虚拟化软件中。
- en: 'Let''s learn how to create a virtual Android machine within your penetration
    testing lab:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们学习如何在您的渗透测试实验室中创建一个虚拟的Android机器：
- en: Firstly, go to [https://www.osboxes.org/android-x86/](https://www.osboxes.org/android-x86/)
    to download the Android mobile operating system for your lab.
  id: totrans-199
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，转到[https://www.osboxes.org/android-x86/](https://www.osboxes.org/android-x86/)下载实验室的Android移动操作系统。
- en: 'Search for the Android-x86 4.4-r4 version and download either the VirtualBox
    or the VMware virtual image for your hypervisor:'
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索Android-x86 4.4-r4版本，并下载适用于您的虚拟机管理程序的VirtualBox或VMware虚拟镜像：
- en: '![](img/a5e5d6eb-7f69-479e-a2b6-ec85611fec82.png)'
  id: totrans-201
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a5e5d6eb-7f69-479e-a2b6-ec85611fec82.png)'
- en: Once the file has been downloaded onto your desktop computer, extract the zipped
    folder to view the contents.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 文件下载到您的台式电脑后，解压缩文件夹以查看内容。
- en: 'Next, right-click on the `.ovf` file and choose the Open with option, then
    select the VMware or VirtualBox options, as shown in the following screenshot:'
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，右键单击`.ovf`文件，选择打开方式，然后选择VMware或VirtualBox选项，如下截图所示：
- en: '![](img/af785a1a-ad64-43a9-97cb-166d8ff92360.png)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![](img/af785a1a-ad64-43a9-97cb-166d8ff92360.png)'
- en: 'The import wizard will appear. Select Import to begin the process:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入向导将出现。选择导入开始过程：
- en: '![](img/d4bd2e82-30df-4dce-b666-c6e7c6e54d3e.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d4bd2e82-30df-4dce-b666-c6e7c6e54d3e.png)'
- en: The importing process takes a few minutes to complete and the new Android virtual
    machine will appear in your hypervisor library.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 导入过程需要几分钟时间完成，新的Android虚拟机将出现在您的虚拟机库中。
- en: 'I have chosen to use the following configuration on my Android virtual machine.
    However, you have the option to either increase or decrease the resources on your
    virtual machine as you see fit. Ensure that the virtual network adapter is assigned
    to Custom (VMnet1), as shown in the following screenshot:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我选择在我的Android虚拟机上使用以下配置。但是，您可以根据需要增加或减少虚拟机上的资源。确保虚拟网络适配器分配给Custom（VMnet1），如下截图所示：
- en: '![](img/68846193-dd69-4f5c-b7b3-4f3b69a20ae9.png)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![](img/68846193-dd69-4f5c-b7b3-4f3b69a20ae9.png)'
- en: After booting your Android virtual machine, you'll be presented with an interface
    once it's fully loaded. The full functionality of Android 4.4 is available within
    your virtual machine.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动您的Android虚拟机后，一旦完全加载完成，您将看到一个界面。 Android 4.4的全部功能在您的虚拟机中都可以使用。
- en: Once the Android virtual machine is powered on, it acts as a real, physical
    Android device on your lab network. This simulates an environment that not only
    has typical operating systems, such as Windows and Linux, but also mobile platforms,
    such as Android. Now that you have a virtual Android machine within your lab,
    let's take a look at setting up a vulnerable Linux-based virtual machine in the
    next section.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦Android虚拟机启动，它将在您的实验室网络中充当真实的物理Android设备。这模拟了一个环境，不仅具有典型的操作系统，如Windows和Linux，还有移动平台，如Android。现在您在实验室中有了一个虚拟的Android机器，让我们在下一节中看看如何设置一个易受攻击的基于Linux的虚拟机。
- en: Installing Metasploitable 2
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装Metasploitable 2
- en: 'As mentioned previously, the Metasploitable virtual machine was created by
    the team at Rapid7 ([www.rapid7.com](http://www.rapid7.com)) for the purpose of
    cybersecurity awareness and training. In this section, I''ll walk you through
    the steps involved in setting up a Metasploitable virtual machine in your lab:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，Metasploitable虚拟机是由Rapid7团队（[www.rapid7.com](http://www.rapid7.com)）创建的，目的是进行网络安全意识和培训。在本节中，我将带您了解在实验室中设置Metasploitable虚拟机所涉及的步骤：
- en: Firstly, you need to download the virtual image file from [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/).
    Once downloaded to your computer, extract the ZIP folder to view the contents.
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，您需要从[https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)下载虚拟镜像文件。下载到计算机后，解压缩ZIP文件以查看内容。
- en: 'Next, right-click on the following highlighted file, and either choose the
    option to import or open with a hypervisor of your choice:'
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，右键单击以下突出显示的文件，然后选择导入或使用您选择的虚拟机管理程序打开：
- en: '![](img/4d18d025-72a8-4b60-9734-855b775b22a3.png)'
  id: totrans-216
  prefs: []
  type: TYPE_IMG
  zh: '![](img/4d18d025-72a8-4b60-9734-855b775b22a3.png)'
- en: 'Once the importing process has finished, the new virtual machine will appear
    in your library in the hypervisor (VirtualBox or VMware). Ensure that the network
    adapter is set to Custom (VMnet1), just like the virtual network for our lab is:'
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入过程完成后，新的虚拟机将出现在您的虚拟机库中（VirtualBox或VMware）。确保网络适配器设置为Custom（VMnet1），就像我们实验室的虚拟网络一样：
- en: '![](img/e3128c81-18a8-406a-a6fa-bf2ca3d2668c.png)'
  id: totrans-218
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e3128c81-18a8-406a-a6fa-bf2ca3d2668c.png)'
- en: 'To test the virtual machine, power it on, and let it boot. Once the boot process
    is complete, you''ll see that the login credentials (username/password) are part
    of the system banner, `msfadmin/msfadmin`:'
  id: totrans-219
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要测试虚拟机，将其启动并让其引导。引导过程完成后，您将看到登录凭据（用户名/密码）是系统横幅的一部分，`msfadmin/msfadmin`：
- en: '![](img/eeec9d9d-8ccb-4b6f-9290-76a400216dc8.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eeec9d9d-8ccb-4b6f-9290-76a400216dc8.png)'
- en: 'Log in to the virtual machine using the credentials, and use the `ifconfig`
    command to verify that it has a valid IP address:'
  id: totrans-221
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用凭据登录虚拟机，并使用`ifconfig`命令验证其是否具有有效的IP地址：
- en: '![](img/42a7c601-29a6-4e57-9e4f-8532023f1e40.png)'
  id: totrans-222
  prefs: []
  type: TYPE_IMG
  zh: '![](img/42a7c601-29a6-4e57-9e4f-8532023f1e40.png)'
- en: For each virtual machine, ensure that you have taken a record of the IP addresses.
    The IP addresses I'll be using during the remaining chapters of the book may be
    a bit different to yours, but the operating systems and virtual machine configurations
    will be the same.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 对于每台虚拟机，请确保您已记录下IP地址。我在本书的剩余章节中将使用的IP地址可能与您的有些不同，但操作系统和虚拟机配置将是相同的。
- en: You now have a vulnerable Linux-based operating system in your lab. It's always
    recommended to have a mixture of various target operating systems in a lab when
    practicing penetration testing techniques and honing your skills. This method
    allows you to learn how to perform attacks on a variety of different targets,
    which is important since a corporate network usually has a blend of many different
    devices and operating systems. You don't want to be in a penetration test engagement
    where the target organization has mostly Linux devices but you're skills are geared
    toward only Windows-based systems; this would be a bad sign for you as a penetration
    tester! Therefore, emulating a corporate network in a lab as closely as possible
    will help you to improve your skills.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 您现在在实验室中有一个易受攻击的基于Linux的操作系统。在练习渗透测试技术和磨练技能时，建议在实验室中拥有各种不同目标操作系统的混合。这种方法可以让您学习如何对各种不同的目标进行攻击，这很重要，因为企业网络通常有许多不同的设备和操作系统。您不希望参与的渗透测试中，目标组织主要使用Linux设备，而您的技能只针对基于Windows的系统；这对您作为渗透测试人员来说是一个不好的迹象！因此，在实验室尽可能地模拟企业网络将有助于您提高技能。
- en: Summary
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we opened with a discussion of the importance of having our
    own isolated lab environment for practicing offensive security training. We delved
    into the concepts of virtualization and looked at how it's going to help us now
    and in the future. Later in the chapter, we covered configuring a virtual network
    on both Oracle VM VirtualBox and VMware Workstation, as these networks will be
    used to interconnect all of our virtual machines (our attacker and victim machines).
    We then walked through deploying Kali Linux and Android to our penetration testing
    lab.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们首先讨论了拥有自己隔离的实验室环境进行攻击性安全培训的重要性。我们深入探讨了虚拟化的概念，以及它如何在现在和将来帮助我们。在本章后期，我们介绍了如何在Oracle
    VM VirtualBox和VMware Workstation上配置虚拟网络，因为这些网络将用于连接所有虚拟机（攻击者和受害者机器）。然后，我们演示了如何将Kali
    Linux和Android部署到我们的渗透测试实验室中。
- en: Now that we have a fundamental understanding of designing and building our lab
    environment, let's continue deploying both Windows and Linux-based operating systems
    in our next chapter.
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们对设计和构建实验室环境有了基本的了解，让我们在下一章继续部署基于Windows和Linux的操作系统。
- en: Questions
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: Which type of hypervisor is installed on top of a host operating system?
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 哪种类型的hypervisor安装在主机操作系统之上？
- en: What are some of the benefits of virtualization?
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 虚拟化有哪些好处？
- en: What are some examples of free hypervisors?
  id: totrans-231
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一些免费的hypervisor的例子是什么？
- en: How is an offline package/application installed in Kali Linux?
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如何在Kali Linux中安装离线软件/应用程序？
- en: What is an operating system within a hypervisor usually called?
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在hypervisor中的操作系统通常被称为什么？
- en: Further reading
  id: totrans-234
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'The following links are recommended for additional reading:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 以下链接建议进行额外阅读：
- en: '**Kali Linux documentation**: [https://docs.kali.org/](https://docs.kali.org/)'
  id: totrans-236
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux文档：[https://docs.kali.org/](https://docs.kali.org/)
- en: '**Nessus user guide**: [https://docs.tenable.com/Nessus.htm](https://docs.tenable.com/Nessus.htm)'
  id: totrans-237
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus用户指南：[https://docs.tenable.com/Nessus.htm](https://docs.tenable.com/Nessus.htm)
- en: '**Virtualization**: [https://www.networkworld.com/article/3234795/what-is-virtualization-definition-virtual-machine-hypervisor.html](https://www.networkworld.com/article/3234795/what-is-virtualization-definition-virtual-machine-hypervisor.html)'
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 虚拟化：[https://www.networkworld.com/article/3234795/what-is-virtualization-definition-virtual-machine-hypervisor.html](https://www.networkworld.com/article/3234795/what-is-virtualization-definition-virtual-machine-hypervisor.html)
