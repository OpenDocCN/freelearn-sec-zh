- en: Application Threat Modeling
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用威胁建模
- en: I have dedicated a whole chapter to this topic because people underestimate
    the importance of **Application Threat Modeling** (**ATM**). If you're an employee
    or a consultant in application security, you will always encounter projects that
    will deliver new releases of their product, and you will need to make sure to
    test these projects before they are deployed into the production servers. ATM
    happens at the beginning when the project is still in the Architecture phase.
    In fact, ATM is a security architecture document that allows you to identify future
    threats and to pinpoint the different pentest activities that need to be executed
    in the future deployment of the web application project.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 我已经为这个话题专门安排了整整一章，因为人们往往低估了**应用威胁建模**（**ATM**）的重要性。如果你是应用安全的员工或顾问，你将总是遇到需要在其产品发布新版本的项目，在它们部署到生产服务器之前，你需要确保对这些项目进行测试。ATM发生在项目的架构阶段，这时候项目还在初期阶段。事实上，ATM是一个安全架构文档，它能帮助你识别未来的威胁，并指明在未来部署网站应用程序项目时需要执行的不同渗透测试活动。
- en: 'Here''s the plan for this amazing chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是这一精彩章节的计划：
- en: Introducing the software development life cycle
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 介绍软件开发生命周期
- en: Application Threat Modeling at a glance
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一瞥应用威胁建模
- en: Application Threat Modeling in real life
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 现实生活中的应用威胁建模
- en: Application Threat Modeling document structure and contents
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用威胁建模文档的结构和内容
- en: A practical example of an Application Threat Modeling document
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个应用威胁建模文档的实际示例
- en: A lot of principles in this chapter (and this book, as well) can be found at
    the **OWASP** website. I highly recommend that you keep the OWASP website in mind
    for your application security daily tasks: [http://www.owasp.org](http://www.owasp.org).
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章（以及本书中的许多原则）都可以在**OWASP**网站上找到。我强烈建议你在处理应用安全的日常任务时，时刻关注OWASP网站：[http://www.owasp.org](http://www.owasp.org)。
- en: Software development life cycle
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 软件开发生命周期
- en: 'Every application proceeds into a development life cycle before it is deployed
    into production. First, the project team comes up with an idea for a new product
    (a website) that allows the business to earn more money and clients. This is the
    **Analysis/Architecture** phase, where everyone sits around the table to discuss
    all the challenges of this new project. At the end of this phase, an Architecture
    document will be produced and presented to the Architecture Board who will approve
    it if the project meets the company''s policies. After the approval, the project
    will start in the **Development** phase, where a team of developers and quality
    assurance engineers will join together to deliver the product. After a few sprints,
    a stable release will be ready for deployment into the production; the team will
    test this application and make sure that it''s free of bugs. If everything is
    good (gating), then the team will proceed and deploy the web application into
    the production environment:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 每个应用程序都必须经过开发生命周期，然后才能部署到生产环境中。首先，项目团队提出一个新产品（如网站）的构想，该产品将帮助公司赚取更多的钱和客户。这是**分析/架构**阶段，大家围坐在一起讨论新项目的所有挑战。在这个阶段结束时，将产生一份架构文档，并提交给架构委员会，若该项目符合公司政策，委员会将批准它。获批后，项目将进入**开发**阶段，开发团队和质量保证工程师将共同合作，交付产品。经过几轮迭代后，一个稳定版本将准备好部署到生产环境中；团队将测试该应用程序，确保它没有漏洞。如果一切顺利（符合要求），团队将继续推进，并将该网站应用程序部署到生产环境中：
- en: '![](Images/48ea8a84-abf0-4010-8da8-ae1ae751b66d.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/48ea8a84-abf0-4010-8da8-ae1ae751b66d.png)'
- en: You, as an application security professional, play an important role in this
    workflow. During the first Architecture/Analysis stage, you are required to attend
    the meetings to understand the new application. Once the architecture document
    is completed, you will create your ATM document. Later, during the Development
    phase, you will execute all the penetration tests activities (Source Code Review,
    Web Intrusion Tests, and Infrastructure Security Tests) based on the ATM document
    that you wrote at the beginning.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名应用安全专家，你在这个工作流程中扮演着重要角色。在第一阶段的架构/分析阶段，你需要参加会议，了解新应用程序。一旦架构文档完成，你将创建你的ATM文档。之后，在开发阶段，你将根据最初编写的ATM文档执行所有渗透测试活动（源代码审查、网络入侵测试和基础设施安全测试）。
- en: Application Threat Modeling at a glance
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一瞥应用威胁建模
- en: ATM is a methodology for analyzing the security posture of an application and
    it aims to help you lay out the foundations before starting the penetration testing
    activities. The document should address the security risks during the Architecture
    phase by identifying and quantifying them before project reaches the Development
    phase. You will see so many approaches out there for how to handle the threat
    modeling document (the best one that I recommend is the OWASP Application Threat
    Modeling document; check it out yourself and you will understand what I mean),
    but from my personal experience, I suggest you make it as simple as possible and
    don't waste your time over-describing the security risks of the application, because
    in this case, you're stepping on the feet of the information security risk assessment
    document. Use this document as a guide and a brainstorm to achieve the goal of
    the penetration tests' activities.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: ATM是一种分析应用程序安全态势的方法，旨在帮助你在开始渗透测试活动之前铺设基础。该文档应在架构阶段解决安全风险，通过在项目进入开发阶段之前识别和量化这些风险。你会看到很多处理威胁建模文档的方法（我推荐的最佳方法是OWASP的应用威胁建模文档；自己查看一下，你就会明白我的意思），但根据我的个人经验，我建议你尽可能简化，不要浪费时间过度描述应用程序的安全风险，因为在这种情况下，你实际上是在重复信息安全风险评估文档的内容。将该文档作为指南和头脑风暴工具，用于实现渗透测试活动的目标。
- en: Before you start writing this document, you need to attend a few meetings (project
    kick-off meetings) so that you understand the application that you will be testing.
    Generally, at the end of the Architecture phase, a detailed architecture document
    will be produced, and this will allow you to finalize your work.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 在你开始撰写此文档之前，你需要参加一些会议（项目启动会议），以便了解你将要测试的应用程序。通常，在架构阶段结束时，会生成一份详细的架构文档，这将帮助你最终确定你的工作内容。
- en: Application Threat Modeling in real life
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 现实中的应用威胁建模
- en: At the end of this chapter, I will provide a practical sample of an ATM document.
    If you feel that any of the items that I'm trying to discuss here are not clear
    (very theoretical), then I invite you to look at the example at the end of this
    chapter. If you want your team to be successful during the pentest phase, then
    you must do an ATM document prior to your penetration test activities. Let's take
    an example that I witness on a daily basis when I use this approach. A new project
    comes in, and the **Project Manager** (**PM**) contacts management, asking for
    an expert in application security, because they're going to build a new website.
    The management team then assigns you to that new project, which is still in the
    Architecture phase. You attend a couple of meetings to understand the contents
    of the project. Most probably, another security analyst from the information security
    department will be assigned to attend these meetings as well because his/her job
    is to write a risk assessment document for the same project. When the project
    team is ready, an architecture document will be produced and sent by email. Then,
    I can start on my application threat modeling document, of which I will send a
    copy to the Information Security Analyst and the Project Manager so they can use
    it as a guideline for the next phases. See the following table to understand how
    each phase is affected by our intervention.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结束时，我将提供一个ATM文档的实际示例。如果你觉得我在这里讨论的某些内容不够清晰（过于理论化），我邀请你查看本章末尾的示例。如果你希望你的团队在渗透测试阶段取得成功，那么你必须在渗透测试活动之前编写一份ATM文档。让我举一个我每天都能见到的例子。当我使用这种方法时，一个新的项目开始了，**项目经理**（**PM**）联系管理层，寻求应用安全方面的专家，因为他们将要建设一个新的网站。管理团队随后将你分配到这个仍处于架构阶段的新项目。你参加几场会议，以了解项目的内容。很可能，信息安全部门的另一名安全分析师也会被指派参加这些会议，因为他的工作是为同一项目编写风险评估文档。当项目团队准备好后，将通过电子邮件发送架构文档。然后，我可以开始编写我的应用威胁建模文档，并将副本发送给信息安全分析师和项目经理，以便他们将其作为下一阶段工作的指南。请参阅下表，了解每个阶段是如何受到我们干预的影响的。
- en: 'This table contains a list of actions that I have witnessed in multiple big
    companies; the company that you work for probably has a different approach, but
    this is the best one that I''ve ever seen:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 这张表列出了我在多个大公司中见过的行动清单；你所在的公司可能有不同的方法，但这是我见过的最好的方法：
- en: '| **Requirements** | **Architecture** | **Development** | **Gating Before Deployment**
    | **Production** |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| **需求** | **架构** | **开发** | **部署前门控** | **生产** |'
- en: '| **Training**: Developers, DevLeads, and Architects should be trained about
    application security best practices. The company should encourage the security
    training for IT. Every team member should know their role:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '| **培训**：开发人员、开发主管和架构师应接受关于应用安全最佳实践的培训。公司应鼓励IT的安全培训。每个团队成员都应了解自己的角色：'
- en: '- Security Champion'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: '- 安全冠军'
- en: '- Dev Lead'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '- 开发主管'
- en: '- Developer'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '- 开发人员'
- en: '- Quality Assurance Agent'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '- 质量保证代理'
- en: '- Project Manager'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: '- 项目经理'
- en: '- Architect'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: '- 架构师'
- en: '- Application Security Agent'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '- 应用安全代理'
- en: '- Information Security Agent'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '- 信息安全代理'
- en: '- Architecture Peer review team'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '- 架构同行审查团队'
- en: '- Operation Security'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '- 运营安全'
- en: '- Deployment Gating Agent | **Architecture phase**: The project team will invite
    the **Application Security Agent** (**ASA**) to their kick-off meetings. By attending
    these meetings the ASA will discover any flaws in the design and he/she can give
    recommendations regarding the application security.**Application Threat Modeling**:
    In the end the ASA should write an Application Threat Modeling document that will
    live with the security risk assessment written by the **Information Security Agent** (**ISA**).
    | **Communication**: There are some major key roles in the development phase:**Security
    Champion**: Generally a dev lead, this person will communicate with the Application
    Security Agent for revising the flaws in the static/dynamic code analysis. False
    positives will always be there so the ASA''s role is to help the champion to figure
    out and differentiate the good flaws from the bad flaws. The Security Champion
    will make sure that his/her team is following the secure coding best practices.**QA**:
    The Quality Assurance Agent should know who the ASA is because they will need
    each other to determine when the pre-prod environment is ready for testing. |
    **Intrusion Test**: A Manual Intrusion Test should be executed before deploying
    into production. The Automated Test executed in the CI during the development
    phase is not enough to tackle any hidden web application-based vulnerability.**Code
    Review**: A Manual Static Code Analysis should be done and the ASA should be expert
    enough to not rely on the automated tools for discovering vulnerabilities.**Infrastructure
    Test**: A network vulnerability assessment will be executed against the web server
    where the application will be deployed to discover and assess the existing vulnerabilities.**Information
    Security:** The ISA will get the results of the tests and will communicate with
    higher management to sign any risks associated with the deployment of the web
    application.  | **Operation Security**: The **Operation Security Agent** (**OSA**)
    will be aware of the deployment of the new application and he/she will revise
    all the security documents written by the ASA and ISA. |'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '- 部署门控代理 | **架构阶段**：项目团队将邀请**应用安全代理**（**ASA**）参加他们的启动会议。通过参加这些会议，ASA将发现设计中的任何缺陷，并可以就应用安全提出建议。**应用威胁建模**：最终，ASA应编写一份应用威胁建模文档，该文档将与**信息安全代理**（**ISA**）编写的安全风险评估一起保存。
    | **沟通**：在开发阶段有一些重要的关键角色：**安全冠军**：通常是开发主管，此人将与应用安全代理沟通，以修正静态/动态代码分析中的缺陷。误报总是存在的，因此ASA的角色是帮助冠军区分好的缺陷和坏的缺陷。安全冠军将确保他/她的团队遵循安全编码的最佳实践。**QA**：质量保证代理应该知道谁是ASA，因为他们将需要彼此确定预生产环境何时准备好进行测试。
    | **入侵测试**：在部署到生产环境之前应执行手动入侵测试。在开发阶段执行的自动化测试不足以解决任何隐藏的基于Web应用程序的漏洞。**代码审查**：应进行手动静态代码分析，ASA应该足够专业，不依赖自动化工具发现漏洞。**基础设施测试**：将针对将部署应用程序的Web服务器执行网络漏洞评估，以发现和评估现有的漏洞。**信息安全**：ISA将获得测试结果，并将与高级管理层沟通，签署与部署Web应用程序相关的任何风险。
    | **运营安全**：**运营安全代理**（**OSA**）将了解新应用程序的部署，并将审核ASA和ISA编写的所有安全文档。 |'
- en: '| **Requirements**: Secure Coding Standards should be in place for developers
    to use. This document should be in the hands of the developers the first day they
    join the company. Having this document will decrease security flaws later in the
    development life cycle. | **Peer Review**: After everyone has done their job and
    we have an official architecture document plus the security documents described
    previously, then the peer review board will verify that everything is in respect
    of the company''s policies. | Generally, the QA will supply the ASA with the test
    credentials and the URL for testing.**PM**: The project manager will communicate
    with the ASA for the timesheet and for raising any impediments that could delay
    the deployment of the project. | **Gating**: The Deployment Gating Agent will
    check if the security tests are executed before allowing the project to go into
    production.The Deployment Gating Agent will communicate with the ISA and ASA to
    verify that everything is done correctly. | **Health Check**: The OSA will ensure
    that the application will be tested regularly (at least once per year).The test
    should cover the three categories; source code, intrusion test, and infrastructure
    test. |'
  id: totrans-32
  prefs: []
  type: TYPE_TB
  zh: '| **需求**：应为开发人员提供安全编码标准。这份文档应该在开发人员加入公司后的第一天就交给他们。拥有这份文档将减少后期开发生命周期中的安全漏洞。
    | **同行评审**：在每个人完成自己的工作并且我们拥有正式的架构文档以及之前提到的安全文档后，同行评审委员会将验证一切是否符合公司政策。 | 通常，QA
    将为 ASA 提供测试凭证和测试的 URL。**PM**：项目经理将与 ASA 沟通工作时间表，并解决任何可能延迟项目部署的障碍。 | **门控**：部署门控代理将在允许项目进入生产之前检查是否执行了安全测试。部署门控代理将与
    ISA 和 ASA 通信，以验证一切是否正确完成。 | **健康检查**：OSA 将确保应用程序定期测试（至少每年一次）。测试应涵盖三个类别：源代码、入侵测试和基础设施测试。
    |'
- en: One of the big advantages of the ATM document is that it allows me to remember
    what the project is all about when it's time to execute the tests. In reality,
    there will be a delay of many months between the Architecture phase and the deployment
    of the project into production. In general, you don't work on a single project,
    and because of the high number of tests that you're going to encounter, this document
    will be your reference to help you remember what happened at the beginning of
    the project.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: ATM 文档的一个大优点是，它能让我在执行测试时记住项目的整体内容。实际上，在架构阶段和项目部署到生产环境之间会有数月的延迟。通常，你并不是只处理一个项目，由于将要遇到大量的测试，这份文档将成为你的参考，帮助你记住项目开始时发生了什么。
- en: Application Threat Modeling document parts
  id: totrans-34
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 应用威胁建模文档部分
- en: An ATM document has multiple sections. In fact, this document can be between
    40-70 pages long. Understanding each section is crucial for a successful project.
    I know I told you previously to keep this document simple, but not too much; you
    should not miss the important details of an ATM document.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ATM 文档包含多个部分。事实上，这份文档可能长达 40-70 页。理解每个部分对于成功完成项目至关重要。我知道我之前告诉过你要保持文档简洁，但也不能简化得过头；你不应该遗漏
    ATM 文档中的重要细节。
- en: 'So, here''s the list of the most important sections that an ATM document should
    contain:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，这里是 ATM 文档应包含的最重要部分的列表：
- en: Data Flow Diagram
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据流图
- en: External dependencies
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外部依赖
- en: Trust levels
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 信任级别
- en: Entry points
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 入口点
- en: Assets
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产
- en: Test strategies
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 测试策略
- en: Security risks
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全风险
- en: Data Flow Diagram
  id: totrans-44
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据流图
- en: 'I placed this title, **Data Flow Diagram** (**DFD**), at the beginning for
    a reason; because it''s my favorite section and I use it as a reference in the
    ATM document. The DFD will allow us to gain a better understanding of the application
    by providing a visual representation of the different pieces of the web application.
    The focus of the DFD is on how data moves through the application from the user
    until it reaches its final destination (for example, a database or filesystem).
    Generally, I use the architecture document that you already received during the
    Architecture phase, from the project team, to develop the DFD (the architecture
    document should contain the architecture diagram of the application):'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 我把这个标题**数据流图**（**DFD**）放在开头是有原因的，因为这是我最喜欢的部分，我会将其作为 ATM 文档中的参考。数据流图将通过提供网页应用程序各个部分的可视化表示，帮助我们更好地理解应用程序。DFD
    的重点是数据如何从用户端流动，直到到达其最终目的地（例如数据库或文件系统）。通常，我使用在架构阶段你已经收到的架构文档（该文档应包含应用程序的架构图）来开发数据流图：
- en: '![](Images/93d59a9c-b315-4d40-a0a6-46a73453ad75.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/93d59a9c-b315-4d40-a0a6-46a73453ad75.png)'
- en: 'As you can see from the preceding diagram, there are a number of shapes that
    the application security community uses when designing a DFD:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的图示可以看到，应用程序安全社区在设计 DFD 时使用了多种形状：
- en: '**External Entity**: This shape represents the entity that interacts with an
    application (for example, customer, employee, manager, and so on):'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外部实体**：此形状表示与应用程序交互的实体（例如，客户、员工、经理等）：'
- en: '![](Images/79eb318d-90e6-490f-9689-66ca2e19fa6a.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/79eb318d-90e6-490f-9689-66ca2e19fa6a.png)'
- en: '**Privilege boundary**:The privilege boundary shape is used to represent the
    change of privilege levels as the data flows through different areas in the system.
    It is represented by a red dotted line (see the preceding DFD example).'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**权限边界**：权限边界形状用于表示数据在系统不同区域流动时，权限级别的变化。它由红色虚线表示（参见前面的 DFD 示例）。'
- en: Also, I use the dotted rectangle shape to group the boundary for a group of
    items (for example, inside the company boundary).
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，我使用虚线矩形形状将一组项目的边界进行分组（例如，公司内部的边界）。
- en: '**Data Flow**:The data flow shape represents data movement within the application.
    The direction of the data movement is represented by the arrows:'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据流**：数据流形状表示数据在应用程序内部的流动。数据流动的方向由箭头表示：'
- en: '![](Images/27bc82a7-6fa0-44eb-b214-66d1210f56b8.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/27bc82a7-6fa0-44eb-b214-66d1210f56b8.png)'
- en: '**Subprocess**:This shape is used to present a collection of subprocesses.
    You use this one when you know that the task can be broken down into its subprocesses
    in another DFD:'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**子流程**：此形状用于表示一组子流程。当你知道任务可以在另一个数据流图（DFD）中分解成子流程时，使用此形状：'
- en: '![](Images/2af3f5e9-13de-421a-b612-5f8e1883da79.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/2af3f5e9-13de-421a-b612-5f8e1883da79.png)'
- en: '**Process**: The process shape represents a piece that handles data within
    the application. In practice, I use the subprocess shape most of the time, but
    that''s me and you''re not obliged to follow my methodology (it''s nice to sometimes
    step outside the norms and not be a victim of the shapes):'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**过程**：过程形状表示在应用程序内部处理数据的部分。实际上，我大多数时候使用子流程形状，但这是我的方法，你不必强迫自己按照我的方法（有时跳出常规，不受形状束缚是件好事）：'
- en: '![](Images/ee1b5861-760d-48de-988c-6762cc17ad6e.png)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/ee1b5861-760d-48de-988c-6762cc17ad6e.png)'
- en: '**Data Store**:The data store''s shape is used to represent locations where
    data is stored (for example, file and database). I usually use the following shape:'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据存储**：数据存储形状用于表示数据存储的位置（例如，文件和数据库）。我通常使用以下形状：'
- en: '![](Images/4189d367-7e71-4018-8906-0526fa7432ec.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/4189d367-7e71-4018-8906-0526fa7432ec.png)'
- en: 'I also use this shape (OWASP style):'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 我也使用这个形状（OWASP 风格）：
- en: '![](Images/4b50aacd-e48a-4cb7-87f3-b23d5e1c4119.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/4b50aacd-e48a-4cb7-87f3-b23d5e1c4119.png)'
- en: 'Here are some rules that I learned by myself in order to have a successful
    DFD diagram:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我自己总结的一些规则，用于成功绘制 DFD 图：
- en: Keep it simple (don't add too many details), but don't miss the important details
    either
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 保持简单（不要加入过多细节），但也不要忽视重要的细节
- en: Be artistic and don't be a slave to the design that the community is using,
    you can have your own, too (discuss this with your manager if you have one)
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要有艺术感，不要仅仅成为社区设计的奴隶，你也可以有自己的设计（如果你有经理，可以与其讨论这个问题）
- en: The diagram should be self-explanatory, even if you look at it after a year
    (or more)
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 该图应该是自解释的，即使你在一年（或更长时间）后再看，也能轻松理解。
- en: External dependencies
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 外部依赖项
- en: 'This one can sometimes be confusing because of its name. External dependencies
    are typically the items that interact with the web application. The examples are
    endless here, but here are the ones that you will encounter most of the time:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这个形状有时会令人困惑，因为它的名称。外部依赖项通常是与网络应用程序交互的项目。这里的例子不胜枚举，但以下是你最常遇到的几种：
- en: The web server vendor/OS (for example, IIS, Apache, and Linux Redhat)
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络服务器厂商/操作系统（例如，IIS、Apache 和 Linux Redhat）
- en: The database server OS and version (for example, MSSQL, MySQL, Oracle, and Windows
    server 2016)
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库服务器操作系统及版本（例如，MSSQL、MySQL、Oracle 和 Windows Server 2016）
- en: The firewalls and their versions (for example, Palo Alto Firewalls)
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防火墙及其版本（例如，Palo Alto 防火墙）
- en: The web service server (for example, IBM Datapower)
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络服务服务器（例如，IBM Datapower）
- en: External suppliers web services/cloud services (for example, MS Azure, Amazon,
    and cloud services)
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 外部供应商的网络服务/云服务（例如，MS Azure、Amazon 和云服务）
- en: Do NOT list all the details such as Cisco switches or routers, in the *External
    dependencies* section; you get the idea.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 在*外部依赖*部分中不要列出所有详细信息，如思科交换机或路由器；你明白的。
- en: Trust levels
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信任级别
- en: 'Trust levels represent the access rights that the application will grant to
    any entity that is interacting with the web application. For example, if the web
    application stores its data in the database, in the backend, then ask yourself
    this question: who interacts with the database? The simple answer would be the
    Database Administrator, Database Read Users, and Database Read/Write Users. You
    should ask this question for every item that interacts with the web application
    (for example, web services, filesystems, logs, and so on).'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 信任级别代表应用程序将授予与其交互的任何实体的访问权限。例如，如果Web应用程序将其数据存储在数据库后端，那么问问自己：谁与数据库交互？简单的答案可能是数据库管理员、数据库读取用户和数据库读/写用户。你应该对每个与Web应用程序交互的项目提问这个问题（例如，Web服务、文件系统、日志等）。
- en: Entry points
  id: totrans-76
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入口点
- en: Entry points are the ways through which a potential attacker can interact with
    the application (read/write data). Examples can be any web page or web service
    endpoint. If you have a house, this will represent any door or windows to your
    house that allows a thief to get inside and steal things.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 入口点是潜在攻击者与应用程序交互的方式（读/写数据）。示例可以是任何网页或Web服务端点。如果你有一座房子，这就代表着房子的任何门窗，允许小偷进入并偷取东西。
- en: Assets
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 资产
- en: 'Assets are the different parts of the application that a hacker would be interested
    in getting (also known as Threat target). Most of the time, the attacker is interested
    in the data, but here are more examples that you can use while developing this
    section:'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 资产是黑客可能感兴趣的应用程序的不同部分（也称为威胁目标）。大多数时候，攻击者关注的是数据，但这里还有一些你可以在开发该部分时使用的更多示例：
- en: Read user data (for example, passwords, credit cards, personal information)
  id: totrans-80
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取用户数据（例如，密码、信用卡、个人信息）
- en: Execute unauthorized functionalities (for example, add a new user and delete
    an account)
  id: totrans-81
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行未经授权的功能（例如，添加新用户和删除账户）
- en: Access to unauthorized systems (for example, access to the database, access
    to the web server file system through a terminal window)
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问未经授权的系统（例如，通过终端窗口访问数据库、访问Web服务器文件系统）
- en: Different systems availability (for example, DOS against a web server)
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不同系统的可用性（例如，针对Web服务器的DOS攻击）
- en: Test strategies
  id: totrans-84
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试策略
- en: Your ATM document should include the different security tests that you will
    execute before deploying into production. You need to explain to the project why
    you're doing the tests and what the necessary details for this task are. For example,
    you need to specify the environment of the test (Dev, Staging, or Production).
    Also, will you need credentials for testing? If so, how many? (For example, admin
    or guest.)
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 你的ATM文档应该包括在部署到生产环境之前，你将执行的不同安全测试。你需要向项目方解释你为何进行这些测试，以及这项任务所需的必要细节。例如，你需要指定测试环境（开发、预生产或生产）。另外，你是否需要凭证进行测试？如果需要，多少个凭证？（例如，管理员或访客。）
- en: Security risks
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安全风险
- en: The ATM document is not a replacement for risk assessment, but it is a guide
    for you to get only the high-level application security risks.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ATM文档并不是风险评估的替代品，但它是一个指导，帮助你仅关注高层次的应用程序安全风险。
- en: 'Always ask the following questions to get a quick risk level of the application
    as a whole:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 始终提出以下问题，以快速了解整个应用程序的风险级别：
- en: Does the application handle any confidential data? Y/N
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否处理任何机密数据？Y/N
- en: Does the application write data to the backend? Y/N
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否会向后端写入数据？Y/N
- en: Any impact on the company's public image? Y/N
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否对公司的公共形象有影响？Y/N
- en: Any impact on the company's clients? Y/N
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否对公司客户有影响？Y/N
- en: Is the application accessible from the internet? Y/N
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否可以从互联网上访问？Y/N
- en: Is the application accessible from mobile devices? Y/N
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否可以从移动设备访问？Y/N
- en: Does the application interact with third-party services? Y/N
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否与第三方服务交互？Y/N
- en: Is the application developed by a third-party? Y/N
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 应用程序是否由第三方开发？Y/N
- en: 'Wait, there is more—this is just an overall questionnaire that can give you
    a head start. Next, you need to classify the attacker''s goals using the **STRIDE** methodology,
    which stands for:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 等一下，还有更多——这只是一个总体问卷，可以帮助你入门。接下来，你需要使用**STRIDE**方法对攻击者的目标进行分类，STRIDE代表：
- en: '**Spoofing**: When a hacker steals the credentials/session of the victim'
  id: totrans-98
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**欺骗**：当黑客窃取受害者的凭证/会话时'
- en: '**Tampering**: The threat is accomplished by manipulating data at rest and
    in transit'
  id: totrans-99
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**篡改**：威胁通过操控静态数据和传输数据来完成'
- en: '**Repudiation**: This happens when we cannot trace who did what'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**否认**：当我们无法追踪是谁做了什么时，就会发生这种情况'
- en: '**Information Disclosure**: This threat reveals confidential information to
    a hacker without being authorized to do it'
  id: totrans-101
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**信息泄露**：这种威胁使黑客在未授权的情况下揭露机密信息'
- en: '**Denial of Service**: Threat targeting the systems and making them unusable
    by clients'
  id: totrans-102
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**拒绝服务**：目标是使系统无法为客户使用的威胁'
- en: '**Elevation of Privilege**: Threat aimed to gain administrator privileges on
    the remote system'
  id: totrans-103
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**特权提升**：针对远程系统获取管理员权限的威胁'
- en: Then, we take each security threat and give it a risk rank point using the **DREAD** methodology.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，我们针对每个安全威胁，使用**DREAD**方法为其打上风险排名点。
- en: 'Here''s a simple explanation of the **DREAD** ranking:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 这里是一个简单的**DREAD**排名说明：
- en: '**Damage** (impact?)'
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**损害**（影响？）'
- en: '**Reproducibility** (how easy it is?)'
  id: totrans-107
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可重现性**（有多容易？）'
- en: '**Exploitability** (time and effort?)'
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可利用性**（所需时间和努力？）'
- en: '**Affected Users** (how many users, including clients and employees?)'
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**受影响的用户**（有多少用户，包括客户和员工？）'
- en: '**Discoverability** (easy to discover?)'
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可发现性**（容易发现吗？）'
- en: To calculate it, you need to give a rank number for each from 1 to 10, where
    1 is low and 10 is high. After that, you add all the scores together and divide
    them by five and you will get the average result. Don't worry, you will see a
    practical example soon; for the time being, try to get the big picture.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 计算时，你需要为每一项打分，分数范围为1到10，其中1表示低，10表示高。然后，将所有分数相加，再除以五，得到平均值。别担心，稍后你将看到一个实际示例；目前，先尝试理解大概概念。
- en: 'The way to get a score/rating using DREAD is easy; the following table tells
    the story:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 使用DREAD评分/评级的方式很简单；下表讲述了这一过程：
- en: '|  | **Name** | **High (8-10)** | **Medium (4-7)** | **Low (1-3)** |'
  id: totrans-113
  prefs: []
  type: TYPE_TB
  zh: '|  | **名称** | **高 (8-10)** | **中 (4-7)** | **低 (1-3)** |'
- en: '| D | Damage  | The attacker can subvert the security system; upload contents;
    get a remote shell; run as administrator. | Leaking some confidential information.
    | Leaking non-confidential Information. |'
  id: totrans-114
  prefs: []
  type: TYPE_TB
  zh: '| D | 损害 | 攻击者可以颠覆安全系统；上传内容；获取远程Shell；以管理员身份运行。 | 泄露一些机密信息。 | 泄露非机密信息。 |'
- en: '| R | Reproducibility | It can be reproduced in a short period of time. | It
    can be reproduced in certain situations. | It''s very hard to reproduce the attack.
    |'
  id: totrans-115
  prefs: []
  type: TYPE_TB
  zh: '| R | 可重现性 | 可以在短时间内重现。 | 在某些情况下可以重现。 | 很难重现攻击。 |'
- en: '| E | Exploitability | A script kiddie can exploit the vulnerability. | It
    takes some skills to exploit the vulnerability. | It takes someone with highly
    advanced skills to exploit the vulnerability. |'
  id: totrans-116
  prefs: []
  type: TYPE_TB
  zh: '| E | 可利用性 | 一个脚本小子可以利用该漏洞。 | 需要一些技能才能利用该漏洞。 | 需要高度先进的技能才能利用该漏洞。 |'
- en: '| A | Affected Users | More than 1,000 customers affected. | Between 100 and
    1,000 customers affected. | Less than 100 customers affected. |'
  id: totrans-117
  prefs: []
  type: TYPE_TB
  zh: '| A | 受影响的用户 | 超过1,000名客户受到影响。 | 介于100到1,000名客户受到影响。 | 少于100名客户受到影响。 |'
- en: '| D | Discoverability | Can be easily discovered using trivial tools. | Discovering
    the vulnerability will take some skills. | Discovering the vulnerability is highly
    difficult. |'
  id: totrans-118
  prefs: []
  type: TYPE_TB
  zh: '| D | 可发现性 | 可以使用简单工具轻松发现。 | 发现漏洞需要一些技能。 | 发现漏洞非常困难。 |'
- en: 'Some people like to use the Information Security formula to calculate the security
    risk:'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 一些人喜欢使用信息安全公式来计算安全风险：
- en: '*Risk = Likelihood x Impact*'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '*风险 = 可能性 x 影响*'
- en: Practical example
  id: totrans-121
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实际示例
- en: 'Our practical example is based on the Company Name XYZ Inc. The marketing team
    in XYZ wants to add a blog page to attract more clients and they want to call
    the project xBlog. You attended a few kick-off meetings and now, finally, they
    have sent you the architecture document, and inside it, you have the following
    diagram:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的实际示例基于XYZ公司。XYZ的营销团队希望添加一个博客页面以吸引更多客户，并且他们想将这个项目命名为xBlog。你参加了几次启动会议，现在，他们终于把架构文档发给你了，里面有以下图表：
- en: '![](Images/87f5f0c6-2e8b-4a42-8055-f694f1a039e7.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/87f5f0c6-2e8b-4a42-8055-f694f1a039e7.png)'
- en: According to this diagram, the clients (customers) will be able to access the
    blog from anywhere and they can add comments (the authentication process for customers
    is out of scope because clients will be authenticated through the main page of
    the company's website). On the other hand, the employees of XYZ can add a blog
    or approve a client comment through the WordPress CMS. Simple, right? Your job
    as an application security expert is to submit an ATM document to the project
    team before going to the architecture review board; let's start!
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 根据此图，客户（用户）可以从任何地方访问博客，并可以添加评论（客户的身份验证过程不在本范围内，因为客户将通过公司网站的主页进行身份验证）。另一方面，XYZ的员工可以通过WordPress
    CMS添加博客或批准客户评论。很简单，对吧？作为应用安全专家，你的工作是在架构评审委员会之前提交ATM文档给项目团队；让我们开始吧！
- en: xBlog Threat Modeling
  id: totrans-125
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: xBlog威胁建模
- en: In cooperation with the [Company Name] objectives, which are aiming to preserve
    the security of its digital information resources, it is important for the administration
    of [Company Name] to be aware of the security risks and threats associated with
    the use of the [xBlog] application during normal business operation.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 与[公司名称]的目标合作，旨在保护其数字信息资源的安全，了解与正常业务运营中使用[xBlog]应用相关的安全风险和威胁，对于[公司名称]的管理层至关重要。
- en: This document consists of a security assessment report using Application Threat
    Modeling techniques. We will be evaluating the application [xBlog] to understand
    the security risks that can make an impact on the business operations of [Company
    Name].
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 本文档包含使用应用威胁建模技术的安全评估报告。我们将评估[xBlog]应用，以了解可能对[公司名称]业务运营产生影响的安全风险。
- en: Scope
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 范围
- en: This document will be applied only to the application [xBlog] of [Company Name].
    The application [xBlog] is physically located at the [Company Name] facilities.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 本文档仅适用于[公司名称]的[xBlog]应用。[xBlog]应用物理位置位于[公司名称]的设施中。
- en: Threat Modeling
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 威胁建模
- en: '[To define Threat Modeling here, refer to the *Application Threat Modeling at a
    Glance* section of this chapter.]'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在这里定义威胁建模，请参考本章节的*应用威胁建模概览*部分。]'
- en: Project information
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 项目信息
- en: 'In this section, we will add the description of the [xBlog] web application.
    The following table aims to identify the big picture for this project and to identify
    the users that will interact with it as well:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将添加[xBlog] web应用的描述。下表旨在识别该项目的全貌，并识别将与之互动的用户：
- en: '| **Application Version** | [xBlog v1.0] |'
  id: totrans-134
  prefs: []
  type: TYPE_TB
  zh: '| **应用版本** | [xBlog v1.0] |'
- en: '| **Description** | The application [xBlog] is a new application that will
    target the [Company Name] customers and allow them to read blogs and comments
    to those blogs as well. The Blog [`blog.domain.com`] will be hosted separately
    using the WordPress CMS. A local admin will be able to administer the blog by
    adding new articles and managing the blog''s comments as well.Two types of users
    will use this application:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: '| **描述** | [xBlog]应用是一个新应用，旨在服务于[公司名称]的客户，允许他们阅读博客及其评论。博客[`blog.domain.com`]将使用WordPress
    CMS单独托管。一个本地管理员可以通过添加新文章和管理博客评论来管理博客。该应用将由两类用户使用：'
- en: Customers
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户
- en: WordPress administrators
  id: totrans-137
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WordPress管理员
- en: '|'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Document Owner** | Gus Khawaja |'
  id: totrans-139
  prefs: []
  type: TYPE_TB
  zh: '| **文档拥有者** | 古斯·卡瓦贾 |'
- en: '| **Participants** |'
  id: totrans-140
  prefs: []
  type: TYPE_TB
  zh: '| **参与者** |'
- en: John Doe (Solution Architect)
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 约翰·多（解决方案架构师）
- en: Jane Doe (Project Manager)
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 简·多（项目经理）
- en: Elliot Doe (Information Security Director)
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 埃利奥特·多（信息安全总监）
- en: '|'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Data Flow Diagram
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数据流图
- en: '[To define Data Flow Diagram here, refer to the *Data Flow Diagram* section
    of this chapter:]'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在这里定义数据流图，请参考本章节的*数据流图*部分：]'
- en: '![](Images/2369771e-67fb-4dea-a451-48f7dfbbb0a3.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](Images/2369771e-67fb-4dea-a451-48f7dfbbb0a3.png)'
- en: External dependencies
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 外部依赖
- en: '[To define External Dependencies here, refer to the *External dependencies* section
    of this chapter:]'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在这里定义外部依赖，请参考本章节的*外部依赖*部分：]'
- en: '| **ID** | **Description** |'
  id: totrans-150
  prefs: []
  type: TYPE_TB
  zh: '| **ID** | **描述** |'
- en: '| 1 | The Website [`www.domain.com`] is protected by Cisco firewalls in DMZ
    Zone and the only communication available is TLS. |'
  id: totrans-151
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 网站[`www.domain.com`]由Cisco防火墙保护在DMZ区域，唯一可用的通信方式是TLS。 |'
- en: '| 2 | The Website [`www.blog.domain.com`] is using WordPress and is protected
    by a Cisco firewall in a DMZ Zone. The only communication available is TLS. |'
  id: totrans-152
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 网站[`www.blog.domain.com`]使用WordPress，并通过Cisco防火墙保护在DMZ区域。唯一可用的通信方式是TLS。
    |'
- en: '| 3 | The Admin page for WordPress [`wpadmin.blog.domain.com`] is accessible
    internally through an HTTPS Link. |'
  id: totrans-153
  prefs: []
  type: TYPE_TB
  zh: '| 3 | WordPress 的管理页面 [`wpadmin.blog.domain.com`] 可通过 HTTPS 链接在内部访问。 |'
- en: '| 4 | The web server of [`www.domain.com`] is using Microsoft IIS and Windows
    Server 2016 with the latest security patches. (See the Nessus report on the intranet
    [rs66988_nessus.pdf].) |'
  id: totrans-154
  prefs: []
  type: TYPE_TB
  zh: '| 4 | [`www.domain.com`] 的 Web 服务器正在使用 Microsoft IIS 和 Windows Server 2016，并安装了最新的安全补丁。（请参阅内部网
    [rs66988_nessus.pdf] 上的 Nessus 报告。） |'
- en: '| 5 | The web server of [`www.blog.domain.com`] is using Apache and Ubuntu
    Server 2016 with the latest security patches. (See the Nessus report on the intranet
    [rs56389_nessus.pdf].) |'
  id: totrans-155
  prefs: []
  type: TYPE_TB
  zh: '| 5 | [`www.blog.domain.com`] 的 Web 服务器正在使用 Apache 和 Ubuntu Server 2016，并安装了最新的安全补丁。（请参阅内部网
    [rs56389_nessus.pdf] 上的 Nessus 报告。） |'
- en: '| 6 | The database is using MySQL and is stored on the same server as the web
    application. (See the Nessus report on the intranet [rs56389_nessus.pdf].) |'
  id: totrans-156
  prefs: []
  type: TYPE_TB
  zh: '| 6 | 数据库正在使用 MySQL，并存储在与 Web 应用程序相同的服务器上。（请参阅内部网 [rs56389_nessus.pdf] 上的 Nessus
    报告。） |'
- en: '| 7 | Customers will access the blog through a hyperlink located on the menu
    of the website [`www.domain.com`], which will redirect them to [`www.blog.domain.com`].
    |'
  id: totrans-157
  prefs: []
  type: TYPE_TB
  zh: '| 7 | 客户将通过位于网站菜单上的超链接[`www.domain.com`] 访问博客，该超链接将重定向他们到[`www.blog.domain.com`]。
    |'
- en: Trust levels
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信任级别
- en: '[To define trust levels here, refer to the *Trust levels* section of this chapter:]'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在此定义信任级别，请参考本章的*信任级别*部分：]'
- en: '| **ID** | **Name** | **Description** |'
  id: totrans-160
  prefs: []
  type: TYPE_TB
  zh: '| **ID** | **名称** | **描述** |'
- en: '| 1 | Anonymous Web User | This is any web anonymous user that is trying to
    use the [xBlog] application. This type of user will read blogs but will not be
    able to add comments since they did not log in previously. |'
  id: totrans-161
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 匿名网络用户 | 这是任何试图使用[xBlog] 应用程序的匿名网络用户。这种类型的用户将阅读博客，但由于他们之前没有登录，将无法添加评论。
    |'
- en: '| 2 | Customers | The Customers will use the [xBlog] application to read blogs
    and add comments. The customer should be logged in order to add comments to the
    blog article. |'
  id: totrans-162
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 客户 | 客户将使用[xBlog] 应用程序阅读博客并添加评论。客户应登录以添加评论到博客文章。 |'
- en: '| 3 | WordPress Administrator | The WordPress Administrator will manage the
    website and approve blog articles. The role of the administrator is to approve
    customer comments as well before they go online. |'
  id: totrans-163
  prefs: []
  type: TYPE_TB
  zh: '| 3 | WordPress 管理员 | WordPress 管理员将管理网站并批准博客文章。管理员的角色还包括在客户评论上线之前批准客户评论。 |'
- en: '| 4 | Blogs Creator | The Blog Creator will create a new blog and the administrator
    will later approve this blog before it''s published. |'
  id: totrans-164
  prefs: []
  type: TYPE_TB
  zh: '| 4 | 博客创建者 | 博客创建者将创建一个新博客，管理员将在发布之前批准此博客。 |'
- en: '| 5 | Database Administrator | The Database Administrator is a MySQL professional
    who will make sure to maintain and manage the database that stores the data of
    WordPress. |'
  id: totrans-165
  prefs: []
  type: TYPE_TB
  zh: '| 5 | 数据库管理员 | 数据库管理员是一位 MySQL 专业人士，将确保维护和管理存储 WordPress 数据的数据库。 |'
- en: Entry points
  id: totrans-166
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 入口点
- en: '[To define the Entry Points here, refer to the *Entry points* section of this
    chapter:]'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在此定义入口点，请参考本章的*入口点*部分：]'
- en: '| **ID** | **Name** | **Description** | **Trust levels** |'
  id: totrans-168
  prefs: []
  type: TYPE_TB
  zh: '| **ID** | **名称** | **描述** | **信任级别** |'
- en: '| 1 | HTTPS | The website will be only accessible through TLS. All the pages
    of this website will use it as well. |'
  id: totrans-169
  prefs: []
  type: TYPE_TB
  zh: '| 1 | HTTPS | 网站只能通过 TLS 访问。该网站的所有页面也将使用它。 |'
- en: Anonymous web user
  id: totrans-170
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匿名网络用户
- en: Customers
  id: totrans-171
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户
- en: '|'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| 2 | Blogs Page | This is the blogs articles listing page. |'
  id: totrans-173
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 博客页面 | 这是博客文章列表页面。 |'
- en: Anonymous web user
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 匿名网络用户
- en: Customers
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户
- en: '|'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| 3 | WordPress Login Page | The WP-Login page will be the one the employees
    use to log in to WordPress. |'
  id: totrans-177
  prefs: []
  type: TYPE_TB
  zh: '| 3 | WordPress 登录页面 | WP-Login 页面将是员工用来登录 WordPress 的页面。 |'
- en: WordPress administrator
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WordPress 管理员
- en: Blogs creator
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 博客创建者
- en: '|'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: Assets
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 资产
- en: '[To define Assets here, refer to the *Assets* section of this chapter]. Optionally,
    you can add the Trust Levels (users) as an additional column to this table, but
    I don''t include it most of the time in my ATM documents; it''s your choice:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在此定义资产，请参考本章的*资产*部分。可选地，您可以将信任级别（用户）作为此表的附加列添加，但我在我的 ATM 文档中大多数情况下不包括它；这是您的选择：]'
- en: '| **ID** | **Name** | **Description** |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| **ID** | **名称** | **描述** |'
- en: '| 1 | Blog | Assets related to the blog''s website |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 博客 | 与博客网站相关的资产 |'
- en: '| 1.1 | Access to WordPress | Get the credentials of an Admin/Moderator to
    access the WordPress platform |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| 1.1 | WordPress 访问 | 获取管理员/版主的凭据以访问 WordPress 平台 |'
- en: '| 1.2 | Availability of the website | The ability to make the site unavailable
    to clients or employees who manage it |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| 1.2 | 网站的可用性 | 使网站对客户或管理网站的员工不可用的能力 |'
- en: '| 2 | Database | Assets related to the MySQL database that holds the website
    data |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| 2 | 数据库 | 与保存网站数据的MySQL数据库相关的资产 |'
- en: '| 2.1 | Access to the database | Being able to access the MySQL locally or
    remotely |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| 2.1 | 访问数据库 | 能够本地或远程访问MySQL |'
- en: '| 2.2 | Availability of the database | Making the database unavailable to users
    |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| 2.2 | 数据库可用性 | 使数据库对用户不可用 |'
- en: '| 2.3 | Ability to execute SQL statements | Being able to execute SQL queries
    to extract or manipulate data in the database |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| 2.3 | 执行SQL语句的能力 | 能够执行SQL查询来提取或操纵数据库中的数据 |'
- en: '| 2.4 | Access to Audit Logs data | Access the audit logs looking for confidential
    information |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| 2.4 | 访问审计日志数据 | 访问审计日志查找机密信息 |'
- en: Threats list
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 威胁列表
- en: '[To define Security Risks here, refer to the *Security risks* section of this
    chapter.]'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '[要在此定义安全风险，请参考本章的*安全风险*部分。]'
- en: Spoofing – authentication
  id: totrans-194
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 伪造 – 身份验证
- en: '| **Threat Description** | Threat action aimed to illegally access and use
    another user''s credentials, such as username and password. |'
  id: totrans-195
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 威胁行动旨在非法访问和使用另一个用户的凭据，如用户名和密码。 |'
- en: '| **Threat Target** | Customer and employee credentials. |'
  id: totrans-196
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 客户和员工凭据。 |'
- en: '| **Attacker Steps** | An attacker can do the following:'
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: '| **攻击者步骤** | 攻击者可以执行以下操作：'
- en: Steal the credentials through social engineering
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过社会工程学窃取凭据
- en: Brute-force attempts to get into the system
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 对系统进行暴力破解尝试
- en: Perform an SQL injection to bypass authentication or extract a user's credentials
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行SQL注入绕过身份验证或提取用户凭据
- en: Intercept and steal the session cookie from a user
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 截取并窃取用户的会话Cookie
- en: '|'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Counter-Measure** |'
  id: totrans-203
  prefs: []
  type: TYPE_TB
  zh: '| **对策** |'
- en: Secure Password Policy
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安全密码策略
- en: Sessions Timeout
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 会话超时
- en: Account Lockout against brute-force attacks
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对暴力破解攻击的账户锁定
- en: Logging failed attempts
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录失败的尝试
- en: Validation against SQLi and XSS
  id: totrans-208
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 针对SQLi和XSS的验证
- en: The admin console for WordPress is only accessible through the intranet
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WordPress的管理员控制台仅能通过内网访问
- en: '|'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Existing Counter-Measure** | N/A - it''s a new project |'
  id: totrans-211
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** | 暂无 - 这是一个新项目 |'
- en: 'The DREAD review is as follows:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD评估如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-213
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详细信息** | **得分 /10** |'
- en: '| Damage |'
  id: totrans-214
  prefs: []
  type: TYPE_TB
  zh: '| 损害 |'
- en: Getting an admin account will allow the hacker to upload a remote shell and
    own the box
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取管理员账户将使黑客能够上传远程Shell并控制主机
- en: Getting a client account will allow the hacker to only post blogs on his behalf
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取客户账户将使黑客只能代其发布博客
- en: '| 8 |'
  id: totrans-217
  prefs: []
  type: TYPE_TB
  zh: '| 8 |'
- en: '| Reproducibility | It can be reproduced in a mid-long period of time. | 6
    |'
  id: totrans-218
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 它可以在中长期内复现。 | 6 |'
- en: '| Exploitability | It doesn''t take a lot of skill to execute this attack.
    | 7 |'
  id: totrans-219
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 执行此攻击不需要太多技巧。 | 7 |'
- en: '| Affected Users | An attack can be targeting a single user.Dumping the MySQL
    database will include most of the customers and the admin account as well. | 7
    |'
  id: totrans-220
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 攻击可以针对单个用户。导出MySQL数据库将包括大多数客户和管理员账户。 | 7 |'
- en: '| Discoverability | The Login page (for admin authentication) in WordPress
    is only accessible through the intranet. So, discovering the application will
    be limited to the intranet zone. | 3 |'
  id: totrans-221
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | WordPress的登录页面（管理员身份验证）仅能通过内网访问。因此，发现该应用程序将仅限于内网区域。 | 3 |'
- en: '|  | **Total** | **6.2** |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '|  | **总分** | **6.2** |'
- en: Tampering – integrity
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 篡改 – 完整性
- en: '| **Threat Description** | Threat action that mainly aims to alter the data
    at rest or in transit. |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 威胁行动主要旨在改变静态或传输中的数据。 |'
- en: '| **Threat Target** | The site data. |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 网站数据。 |'
- en: '| **Attacker Steps** | An attacker can do the following for this type of threat:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: '| **攻击者步骤** | 攻击者可以为这种类型的威胁执行以下操作：'
- en: Can manipulate data through an SQL injection Attack / XSS Attack
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过SQL注入攻击/XSS攻击来操纵数据
- en: An internal attacker can manipulate data by accessing the database directly
    without having the right privilege
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 内部攻击者可以通过直接访问数据库来操纵数据，而无需拥有正确的权限
- en: An attacker can intercept the communication and alter it
  id: totrans-229
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击者可以拦截通信并进行篡改
- en: '|'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Counter-Measure** |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| **对策** |'
- en: The admin console for WordPress is only accessible through the intranet
  id: totrans-232
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: WordPress的管理员控制台仅能通过内网访问
- en: The database will not be accessible directly by a DB admin (only accessible
    through WordPress)
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库无法直接由数据库管理员访问（只能通过WordPress访问）
- en: Communication is only accessible through TLS
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通信仅能通过TLS进行访问
- en: '|'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Existing Counter-Measure** | N/A - it''s a new project. |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** | 暂无 - 这是一个新项目。 |'
- en: 'The DREAD review is as follows:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD评估如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-238
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详情** | **得分/10** |'
- en: '| Damage  | Manipulating the data will damage the blog site and its integrity
    as well. | 7 |'
  id: totrans-239
  prefs: []
  type: TYPE_TB
  zh: '| 损害  | 操控数据会损害博客网站及其完整性。 | 7 |'
- en: '| Reproducibility | It can be reproduced in a mid-long period of time. | 6
    |'
  id: totrans-240
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 在中长期内可以复现。 | 6 |'
- en: '| Exploitability | It takes a lot of skill to execute this attack. | 1 |'
  id: totrans-241
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 执行此攻击需要较高技能。 | 1 |'
- en: '| Affected Users | Most of the clients could be affected by this type of attack.
    | 6 |'
  id: totrans-242
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 大部分客户可能会受到这种类型攻击的影响。 | 6 |'
- en: '| Discoverability | The Login page (for admin authentication) in WordPress
    is only accessible through the intranet. So, discovering the application will
    be limited to the intranet zone. | 3 |'
  id: totrans-243
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | WordPress中的登录页面（用于管理员身份验证）仅能通过内网访问。因此，发现该应用程序将仅限于内网区域。 | 3 |'
- en: '|  | **Total** | **4.6** |'
  id: totrans-244
  prefs: []
  type: TYPE_TB
  zh: '|  | **总计** | **4.6** |'
- en: Repudiation
  id: totrans-245
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 否定
- en: '| **Threat Description** | Threat action aimed to perform illegal operations
    in a system that lacks the ability to trace the prohibited operations. |'
  id: totrans-246
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 旨在执行非法操作的威胁行为，且系统缺乏追踪禁止操作的能力。 |'
- en: '| **Threat Target** | Website (WordPress) functionalities. |'
  id: totrans-247
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 网站（WordPress）功能。 |'
- en: '| **Attacker Steps** | An attacker can deny his/her attacks if the application
    does not support proper security logging. |'
  id: totrans-248
  prefs: []
  type: TYPE_TB
  zh: '| **攻击者步骤** | 如果应用程序不支持适当的安全日志记录，攻击者可以否认其攻击。 |'
- en: '| **Counter-measure** | The application should:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '| **对策** | 应用程序应：'
- en: Log all the activities
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 记录所有活动
- en: Throw errors in case of a threat (for example, an SQLi attempt)
  id: totrans-251
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在威胁发生时抛出错误（例如SQLi尝试）
- en: '|'
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Existing Counter-measure** | N/A - it''s a new project. |'
  id: totrans-253
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** | 不适用——这是一个新项目。 |'
- en: 'The DREAD review is as follows:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD评审如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-255
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详情** | **得分/10** |'
- en: '| Damage | Some or little. | 2 |'
  id: totrans-256
  prefs: []
  type: TYPE_TB
  zh: '| 损害 | 一些或少量。 | 2 |'
- en: '| Reproducibility | Can be reproduced any time. | 7 |'
  id: totrans-257
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 可以随时复现。 | 7 |'
- en: '| Exploitability | The attacker will need some experience in application logging.
    | 3 |'
  id: totrans-258
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 攻击者需要一些应用程序日志方面的经验。 | 3 |'
- en: '| Affected Users | It can vary from 1 to more than 100. | 5 |'
  id: totrans-259
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 可能从1个用户到超过100个用户不等。 | 5 |'
- en: '| Discoverability | The attacker needs to know the logging/monitoring architecture.
    | 1 |'
  id: totrans-260
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | 攻击者需要了解日志/监控架构。 | 1 |'
- en: '|  | **Total** | **3.6** |'
  id: totrans-261
  prefs: []
  type: TYPE_TB
  zh: '|  | **总计** | **3.6** |'
- en: Information disclosure – confidentiality
  id: totrans-262
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 信息泄露——保密性
- en: '| **Threat Description** | Exposing information (at rest and in transit) to
    someone not authorized to see it. |'
  id: totrans-263
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 将信息（静态和传输中的）暴露给未经授权的人员。 |'
- en: '| **Threat Target** | Application (WordPress) data. |'
  id: totrans-264
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 应用程序（WordPress）数据。 |'
- en: '| **Attacker Steps** | An attacker can do the following for this type of threat:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: '| **攻击者步骤** | 攻击者可以采取以下步骤进行此类威胁：'
- en: Read data in transit
  id: totrans-266
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 读取传输中的数据
- en: Read data from logs
  id: totrans-267
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从日志中读取数据
- en: Read data from error messages
  id: totrans-268
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从错误信息中读取数据
- en: Blog article contents can reveal confidential information
  id: totrans-269
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 博客文章内容可能泄露机密信息
- en: A hacker can exfiltrate data through SQL Injection attacks
  id: totrans-270
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑客可以通过SQL注入攻击窃取数据
- en: A hacker can query data if he/she has access directly to the database
  id: totrans-271
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 黑客如果直接访问数据库，可以查询数据
- en: '|'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Counter-measure** |'
  id: totrans-273
  prefs: []
  type: TYPE_TB
  zh: '| **对策** |'
- en: Use only TLS for data in transit
  id: totrans-274
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅使用TLS传输数据
- en: Logs should not contain confidential information
  id: totrans-275
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 日志不应包含机密信息
- en: Error messages should be generic
  id: totrans-276
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 错误信息应为通用信息
- en: Blog articles will be approved by admins before they are published
  id: totrans-277
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 博客文章将在发布前由管理员审核
- en: Admins will approve the comments of the customers before they are published
  id: totrans-278
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 管理员将在发布前审核客户的评论
- en: The database will not be accessible directly by a DB admin (only accessible
    through WordPress)
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据库将无法直接由DB管理员访问（仅能通过WordPress访问）
- en: '|'
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Existing Counter-measure** | N/A - it''s a new project. |'
  id: totrans-281
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** | 不适用——这是一个新项目。 |'
- en: 'The DREAD report is as follows:'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD报告如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-283
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详情** | **得分/10** |'
- en: '| Damage | The damage of seeing the data inside WordPress is limited to the
    blogs of the company. | 3 |'
  id: totrans-284
  prefs: []
  type: TYPE_TB
  zh: '| 损害 | 查看WordPress内的数据的损害仅限于公司博客。 | 3 |'
- en: '| Reproducibility | Can be reproduced any time. | 7 |'
  id: totrans-285
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 可以随时复现。 | 7 |'
- en: '| Exploitability | The attacker will need some experience in application programming
    and advanced attacks. | 3 |'
  id: totrans-286
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 攻击者需要一些应用程序编程和高级攻击经验。 | 3 |'
- en: '| Affected Users | It can vary from 1 to more than 100. | 5 |'
  id: totrans-287
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 可能从1个用户到超过100个用户不等。 | 5 |'
- en: '| Discoverability | The attacker needs to know the application architecture.
    | 3 |'
  id: totrans-288
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | 攻击者需要了解应用程序架构。 | 3 |'
- en: '|  | **Total** | **4.2** |'
  id: totrans-289
  prefs: []
  type: TYPE_TB
  zh: '|  | **总计** | **4.2** |'
- en: Denial of service – availability
  id: totrans-290
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 拒绝服务 - 可用性
- en: '| **Threat Description** | The application will be temporarily unavailable
    or unusable. |'
  id: totrans-291
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 应用程序将暂时无法使用或不可用。 |'
- en: '| **Threat Target** | Application operations. |'
  id: totrans-292
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 应用程序操作。 |'
- en: '| **Attacker Steps** | An attacker can send a huge number of requests aiming
    to bring the site down.   |'
  id: totrans-293
  prefs: []
  type: TYPE_TB
  zh: '| **攻击者步骤** | 攻击者可以发送大量请求，旨在使网站崩溃。 |'
- en: '| **Counter-measure** | Putting a threshold in the application configuration
    file or web server. |'
  id: totrans-294
  prefs: []
  type: TYPE_TB
  zh: '| **对策** | 在应用程序配置文件或Web服务器中设置一个阈值。 |'
- en: '| **Existing Counter-measure** | Production Servers Load Balancing. |'
  id: totrans-295
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** | 生产服务器负载均衡。 |'
- en: 'The DREAD report is as follows:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD报告如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-297
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详情** | **分数 /10** |'
- en: '| Damage | The website will be inaccessible. | 8 |'
  id: totrans-298
  prefs: []
  type: TYPE_TB
  zh: '| 损害 | 网站将无法访问。 | 8 |'
- en: '| Reproducibility | Can be reproduced any time. | 8 |'
  id: totrans-299
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 可以随时重现。 | 8 |'
- en: '| Exploitability | A script kiddie can execute it. | 8 |'
  id: totrans-300
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 即便是脚本小子也可以执行此攻击。 | 8 |'
- en: '| Affected Users | Between 100 and probably more than 1,000. | 7 |'
  id: totrans-301
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 大约在100人至1000人以上。 | 7 |'
- en: '| Discoverability | Anyone can discover it using the URL. | 9 |'
  id: totrans-302
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | 任何人都可以通过URL发现该漏洞。 | 9 |'
- en: '|  | Total | **8** |'
  id: totrans-303
  prefs: []
  type: TYPE_TB
  zh: '|  | 总计 | **8** |'
- en: Elevation of privilege – authorization
  id: totrans-304
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 权限提升 - 授权
- en: '| **Threat Description** | Threat aimed at gaining privileged access to resources,
    for gaining unauthorized access to information or to compromise a system. |'
  id: totrans-305
  prefs: []
  type: TYPE_TB
  zh: '| **威胁描述** | 旨在获取对资源的特权访问，进而未经授权地访问信息或危害系统的威胁。 |'
- en: '| **Threat Target** | Network Infrastructure. |'
  id: totrans-306
  prefs: []
  type: TYPE_TB
  zh: '| **威胁目标** | 网络基础设施。 |'
- en: '| **Attacker Steps** | After getting authenticated into the system, an attacker can
    upload a remote shell to manipulate the server remotely. If there are any missing
    configurations or patches, the hacker can take advantage of the flaw and escalate
    his/her  privileges. |'
  id: totrans-307
  prefs: []
  type: TYPE_TB
  zh: '| **攻击者步骤** | 在系统认证后，攻击者可以上传远程Shell来远程操控服务器。如果存在任何配置或补丁漏洞，黑客可以利用该漏洞提升其权限。 |'
- en: '| **Counter-measure** |'
  id: totrans-308
  prefs: []
  type: TYPE_TB
  zh: '| **对策** |'
- en: Servers are always scanned for missing patches and configurations as well
  id: totrans-309
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器也会定期扫描是否缺少补丁和配置
- en: Monitoring the applications for any suspicious activities
  id: totrans-310
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 监控应用程序以发现任何可疑活动
- en: '|'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| **Existing Counter-measure** |'
  id: totrans-312
  prefs: []
  type: TYPE_TB
  zh: '| **现有对策** |'
- en: Intrusion Detection Systems
  id: totrans-313
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 入侵检测系统
- en: Smart Data Loss Prevention Systems
  id: totrans-314
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智能数据丢失防护系统
- en: Smart Firewalls
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智能防火墙
- en: Network Separation using VLANs and Firewalls
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用VLAN和防火墙进行网络隔离
- en: '|'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: 'The DREAD report is as follows:'
  id: totrans-318
  prefs: []
  type: TYPE_NORMAL
  zh: DREAD报告如下：
- en: '| **DREAD** | **Details** | **Score /10** |'
  id: totrans-319
  prefs: []
  type: TYPE_TB
  zh: '| **DREAD** | **详情** | **分数 /10** |'
- en: '| Damage | The damage is very high in this case because the hacker will own
    the system and the network as well. | 10 |'
  id: totrans-320
  prefs: []
  type: TYPE_TB
  zh: '| 损害 | 在这种情况下，损害非常大，因为黑客将拥有系统和网络。 | 10 |'
- en: '| Reproducibility | It can be reproduced any time when the countermeasures
    are not implemented. | 10 |'
  id: totrans-321
  prefs: []
  type: TYPE_TB
  zh: '| 可重现性 | 如果未实施对策，任何时候都可以重现。 | 10 |'
- en: '| Exploitability | The attack can be executed by an intermediate skill hacker.
    | 9 |'
  id: totrans-322
  prefs: []
  type: TYPE_TB
  zh: '| 可利用性 | 该攻击可以由具备中等技能的黑客执行。 | 9 |'
- en: '| Affected Users | Between 100 and probably more than 1,000. | 7 |'
  id: totrans-323
  prefs: []
  type: TYPE_TB
  zh: '| 受影响的用户 | 大约在100人至1000人以上。 | 7 |'
- en: '| Discoverability | The flaw can be discovered internally because the admin
    console is not accessible to the outside perimeter. | 6 |'
  id: totrans-324
  prefs: []
  type: TYPE_TB
  zh: '| 可发现性 | 该漏洞可以在内部被发现，因为管理员控制台无法外部访问。 | 6 |'
- en: '|  | Total | **8.4** |'
  id: totrans-325
  prefs: []
  type: TYPE_TB
  zh: '|  | 总计 | **8.4** |'
- en: Test strategies
  id: totrans-326
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 测试策略
- en: 'The application security team under Information Security Management will conduct
    the necessary security tests to enhance the web application''s security posture.
    The activity listed in the following table will include all the items that need
    to be executed during the security penetration tests:'
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 信息安全管理下的应用安全团队将进行必要的安全测试，以增强Web应用程序的安全性。以下表格中的活动将包括所有需要在安全渗透测试中执行的项目：
- en: '| **ID** | **Name** | **Tools** | **Description** | **Environment** |'
  id: totrans-328
  prefs: []
  type: TYPE_TB
  zh: '| **ID** | **名称** | **工具** | **描述** | **环境** |'
- en: '| 1 | Manual Source Review |'
  id: totrans-329
  prefs: []
  type: TYPE_TB
  zh: '| 1 | 手动源代码审查 |'
- en: Veracode
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Veracode
- en: Visual Studio IDE  for .NET
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Visual Studio IDE for .NET
- en: Eclipse IDE for JAVA
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Eclipse IDE for JAVA
- en: '| We don''t need to inspect the source code since the application will be using
    WordPress CMS. | Pre-Prod |'
  id: totrans-333
  prefs: []
  type: TYPE_TB
  zh: '| 我们不需要检查源代码，因为该应用程序将使用WordPress CMS。 | 预生产环境 |'
- en: '| 2 | Web Intrusion Tests | Burp Suite Pro | The security analysts will execute
    a manual and automated Web Intrusion Test. This will simulate an attack that can
    happen on the website. | Pre-Prod |'
  id: totrans-334
  prefs: []
  type: TYPE_TB
  zh: '| 2 | Web入侵测试 | Burp Suite Pro | 安全分析员将执行手动和自动化Web入侵测试。这将模拟网站可能发生的攻击。 | Pre-Prod
    |'
- en: '| 3 | Web Services Fuzzing | Burp Suite Pro | N/A | N/A |'
  id: totrans-335
  prefs: []
  type: TYPE_TB
  zh: '| 3 | Web服务模糊测试 | Burp Suite Pro | N/A | N/A |'
- en: '| 4 | Webserver Infrastructure Test |'
  id: totrans-336
  prefs: []
  type: TYPE_TB
  zh: '| 4 | Web服务器基础设施测试 |'
- en: Nessus
  id: totrans-337
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nessus
- en: Nmap
  id: totrans-338
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Nmap
- en: '| The security analyst will test the web server infrastructure security and
    be looking for any missing security patches or non-secure settings. | PROD |'
  id: totrans-339
  prefs: []
  type: TYPE_TB
  zh: '| 安全分析员将测试web服务器基础设施的安全性，并寻找任何缺失的安全补丁或不安全的设置。 | PROD |'
- en: Summary
  id: totrans-340
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: As you've seen in this chapter, ATM is not so hard after all. People underestimate
    the importance of this document, but once you start using it, you won't be able
    to stop because it has so many benefits. Be creative and don't stick to the same
    template discussed in this chapter; instead, use it as a guideline for your next
    application threat modeling document.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在本章中看到的，ATM其实并不难。人们往往低估了这个文档的重要性，但一旦你开始使用它，你就再也停不下来了，因为它有太多好处。要富有创意，不要局限于本章讨论的模板；相反，应该将其作为下一个应用威胁建模文档的指导方针。
- en: Any professional website project starts with an architecture phase, and that's
    when you need to show your skills and consider the ATM document as a security
    architecture document as well. Your job is not only to be a pentester, and that's
    a very important concept to understand in the security field. Feel free to add
    your desired sections, for example monitoring, logging, secure coding, security
    controls, or any recommendations that you feel will help the project at the beginning
    before they start with the development phase.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 任何专业的网站项目都从架构阶段开始，这时你需要展示你的技能，并将ATM文档视为一个安全架构文档。你的工作不仅仅是成为一个渗透测试员，这是在安全领域中非常重要的概念。你可以自由地添加你希望的章节，例如监控、日志记录、安全编码、安全控制，或任何你认为在项目初期对开发阶段有帮助的建议。
- en: In the next chapter, we will discuss another important topic in application
    security; static code analysis (Source Code Review). I won't go into details about
    it for the time being. I will leave the fun of discovering all the interesting
    stuff for the next chapter.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论应用安全中的另一个重要主题：静态代码分析（源代码审查）。我暂时不会详细讨论这一点，我会把发现所有有趣内容的乐趣留给下一章。
