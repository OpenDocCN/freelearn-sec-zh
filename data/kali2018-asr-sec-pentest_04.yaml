- en: Footprinting and Information Gathering
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 足迹和信息收集
- en: In this chapter, we will discuss the information gathering phase of penetration
    testing. We will describe the definition and purpose of information gathering.
    We will also describe several tools in Kali Linux that can be used for information
    gathering. After reading this chapter, we hope that the reader will have a better
    understanding of the information gathering phase and will be able to do information
    gathering during penetration testing.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论渗透测试的信息收集阶段。我们将描述信息收集的定义和目的。我们还将描述Kali Linux中可以用于信息收集的几种工具。阅读完本章后，我们希望读者能更好地理解信息收集阶段，并能够在渗透测试期间进行信息收集。
- en: Information gathering is the second phase in our penetration testing process
    (Kali Linux testing process) as explained in the Kali Linux testing methodology
    section in [Chapter 3](4e2983d0-0bc4-4d57-a0a2-760ebaef8f57.xhtml), *Penetration
    Testing Methodology*. In this phase, we try to collect as much information as
    we can about the target, for example, information about the **Domain Name System**
    (**DNS**) hostnames, IP addresses, technologies and configuration used, username's
    organization, documents, application code, password reset information, contact
    information, and so on. During information gathering, every piece of information
    gathered is considered important.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 信息收集是我们渗透测试过程（Kali Linux测试过程）中的第二阶段，如[第3章](4e2983d0-0bc4-4d57-a0a2-760ebaef8f57.xhtml)中的Kali
    Linux测试方法论部分所述，*渗透测试方法论*。在这个阶段，我们试图收集尽可能多的关于目标的信息，例如**域名系统**（**DNS**）主机名、IP地址、使用的技术和配置、用户名的组织、文档、应用程序代码、密码重置信息、联系信息等等。在信息收集期间，收集到的每一条信息都被认为是重要的。
- en: 'Information gathering can be categorized in two ways based on the method used:
    active information gathering and passive information gathering. In the active
    information gathering method, we collect information by introducing network traffic
    to the target network, while in the passive information gathering method, we gather
    information about a target network by utilizing a third party''s services, such
    as the Google search engine. We will cover this later on.'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 根据使用的方法，信息收集可以分为两种方式：主动信息收集和被动信息收集。在主动信息收集方法中，我们通过向目标网络引入网络流量来收集信息，而在被动信息收集方法中，我们通过利用第三方服务（如谷歌搜索引擎）来收集有关目标网络的信息。我们将在后面进行介绍。
- en: Remember that neither method is better in comparison to the other; each has
    its own advantage. In passive scanning, you gather less information, but your
    action will be stealthy, while in active scanning, you get more information, but
    some devices may catch your action. During a penetration testing project, this
    phase may be done several times for the completeness of information collected.
    You may also discuss with your pen-testing customer which method they want.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，这两种方法都没有比另一种更好；每种方法都有其自身的优势。在被动扫描中，您收集的信息较少，但您的行动将是隐秘的，而在主动扫描中，您可以获得更多信息，但某些设备可能会察觉到您的行动。在渗透测试项目中，这个阶段可能会多次进行，以确保收集到的信息完整。您还可以与您的渗透测试客户讨论他们想要哪种方法。
- en: For this chapter, we will utilize the passive and active methods of information
    gathering to get a better picture of the target.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将利用被动和主动的信息收集方法来更好地了解目标。
- en: 'We will be discussing the following topics in this chapter:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Public websites that can be used to collect information about the target domain
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可用于收集有关目标域的信息的公共网站
- en: Domain registration information
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域名注册信息
- en: DNS analysis
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS分析
- en: Route information
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 路线信息
- en: Search engine utilization
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索引擎利用
- en: Open Source Intelligence
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开源情报
- en: One of the key terms often associated with information gathering is **Open Source
    Intelligence** (**OSINT**). Military and intelligence organizations divide their
    intelligence sources into a variety of types. True espionage, involving interaction
    between spies, is often referred to as **Human Intelligence** (**HUMINT**). The
    capturing of radio signals with the intent of cracking the encryption is called
    **Signals Intelligence** (**SIGINT**). While the penetration tester is not likely
    to interface with either of these, the information gathering stage is OSINT. OSINT
    is information derived from sources that have no security controls preventing
    their disclosure. They are often public records or information that target organizations
    share as part of their daily operations.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 与信息收集经常相关的一个关键术语是**开源情报**（**OSINT**）。军事和情报组织将他们的情报来源分为各种类型。真正的间谍活动，涉及间谍之间的互动，通常被称为**人类情报**（**HUMINT**）。以破解加密为目的捕获无线电信号被称为**信号情报**（**SIGINT**）。虽然渗透测试人员不太可能与这两者中的任何一种进行接触，但信息收集阶段是OSINT。OSINT是从没有安全控制阻止其披露的来源获取的信息。它们通常是公共记录或目标组织作为其日常运营的一部分分享的信息。
- en: For this information to be of use to the penetration tester, they need specific
    knowledge and tools to find this information. The information gathering stage
    relies heavily on this information. In addition, simply showing an organization
    what OSINT they are leaking may give them an idea of areas in which to increase
    security. As we will see in this chapter, there is a great deal of information
    that is visible to those who know where to look.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 对于渗透测试人员来说，要利用这些信息，他们需要特定的知识和工具来找到这些信息。信息收集阶段在很大程度上依赖于这些信息。此外，简单地向组织展示他们泄露的OSINT信息可能会让他们了解到需要增加安全性的领域。正如我们将在本章中看到的，对于那些知道在哪里寻找的人来说，有大量信息是可见的。
- en: Using public resources
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用公共资源
- en: On the internet, there are several public resources that can be used to collect
    information regarding a target domain. The benefit of using these resources is
    that your network traffic is not sent to the target domain directly, so your activities
    are not recorded in the target domain log files.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在互联网上，有几个可以用于收集有关目标域的信息的公共资源。使用这些资源的好处是，您的网络流量不会直接发送到目标域，因此您的活动不会记录在目标域日志文件中。
- en: 'The following are the resources that can be used:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是可以使用的资源：
- en: '| No. | Resource URL | Description |'
  id: totrans-18
  prefs: []
  type: TYPE_TB
  zh: '| No. | 资源URL | 描述 |'
- en: '| 1 | [http://www.archive.org](http://www.archive.org) | This contains an archive
    of websites. |'
  id: totrans-19
  prefs: []
  type: TYPE_TB
  zh: '| 1 | [http://www.archive.org](http://www.archive.org) | 这包含网站的存档。|'
- en: '| 2 | [http://www.domaintools.com/](http://www.domaintools.com/) | This contains
    domain name intelligence. |'
  id: totrans-20
  prefs: []
  type: TYPE_TB
  zh: '| 2 | [http://www.domaintools.com/](http://www.domaintools.com/) | 这包含域名情报。|'
- en: '| 3 | [http://www.alexa.com/](http://www.alexa.com/) | This contains the database
    of information about websites. |'
  id: totrans-21
  prefs: []
  type: TYPE_TB
  zh: '| 3 | [http://www.alexa.com/](http://www.alexa.com/) | 这包含有关网站的信息数据库。|'
- en: '| 4 | [http://serversniff.net/](http://serversniff.net/) | This is the free
    **Swiss Army Knife** for networking, server checks, and routing. |'
  id: totrans-22
  prefs: []
  type: TYPE_TB
  zh: '| 4 | [http://serversniff.net/](http://serversniff.net/) | 这是用于网络、服务器检查和路由的免费**瑞士军刀**。|'
- en: '| 5 | [http://centralops.net/](http://centralops.net/) | This contains free
    online network utilities such as domain, email, browser, ping, traceroute, and
    Whois. |'
  id: totrans-23
  prefs: []
  type: TYPE_TB
  zh: '| 5 | [http://centralops.net/](http://centralops.net/) | 这包含免费的在线网络实用工具，如域名、电子邮件、浏览器、ping、traceroute和Whois。|'
- en: '| 6 | [http://www.robtex.com](http://www.robtex.com) | This allows you to search
    for domain and network information. |'
  id: totrans-24
  prefs: []
  type: TYPE_TB
  zh: '| 6 | [http://www.robtex.com](http://www.robtex.com) | 这允许您搜索域和网络信息。|'
- en: '| 7 | [http://www.pipl.com/](http://www.pipl.com/) | This allows you to search
    for people on the internet by their first and last names, city, state, and country.
    |'
  id: totrans-25
  prefs: []
  type: TYPE_TB
  zh: '| 7 | [http://www.pipl.com/](http://www.pipl.com/) | 这允许您通过他们的名字、姓氏、城市、州和国家在互联网上搜索人。|'
- en: '| 8 | [http://wink.com/](http://wink.com/) | This is a free search engine that
    allows you to find people by their name, phone number, email, website, photo,
    and so on. |'
  id: totrans-26
  prefs: []
  type: TYPE_TB
  zh: '| 8 | [http://wink.com/](http://wink.com/) | 这是一个免费的搜索引擎，允许您通过姓名、电话号码、电子邮件、网站、照片等查找人。|'
- en: '| 9 | [http://www.isearch.com/](http://www.isearch.com/) | This is a free search
    engine that allows you to find people by their name, phone number, and email address.
    |'
  id: totrans-27
  prefs: []
  type: TYPE_TB
  zh: '| 9 | [http://www.isearch.com/](http://www.isearch.com/) | 这是一个免费的搜索引擎，允许您通过姓名、电话号码和电子邮件地址查找人。|'
- en: '| 10 | [http://www.tineye.com](http://www.tineye.com) | TinEye is a reverse
    image search engine. We can use TinEye to find out where the image came from,
    how it is being used, whether modified versions of the image exist, or to find
    higher resolution versions. |'
  id: totrans-28
  prefs: []
  type: TYPE_TB
  zh: '| 10 | [http://www.tineye.com](http://www.tineye.com) | TinEye是一个反向图像搜索引擎。我们可以使用TinEye找出图像来自何处，如何使用它，是否存在修改版本的图像，或者找到更高分辨率的版本。|'
- en: '| 11 | [http://www.sec.gov/edgar.shtml](http://www.sec.gov/edgar.shtml) | This
    can be used to search for information regarding public listed companies in the
    Securities and Exchange Commission. |'
  id: totrans-29
  prefs: []
  type: TYPE_TB
  zh: '| 11 | [http://www.sec.gov/edgar.shtml](http://www.sec.gov/edgar.shtml) | 这可用于搜索证券交易委员会中公开上市公司的信息。|'
- en: Due to the ease of use—you only need an internet connection and a web browser—we
    suggest that you utilize these public resources first before using the tools provided
    with Kali Linux.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 由于易于使用——您只需要互联网连接和网络浏览器——我们建议您在使用Kali Linux提供的工具之前首先使用这些公共资源。
- en: To protect a domain from being abused, we have changed the domain name that
    we used in our examples. We are going to use several domain names, such as `example.com`
    from IANA and the free hacking testing site [https://www.hackthissite.org/](https://www.hackthissite.org/)
    as well, for illustrative purposes.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 为了保护域名不被滥用，我们已经更改了我们在示例中使用的域名。我们将使用一些域名，例如来自IANA的`example.com`和免费的黑客测试网站[https://www.hackthissite.org/](https://www.hackthissite.org/)，以进行说明。
- en: Querying the domain registration information
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 查询域名注册信息
- en: After you know the target domain name, the first thing you would want to do
    is query the `Whois` database about that domain to look for the domain registration
    information. The `Whois` database will provide information about the DNS server
    and the contact information of a domain.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 在了解目标域名后，您首先要做的是查询`Whois`数据库有关该域名的信息，以查找域名注册信息。`Whois`数据库将提供有关域名的DNS服务器和联系信息的信息。
- en: '`Whois` is a protocol for searching internet registrations, databases for registered
    domain names, IPs, and autonomous systems. This protocol is specified in RFC 3912
    ([https://www.ietf.org/rfc/rfc3912.txt](https://www.ietf.org/rfc/rfc3912.txt)).'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '`Whois`是一种用于搜索互联网注册、已注册域名、IP和自治系统的协议。该协议在RFC 3912中指定（[https://www.ietf.org/rfc/rfc3912.txt](https://www.ietf.org/rfc/rfc3912.txt)）。'
- en: 'By default, Kali Linux already comes with a `whois` client. To find out the
    `Whois` information for a domain, just type the following command:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Kali Linux已经配备了`whois`客户端。要查找域的`Whois`信息，只需输入以下命令：
- en: '[PRE0]'
  id: totrans-36
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following is the result of the `Whois` information:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是`Whois`信息的结果：
- en: '[PRE1]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: From the preceding `Whois` result, we can get the information of the DNS server
    and the contact person of a domain. This information will be useful in the later
    stages of penetration testing.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 从前面的`Whois`结果中，我们可以获得域名的DNS服务器和联系人的信息。这些信息将在渗透测试的后期阶段非常有用。
- en: 'Besides using the command-line `Whois` client, the `Whois` information can
    also be collected via the following websites, which provide the `whois` client:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 除了使用命令行`Whois`客户端，`Whois`信息也可以通过以下网站收集，这些网站提供了`whois`客户端：
- en: '[www.whois.net](http://www.whois.net)'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[www.whois.net](http://www.whois.net)'
- en: '[www.internic.net/whois.html](http://www.internic.net/whois.html)'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[www.internic.net/whois.html](http://www.internic.net/whois.html)'
- en: 'You can also go to the top-level domain registrar for the corresponding domain:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以转到相应域名的顶级域名注册商：
- en: '**America**: [www.arin.net/whois/](http://www.arin.net/whois/)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**美国**：[www.arin.net/whois/](http://www.arin.net/whois/)'
- en: '**Europe**: [www.db.ripe.net/whois](http://www.db.ripe.net/whois)'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**欧洲**：[www.db.ripe.net/whois](http://www.db.ripe.net/whois)'
- en: '**Asia-Pacific**: [www.apnic.net/apnic-info/whois_search2](http://www.apnic.net/apnic-info/whois_search2)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**亚太地区**：[www.apnic.net/apnic-info/whois_search2](http://www.apnic.net/apnic-info/whois_search2)'
- en: 'Beware: to use the top-level domain registrar `whois`, the domain needs to
    be registered through their own system. For example, if you use `ARIN WHOIS`,
    it only searches in the `ARIN WHOIS` database and will not search in the `RIPE`
    and `APNIC Whois` databases.'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 注意：要使用顶级域名注册商的“whois”，域名需要通过其自己的系统注册。例如，如果您使用“ARIN WHOIS”，它只在“ARIN WHOIS”数据库中搜索，而不会在“RIPE”和“APNIC
    Whois”数据库中搜索。
- en: After getting information from the `Whois` database, next we want to gather
    information about the DNS entries of the target domain.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 从“Whois”数据库获取信息后，接下来我们想收集有关目标域的DNS条目的信息。
- en: Analyzing the DNS records
  id: totrans-49
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 分析DNS记录
- en: The goal of using the tools in the DNS records category is to collect information
    about the DNS servers and the corresponding records of a target domain.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 使用DNS记录类别中的工具的目标是收集有关目标域的DNS服务器和相应记录的信息。
- en: 'The following are several common DNS record types:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是几种常见的DNS记录类型：
- en: '| No. | Record type | Description |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: No. | 记录类型 | 描述
- en: '| 1 | SOA | This is the start of authority record. |'
  id: totrans-53
  prefs: []
  type: TYPE_TB
  zh: 1 | SOA | 这是权威记录的开始。
- en: '| 2 | NS | This is the name server record. |'
  id: totrans-54
  prefs: []
  type: TYPE_TB
  zh: 2 | NS | 这是名称服务器记录。
- en: '| 3 | A | This is the IPv4 address record. |'
  id: totrans-55
  prefs: []
  type: TYPE_TB
  zh: 3 | A | 这是IPv4地址记录。
- en: '| 4 | MX | This is the mail exchange record. |'
  id: totrans-56
  prefs: []
  type: TYPE_TB
  zh: 4 | MX | 这是邮件交换记录。
- en: '| 5 | PTR | This is the pointer record. |'
  id: totrans-57
  prefs: []
  type: TYPE_TB
  zh: 5 | PTR | 这是指针记录。
- en: '| 6 | AAAA | This is the IPv6 address record. |'
  id: totrans-58
  prefs: []
  type: TYPE_TB
  zh: 6 | AAAA | 这是IPv6地址记录。
- en: '| 7 | CNAME | This is the abbreviation for canonical name. It is used as an
    alias name for another canonical domain name. |'
  id: totrans-59
  prefs: []
  type: TYPE_TB
  zh: 7 | CNAME | 这是规范名称的缩写。它用作另一个规范域名的别名。
- en: For example, in a penetration test engagement, the customer may ask you to find
    out all of the hosts and IP addresses available for their domain. The only information
    you have is the organization's domain name. We will look at several common tools
    that can help you if you encounter this situation.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在渗透测试中，客户可能会要求您查找其域名下所有可用的主机和IP地址。您唯一拥有的信息是组织的域名。我们将看一些常见的工具，如果您遇到这种情况，可以帮助您。
- en: Host
  id: totrans-61
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 主机
- en: 'After we get the DNS server information, the next step is to find out the IP
    address of a hostname. To help us out on this matter, we can use the following
    host command-line tool to look up the IP address of a host from a DNS server:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 在获取DNS服务器信息之后，下一步是查找主机名的IP地址。为了帮助我们解决这个问题，我们可以使用以下主机命令行工具来从DNS服务器查找主机的IP地址：
- en: '[PRE2]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'By default, the `host` command will look for the `A`, `AAAA`, and `MX` records
    of a domain. To query for any records, just give the `-a` option to the command:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，“host”命令将查找域的“A”、“AAAA”和“MX”记录。要查询任何记录，只需将“-a”选项提供给命令：
- en: '[PRE3]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: The `host` command looks for these records by querying the DNS servers listed
    in the `/etc/resolv.conf` file of your Kali Linux system. If you want to use other
    DNS servers, just provide the DNS server address as the last command-line option.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: “host”命令通过查询Kali Linux系统的“/etc/resolv.conf”文件中列出的DNS服务器来查找这些记录。如果要使用其他DNS服务器，只需将DNS服务器地址提供为最后一个命令行选项。
- en: If you provide the domain name as the command-line option in `host`, the method
    is called forward lookup, but if you give an IP address as the command-line option
    to the `host` command, the method is called reverse lookup.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您将域名作为“host”命令行选项，该方法称为正向查找，但如果您将IP地址作为“host”命令的命令行选项，则该方法称为反向查找。
- en: 'Try to do a reverse lookup of the following IP address:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 尝试对以下IP地址进行反向查找：
- en: '[PRE4]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: What information can you get from this command?
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从这个命令中获得什么信息？
- en: The `host` tool can also be used to do a DNS zone transfer. With this mechanism,
    we can collect information about the available hostnames in a domain.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: “host”工具也可以用于进行DNS区域传输。通过这种机制，我们可以收集有关域中可用主机名的信息。
- en: A DNS zone transfer is a mechanism used to replicate a DNS database from a master
    DNS server to another DNS server, usually called a slave DNS server. Without this
    mechanism, the administrators have to update each DNS server separately. The DNS
    zone transfer query must be issued to an authoritative DNS server of a domain.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: DNS区域传输是一种机制，用于将主DNS服务器上的DNS数据库复制到另一个DNS服务器，通常称为从属DNS服务器。如果没有这种机制，管理员必须单独更新每个DNS服务器。必须向域的权威DNS服务器发出DNS区域传输查询。
- en: Due to the nature of information that can be gathered by a DNS zone transfer,
    nowadays, it is very rare to find a DNS server that allows zone transfer to an
    arbitrary zone transfer request.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 由于DNS区域传输可以收集的信息的性质，现在很少能找到允许向任意区域传输请求的DNS服务器。
- en: If you find a DNS server that allows zone transfer without limiting who is able
    to do it, this means that the DNS server has been configured incorrectly.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您找到一个允许区域传输而不限制谁能够执行它的DNS服务器，这意味着DNS服务器配置不正确。
- en: dig
  id: totrans-75
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: dig
- en: Besides the `host` command, you can also use the `dig` command to do DNS interrogation.
    The advantages of `dig` compared to `host` are its flexibility and clarity of
    output. With `dig`, you can ask the system to process a list of lookup requests
    from a file.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 除了“host”命令，您还可以使用“dig”命令进行DNS查询。与“host”相比，“dig”的优势在于其灵活性和输出的清晰度。使用“dig”，您可以要求系统从文件中处理一系列查找请求。
- en: Let's use `dig` to interrogate the [http://hackthissite.org](http://hackthissite.org)
    domain.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们使用“dig”来查询[http://hackthissite.org](http://hackthissite.org)域。
- en: 'Without providing any options besides the domain name, the `dig` command will
    only return the A record of a domain. To request any other DNS record type, we
    can provide the type option in the command line:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 除了域名之外，如果没有提供任何选项，“dig”命令将只返回域的A记录。要请求任何其他DNS记录类型，可以在命令行中提供类型选项：
- en: '[PRE5]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: From the result, we can see that the `dig` output now returns the DNS records
    of `A`.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 从结果中，我们可以看到“dig”输出现在返回了“A”的DNS记录。
- en: DMitry
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DMitry
- en: '**Deepmagic Information Gathering Tool** (**DMitry**) is an all-in-one information
    gathering tool. It can be used to gather the following information:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '**Deepmagic信息收集工具**（**DMitry**）是一款多合一信息收集工具。它可用于收集以下信息：'
- en: The `Whois` record of a host by using the IP address or domain name
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用IP地址或域名查询主机的`Whois`记录
- en: Host information from [https://www.netcraft.com/](https://www.netcraft.com/)
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从[https://www.netcraft.com/](https://www.netcraft.com/)获取主机信息
- en: Subdomains in the target domain
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目标域中的子域
- en: The email address of the target domain
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 目标域的电子邮件地址
- en: Open, filtered, or closed port lists on the target machine by performing a port
    scan
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在目标机器上执行端口扫描，打开、过滤或关闭端口列表
- en: Even though this information can be obtained using several Kali Linux tools,
    it is very handy to gather all of the information using a single tool and to save
    the report to one file.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管可以使用几个Kali Linux工具获取这些信息，但使用单个工具收集所有信息并将报告保存到一个文件非常方便。
- en: We think this tool is more suitable to be categorized under DNS analysis instead
    of the *Route analysis* section because the capabilities are more about DNS analysis
    rather than routing analysis.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 我们认为这个工具更适合归类为DNS分析，而不是*路由分析*部分，因为其功能更多地涉及DNS分析而不是路由分析。
- en: 'To access `DMitry` from the Kali Linux menu, navigate to Applications | Information
    Gathering | dmitry, or you can use the console and type the following command:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 要从Kali Linux菜单访问`DMitry`，请导航到应用程序|信息收集|dmitry，或者您可以使用控制台并输入以下命令：
- en: '[PRE6]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'As an example, let''s do the following to a target host:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，让我们对目标主机执行以下操作：
- en: Perform a `Whois` lookup
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行`Whois`查找
- en: Get information from [https://www.netcraft.com/](https://www.netcraft.com/)
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从[https://www.netcraft.com/](https://www.netcraft.com/)获取信息
- en: Search for all the possible subdomains
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索所有可能的子域
- en: Search for all the possible email addresses
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 搜索所有可能的电子邮件地址
- en: 'The command for performing the mentioned actions is as follows:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 执行上述操作的命令如下：
- en: '[PRE7]'
  id: totrans-98
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The following is the abridged result of the preceding command:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 前述命令的结果摘要如下：
- en: '[PRE8]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We can also use `dmitry` to perform a simple port scan by providing the following
    command:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以使用`dmitry`通过提供以下命令执行简单的端口扫描：
- en: '[PRE9]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The result of the preceding command is as follows:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 前述命令的结果如下：
- en: '[PRE10]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: From the preceding command, we find that the target host is using a device to
    do packet filtering. It only allows incoming connections to port `22` for SSH
    and port `80`, which is commonly used for a web server. What is of interest is
    that the type of SSH installation is indicated, allowing for further research
    on possible vulnerabilities to the OpenSSH installation.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 从前述命令中，我们发现目标主机正在使用设备进行数据包过滤。它只允许端口`22`用于SSH的传入连接和端口`80`，这通常用于Web服务器。有趣的是，SSH安装的类型被指出，允许进一步研究对OpenSSH安装的可能漏洞。
- en: Maltego
  id: totrans-106
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Maltego
- en: Maltego is an open source intelligence and forensics application. It allows
    you to mine and gather information and represent the information in a meaningful
    way. The phrase open source in Maltego means that it gathers information from
    open source resources. After gathering the information, Maltego allows you to
    identify the key relationship between the information gathered.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego是一款开源情报和取证应用程序。它允许您挖掘和收集信息，并以有意义的方式表示信息。Maltego中的开源短语意味着它从开源资源中收集信息。在收集信息后，Maltego允许您确定所收集信息之间的关键关系。
- en: Maltego is a tool that can graphically display the links between data, so it
    will make it easier to see the common aspects between pieces of information.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego是一种可以以图形方式显示数据之间联系的工具，因此将更容易看到信息之间的共同点。
- en: 'Maltego allows you to enumerate the following internet infrastructure information:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego允许您枚举以下互联网基础设施信息：
- en: Domain names
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域名
- en: DNS names
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS名称
- en: '`Whois` information'
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Whois`信息'
- en: Network blocks
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络块
- en: IP addresses
  id: totrans-114
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: IP地址
- en: 'It can also be used to gather the following information about people:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 它还可以用于收集有关人的以下信息：
- en: Companies and organizations related to the person
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与该人相关的公司和组织
- en: Email addresses related to the person
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与该人相关的电子邮件地址
- en: Websites related to the person
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与该人相关的网站
- en: Social networks related to the person
  id: totrans-119
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与该人相关的社交网络
- en: Phone numbers related to the person
  id: totrans-120
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与该人相关的电话号码
- en: Social media information
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社交媒体信息
- en: 'Kali Linux, by default, comes with Maltego 3.6.1 Kali Linux edition. The following
    are the limitations of the community version:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux默认配备了Maltego 3.6.1 Kali Linux版。社区版的限制如下：
- en: Not for commercial use
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不得用于商业用途
- en: A maximum of 12 results per transform
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个变换最多12个结果
- en: You need to register yourself on our website to use the client
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 您需要在我们的网站上注册才能使用客户端
- en: API keys expire every couple of days
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: API密钥每隔几天就会过期
- en: Runs on a (slower) server that is shared with all community users
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在与所有社区用户共享的（较慢的）服务器上运行
- en: Communication between client and server is not encrypted
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 客户端和服务器之间的通信未加密
- en: Not updated until the next major version
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直到下一个主要版本才会更新
- en: No end user support
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 没有最终用户支持
- en: No updates of transforms on the server side
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器端的变换不会更新
- en: There are more than 70 transforms available in Maltego. The word transform refers
    to the information gathering phase of Maltego. One transform means that Maltego
    will only do one phase of information gathering.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego中有70多种变换可用。变换一词指的是Maltego的信息收集阶段。一个变换意味着Maltego只会执行一个信息收集阶段。
- en: 'To access Maltego from the Kali Linux menu, navigate to Application | Information
    Gathering | Maltego. There is also a start icon on the desktop, or you can use
    the console and type the following command:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 要从Kali Linux菜单访问Maltego，请导航到应用程序|信息收集|Maltego。桌面上也有一个启动图标，或者您可以使用控制台并输入以下命令：
- en: '[PRE11]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: You will see the Maltego welcome screen. After several seconds, you will see
    the following Maltego start up wizard that will help you set up the Maltego client
    for the first time.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到Maltego欢迎屏幕。几秒钟后，您将看到以下Maltego启动向导，它将帮助您首次设置Maltego客户端。
- en: Click on Next to continue to the next window and enter your login details. (Click
    on register here to create an account if you do not have login details.)
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 单击“下一步”继续到下一个窗口，并输入您的登录详细信息。（如果您没有登录详细信息，请单击此处注册以创建帐户。）
- en: Once logged in, enter your personal details (name and email address).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 登录后，输入您的个人详细信息（姓名和电子邮件地址）。
- en: 'You will then need to select the transform seeds, as shown in the following
    screenshot:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您需要选择转换种子，如下图所示：
- en: '![](img/642e2c0d-2fc1-42fc-b4bf-71e357116b1b.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](img/642e2c0d-2fc1-42fc-b4bf-71e357116b1b.png)'
- en: 'The Maltego client will connect to the Maltego servers in order to get the
    transforms. If Maltego has been initialized successfully, you will see the following
    screenshot:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego客户端将连接到Maltego服务器以获取转换。如果Maltego已成功初始化，您将看到以下截图：
- en: '![](img/31aeda01-9710-4c5f-abe6-55c2afef7f9d.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](img/31aeda01-9710-4c5f-abe6-55c2afef7f9d.png)'
- en: This means that your Maltego client initialization has been done successfully.
    Now you can use the Maltego client.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着您的Maltego客户端初始化已成功完成。现在您可以使用Maltego客户端了。
- en: 'Before we use the Maltego client, let''s first look at the Maltego interface:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用Maltego客户端之前，让我们先看一下Maltego界面：
- en: '![](img/517bb8de-040d-48d1-9b73-92217ad169a7.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](img/517bb8de-040d-48d1-9b73-92217ad169a7.png)'
- en: Maltego Interface
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego界面
- en: 'On the top-left side of the preceding screenshot, you will see the Palette
    window. In the **Palette** window, you can choose the entity type for which you
    want to gather the information. Maltego divides the entities into six groups,
    as follows:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面截图的左上方，您将看到Palette窗口。在**Palette**窗口中，您可以选择要收集信息的实体类型。Maltego将实体分为六组，如下所示：
- en: '**Devices** such as phone or camera'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**设备**，如手机或相机'
- en: '**Infrastructure** such as AS, DNS name, domain, IPv4 address, MX record, NS
    record, netblock, URL, and website'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**基础设施**，如AS、DNS名称、域、IPv4地址、MX记录、NS记录、网络块、URL和网站'
- en: '**Locations** on earth'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 地球上的**位置**
- en: '**Penetration testing**'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**渗透测试**'
- en: Personal such as alias, document, email address, image, person, phone number,
    and phrase
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 个人信息，如别名、文件、电子邮件地址、图像、人员、电话号码和短语
- en: Social network such as Facebook object, Twitter entity, Facebook affiliation,
    and Twitter affiliation
  id: totrans-152
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 社交网络，如Facebook对象、Twitter实体、Facebook从属关系和Twitter从属关系
- en: 'In the top-middle of the preceding screenshot, you will see the different views:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面截图的中上部，您将看到不同的视图：
- en: Main View
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主视图
- en: Bubble View
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 气泡视图
- en: Entity List
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实体列表
- en: Views are used to extract information that is not obvious from large graphs—where
    the analyst cannot see clear relationships via the manual inspection of data.
    Main View is where you work most of the time. In Bubble View, the nodes are displayed
    as bubbles, while in the Entity List tab, the nodes are simply listed in text
    format.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 视图用于提取大型图中不明显的信息，分析师无法通过手动检查数据来清晰地看到关系。主视图是您大部分时间工作的地方。在气泡视图中，节点显示为气泡，而在实体列表选项卡中，节点以纯文本格式列出。
- en: 'Next to the views, you will see different layout algorithms. Maltego supports
    the following four layout algorithms:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在视图旁边，您将看到不同的布局算法。Maltego支持以下四种布局算法：
- en: 'Block layout: This is the default layout and is used during mining.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 块布局：这是默认布局，在挖掘过程中使用。
- en: 'Hierarchical layout: The hierarchical layout works with a root and subsequent
    branches for hosts. This provides a branch structure to allow for visualization
    of parent/child relationships.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 层次布局：层次布局与根和后续主机分支一起工作。这提供了一个分支结构，以便可视化父/子关系。
- en: 'Centrality layout: The centrality layout takes the most central node and then
    graphically represents the incoming links around the nodes. This is useful when
    examining several nodes that are all linked to one central node.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 中心布局：中心布局获取最中心的节点，然后以图形方式表示节点周围的传入链接。在检查与一个中心节点相连的多个节点时，这是很有用的。
- en: 'Organic layout: The organic layout displays the nodes in such a way that the
    distance is minimized, giving the viewer a better overall picture of the nodes
    and their relationships.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 有机布局：有机布局以最小化距离的方式显示节点，使查看者能够更好地了解节点及其关系的整体情况。
- en: After a brief description of the Maltego client user interface, it's time for
    action.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 对Maltego客户端用户界面进行简要描述后，现在是行动的时候了。
- en: 'Let''s suppose you want to gather information about a domain. We will use the
    `example.com` domain for this example. We will explore how to do this in the following
    sections:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 假设您想收集有关域的信息。我们将使用`example.com`域作为示例。我们将在以下部分中探讨如何做到这一点：
- en: Create a new graph (*Ctrl* + *T*) and go to the Palette tab.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新图形（*Ctrl* + *T*）并转到Palette选项卡。
- en: Select Infrastructure, and click on Domain.
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择基础设施，然后单击域。
- en: Drag it to the main window. If successful, you will see a domain called `paterva.com`
    in the main window.
  id: totrans-167
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其拖到主窗口。如果成功，您将在主窗口中看到一个名为`paterva.com`的域。
- en: 'Double-click on the name and change it to your target domain, such as `example.com`,
    as shown in the following screenshot:'
  id: totrans-168
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 双击名称并将其更改为您的目标域，例如`example.com`，如下图所示：
- en: '![](img/45ba5d80-b8ff-4307-9b8d-816d9677a82f.png)'
  id: totrans-169
  prefs: []
  type: TYPE_IMG
  zh: '![](img/45ba5d80-b8ff-4307-9b8d-816d9677a82f.png)'
- en: Maltego Kali Linux
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego Kali Linux
- en: 'If you right-click on the `domain` name, you will see all of the transforms
    that can be done to the domain name:'
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您右键单击“域”名称，您将看到可以对域名执行的所有转换：
- en: DNS from domain
  id: totrans-172
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自域的DNS
- en: Domain owner's details
  id: totrans-173
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域所有者的详细信息
- en: Email addresses from domain
  id: totrans-174
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自域的电子邮件地址
- en: Files and documents from domain
  id: totrans-175
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 来自域的文件和文档
- en: Other transforms, such as To Person, To Phone numbers, and To Website
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 其他转换，如转换为个人、电话号码和网站
- en: All transforms
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有转换
- en: 'Let''s choose DomainToDNSNameSchema from the domain transforms (Run Transform
    | Other Transforms | DomainToDNSNameSchema). The following screenshot shows the
    result:'
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 让我们从域转换中选择DomainToDNSNameSchema（运行转换|其他转换|DomainToDNSNameSchema）。以下截图显示了结果：
- en: '![](img/ce5adbf3-ab12-4aca-953a-4ef0b0c2f481.png)'
  id: totrans-179
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ce5adbf3-ab12-4aca-953a-4ef0b0c2f481.png)'
- en: Maltego Kali Linux
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: Maltego Kali Linux
- en: After the DNS from Domain transform, we got information on the website address
    ([www.example.com](http://www.example.com)) related to the `example.com` domain.
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在域转换的DNS之后，我们得到了与`example.com`域相关的网站地址（[www.example.com](http://www.example.com)）的信息。
- en: You can run other transforms to the target domain.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以对目标域运行其他转换。
- en: 'If you want to change the domain, you need to save the current graph first.
    To save the graph, follow these steps:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如果要更改域，需要先保存当前图。要保存图，请按照以下步骤操作：
- en: Click on the Maltego icon, and then select Save.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击Maltego图标，然后选择保存。
- en: The graph will be saved in the Maltego graph file format (`.mtgx`). To change
    the domain, just double-click on the existing domain and change the domain name.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 图将以Maltego图文件格式（`.mtgx`）保存。要更改域，只需双击现有域并更改域名。
- en: Next, we will describe several tools that can be used for getting routing information.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将描述几种可用于获取路由信息的工具。
- en: Getting network routing information
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 获取网络路由信息
- en: Network routing information is useful for penetration testers in a number of
    ways. First, they can identify different devices between the penetration tester's
    machine and the target. The penetration tester can also glean information about
    how the network operates and how traffic is routed between the target and the
    tester's machine. Finally, the penetration tester would also be able to determine
    whether there was an intermediate barrier such as a firewall or proxy server between
    the tester and the target.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 网络路由信息对于渗透测试人员有多种用途。首先，他们可以识别渗透测试人员的机器和目标之间的不同设备。渗透测试人员还可以获取有关网络操作方式以及流量在目标和测试人员机器之间的路由方式的信息。最后，渗透测试人员还可以确定是否有中间障碍物，如防火墙或代理服务器，位于测试人员和目标之间。
- en: Kali Linux has a number of tools that provide network routing information.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: Kali Linux有许多提供网络路由信息的工具。
- en: tcptraceroute
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: tcptraceroute
- en: A supplement to the `traceroute` command found in Linux distributions is the
    `tcptraceroute` tool. The normal `traceroute` command sends either a UDP or ICMP
    echo request packet to the target house with a **Time to Live** (**TTL**) set
    to one. This TTL is increased by one for each host it reaches until the packet
    reaches the target host. The major difference between `traceroute` and the `tcptraceroute`
    tool is that the `tcptraceroute` tool uses a TCP SYN packet to the target host.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 在Linux发行版中找到的`traceroute`命令的补充是`tcptraceroute`工具。普通的`traceroute`命令向目标主机发送UDP或ICMP回显请求数据包，**生存时间**（**TTL**）设置为一。该TTL每到达一个主机就增加一，直到数据包到达目标主机。`traceroute`和`tcptraceroute`工具之间的主要区别在于`tcptraceroute`工具使用TCP
    SYN数据包到目标主机。
- en: The main advantage with using `tcptraceroute` is when you have the possibility
    of encountering a firewall between the testing machine and the target. Firewalls
    are often configured to filter out ICMP and UDP traffic associated with the `traceroute`
    command. As a result, the `traceroute` information will not be useful to you.
    Using `tcptraceroute` gives the ability to use the TCP connection on a specific
    port, which the firewall will allow you to pass through, thereby allowing you
    to enumerate the network routing path through the firewall.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`tcptraceroute`的主要优势在于当您有可能在测试机器和目标之间遇到防火墙时。防火墙通常配置为过滤与`traceroute`命令相关的ICMP和UDP流量。因此，`traceroute`信息对您将没有用处。使用`tcptraceroute`可以使用特定端口上的TCP连接，防火墙将允许您通过，从而允许您枚举通过防火墙的网络路由路径。
- en: 'The `tcptraceroute` command makes use of the TCP three-way handshake to determine
    whether the patch through the firewall is allowed. If the port is open, you will
    receive a SYN/ACK packet. If the port is closed, you will receive an RST packet.
    To start `tcptraceroute`, type the following into the command line:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: '`tcptraceroute`命令利用TCP三次握手来确定防火墙是否允许通过。如果端口打开，您将收到一个SYN/ACK数据包。如果端口关闭，您将收到一个RST数据包。要启动`tcptraceroute`，在命令行中输入以下内容：'
- en: '[PRE12]'
  id: totrans-194
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: This command will show the different functions related to the command.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 该命令将显示与该命令相关的不同功能。
- en: 'The simplest usage is running the command against a domain. For this demonstration,
    we will run the `traceroute` command to trace the network route to the domain
    the `example.com`:'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的用法是针对一个域运行该命令。在本演示中，我们将运行`traceroute`命令以跟踪到达域`example.com`的网络路由：
- en: '[PRE13]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The redacted output for `traceroute` is as follows:'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '`traceroute`的已编辑输出如下：'
- en: '[PRE14]'
  id: totrans-199
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: As you can see, there are several steps that are indicated and others that appear
    as `***`. If we look at the output, by hop 15, we see that there is no information
    available. This is indicative of a filtering device between the tester machine
    and the host, `example.com` domain.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，有几个步骤被指示，其他步骤显示为`***`。如果我们查看输出，到第15跳，我们看到没有可用的信息。这表明测试机器和主机之间有一个过滤设备，即`example.com`域。
- en: 'To counter this filtering, we will try to determine the route using the `tcptraceroute`
    command. As we know that `example.com` has a web server, we will set the command
    to try the TCP port `80`, which is the HTTP port. Here is the command:'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 为了对抗这种过滤，我们将尝试使用`tcptraceroute`命令确定路由。由于我们知道`example.com`有一个Web服务器，我们将设置命令尝试TCP端口`80`，即HTTP端口。以下是命令：
- en: '[PRE15]'
  id: totrans-202
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The output is as follows:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 输出如下：
- en: '[PRE16]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: As we can see from the `tcptraceroute` output, the request has reached our target
    system and has given us the hops that the request took to get to the target.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 从`tcptraceroute`输出中可以看出，请求已到达我们的目标系统，并为我们提供了请求到达目标的跳数。
- en: tctrace
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: tctrace
- en: Another tool that makes the same use of the TCP handshake is `tctrace`. Much
    like `tcptraceroute`, `tctrace` sends a SYN packet to a specific host and if the
    reply is a SYN/ACK, the port is open. An RST packet indicates a closed port.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个利用TCP握手的工具是`tctrace`。与`tcptraceroute`类似，`tctrace`向特定主机发送一个SYN数据包，如果回复是一个SYN/ACK，端口是打开的。一个RST数据包表示一个关闭的端口。
- en: 'To start `tctrace`, enter the following command:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动`tctrace`，请输入以下命令：
- en: '[PRE17]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: '`-i <device>` is the network interface on the target and `-d <target host>`
    is the target.'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '`-i <device>`是目标上的网络接口，`-d <target host>`是目标。'
- en: 'For this example, we are going to run `tctrace` against the `www.example.com`
    domain:'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 在本例中，我们将对`www.example.com`域运行`tctrace`：
- en: '[PRE18]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The following output is obtained:'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 获得以下输出：
- en: '[PRE19]'
  id: totrans-214
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: Utilizing the search engine
  id: totrans-215
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用搜索引擎
- en: Aside from routing and domain information, Kali Linux has other tools that can
    provide a great deal of OSINT to penetration testers. These tools act as search
    engines and have the ability to cull a variety of resources, such as Google or
    social networking sites, for email addresses, documents, and domain information.
    One of the advantages of using these tools is that they do not directly search
    websites, but rather use other search engines to provide OSINT. This limits the
    penetration tester's fingerprints on a target system.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 除了路由和域信息外，Kali Linux还有其他工具，可以为渗透测试员提供大量的OSINT。这些工具充当搜索引擎，可以从Google或社交网络站点等各种资源中获取电子邮件地址、文档和域信息。使用这些工具的优势之一是它们不直接搜索网站，而是使用其他搜索引擎提供OSINT。这限制了渗透测试员对目标系统的指纹。
- en: Some of these tools are built into Kali Linux and others have to be installed.
    The following sections present a good subset of the tools that will aid you in
    the vast majority of information collection.
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: 这些工具中有一些是内置在Kali Linux中的，而其他一些则需要安装。以下部分介绍了一些工具的子集，这些工具将帮助您在绝大多数信息收集中。
- en: SimplyEmail
  id: totrans-218
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: SimplyEmail
- en: '`SimplyEmail` not only takes email addresses and other information, but also
    scrubs domains for documents such as text, Word, or Excel spreadsheets. In addition,
    there are a wide range of different website and search engines that can be used.
    These include Reddit, Pastebin, and CanaryBin. One of the best features is that
    the tool creates a report in HTML, which comes in handy when you are preparing
    your report.'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '`SimplyEmail`不仅可以获取电子邮件地址和其他信息，还可以清理文档，如文本、Word或Excel电子表格的域。此外，还有各种不同的网站和搜索引擎可供使用。这些包括Reddit、Pastebin和CanaryBin。其中最好的功能之一是该工具可以生成HTML格式的报告，在您准备报告时非常方便。'
- en: '`theharvester` is also a handy tool to aggregate email addresses and other
    information that a target may leak.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '`theharvester`也是一个方便的工具，可以聚合目标可能泄漏的电子邮件地址和其他信息。'
- en: '`SimplyEmail` is a Python script that has a number of modules. Installing it
    is fairly easy.'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: '`SimplyEmail`是一个具有多个模块的Python脚本。安装它相当容易。'
- en: 'Use the following steps to install `SimplyEmail`:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤安装`SimplyEmail`：
- en: Navigate to the GitHub site at [https://github.com/killswitch-GUI/SimplyEmail](https://github.com/killswitch-GUI/SimplyEmail)
  id: totrans-223
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到GitHub网站[https://github.com/killswitch-GUI/SimplyEmail](https://github.com/killswitch-GUI/SimplyEmail)
- en: 'Enter the following code:'
  id: totrans-224
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入以下代码：
- en: '[PRE20]'
  id: totrans-225
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: Once the startup script has completed, you can execute the scripts.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动脚本完成后，您可以执行脚本。
- en: 'The help menu can be accessed by typing this:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入以下内容可以访问帮助菜单：
- en: '[PRE21]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Email enumeration is an important phase of so many operations that a pen tester
    or Red Teamer goes through. There are tons of applications that do email enumeration,
    but I wanted a simple yet effective way to get what `Recon-Ng` provide and `theharvester`
    (you may want to run `-h`):'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件枚举是渗透测试员或红队成员进行的许多操作中的重要阶段。有大量的应用程序可以进行电子邮件枚举，但我想要一种简单而有效的方式来获取`Recon-Ng`和`theharvester`提供的内容（您可能想要运行`-h`）：
- en: '[PRE22]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'To start a search, type in the following:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始搜索，请输入以下内容：
- en: '[PRE23]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The script then runs. Beware that if there is no information, there will be
    errors in the return. This does not mean you have made an error, but rather that
    there are no results for the search. While the tool runs, you will see the following
    output on your screen:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 然后运行脚本。请注意，如果没有信息，返回将会出现错误。这并不意味着您犯了错误，而是表示搜索没有结果。在工具运行时，您将在屏幕上看到以下输出：
- en: '[PRE24]'
  id: totrans-234
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'After the searches have been conducted, you will receive a request to verify
    email addresses. This verification process can take some time, but in a targeted
    attack where you want to socially engineer or phish specific individuals, it may
    be prudent. A simple `Y/N` will suffice:'
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行搜索后，您将收到验证电子邮件地址的请求。这个验证过程可能需要一些时间，但在您想要社会工程或钓鱼特定个人的有针对性攻击中，这可能是明智的。一个简单的`Y/N`就足够了：
- en: '[PRE25]'
  id: totrans-236
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'After the verification question, the final question is the report generation
    phase:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 在验证问题之后，最后一个问题是报告生成阶段：
- en: '[PRE26]'
  id: totrans-238
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The report output is an HTML file with the types of searches that have been
    conducted and the data that has been found. If you are good at HTML, you can even
    brand this report with your own logo and include it in the final pen test report.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 报告输出是一个HTML文件，其中包含已进行的搜索类型和已找到的数据。如果您擅长HTML，甚至可以在最终的渗透测试报告中加入您自己的标志。
- en: Google Hacking Database (GHDB)
  id: totrans-240
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Google Hacking Database（GHDB）
- en: The **Google Hacking Database** (**GHDB**) can be found at [https://www.exploit-db.com/google-hacking-database/](https://www.exploit-db.com/google-hacking-database/)
    and allows users to use customized advanced queries that may reveal unusual information,
    which would otherwise not be displayed in a typical results listing on [https://www.google.com/](https://www.google.com/).
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: '**Google Hacking Database**（**GHDB**）可以在[https://www.exploit-db.com/google-hacking-database/](https://www.exploit-db.com/google-hacking-database/)找到，允许用户使用定制的高级查询，可能会显示不寻常的信息，否则这些信息将不会显示在[https://www.google.com/](https://www.google.com/)的典型结果列表中。'
- en: The GHDB was originally developed by Johnny Long, creator of Hackers for Charity,
    but is now maintained and hosted by Offensive Security, the makers of Kali Linux.
    The GHDB uses Googledorks which are Google operators used in search strings such
    as inurl, filetype, allintext, site, cache, and also operators such as `+`, `-`,
    `*`, and so on. When used correctly, Googledorks can sometimes reveals interesting
    and even sensitive information such as error messages, vulnerable servers and
    websites, sensitive files, and login pages. Of course, most of this information
    is not readily available via ordinary Google searches, which leads to the use
    of Google as an information gathering and hacking database tool.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: GHDB最初是由Hackers for Charity的创始人Johnny Long开发的，但现在由Kali Linux的制造商Offensive Security维护和托管。
    GHDB使用Googledorks，这是谷歌操作符，用于搜索字符串，例如inurl，filetype，allintext，site，cache，以及`+`，`-`，`*`等操作符。当正确使用时，Googledorks有时会显示有趣甚至敏感的信息，例如错误消息，易受攻击的服务器和网站，敏感文件和登录页面。当然，大多数这些信息无法通过普通的谷歌搜索直接获得，这导致了将谷歌用作信息收集和黑客数据库工具。
- en: The GHDB is simple enough to use. It allows the user to choose from various
    categories than typing in phrases and Googledorks. Lower down on the page, it
    lists many of the categories with search queries, as well as links to the queries
    leading to a Google search, thus making it very easy even for beginners to use.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: GHDB的使用非常简单。它允许用户从各种类别中进行选择，而不是输入短语和Googledorks。在页面下方，它列出了许多类别和搜索查询，以及指向谷歌搜索的链接，因此即使对于初学者来说也非常容易使用。
- en: 'As an example, I''ve chosen Vulnerable Servers from the category list, simply
    entered `apache` in the search field, and clicked on SEARCH:'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一个例子，我选择了类别列表中的易受攻击的服务器，只需在搜索框中输入`apache`，然后点击搜索：
- en: '![](img/c4e66c07-1aeb-4e99-9d59-ea6465e16acc.png)'
  id: totrans-245
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c4e66c07-1aeb-4e99-9d59-ea6465e16acc.png)'
- en: The results listed can be either clicked on or copied and pasted into Google
    to try and gather more information.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 列出的结果可以单击或复制并粘贴到谷歌中，以尝试收集更多信息。
- en: 'The following screenshot shows the results of the search in Google. Note that
    there are 16,600 results, but not all results will yield interesting information
    about vulnerable servers:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 以下屏幕截图显示了在谷歌中的搜索结果。请注意，有16,600个结果，但并非所有结果都会提供有关易受攻击的服务器的有趣信息：
- en: '![](img/cb74ec04-4ed9-4b2f-9ee1-3792b95cfb32.png)'
  id: totrans-248
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cb74ec04-4ed9-4b2f-9ee1-3792b95cfb32.png)'
- en: For ethical and legal purposes, you should only use the GHDB for information
    gathering purposes as it pertains to the laws of your state and country.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 出于道德和法律目的，您应该只在符合您所在州和国家法律的情况下使用GHDB进行信息收集。
- en: Metagoofil
  id: totrans-250
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Metagoofil
- en: '`Metagoogil` is a tool that utilizes the Google search engine to get metadata
    from the documents available in the target domain. Currently, it supports the
    following document types:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: '`Metagoogil`是一种利用谷歌搜索引擎从目标域中的文档中获取元数据的工具。目前，它支持以下文档类型：'
- en: Word documents (`.docx`, `.doc`)
  id: totrans-252
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Word文档（`.docx`，`.doc`）
- en: Spreadsheet documents (`.xlsx`, `.xls`, `.ods`)
  id: totrans-253
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子表格文档（`.xlsx`，`.xls`，`.ods`）
- en: Presentation files (`.pptx`, `.ppt`, `.odp`)
  id: totrans-254
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 演示文件（`.pptx`，`.ppt`，`.odp`）
- en: PDF files (`.pdf`)
  id: totrans-255
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: PDF文件（`.pdf`）
- en: '`Metagoogil` works by performing the following actions:'
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: '`Metagoogil`通过执行以下操作来工作：'
- en: Searching for all of the preceding file types in the target domain using the
    Google search engine
  id: totrans-257
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用谷歌搜索引擎在目标域中搜索所有上述文件类型
- en: Downloading all of the documents found and saving them to the local disk
  id: totrans-258
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载找到的所有文档并将它们保存到本地磁盘
- en: Extracting the metadata from the downloaded documents
  id: totrans-259
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从下载的文档中提取元数据
- en: Saving the result in an HTML file
  id: totrans-260
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将结果保存在HTML文件中
- en: 'The metadata that can be found includes the following:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 可以找到的元数据包括以下内容：
- en: Usernames
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户名
- en: Software versions
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 软件版本
- en: Server or machine names
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务器或机器名称
- en: 'This information can be used later on to help in the penetration testing phase.
    `Metagoogil` is not part of the standard Kali Linux v 2.0 distribution. To install,
    all you need to do is use the `apt-get` command:'
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: 此信息可以在后期用于帮助渗透测试阶段。`Metagoogil`不是标准Kali Linux v 2.0发行版的一部分。要安装，您只需要使用`apt-get`命令：
- en: '[PRE27]'
  id: totrans-266
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'After the installer package has finished, you can access Metagoofil from the
    command line:'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序包完成后，您可以从命令行访问Metagoofil：
- en: '[PRE28]'
  id: totrans-268
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This will display simple usage instructions and an example on your screen.
    As an example of `Metagoogil` usage, we will collect all the DOC and PDF documents
    (`-t`, `.doc`, `.pdf`) from a target domain (`-d hackthissite.org`) and save them
    to a directory named `test` (`-o test`). We limit the search for each file type
    to `20` files (`-l 20`) and only download five files (`-n 5`). The report generated
    will be saved to `test.html` (`-f test.html`). We give the following command:'
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 这将在您的屏幕上显示简单的使用说明和示例。作为`Metagoogil`使用的示例，我们将从目标域（`-d hackthissite.org`）收集所有DOC和PDF文档（`-t`，`.doc`，`.pdf`）并将它们保存到名为`test`的目录中（`-o
    test`）。我们将每种文件类型的搜索限制为`20`个文件（`-l 20`），并且只下载五个文件（`-n 5`）。生成的报告将保存在`test.html`中（`-f
    test.html`）。我们给出以下命令：
- en: '[PRE29]'
  id: totrans-270
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The redacted result of this command is as follows:'
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 此命令的编辑结果如下：
- en: '[PRE30]'
  id: totrans-272
  prefs: []
  type: TYPE_PRE
  zh: '[PRE30]'
- en: You can see from the preceding result that we get a lot of information from
    the documents we have collected, such as the usernames and path information. We
    can use the obtained usernames to look for patterns in the usernames and for launching
    a brute-force password attack on them. But, be aware that doing a brute-force
    password attack on an account may have the risk of locking the user accounts.
    The path information can be used to guess the operating system that is used by
    the target. We got all of this information without going to the domain website
    ourselves.
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从上述结果中看到，我们从收集的文档中获得了大量信息，例如用户名和路径信息。我们可以使用获得的用户名来查找用户名中的模式，并对其进行暴力密码攻击。但是，请注意，对帐户进行暴力密码攻击可能会有锁定用户帐户的风险。路径信息可用于猜测目标使用的操作系统。我们获得了所有这些信息，而无需访问域网站。
- en: '`Metagoogil` is also able to generate information in a report format. The following
    screenshot shows the generated report in HTML:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: '`Metagoogil`也能够以报告格式生成信息。以下屏幕截图显示了HTML中生成的报告：'
- en: '![](img/d6ba3ddb-573f-4910-a52e-0ca9fb78f5f2.png)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d6ba3ddb-573f-4910-a52e-0ca9fb78f5f2.png)'
- en: In the report generated, we get information about usernames, software version,
    email address, and server information from the target domain.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在生成的报告中，我们可以从目标域中获取有关用户名、软件版本、电子邮件地址和服务器信息的信息。
- en: Automated footprinting and information gathering tools
  id: totrans-277
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 自动足迹和信息收集工具
- en: In this section, we look at fully automated tools, two in particular, consisting
    of several features able to accomplish the tasks covered in many of the individual
    tools mentioned earlier. These tools are freely available for use via [https://github.com/](https://github.com/)
    and work in Kali Linux 2018.2 (and possibly earlier versions).
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将介绍完全自动化的工具，特别是两种，它们包含了许多个别工具中涵盖的任务的几个功能。这些工具可通过[https://github.com/](https://github.com/)免费使用，并在Kali
    Linux 2018.2（可能还有早期版本）中使用。
- en: Devploit
  id: totrans-279
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Devploit
- en: Devploit 3.6 is listed as an information gathering tool, developed by Joker25000,
    and is available at [https://github.com/joker25000/Devploit](https://github.com/joker25000/Devploit).
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: Devploit 3.6被列为一个信息收集工具，由Joker25000开发，可在[https://github.com/joker25000/Devploit](https://github.com/joker25000/Devploit)上获得。
- en: To use Devsploit, we first clone it onto our Kali Linux machine and then run
    the tools of choice when presented with the options. Cloning only has to be done
    once; every time you use Devploit thereafter, you simply browse to the Devploit
    directory.
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Devsploit，我们首先将其克隆到我们的Kali Linux机器上，然后在提供选项时运行所选的工具。克隆只需做一次；以后每次使用Devploit时，只需浏览到Devploit目录。
- en: Open a new Terminal and change to the directory of your choice using the `cd`
    command. (You can also use the `ls` command to list the content of the directory
    and ensure you are in the correct directory.)
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个新的终端，并使用`cd`命令更改到您选择的目录。 （您还可以使用`ls`命令列出目录的内容，并确保您在正确的目录中。）
- en: 'Use the `git clone` command to clone Devploit onto your machine by typing the
    following:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 使用`git clone`命令将Devploit克隆到您的机器上，输入以下内容：
- en: '[PRE31]'
  id: totrans-284
  prefs: []
  type: TYPE_PRE
  zh: '[PRE31]'
- en: '![](img/25c29e7e-23a2-4edd-ac16-f897d63547d8.png)'
  id: totrans-285
  prefs: []
  type: TYPE_IMG
  zh: '![](img/25c29e7e-23a2-4edd-ac16-f897d63547d8.png)'
- en: If copying the URL from the GitHub webpage, be sure to include `.git` at the
    end of the URL in the Terminal.
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 如果从GitHub网页复制URL，请确保在终端中包括`.git`。
- en: 'Press *Enter* to clone Devploit onto Kali:'
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 按*Enter*克隆Devploit到Kali：
- en: '![](img/e499109c-30cf-4628-99bd-03fbcd7f72c7.png)'
  id: totrans-288
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e499109c-30cf-4628-99bd-03fbcd7f72c7.png)'
- en: In the Terminal, change to the Devploit directory on your desktop by typing
    `cd` Devploit and then use the `ls` command to view the directory contents. You
    should see the `Devploit.py` and `README.me` files among others.
  id: totrans-289
  prefs: []
  type: TYPE_NORMAL
  zh: 在终端中，通过输入`cd` Devploit来更改桌面上的Devploit目录，然后使用`ls`命令查看目录内容。您应该看到`Devploit.py`和`README.me`文件等。
- en: Give the file executable permissions to install by typing `chmod +x install`,
    and then start Devploit by typing `./install`.
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 通过输入`chmod +x install`为文件授予可执行权限以安装，然后通过输入`./install`启动Devploit。
- en: Be sure that you are running the preceding commands from within the Devploit
    directory.
  id: totrans-291
  prefs: []
  type: TYPE_NORMAL
  zh: 请确保您是在Devploit目录中运行前面的命令。
- en: 'Once Devploit has been installed, open a new Terminal and type Devploit, as
    shown in the following screenshot:'
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: 安装Devploit后，打开一个新的终端，输入Devploit，如下面的屏幕截图所示：
- en: '![](img/6751cf62-d306-44ce-886f-638acfc65a39.png)'
  id: totrans-293
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6751cf62-d306-44ce-886f-638acfc65a39.png)'
- en: 'There are 19 options available for automated information gathering with Devploit:'
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: Devploit提供了19个自动信息收集选项：
- en: '![](img/bd850307-d386-4c05-9fc1-7361871ea44b.png)'
  id: totrans-295
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bd850307-d386-4c05-9fc1-7361871ea44b.png)'
- en: 'To perform a DNS lookup, enter `1` and then enter the name of the domain, such
    as [www.google.com](http://www.google.com):'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行DNS查找，请输入`1`，然后输入域的名称，例如[www.google.com](http://www.google.com)：
- en: '![](img/f645bd5a-304f-4221-9c12-0dc1c91b19e0.png)'
  id: totrans-297
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f645bd5a-304f-4221-9c12-0dc1c91b19e0.png)'
- en: 'To find out basic geographic information about a domain or IP, choose option
    3 and press enter, followed by the IP or domain name:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 要查找有关域或IP的基本地理信息，请选择选项3并按Enter，然后输入IP或域名：
- en: '![](img/e3e2c463-a3bf-4e65-bdd7-1cecac3d96ef.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e3e2c463-a3bf-4e65-bdd7-1cecac3d96ef.png)'
- en: Be sure to familiarize yourself with the options available.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 务必熟悉可用的选项。
- en: Red Hawk v2
  id: totrans-301
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Red Hawk v2
- en: Red Hawk version 2 is another in-depth, all-in-one information gathering suite
    for reconnaissance and data collection.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: Red Hawk版本2是另一个深入的、多合一的信息收集套件，用于侦察和数据收集。
- en: 'In a new terminal, change to the desktop (or directory of your choice) and
    clone Red Hawk v2 by entering [https://github.com/th3justhacker/RED_HAWK](https://github.com/th3justhacker/RED_HAWK):'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 在新的终端中，更改到桌面（或您选择的目录）并通过输入[https://github.com/th3justhacker/RED_HAWK](https://github.com/th3justhacker/RED_HAWK)来克隆Red
    Hawk v2：
- en: '![](img/1a976351-a069-4e1f-9ea1-be961eb87ed5.jpg)'
  id: totrans-304
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1a976351-a069-4e1f-9ea1-be961eb87ed5.jpg)'
- en: 'Once all objects have been successfully unpacked, change directories into the
    `RED_HAWK` directory by typing `cd RED_HAWK`. Use the `ls` command to verify that
    `rhawk.php` exists:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦所有对象成功解压缩，通过输入`cd RED_HAWK`更改目录到`RED_HAWK`目录。使用`ls`命令验证`rhawk.php`是否存在：
- en: '![](img/5139a1d7-e73a-4b0f-8ae0-9fe9484f7c3d.png)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5139a1d7-e73a-4b0f-8ae0-9fe9484f7c3d.png)'
- en: 'To start Red Hawk, type `php rhawk.php` and press *Enter*. If successful, the
    following screen should be displayed:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 要启动Red Hawk，请输入`php rhawk.php`并按*Enter*。如果成功，应显示以下屏幕：
- en: '![](img/562012a5-2487-4834-93c9-6618d3284471.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![](img/562012a5-2487-4834-93c9-6618d3284471.jpg)'
- en: 'Enter your website and choose either HTTP or HTTPS. Then, choose from the options
    available. For example, type one for a Whois lookup:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 输入您的网站，然后选择HTTP或HTTPS。然后，从可用的选项中进行选择。例如，键入一个进行Whois查找：
- en: '![](img/5d45f3a3-6f26-47bc-af7f-436016d40082.jpg)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5d45f3a3-6f26-47bc-af7f-436016d40082.jpg)'
- en: 'The Whois lookup information for `https://www.google.com/` is displayed as
    follows:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: '`https://www.google.com/`的Whois查找信息显示如下：'
- en: '![](img/8d50f844-dbf3-427d-a5d4-199de8835987.jpg)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8d50f844-dbf3-427d-a5d4-199de8835987.jpg)'
- en: 'The results of option `[3] Grab Banners` for [https://www.google.com/](https://www.google.com/) are
    as follows:'
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 选项`[3]抓取横幅`的[https://www.google.com/](https://www.google.com/)的结果如下：
- en: '![](img/f692c408-722d-40b0-bc2f-819f075fafd9.jpg)'
  id: totrans-314
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f692c408-722d-40b0-bc2f-819f075fafd9.jpg)'
- en: 'An MX lookup (option `13`) for [Google.com](https://www.google.com/?gws_rd=ssl)
    gives the following output:'
  id: totrans-315
  prefs: []
  type: TYPE_NORMAL
  zh: 对[Google.com](https://www.google.com/?gws_rd=ssl)进行MX查找（选项`13`）得到以下输出：
- en: '![](img/16ebd101-7031-4f1c-bd97-a62eae854687.jpg)'
  id: totrans-316
  prefs: []
  type: TYPE_IMG
  zh: '![](img/16ebd101-7031-4f1c-bd97-a62eae854687.jpg)'
- en: There are several options available to the user including option `[A]`, which
    scans for everything.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 用户可以选择多种选项，包括选项`[A]`，该选项可以扫描所有内容。
- en: Using Shodan to find internet connected devices
  id: totrans-318
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用Shodan查找连接到互联网的设备
- en: The Shodan search engine, found at [shodan.io](http://shodan.io), isn't your
    average search engine. Shodan, through the use of basic as well as specific query
    strings, can return searches with vulnerable systems connected to the internet.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 位于[shodan.io](http://shodan.io)的Shodan搜索引擎并不是您平常的搜索引擎。Shodan可以通过基本和特定的查询字符串返回连接到互联网的易受攻击系统的搜索结果。
- en: The website was developed by John Matherly, has been available for just under
    a decade and has now become an invaluable tool for fingerprinting over the internet.
    Considering that we live in the age of the **Internet of Things** (**IoT**), more
    and more devices are now accessible via the internet, however many of them are
    not as locked down as they should be, sometimes making them vulnerable to not
    only hackers, but any curious minds.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 该网站是由John Matherly开发的，已经可用将近十年，现在已成为一个在互联网上指纹识别的宝贵工具。考虑到我们生活在**物联网**（**IoT**）时代，越来越多的设备现在可以通过互联网访问，然而其中许多设备的安全性不如他们应该的那样，有时会使它们不仅容易受到黑客的攻击，还容易受到任何好奇的人的攻击。
- en: Shodan scans for common ports and performs banner grabbing as part of its footprinting
    process, then  displays devices accessible over the web, including routers and
    network devices, webcams and surveillance devices, traffic cams, servers and SCADA
    systems, and many more interesting devices.
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: Shodan扫描常见端口并执行横幅抓取作为其足迹过程的一部分，然后显示可以通过网络访问的设备，包括路由器和网络设备、网络摄像头和监控设备、交通摄像头、服务器和SCADA系统等等有趣的设备。
- en: In the list of results, clicking on individual results often returns a list
    of open ports and services on the device, and also allows for report generation.
  id: totrans-322
  prefs: []
  type: TYPE_NORMAL
  zh: 在结果列表中，单击单个结果通常会返回设备上的开放端口和服务列表，并且还允许生成报告。
- en: For privacy and legal purposes, I've opted to not use screenshots of Shodan
    results.
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 出于隐私和法律目的，我选择不使用Shodan结果的截图。
- en: 'To use Shodan, first visit the website at [www.shodan.io](https://www.shodan.io/):'
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用Shodan，请首先访问网站[www.shodan.io](https://www.shodan.io/)：
- en: '![](img/eaf16620-8c32-4e2d-b20a-55412c3a2ef7.png)'
  id: totrans-325
  prefs: []
  type: TYPE_IMG
  zh: '![](img/eaf16620-8c32-4e2d-b20a-55412c3a2ef7.png)'
- en: You'll notice that you can use the service for free, but you will be limited
    to viewing one page of returned results if you do not sign up. Signing up is free
    and allows you to view the first two pages of returned findings/results displayed
    by the search engine. There is also a paid subscription that you can subscribe
    to, in order to access all results.
  id: totrans-326
  prefs: []
  type: TYPE_NORMAL
  zh: 您会注意到您可以免费使用该服务，但如果您不注册，您将被限制查看一页返回的结果。注册是免费的，可以让您查看搜索引擎显示的返回结果的前两页。还有一个付费订阅可以订阅，以便访问所有结果。
- en: Search queries in Shodan
  id: totrans-327
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Shodan中的搜索查询
- en: 'The following are the search queries in Shodan:'
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是Shodan中的搜索查询：
- en: '**Keywords** such as webcams, CCTV, Cisco, Fortinet, traffic signal, refrigerator,
    and others can be specified in the search field'
  id: totrans-329
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在搜索字段中可以指定诸如网络摄像头、CCTV、思科、Fortinet、交通信号、冰箱等**关键词**。
- en: '**Port numbers** can also be specified according to services, such as `3389`
    (remote desktop).'
  id: totrans-330
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**端口号**也可以根据服务进行指定，比如`3389`（远程桌面）。'
- en: '**OS versions:** Operating systems and versions can also be specified along
    with country codes'
  id: totrans-331
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**操作系统版本：**操作系统和版本也可以与国家代码一起指定'
- en: '**Country names** can also be specified along with keywords and port numbers'
  id: totrans-332
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**国家名称**也可以与关键词和端口号一起指定'
- en: '**Phrases **and combined keywords can also be used, including popular search
    phrases such as default passwords, failed login, and others.'
  id: totrans-333
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**短语**和**组合关键词**也可以使用，包括默认密码、登录失败等热门搜索短语。'
- en: In the top menu of the Shodan website, there is an Explore option. This option
    displays links for various categories and popular searches. Industrial Control
    Systems and Databases are among the Featured Categories, and entries for Top Voted
    searches include webcam, Cams, Netcam, and default password.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 在Shodan网站的顶部菜单中，有一个“探索”选项。该选项显示了各种类别和热门搜索的链接。工业控制系统和数据库是特色类别之一，而排名靠前的搜索条目包括网络摄像头、Cams、Netcam和默认密码。
- en: 'Clicking on the Webcams category or even entering server: SQ-WEBCAM in the
    Search field yields several results for webcams in different countries. The common
    search query WebcanXPm, for example, also yields results of cameras accessible
    via the internet, many of which allow the remote user to pan, tilt, and zoom.'
  id: totrans-335
  prefs: []
  type: TYPE_NORMAL
  zh: '单击Webcams类别，甚至在搜索字段中输入server: SQ-WEBCAM，可以得到不同国家的网络摄像头的多个结果。例如，常见的搜索查询WebcanXPm也会返回许多通过互联网访问的摄像头的结果，其中许多允许远程用户进行平移、倾斜和缩放。'
- en: Due to legal restrictions, please ensure that you do not access restricted devices
    and use Shodan in accordance with the laws of your state or country.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 由于法律限制，请确保您不要访问受限制的设备，并根据您所在州或国家的法律使用Shodan。
- en: Starting off with target discovery
  id: totrans-337
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 开始目标发现
- en: 'After we have gathered information about our target network from third-party
    sources, such as search engines, the next step is to discover our target machines.
    The purpose of this process is as follows:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们从第三方来源（如搜索引擎）收集了关于目标网络的信息之后，下一步是发现我们的目标机器。这个过程的目的如下：
- en: To find out which machine in the target network is available. If the target
    machine is not available, we won't continue the penetration-testing process on
    that machine and will move to the next machine.
  id: totrans-339
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找目标网络中哪台机器是可用的。如果目标机器不可用，我们将不会继续对该机器进行渗透测试，并将移动到下一台机器。
- en: To find the underlying operating system used by the target machine.
  id: totrans-340
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找目标机器使用的基础操作系统。
- en: Collecting the previously mentioned information will help us during the vulnerabilities-mapping
    process.
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 收集先前提到的信息将有助于我们进行漏洞映射过程。
- en: We can utilize the tools provided in Kali Linux for the target-discovery process.
    Some of these tools are available in the Information Gathering menu. Others will
    have to be utilized from the command line. For each of these, the commands are
    provided.
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以利用Kali Linux提供的工具进行目标发现过程。这些工具中的一些可以在信息收集菜单中找到。其他工具将必须从命令行中使用。对于这些工具，提供了命令。
- en: In this chapter, we will only describe a few important tools in each category.
    The tools are selected based on their functionality, popularity, and tool-development
    activity.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将只描述每个类别中的一些重要工具。这些工具是基于它们的功能、流行度和工具开发活动进行选择的。
- en: For the purposes of this chapter, an installation of Metasploitable 2 was utilized
    as a target system. Each of these commands can be tried with that operating system.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本章的目的，Metasploitable 2的安装被用作目标系统。可以尝试在该操作系统上使用这些命令。
- en: Blue-Thunder-IP-Locator
  id: totrans-345
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Blue-Thunder-IP-Locator
- en: Open a new Terminal and change to the directory of your choice. For this example,
    I've used the desktop.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 打开一个新的终端并切换到您选择的目录。在本例中，我使用了桌面。
- en: 'Clone the Blue-Thunder-IP-Locator from GitHub by typing `git clone https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-.git`:'
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 通过键入`git clone https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-.git`从GitHub克隆Blue-Thunder-IP-Locator：
- en: '![](img/a8ba6279-0a72-4cbb-81c5-d0802ac45c3b.jpg)'
  id: totrans-348
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a8ba6279-0a72-4cbb-81c5-d0802ac45c3b.jpg)'
- en: Once successfully cloned, change directories to the Blue-Thunder-IP-Locator
    directory.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 成功克隆后，更改目录到Blue-Thunder-IP-Locator目录。
- en: As specified on the GitHub page, [https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-](https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-),
    install and update `perl libs` by entering the following: `apt-get install liblocal-lib-perl`.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 如GitHub页面所述，[https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-](https://github.com/th3sha10wbr04rs/Blue-Thunder-IP-Locator-)，通过输入以下内容安装和更新`perl
    libs`：`apt-get install liblocal-lib-perl`。
- en: 'If you encounter an error when running the preceding command, enter the `Dpkg
    –-configure –a` command and then try the previous command again:'
  id: totrans-351
  prefs: []
  type: TYPE_NORMAL
  zh: 如果在运行上述命令时遇到错误，请输入`Dpkg –-configure –a`命令，然后再次尝试上一个命令：
- en: '![](img/c9b8eea5-1028-4afe-b632-3e1295e965fe.jpg)'
  id: totrans-352
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c9b8eea5-1028-4afe-b632-3e1295e965fe.jpg)'
- en: You may be prompted with various options throughout the process. Press `Y` (Yes)
    when prompted.
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 在整个过程中可能会提示您选择各种选项。在提示时按`Y`（是）。
- en: Next, type `apt-get install libjson-perl` followed by `apt-get upgrade libjson-perl`.
  id: totrans-354
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，键入`apt-get install libjson-perl`，然后键入`apt-get upgrade libjson-perl`。
- en: 'We will also need to ensure that Blue-Thunder has appropriate executable permissions
    by typing `chmod +x blue_thunder.pl`:'
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还需要确保Blue-Thunder具有适当的可执行权限，方法是键入`chmod +x blue_thunder.pl`：
- en: '![](img/0e81df44-e501-4c0d-b4a7-c9eab987dab7.png)'
  id: totrans-356
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e81df44-e501-4c0d-b4a7-c9eab987dab7.png)'
- en: Blue-Thunder-IP-Locator requires certain Perl dependencies from Mechanize to
    able to run. The `Ruby-mechanize` library in particular is required for automating
    interaction with websites.
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: Blue-Thunder-IP-Locator需要来自Mechanize的某些Perl依赖项才能运行。特别需要`Ruby-mechanize`库来自动化与网站的交互。
- en: It’s suggested to run the commands listed next before running Blur-Thunder.
    (Be sure to navigate back to the root directory.)
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 建议在运行Blur-Thunder之前运行下面列出的命令。（确保导航回根目录。）
- en: 'Type `apt-get install libhttp-daemon-ssl perl`:'
  id: totrans-359
  prefs: []
  type: TYPE_NORMAL
  zh: 键入`apt-get install libhttp-daemon-ssl perl`：
- en: '![](img/877e4cfb-357e-4e21-91a4-1a0438fb5033.jpg)'
  id: totrans-360
  prefs: []
  type: TYPE_IMG
  zh: '![](img/877e4cfb-357e-4e21-91a4-1a0438fb5033.jpg)'
- en: With the preceding command, it's OK if the `libhttp-daemon-ssl` package cannot
    be located. Continue with the next command.
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 如果找不到`libhttp-daemon-ssl`包，继续下一个命令也是可以的。
- en: 'Type  `Apt-cache search WWW::Mechanize`:'
  id: totrans-362
  prefs: []
  type: TYPE_NORMAL
  zh: 键入`Apt-cache search WWW::Mechanize`：
- en: '![](img/d0aeb1da-b4b0-470c-bad9-57ef78471508.jpg)'
  id: totrans-363
  prefs: []
  type: TYPE_IMG
  zh: '![](img/d0aeb1da-b4b0-470c-bad9-57ef78471508.jpg)'
- en: 'Lastly, run the following command, `apt-get install libwww-mechanize-perl`:'
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，运行以下命令，`apt-get install libwww-mechanize-perl`：
- en: '![](img/c234fdfd-b24f-40e5-8fd7-7d1df0ee53b7.png)'
  id: totrans-365
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c234fdfd-b24f-40e5-8fd7-7d1df0ee53b7.png)'
- en: Now that all dependencies have been installed and/or updated, we can run Blue-Thunder-IP-Locator.
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，所有依赖项都已安装和/或更新，我们可以运行Blue-Thunder-IP-Locator。
- en: 'In a Terminal, navigate to the Blue-Thunder-IP-Locator directory, enter the `perl
    blue_thunder.pl` command, and press *Enter*:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 在终端中，导航到Blue-Thunder-IP-Locator目录，输入`perl blue_thunder.pl`命令，然后按*Enter*：
- en: '![](img/61444cb2-747e-43d9-a6e6-f231908913f6.png)'
  id: totrans-368
  prefs: []
  type: TYPE_IMG
  zh: '![](img/61444cb2-747e-43d9-a6e6-f231908913f6.png)'
- en: To find in-depth geolocation information, type `perl iplocation.pl` followed
    by the name of the host, IP, or domain (in the Blue-Thunder-IP-Locator directory).
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 要查找详细的地理位置信息，请键入`perl iplocation.pl`，然后输入主机、IP或域名的名称（在Blue-Thunder-IP-Locator目录中）。
- en: 'For example, to find geolocation information about [Google.com](https://www.google.com/?gws_rd=ssl),
    type `perl blue-thunder.pl www.google.com`:'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，要查找有关[Google.com](https://www.google.com/?gws_rd=ssl)的地理位置信息，请键入`perl blue-thunder.pl
    www.google.com`：
- en: '![](img/ed53e167-098a-44d2-b345-8994ecc19165.jpg)'
  id: totrans-371
  prefs: []
  type: TYPE_IMG
  zh: '![](img/ed53e167-098a-44d2-b345-8994ecc19165.jpg)'
- en: Note that the output includes information on the target `ISP`, `Country`, `Latitude`,
    `Longitude`, and more, as seen in the previous screenshot. `Latitude` and `Longitude`
    coordinates can also be plugged into Google Maps for directions and location specifics.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，输出包括有关目标`ISP`、`国家`、`纬度`、`经度`等信息，如前面的屏幕截图所示。`纬度`和`经度`坐标也可以输入到Google地图中以获取方向和位置具体信息。
- en: Summary
  id: totrans-373
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 摘要
- en: 'This chapter introduced you to the information gathering phase. It is usually
    the first phase that is done during the penetration testing process. In this phase,
    you collect as much information as you can about the target organization. After
    getting to know the target organization, it will be easier when we want to attack
    the target. The great Chinese strategist Sun Tzu stated very succinctly the overall
    intent of OSINT and information gathering:'
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: 本章介绍了信息收集阶段。通常是在渗透测试过程中首先进行的阶段。在这个阶段，您尽可能收集有关目标组织的信息。了解目标组织之后，当我们想要攻击目标时会更容易。伟大的中国战略家孙子非常简洁地阐述了OSINT和信息收集的总体意图：
- en: '"Know yourself, know your enemy, and you shall win a hundred battles without
    loss."'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: “知己知彼，百战不殆。”
- en: This saying can't be more true than in penetration testing.
  id: totrans-376
  prefs: []
  type: TYPE_NORMAL
  zh: 这句话在渗透测试中再合适不过了。
- en: We described several tools included in Kali Linux that can be used for information
    gathering. We started by listing several public websites that can be used to gather
    information about the target organization. Next, we described how to use tools
    to collect domain registration information. Then, we described tools that can
    be used to get DNS information. Later on, we explored tools for collecting routing
    information. In the final part of the chapter, we described automated tools, including
    the impressive search engine for hackers, Shodan.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 我们描述了Kali Linux中包含的几种可用于信息收集的工具。我们首先列出了几个可用于收集有关目标组织信息的公共网站。接下来，我们描述了如何使用工具收集域名注册信息。然后，我们描述了可用于获取DNS信息的工具。之后，我们探讨了用于收集路由信息的工具。在本章的最后部分，我们描述了包括令人印象深刻的黑客搜索引擎Shodan在内的自动化工具。
- en: In the next chapter, we will discuss how to discover a target via scanning,
    as well as how to evade detection.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，我们将讨论如何通过扫描发现目标，以及如何规避检测。
- en: Questions
  id: totrans-379
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 问题
- en: 'Lets try to answer some questions now:'
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们现在尝试回答一些问题：
- en: What does the abbreviation OSINT stand for?
  id: totrans-381
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: OSINT的缩写是什么？
- en: What tools can be used to query domain registration information?
  id: totrans-382
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有哪些工具可以用来查询域名注册信息？
- en: What does the A record represent?
  id: totrans-383
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: A记录代表什么？
- en: What tool utilizes the Google search engine to gather metadata for documents
    in the target domain?
  id: totrans-384
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 什么工具利用Google搜索引擎收集目标域中文档的元数据？
- en: What are two automated information gathering tools?
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有哪两种自动信息收集工具？
- en: What tool can be used to find information about devices across the internet?
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 有什么工具可以用来查找互联网上的设备信息？
- en: Further reading
  id: totrans-387
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: 'You can also find more information on the topics discussed at the following
    reference links:'
  id: totrans-388
  prefs: []
  type: TYPE_NORMAL
  zh: 您还可以在以下参考链接中找到有关讨论主题的更多信息：
- en: OSINT resources: [http://osintframework.com/](http://osintframework.com/)
  id: totrans-389
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OSINT资源：[http://osintframework.com/](http://osintframework.com/)
- en: 'Maltego user guides and documentation: [https://www.paterva.com/web7/docs.php](https://www.paterva.com/web7/docs.php)'
  id: totrans-390
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Maltego用户指南和文档：[https://www.paterva.com/web7/docs.php](https://www.paterva.com/web7/docs.php)
- en: 'Google Cheat Sheet: [http://www.googleguide.com/print/adv_op_ref.pdf](http://www.googleguide.com/print/adv_op_ref.pdf)'
  id: totrans-391
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Google备忘单：[http://www.googleguide.com/print/adv_op_ref.pdf](http://www.googleguide.com/print/adv_op_ref.pdf)
- en: 'Shodan for penetration testers: [https://www.defcon.org/images/defcon-18/dc-18-presentations/Schearer/DEFCON-18-Schearer-SHODAN.pdf](https://www.defcon.org/images/defcon-18/dc-18-presentations/Schearer/DEFCON-18-Schearer-SHODAN.pdf)'
  id: totrans-392
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Shodan用于渗透测试人员：[https://www.defcon.org/images/defcon-18/dc-18-presentations/Schearer/DEFCON-18-Schearer-SHODAN.pdf](https://www.defcon.org/images/defcon-18/dc-18-presentations/Schearer/DEFCON-18-Schearer-SHODAN.pdf)
