- en: '4'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '4'
- en: Domain and DNS Intelligence
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 域名和DNS情报
- en: As the internet continues to grow, there’s more access to information. **Open
    Source Intelligence** (**OSINT**) can be collected from any publicly available
    sources, such as the internet. Hackers collect OSINT about their target to help
    improve the **Tactics, Techniques, and Procedures** (**TTPs**) for their cyber-attack
    and operations. Hence, it’s important for cybersecurity professionals such as
    ethical hackers and penetration testers to have a solid understanding of how an
    adversary can collect and leverage OSINT, with the intention of the ethical hacker
    to use the same TTPs to help reduce the risk of a cyber-attack or threat and improve
    the cyber defenses of their organization.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 随着互联网的不断发展，获取信息的途径越来越多。**开源情报**（**OSINT**）可以从任何公开可用的来源收集，比如互联网。黑客收集目标的OSINT，以帮助改进他们的**战术、技术和程序**（**TTPs**）用于网络攻击和行动。因此，像道德黑客和渗透测试人员这样的网络安全专家，必须深入理解对手如何收集并利用OSINT，而道德黑客则应使用相同的TTPs来帮助降低网络攻击或威胁的风险，并提高组织的网络防御。
- en: Throughout the course of this chapter, you will learn about and gain practical
    skills commonly used by ethical hackers and penetration testers to gather publicly
    available information from various online sources and use popular techniques and
    tools to efficiently profile an organization. You will learn how to leverage data
    collected from internet search engines, acquire domain intelligence, identify
    sub-domains from organizations, and perform **Domain Name System** (**DNS**) reconnaissance.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章的学习过程中，您将了解并掌握道德黑客和渗透测试人员常用的技能，这些技能可以帮助您从各种在线资源中收集公开可用的信息，并使用流行的技术和工具高效地对组织进行概况分析。您将学习如何利用从互联网搜索引擎收集的数据，获取域名情报，识别组织的子域名，并执行**域名系统**（**DNS**）侦察。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将涵盖以下主题：
- en: Leveraging search engines for OSINT
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用搜索引擎收集OSINT
- en: Domain intelligence
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 域名情报
- en: Discovering sub-domains
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 发现子域名
- en: DNS reconnaissance
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: DNS侦察
- en: Let’s dive in!
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解吧！
- en: Technical requirements
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the exercises in this chapter, please ensure that you
    have met the following hardware and software requirements:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟上本章的练习，请确保您已满足以下硬件和软件要求：
- en: 'Kali Linux: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Kali Linux: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)'
- en: Leveraging search engines for OSINT
  id: totrans-13
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 利用搜索引擎收集OSINT
- en: The internet is the largest network in the world, and navigating and finding
    resources can be challenging at times, especially if we don’t know the domain
    name or **Uniform Resource Locator** (**URL**) of a specific website. To help
    us quickly find the right domain name for a website, we can use an internet search
    engine. Internet search engines crawl and index everything on the internet, which
    enables a person to perform an internet search using keywords to find all relevant
    resources while providing safe results.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 互联网是世界上最大的网络，浏览和寻找资源有时会很具挑战性，特别是当我们不知道特定网站的域名或**统一资源定位符**（**URL**）时。为了帮助我们快速找到网站的正确域名，我们可以使用互联网搜索引擎。互联网搜索引擎会抓取并索引互联网上的一切，使得用户可以通过关键字进行互联网搜索，从而找到所有相关资源，同时提供安全的搜索结果。
- en: Without internet search engines, a person needs to know the right domain name,
    hostname, or URL for the website they want to visit. For instance, imagine a world
    without internet search engines; each person would need to keep an up-to-date
    record of each new website and its IP address. If an organization changed its
    domain name, perhaps due to rebranding, the information would need to be shared
    with all internet subscribers. However, since the world is a very large place,
    the update may not reach everyone immediately, and some people may attempt to
    connect to the old domain name, which may not resolve to the new domain or website.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有互联网搜索引擎，一个人需要知道他们想访问的网页的正确域名、主机名或网址。例如，设想一个没有互联网搜索引擎的世界；每个人都需要保持一个最新的记录，包含每个新网站及其IP地址。如果一个组织更改了其域名，可能是因为重新品牌化，那么这些信息需要与所有互联网用户共享。然而，由于世界非常大，更新可能不会立即到达每个人，有些人可能会尝试连接到旧域名，而该域名可能无法解析到新域名或网站。
- en: Hence, internet search engines play an important role on the internet by crawling
    billions of domain names, websites, and their pages using web crawlers. Web crawlers
    (bots or spiders) enable the internet search engine provider to navigate the internet,
    download each web page, and follow web links to efficiently discover new websites
    and pages that are available on the internet. Hence, internet search engines are
    tools to help us find and collect intelligence about an organization. As ethical
    hackers, we can use various internet search engines to find and collect information
    about our organization and determine what the company has exposed through data
    leaks.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，互联网搜索引擎在互联网上扮演着重要角色，通过使用网页抓取工具（Web crawlers）抓取数十亿个域名、网站及其页面。网页抓取工具（也称为机器人或蜘蛛）使得互联网搜索引擎提供商能够浏览互联网、下载每个网页，并跟踪网页链接，以高效地发现互联网中新的可访问网站和页面。因此，互联网搜索引擎是帮助我们寻找和收集有关某个组织情报的工具。作为道德黑客，我们可以使用各种互联网搜索引擎来查找并收集有关目标组织的信息，并确定公司通过数据泄露所暴露的内容。
- en: 'The following are common internet search engines:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是常见的互联网搜索引擎：
- en: 'Google: [https://www.google.com/](https://www.google.com/)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Google: [https://www.google.com/](https://www.google.com/)'
- en: 'Yahoo!: [https://www.yahoo.com/](https://www.yahoo.com/)'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Yahoo!: [https://www.yahoo.com/](https://www.yahoo.com/)'
- en: 'Bing: [https://www.bing.com/](https://www.bing.com/)'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Bing: [https://www.bing.com/](https://www.bing.com/)'
- en: 'DuckDuckGo: [https://duckduckgo.com/](https://duckduckgo.com/)'
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'DuckDuckGo: [https://duckduckgo.com/](https://duckduckgo.com/)'
- en: 'Yandex: [https://yandex.com/](https://yandex.com/)'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'Yandex: [https://yandex.com/](https://yandex.com/)'
- en: Important note
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The DuckDuckGo internet search engine focuses on privacy and does not store
    the user’s internet searches or track their browser. Yandex is a Russian-based
    internet search engine that focuses on content within the Asia and Europe regions.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: DuckDuckGo搜索引擎注重隐私，不存储用户的互联网搜索记录，也不跟踪用户的浏览器。Yandex是一个以俄罗斯为基础的搜索引擎，专注于亚洲和欧洲地区的内容。
- en: A typical person may choose one of the preceding internet search engines, perform
    an internet search using a keyword(s), and will most likely click on a link on
    the first page of the search results. As an ethical hacker, it’s important to
    understand that page 1 of the search results usually provides the most accurate
    data based on the search criteria; however, checking through page 2 and onward
    will provide additional information that may be meaningful to us about the target.
    Since internet search engines collect and record data, it’s essential to examine
    all the search results for any connections to the targeted organization.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 一个典型的人可能会选择前述的某个互联网搜索引擎，使用关键词进行搜索，并很可能会点击搜索结果第一页上的链接。作为一名道德黑客，理解搜索结果的第一页通常基于搜索条件提供最准确的数据是非常重要的；然而，查看第二页及之后的页面会提供一些额外的信息，这些信息可能对我们了解目标非常有意义。由于互联网搜索引擎会收集和记录数据，因此检查所有搜索结果，找出与目标组织的任何关联是至关重要的。
- en: In addition, each internet search engine uses a unique algorithm for how they
    crawl and index websites on the internet. As an ethical hacker, using only one
    internet search engine may not provide the same results that another internet
    search engine may provide. For instance, if you’re looking for specific data about
    a target, one internet search engine may not provide it due to its algorithm,
    while another may provide it to you. Hence, it’s recommended to always use multiple
    internet search engines to collect and analyze data found on the first 10 pages
    of each internet search engine’s result pages.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，每个互联网搜索引擎都有自己独特的算法，决定它们如何抓取和索引互联网上的网站。作为一名道德黑客，仅使用一个互联网搜索引擎可能无法获得另一个搜索引擎所提供的相同结果。例如，如果你在寻找有关目标的特定数据，某个搜索引擎可能由于其算法的不同而无法提供这些数据，而另一个搜索引擎可能会提供。因此，建议始终使用多个互联网搜索引擎，收集并分析每个搜索引擎前10页的搜索结果。
- en: On many websites, you will find a **robots.txt** file that contains a list of
    directories. This file is commonly used by web administrators to allow or disallow
    the indexing of specific directories of a website by internet web crawlers. For
    instance, if a web administrator wanted to prevent internet search engines from
    indexing and displaying the administrator portal of their website to anyone searching
    the organization’s domain name, they could insert a **disallow /administrator/**
    statement within the **robots.txt** file.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 在许多网站上，你会发现一个**robots.txt**文件，其中包含一个目录列表。网站管理员通常使用这个文件来允许或禁止互联网爬虫索引网站的特定目录。例如，如果网站管理员希望阻止互联网搜索引擎在搜索到组织的域名时索引和显示管理员门户网站，他们可以在**robots.txt**文件中插入一个**disallow
    /administrator/**的语句。
- en: 'The following screenshot shows the contents of a sample **robots.txt** file:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了一个示例**robots.txt**文件的内容：
- en: '![Figure 4.1 – robots.txt file](image/B19448_04_01.jpg)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.1 – robots.txt 文件](image/B19448_04_01.jpg)'
- en: Figure 4.1 – robots.txt file
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.1 – robots.txt 文件
- en: As shown in the preceding screenshot, the **robots.txt** file seems to contain
    a listing of sensitive directories that should not appear on internet searches.
    Since the **robots.txt** file is publicly available on a website, ethical hackers
    can collect and analyze the data found within it to discover hidden directories
    of a target, which can be used to plan future operations. Furthermore, visiting
    each hidden directory may lead to discovering additional data leaks and resources
    exposed by an organization.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，**robots.txt**文件似乎包含了一个敏感目录列表，这些目录不应出现在互联网搜索结果中。由于**robots.txt**文件在网站上是公开可见的，伦理黑客可以收集并分析其中的数据，从而发现目标的隐藏目录，这些目录可以用来规划未来的行动。此外，访问每个隐藏目录可能会导致发现组织暴露的额外数据泄露和资源。
- en: However, since you’ll be directly accessing the **robots.txt** file on the target’s
    website, this is a form of active reconnaissance, and the target will know you’ve
    made contact. Therefore, it’s always recommended to anonymize your internet traffic
    to help conceal your online identity and reduce your threat level during the reconnaissance
    phase.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，由于你将直接访问目标网站上的**robots.txt**文件，这属于一种主动侦察，目标将知道你已经接触到它。因此，强烈建议你在侦察阶段通过匿名化互联网流量来帮助隐藏你的在线身份，从而降低威胁等级。
- en: Google hacking techniques
  id: totrans-33
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Google黑客技术
- en: '**Google hacking** (**dorking**) is a common technique used by ethical hackers
    to leverage Google’s internet search algorithm to find sensitive information about
    people, places, organizations, and other things on the internet. The term *Google
    hacking* does not mean we’re actually hacking into Google’s infrastructure or
    systems in any way; it is simply a term that’s used to describe how we are leveraging
    the power of Google’s search engine to find specific details about our target
    without performing illegal activities.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**Google黑客**（**dorking**）是伦理黑客常用的一种技术，利用Google的互联网搜索算法查找关于人、地点、组织以及互联网上其他事物的敏感信息。*Google黑客*这一术语并不意味着我们实际上在以任何方式攻击Google的基础设施或系统；它仅仅是用来描述我们如何利用Google搜索引擎的强大功能，通过合法方式查找关于目标的具体细节。'
- en: 'For instance, searching for an organization based on a single keyword provides
    billions of results, as shown in the following screenshot:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，基于单一关键词搜索一个组织会得到数十亿条结果，如下截图所示：
- en: '![Figure 4.2 – Google search](image/B19448_04_02.jpg)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.2 – Google 搜索](image/B19448_04_02.jpg)'
- en: Figure 4.2 – Google search
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.2 – Google 搜索
- en: As an ethical hacker, it’s important to collect and analyze the data found not
    only on page 1 of the search results but all others to create a better profile
    of the target. However, as with any typical internet search on Google, it provides
    generic results that are associated with the keyword.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名伦理黑客，收集和分析在搜索结果第一页以及其他页面上找到的数据是非常重要的，这有助于建立更好的目标档案。然而，和Google上的任何典型互联网搜索一样，它提供的结果通常是与关键词相关的通用信息。
- en: Tip
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Ensure you are not signed in to your Google account or the Chrome web browser
    when collecting information about a target.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 确保在收集目标信息时，你没有登录到你的Google账号或Chrome浏览器中。
- en: 'To perform Google hacking techniques, it’s essential to understand how advanced
    Google search operators can help us filter specific results. The following are
    common Google advanced search operators:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 要执行Google黑客技术，了解如何使用高级Google搜索操作符来帮助我们过滤特定的结果是至关重要的。以下是常见的Google高级搜索操作符：
- en: '**-** (minus)—The dash is used to negate a term from the search results. For
    instance, **cybersecurity -Cisco** will provide results that contain the word
    *cybersecurity* but remove all entries that contain *Cisco*.'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**-**（减号）—此符号用于从搜索结果中排除某个术语。例如，**cybersecurity -Cisco** 将提供包含 *cybersecurity*
    的结果，但排除所有包含 *Cisco* 的条目。'
- en: '**OR**—This is a conditional operator to provide results of either one term
    or the other. For example, **cybersecurity OR networking** will provide results
    containing either the word *cybersecurity* or *networking* in them.'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**OR**—这是一个条件操作符，用于提供包含其中一个术语或另一个术语的结果。例如，**cybersecurity OR networking** 将提供包含
    *cybersecurity* 或 *networking* 的结果。'
- en: '**AND**—This conditional operator is used to provide results that include two
    terms. For instance, **football AND england** will return results that contain
    both keywords.'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AND**—此条件操作符用于提供包含两个术语的结果。例如，**football AND england** 将返回同时包含这两个关键字的结果。'
- en: '**intitle:**—This operator is used to search for title pages that contain a
    specific term(s). For instance, **intitle: administrator** will search for all
    websites where *administrator* is found in the title and return these results.'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**intitle:**—此操作符用于搜索包含特定术语的标题页面。例如，**intitle: administrator** 将搜索所有在标题中包含
    *administrator* 的网站，并返回这些结果。'
- en: '**inurl:**—This operator searches for URLs that contain a specific keyword.
    For example, **inurl:security** provides all URLs that contain the keyword *security*.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**inurl:**—此操作符用于搜索包含特定关键字的 URL。例如，**inurl:security** 将提供所有包含 *security* 关键字的
    URL。'
- en: '**intext:**—This operator enables Google to examine whether a specific keyword
    is found within the body of a website and provide results for those websites only.
    For example, **intext:cryptocurrency** provides results of web pages that contain
    the word *cryptocurrency* within their body.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**intext:**—此操作符使 Google 可以检查特定关键字是否出现在网站的正文中，并仅提供这些网站的结果。例如，**intext:cryptocurrency**
    提供包含 *cryptocurrency* 这个词的网页结果。'
- en: '**ext:**/ **filetype:**—These operators are used to specify a file extension.
    For instance, **cybersecurity filetype:pdf** will provide results that contain
    the word *cybersecurity* and a PDF file.'
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ext:** / **filetype:**—这些操作符用于指定文件扩展名。例如，**cybersecurity filetype:pdf** 将提供包含
    *cybersecurity* 且为 PDF 文件的结果。'
- en: '**site:**—This operator is used to provide results for a specific domain name.
    For example, **site:microsoft.com** will provide results for [microsoft.com](http://microsoft.com)
    only.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**site:**—此操作符用于提供特定域名的结果。例如，**site:microsoft.com** 将仅提供 [microsoft.com](http://microsoft.com)
    的结果。'
- en: '**before:** **yyyy-mm-dd**—This operator filters results before a particular
    time. This is useful if you’re interested in finding results or data that was
    published before a certain time.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**before:** **yyyy-mm-dd**—此操作符用于筛选特定时间之前的结果。如果你有兴趣查找某个时间之前发布的结果或数据，这是非常有用的。'
- en: '**after:** **yyyy-mm-dd**—This operator filters results after a particular
    time. This is useful if you’re interested in finding results or data that was
    published after a certain time.'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**after:** **yyyy-mm-dd**—此操作符用于筛选特定时间之后的结果。如果你有兴趣查找某个时间之后发布的结果或数据，这是非常有用的。'
- en: '***** (asterisk)—This operator is used as a wildcard to match any keyword.
    For example, **cyber *** will provide results showing anything that starts with
    *cyber*.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*****（星号）—此操作符作为通配符，用于匹配任何关键字。例如，**cyber *** 将显示以 *cyber* 开头的任何内容。'
- en: '**Keyword1 keyword2**—This search format is used to provide results with specific
    keywords. For instance, **cybersecurity microsoft** provides results on these
    related terms.'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Keyword1 keyword2**—此搜索格式用于提供包含特定关键字的结果。例如，**cybersecurity microsoft** 提供这些相关术语的结果。'
- en: '**" "** (quotation marks)—Quotation marks are used to enclose a specific search
    term such as **"****John Doe"**.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**" "**（引号）—引号用于包含特定的搜索词，例如 **"****John Doe"**。'
- en: 'The following are common scenarios for using Google advanced search operators
    to collect intelligence on a target:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用 Google 高级搜索操作符收集目标情报的常见场景：
- en: 'Imagine you want to filter the Google results for a specific domain only. Using
    the **site:domain-name** syntax provides the following results:'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设你想筛选仅针对特定域名的 Google 结果。使用 **site:domain-name** 语法将提供以下结果：
- en: '![Figure 4.3 – Filtering for a specific domain](image/B19448_04_03.jpg)'
  id: totrans-57
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.3 – 筛选特定域名](image/B19448_04_03.jpg)'
- en: Figure 4.3 – Filtering for a specific domain
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.3 – 筛选特定域名
- en: 'Imagine you’re interested in searching for a specific security vulnerability
    on a particular domain such as Microsoft’s website. Using the **printnightmare
    site:microsoft.com** syntax will provide results for **PrintNightmare** on Microsoft’s
    website:'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设你有兴趣在特定域名（如微软网站）上搜索特定的安全漏洞。使用**printnightmare site:microsoft.com**语法会提供微软网站上**PrintNightmare**的相关结果：
- en: '![Figure 4.4 – Combining a keyword with the site operator](image/B19448_04_04.jpg)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.4 – 结合关键词与站点操作符](image/B19448_04_04.jpg)'
- en: Figure 4.4 – Combining a keyword with the site operator
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.4 – 结合关键词与站点操作符
- en: 'If you’re interested in finding the customer portals on a targeted website,
    using the **customer AND login site:domain-name** syntax filters the search results
    to look for customers and logins on a specific domain, as shown in the following
    screenshot:'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你有兴趣在目标网站上查找客户门户，使用**customer AND login site:domain-name**语法可以过滤搜索结果，在特定域名上查找客户和登录信息，如下图所示：
- en: '![Figure 4.5 – Finding customer portals on a domain](image/B19448_04_05.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.5 – 在域名上查找客户门户](image/B19448_04_05.jpg)'
- en: Figure 4.5 – Finding customer portals on a domain
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.5 – 在域名上查找客户门户
- en: 'If you’re looking for login portals on a specific domain, using the **"login"
    site:domain-name** syntax will filter results with the specific keyword *login*
    on the domain, as shown in the following screenshot:'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你在查找特定域名上的登录门户，使用**"login" site:domain-name**语法会过滤带有关键词*login*的结果，如下图所示：
- en: '![Figure 4.6 – Finding login portals](image/B19448_04_06.jpg)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.6 – 查找登录门户](image/B19448_04_06.jpg)'
- en: Figure 4.6 – Finding login portals
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.6 – 查找登录门户
- en: 'Imagine you’re interested in finding specific file types on a domain. Using
    **site:domain-name filetype:txt** or **site:domain-name filetype:pdf** filters
    the Google search results, as shown in the following screenshot:'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设你有兴趣查找特定域名上的文件类型。使用**site:domain-name filetype:txt**或**site:domain-name filetype:pdf**可以过滤Google搜索结果，如下图所示：
- en: '![Figure 4.7 – Searching for file types on a domain](image/B19448_04_07.jpg)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.7 – 在域名上搜索文件类型](image/B19448_04_07.jpg)'
- en: Figure 4.7 – Searching for file types on a domain
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.7 – 在域名上搜索文件类型
- en: 'Imagine you’re interested in looking for all websites that contain the word
    *login* within their title for a specific domain. You can do this by using the
    **site:domain-name intitle:login** syntax, as shown in the following screenshot:'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 假设你有兴趣查找包含*login*一词的所有网站标题，针对特定域名，可以使用**site:domain-name intitle:login**语法，如下图所示：
- en: '![Figure 4.8 – Finding login portals](image/B19448_04_08.jpg)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.8 – 查找登录门户](image/B19448_04_08.jpg)'
- en: Figure 4.8 – Finding login portals
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.8 – 查找登录门户
- en: 'To find sub-domains for an organization, use the **site:domain-name -www**
    syntax to exclude the **www** parameter, as shown in the following screenshot:'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 要查找组织的子域名，可以使用**site:domain-name -www**语法来排除**www**参数，如下图所示：
- en: '![Figure 4.9 – Finding sub-domains](image/B19448_04_09.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.9 – 查找子域名](image/B19448_04_09.jpg)'
- en: Figure 4.9 – Finding sub-domains
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.9 – 查找子域名
- en: Tip
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Additionally, you can use the **site:*.domain.com -site:www.domain.com** Google
    dork syntax to find sub-domains of a target. For instance, if you want to find
    sub-domains of *microsoft.com*, the **site:*.microsoft.com -site:www.microsoft.com**
    syntax will filter the Google search results.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，你可以使用**site:*.domain.com -site:www.domain.com**的Google dork语法来查找目标的子域名。例如，如果你想查找*microsoft.com*的子域名，使用**site:*.microsoft.com
    -site:www.microsoft.com**语法会过滤Google搜索结果。
- en: Many possible combinations of Google advanced search operators will provide
    unique results for us. To help ease the learning curve with Google’s advanced
    search operators, Google has included an **Advanced Search** feature on their
    main Google search page that reduces the need to use specific advanced search
    operators.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 谷歌高级搜索操作符的多种组合可以为我们提供独特的结果。为了帮助用户更容易地掌握谷歌的高级搜索操作符，谷歌在其主要搜索页面上提供了一个**高级搜索**功能，减少了使用特定高级搜索操作符的需求。
- en: 'To access Google’s **Advanced Search** feature, please use the following instructions:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问谷歌的**高级搜索**功能，请按照以下说明操作：
- en: 'Go to Google’s home page at [https://www.google.com/](https://www.google.com/)
    and click on **Settings**, as shown in the following screenshot:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 访问谷歌首页 [https://www.google.com/](https://www.google.com/) 并点击**设置**，如图所示：
- en: '![Figure 4.10 – Google home page](image/B19448_04_10.jpg)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.10 – 谷歌首页](image/B19448_04_10.jpg)'
- en: Figure 4.10 – Google home page
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.10 – 谷歌首页
- en: 'Next, click on **Advanced search** as shown:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击**高级搜索**，如图所示：
- en: '![Figure 4.11 – Advanced search](image/B19448_04_11.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.11 – 高级搜索](image/B19448_04_11.jpg)'
- en: Figure 4.11 – Advanced search
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.11 – 高级搜索
- en: 'Lastly, you’ll access the **Advanced Search** menu, which provides many fields
    to help you perform advanced Google searches, as shown in the following screenshot:'
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，你将访问**高级搜索**菜单，该菜单提供了许多字段，帮助你执行高级 Google 搜索，以下截图展示了这一点：
- en: '![Figure 4.12 – Google Advanced Search menu](image/B19448_04_12.jpg)'
  id: totrans-88
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.12 – Google 高级搜索菜单](image/B19448_04_12.jpg)'
- en: Figure 4.12 – Google Advanced Search menu
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.12 – Google 高级搜索菜单
- en: Additionally, **Exploit Database** ([https://www.exploit-db.com/](https://www.exploit-db.com/))
    manages the **Google Hacking Database** (**GHDB**), a public repository of advanced
    Google search operators and combinations to find exposed systems and resources
    on the internet. The GHDB can be found at [https://www.exploit-db.com/google-hacking-database](https://www.exploit-db.com/google-hacking-database).
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，**Exploit Database** ([https://www.exploit-db.com/](https://www.exploit-db.com/))
    管理着**Google Hacking 数据库**（**GHDB**），这是一个公开的高级 Google 搜索运算符和组合的存储库，旨在查找互联网上暴露的系统和资源。GHDB
    可以在 [https://www.exploit-db.com/google-hacking-database](https://www.exploit-db.com/google-hacking-database)
    找到。
- en: 'The following screenshot shows some of the many Google dorks found on the GHDB:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了 GHDB 中找到的一些 Google dork 示例：
- en: '![Figure 4.13 – GHDB](image/B19448_04_13.jpg)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.13 – GHDB](image/B19448_04_13.jpg)'
- en: Figure 4.13 – GHDB
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.13 – GHDB
- en: As shown in the preceding screenshot, each Google dork can be used to find sensitive
    and unintentionally exposed systems and files on the internet. Please be very
    mindful and careful when lurking around using Google hacking techniques. Do not
    use the information you find for malicious purposes or to cause harm to a system
    or network.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，每个 Google dork 都可以用来查找互联网上暴露的敏感系统和文件。在使用 Google 黑客技术时，请务必小心谨慎。请勿将你找到的信息用于恶意目的或对系统或网络造成伤害。
- en: Important note
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: As an ethical hacker, Google dorks can help you find publicly exposed documents
    that contain metadata of username structures, which allows you to gain further
    insights into the way usernames are created for a targeted organization.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名道德黑客，Google dork 可以帮助你找到公开暴露的包含用户名结构元数据的文档，这让你能进一步了解目标组织是如何创建用户名的。
- en: Having completed this section, you have learned how to use internet search engines
    to collect intelligence about a target. In the next section, you will learn how
    to collect domain intelligence.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节后，你已经学会了如何使用互联网搜索引擎收集目标情报。在接下来的章节中，你将学习如何收集域名情报。
- en: Domain intelligence
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 域名情报
- en: Domain intelligence focuses on collecting and analyzing domain registry details
    and DNS records of a targeted organization to identify their systems, network
    infrastructure, and attack surface. As the internet continues to expand, there
    are more registered domain names on the internet as more organizations create
    an online presence to extend their market reach to new customers around the world.
    In addition, it’s quite easy for anyone to register a public domain name on the
    internet and use the namespace for their personal usage. Domain names have been
    around for quite some time, and they help us to easily access websites on the
    internet. For instance, imagine how challenging it would be for each person to
    know and record the IP addresses of each website they wanted to visit. If the
    IP address were unknown, then the user would not know how to connect to the destination
    website. Similarly to a postal service, if the destination mailing address is
    unknown, then the courier won’t be able to deliver the letter.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 域名情报主要关注收集和分析目标组织的域名注册详情和 DNS 记录，以识别它们的系统、网络基础设施和攻击面。随着互联网的不断扩展，注册的域名数量也在增加，因为越来越多的组织创建在线存在，旨在将市场拓展到全球新客户。此外，任何人都可以轻松地在互联网上注册一个公共域名，并将该命名空间用于个人用途。域名已经存在了相当长的时间，它们帮助我们轻松访问互联网上的网站。例如，想象一下如果每个人都需要知道并记录他们想访问的每个网站的
    IP 地址，那会是多么具有挑战性。如果 IP 地址未知，用户将不知道如何连接到目标网站。类似于邮政服务，如果目的地地址未知，那么快递员将无法递送信件。
- en: Domain names are easy-to-remember addresses that are unique on the internet,
    and they help us connect to websites such as [google.com](http://google.com) and
    [amazon.com](http://amazon.com). However, a domain name is a string of unique
    characters that are usually mapped to an IP address of a device on a network.
    Domain names usually end with a **Top Level Domain** (**TLD**) such as **.com**,
    **.net**, **.org**, and so on. Different root DNS servers are managed by the **Internet
    Assigned Numbers Authority** (**IANA**). For instance, the **.com** root DNS server
    will contain the records for all domain names that have the **.com** TLD and their
    associated IP addresses. Therefore, if a user wants to retrieve the IP address
    for [www.google.com](http://www.google.com), they will need to query the **.com**
    root DNS server, which searches its database for all records of [google.com](http://google.com).
    Once the [google.com](http://google.com) domain is found within the DNS server,
    the server then searches for the **www** record and its associated IP address
    and responds to the user’s computer. You can think of DNS servers as very large
    directories that contain many records of hostnames and their associated IP addresses,
    which helps many people around the world to easily connect to their destination
    websites and servers.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 域名是易记地址，在互联网上唯一，帮助我们访问像[google.com](http://google.com)和[amazon.com](http://amazon.com)这样的网站。然而，域名是通常映射到网络设备的IP地址的唯一字符串。域名通常以**顶级域**（**TLD**）结尾，如**.com**、**.net**、**.org**等等。不同的根DNS服务器由**互联网数字分配机构**（**IANA**）管理。例如，**.com**根DNS服务器将包含所有具有**.com**TLD的域名及其相关IP地址的记录。因此，如果用户想要检索[www.google.com](http://www.google.com)的IP地址，他们将需要查询**.com**根DNS服务器，该服务器会搜索其数据库中关于[google.com](http://google.com)的所有记录。一旦在DNS服务器中找到[google.com](http://google.com)域名，服务器然后搜索**www**记录及其相关IP地址，并响应给用户的计算机。你可以将DNS服务器视为包含许多主机名及其相关IP地址记录的非常大的目录，这有助于全球许多人轻松连接到他们的目标网站和服务器。
- en: Important note
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: DNS is a common network protocol that allows a device to resolve a hostname
    to an IP address. DNS operates on **User Datagram Protocol** (**UDP**) port **53**
    to handle DNS queries and responses between clients and the DNS server. However,
    DNS servers also use **Transmission Control Protocol** (**TCP**) port **53** for
    the zone transfer of records between one DNS server and another.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: DNS是一种常见的网络协议，允许设备将主机名解析为IP地址。DNS在**用户数据报协议**（**UDP**）端口**53**上运行，用于处理客户端和DNS服务器之间的DNS查询和响应。然而，DNS服务器还使用**传输控制协议**（**TCP**）端口**53**用于记录的区域传输，从一个DNS服务器到另一个DNS服务器。
- en: 'The following diagram shows the concept of a root DNS server:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了根DNS服务器的概念：
- en: '![Figure 4.14 – Root DNS server structure](image/B19448_04_14.jpg)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.14 – 根DNS服务器结构](image/B19448_04_14.jpg)'
- en: Figure 4.14 – Root DNS server structure
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.14 – 根DNS服务器结构
- en: Prior to using DNS servers for domain name resolution, each computer used a
    **Hosts** file that contained a list of hostnames and their associated IP addresses.
    This **Hosts** file required frequent updates to ensure it had the latest records.
    However, managing this file on all client computers became a challenging task,
    and DNS servers were used to overcome this issue. However, the **Hosts** file
    on Windows-based operating systems can be found in the **C:\Windows\System32\drivers\etc**
    folder directory. However, when a computer connects to a network, the **Dynamic
    Host Configuration Protocol** (**DHCP**) server usually provides the network’s
    DNS server IP addresses to the client. Therefore, the host operating system of
    the client device no longer queries the **Hosts** file, instead sending all DNS
    queries to the DNS servers.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用DNS服务器解析域名之前，每台计算机都使用一个包含主机名及其相关IP地址列表的**Hosts**文件。这个**Hosts**文件需要频繁更新以确保拥有最新的记录。然而，在所有客户端计算机上管理此文件变得非常具有挑战性，因此使用DNS服务器来克服这个问题。然而，在基于Windows的操作系统上，**Hosts**文件可以在**C:\Windows\System32\drivers\etc**文件夹目录中找到。然而，当计算机连接到网络时，**动态主机配置协议**（**DHCP**）服务器通常会为客户端提供网络的DNS服务器IP地址。因此，客户端设备的主机操作系统不再查询**Hosts**文件，而是将所有DNS查询发送到DNS服务器。
- en: 'The following screenshot shows the contents of the **Hosts** file of a Windows
    11 operating system:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 下图显示了 Windows 11 操作系统的**Hosts**文件内容：
- en: '![Figure 4.15 – Hosts file](image/B19448_04_15.jpg)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.15 – Hosts 文件](image/B19448_04_15.jpg)'
- en: Figure 4.15 – Hosts file
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.15 – Hosts 文件
- en: As shown in the preceding screenshot, the file was originally created to map
    hostnames to IP addresses. However, all the lines are commented by default to
    prevent the operating system from reaching any of its contents, including the
    default entries.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，该文件最初创建是为了将主机名映射到IP地址。然而，所有的行默认都被注释掉，以防止操作系统访问其内容，包括默认条目。
- en: 'The following are the general steps taken when performing a DNS query for a
    hostname:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是在执行DNS查询以获取主机名时的一般步骤：
- en: 'When a user enters a domain name or hostname into the address bar of their
    web browser, the client device checks its local DNS cache for any previous entries
    that match the hostname. If no previous entries are found, the client device sends
    a DNS query to the preferred DNS server, as shown in the following screenshot:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当用户在其网页浏览器的地址栏中输入域名或主机名时，客户端设备会检查其本地DNS缓存，查找是否有匹配的先前条目。如果未找到任何匹配的条目，客户端设备将向首选DNS服务器发送DNS查询，如下图所示：
- en: '![Figure 4.16 – DNS query](image/B19448_04_16.jpg)'
  id: totrans-113
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.16 – DNS 查询](image/B19448_04_16.jpg)'
- en: Figure 4.16 – DNS query
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.16 – DNS 查询
- en: Tip
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: The **ipconfig /displaydns** command will display the local DNS cache on a Windows-based
    operating system.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**ipconfig /displaydns** 命令将在基于Windows的操作系统上显示本地DNS缓存。'
- en: 'The DNS server will check its local database for the request record and respond
    with a DNS reply to the client device with the IP address for the hostname, as
    shown in the following screenshot:'
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: DNS 服务器将检查其本地数据库中的请求记录，并向客户端设备返回DNS响应，包含该主机名的IP地址，如下图所示：
- en: '![Figure 4.17 – DNS response](image/B19448_04_17.jpg)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.17 – DNS 响应](image/B19448_04_17.jpg)'
- en: Figure 4.17 – DNS response
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.17 – DNS 响应
- en: 'When the client device receives the IP address, it will insert it as the destination
    IP address within the **Layer 3** header of the IP packet and send it out on the
    network to establish a connection to the destination web server, as shown in the
    following screenshot:'
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 当客户端设备收到IP地址时，它会将其作为目标IP地址插入到IP数据包的**第3层**头部，并通过网络发送出去，建立与目标Web服务器的连接，如下图所示：
- en: '![Figure 4.18 – Connection to the destination server](image/B19448_04_18.jpg)'
  id: totrans-121
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.18 – 连接到目标服务器](image/B19448_04_18.jpg)'
- en: Figure 4.18 – Connection to the destination server
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.18 – 连接到目标服务器
- en: 'Domain owners and DNS server administrators can create various types of DNS
    records for a domain, such as the following:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 域名所有者和DNS服务器管理员可以为一个域创建各种类型的DNS记录，例如以下几种：
- en: '**A**: This record maps a hostname to an IPv4 address'
  id: totrans-124
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**A**：此记录将主机名映射到IPv4地址'
- en: '**AAAA**: This record maps a hostname to an IPv6 address'
  id: totrans-125
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**AAAA**：此记录将主机名映射到IPv6地址'
- en: '**MX**: This record is used to specify the (e)mail exchange servers for the
    domain'
  id: totrans-126
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MX**：此记录用于指定域的（电子）邮件交换服务器'
- en: '**NS**: Contains the name servers for the domain'
  id: totrans-127
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**NS**：包含该域的名称服务器'
- en: '**CNAME**: Specifies the canonical name (alias) for the domain or a sub-domain'
  id: totrans-128
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**CNAME**：指定域名或子域的规范名称（别名）'
- en: '**PTR**: Used to resolve an IP address to a hostname'
  id: totrans-129
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**PTR**：用于将IP地址解析为主机名'
- en: '**RP**: Used to specify the responsible person for the domain'
  id: totrans-130
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**RP**：用于指定域名的责任人'
- en: '**TXT**: This record allows the domain owner to specify a text record, which
    is commonly used to validate ownership of the domain'
  id: totrans-131
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**TXT**：此记录允许域名所有者指定文本记录，通常用于验证域名所有权'
- en: '**SRV**: Used to specify a service port'
  id: totrans-132
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SRV**：用于指定服务端口'
- en: '**SOA**: This record is used for storing administrative information about the
    domain'
  id: totrans-133
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**SOA**：此记录用于存储有关域的管理信息'
- en: Public DNS servers are available to anyone on the internet and usually contain
    a copy of the DNS records for many registered domain names. As an ethical hacker
    or penetration tester, you can leverage both the domain registration details and
    DNS records of a domain name to help you better understand the target’s network
    infrastructure, publicly available servers, and additional assets that are owned
    by the target.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 公共DNS服务器对互联网用户开放，通常包含许多注册域名的DNS记录副本。作为一名道德黑客或渗透测试员，你可以利用域名注册信息和DNS记录帮助你更好地了解目标的网络基础设施、公开可用的服务器以及目标所拥有的其他资产。
- en: 'The following diagram shows a visual mind map of key areas for collecting domain
    intelligence:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了用于收集域名情报的关键领域的视觉思维导图：
- en: '![Figure 4.19 – Domain intelligence mind map](image/B19448_04_19.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.19 – 域名情报思维导图](image/B19448_04_19.jpg)'
- en: Figure 4.19 – Domain intelligence mind map
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.19 – 域名情报思维导图
- en: As shown in the preceding diagram, ethical hackers can collect domain registration
    details from public WHOIS databases, identify sub-domains using various tools
    and internet search engines, and retrieve DNS records from public DNS servers.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，伦理黑客可以从公共WHOIS数据库收集域名注册详情，使用各种工具和互联网搜索引擎识别子域名，并从公共DNS服务器检索DNS记录。
- en: Working with WHOIS databases
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用WHOIS数据库
- en: 'Registering a domain name on the internet is quite a simple process. The user
    visits an online domain registrar, checks the availability of a preferred domain,
    and registers it for a number of years. During the registration process, the domain
    registrar collects a lot of **Personally Identifiable Information** (**PII**)
    about the new domain owner, such as the following:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 在互联网上注册一个域名是一个相当简单的过程。用户访问在线域名注册商，检查所选域名是否可用，并注册该域名数年。在注册过程中，域名注册商会收集大量关于新域名所有者的**个人可识别信息**（**PII**），例如以下内容：
- en: Full name
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 全名
- en: Physical address
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 物理地址
- en: Email address
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电子邮件地址
- en: Telephone number
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电话号码
- en: Mobile number
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手机号码
- en: Organization name
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 组织名称
- en: By registering a domain on the internet, the registration details are publicly
    available by default, enabling anyone to identify the owner of the domain name
    and other sensitive details. However, many domain registrars provide an additional
    paid service to keep the registration details private for the duration of the
    lease. In addition, during the registration process, many people and organizations
    will choose to pay an additional fee to protect their privacy and keep their domain
    registration details private. However, not everyone chooses to pay the additional
    privacy charges, thus leaving their registration details exposed on the internet.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 通过在互联网上注册一个域名，注册信息默认是公开的，任何人都可以识别域名的所有者及其他敏感信息。然而，许多域名注册商提供附加的付费服务，以在租期内保持注册信息的私密性。此外，在注册过程中，许多人和组织会选择支付额外费用来保护隐私，确保域名注册信息保持私密。然而，并非每个人都会选择支付额外的隐私保护费用，这导致他们的注册信息暴露在互联网上。
- en: 'As an ethical hacker, you can leverage the information found on a WHOIS database
    to create a profile about a target and identify their contact details and physical
    location. The following are public WHOIS databases:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 作为伦理黑客，你可以利用在WHOIS数据库中找到的信息来创建目标的个人资料，识别他们的联系信息和实际位置。以下是一些公共的WHOIS数据库：
- en: '[https://who.is/](https://who.is/)'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://who.is/](https://who.is/)'
- en: '[https://www.whois.com/whois/](https://www.whois.com/whois/)'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://www.whois.com/whois/](https://www.whois.com/whois/)'
- en: '[https://whois.domaintools.com/](https://whois.domaintools.com/)'
  id: totrans-151
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[https://whois.domaintools.com/](https://whois.domaintools.com/)'
- en: The preceding list is just a few of the many public WHOIS online databases available.
    When performing a WHOIS lookup, it’s important to query the targeted domain on
    multiple WHOIS databases to ensure the information is accurate and available.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 上述列表只是众多公共WHOIS在线数据库中的一部分。在进行WHOIS查询时，重要的是要在多个WHOIS数据库中查询目标域名，以确保信息的准确性和可用性。
- en: 'To get started with performing WHOIS lookup and retrieving domain registration
    information, please use the following instructions:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始进行WHOIS查询并获取域名注册信息，请按以下说明操作：
- en: Firstly, power on your **Kali Linux** virtual machine and verify there’s internet
    connectivity on it.
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动你的**Kali Linux**虚拟机，并验证其是否能够连接互联网。
- en: 'Next, open the Terminal on Kali Linux and use the **whois** command, like so:'
  id: totrans-155
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开Kali Linux上的终端，使用**whois**命令，如下所示：
- en: '[PRE0]'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The following screenshot shows the **whois** response for the targeted domain:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了目标域名的**whois**响应：
- en: '![Figure 4.20 – whois response](image/B19448_04_20.jpg)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.20 – whois响应](image/B19448_04_20.jpg)'
- en: Figure 4.20 – whois response
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.20 – whois响应
- en: As shown in the preceding screenshot, the **whois** tool attempted to retrieve
    all the domain registration details, such as the domain registration period, the
    name servers, the owner’s personal information, and their contact details. However,
    the domain owner has domain privacy to protect their registration details from
    being exposed on the internet.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 如上截图所示，**whois**工具尝试检索所有域名注册详情，如域名注册周期、名称服务器、所有者的个人信息以及他们的联系信息。然而，域名所有者启用了域名隐私保护，防止其注册信息暴露在互联网上。
- en: 'Next, open the web browser within Kali Linux, go to [https://mxtoolbox.com/Whois.aspx](https://mxtoolbox.com/Whois.aspx),
    and enter a targeted domain name, as shown in the following screenshot:'
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在Kali Linux中打开Web浏览器，转到[https://mxtoolbox.com/Whois.aspx](https://mxtoolbox.com/Whois.aspx)，并输入一个目标域名，如下面的屏幕截图所示：
- en: '![Figure 4.21 – MXToolbox Whois Lookup](image/B19448_04_21.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![图4.21 – MXToolbox Whois查询](image/B19448_04_21.jpg)'
- en: Figure 4.21 – MXToolbox Whois Lookup
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.21 – MXToolbox Whois查询
- en: 'As shown in the following screenshot, the MXToolbox WHOIS database provided
    the name servers of the domain and registration details:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如下面的屏幕截图所示，MXToolbox WHOIS数据库提供了该域的名称服务器和注册详细信息：
- en: '![Figure 4.22 – WHOIS results](image/B19448_04_22.jpg)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![图4.22 – WHOIS结果](image/B19448_04_22.jpg)'
- en: Figure 4.22 – WHOIS results
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.22 – WHOIS结果
- en: Most organizations will opt to pay additional fees to ensure their registration
    details are kept private from users on the internet. However, it’s a good practice
    to perform a WHOIS lookup because you may find something interesting to help you
    plan future operations in ethical hacking.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 大多数组织会选择支付额外费用，以确保其注册详细信息对互联网用户保持私密。然而，进行WHOIS查询是一个很好的做法，因为您可能会发现一些有趣的内容，帮助您规划未来的道德黑客操作。
- en: Using nslookup for reconnaissance
  id: totrans-168
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 用于侦察的nslookup
- en: The **nslookup** tool is a popular network administration tool that is built
    into many operating systems such as Windows and Linux and enables IT professionals
    to troubleshoot DNS issues on a network. As an ethical hacker, you can leverage
    **nslookup** to retrieve domain information such as DNS records from the targeted
    DNS server and other publicly available DNS servers on the internet.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '**nslookup**工具是一个流行的网络管理工具，内置在许多操作系统中，如Windows和Linux，并使IT专业人员能够在网络上解决DNS问题。作为一名道德黑客，您可以利用**nslookup**从目标DNS服务器和互联网上其他公开可用的DNS服务器中检索域信息的功能。'
- en: 'To get started with learning how to use **nslookup**, please use the following
    instructions:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始学习如何使用**nslookup**，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-171
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux**虚拟机，并确保它具有互联网连接。
- en: Next, open the Terminal on Kali Linux and execute the **nslookup** command.
    After executing the command, the Terminal prompt will change, and all queries
    on the Terminal will be sent to the IP address of the DNS server that’s configured
    on Kali Linux.
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在Kali Linux上打开终端并执行**nslookup**命令。执行命令后，终端提示符将更改，并且终端上的所有查询将发送到Kali Linux上配置的DNS服务器的IP地址。
- en: To change the current server to Google’s DNS server, use the **server 8.8.8.8**
    command. This command will send all DNS queries that are performed on the Terminal
    to Google’s DNS servers.
  id: totrans-173
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将当前服务器更改为谷歌的DNS服务器，请使用**server 8.8.8.8**命令。此命令将把终端上执行的所有DNS查询发送到谷歌的DNS服务器。
- en: 'Next, enter a domain such as [amazon.com](http://amazon.com) to perform a query,
    as shown in the following screenshot:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，输入一个域名，如[amazon.com](http://amazon.com)进行查询，如下面的屏幕截图所示：
- en: '![Figure 4.23 – nslookup tool](image/B19448_04_23.jpg)'
  id: totrans-175
  prefs: []
  type: TYPE_IMG
  zh: '![图4.23 – nslookup工具](image/B19448_04_23.jpg)'
- en: Figure 4.23 – nslookup tool
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.23 – nslookup工具
- en: As shown in the preceding screenshot, **nslookup** sends the DNS query to **8.8.8.8**
    (Google’s DNS server), retrieves the DNS **A** records for the domain name, and
    shows the public IPv4 addresses of their web servers.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，**nslookup**将DNS查询发送到**8.8.8.8**（谷歌的DNS服务器），检索域名的DNS **A**记录，并显示其Web服务器的公共IPv4地址。
- en: Important note
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The non-authoritative answer means the information was retrieved from a DNS
    server other than the server with the original DNS records. Non-authoritative
    DNS servers usually have a cached copy of the original DNS records.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 非权威答案意味着信息是从原始DNS记录的服务器之外的DNS服务器检索的。非权威DNS服务器通常具有原始DNS记录的缓存副本。
- en: 'Next, use the **set type=mx** command to change the query type and enter the
    targeted domain again to retrieve the email server information:'
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用**set type=mx**命令更改查询类型，并再次输入目标域以检索电子邮件服务器信息：
- en: '![Figure 4.24 – Retrieving email server information](image/B19448_04_24.jpg)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![图4.24 – 检索电子邮件服务器信息](image/B19448_04_24.jpg)'
- en: Figure 4.24 – Retrieving email server information
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.24 – 检索电子邮件服务器信息
- en: As shown in the preceding screenshot, the hostname of the email server was found.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的屏幕截图所示，找到了电子邮件服务器的主机名。
- en: 'To resolve the email server hostname to an IP address, use the **set type=a**
    command, then enter the hostname of the email server, as shown in the following
    screenshot:'
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要将电子邮件服务器主机名解析为 IP 地址，请使用 **set type=a** 命令，然后输入电子邮件服务器的主机名，如下图所示：
- en: '![Figure 4.25 – Resolving a hostname to an IP address](image/B19448_04_25.jpg)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.25 – 将主机名解析为 IP 地址](image/B19448_04_25.jpg)'
- en: Figure 4.25 – Resolving a hostname to an IP address
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.25 – 将主机名解析为 IP 地址
- en: As shown in the preceding screenshot, the public IPv4 address of the email server
    was retrieved from a public DNS server. Hence, it’s important to understand the
    type of records that are created on a DNS server and how ethical hackers can collect
    and analyze such information to create a profile about a target.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，电子邮件服务器的公共 IPv4 地址是从公共 DNS 服务器检索到的。因此，了解在 DNS 服务器上创建的记录类型以及道德黑客如何收集和分析此类信息以创建有关目标的概要是很重要的。
- en: Discovering sub-domains
  id: totrans-188
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发现子域名
- en: Sub-domains are used to both organize and develop a hierarchical structure for
    domain names, such as dividing a parent domain into smaller parts that can be
    easily managed by IT professionals. Furthermore, sub-domains are easily created
    by adding a prefix value to an existing parent domain. For instance, Google owns
    the [google.com](http://google.com) domain and created [mail.google.com](http://mail.google.com)
    as a sub-domain that points to its online email platform. This means that sub-domains
    can have their own IP address, content, and hosting server, and can be managed
    separately from the parent domain.
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 子域名用于组织和开发域名的分层结构，例如将父域名分成可以由 IT 专业人员轻松管理的较小部分。此外，通过向现有父域名添加前缀值，可以轻松创建子域名。例如，谷歌拥有
    [google.com](http://google.com) 域名，并创建了 [mail.google.com](http://mail.google.com)
    作为指向其在线电子邮件平台的子域名。这意味着子域名可以拥有自己的 IP 地址、内容和托管服务器，并可以与父域名分开管理。
- en: As an ethical hacker, it’s important to discover sub-domains of a target as
    they can provide valuable information during your reconnaissance phase. They can
    help you identify additional systems and network infrastructure and determine
    the security posture of the target. In addition, you can expand the attack surface,
    discovering security vulnerabilities that can lead to compromising the target
    and gaining a foothold. Furthermore, ethical hackers can spoof sub-domains that
    appear to be legitimate to a target’s domain name during a social engineering
    attack, tricking employees into revealing sensitive details such as their user
    credentials and even downloading malware onto their company-owned systems.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名道德黑客，发现目标的子域名很重要，因为它们在侦察阶段可以提供有价值的信息。它们可以帮助您识别额外的系统和网络基础设施，并确定目标的安全状况。此外，您可以扩大攻击面，发现可能导致攻击目标并获得立足点的安全漏洞。此外，道德黑客可以伪造看起来合法的子域名，出现在社会工程攻击中的目标域名中，欺骗员工透露诸如用户凭据甚至在公司拥有的系统上下载恶意软件等敏感细节。
- en: Certificate searching
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 证书搜索
- en: '**Certificate Search** is an online database that collects information from
    digital certificates that are publicly available and found on the internet. Digital
    certificates enable a user to validate the authenticity of a system on an untrusted
    network such as the internet. For instance, hackers can easily set up fake websites
    on the internet to perform social engineering attacks on their victims, such as
    tricking a person into revealing their user credentials for their online account.
    Digital certificates are used to help a user verify the identity of a website
    or device while identifying the certificate issuer, the organization, and its
    location.'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '**证书搜索**是一个在线数据库，收集来自公开可用且在互联网上找到的数字证书的信息。数字证书使用户能够验证不受信任网络（如互联网）上系统的真实性。例如，黑客可以轻松在互联网上建立虚假网站，对受害者进行社会工程攻击，比如诱使某人透露其在线账户的用户凭据。数字证书用于帮助用户验证网站或设备的身份，同时识别证书颁发者、组织及其位置。'
- en: Keep in mind that digital certificates play an important role in e-commerce
    as they are used to help improve the security of online transactions and communication
    to ensure all transmitted data between the user’s web browser and the server is
    encrypted, thus ensuring the encrypted data can only be decrypted by the intended
    recipient.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 请记住，数字证书在电子商务中扮演重要角色，因为它们用于帮助提高在线交易和通信的安全性，以确保用户的网络浏览器和服务器之间传输的所有数据都是加密的，从而确保加密数据只能被预期的接收者解密。
- en: 'Digital certificates are commonly issued by a third-party, trusted organization
    known as a **certificate authority** (**CA**) on the internet. The CA is responsible
    for validating the identity of the certificate holder; therefore, the issued certificate
    contains the following data:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 数字证书通常由互联网上的第三方可信组织**证书颁发机构**（**CA**）颁发。CA负责验证证书持有者的身份；因此，颁发的证书包含以下数据：
- en: '**Subject name**—This field contains the name of the entity that will be using
    the certificate. The entity can be a person, website, server, or organization.'
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主题名称**—此字段包含将使用证书的实体名称。该实体可以是个人、网站、服务器或组织。'
- en: '**Public key**—This field contains the public key that will be used with the
    entity to perform data encryption between the client and server.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**公钥**—此字段包含将与实体一起使用的公钥，用于在客户端和服务器之间执行数据加密。'
- en: '**Issuer name**—This field contains the name of the CA that issued the certificate.'
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**颁发者名称**—此字段包含颁发证书的CA的名称。'
- en: '**Validity dates**—This field indicates the validity duration of the certificate,
    after which the certificate will expire and become untrusted if it’s not renewed
    by the entity/certificate holder.'
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**有效期日期**—此字段表示证书的有效期，超过该期限后，若证书未被实体/证书持有者续订，则证书将过期并变得不可信。'
- en: '**Certificate serial number**—The serial number is a unique value assigned
    by the CA for identifying the certification.'
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**证书序列号**—序列号是由CA分配的唯一值，用于识别证书。'
- en: '**Signature algorithm**—This field contains the cryptographic algorithms that
    are used by the CA to digitally sign the certificate.'
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**签名算法**—此字段包含CA用来对证书进行数字签名的加密算法。'
- en: '**Thumbprint**—This field contains a **unique identifier** (**UID**) value
    that is used for verification.'
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**指纹**—此字段包含用于验证的**唯一标识符**（**UID**）值。'
- en: 'The following screenshot shows general information on a digital certificate
    for [www.amazon.com](http://www.amazon.com):'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了[www.amazon.com](http://www.amazon.com)数字证书的一般信息：
- en: '![Figure 4.26 – Certificate details](image/B19448_04_26.jpg)'
  id: totrans-203
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.26 – 证书详情](image/B19448_04_26.jpg)'
- en: Figure 4.26 – Certificate details
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.26 – 证书详情
- en: As shown in the preceding screenshot, anyone can identify the CA as DigiCert
    Global Root CA, the intermediate CA as DigiCert Global CA GA, the holder of the
    certificate as [www.amazon.com](http://www.amazon.com), and its details. Additionally,
    the **Subject Alt Names** field indicates this digital certificate can be used
    with the additional sub-domains listed within this field. As an ethical hacker,
    this field helps us to easily discover additional sub-domains of a targeted organization,
    which can lead to additional points of entry into a target.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述截图所示，任何人都可以识别CA为DigiCert Global Root CA，中间CA为DigiCert Global CA GA，证书持有者为[www.amazon.com](http://www.amazon.com)，以及其详细信息。此外，**主题备用名称**字段表示此数字证书可以与此字段中列出的附加子域一起使用。作为一名道德黑客，这个字段帮助我们轻松发现目标组织的其他子域，这可能为我们提供更多的潜在攻击入口。
- en: 'Certificate Search can help us to efficiently discover the digital certificates
    of an organization using passive reconnaissance. To get started with using Certificate
    Search as an online OSINT tool to discover the sub-domains of an organization,
    please use the following instructions:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 证书搜索可以帮助我们通过被动侦察有效地发现组织的数字证书。要开始使用证书搜索作为在线OSINT工具来发现组织的子域，请按以下说明操作：
- en: Open the web browser on your computer or Kali Linux [virtual machin](https://crt.sh/)e,
    and go to the official website of Certificate Search at [https://crt.sh/](https://crt.sh/).
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在你的计算机或 Kali Linux [虚拟机](https://crt.sh/)上打开浏览器，访问证书搜索的官方网站[https://crt.sh/](https://crt.sh/)。
- en: 'Once the website loads, enter a public domain and click on the **Search** button,
    as shown in the following screenshot:'
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 网站加载完成后，输入公共域名并点击**搜索**按钮，如下图所示：
- en: '![Figure 4.27 – Certificate Search](image/B19448_04_27.jpg)'
  id: totrans-209
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.27 – 证书搜索](image/B19448_04_27.jpg)'
- en: Figure 4.27 – Certificate Search
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.27 – 证书搜索
- en: As shown in the preceding screenshot, Certificate Search allows anyone to enter
    an identity such as a domain name or organizational name, or a certificate fingerprint.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 如前述截图所示，证书搜索允许任何人输入身份信息，如域名、组织名称或证书指纹。
- en: 'Next, Certificate Search will return all results from its database showing
    all digital certificates that contain **apple.com** as the domain, and sub-domains:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，证书搜索将从其数据库中返回所有结果，显示所有包含**apple.com**作为域名及其子域的数字证书：
- en: '![Figure 4.28 – Certificate results](image/B19448_04_28.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.28 – 证书结果](image/B19448_04_28.jpg)'
- en: Figure 4.28 – Certificate results
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.28 – 证书结果
- en: As shown in the preceding screenshot, the results contain the **crt.sh** ID,
    the logged date, validity period, **Common Name** (**CN**), matching identities,
    and additional details. The **Matching Identities** field displays the sub-domains
    of the organization; these hostnames can be easily resolved to IP addresses using
    the DNS protocols.
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，结果包含**crt.sh** ID、日志日期、有效期、**通用名称**（**CN**）、匹配的身份信息及其他详细信息。**匹配身份信息**字段显示了组织的子域名；这些主机名可以使用DNS协议轻松解析为IP地址。
- en: 'Next, click on any **crt.sh** ID to view the details within a digital certificate:'
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击任意**crt.sh** ID以查看数字证书的详细信息：
- en: '![Figure 4.29 – Certificate details](image/B19448_04_29.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.29 – 证书详情](image/B19448_04_29.jpg)'
- en: Figure 4.29 – Certificate details
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.29 – 证书详情
- en: As shown in the preceding screenshot, the digital certificate contains the locale
    information about the organization, which can be used to find the physical location
    of the company. Such information is important when conducting a black-box penetration
    test on a target when only the organization name is given to the ethical hacker
    or penetration tester. It’s important that the ethical hacker finds the accurate
    physical location of the company to identify the company’s wireless networks and
    physical security presence.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，数字证书包含有关组织的位置信息，可以用来找到公司所在地的物理位置。在进行黑箱渗透测试时，这类信息尤其重要，特别是当道德黑客或渗透测试人员仅知道组织名称的情况下。道德黑客需要找到公司的准确物理位置，以便识别公司的无线网络和物理安全设施。
- en: As you have seen in the preceding steps, Certificate Search is a valuable resource
    to help us discover digital certificates associated with a target and displays
    their locale and sub-domain information, which helps ethical hackers to create
    a profile about their targets. Next, you will learn how to discover sub-domains
    using an OSINT tool on Kali Linux.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所示，证书搜索是一个有价值的资源，帮助我们发现与目标相关的数字证书，并显示它们的位置信息和子域名信息，这有助于道德黑客为目标创建一个详细的资料。接下来，您将学习如何使用Kali
    Linux上的OSINT工具发现子域名。
- en: Working with Recon-ng
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用Recon-ng
- en: '**Recon-ng** is a popular open source reconnaissance tool that helps ethical
    hackers and penetration testers collect and analyze OSINT from the internet. This
    tool can be used to identify whether an organization is leaking sensitive data
    that can be leveraged by potential threat actors when planning a future cyber-attack.
    Recon-ng provides a command-line interface and contains various modules that are
    designed for specific tasks and collecting OSINT from various data sources.'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '**Recon-ng** 是一个流行的开源侦察工具，帮助道德黑客和渗透测试人员收集和分析来自互联网上的OSINT。该工具可用于识别组织是否泄露了敏感数据，这些数据可能被潜在威胁者在规划未来的网络攻击时加以利用。Recon-ng提供了命令行界面，并包含多个模块，专为特定任务而设计，能够从各种数据源收集OSINT。'
- en: 'The following are some advantages of using Recon-ng for collecting and analyzing
    OSINT:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是使用Recon-ng收集和分析OSINT的一些优势：
- en: '**Automation**—Recon-ng can be automated to collect OSINT from online data
    sources'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**自动化**—Recon-ng可以自动化地从在线数据源收集OSINT。'
- en: '**Modules**—There are a lot of built-in modules that can be customized to provide
    additional features and capabilities'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模块**—有许多内置模块可以定制，以提供额外的功能和能力。'
- en: '**Data management**—Recon-ng has tools that enable a user to both organize
    and manage collected data efficiently during reconnaissance'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据管理**—Recon-ng具备工具，帮助用户在侦查过程中高效地组织和管理收集的数据。'
- en: '**Reporting**—There are multiple reporting modules and features that enable
    the user to generate reports in formats such as **HyperText Markup Language**
    (**HTML**), **Extensible Markup Language** (**XML**), and **Comma-Separated Values**
    (**CSV**) files'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报告**—有多个报告模块和功能，用户可以生成**超文本标记语言**（**HTML**）、**可扩展标记语言**（**XML**）和**逗号分隔值**（**CSV**）文件等格式的报告。'
- en: 'To get started with using Recon-ng to discover and collect sub-domains of a
    target, please use the following instructions:'
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用Recon-ng发现和收集目标的子域名，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-229
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux**虚拟机，并确保它已连接到互联网。
- en: 'Next, open the Terminal and execute the following command to start Recon-ng:'
  id: totrans-230
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并执行以下命令启动Recon-ng：
- en: '[PRE1]'
  id: totrans-231
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Next, Recon-ng has an online marketplace with additional modules that can be
    downloaded and installed. To install all modules from the marketplace, use the
    following commands:'
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，Recon-ng 提供了一个在线市场，可以下载并安装额外的模块。要从市场安装所有模块，请使用以下命令：
- en: '[PRE2]'
  id: totrans-233
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'The following screenshot shows the additional modules are being downloaded
    and installed on Recon-ng:'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了额外模块正在下载并安装到 Recon-ng 上：
- en: '![Figure 4.30 – Installing modules](image/B19448_04_30.jpg)'
  id: totrans-235
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.30 – 安装模块](image/B19448_04_30.jpg)'
- en: Figure 4.30 – Installing modules
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.30 – 安装模块
- en: 'After the modules are installed, Recon-ng will reload all modules on the application,
    and you will see a lot of warning messages similar to these:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 模块安装完成后，Recon-ng 会重新加载所有模块，并且你会看到类似于以下的许多警告信息：
- en: '![Figure 4.31 – Missing application programming interface (API) keys](image/B19448_04_31.jpg)'
  id: totrans-238
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.31 – 缺少应用程序编程接口（API）密钥](image/B19448_04_31.jpg)'
- en: Figure 4.31 – Missing application programming interface (API) keys
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.31 – 缺少应用程序编程接口（API）密钥
- en: As shown in the preceding screenshot, many Recon-ng modules require a valid
    API key to communicate with an online data source to query and retrieve data about
    a target. In a later step, you will learn how to add API keys for various Recon-ng
    modules.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，许多 Recon-ng 模块需要有效的 API 密钥才能与在线数据源通信，以查询和获取关于目标的数据。在稍后的步骤中，你将学习如何为各种
    Recon-ng 模块添加 API 密钥。
- en: 'Next, to display a list of API keys and the associated module, use the following
    command:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令来显示 API 密钥及其关联的模块列表：
- en: '[PRE3]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'As shown in the following screenshot, there are no API keys assigned to any
    module by default:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，默认情况下没有任何模块分配 API 密钥：
- en: '![Figure 4.32 – Checking API keys](image/B19448_04_32.jpg)'
  id: totrans-244
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.32 – 检查 API 密钥](image/B19448_04_32.jpg)'
- en: Figure 4.32 – Checking API keys
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.32 – 检查 API 密钥
- en: Next, to get an API key for **BuiltWith**, go to [https://builtwith.com/](https://builtwith.com/)
    and create a free account. After creating an account, log in and cli[ck on **Tools**
    > **API**](https://hunter.io/) **Access** to get your API key.
  id: totrans-246
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要获取 **BuiltWith** 的 API 密钥，请访问 [https://builtwith.com/](https://builtwith.com/)
    并创建一个免费账户。创建账户后，登录并点击 **Tools** > **API** **Access** 来获取你的 API 密钥。
- en: Next, to get an API key for **HunterIO**, go to [https://hunter.io/](https://hunter.io/)
    and create a free account. When you’re logged in, click on your profile and select
    **</> API** to view your API key for this platform.
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要获取 **HunterIO** 的 API 密钥，请访问 [https://hunter.io/](https://hunter.io/) 并创建一个免费账户。登录后，点击你的个人资料并选择
    **</> API** 来查看该平台的 API 密钥。
- en: Repeat the previous steps to get API keys from **VirusTotal** at [https://www.virustotal.com/](https://www.virustotal.com/),
    **Censys** at [https://search.censys.io/](https://search.censys.io/), and **Shodan**
    at [https://www.shodan.io/](https://www.shodan.io/). Feel free to get additional
    API keys for supported modules on Recon-ng.
  id: totrans-248
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复前面的步骤，从**VirusTotal**获取 API 密钥，网址为 [https://www.virustotal.com/](https://www.virustotal.com/)，从**Censys**获取
    API 密钥，网址为 [https://search.censys.io/](https://search.censys.io/)，以及从**Shodan**获取
    API 密钥，网址为 [https://www.shodan.io/](https://www.shodan.io/)。你可以根据需要为 Recon-ng
    上支持的模块获取额外的 API 密钥。
- en: Next, to add an API key to an API-supported module, use the **keys add <API
    module name> <API key value>** command on Recon-ng—for instance, **keys add**
    **builtwith_api 12345**.
  id: totrans-249
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要将 API 密钥添加到支持 API 的模块，请在 Recon-ng 上使用 **keys add <API 模块名称> <API 密钥值>**
    命令——例如，**keys add** **builtwith_api 12345**。
- en: 'Next, use the **keys list** command to verify the API keys were added successfully,
    as shown in the following screenshot:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用 **keys list** 命令验证 API 密钥是否已成功添加，如下图所示：
- en: '![Figure 4.33 – Verifying API keys](image/B19448_04_33.jpg)'
  id: totrans-251
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.33 – 验证 API 密钥](image/B19448_04_33.jpg)'
- en: Figure 4.33 – Verifying API keys
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.33 – 验证 API 密钥
- en: 'Next, when collecting data about a target, it’s good practice to keep your
    physical and digital workspace organized to easily find information when needed.
    Therefore, use the following commands to create a digital workspace on Recon-ng:'
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在收集目标数据时，保持你的物理和数字工作区的有序性是一个好习惯，这样在需要时可以轻松找到信息。因此，请使用以下命令在 Recon-ng 上创建一个数字工作区：
- en: '[PRE4]'
  id: totrans-254
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Next, use the following command to view a list of all created workspaces within
    Recon-ng:'
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令查看 Recon-ng 中所有已创建工作区的列表：
- en: '[PRE5]'
  id: totrans-256
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'As shown in the following screenshot, the newly created workspace is available
    and we’re currently operating within it:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，新的工作区已经创建，并且我们当前正在其中操作：
- en: '![Figure 4.34 – Viewing workspaces](image/B19448_04_34.jpg)'
  id: totrans-258
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.34 – 查看工作区](image/B19448_04_34.jpg)'
- en: Figure 4.34 – Viewing workspaces
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.34 – 查看工作区
- en: 'Next, let’s use the **modules search** command to find the **bing_domain**
    module that will help us identify the geo-location and sub-domains of a target:'
  id: totrans-260
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们使用 **modules search** 命令来查找 **bing_domain** 模块，该模块将帮助我们识别目标的地理位置和子域：
- en: '[PRE6]'
  id: totrans-261
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The following screenshot shows two modules were identified and returned:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示识别并返回了两个模块：
- en: '![Figure 4.35 – Search results](image/B19448_04_35.jpg)'
  id: totrans-263
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.35 – 搜索结果](image/B19448_04_35.jpg)'
- en: Figure 4.35 – Search results
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.35 – 搜索结果
- en: 'Next, let’s use the **recon/domains-hosts/bing_domain_web** module and display
    its description:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们使用 **recon/domains-hosts/bing_domain_web** 模块并显示其描述：
- en: '[PRE7]'
  id: totrans-266
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-267
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The following screenshot shows the module’s description and the required options
    to use the module:'
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 下图展示了模块的描述以及使用该模块所需的选项：
- en: '![Figure 4.36 – Displaying module descriptions](image/B19448_04_36.jpg)'
  id: totrans-269
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.36 – 显示模块描述](image/B19448_04_36.jpg)'
- en: Figure 4.36 – Displaying module descriptions
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.36 – 显示模块描述
- en: As shown in the preceding screenshot, the **SOURCE** value must be set before
    using the module to collect OSINT from the internet.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，必须在使用模块收集互联网 OSINT 之前设置 **SOURCE** 值。
- en: 'Next, let’s set microsoft.com as the target and execute the module using the
    following commands:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们将 microsoft.com 设置为目标，并使用以下命令执行模块：
- en: '[PRE9]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '[PRE10]'
  id: totrans-274
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Tip
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: To unset a value within a module, use the **options unset <****parameter/value>**
    command.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 要在模块中取消设置一个值，使用 **options unset <****parameter/value>** 命令。
- en: 'The following screenshot shows the module has started collecting OSINT about
    the targeted domain name:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示模块已经开始收集有关目标域名的 OSINT：
- en: '![Figure 4.37 – Running a module](image/B19448_04_37.jpg)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.37 – 运行模块](image/B19448_04_37.jpg)'
- en: Figure 4.37 – Running a module
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.37 – 运行模块
- en: 'Once the module has finished collecting OSINT on the target, execute the **show
    hosts** command to view the collected data:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦模块完成目标的 OSINT 收集，执行 **show hosts** 命令以查看收集的数据：
- en: '![Figure 4.38 – Viewing collected data](image/B19448_04_38.jpg)'
  id: totrans-281
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.38 – 查看收集的数据](image/B19448_04_38.jpg)'
- en: Figure 4.38 – Viewing collected data
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.38 – 查看收集的数据
- en: To exit the current module on Recon-ng, type **back** and hit *Enter*.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要退出当前模块，输入 **back** 并按 *Enter* 键。
- en: Important note
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The **show** command can be used with **show** **[companies]** **[credentials]
    [hosts]** **[locations]** **[ports]** **[pushpins]** **[vulnerabilities] [contacts]**
    **[domains]** **[leaks]** **[netblocks]** **[profiles] [repositories]** to view
    specific information that was collected by Recon-ng.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: '**show** 命令可以与 **show** **[companies]** **[credentials] [hosts]** **[locations]**
    **[ports]** **[pushpins]** **[vulnerabilities] [contacts]** **[domains]** **[leaks]**
    **[netblocks]** **[profiles] [repositories]** 一起使用，以查看 Recon-ng 收集的特定信息。'
- en: 'Next, display a summary of all OSINT that was collected by Recon-ng:'
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，显示 Recon-ng 收集的所有 OSINT 的摘要：
- en: '[PRE11]'
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'The following screenshot shows the summary of activities that were performed
    and collected by Recon-ng:'
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以下截图展示了 Recon-ng 执行并收集的活动摘要：
- en: '![Figure 4.39 – Activity summary on Recon-ng](image/B19448_04_39.jpg)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.39 – Recon-ng 活动总结](image/B19448_04_39.jpg)'
- en: Figure 4.39 – Activity summary on Recon-ng
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.39 – Recon-ng 活动总结
- en: 'Next, to generate a report using an HTML reporting module, use the following
    commands:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要使用 HTML 报告模块生成报告，请使用以下命令：
- en: '[PRE12]'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-293
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-294
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-295
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-296
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: '[PRE17]'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'The following screenshot shows the execution of the preceding commands:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了前面命令的执行结果：
- en: '![Figure 4.40 – Using the reporting module](image/B19448_04_40.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.40 – 使用报告模块](image/B19448_04_40.jpg)'
- en: Figure 4.40 – Using the reporting module
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.40 – 使用报告模块
- en: As shown in the preceding screenshot, a report was generated and stored in the
    **/****home/kali/** directory.
  id: totrans-301
  prefs: []
  type: TYPE_NORMAL
  zh: 如上图所示，生成的报告已存储在 **/****home/kali/** 目录中。
- en: 'To view the report using a web browser, open a new Terminal and use the following
    commands:'
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用 Web 浏览器查看报告，打开一个新的终端并使用以下命令：
- en: '[PRE18]'
  id: totrans-303
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'The following screenshot shows the HTML version of the report with the data
    collected about the target domain name:'
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了 HTML 版本的报告，其中包含有关目标域名的收集数据：
- en: '![Figure 4.41 – HTML report](image/B19448_04_41.jpg)'
  id: totrans-305
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.41 – HTML 报告](image/B19448_04_41.jpg)'
- en: Figure 4.41 – HTML report
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.41 – HTML 报告
- en: 'Lastly, to access the web interface of Recon-ng, open a new Terminal and execute
    the **recon-web** command, then open a web browser and go to **http://127.0.0.1:5000/**,
    as shown in the following screenshot:'
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，要访问 Recon-ng 的 Web 界面，打开一个新的终端并执行 **recon-web** 命令，然后打开 Web 浏览器并访问 **http://127.0.0.1:5000/**，如以下截图所示：
- en: '![Figure 4.42 – Recon-ng web interface](image/B19448_04_42.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.42 – Recon-ng Web 界面](image/B19448_04_42.jpg)'
- en: Figure 4.42 – Recon-ng web interface
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.42 – Recon-ng 网络界面
- en: Having completed this exercise, you have learned the fundamentals of using Recon-ng
    to collect and analyze OSINT. Next, you will learn how to perform DNS reconnaissance
    on a target.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已经掌握了使用 Recon-ng 收集和分析 OSINT 的基础知识。接下来，你将学习如何对目标进行 DNS 侦察。
- en: DNS reconnaissance
  id: totrans-311
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: DNS 侦察
- en: DNS reconnaissance is a common technique used by ethical hackers and threat
    actors to collect information about a target by gathering publicly available information
    from DNS servers on the internet. If you recall, DNS is a network protocol that
    allows a system to resolve a hostname to an IP address, and there are many DNS
    servers on the internet that contain public DNS records about various registered
    domain names.
  id: totrans-312
  prefs: []
  type: TYPE_NORMAL
  zh: DNS 侦察是道德黑客和威胁行为者常用的一种技术，通过从互联网上的 DNS 服务器收集公开可用的信息来获取目标的相关资料。如果你记得的话，DNS 是一种网络协议，它允许系统将主机名解析为
    IP 地址，互联网上有许多 DNS 服务器保存着关于各种注册域名的公共 DNS 记录。
- en: As an ethical hacker, DNS reconnaissance focuses on sending DNS queries to either
    the target-owned DNS server or a public DNS server to retrieve DNS records about
    the target’s domain name, IP addresses, and sub-domains. The collected responses
    are analyzed to identify any valuable information about the target such as their
    systems and network architecture, potential security vulnerabilities, and application
    platforms.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名道德黑客，DNS 侦察的重点是向目标拥有的 DNS 服务器或公共 DNS 服务器发送 DNS 查询，获取有关目标域名、IP 地址和子域名的 DNS
    记录。收集到的响应将被分析，以识别关于目标的有价值信息，如其系统和网络架构、潜在的安全漏洞以及应用平台等。
- en: In this section, you will learn how to use various tools and techniques to efficiently
    collect and analyze DNS information to create a profile about a target.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分中，你将学习如何使用各种工具和技术来高效地收集和分析 DNS 信息，以创建目标的资料。
- en: Using DNSenum
  id: totrans-315
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 DNSenum
- en: '**DNSenum** is a common DNS enumeration tool that’s used to collect OSINT on
    domain names. It operates by sending various types of queries to a DNS server
    about a targeted domain name, IP addresses, email servers, name servers, and sub-domains.'
  id: totrans-316
  prefs: []
  type: TYPE_NORMAL
  zh: '**DNSenum** 是一个常用的 DNS 枚举工具，用于收集有关域名的开源情报（OSINT）。它通过向 DNS 服务器发送各种查询，获取目标域名、IP
    地址、邮件服务器、名称服务器和子域名等信息。'
- en: 'To get started with using DNSenum to collect DNS information about a targeted
    domain name, please use the following instructions:'
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 DNSenum 收集目标域名的 DNS 信息，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-318
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机，并确保其能够连接到互联网。
- en: 'Next, open the Terminal and use the following command to query Google’s DNS
    server for DNS records that belong to **apple.com**:'
  id: totrans-319
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令查询 Google 的 DNS 服务器，获取属于 **apple.com** 的 DNS 记录：
- en: '[PRE19]'
  id: totrans-320
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'As shown in the following screenshot, DNSenum is attempting to retrieve all
    DNS record types and name servers of the target domain name:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，DNSenum 正在尝试检索目标域名的所有 DNS 记录类型和名称服务器：
- en: '![Figure 4.43 – DNSenum output](image/B19448_04_43.jpg)'
  id: totrans-322
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.43 – DNSenum 输出](image/B19448_04_43.jpg)'
- en: Figure 4.43 – DNSenum output
  id: totrans-323
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.43 – DNSenum 输出
- en: As shown in the preceding screenshot, DNSenum was able to retrieve the public
    IP addresses of the target’s web server, name servers, and email servers.
  id: totrans-324
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，DNSenum 成功检索到了目标网站服务器、名称服务器和邮件服务器的公共 IP 地址。
- en: 'Once DNSenum has collected general DNS record details, it will automatically
    attempt to perform sub-domain enumeration by using a default wordlist to identify
    common sub-domains of the target, as shown in the following screenshot:'
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦 DNSenum 收集到一般的 DNS 记录细节，它将自动尝试使用默认的字典列表进行子域名枚举，以识别目标的常见子域名，如下图所示：
- en: '![Figure 4.44 – Sub-domain enumeration](image/B19448_04_44.jpg)'
  id: totrans-326
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.44 – 子域名枚举](image/B19448_04_44.jpg)'
- en: Figure 4.44 – Sub-domain enumeration
  id: totrans-327
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.44 – 子域名枚举
- en: As shown in the preceding screenshot, DNSenum was able to enumerate many sub-domains
    of the target by performing a brute-force query to Google’s DNS server.
  id: totrans-328
  prefs: []
  type: TYPE_NORMAL
  zh: 如前图所示，DNSenum 通过对 Google 的 DNS 服务器进行暴力破解查询，成功枚举出目标的多个子域名。
- en: Having completed this exercise, you have learned how to automate the collection
    of DNS records of a target from a public DNS server. Next, you will learn how
    to use DNSRecon for performing DNS reconnaissance.
  id: totrans-329
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已经学会了如何从公共 DNS 服务器自动化收集目标的 DNS 记录。接下来，你将学习如何使用 DNSRecon 进行 DNS 侦察。
- en: Working with DNSRecon
  id: totrans-330
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 DNSRecon
- en: '**DNSRecon** is another common DNS reconnaissance tool that enables ethical
    hackers and penetration testers to discover DNS records about their target’s domain
    name. This tool helps automate the processes of retrieving various DNS records
    found on public DNS servers about a specific domain name.'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '**DNSRecon**是另一种常见的DNS侦察工具，使伦理黑客和渗透测试人员能够发现目标域名的DNS记录。该工具帮助自动化从公共DNS服务器检索关于特定域名的各种DNS记录的过程。'
- en: 'To get started with using DNSRecon, please use the following instructions:'
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用DNSRecon，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-333
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux**虚拟机，并确保其具有互联网连接。
- en: 'Next, open the Terminal and use the following commands to query Google’s DNS
    server for the DNS records of **apple.com**:'
  id: totrans-334
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端，使用以下命令查询Google的DNS服务器以获取**apple.com**的DNS记录：
- en: '[PRE20]'
  id: totrans-335
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'As shown in the following screenshot, DNSRecon was able to retrieve the public
    DNS records of the target:'
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 如下图所示，DNSRecon能够检索目标的公共DNS记录：
- en: '![Figure 4.45 – DNSRecon output](image/B19448_04_45.jpg)'
  id: totrans-337
  prefs: []
  type: TYPE_IMG
  zh: '![图4.45 – DNSRecon输出](image/B19448_04_45.jpg)'
- en: Figure 4.45 – DNSRecon output
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.45 – DNSRecon输出
- en: As shown in the preceding screenshot, DNSRecon was able to retrieve various
    types of DNS records such as **A**, **AAAA**, **MX**, **TXT**, **NS**, and more.
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的截图所示，DNSRecon能够检索各种类型的DNS记录，例如**A**、**AAAA**、**MX**、**TXT**、**NS**等。
- en: 'Lastly, DNSRecon attempted to automatically enumerate the **SRV** record for
    the targeted domain, as shown in the following screenshot:'
  id: totrans-340
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 最后，DNSRecon尝试自动枚举目标域名的**SRV**记录，如下图所示：
- en: '![Figure 4.46 – Enumerating SRV records](image/B19448_04_46.jpg)'
  id: totrans-341
  prefs: []
  type: TYPE_IMG
  zh: '![图4.46 – 枚举SRV记录](image/B19448_04_46.jpg)'
- en: Figure 4.46 – Enumerating SRV records
  id: totrans-342
  prefs: []
  type: TYPE_NORMAL
  zh: 图4.46 – 枚举SRV记录
- en: Having completed this exercise, you have learned how to enumerate DNS records
    using the DNSRecon tool to find sub-domains and IP addresses of a target. Next,
    you will learn how to perform DNS zone transfers on a misconfigured DNS server.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已学习如何使用DNSRecon工具枚举DNS记录，以查找目标的子域名和IP地址。接下来，你将学习如何在配置错误的DNS服务器上执行DNS区域传输。
- en: Performing DNS zone transfers
  id: totrans-344
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 执行DNS区域传输
- en: As you have learned so far, DNS servers have an important role in internal networks
    and on the internet. A DNS zone transfer is the process of copying the zone records
    or entire contents of a DNS zone from a primary DNS server onto another DNS server.
    DNS zone transfers are used to ensure DNS data is synchronized between primary
    and secondary DNS servers. However, the primary (master) DNS server holds the
    master zone record, and the secondary DNS server holds a copy of the same zone
    record file. Whenever there’s a change to the master zone record on the primary
    DNS server, the secondary DNS server needs to update its copy of the zone record
    too, hence the need for DNS zone transfers between DNS servers.
  id: totrans-345
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所学，DNS服务器在内部网络和互联网上都扮演着重要角色。DNS区域传输是将DNS区域的记录或整个内容从主DNS服务器复制到另一个DNS服务器的过程。DNS区域传输用于确保主DNS服务器与次级DNS服务器之间的DNS数据同步。然而，主（主控）DNS服务器保存主区域记录，而次级DNS服务器保存相同区域记录文件的副本。每当主DNS服务器上的主区域记录发生变化时，次级DNS服务器也需要更新其区域记录副本，因此需要在DNS服务器之间进行DNS区域传输。
- en: However, if a DNS server is misconfigured on a network or on the internet, an
    ethical hacker can attempt to copy the master zone records of an organization
    to identify security vulnerabilities on the assets owned by the target. Imagine
    a targeted organization did not separate its internal and external namespaces
    on its DNS server. If a DNS zone transfer is possible, the ethical hacker will
    be able to retrieve information about the organization’s internal systems and
    external systems. Keep in mind that it’s important to ensure ethical hackers obtain
    explicit permission before attempting to perform DNS zone transfers on customers’
    DNS servers.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，如果DNS服务器在网络或互联网上配置错误，伦理黑客可以尝试复制一个组织的主区域记录，以识别目标资产上的安全漏洞。想象一下，如果一个目标组织在其DNS服务器上没有分隔内部和外部命名空间。如果DNS区域传输是可能的，伦理黑客将能够检索关于组织内部系统和外部系统的信息。请记住，在尝试对客户的DNS服务器执行DNS区域传输之前，确保伦理黑客已获得明确许可是非常重要的。
- en: Important note
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: The folks at *DigiNinja* ([https://digi.ninja](https://digi.ninja)) have created
    a vulnerable DNS server environment for learning how DNS zone transfers can impact
    organizations and have created the [zonetransfer.me](http://zonetransfer.me) domain,
    which contains a DNS zone transfer security vulnerability.
  id: totrans-348
  prefs: []
  type: TYPE_NORMAL
  zh: '*DigiNinja*（[https://digi.ninja](https://digi.ninja)）的团队创建了一个易受攻击的 DNS 服务器环境，用于学习
    DNS 区域传输如何影响组织，并创建了 [zonetransfer.me](http://zonetransfer.me) 域，该域包含一个 DNS 区域传输安全漏洞。'
- en: 'To get started with learning how to perform a DNS zone transfer on a vulnerable
    DNS server, please use the following instructions:'
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始学习如何在易受攻击的 DNS 服务器上执行 DNS 区域传输，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-350
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机，并确保其可以连接到互联网。
- en: 'Next, open the Terminal on Kali Linux and execute the following commands to
    discover the DNS records of the **zonetransfer.me** domain:'
  id: totrans-351
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在 Kali Linux 上打开终端并执行以下命令，以发现 **zonetransfer.me** 域的 DNS 记录：
- en: '[PRE21]'
  id: totrans-352
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'The following screenshot shows the DNS **A** and **MX** records for the targeted
    domain name:'
  id: totrans-353
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了目标域名的 DNS **A** 记录和 **MX** 记录：
- en: '![Figure 4.47 – Finding DNS records](image/B19448_04_47.jpg)'
  id: totrans-354
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.47 – 查找 DNS 记录](image/B19448_04_47.jpg)'
- en: Figure 4.47 – Finding DNS records
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.47 – 查找 DNS 记录
- en: 'Next, use the following command to retrieve the name servers of the targeted
    domain:'
  id: totrans-356
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令来获取目标域名的名称服务器：
- en: '[PRE22]'
  id: totrans-357
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'The following screenshot shows the name servers of the targeted domain were
    found:'
  id: totrans-358
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了目标域的名称服务器已找到：
- en: '![Figure 4.48 – Retrieving name servers](image/B19448_04_48.jpg)'
  id: totrans-359
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.48 – 获取名称服务器](image/B19448_04_48.jpg)'
- en: Figure 4.48 – Retrieving name servers
  id: totrans-360
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.48 – 获取名称服务器
- en: 'As shown in the preceding screenshot, the following are the two name servers
    for the domain:'
  id: totrans-361
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所示的截图，以下是该域的两个名称服务器：
- en: '**nsztm2.digi.ninja**'
  id: totrans-362
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**nsztm2.digi.ninja**'
- en: '**nsztm1.digi.ninja**'
  id: totrans-363
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**nsztm1.digi.ninja**'
- en: As ethical hackers, we can use these two name servers to determine whether the
    targeted domain is leaking zone records.
  id: totrans-364
  prefs: []
  type: TYPE_NORMAL
  zh: 作为道德黑客，我们可以使用这两个名称服务器来确定目标域是否泄露了区域记录。
- en: 'Next, let’s query the targeted domain name with one of the newly discovered
    name servers:'
  id: totrans-365
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们使用新发现的名称服务器之一查询目标域名：
- en: '[PRE23]'
  id: totrans-366
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'The following screenshot shows the DNS records that were retrieved from the
    **nsztm1.digi.ninja** name server for the **zonetransfer.me** domain name:'
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了从 **nsztm1.digi.ninja** 名称服务器为 **zonetransfer.me** 域名检索的 DNS 记录：
- en: '![Figure 4.49 – DNS records](image/B19448_04_49.jpg)'
  id: totrans-368
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.49 – DNS 记录](image/B19448_04_49.jpg)'
- en: Figure 4.49 – DNS records
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.49 – DNS 记录
- en: As shown in the preceding screenshot, there are many sensitive and interesting
    hostnames found within the results. Some of these hostnames and IP addresses may
    not be intentionally exposed by the organization; however, such information can
    be leveraged by an ethical hacker to expand the attack surface.
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所示的截图，结果中发现了许多敏感和有趣的主机名。这些主机名和 IP 地址可能并非组织故意公开；然而，这些信息可以被道德黑客利用，以扩展攻击面。
- en: Important note
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: When performing DNS reconnaissance and zone transfers, ensure you query all
    name servers for a targeted domain as one server may lack proper security configuration
    compared with the others.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 在进行 DNS 侦察和区域传输时，确保查询目标域的所有名称服务器，因为某个服务器可能与其他服务器相比缺乏适当的安全配置。
- en: 'Next, let’s use **DNSenum** to automate the DNS zone transfer process on the
    target domain name:'
  id: totrans-373
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，让我们使用 **DNSenum** 自动化目标域名的 DNS 区域传输过程：
- en: '[PRE24]'
  id: totrans-374
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'The following screenshot shows that DNSenum was able to successfully perform
    a DNS zone transfer from the vulnerable **nsztm2.digi.ninja** name server of the
    target:'
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示 DNSenum 成功从目标的易受攻击 **nsztm2.digi.ninja** 名称服务器执行了 DNS 区域传输：
- en: '![Figure 4.50 – DNS zone transfer](image/B19448_04_50.jpg)'
  id: totrans-376
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.50 – DNS 区域传输](image/B19448_04_50.jpg)'
- en: Figure 4.50 – DNS zone transfer
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.50 – DNS 区域传输
- en: 'Furthermore, DNSenum was able to retrieve additional interesting records from
    the vulnerable DNS server:'
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，DNSenum 能够从易受攻击的 DNS 服务器中检索到更多有趣的记录：
- en: '![Figure 4.51 – Zone records](image/B19448_04_51.jpg)'
  id: totrans-379
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.51 – 区域记录](image/B19448_04_51.jpg)'
- en: Figure 4.51 – Zone records
  id: totrans-380
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.51 – 区域记录
- en: The information collected from zone transfers can help ethical hackers to identify
    the network infrastructure of the targeted organization such as the hostname of
    systems and their IP addresses. Having completed this exercise, you have learned
    how to use perform DNS zone transfers on a vulnerable DNS server. Next, you will
    how SpiderFoot helps ethical hackers during their reconnaissance phase in penetration
    testing.
  id: totrans-381
  prefs: []
  type: TYPE_NORMAL
  zh: 从区域传输收集到的信息可以帮助道德黑客识别目标组织的网络基础设施，例如系统的主机名及其IP地址。完成此练习后，您已经学习了如何在易受攻击的DNS服务器上执行DNS区域传输。接下来，您将了解SpiderFoot如何在渗透测试的侦察阶段帮助道德黑客。
- en: Exploring SpiderFoot
  id: totrans-382
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 探索SpiderFoot
- en: '**SpiderFoot** is a popular OSINT tool used by cybersecurity professionals
    for reconnaissance, **threat intelligence** (**TI**), and investigation purposes.
    SpiderFoot can help ethical hackers to automate the collection of OSINT from various
    data sources on the internet. For instance, SpiderFoot operates by collecting
    data from various internet search engines, social media platforms, DNS records,
    WHOIS databases, and other publicly available sources. Then, SpiderFoot will both
    organize the collected data and present information in a way that helps ethical
    hackers easily analyze it.'
  id: totrans-383
  prefs: []
  type: TYPE_NORMAL
  zh: '**SpiderFoot**是一款流行的OSINT工具，广泛应用于网络安全专业人士的侦察、**威胁情报**（**TI**）和调查工作。SpiderFoot可以帮助道德黑客自动化从互联网各类数据源收集OSINT。例如，SpiderFoot通过收集来自各种互联网搜索引擎、社交媒体平台、DNS记录、WHOIS数据库和其他公开可用的来源的数据来运作。然后，SpiderFoot将整理收集到的数据，并以帮助道德黑客轻松分析的方式呈现信息。'
- en: Important note
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To learn more about the SpiderFoot project, please visit [https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot).
  id: totrans-385
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于SpiderFoot项目的信息，请访问[https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot)。
- en: 'To get started with using SpiderFoot for reconnaissance, please use the following
    instructions:'
  id: totrans-386
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用SpiderFoot进行侦察，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，打开**Kali Linux**虚拟机并确保它可以连接到互联网。
- en: 'Next, open the Terminal on Kali Linux and execute the following command to
    start the SpiderFoot web interface:'
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在Kali Linux中打开终端并执行以下命令以启动SpiderFoot网页界面：
- en: '[PRE25]'
  id: totrans-389
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'The following screenshot shows the web interface for SpiderFoot has started:'
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了SpiderFoot的网页界面已启动：
- en: '![Figure 4.52 – Starting the web interface for SpiderFoot](image/B19448_04_52.jpg)'
  id: totrans-391
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.52 – 启动SpiderFoot的网页界面](image/B19448_04_52.jpg)'
- en: Figure 4.52 – Starting the web interface for SpiderFoot
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.52 – 启动SpiderFoot的网页界面
- en: Next, open the web browser within Kali Linux and go to **http://127.0.0.1:1234**
    to access the web interface.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，在Kali Linux中的网页浏览器中访问**http://127.0.0.1:1234**以进入网页界面。
- en: 'Next, click **New Scan**, set a **Scan Name** value, set a **Scan Target**
    value, select **Passive**, and click on **Run Scan Now**, as shown in the following
    screenshot:'
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击**新扫描**，设置**扫描名称**，设置**扫描目标**，选择**被动**，然后点击**立即开始扫描**，如以下截图所示：
- en: '![Figure 4.53 – Setting up a new scan](image/B19448_04_53.jpg)'
  id: totrans-395
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.53 – 设置新扫描](image/B19448_04_53.jpg)'
- en: Figure 4.53 – Setting up a new scan
  id: totrans-396
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.53 – 设置新扫描
- en: 'Next, the scan will start, and SpiderFoot will automatically populate the scan
    progress with the collected OSINT, as shown in the following screenshot:'
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，扫描将开始，SpiderFoot将自动用收集到的OSINT填充扫描进度，如以下截图所示：
- en: '![Figure 4.54 – Summary data](image/B19448_04_54.jpg)'
  id: totrans-398
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.54 – 汇总数据](image/B19448_04_54.jpg)'
- en: Figure 4.54 – Summary data
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.54 – 汇总数据
- en: 'Next, selecting the **Browse** sub-tab within the current scan will display
    the number of collected data elements for each type of artifact:'
  id: totrans-400
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择当前扫描中的**浏览**子标签，将显示每种工件类型收集的数据元素数量：
- en: '![Figure 4.55 – Viewing artifact data](image/B19448_04_55.jpg)'
  id: totrans-401
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.55 – 查看工件数据](image/B19448_04_55.jpg)'
- en: Figure 4.55 – Viewing artifact data
  id: totrans-402
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.55 – 查看工件数据
- en: 'Next, select the **Internet Name** artifact to view a list of sub-domains for
    the targeted domain name:'
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，选择**互联网名称**工件，以查看目标域名的子域名列表：
- en: '![Figure 4.56 – Viewing sub-domains](image/B19448_04_56.jpg)'
  id: totrans-404
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.56 – 查看子域名](image/B19448_04_56.jpg)'
- en: Figure 4.56 – Viewing sub-domains
  id: totrans-405
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.56 – 查看子域名
- en: 'Next, click on **Browse** > **Physical Location** to view a list of the target’s
    geo-location data:'
  id: totrans-406
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，点击**浏览** > **物理位置**以查看目标的地理位置数据列表：
- en: '![Figure 4.57 – Geo-locations](image/B19448_04_57.jpg)'
  id: totrans-407
  prefs: []
  type: TYPE_IMG
  zh: '![图 4.57 – 地理位置](image/B19448_04_57.jpg)'
- en: Figure 4.57 – Geo-locations
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 图 4.57 – 地理位置
- en: After the entire scan is completed, ensure you visit all the artifact categories
    to view all collected OSINT about the target to improve the profile of the target
    and identify any security vulnerabilities that can be exploited to gain a foothold.
  id: totrans-409
  prefs: []
  type: TYPE_NORMAL
  zh: 扫描完成后，确保访问所有文物类别，查看所有收集的关于目标的开放源情报（OSINT），以改进目标资料，并识别任何可以利用的安全漏洞，以便获取立足点。
- en: Having completed this section, you have learned how to use various tools and
    techniques to efficiently discover sensitive information about a target such as
    its hostname, IP address, and even geo-locations.
  id: totrans-410
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节内容后，您已学习如何使用各种工具和技术高效地发现目标的敏感信息，如其主机名、IP 地址，甚至地理位置。
- en: Summary
  id: totrans-411
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you have learned how to use leverage internet search engines
    to discover sensitive information about organizations. Additionally, you have
    gained hands-on skills to perform Google hacking techniques to find interesting
    domain names and sub-domains for a company. Furthermore, you have explored how
    to use various techniques and tools to discover and collect OSINT on domain names,
    sub-domains, and DNS information.
  id: totrans-412
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您已学习如何利用互联网搜索引擎发现关于组织的敏感信息。此外，您还获得了实际操作技能，能够使用 Google 黑客技巧来查找公司的有趣域名和子域名。您还探索了如何使用各种技术和工具来发现和收集域名、子域名和
    DNS 信息的开放源情报（OSINT）。
- en: I hope this chapter has been informative for you and helpful in your journey
    in the cybersecurity industry. In the next chapter, *Organizational Infrastructure
    Intelligence*, you will gain the practical skills needed to identify the network
    and organizational infrastructure of a targeted organization.
  id: totrans-413
  prefs: []
  type: TYPE_NORMAL
  zh: 希望本章内容对您有所帮助，并对您在网络安全行业的旅程有所启发。在下一章《*组织基础设施情报*》中，您将获得识别目标组织网络和基础设施的实践技能。
- en: Further reading
  id: totrans-414
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入阅读
- en: 'DNS servers: [https://www.cloudflare.com/learning/dns/what-is-a-dns-server/](https://www.cloudflare.com/learning/dns/what-is-a-dns-server/)'
  id: totrans-415
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'DNS 服务器: [https://www.cloudflare.com/learning/dns/what-is-a-dns-server/](https://www.cloudflare.com/learning/dns/what-is-a-dns-server/)'
- en: 'DNS records: [https://www.cloudflare.com/learning/dns/dns-records/](https://www.cloudflare.com/learning/dns/dns-records/'
  id: totrans-416
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'DNS 记录: [https://www.cloudflare.com/learning/dns/dns-records/](https://www.cloudflare.com/learning/dns/dns-records/)'
- en: )
  id: totrans-417
  prefs: []
  type: TYPE_NORMAL
  zh: )
- en: 'SpiderFoot: [https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot)'
  id: totrans-418
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 'SpiderFoot: [https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot)'
