- en: '9'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '9'
- en: Delving into Website Reconnaissance
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 深入网站侦察
- en: As the internet continues to grow, there are many websites created almost every
    day by organizations to help reach new and potential customers beyond traditional
    borders. Threat actors usually perform a lot of reconnaissance to gather as much
    information as possible and collect intelligence about their targets’ websites
    and domains. This information is valuable to threat actors in planning future
    cyber-attacks on a target. As an ethical hacker, it’s important to identify the
    attack surface and determine how web reconnaissance can be leveraged by real attackers
    in planning a cyber-attack.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 随着互联网的不断发展，组织每天几乎都会创建许多网站，以帮助他们超越传统边界，接触到新的潜在客户。威胁行为者通常会进行大量侦察，以尽可能多地收集信息并获取目标网站和域名的情报。这些信息对威胁行为者在规划未来网络攻击时非常有价值。作为一名伦理黑客，识别攻击面并确定网络侦察如何被真实攻击者用于规划网络攻击至关重要。
- en: During this chapter, you will learn how to use common tools and techniques to
    efficiently collect information about a target, such as its IP addresses and sub-domains,
    discover hidden directories, and identify the attack surface. Furthermore, you
    will learn how to use web vulnerability scanners to identify web application weaknesses
    and work with web reconnaissance frameworks to automate the collection and analysis
    of data.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将学习如何使用常见的工具和技术来高效地收集有关目标的信息，例如其 IP 地址和子域，发现隐藏的目录，并识别攻击面。此外，您将学习如何使用 web
    漏洞扫描器来识别 web 应用程序的弱点，并使用 web 侦察框架来自动化数据的收集和分析。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Collecting domain information
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集域名信息
- en: Sub-domain enumeration
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 子域枚举
- en: Performing directory enumeration
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 执行目录枚举
- en: Web application vulnerabilities
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Web 应用程序漏洞
- en: Web reconnaissance frameworks
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网站侦察框架
- en: Let’s dive in!
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们深入了解！
- en: Technical requirements
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: 'To follow along with the exercises in this chapter, please ensure that you
    have met the following hardware and software requirements:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 要跟随本章中的练习进行，请确保您的硬件和软件符合以下要求：
- en: Kali Linux installed – [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Kali Linux 已安装 – [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
- en: Collecting domain information
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 收集域名信息
- en: As an ethical hacker, collecting the **Domain Name System** (**DNS**) information
    and IP addresses and determining the backend infrastructure helps you to better
    understand the attack surface and attack vectors of a target. For instance, if
    you’re performing an external network penetration test or **Open Source Intelligence**
    (**OSINT**) penetration test on an organization, finding the target’s domain and
    website are good starting points. A domain name can lead you to discover the website
    and the sub-domains and IP addresses assigned to servers owned by the target.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名伦理黑客，收集 **域名系统**（**DNS**）信息和 IP 地址，并确定后端基础设施，有助于您更好地了解目标的攻击面和攻击向量。例如，如果您正在进行外部网络渗透测试或
    **开放源代码情报**（**OSINT**）渗透测试，查找目标的域名和网站是一个不错的起点。域名可以帮助您发现目标的网页、子域以及分配给目标所拥有服务器的
    IP 地址。
- en: This section focuses on using various tactics and techniques to retrieve the
    IP addresses, discovering any infrastructure details, and running web technologies
    on a target’s web server and domain.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 本节重点介绍使用各种战术和技术来检索 IP 地址、发现基础设施细节，并在目标的 web 服务器和域名上运行 web 技术。
- en: Retrieving IP addresses
  id: totrans-17
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 检索 IP 地址
- en: By retrieving the IP addresses of a target domain and its sub-domain, ethical
    hackers are able to map the external network topology and identify potential security
    vulnerabilities that can be exploited by an attacker to gain unauthorized access.
    Furthermore, without identifying the IP addresses of a target, ethical hackers
    won’t be able to simulate real-world cyber-attacks to determine the security posture
    of an organization.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 通过检索目标域及其子域的 IP 地址，伦理黑客可以映射外部网络拓扑并识别潜在的安全漏洞，攻击者可以利用这些漏洞获得未授权的访问权限。此外，如果没有识别目标的
    IP 地址，伦理黑客将无法模拟现实世界中的网络攻击，进而确定组织的安全态势。
- en: 'To get started with identifying the IP addresses for a domain name, use the
    following instructions:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始识别域名的 IP 地址，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine and ensure it has internet
    connectivity.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机，并确保它具有互联网连接。
- en: 'Next, open the Terminal and use the **host <domain-name>** command to retrieve
    the IPv4 and IPv6 addresses of a target, as shown:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用 **host <domain-name>** 命令检索目标的 IPv4 和 IPv6 地址，如下所示：
- en: '![Figure 9.1 – host command](image/Figure_9.01_B19448.jpg)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.1 – host 命令](image/Figure_9.01_B19448.jpg)'
- en: Figure 9.1 – host command
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.1 – host 命令
- en: A domain name is simply a namespace on a network such as the internet; however,
    the IP addresses that are associated with a domain or host indicate the network
    location of the target. As shown in the preceding snippet, performing an IP lookup
    on the addresses can reveal the geo-location of the hosting servers or target.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 域名仅仅是网络（如互联网）上的一个命名空间；然而，关联到域名或主机的 IP 地址指示了目标的网络位置。如前面的代码片段所示，执行对这些地址的 IP 查询可以揭示托管服务器或目标的地理位置。
- en: Tip
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: To identify the geo-location of the network address, go to [https://whatismyipaddress.com/ip-lookup](https://whatismyipaddress.com/ip-lookup)
    to perform an IP lookup on any public IP address.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 要识别网络地址的地理位置，请访问 [https://whatismyipaddress.com/ip-lookup](https://whatismyipaddress.com/ip-lookup)，对任何公共
    IP 地址执行 IP 查询。
- en: 'Next, the **nslookup** tool is used to troubleshoot **DNS** issues and retrieve
    the IP addresses of a hostname. To get the IP addresses of a domain name, use
    the **nslookup <domain-name> <DNS-server>** command as shown:'
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**nslookup** 工具用于排查 **DNS** 问题并检索主机名的 IP 地址。要获取域名的 IP 地址，请使用 **nslookup
    <domain-name> <DNS-server>** 命令，如下所示：
- en: '![Figure 9.2 – The nslookup tool](image/Figure_9.02_B19448.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.2 – nslookup 工具](image/Figure_9.02_B19448.jpg)'
- en: Figure 9.2 – The nslookup tool
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.2 – nslookup 工具
- en: As shown in the preceding snippet, **nslookup** sent the DNS queries to Google’s
    DNS server at **8.8.8.8** and the response provides the IP addresses shown in
    the output.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的代码片段所示，**nslookup** 将 DNS 查询发送到 Google 的 DNS 服务器 **8.8.8.8**，并且响应提供了输出中显示的
    IP 地址。
- en: Important note
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: There are different DNS records, such as **A**, which resolves a hostname to
    an IPv4 address; **AAAA**, which resolves a hostname to an IPv6 address; **MX**,
    which specifies the mail exchange server; **CNAME**, which specifies a canonical
    name or alias for a domain; **PTR**, which resolves an IP address to a hostname;
    **TXT**, which specifies a text record; **RP**, which specifies the person responsible
    for the domain; and **NS**, which specifies the authoritative name server for
    the domain.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 有不同类型的 DNS 记录，例如 **A**，将主机名解析为 IPv4 地址；**AAAA**，将主机名解析为 IPv6 地址；**MX**，指定邮件交换服务器；**CNAME**，指定域名的规范名称或别名；**PTR**，将
    IP 地址解析为主机名；**TXT**，指定文本记录；**RP**，指定负责该域名的人；**NS**，指定该域名的权威名称服务器。
- en: 'The **dig** utility on Linux-based systems enables you to query a specific
    DNS server using the **@** syntax, then followed by the domain name. To retrieve
    the DNS records for a domain name, use the **dig @<dns-server> <target-domain>**
    command as shown:'
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在基于 Linux 的系统中，**dig** 工具允许你使用 **@** 语法查询特定的 DNS 服务器，后面跟上域名。要检索域名的 DNS 记录，请使用
    **dig @<dns-server> <target-domain>** 命令，如下所示：
- en: '![Figure 9.3 – The dig command](image/Figure_9.03_B19448.jpg)'
  id: totrans-34
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.3 – dig 命令](image/Figure_9.03_B19448.jpg)'
- en: Figure 9.3 – The dig command
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.3 – dig 命令
- en: 'To retrieve a specific DNS record type, simply append the **A**, **AAAA** **MX**,
    **NS**, **PTR**, **CNAME**, or **RP** record type at the end of the command as
    shown:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 要检索特定的 DNS 记录类型，只需在命令的末尾添加 **A**、**AAAA**、**MX**、**NS**、**PTR**、**CNAME** 或
    **RP** 记录类型，如下所示：
- en: '![Figure 9.4 – Retrieving specific DNS records](image/Figure_9.04_B19448.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.4 – 获取特定的 DNS 记录](image/Figure_9.04_B19448.jpg)'
- en: Figure 9.4 – Retrieving specific DNS records
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.4 – 获取特定的 DNS 记录
- en: As shown in the preceding snippet, **dig** was able to retrieve the name servers
    for the domain name.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的代码片段所示，**dig** 成功检索了域名的名称服务器。
- en: Important note
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: If an attacker is able to compromise the name servers of a domain, the hacker
    can manipulate the DNS records stored on the server. This enables the attacker
    to perform various types of DNS-based and spoofing attacks.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 如果攻击者能够破坏一个域名的名称服务器，黑客可以操控存储在服务器上的 DNS 记录。这使得攻击者能够执行各种基于 DNS 的攻击和欺骗攻击。
- en: 'Next, the **dnsrecon** tool enables you to automate the retrieval of public
    DNS records for a domain; use the **dnsrecon -d <domain-name> -n <dns-server>**
    command as shown:'
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**dnsrecon** 工具允许你自动化地检索域名的公共 DNS 记录；使用 **dnsrecon -d <domain-name> -n <dns-server>**
    命令，如下所示：
- en: '![Figure 9.5 – The dnsrecon tool](image/Figure_9.05_B19448.jpg)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.5 – dnsrecon 工具](image/Figure_9.05_B19448.jpg)'
- en: Figure 9.5 – The dnsrecon tool
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.5 – dnsrecon 工具
- en: Having completed this exercise, you have learned how to retrieve the IP addresses
    and DNS records of a target domain. Next, you’ll learn how to identify the target’s
    domain infrastructure.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已学会如何检索目标域名的 IP 地址和 DNS 记录。接下来，你将学习如何识别目标的域名基础设施。
- en: Identifying domain infrastructure
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别域名基础设施
- en: Identifying the domain infrastructure helps ethical hackers to map the attack
    surface of a target. This enables the ethical hacker to determine what systems
    and applications are in use, and this data can be leveraged to identify security
    vulnerabilities and attack vectors for delivering an exploit to the target.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 识别域名基础设施有助于道德黑客绘制目标的攻击面。这使道德黑客能够确定正在使用哪些系统和应用程序，这些数据可以用来识别安全漏洞和攻击路径，以便将漏洞利用传递给目标。
- en: 'To get started with identifying domain infrastructure, use the following instructions:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始识别域名基础设施，请按照以下说明操作：
- en: 'It’s always recommended to implement a **Web Application Firewall** (**WAF**)
    in front of a web application server to prevent web application attacks. The **WAFW00F**
    tool helps ethical hackers to determine whether a target website is behind a WAF,
    so use the **wafw00f <target>** command as shown:'
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 始终建议在 Web 应用程序服务器前面实现 **Web 应用防火墙** (**WAF**) 来防止 Web 应用程序攻击。**WAFW00F** 工具帮助道德黑客确定目标网站是否位于
    WAF 后面，因此使用 **wafw00f <target>** 命令，如下所示：
- en: '![Figure 9.6 – Detecting WAFs](image/Figure_9.06_B19448.jpg)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.6 – 检测 WAF](image/Figure_9.06_B19448.jpg)'
- en: Figure 9.6 – Detecting WAFs
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.6 – 检测 WAF
- en: If the target is behind a WAF, you will not be able to retrieve the real public
    IP address of the target; instead, you’ll obtain the address of the WAF application
    due to the reverse proxy feature. In addition, the WAF will analyze all web traffic
    going to the targeted website and block any potentially malicious traffic.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 如果目标位于 WAF 后面，你将无法检索到目标的真实公共 IP 地址；相反，由于反向代理功能，你将获得 WAF 应用程序的地址。此外，WAF 会分析所有访问目标网站的
    web 流量，并阻止任何可能的恶意流量。
- en: 'The **WHOIS** tool enables you to retrieve the public domain registrar records
    of the target; use the **whois <domain>** command as shown:'
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**WHOIS** 工具允许你检索目标域名的公共注册商记录；使用 **whois <domain>** 命令，如下所示：'
- en: '![Figure 9.7 – Collecting the domain registration details](image/Figure_9.07_B19448.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.7 – 收集域名注册详情](image/Figure_9.07_B19448.jpg)'
- en: Figure 9.7 – Collecting the domain registration details
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.7 – 收集域名注册详情
- en: Sometimes, an organization may not pay for additional privacy protection when
    registering a domain name, and its sensitive information will be publicly available,
    which can be leveraged by threat actors in planning future attacks such as social
    engineering.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，组织在注册域名时可能不会支付额外的隐私保护费用，因此其敏感信息将公开可用，威胁行为者可以利用这些信息规划未来的攻击，例如社会工程学攻击。
- en: 'Next, the site report tool on **Netcraft** helps ethical hackers to profile
    the infrastructure and technologies of a website on the internet. Go to [https://sitereport.netcraft.com/](https://sitereport.netcraft.com/)
    and enter a domain as shown:'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**Netcraft** 的站点报告工具帮助道德黑客对互联网上的一个网站的基础设施和技术进行分析。访问 [https://sitereport.netcraft.com/](https://sitereport.netcraft.com/)
    并输入一个域名，如下所示：
- en: '![Figure 9.8 – Netcraft](image/Figure_9.08_B19448.jpg)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.8 – Netcraft](image/Figure_9.08_B19448.jpg)'
- en: Figure 9.8 – Netcraft
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.8 – Netcraft
- en: 'After a few seconds, Netcraft will provide the network and hosting details
    as shown:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 几秒钟后，Netcraft 会提供网络和托管详细信息，如下所示：
- en: '![Figure 9.9 – Network infrastructure details](image/Figure_9.09_B19448.jpg)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.9 – 网络基础设施详情](image/Figure_9.09_B19448.jpg)'
- en: Figure 9.9 – Network infrastructure details
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.9 – 网络基础设施详情
- en: 'Additionally, Netcraft provides the IP block information that can be used to
    geo-locate the physical server that’s hosting the domain and website as shown:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，Netcraft 提供了可以用来进行地理位置定位的 IP 阻塞信息，从而确定托管域名和网站的物理服务器，如下所示：
- en: '![Figure 9.10 – Network block details](image/Figure_9.10_B19448.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.10 – 网络块详情](image/Figure_9.10_B19448.jpg)'
- en: Figure 9.10 – Network block details
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.10 – 网络块详情
- en: 'Next, **DNS Dumpster** is an online tool that performs extensive DNS reconnaissance,
    research, and analysis on a targeted domain. Go to [https://dnsdumpster.com/](https://dnsdumpster.com/)
    and enter a domain as shown:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**DNS 垃圾桶**是一个在线工具，可以对目标域名进行广泛的 DNS 勘探、研究和分析。访问 [https://dnsdumpster.com/](https://dnsdumpster.com/)
    并输入一个域名，如下所示：
- en: '![Figure 9.11 – DNS Dumpster](image/Figure_9.11_B19448.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.11 – DNS 垃圾桶](image/Figure_9.11_B19448.jpg)'
- en: Figure 9.11 – DNS Dumpster
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.11 – DNS 垃圾桶
- en: 'After a few seconds, DNS Dumpster provides all the DNS records and name servers
    for the domain as shown:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 几秒钟后，DNS Dumpster 会提供该域名的所有 DNS 记录和名称服务器，如下所示：
- en: '![Figure 9.12 – DNS information](image/Figure_9.12_B19448.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.12 – DNS 信息](image/Figure_9.12_B19448.jpg)'
- en: Figure 9.12 – DNS information
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.12 – DNS 信息
- en: 'Additionally, DNS Dumpster automatically creates a map of the domain to provide
    insights on the available DNS records, IP addresses, and name servers as shown:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，DNS Dumpster 会自动创建一个域名地图，提供有关可用 DNS 记录、IP 地址和名称服务器的洞察，如下所示：
- en: '![Figure 9.13 – Mapping of a domain](image/Figure_9.13_B19448.jpg)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.13 – 域名映射](image/Figure_9.13_B19448.jpg)'
- en: Figure 9.13 – Mapping of a domain
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.13 – 域名映射
- en: 'Furthermore, DNS Dumpster provides a graphical representation showing the backend
    infrastructure and how the records are mapped to each other in the domain:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，DNS Dumpster 提供了一个图形化表示，展示了后端基础设施以及域名中记录如何相互映射：
- en: '![Figure 9.14 – DNS infrastructure graph](image/Figure_9.14_B19448.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.14 – DNS 基础设施图](image/Figure_9.14_B19448.jpg)'
- en: Figure 9.14 – DNS infrastructure graph
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.14 – DNS 基础设施图
- en: As shown in the preceding snippet, the visual map helps ethical hackers to better
    understand how the DNS records of a domain are associated with IP addresses and
    whether there are any unintentionally exposed systems on the internet that are
    owned by the target.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的代码片段所示，视觉地图帮助道德黑客更好地理解域名的 DNS 记录如何与 IP 地址关联，并且是否有任何意外暴露的系统，这些系统是目标所有的。
- en: Identifying web technologies
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 识别 web 技术
- en: As an ethical hacker, it’s important to identify whether a website has any security
    vulnerabilities that can be exploited by a real attacker. Sometimes, an underlying
    web application or **Content Management System** (**CMS**) may be outdated or
    contain vulnerable plugins, which can be exploited to gain unauthorized access,
    steal data or manipulate the backend database. Additionally, this helps the ethical
    hacker better understand the web technologies that are running on the target and
    improve the attack plan to ensure the best suitable tactics and techniques are
    used to deliver the attack to the target.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名道德黑客，重要的是要识别一个网站是否存在可以被真实攻击者利用的安全漏洞。有时候，底层的 web 应用程序或**内容管理系统**（**CMS**）可能已经过时或包含易受攻击的插件，这些漏洞可能被利用来获取未经授权的访问、窃取数据或操控后端数据库。此外，这还帮助道德黑客更好地了解目标上运行的
    web 技术，并改进攻击计划，确保使用最佳的战术和技术来实施攻击。
- en: While there are many web technologies in the industry, ethical hackers can leverage
    knowledge, experience, and research to find known security vulnerabilities in
    a web application just as a real attacker would. However, the intention is to
    discover security vulnerabilities before a real cyber-attack occurs and provide
    recommendations on mitigation and countermeasures to prevent future attacks and
    threats.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管行业中有许多 web 技术，但道德黑客可以利用知识、经验和研究来寻找 web 应用程序中已知的安全漏洞，就像真实的攻击者一样。然而，目的是在真实的网络攻击发生之前发现安全漏洞，并提供缓解措施和对策，以防止未来的攻击和威胁。
- en: 'To get started with identifying the technologies of a website, use the following
    instructions:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始识别一个网站的技术，请使用以下步骤：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux** 虚拟机。
- en: 'The **WhatWeb** tools help ethical hackers to profile the web technologies
    that are found on a target website. To identify web technologies, use the **whatweb
    <domain>** command within the Terminal as shown:'
  id: totrans-84
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**WhatWeb** 工具帮助道德黑客分析目标网站上发现的 web 技术。要识别 web 技术，请在终端中使用 **whatweb <domain>**
    命令，如下所示：'
- en: '![Figure 9.15 – Identifying web technologies](image/Figure_9.15_B19448.jpg)'
  id: totrans-85
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.15 – 识别 web 技术](image/Figure_9.15_B19448.jpg)'
- en: Figure 9.15 – Identifying web technologies
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.15 – 识别 web 技术
- en: As shown in the preceding snippet, WhatWeb was able to retrieve specific web
    application and technology versions, which can be used to identify security vulnerabilities
    on the target.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 如前面的代码片段所示，WhatWeb 能够获取特定的 web 应用程序和技术版本信息，这些信息可以用来识别目标上的安全漏洞。
- en: 'Next, **Wappalyzer** is a browser add-on for identifying web technologies on
    a website. Open the **Mozilla Firefox** web browser, go to [https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/](https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/),
    and click on **Add to Firefox** to install the plugin as shown:'
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**Wappalyzer** 是用于识别网站上的 Web 技术的浏览器插件。打开 **Mozilla Firefox** 浏览器，访问 [https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/](https://addons.mozilla.org/en-US/firefox/addon/wappalyzer/)，点击
    **Add to Firefox** 安装插件，如图所示：
- en: '![Figure 9.16 – Wappalyzer](image/Figure_9.16_B19448.jpg)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.16 – Wappalyzer](image/Figure_9.16_B19448.jpg)'
- en: Figure 9.16 – Wappalyzer
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.16 – Wappalyzer
- en: After the add-on is installed on Mozilla Firefox, the Wappalyzer icon will automatically
    appear on the browser’s toolbar.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了 Wappalyzer 插件后，它的图标将自动出现在浏览器工具栏上。
- en: 'Wappalyzer will analyze the web applications on any website that you visit
    to identify the web technologies; simply click on the Wappalyzer icon on the browser’s
    toolbar to view the website details as shown:'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: Wappalyzer 将分析您访问的任何网站上的 Web 应用程序，以识别其 Web 技术；只需点击浏览器工具栏上的 Wappalyzer 图标即可查看网站详细信息，如图所示：
- en: '![Figure 9.17 – Wappalyzer details](image/Figure_9.17_B19448.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.17 – Wappalyzer 详细信息](image/Figure_9.17_B19448.jpg)'
- en: Figure 9.17 – Wappalyzer details
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.17 – Wappalyzer 详细信息
- en: 'Next, **BuiltWith** is another Mozilla Firefox add-on for profiling the web
    technologies of a website. Go to [https://addons.mozilla.org/en-US/firefox/addon/builtwith/](https://addons.mozilla.org/en-US/firefox/addon/builtwith/)
    and click on **Add to Firefox** as shown:'
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，**BuiltWith** 是另一个 Mozilla Firefox 插件，用于分析网站的 Web 技术。访问 [https://addons.mozilla.org/en-US/firefox/addon/builtwith/](https://addons.mozilla.org/en-US/firefox/addon/builtwith/)，点击
    **Add to Firefox** 安装插件，如图所示：
- en: '![Figure 9.18 – BuiltWith add-on page](image/Figure_9.18_B19448.jpg)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.18 – BuiltWith 插件页面](image/Figure_9.18_B19448.jpg)'
- en: Figure 9.18 – BuiltWith add-on page
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.18 – BuiltWith 插件页面
- en: 'After the BuiltWith add-on is installed on Firefox, its icon will automatically
    appear on the browser’s toolbar. Simply visit any website and click on the BuiltWith
    icon to view the web technologies of the website as shown:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 安装了 BuiltWith 插件后，其图标将自动出现在 Firefox 的浏览器工具栏上。只需访问任何网站，点击 BuiltWith 图标即可查看网站的
    Web 技术，如图所示：
- en: '![Figure 9.19 – BuiltWith details](image/Figure_9.19_B19448.jpg)'
  id: totrans-99
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.19 – BuiltWith 详细信息](image/Figure_9.19_B19448.jpg)'
- en: Figure 9.19 – BuiltWith details
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.19 – BuiltWith 详细信息
- en: These add-ons are very useful and conveniently and quickly identify the technologies
    that are running on any web application or server that you visit and should be
    within your arsenal of tools.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 这些插件非常有用，可以快速方便地识别您访问的任何 Web 应用程序或服务器上运行的技术，并应该是您工具库中的一部分。
- en: Having completed this section, you have learned how to use various tools and
    techniques to collect information about a targeted domain name and website. Next,
    you will learn how to enumerate the sub-domains of a target.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节后，您将学会如何使用各种工具和技术收集有关目标域名和网站的信息。接下来，您将学习如何枚举目标的子域名。
- en: Sub-domain enumeration
  id: totrans-103
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 子域名枚举
- en: Threat actors such as hackers use both passive and active reconnaissance techniques
    to identify the sub-domains of a target. Usually, an organization will register
    a domain name (parent domain) and create additional sub-domains, where each sub-domain
    points to a different server that’s owned by the target. For instance, [domain.local](http://domain.local)
    points to the IP address of the web server and [mail.domain.local](http://mail.domain.local)
    points to the IP address of the email server. Therefore, enumerating the sub-domains
    and resolving their IP addresses helps attackers to identify security vulnerabilities
    and the attack surface of additional systems owned by the target.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 威胁行为者如黑客使用被动和主动侦察技术来识别目标的子域名。通常，一个组织会注册一个域名（父域名）并创建额外的子域名，其中每个子域名指向目标拥有的不同服务器。例如，[domain.local](http://domain.local)
    指向网页服务器的IP地址，[mail.domain.local](http://mail.domain.local) 指向电子邮件服务器的IP地址。因此，列举子域名并解析其IP地址帮助攻击者识别安全漏洞和目标拥有的额外系统的攻击面。
- en: Sometimes, a sub-domain is used to host a test environment for users that are
    misconfigured, running a vulnerable or less secure application, and connected
    to the internal corporate network. If an attacker were to compromise this system,
    they would be able to pivot their attacks through the compromised system to the
    internal network of the target. Furthermore, the sub-domains of a target are not
    always configured with the same security policies and posture, which can further
    lead to having different security vulnerabilities that can be exploited in multiple
    ways to gain unauthorized access. As an ethical hacker, it’s important to identify
    the sub-domains of an organization to better determine its security posture and
    identify hidden vulnerabilities.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，子域被用来托管用户的测试环境，这些环境配置错误，运行着易受攻击或安全性较差的应用程序，并且连接到内部公司网络。如果攻击者能够入侵此系统，他们就能够通过已被攻陷的系统转向目标的内部网络进行进一步攻击。此外，目标的子域往往并没有配置相同的安全策略和防护措施，这可能会导致存在不同的安全漏洞，攻击者可通过多种方式利用这些漏洞来获得未经授权的访问权限。作为一名伦理黑客，识别一个组织的子域对于更好地了解其安全状况并识别潜在漏洞非常重要。
- en: Discovering sub-domains using Sublist3r
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Sublist3r 发现子域
- en: '**Sublist3r** is a popular tool that collects and analyzes OSINT to identify
    the sub-domains of a target.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**Sublist3r** 是一个流行的工具，用于收集和分析 OSINT，以识别目标的子域。'
- en: 'To get started with using Sublist3r for sub-domain enumeration, use the following
    instructions:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Sublist3r 进行子域枚举，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and use the following commands to update the software
    package repository list:'
  id: totrans-110
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令更新软件包仓库列表：
- en: '[PRE0]'
  id: totrans-111
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Next, download the Sublist3r setup files using the following command:'
  id: totrans-112
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令下载 Sublist3r 安装文件：
- en: '[PRE1]'
  id: totrans-113
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: The preceding GitHub repository is a working branch from the official repository
    at [https://github.com/aboul3la/Sublist3r](https://github.com/aboul3la/Sublist3r).
    Unfortunately, the packages from the official GitHub repository no longer work
    at the time of writing.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 上述 GitHub 仓库是来自 [https://github.com/aboul3la/Sublist3r](https://github.com/aboul3la/Sublist3r)
    官方仓库的一个工作分支。不幸的是，官方 GitHub 仓库中的软件包在写作时已无法使用。
- en: 'Next, use the following commands to change the present working directory to
    the **Sublist3r** folder and install its requirements:'
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令将当前工作目录切换到 **Sublist3r** 文件夹，并安装其依赖：
- en: '[PRE2]'
  id: totrans-116
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-117
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The following snippet shows the execution of the preceding commands:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了执行前述命令的结果：
- en: '![Figure 9.20 – Installing the requirements](image/Figure_9.20_B19448.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.20 – 安装需求](image/Figure_9.20_B19448.jpg)'
- en: Figure 9.20 – Installing the requirements
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.20 – 安装需求
- en: 'Next, use the following commands to perform sub-domain enumeration on a domain:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令对一个域进行子域枚举：
- en: '[PRE4]'
  id: totrans-122
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'The following snippet shows Sublist3r has searched through multiple data sources
    and discovered the sub-domains of the target:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了 Sublist3r 已通过多个数据源进行搜索并发现目标的子域：
- en: '![Figure 9.21 – Discovering sub-domains](image/Figure_9.21_B19448.jpg)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.21 – 发现子域](image/Figure_9.21_B19448.jpg)'
- en: Figure 9.21 – Discovering sub-domains
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.21 – 发现子域
- en: Having completed this exercise, you have learned how to set up and work with
    Sublist3r to enumerate the sub-domains of a target. Next, you will learn how to
    use theHarvester to find additional sub-domains.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已学会如何设置并使用 Sublist3r 对目标的子域进行枚举。接下来，你将学习如何使用 theHarvester 查找更多的子域。
- en: Finding sub-domains with theHarvester
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 theHarvester 查找子域
- en: '**theHarvester** is a popular tool used by ethical hackers during passive reconnaissance
    to collect email addresses, hostnames, IP addresses, and sub-domains of a target
    from multiple online data sources.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**theHarvester** 是一个广泛使用的工具，伦理黑客在被动侦察过程中使用它来收集目标的电子邮件地址、主机名、IP 地址和子域，来源于多个在线数据源。'
- en: 'To get started with using theHarvester to find sub-domains, use the following
    instructions:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 theHarvester 查找子域，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and use the following commands to view available options
    and syntax for theHarvester:'
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令查看 theHarvester 的可用选项和语法：
- en: '[PRE5]'
  id: totrans-132
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The following snippet shows the various forms of syntax and their usage:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了各种语法形式及其用法：
- en: '![Figure 9.22 – theHarvester options](image/Figure_9.22_B19448.jpg)'
  id: totrans-134
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.22 – theHarvester 选项](image/Figure_9.22_B19448.jpg)'
- en: Figure 9.22 – theHarvester options
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.22 – theHarvester 选项
- en: 'To gather the sub-domains, use the **theHarvester -d <target> -b <source>**
    command as follows:'
  id: totrans-136
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要收集子域名，使用 **theHarvester -d <target> -b <source>** 命令，格式如下：
- en: '[PRE6]'
  id: totrans-137
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'The **source** specifies the data source to use when collecting information
    about the target. The following snippet shows that theHarvester was able to collect
    sub-domains and their IP addresses for the target:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**source** 指定收集目标信息时使用的数据源。以下代码片段显示 theHarvester 已经能够为目标收集子域名及其 IP 地址：'
- en: '![Figure 9.23 – Sub-domains](image/Figure_9.23_B19448.jpg)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.23 – 子域名](image/Figure_9.23_B19448.jpg)'
- en: Figure 9.23 – Sub-domains
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.23 – 子域名
- en: As an ethical hacker, ensure you use different data sources when collecting
    intelligence on a target, as some data sources will provide more information than
    others. Having completed this exercise, you have learned how to use theHarvester
    to collect sub-domains and their IP addresses. Next, you will learn how to use
    Knockpy to aggressively enumerate sub-domains.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 作为一名道德黑客，确保在收集目标情报时使用不同的数据源，因为有些数据源提供的信息比其他数据源更多。完成此练习后，你已经学会了如何使用 theHarvester
    收集子域名及其 IP 地址。接下来，你将学习如何使用 Knockpy 进行积极的子域名枚举。
- en: Collecting sub-domains using Knockpy
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Knockpy 收集子域名
- en: '**Knockpy** is a passive, sub-domain enumeration tool that leverages OSINT
    and performs dictionary scanning to identify sub-domains of a target.'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '**Knockpy** 是一个被动的子域名枚举工具，利用开放源情报（OSINT）并执行字典扫描，以识别目标的子域名。'
- en: 'To get started with using Knockpy for sub-domain enumeration, use the following
    instructions:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Knockpy 进行子域名枚举，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and use the following command to update the software
    package repository list and install **Knockpy**:'
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令更新软件包仓库列表并安装 **Knockpy**：
- en: '[PRE7]'
  id: totrans-147
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '[PRE8]'
  id: totrans-148
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'Next, to perform sub-domain enumeration on a target, use the following command:'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要对目标执行子域名枚举，请使用以下命令：
- en: '[PRE9]'
  id: totrans-150
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'The following snippet shows the Knockpy results when tested with a public domain
    name:'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段显示了在使用公共域名测试时 Knockpy 的结果：
- en: '![Figure 9.24 – Knockpy results](image/Figure_9.24_B19448.jpg)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.24 – Knockpy 结果](image/Figure_9.24_B19448.jpg)'
- en: Figure 9.24 – Knockpy results
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.24 – Knockpy 结果
- en: As shown in the preceding snippet, Knockpy was able to retrieve IP addresses,
    hostnames, and server information about each sub-domain. Additionally, the HTTP
    status code indicates whether the resource was found (**200**) or not.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所示，Knockpy 能够检索每个子域名的 IP 地址、主机名和服务器信息。此外，HTTP 状态码指示资源是否被找到（**200**）或未找到。
- en: Having completed this section, you have learned how to set up and use various
    tools to efficiently identify the sub-domains of a target. In the next section,
    you will learn how to discover hidden directories on a web application.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节内容后，你已经学会了如何设置和使用各种工具来高效地识别目标的子域名。在下一节中，你将学习如何发现 web 应用程序中的隐藏目录。
- en: Performing directory enumeration
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 执行目录枚举
- en: Sometimes, web administrators and IT professionals unintentionally expose sensitive
    and restricted directories and files on their web applications and servers on
    the internet. If a threat actor were to find confidential data within a hidden
    directory on a target’s web server, it can be leveraged to plan and perform future
    attacks on the target.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，网络管理员和 IT 专业人员无意中在其网络应用程序和服务器上暴露了敏感和受限的目录与文件。如果攻击者能够在目标的 web 服务器上找到隐藏目录中的机密数据，他们可能会利用这些数据来策划并执行针对目标的未来攻击。
- en: This section focuses on using various tools and techniques to discover hidden
    directories and files as an ethical hacker.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 本节重点介绍如何作为道德黑客，使用各种工具和技术来发现隐藏的目录和文件。
- en: Using GoBuster to find hidden directories
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 GoBuster 查找隐藏目录
- en: '**GoBuster** is a brute-force tool used to identify the sub-domains, directories,
    files, and hostnames of a target.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '**GoBuster** 是一个暴力破解工具，用于识别目标的子域名、目录、文件和主机名。'
- en: 'To get started with using GoBuster to find hidden directories and files of
    a domain, use the following instructions:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 GoBuster 查找域名的隐藏目录和文件，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and use the following commands to update the software
    package repository list and install **GoBuster**:'
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令更新软件包仓库列表并安装 **GoBuster**：
- en: '[PRE10]'
  id: totrans-164
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'To perform DNS sub-domain enumeration on a target, use the following commands:'
  id: totrans-166
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要对目标进行 DNS 子域名枚举，请使用以下命令：
- en: '[PRE12]'
  id: totrans-167
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '**dns** is a syntax-specific DNS brute-force mode, and **-w** specifies an
    offline wordlist.'
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: '**dns** 是一种特定语法的 DNS 暴力破解模式，**-w** 用于指定离线字典文件。'
- en: Tip
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: Within Kali Linux, there are many offline wordlists within the **/usr/share/wordlists/**
    directory that are commonly used for brute-force attacks and enumerating directories.
    Furthermore, you can download additional wordlist files from [https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists).
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kali Linux 中，**/usr/share/wordlists/** 目录中有许多离线字典文件，这些字典文件通常用于暴力破解攻击和目录枚举。此外，你还可以从
    [https://github.com/danielmiessler/SecLists](https://github.com/danielmiessler/SecLists)
    下载其他字典文件。
- en: 'The following snippet shows GoBuster enumerating the sub-domains of a target:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码段显示了 GoBuster 对目标进行子域名枚举：
- en: '![Figure 9.25 – Sub-domain enumeration](image/Figure_9.25_B19448.jpg)'
  id: totrans-172
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.25 – 子域名枚举](image/Figure_9.25_B19448.jpg)'
- en: Figure 9.25 – Sub-domain enumeration
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.25 – 子域名枚举
- en: 'Next, to discover the hidden directories of a domain/website, use the following
    commands:'
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要发现域名/网站的隐藏目录，请使用以下命令：
- en: '[PRE13]'
  id: totrans-175
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE13]'
- en: 'The following snippet shows various directories that were found and a relevant
    HTTP status code:'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码段显示了找到的各种目录及其相关的 HTTP 状态码：
- en: '![Figure 9.26 – Directories](image/Figure_9.26_B19448.jpg)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.26 – 目录](image/Figure_9.26_B19448.jpg)'
- en: Figure 9.26 – Directories
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.26 – 目录
- en: HTTP status code 301 means the resource has permanently changed its location
    and a new **Uniform Resource Locator** (**URL**) is given in the response from
    the web server. Additionally, the HTTP status code **200** means the resource
    was found, which is good for ethical hackers.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: HTTP 状态码 301 表示资源的位置已永久改变，新的 **统一资源定位符** (**URL**) 会在 Web 服务器的响应中给出。此外，HTTP
    状态码 **200** 表示资源已找到，对道德黑客而言是一个好消息。
- en: Tip
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: To learn more about HTTP status codes and their meaning, please see [https://developer.mozilla.org/en-US/docs/Web/HTTP/Status](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status).
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于 HTTP 状态码及其含义的信息，请参见 [https://developer.mozilla.org/en-US/docs/Web/HTTP/Status](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status)。
- en: As you saw in the preceding snippet, Gobuster performs an aggressive directory
    and file enumeration on a target. This tool can help ethical hackers identify
    sensitive and unintentionally exposed resources on a web server.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你在前面的代码段中看到的，GoBuster 对目标进行了激进的目录和文件枚举。这个工具可以帮助道德黑客识别 Web 服务器上敏感和无意暴露的资源。
- en: Important note
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To learn more about GoBuster, please see [https://github.com/OJ/gobuster](https://github.com/OJ/gobuster).
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于 GoBuster 的信息，请参见 [https://github.com/OJ/gobuster](https://github.com/OJ/gobuster)。
- en: Having completed this exercise, you have learned how to use GoBuster to discover
    the sub-domains and hidden directories of a target. Next, you will learn how to
    perform directory enumeration using Dirb.
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: 完成此练习后，你已经学会了如何使用 GoBuster 发现目标的子域名和隐藏目录。接下来，你将学习如何使用 Dirb 进行目录枚举。
- en: Directory enumeration with DIRB
  id: totrans-186
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 DIRB 进行目录枚举
- en: '**DIRB** is a popular web application scanner that looks for hidden directories
    and files on a web server. DIRB uses a wordlist to perform a dictionary-based
    attack on a target, querying each word from the wordlist to identify web resources.'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '**DIRB** 是一个流行的 Web 应用程序扫描器，用于查找 Web 服务器上的隐藏目录和文件。DIRB 使用一个单词列表对目标进行字典式攻击，查询列表中的每个单词来识别
    Web 资源。'
- en: 'To get started with using DIRB to identify hidden web directories and files,
    use the following instructions:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 DIRB 识别隐藏的 Web 目录和文件，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and run the **OWASP JuiceShop** Docker container using
    the following command:'
  id: totrans-190
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令运行 **OWASP JuiceShop** Docker 容器：
- en: '[PRE14]'
  id: totrans-191
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Next, open a new Terminal window and use the following commands to perform
    a directory-based brute-force on the **Open Web Application Security Project**
    (**OWASP**) JuiceShop web application:'
  id: totrans-192
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开一个新的终端窗口，并使用以下命令对 **开放 Web 应用程序安全项目** (**OWASP**) JuiceShop Web 应用程序进行基于目录的暴力破解：
- en: '[PRE15]'
  id: totrans-193
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'The following snippet shows hidden directories that were found on the target
    using DIRB:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码段显示了使用 DIRB 在目标上找到的隐藏目录：
- en: '![Figure 9.27 – Directory enumeration](image/Figure_9.27_B19448.jpg)'
  id: totrans-195
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.27 – 目录枚举](image/Figure_9.27_B19448.jpg)'
- en: Figure 9.27 – Directory enumeration
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.27 – 目录枚举
- en: It’s important to manually visit every URL to determine whether the hidden resource
    is valuable and can be leveraged when planning future attacks on the target. For
    instance, the **/assets** directory may contain sensitive information such as
    the IP addresses of additional systems owned by the target, and the **/robots.txt**
    resource may contain additional sub-directories.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 手动访问每个URL以确定隐藏资源是否有价值并在未来攻击目标时加以利用非常重要。例如，**/assets**目录可能包含敏感信息，如目标拥有的其他系统的IP地址，**/robots.txt**资源可能包含其他子目录。
- en: Tip
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: To learn more about DIRB, please see [https://www.kali.org/tools/dirb/](https://www.kali.org/tools/dirb/).
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于DIRB的信息，请查看[https://www.kali.org/tools/dirb/](https://www.kali.org/tools/dirb/)。
- en: Having completed this section, you have learned how to use various tools to
    assist when discovering hidden directories and files on a web server of a target.
    In the next section, you will learn how to get started with discovering web vulnerabilities.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节内容后，你已学习如何使用各种工具来帮助发现目标Web服务器上的隐藏目录和文件。在下一节中，你将学习如何开始发现Web漏洞。
- en: Web application vulnerability
  id: totrans-201
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Web应用程序漏洞
- en: 'As an ethical hacker, it’s essential to understand web application security
    and the OWASP **Top 10** web application security risks. Web applications are
    special software that runs on a server to host websites and are easily accessible
    using a standard web browser. For instance, when you access your favorite search
    engine, your web browser creates a **Hypertext Transfer Protocol** (**HTTP**)
    or **HTTP Secure** (**HTTPS**) **GET** message to request the resource on the
    destination web server (the internet search engine). Once the web application
    receives the HTTP **GET** message (the request), it processes and provides a response
    with the requested data back to the web browser:'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: 作为道德黑客，理解Web应用程序安全和OWASP的**Top 10** Web应用程序安全风险至关重要。Web应用程序是运行在服务器上的特殊软件，用于托管网站，并且可以通过标准Web浏览器轻松访问。例如，当你访问你喜欢的搜索引擎时，你的Web浏览器会发送一个**超文本传输协议**（**HTTP**）或**安全HTTP**（**HTTPS**）**GET**消息，以请求目标Web服务器（互联网搜索引擎）上的资源。一旦Web应用程序收到HTTP
    **GET**消息（请求），它会处理并返回请求的数据响应给Web浏览器：
- en: 'The following diagram shows the communication between the browser and a web
    application:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图示展示了浏览器与Web应用程序之间的通信：
- en: '![Figure 9.28 – Web communication](image/Figure_9.28_B19448.jpg)'
  id: totrans-204
  prefs: []
  type: TYPE_IMG
  zh: '![图9.28 – Web通信](image/Figure_9.28_B19448.jpg)'
- en: Figure 9.28 – Web communication
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 图9.28 – Web通信
- en: Web applications are created with lots of code by developers. However, many
    web servers on the internet run outdated and insecure web applications that can
    be exploited by potential hackers. As with any software, web applications need
    to be regularly tested by developers and ethical hackers to identify any hidden
    security vulnerabilities and implement secure coding practices to resolve any
    issues. OWASP regularly updates its Top 10 web application security risks to help
    cybersecurity professionals, researchers, and software developers to better understand
    how to find security weaknesses using thorough security testing and recommends
    how to resolve these security flaws before a real hacker is able to discover and
    exploit them.
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: Web应用程序是由开发者使用大量代码创建的。然而，互联网上的许多Web服务器运行的是过时且不安全的Web应用程序，这些应用程序可能被潜在黑客利用。与任何软件一样，Web应用程序需要开发者和道德黑客定期进行测试，以识别任何隐藏的安全漏洞，并实施安全的编码实践来解决这些问题。OWASP定期更新其Top
    10 Web应用程序安全风险，以帮助网络安全专业人员、研究人员和软件开发人员更好地理解如何通过全面的安全测试找到安全弱点，并建议如何在黑客真正发现并利用这些漏洞之前解决这些安全问题。
- en: Important note
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: This book focuses on reconnaissance for ethical hackers and does not cover exploitation.
    If you’re interested in learning more about web application security risks, please
    visit the OWASP website at [https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/).
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 本书重点关注道德黑客的侦察，不涉及漏洞利用。如果你有兴趣了解更多关于Web应用程序安全风险的信息，请访问OWASP官网：[https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/)。
- en: There are many commercial web application scanners in the industry that work
    well. However, **Nikto** is a free web application scanner that’s designed to
    perform fast security checks on a target web application or server, which we will
    use here.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: 行业内有许多商业Web应用程序扫描器表现良好。然而，**Nikto**是一个免费的Web应用程序扫描器，旨在对目标Web应用程序或服务器进行快速的安全检查，我们将在这里使用它。
- en: 'To get started with using Nikto to discover web application vulnerabilities,
    please use the following instructions:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Nikto 发现网络应用程序漏洞，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux**虚拟机。
- en: 'Next, open the Terminal and execute the following commands to run the **OWASP
    JuiceShop** Docker container:'
  id: totrans-212
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并执行以下命令以运行**OWASP JuiceShop** Docker 容器：
- en: '[PRE16]'
  id: totrans-213
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'Next, open another Terminal and perform a web vulnerability scan on the OWASP
    JuiceShop web application using the following command:'
  id: totrans-214
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开另一个终端，并使用以下命令对 OWASP JuiceShop 网络应用程序执行网络漏洞扫描：
- en: '[PRE17]'
  id: totrans-215
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'As shown in the following snippet, Nikto is able to identify common web application
    security vulnerabilities in the target:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: 如下片段所示，Nikto 能够识别目标中的常见网络应用安全漏洞：
- en: '![Figure 9.29 – Nikto](image/Figure_9.29_B19448.jpg)'
  id: totrans-217
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.29 – Nikto](image/Figure_9.29_B19448.jpg)'
- en: Figure 9.29 – Nikto
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.29 – Nikto
- en: It’s important to thoroughly research each bullet point (**+**) listed in the
    Nikto results as it will provide brief details on a potential security issue.
    Additionally, Nikto provides **Open Sourced Vulnerability Database** (**OSVDB**)
    references for known security vulnerabilities.
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 彻底研究 Nikto 结果中列出的每个要点（**+**）非常重要，因为它将提供潜在安全问题的简要细节。此外，Nikto 还提供了**开源漏洞数据库**（**OSVDB**）的已知安全漏洞参考。
- en: Tip
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 提示
- en: For a list of web vulnerability scanning tools, please see [https://owasp.org/www-community/Vulnerability_Scanning_Tools](https://owasp.org/www-community/Vulnerability_Scanning_Tools).
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 有关网络漏洞扫描工具的列表，请参见 [https://owasp.org/www-community/Vulnerability_Scanning_Tools](https://owasp.org/www-community/Vulnerability_Scanning_Tools)。
- en: Having completed this section, you have learned how to use Nikto, a free web
    application vulnerability scanner, to identify common security flaws on a web
    application. Next, you will learn how to automate your web reconnaissance techniques
    using reconnaissance frameworks.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节内容后，您已经学会了如何使用免费的网络应用程序漏洞扫描器 Nikto 来识别网络应用程序中的常见安全缺陷。接下来，您将学习如何使用侦察框架自动化您的网络侦察技术。
- en: Web reconnaissance frameworks
  id: totrans-223
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 网络侦察框架
- en: Web reconnaissance frameworks help ethical hackers and penetration testers to
    simply automate many manual tasks, such as running multiple tools one after another,
    then collecting and consolidating the results to improve the analysis phase. With
    a reconnaissance framework, an ethical hacker can set the target domain and let
    the framework take care of thoroughly collecting information using passive and
    active techniques from multiple data sources and generating human-readable reports
    for post-analysis.
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 网络侦察框架帮助道德黑客和渗透测试人员简化自动化许多手动任务，例如依次运行多个工具，随后收集并整合结果以改进分析阶段。通过侦察框架，道德黑客可以设置目标域名，让框架使用多种数据源的被动和主动技术，全面收集信息并生成便于人类阅读的报告，供后续分析使用。
- en: 'In this section, you will learn how to set up and use the following web reconnaissance
    frameworks:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，您将学习如何设置和使用以下网络侦察框架：
- en: Sn1per
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Sn1per
- en: Amass
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Amass
- en: I hope you’re excited – let’s dive in.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 希望你已经迫不及待了——让我们开始吧。
- en: Automating reconnaissance with Sn1per
  id: totrans-229
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Sn1per 自动化侦察
- en: '**Sn1per** is designed to be an all-in-one web reconnaissance framework that’s
    built to perform extensive information gathering on discovering hidden assets
    and security vulnerabilities on a target, hence helping cybersecurity professionals
    and organizations with **Attack Surface Management** (**ASM**). Rather than running
    multiple reconnaissance tools for collecting and analyzing data from various sources,
    the Sn1per framework helps automate the entire process of data collection for
    a target, from analysis to providing a human-readable report at the end. Hence,
    it helps ethical hackers to automate time-consuming and mundane tasks to improve
    their reconnaissance phase and analyze data efficiently to create intelligence
    about a target.'
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: '**Sn1per** 是一个全能的网络侦察框架，旨在执行广泛的信息收集工作，帮助发现目标上隐藏的资产和安全漏洞，从而协助网络安全专业人员和组织进行**攻击面管理**（**ASM**）。与其使用多个侦察工具从不同来源收集和分析数据，不如使用
    Sn1per 框架来自动化整个数据收集过程，从分析到最终提供可供人类阅读的报告。因此，它帮助道德黑客自动化那些耗时且单调的任务，提升侦察阶段的效率，并通过高效的数据分析来创建目标情报。'
- en: 'To get started with using Sn1per for reconnaissance, use the following instructions:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Sn1per 进行侦察，请使用以下说明：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-232
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，启动**Kali Linux**虚拟机。
- en: 'Next, open the Terminal and use the following command to update the software
    packages repository list:'
  id: totrans-233
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令更新软件包仓库列表：
- en: '[PRE18]'
  id: totrans-234
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Next, download the Sn1per files from their official GitHub repository:'
  id: totrans-235
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，从 Sn1per 的官方 GitHub 仓库下载文件：
- en: '[PRE19]'
  id: totrans-236
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'Next, use the following command to change the present working directory to
    the **Sn1per** folder and execute the installation script:'
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，使用以下命令将当前工作目录更改为 **Sn1per** 文件夹，并执行安装脚本：
- en: '[PRE20]'
  id: totrans-238
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE20]'
- en: '[PRE21]'
  id: totrans-239
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE21]'
- en: The installation process usually takes a few minutes to complete.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程通常需要几分钟才能完成。
- en: 'To perform active reconnaissance (a normal scan) using Sn1per, use the following
    command:'
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Sn1per 执行主动侦察（正常扫描），请使用以下命令：
- en: '[PRE22]'
  id: totrans-242
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE22]'
- en: During a normal scan, Sn1per will attempt to perform DNS enumeration, carry
    out sub-domain discovery, perform multiple Nmap scans, scan HTTP/DNS scripts,
    grab HTTP banners, check for the presence of a WAF, and discover hidden files
    and directories on the target.
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: 在正常扫描过程中，Sn1per 会尝试执行 DNS 枚举，进行子域发现，执行多个 Nmap 扫描，扫描 HTTP/DNS 脚本，抓取 HTTP 横幅，检查是否存在
    WAF，并发现目标上的隐藏文件和目录。
- en: Important note
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: During active reconnaissance (normal scanning) using Sn1per, it will attempt
    to directly connect to the target to collect sensitive information. Keep in mind
    that active reconnaissance scanning can trigger security alerts and notify the
    target.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用 Sn1per 执行主动侦察（正常扫描）时，它将尝试直接连接到目标以收集敏感信息。请记住，主动侦察扫描可能会触发安全警报并通知目标。
- en: 'The following snippet shows an Nmap scan that was performed during a normal
    scan with Sn1per:'
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码段展示了在 Sn1per 正常扫描过程中执行的 Nmap 扫描：
- en: '![Figure 9.30 – Port scanning](image/Figure_9.30_B19448.jpg)'
  id: totrans-247
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.30 – 端口扫描](image/Figure_9.30_B19448.jpg)'
- en: Figure 9.30 – Port scanning
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.30 – 端口扫描
- en: 'Additionally, the following snippet shows that Sn1per was able to identify
    the hidden files and directories on a target:'
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，以下代码段显示了 Sn1per 成功识别目标上的隐藏文件和目录：
- en: '![Figure 9.31 – Discovering hidden files and directories](image/Figure_9.31_B19448.jpg)'
  id: totrans-250
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.31 – 发现隐藏的文件和目录](image/Figure_9.31_B19448.jpg)'
- en: Figure 9.31 – Discovering hidden files and directories
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.31 – 发现隐藏的文件和目录
- en: 'To perform passive reconnaissance using Sn1per, use the following commands:'
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用 Sn1per 执行被动侦察，请使用以下命令：
- en: '[PRE23]'
  id: totrans-253
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE23]'
- en: The **-o** syntax specifies to use OSINT and **-re** specifies reconnaissance.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: '**-o** 语法指定使用 OSINT，**-re** 指定为侦察。'
- en: Important note
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: Passive reconnaissance techniques and tools do not directly connect to the target
    but rather collect and analyze OSINT to create a profile about the target. Passive
    reconnaissance is recommended if you’re interested in reducing your threat level
    in triggering alerts on the target.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 被动侦察技术和工具不会直接连接到目标，而是收集和分析开放源情报（OSINT）以创建目标的档案。如果您希望减少触发目标警报的威胁，建议使用被动侦察。
- en: 'There are many types of modes and scans available in Sn1per; use the following
    command to view the entire listing:'
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Sn1per 提供了多种模式和扫描类型；使用以下命令查看完整列表：
- en: '[PRE24]'
  id: totrans-258
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE24]'
- en: Sn1per scans can take a few minutes to complete each task as it performs extensive
    information gathering on the target. Once a scan is completed, the loot (collected
    data) is stored within the **/usr/share/sn1per/loot/** directory and a summary
    report in HTML format is generated and stored in the **/****usr/share/sn1per/loot/workspace/<target-name>/reports/**
    directory.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: Sn1per 扫描可能需要几分钟时间才能完成每个任务，因为它会对目标进行广泛的信息收集。扫描完成后，收集到的数据（战利品）会存储在 **/usr/share/sn1per/loot/**
    目录中，并生成一个 HTML 格式的摘要报告，报告存储在 **/usr/share/sn1per/loot/workspace/<target-name>/reports/**
    目录中。
- en: Important note
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: 'To learn more about Sn1per, please see the following link: [https://github.com/1N3/Sn1per](https://github.com/1N3/Sn1per).'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 要了解更多关于 Sn1per 的信息，请参见以下链接：[https://github.com/1N3/Sn1per](https://github.com/1N3/Sn1per)。
- en: Next, you will learn how to perform web reconnaissance using Amass.
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，您将学习如何使用 Amass 执行网站侦察。
- en: Using Amass for web reconnaissance
  id: totrans-263
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用 Amass 进行网站侦察
- en: '**Amass** is a web reconnaissance framework developed by OWASP to perform advanced
    DNS enumeration and help cybersecurity professionals and organizations with attack
    surface mapping. Amass works by identifying the external assets of an organization
    by using both passive and active reconnaissance techniques and tools through automation.
    Hence, it helps ethical hackers to efficiently collect and analyze data from multiple
    sources to create a profile of a target.'
  id: totrans-264
  prefs: []
  type: TYPE_NORMAL
  zh: '**Amass** 是由 OWASP 开发的一个网络侦察框架，用于执行高级 DNS 枚举，帮助网络安全专业人员和组织进行攻击面映射。Amass 通过使用自动化的被动和主动侦察技术及工具，识别组织的外部资产。因此，它帮助道德黑客高效地从多个来源收集和分析数据，进而创建目标的概况。'
- en: Amass can collect information from various online databases using **Application
    Programming Interfaces** (**APIs**), digital certificates, DNS information, public
    routing databases, WHOIS records, and web-archiving databases.
  id: totrans-265
  prefs: []
  type: TYPE_NORMAL
  zh: Amass 可以通过 **应用程序编程接口** (**API**)、数字证书、DNS 信息、公共路由数据库、WHOIS 记录和网页归档数据库从多个在线数据库中收集信息。
- en: 'To get started using Amass for web reconnaissance, please use the following
    instructions:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 要开始使用 Amass 进行网络侦察，请按照以下说明操作：
- en: Firstly, power on the **Kali Linux** virtual machine.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 首先，打开 **Kali Linux** 虚拟机。
- en: 'Next, open the Terminal and use the following command to update the software
    package repository list and install Amass:'
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，打开终端并使用以下命令更新软件包仓库列表并安装 Amass：
- en: '[PRE25]'
  id: totrans-269
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '[PRE26]'
  id: totrans-270
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE26]'
- en: The installation process usually takes a few minutes to complete.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 安装过程通常需要几分钟时间完成。
- en: 'To perform sub-domain enumeration using passive reconnaissance on a target,
    use the following commands:'
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要使用被动侦察对目标进行子域枚举，请使用以下命令：
- en: '[PRE27]'
  id: totrans-273
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'The following snippet shows that Amass was able to identify the sub-domains
    of the target:'
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段显示 Amass 成功识别了目标的子域：
- en: '![Figure 9.32 – Sub-domain enumeration](image/Figure_9.32_B19448.jpg)'
  id: totrans-275
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.32 – 子域枚举](image/Figure_9.32_B19448.jpg)'
- en: Figure 9.32 – Sub-domain enumeration
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.32 – 子域枚举
- en: 'Once the task is completed, Amass provides the network block information showing
    where the sub-domains and their IP addresses are associated:'
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦任务完成，Amass 会提供网络块信息，显示子域及其 IP 地址的关联位置：
- en: '![Figure 9.33 – Network block information](image/Figure_9.33_B19448.jpg)'
  id: totrans-278
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.33 – 网络块信息](image/Figure_9.33_B19448.jpg)'
- en: Figure 9.33 – Network block information
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.33 – 网络块信息
- en: The network block data can be used to identify the geo-location, hosting provider,
    country, **Autonomous System** (**AS**), and **Internet Service Provider** (**ISP**)
    details.
  id: totrans-280
  prefs: []
  type: TYPE_NORMAL
  zh: 网络块数据可以用于识别地理位置、托管提供商、国家、**自治系统** (**AS**) 和 **互联网服务提供商** (**ISP**) 的详细信息。
- en: 'To perform an intel scan to discover targets for enumeration, use the following
    command:'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要执行情报扫描以发现用于枚举的目标，请使用以下命令：
- en: '[PRE28]'
  id: totrans-282
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'The **-dir** syntax specifies where to store the output in a local folder on
    Kali Linux. The intel scan helps ethical hackers to collect OSINT about the target
    and identify additional root domain names that are associated with the target
    as shown:'
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: '**-dir** 语法指定了在 Kali Linux 上存储输出的本地文件夹位置。情报扫描帮助道德黑客收集目标的开放源情报（OSINT），并识别与目标相关的额外根域名，如下所示：'
- en: '![Figure 9.34 – Intel scan](image/Figure_9.34_B19448.jpg)'
  id: totrans-284
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.34 – 情报扫描](image/Figure_9.34_B19448.jpg)'
- en: Figure 9.34 – Intel scan
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.34 – 情报扫描
- en: 'Next, to perform passive DNS enumeration and map the attack surface of exposed
    assets to a target, use the following command:'
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要执行被动 DNS 枚举并将暴露的资产的攻击面映射到目标，请使用以下命令：
- en: '[PRE29]'
  id: totrans-287
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'The following snippet shows Amass was able to identify the sub-domains of a
    target by collecting information from various online sources:'
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段显示 Amass 通过从各种在线来源收集信息，成功识别了目标的子域：
- en: '![Figure 9.35 – DNS and attack surface mapping](image/Figure_9.35_B19448.jpg)'
  id: totrans-289
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.35 – DNS 和攻击面映射](image/Figure_9.35_B19448.jpg)'
- en: Figure 9.35 – DNS and attack surface mapping
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.35 – DNS 和攻击面映射
- en: 'To perform active reconnaissance on a target, use the following commands:'
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要对目标进行主动侦察，请使用以下命令：
- en: '[PRE30]'
  id: totrans-292
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE30]'
- en: 'The following snippet shows Amass was able to identify the associated IP addresses
    for each sub-domain of the target:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段显示 Amass 成功识别了每个子域的关联 IP 地址：
- en: '![Figure 9.36 – Mapping IP addresses to sub-domains](image/Figure_9.36_B19448.jpg)'
  id: totrans-294
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.36 – 将 IP 地址映射到子域](image/Figure_9.36_B19448.jpg)'
- en: Figure 9.36 – Mapping IP addresses to sub-domains
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.36 – 将 IP 地址映射到子域
- en: 'Next, to list the enumeration data that was collected on a target using Amass,
    use the following commands:'
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 接下来，要列出使用 Amass 收集到的目标枚举数据，请使用以下命令：
- en: '[PRE31]'
  id: totrans-297
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE31]'
- en: 'The following snippet shows the reports that were created by Amass during the
    enumeration process:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了在枚举过程中由 Amass 创建的报告：
- en: '![Figure 9.37 – Listing reports](image/Figure_9.37_B19448.jpg)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.37 – 列表报告](image/Figure_9.37_B19448.jpg)'
- en: Figure 9.37 – Listing reports
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.37 – 列表报告
- en: 'To generate a visual graph of the collected data, please use the following
    commands:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若要生成已收集数据的可视化图表，请使用以下命令：
- en: '[PRE32]'
  id: totrans-302
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE32]'
- en: 'To open the visual graph using the web browser, use the following commands:'
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 若要在网页浏览器中打开可视化图表，请使用以下命令：
- en: '[PRE33]'
  id: totrans-304
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE33]'
- en: 'The following snippet shows the visual graph from Amass:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了来自 Amass 的可视化图表：
- en: '![Figure 9.38 – Data visualization graph](image/Figure_9.38_B19448.jpg)'
  id: totrans-306
  prefs: []
  type: TYPE_IMG
  zh: '![图 9.38 – 数据可视化图表](image/Figure_9.38_B19448.jpg)'
- en: Figure 9.38 – Data visualization graph
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 图 9.38 – 数据可视化图表
- en: The visual graph helps ethical hackers to easily map sub-domains and IP addresses
    and identify the attack surface of a target.
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化图表帮助道德黑客轻松绘制子域名和 IP 地址，并识别目标的攻击面。
- en: Important note
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 重要提示
- en: To learn more about Amass and its usage, please see [https://github.com/owasp-amass/amass/wiki/User-Guide](https://github.com/owasp-amass/amass/wiki/User-Guide).
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 若要了解更多关于 Amass 及其使用方法，请参阅 [https://github.com/owasp-amass/amass/wiki/User-Guide](https://github.com/owasp-amass/amass/wiki/User-Guide)。
- en: Having completed this section, you have learned how to automate web reconnaissance
    using both the Sn1per and Amass frameworks.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本节后，你已学会如何使用 Sn1per 和 Amass 框架自动化进行网站侦察。
- en: Summary
  id: totrans-312
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: Over the course of this chapter, you learned how to perform web and domain reconnaissance
    using both passive and active information-gathering techniques. Additionally,
    you gained the hands-on skills that are needed by ethical hackers to identify
    the attack surface of a target and its sub-domains and discover hidden files and
    directories. Lastly, you explored how web reconnaissance frameworks can be used
    by ethical hackers to automate the discovery of an attack surface for a target.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何使用被动和主动的信息收集技术进行网站和域名侦察。此外，你还掌握了道德黑客所需的实践技能，能够识别目标的攻击面及其子域名，并发现隐藏的文件和目录。最后，你探讨了如何使用网站侦察框架，帮助道德黑客自动化发现目标的攻击面。
- en: I hope this chapter has been informative for you and helpful in your journey
    in the cybersecurity industry. In the next chapter, *Implementing Reconnaissance
    Monitoring and Detection Systems*, you will learn how to implement various open
    source threat monitoring tools to identify network intrusions and determine whether
    reconnaissance-based attacks are happening within your organization.
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 我希望本章对你有所帮助，并能为你在网络安全行业的旅程提供有价值的信息。在下一章，*实施侦察监控和检测系统*中，你将学习如何实现各种开源威胁监控工具，以识别网络入侵，并确定是否在你的组织内发生了基于侦察的攻击。
- en: Further reading
  id: totrans-315
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 进一步阅读
- en: OWASP Top 10 – [https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/)
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP 前十名 – [https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/)
- en: OWASP web reconnaissance – [https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/](https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/)
  id: totrans-317
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: OWASP Web 侦察 – [https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/](https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/)
