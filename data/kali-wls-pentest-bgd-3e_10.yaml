- en: Chapter 10. WLAN Penetration Testing Methodology
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第10章 无线局域网渗透测试方法论
- en: '|   | *"The proof is in the pudding."* |   |'
  id: totrans-1
  prefs: []
  type: TYPE_TB
  zh: '|   | *“实践出真知。”* |   |'
- en: '|   | --*Popular saying* |'
  id: totrans-2
  prefs: []
  type: TYPE_TB
  zh: '|   | --*流行说法* |'
- en: '*This chapter will lay out the steps that go in to taking the techniques taught
    in the previous chapters and turning them into a full wireless penetration test.*'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '*本章将概述将前几章中教授的技巧转化为完整无线渗透测试的步骤。*'
- en: Wireless penetration testing
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 无线渗透测试
- en: To perform a wireless penetration test, it is important to follow a defined
    methodology. Simply firing up the `airbase` or `airodump` command and hoping for
    the best will not satisfy the goals of a test. When working as a penetration tester,
    you must ensure that you adhere to the standards of the organization you're working
    for, and if they don't have any, then you should hold yourself to the highest
    standards.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 为了执行无线渗透测试，重要的是要遵循定义好的方法论。简单地启动`airbase`或`airodump`命令并希望得到最好的结果，是无法满足测试目标的。作为渗透测试者，你必须确保遵循你所服务组织的标准，如果他们没有相关标准，那么你应该遵循最高标准。
- en: 'Broadly, we can break up a wireless penetration testing exercise into the following
    phases:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 广义上，我们可以将无线渗透测试活动分为以下几个阶段：
- en: Planning phase
  id: totrans-7
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 规划阶段
- en: Discovery phase
  id: totrans-8
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发现阶段
- en: Attack phase
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 攻击阶段
- en: Reporting phase
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 报告阶段
- en: We will now look at each of these phases separately.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们将单独查看这些阶段。
- en: Planning
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 规划
- en: 'In this phase, we must understand the following:'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 在此阶段，我们必须理解以下内容：
- en: '**Scope of the assessment**: The penetration tester should work with the client
    to define a scope that is achievable and will also provide the greatest amount
    of insight into the security of a network. Typically, the following information
    is gathered:'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**评估范围**：渗透测试者应与客户合作，定义一个可实现的范围，并且能够提供最大程度的网络安全洞察。通常，收集以下信息：'
- en: Location of the penetration test.
  id: totrans-15
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 渗透测试的位置。
- en: Total coverage area of the premises.
  id: totrans-16
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 场地的总覆盖范围。
- en: Approximate number of access points and wireless clients deployed.
  id: totrans-17
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 估算部署的接入点和无线客户端的数量。
- en: Which wireless networks are included in the assessment?
  id: totrans-18
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估中包括哪些无线网络？
- en: Is exploitation in scope?
  id: totrans-19
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 是否在范围内进行利用？
- en: Are attacks against users in scope?
  id: totrans-20
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击用户是否在范围内？
- en: Is denial of service in scope?
  id: totrans-21
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拒绝服务攻击是否在范围内？
- en: '**Effort estimation**: Based on the scope defined, the tester will then have
    to estimate how much time is required. Bear in mind that rescoping may occur following
    this estimate, as organizations may have limited resources available in terms
    of both time and money.'
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**工作量估算**：根据已定义的范围，测试者需要估算所需时间。请记住，在此估算之后可能会重新定义范围，因为组织可能在时间和资金上都有限制。'
- en: '**Legality**: Prior to performing a test, the client must give consent. This
    should explain the testing to be covered and clearly define the level of indemnity,
    insurance, and the limitations of the scope. If you are unsure, you will need
    to speak to a professional in these areas. Most organizations will have their
    own versions that will likely also incorporate a **Non-Disclosure Agreement**
    (**NDA**).'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合法性**：在进行测试之前，客户必须给予同意。这应该说明所涵盖的测试内容，并明确界定赔偿、保险和范围的限制。如果你不确定，需与相关领域的专业人士沟通。大多数组织会有自己的版本，可能还会包含**保密协议**（**NDA**）。'
- en: Once all of the preceding requirements are in place, we are ready to go!
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦所有前置要求到位，我们就准备好了！
- en: Discovery
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 发现
- en: In this phase, the aim is to identify and apply characteristics to the wireless
    devices and wireless networks within the scope.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 在此阶段，目标是识别并应用无线设备和无线网络的特征。
- en: 'All the techniques to perform these have been laid out in the previous chapters
    but, in brief, the aim is to:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 所有执行这些操作的技巧已经在前几章中阐述，但简而言之，目标是：
- en: Enumerate visible and hidden wireless networks in the area
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列举区域内可见和隐藏的无线网络
- en: Enumerate devices in the area, along with those connected to the targeted networks
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 列举区域内的设备，以及连接到目标网络的设备
- en: Map the range of the networks, where they are reachable from and whether there
    are places a malicious individual could operate from to perform an attack, for
    example, a cafe
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 映射网络的范围，了解它们的可达性以及是否存在恶意个人可以利用的地方来发起攻击，例如，一家咖啡馆。
- en: 'All of this information should be recorded. If the test is limited to the performance
    of reconnaissance only, the test will end here, and the tester will attempt to
    draw conclusions based on this information. Some statements that would be useful
    to a client are as follows:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 所有这些信息都应被记录。如果测试仅限于侦查阶段，那么测试将到此为止，测试者将尝试根据这些信息得出结论。以下是一些对客户有用的陈述：
- en: The number of devices that have associations with open networks and the corporate
    network
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 拥有与开放网络及公司网络相关联的设备数量
- en: The number of devices that have networks that can be linked to locations through
    solutions such as WiGLE
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以通过WiGLE等解决方案将设备与位置链接的网络数量
- en: The existence of weak encryption
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 存在弱加密
- en: The networks are too restrictive and block standard users
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 网络限制过于严格，阻止了标准用户
- en: Attack
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 攻击
- en: Once reconnaissance has been performed, exploitation must be performed for proof
    of concept. If the attack is being performed as part of a red team or wider assessment,
    then exploitation should be performed to gain access to the network as surreptitiously
    as possible.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦完成侦查，必须进行利用，以证明概念是否有效。如果该攻击是作为红队或更大范围评估的一部分进行的，那么利用应该尽可能悄悄地获得对网络的访问权限。
- en: 'In our attacking phase, we will explore the following:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的攻击阶段，我们将探索以下内容：
- en: Cracking the encryption
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 破解加密
- en: Attacking the infrastructure
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 攻击基础设施
- en: Compromising clients
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 妥协客户端
- en: Finding vulnerable clients
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找脆弱的客户端
- en: Finding unauthorized clients
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 查找未经授权的客户端
- en: Cracking the encryption
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 破解加密
- en: 'The first step is to retrieve the keys for any vulnerable networks identified.
    If networks with WEP exist, perform the WEP-cracking methods explained in [Chapter
    4](ch04.html "Chapter 4. WLAN Encryption Flaws"), *WLAN Encryption Flaws*. Regardless
    of whether you can crack it or not though, the presence of WEP is still considered
    a vulnerability. If WPA2-secured systems are present, you have two choices. If
    aiming to be stealthy, arrive on-site at times when individuals are likely to
    be authenticating or re-authenticating. These times are likely to be:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是获取任何已识别的脆弱网络的密钥。如果存在WEP网络，请执行[第4章](ch04.html "第4章. WLAN加密漏洞")中解释的WEP破解方法，*WLAN加密漏洞*。无论你是否能够破解它，WEP的存在仍然被视为一种漏洞。如果存在WPA2保护的系统，你有两种选择。如果希望保持隐秘，可以选择在人员可能进行身份验证或重新验证的时间到达现场。此类时间通常为：
- en: Start of the day
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一天开始时
- en: Lunch time
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 午餐时间
- en: End of the day
  id: totrans-48
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一天结束时
- en: At this time, set up your WPA key retrieval setup as shown in [Chapter 4](ch04.html
    "Chapter 4. WLAN Encryption Flaws"), *WLAN Encryption Flaws*. Alternatively, perform
    the deauthentication attack, as shown in [Chapter 6](ch06.html "Chapter 6. Attacking
    the Client"), *Attacking the Client*.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，设置你的WPA密钥获取配置，如[第4章](ch04.html "第4章. WLAN加密漏洞")中所示，*WLAN加密漏洞*。或者，执行去认证攻击，如[第6章](ch06.html
    "第6章. 攻击客户端")中所示，*攻击客户端*。
- en: This is noisier and more likely to be detected in a mature organization.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 这在成熟的组织中更加嘈杂，更容易被发现。
- en: If WPA-Enterprise is in place, bear in mind you will have to use the information
    gathered from the reconnaissance to target the correct network and set up your
    dummy Enterprise setup as shown in the *Attacking PEAP* section in [Chapter 9](ch09.html
    "Chapter 9. Attacking WPA-Enterprise and RADIUS"), *Attacking WPA-Enterprise and
    RADIUS*.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果已经部署了WPA-Enterprise，请记住你需要利用侦查中收集的信息来瞄准正确的网络，并设置你的虚拟企业配置，如[第9章](ch09.html
    "第9章. 攻击WPA-Enterprise和RADIUS")中的*攻击PEAP*部分所示，*攻击WPA-Enterprise和RADIUS*。
- en: You can attempt to break all passphrases but bear in mind that some will be
    unbreakable. Following the performance of the test, check with the wireless administrator
    for the passphrase in use. Check to see whether it is a secure passphrase and
    that you, as a tester, did not experience a tool failure or were merely unlucky.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以尝试破解所有密码短语，但请记住，某些密码是无法破解的。测试完成后，向无线管理员确认正在使用的密码短语。检查它是否为安全密码短语，确保你作为测试者没有遇到工具故障，或者仅仅是运气不好。
- en: Attacking infrastructure
  id: totrans-53
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 攻击基础设施
- en: 'If network access is gained through cracking the encryption, perform a standard
    network penetration test if allowed in scope. The following should be performed
    as a minimum:'
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 如果通过破解加密获得了网络访问权限，并且该测试被允许在范围内进行渗透测试，则应至少执行以下操作：
- en: A port scan
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 端口扫描
- en: Identifying which services are running
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确定哪些服务正在运行
- en: Enumerating any open services, such as unauthenticated FTP, SMB, or HTTP
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 枚举任何开放的服务，如未认证的FTP、SMB或HTTP
- en: Exploiting any vulnerable services identified
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用任何已识别的漏洞服务
- en: Compromising clients
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 攻击客户端
- en: After enumerating and testing all wireless systems, there are various types
    of engagements that would suit performing attacks against clients.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 在枚举和测试所有无线系统后，有多种参与方式适合对客户端进行攻击。
- en: If necessary, after establishing which clients are vulnerable to KARMA attacks,
    create a Honeypot to force them to connect with the methods laid out in the *Attacking
    PEAP* section in [Chapter 9](ch09.html "Chapter 9. Attacking WPA-Enterprise and
    RADIUS"), *Attacking WPA-Enterprise and RADIUS*. There are various useful pieces
    of information that can be gathered through this method, but ensure that the collected
    data serves a purpose and is stored, transmitted, and used in an ethical and safe
    manner.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 如果需要，在确定哪些客户端容易受到KARMA攻击之后，创建一个蜜罐，迫使它们按照*攻击PEAP*章节中[第9章](ch09.html "第9章. 攻击WPA-Enterprise和RADIUS")的内容进行连接，*攻击WPA-Enterprise和RADIUS*。通过此方法可以收集到许多有用的信息，但请确保收集到的数据是有意义的，并以伦理和安全的方式进行存储、传输和使用。
- en: Reporting
  id: totrans-62
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 报告
- en: 'Finally, at the end of testing, it is necessary to report your findings to
    the client. It''s important to ensure that the report matches the quality of your
    testing. As the client will only see the report, you have to give it as much love
    and attention as you do to your testing. The following is a guideline to the layout
    of the report:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在测试结束时，必须将你的发现报告给客户。确保报告的质量与测试的质量相匹配非常重要。因为客户只会看到报告，你必须像对待测试一样给予它足够的关注和用心。以下是报告布局的指南：
- en: Management summary
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 管理总结
- en: Technical summary
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 技术总结
- en: 'Findings:'
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发现：
- en: Vulnerability description
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞描述
- en: Severity
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 严重性
- en: Affected devices
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 受影响的设备
- en: Vulnerability type—software/hardware/configuration
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 漏洞类型—软件/硬件/配置
- en: Remediation
  id: totrans-71
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 修复
- en: Appendices
  id: totrans-72
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 附录
- en: The **management summar**y should be aimed at talking to a senior nontechnical
    audience with a focus on the effects and mitigations required at a high level.
    Avoid language that is too technical and ensure that the root causes are covered.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: '**管理总结**应面向高级非技术观众，重点讨论高层次的影响和所需的缓解措施。避免过于技术化的语言，确保涵盖根本原因。'
- en: The **technical summary** should be a midpoint between the management summary
    and findings list. It should be aimed at a developer or a technical lead with
    a focus on how to fix the issues and broad solutions that could be implemented.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '**技术总结**应在管理总结和发现列表之间找到平衡。它应面向开发者或技术负责人，重点讨论如何修复问题和可以实施的广泛解决方案。'
- en: The findings list should describe each vulnerability at a low level, explaining
    the methods to identify, and replicate, and vulnerabilities.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 发现列表应以低层次描述每个漏洞，解释识别、复制漏洞的方法。
- en: Appendices should contain any extra information that would be too long to describe
    in a short description. This is where any screenshots, proof-of-concept code,
    or stolen data should be presented.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 附录应包含任何在简短描述中无法涵盖的额外信息。在这里，任何屏幕截图、概念验证代码或被盗数据应予以展示。
- en: Summary
  id: totrans-77
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we discussed a methodology for performing a range of wireless
    tests and referred to the relevant chapters for each step. We also listed methods
    for reporting vulnerabilities and techniques for making technical data presentable.
    In the next and final chapter, we will cover new techniques developed since the
    initial publication of this book, WPS, and probe monitoring for surveillance.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们讨论了一种执行各种无线测试的方法，并参考了每个步骤的相关章节。我们还列出了报告漏洞的方法和使技术数据易于展示的技巧。在下一章也是最后一章中，我们将介绍自本书首次出版以来开发的新技术，包括WPS和用于监控监视的探针。
