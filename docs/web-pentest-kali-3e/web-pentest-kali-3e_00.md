# 前言

Web 应用程序，最近还有 Web 服务，现在已经成为我们日常生活的一部分——从政府程序到社交媒体再到银行应用程序；甚至在通过 Web 服务发送和接收信息的移动应用程序中也有它们的身影。公司和人们普遍大量使用 Web 应用程序。仅仅这个事实就使得 Web 应用程序成为信息窃贼和其他犯罪分子的有吸引力的目标。因此，保护这些应用程序及其基础设施免受攻击对于开发人员和所有者来说至关重要。

最近几个月，全球范围内都有关于大规模数据泄露、滥用应用功能生成虚假信息或收集用户信息并出售给广告公司的新闻。人们开始更关注他们的信息如何被信任的公司使用和保护。因此，公司需要采取积极的措施来防止此类泄漏或攻击的发生。这可以从开发过程中更严格的质量控制到公关和管理媒体存在感等多个方面来实现。

由于当前的方法论使得开发周期更短且更加动态，因此需要在众多技术中增加复杂性以创建现代 Web 应用程序。此外，一些继承的不良实践使得开发人员无法从安全角度全面测试他们的 Web 应用程序，因为他们的优先任务是按时交付一个可工作的产品。Web 应用程序的复杂性以及开发过程本身的复杂性导致了对安全测试专业人员的需求，他们参与到过程中，并负责从安全角度测试应用程序，更具体地说，从攻击者的角度。这个专业人员就是渗透测试人员。

在这本书中，我们从 Web 应用程序和渗透测试的基本概念开始，涵盖了方法论中的每个阶段；从获取信息到识别可能的弱点再到利用漏洞。渗透测试人员的一个关键任务是：一旦他们发现并验证了一个漏洞，他们需要向开发人员提供建议，告诉他们如何修复这些缺陷并防止它们再次发生。因此，本书中所有专门用于识别和利用漏洞的章节还包括一个简要介绍如何预防和减轻每种攻击的部分。

# 本书适合对象

我们在编写本书时考虑了多种读者。首先是计算机科学学生、开发人员和系统管理员，他们希望在信息安全方面的知识上更进一步，或者希望在这个领域追求职业生涯的人；他们将找到一些基本概念和易于理解的指导，这将使他们能够在自己的测试实验室中进行第一次渗透测试，并获得继续实践和学习的基础和工具。

应用程序开发人员和系统管理员也将了解攻击者在现实世界中的行为，应该考虑哪些方面来构建更安全的应用程序和系统，以及如何检测恶意行为。

最后，经验丰富的安全专业人员将找到一些中级和高级的利用技术和思路，以及如何结合两个或多个漏洞来执行更复杂的攻击的想法。

# 本书内容

第一章，*渗透测试和 Web 应用程序简介*，涵盖了渗透测试、Kali Linux 和 Web 应用程序的基本概念。首先定义了渗透测试本身和其他关键概念，然后介绍了在进行专业渗透测试之前需要考虑的事项，如定义范围和规则。然后我们深入了解 Kali Linux，并了解 Web 应用程序的工作原理，重点关注对渗透测试人员更为重要的方面。

第二章，*使用 Kali Linux 设置实验室*，是对将在后续章节中使用的测试环境的技术回顾。我们首先解释了 Kali Linux 是什么以及它包含的用于测试 Web 应用程序安全性的工具；接下来，我们看一下将在未来章节中使用的易受攻击的 Web 应用程序，以演示漏洞和攻击。

第三章，*侦察和分析 Web 服务器*，展示了渗透测试人员和攻击者用于获取有关开发、托管和支持目标应用程序所使用的技术的信息，并识别可能进一步利用的第一个弱点的技术和工具，因为按照渗透测试的标准方法，第一步是尽可能收集有关目标的信息。

第四章，*认证和会话管理漏洞*，顾名思义，专门讲解与用户身份识别和应用程序内职责分离相关的漏洞的检测、利用和缓解方法，从不同的认证和会话管理机制的解释开始，接着介绍这些机制可能存在的设计或实现缺陷以及这些缺陷如何被恶意行为者或渗透测试人员利用。

第五章，*检测和利用注入漏洞*，解释了最常见的注入漏洞的检测、利用和缓解方法，因为在安全方面，开发人员最关注的问题之一就是应用程序容易受到各种注入攻击的威胁，无论是 SQL 注入、命令注入还是其他任何攻击方式，这些都可能对 Web 应用程序构成重大风险。

第六章，*发现和利用跨站脚本（XSS）漏洞*，从解释什么是跨站脚本漏洞开始，到它为什么以及如何构成安全风险，再到如何识别 Web 应用程序的漏洞，以及攻击者如何利用它来获取用户的敏感信息或让他们无意中执行操作。

第七章，*跨站请求伪造、识别和利用*，解释了什么是跨站请求伪造攻击以及它是如何工作的。然后我们讨论了检测使其成为可能的缺陷的关键因素，接着介绍了利用技术，并最后给出了预防和缓解建议。

第八章，*攻击密码实现中的缺陷*，首先介绍了密码学概念，这些概念对于渗透测试人员来说非常有用，例如 SSL/TLS 的一般工作原理，加密、编码和哈希的概念和算法的回顾；然后我们描述了用于识别弱 SSL/TLS 实现的工具，以及对已知漏洞的利用。接下来，我们介绍了检测和利用自定义密码算法和实现中的缺陷。本章最后给出了在使用加密通信或存储敏感信息时如何预防漏洞的建议。

第九章，*AJAX、HTML5 和客户端攻击*，介绍了渗透测试 Web 应用程序的客户端部分，从 AJAX 应用程序的爬行过程开始，解释了现代 Web 浏览器中包含的开发者工具。我们还将介绍 HTML5 带来的创新以及它对攻击者和渗透测试人员带来的新挑战和机会。接下来，本章将描述使用开发者工具绕过客户端实施的安全控制的方法，并以预防和缓解 AJAX、HTML5 和客户端漏洞的建议结束。

第十章，*Web 应用程序中的其他常见安全缺陷*，讨论了不安全的直接对象引用、文件包含、HTTP 参数污染和信息泄露漏洞及其利用。最后，我们提供了如何预防和修复这些缺陷的建议。

第十一章，*在 Web 应用程序上使用自动化扫描工具*，解释了在使用自动化扫描工具和模糊测试工具时需要考虑的因素。我们还解释了这些扫描工具的工作原理以及模糊测试是什么，然后介绍了 Kali Linux 中包含的扫描和模糊测试工具的使用示例。最后，我们介绍了渗透测试人员在对 Web 应用程序进行自动化扫描后应采取的措施，以向应用程序开发人员提供有价值的结果。

# 为了充分利用本书

为了成功利用本书，读者建议具备以下基本知识：

+   Linux 操作系统安装

+   Unix/Linux 命令行使用

+   HTML 语言

+   PHP Web 应用程序编程

+   Python 编程

唯一必需的硬件是一台个人电脑，具备运行 VirtualBox 或其他虚拟化软件的操作系统。至于规格，推荐的设置如下：

+   Intel i5、i7 或类似的 CPU

+   500GB 的硬盘

+   8GB 的 RAM

+   互联网连接

# 下载示例代码文件

您可以从您在[www.packtpub.com](http://www.packtpub.com)的账户中下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册以直接通过电子邮件接收文件。

您可以按照以下步骤下载代码文件：

1.  登录或注册[www.packtpub.com](http://www.packtpub.com/support)。

1.  选择“支持”选项卡。

1.  点击“代码下载和勘误”。

1.  在搜索框中输入书名，然后按照屏幕上的说明进行操作。

下载文件后，请确保使用以下最新版本的软件解压或提取文件夹：

+   Windows 的 WinRAR/7-Zip

+   Mac 的 Zipeg/iZip/UnRarX

+   Linux 的 7-Zip/PeaZip

本书的代码包也托管在 GitHub 上，网址为[`github.com/PacktPublishing/Web-Penetration-Testing-with-Kali-Linux-Third-Edition`](https://github.com/PacktPublishing/Web-Penetration-Testing-with-Kali-Linux-Third-Edition)。如果代码有更新，将在现有的 GitHub 存储库上进行更新。

我们还有其他代码包，来自我们丰富的图书和视频目录，可在**[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)**上找到。请查看！

# 下载彩色图像

我们还提供了一个包含本书中使用的屏幕截图/图表的彩色图像的 PDF 文件。您可以在这里下载：[`www.packtpub.com/sites/default/files/downloads/WebPenetrationTestingwithKaliLinuxThirdEdition_ColorImages.pdf`](http://www.packtpub.com/sites/default/files/downloads/WebPenetrationTestingwithKaliLinuxThirdEdition_ColorImages.pdf)。

# 使用的约定

本书中使用了许多文本约定。

`CodeInText`：表示文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名。以下是一个例子：“许多组织可能有应用程序会监听一个不在`nmap-services`文件中的端口。”

代码块设置如下：

```
<?php 
  if(!empty($_GET['k'])) { 
    $file = fopen('keys.txt', 'a'); 
    fwrite($file, $_GET['k']); 
    fclose($file); 
  } 
?> 
```

当我们希望引起您对代码块的特定部分的注意时，相关的行或项目会以粗体显示：

```
<?php 
  if(!empty($_GET['k'])) { 
    $file = fopen('keys.txt', 'a'); 
    fwrite($file, $_GET['k']); 
    fclose($file); 
  } 
?> 
```

任何命令行输入或输出都以以下方式编写：

```
python -m SimpleHttpServer 8000  
```

**粗体**：表示一个新术语、一个重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词会以这种方式显示在文本中。以下是一个例子：“如果您进入当前浏览器的日志选项卡，您将看到钩子会记录用户在浏览器中的所有操作，从点击和按键到窗口或标签的更改。”

警告或重要提示会以这种方式显示。

提示和技巧会以这种方式显示。
