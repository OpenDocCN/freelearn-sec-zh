# 前言

网络安全是世界上最有趣且要求最高的领域之一。随着世界的不断发展，我们的技术进步同样在帮助人类改善任务执行的方式。然而，周围有许多系统和网络包含隐藏的安全漏洞，黑客等对手利用这些漏洞进行攻击。作为一名网络安全作者和讲师，我听到许多专业人士、爱好者和学生提到，找到一本能够引导读者深入了解如何高效执行侦察技术和程序、识别并减少组织攻击面的书籍是非常重要的。

侦察是对手进行任何网络攻击的第一阶段。攻击者需要了解目标的基础设施，识别是否存在安全漏洞以及如何利用这些漏洞，了解可以用来实施攻击的攻击向量。如果没有关于目标的情报，黑客在攻破潜在受害者时将会遇到困难。作为一个有志成为道德黑客的人，理解**战术、技术和程序**（**TTPs**）是至关重要的，因为这些是实际黑客常用的手段，用来发现隐藏的安全漏洞，并运用这些 TTPs 帮助提升你所在组织的网络防御。

组织通常会在互联网上泄露过多的敏感数据，却没有意识到这些数据可能被威胁者用来规划未来的攻击。学习基于侦察的技术和程序可以帮助道德黑客识别组织是如何泄露数据的，评估如果攻击者利用这些泄露的数据发起网络攻击时可能对组织造成的影响和网络风险，并提出应对措施，改进公司网络防御。

多年来，我研究并开发了大量与网络安全相关的内容，作为一个道德黑客和渗透测试员，最重要的因素之一就是保持与不断变化的网络安全环境同步。行业中正在开发和使用新的工具、技术和程序，以确保他们至少比网络犯罪分子领先一步，并帮助保护其组织的资产。因此，道德黑客和渗透测试员需要具备最新的知识、技术、技能和工具，以便高效地执行基于侦察的攻击和**开源情报**（**OSINT**）渗透测试，从而确定组织的攻击面。

在本书的写作过程中，我采用了以学生为中心且易于学习的方法，确保所有读者都能轻松理解最复杂的主题、术语，以及为什么需要识别组织、系统和网络中的安全漏洞。

本书首先介绍了侦察的重要性，以及网络安全专业人员和对手如何利用侦察来识别公司中的易受攻击的入口点。接下来，你将进入一个激动人心的旅程，学习如何应用对手常用的基于侦察的 TTP（战术、技术、程序），高效地收集和分析公开的数据，以构建目标系统和网络基础设施的档案。你将学习如何设置傀儡账户并匿名化你的网络流量，作为道德黑客在侦察评估期间隐藏身份，从而降低威胁水平。

此外，你将发现人们和组织如何泄露关于他们自己的数据，以及对手如何利用这些信息来提高他们的网络攻击和威胁。你还将学习如何利用 OSINT（开放源代码情报）和常见工具，识别组织内暴露的系统和网络，收集泄露的员工凭证，并进行无线信号情报分析，更好地了解潜在黑客如何破坏其目标。

此外，你将获得执行主动侦察的实践技能，以识别活动系统、开放端口、运行服务和操作系统，并进行漏洞评估，了解攻击者如何识别系统上的安全漏洞，以及组织可以采取什么措施来减轻这一威胁。你还将学习如何识别目标网站和基础设施的攻击面，并发现该目标拥有的其他资产。最后，你将学习如何利用 Wireshark 和流行的开源工具，作为网络安全专业人员，识别网络中的基于侦察的攻击和威胁。

完成本书后，你将从初学者成长为专家，学习、理解并发展基于侦察的道德黑客和渗透测试技能，成为行业中一名有抱负的网络安全专业人士。

# 本书适合的人群

本书面向道德黑客、渗透测试人员、执法人员以及网络安全专业人士，特别是那些希望建立坚实基础并更好理解基于侦察的攻击如何威胁组织及其资产的人。道德黑客和渗透测试人员在收集和分析情报时会发现本书非常有用，帮助他们深入了解真实威胁行为者如何破坏其目标。

此外，执法人员和道德黑客可以利用本书中的知识，找到感兴趣的人物，并理解组织如何泄露导致网络攻击的数据。此外，网络安全专业人员将发现本书在识别其组织的攻击面以及发现网络中暴露和易受攻击的资产方面非常有用，同时理解对手的行为。

# 本书内容概览

*第一章*，*侦察基础*，介绍了进攻性安全中的侦察阶段，以及它如何帮助组织提高网络防御能力。

*第二章*，*搭建侦察实验室*，重点介绍如何在虚拟化环境中搭建系统，以便实践主动侦察技术。

*第三章*，*理解被动侦察*，帮助你理解对手如何利用开源情报（OSINT）提高攻击效果，同时在互联网上匿名化自己的身份。

*第四章*，*域名和 DNS 情报*，教你如何高效地收集和分析目标组织的域名相关信息，以识别安全漏洞。

*第五章*，*组织基础设施情报*，重点介绍如何收集和分析公开的可用数据，以描述组织的网络基础设施及其员工。

*第六章*，*图像、人员和信号情报*，教你如何使用侦察技术寻找和定位人员、组织和无线网络基础设施。

*第七章*，*进行主动侦察*，重点介绍如何发现网络上的主机、枚举易受攻击的系统以及对目标网络进行无线侦察。

*第八章*，*进行漏洞评估*，教你如何使用行业常见工具来设置并执行漏洞评估。

*第九章*，*深入网站侦察*，探讨了对手用于识别网站和域名攻击面的一些工具和技术。

*第十章*，*实施侦察监控和检测系统*，重点介绍如何使用 Wireshark 和 Security Onion 识别可疑的网络流量。

# 为了最大程度地从本书中受益

为了从本书中获得最大收益，建议你具备扎实的网络基础，例如了解常见的 TCP/IP 网络和应用协议、IP 地址、路由和交换概念，以及网络设备和安全设备的角色和功能。了解虚拟化技术，如虚拟机监控程序及其组件，将是有益的，因为大多数实验都在虚拟化环境中进行，以减少购买额外系统的需求。

| **本书中涉及的软件/硬件** |  |
| --- | --- |
| Kali Linux 2022.4 | Oracle VM VirtualBox |
| Kali Linux ARM 2023.1 | Oracle VirtualBox 扩展包 |
| Trace Labs OSINT VM 2022.1 | Vagrant 2.3.3 |
| OWASP JuiceShop | 7-Zip |
| Metasploitable 3 v0.1.0 | VMware Workstation 17 Pro |
| Security Onion 2.3 |  |
| TOR 和 TOR 浏览器 |  |
| Recon-ng |  |
| Nessus Essentials |  |
| SpiderFoot |  |
| Sherlock |  |
| Sn1per |  |
| Amass |  |
| Raspberry Pi 3 B+ |  |
| Alfa AWUS036NHA - 无线 B/G/N USB 适配器 |  |
| VK-162 G-Mouse USB GPS 导航模块 |  |

所有实验和练习均在一台运行 Windows 11 Home 操作系统的计算机上构建，该计算机配备了启用虚拟化的多核处理器、16 GB 的内存和 400 GB 的虚拟机可用存储空间。选择 Oracle VM VirtualBox 作为虚拟化平台，因为它提供出色的虚拟网络功能并且是免费的，但 VMware Workstation Pro 也用于在书本末尾设置威胁检测系统。

**如果你正在使用本书的数字版本，我们建议你亲自输入代码或通过本书的 GitHub 仓库访问代码（下一节中会提供链接）。这样做有助于避免与复制和粘贴代码相关的潜在错误` `。**

完成本书后，利用你的想象力和新学到的技能，尝试创建额外的实验场景，甚至通过增加虚拟机来扩展你的实验环境，从而进一步提高你的技能。这将帮助你在持续学习的同时，作为一个有抱负的道德黑客发展技能。

# 下载彩色图像

我们还提供了一份包含本书截图和图表的彩色图像 PDF 文件，你可以在这里下载：[`packt.link/E4kdf`](https://packt.link/E4kdf)。

# 使用的约定

本书中使用了若干文本约定。

**文本中的代码**：表示文本中的代码词汇、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账户名。举个例子：“例如，`cybersecurity** **filetype:pdf` 将提供包含词汇 *cybersecurity* 和 PDF 文件的结果。”

代码块如下所示：

```
interface wlan0
    static ip_address=192.168.4.1/24
    nohook wpa_supplicant
```

当我们希望引起你对某段代码块的注意时，相关行或项目会以粗体显示：

```
kali@kali:~$ sudo apt update
kali@kali:~$ git clone https://github.com/sherlock-project/sherlock
```

所有命令行输入或输出都如下所示：

```
kali@kali:~$ sudo apt update
```

**粗体**：表示新术语、重要词汇或您在屏幕上看到的词语。例如，菜单或对话框中的词汇会以**粗体**显示。以下是一个示例：“接下来，**编辑有线连接 1**窗口将出现；选择**IPv6 设置**选项卡，将**方法**更改为**禁用**，然后点击**确定**。”

提示或重要说明

将显示为这样。

# 免责声明

本书中的信息仅应以伦理的方式使用。如果您没有设备所有者的书面许可，请勿使用书中的任何信息。如果您进行非法行为，您可能会被逮捕并依法起诉。无论是 Packt 出版公司还是本书的作者都不对您滥用书中任何信息承担任何责任。书中的信息仅在经过适当负责人书面授权的测试环境中使用。

# 与我们联系

我们始终欢迎读者的反馈。

**一般反馈**：如果您对本书的任何部分有疑问，请通过电子邮件联系 customercare@packtpub.com，并在邮件主题中注明书名。

**勘误**：虽然我们已尽一切努力确保内容的准确性，但错误仍然会发生。如果您在本书中发现错误，我们将非常感激您能报告给我们。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

**盗版**：如果您在互联网上遇到我们作品的任何非法复制品，我们将非常感激您能提供该位置地址或网站名称。请通过电子邮件联系版权@packt.com，并提供链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识并且有意写书或为书籍做贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享您的想法

一旦您阅读了*《道德黑客侦察》*，我们很想听听您的想法！请[点击这里直接进入亚马逊评论页面](https://packt.link/r/1837630631)并分享您的反馈。

您的评论对我们和技术社区非常重要，能帮助我们确保提供优质的内容。

# 下载本书的免费 PDF 副本

感谢您购买本书！

您喜欢在外出时阅读，但又无法随身携带纸质书籍吗？

您的电子书购买无法在您选择的设备上使用吗？

不用担心，现在每本 Packt 书籍都可以免费获得该书的无 DRM PDF 版本。

随时随地，在任何设备上阅读。从您最喜欢的技术书籍中直接搜索、复制并粘贴代码到您的应用程序中。

福利不仅仅如此，您还可以独享折扣、新闻通讯及每天直接送达您的邮箱的精彩免费内容。

按照这些简单的步骤获取相关福利：

1.  扫描二维码或访问以下链接

![](img/B19448_QR_Free_PDF.jpg)

https://packt.link/free-ebook/9781837630639

1.  提交您的购买凭证

1.  就这样！我们将直接通过电子邮件发送您的免费 PDF 和其他福利

# 第一部分：侦察与足迹绘制

在本节中，您将学习侦察的重要性，以及道德黑客如何利用它来识别组织的攻击面、定位感兴趣的人员并执行无线信号情报。

本部分包含以下章节：

+   *第一章*，*侦察基础*

+   *第二章*，*建立侦察实验室*

+   *第三章*，*理解被动侦察*

+   *第四章*，*域名和 DNS 情报*

+   *第五章*，*组织基础设施情报*

+   *第六章*，*图像学、人员和信号情报*
