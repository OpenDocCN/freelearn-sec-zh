# 第二十一章：评估

# 第一章

1.  是的，有。MITRE 维护的 CWE 列表可以在[`cwe.mitre.org/`](https://cwe.mitre.org/)找到。

1.  OWASP 十大漏洞可以在[`owasp.org/www-project-top-ten/`](https://owasp.org/www-project-top-ten/)找到，而 SANS 25 大软件错误可以在[`www.sans.org/top25-software-errors/`](https://www.sans.org/top25-software-errors/)找到。

1.  在典型的渗透测试中使用的许多工具都是开源的，例如 Nmap 和 Metasploit 框架。但是，市场上还有一些非常高效的工具，例如 BurpSuite 专业版和 Nessus 专业版。

1.  基于 OSSTMM 的渗透测试可以是六种不同类型之一，具体取决于参与的性质和范围。基于 PTES 的渗透测试被归类为非常通用的测试类型，例如白盒测试、灰盒测试和黑盒测试。由于 PTES 是*行业标准*，大多数渗透测试都使用 PTES 方法论。

# 第二章

1.  Metasploit 社区版和 Metasploit Framework 是开源的。Metasploit Pro 是商业版，附带许多额外功能。请查看以下链接获取更多信息：[`www.rapid7.com/products/metasploit/download/editions/`](https://www.rapid7.com/products/metasploit/download/editions/)

1.  Metasploit Framework 版本 5 允许我们使用`AES`或`RC4`加密对我们的有效载荷进行加密。您只需使用 MSFVenom 中的`--encrypt`选项生成有效载荷即可。

1.  不，不能。目前，Metasploit Framework 仅支持 PostgreSQL 作为后端。

1.  Metasploit Framework 数据库可以直接通过端口`5432`连接。如果您想通过安全通道与数据库通信，可以使用运行在 HTTP/HTTPS 上的 PostgreSQL Web 服务将 Metasploit Framework 连接到数据库。

# 第三章

1.  从基本的网络侦察到链式任务，有很多功能可以使用。在 Metasploit CE 中，许多功能被锁定，仅适用于 Metasploit Pro Edition。

1.  要使用自定义 SSL 证书，请将 Metasploit Web UI 附带的默认 SSL 证书替换为您自己的证书，方法是转到`<path/to/metasploit>/opt/metasploit/nginx/cert`并用您自己的文件替换那里的文件。

1.  Web 界面兼容 Google Chrome 10+，Mozilla Firefox 18+，Internet Explorer 10+和 Iceweasel 18+。

1.  是的，可以。RESTful API 在 Metasploit 产品的所有版本中都可用。请查看[`metasploit.help.rapid7.com/docs/standard-api-methods-reference`](https://metasploit.help.rapid7.com/docs/standard-api-methods-reference)以查看标准 Metasploit API 文档。

1.  是的，可以。您可以在 Metasploit Web 界面中检查自定义报告格式，并相应地进行配置。请查看以下链接获取更多信息，网址为[`metasploit.help.rapid7.com/docs/about-reports`](https://metasploit.help.rapid7.com/docs/about-reports)。

# 第四章

1.  HTTP 头检测模块获取服务器响应中的 HTTP 头。如果管理员已经阻止/删除了 HTTP 头，此模块将不会提供任何输出。该模块运行良好。

1.  默认情况下，Metasploit Web 界面附带 NMAP 版本 4.x（预安装）的软件包，用于执行主机发现和端口扫描。为了获得更好的结果，您可以安装和使用最新版本的 NMAP。

1.  是的，可以。Web 界面只为 Metasploit 框架提供了**图形用户界面**（**GUI**），因此您也可以添加自定义模块。

1.  您可以在页面前面放置一个反向代理。您首先必须使用 HTTP 基本身份验证机制进行身份验证，然后可以使用登录页面与 Metasploit Web 界面进行身份验证。有关更多信息，请查看文档[`docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/`](https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/)。

# 第五章

1.  是的，您可以。GitHub 上有许多著名的字典可用于更好的枚举结果。

1.  Metasploit 使您有权修改或添加自己的模块，这些模块可以根据不同的模块运行执行。您可以选择编写自定义模块，也可以编写自己的 Metasploit 插件，用于在单个命令中自动执行整个枚举过程。

1.  正则表达式用于高效过滤搜索。使用正则表达式，您可以执行更加专注的抓取，而不是更多垃圾导向的抓取。

# 第六章

1.  这完全取决于扫描运行的频率和并发性。最少可以使用两个客户端节点和一个主节点进行分布式扫描，但您可以根据要扫描的系统数量做出决定。

1.  当在 Metasploit 中加载 WMAP 插件时，将在与之连接的数据库中保存所有结果。注意：此插件中没有特定功能会生成 WMAP 报告。

1.  Metasploit Framework 支持的所有格式都在`db_import`命令中提到。请参考该命令。

1.  WMAP 是用 Ruby 编写的插件。您可以编辑文件并根据需要修改代码。在进行任何修改之前，请阅读`LICENCE`文件。

1.  WMAP 每个节点限制为 25 个作业。这是为了防止节点负担过重。

# 第七章

1.  不是真的。Nessus 可以安装在任何服务器上，您只需要提供网络 IP 和用于身份验证的端口凭据。Metasploit 将自动与远程安装的 Nessus 实例进行身份验证。

1.  Metasploit 支持 Nexpose、Nessus 和 OpenVAS 漏洞扫描器作为可插拔模块。对于其他漏洞扫描器，您可能需要编写自己的插件模块。

1.  是的。您可以将 Nessus Professional 与 Metasploit 一起使用。您只需要首先激活 Nessus Pro 许可证。

1.  扫描中的并发系统数量与您的 Nessus 订阅允许的数量相同。

# 第八章

1.  是的。如果 WordPress 安装了默认配置，则本章讨论的侦察技术足以获取有关所有 WordPress 版本的信息。

1.  如果`wp-admin`目录不可访问，您可以尝试`wp-login.php`文件。该文件对具有普通权限设置的用户以及对`wp-admin`目录也是可访问的。如果您仍然无法访问，请尝试将`wp-login.php?action=register`查询添加到 URI。

1.  是的，WordPress 是一个广泛使用的开源 CMS。与 WordPress 核心不同，一些主题和模板是根据付费订阅许可证的。

# 第九章

1.  Joomla 是用 PHP 编写的 CMS，并且将在安装有 PHP 的操作系统上运行。

1.  如果您已经使用了社区不知道的检测技术，可以将该技术添加到 Metasploit 代码中。同时，您可以向 Metasploit GitHub 存储库发送`push`请求，这应该也有助于社区。

1.  有多种方法可以找到安装的版本。您甚至可以阅读源代码以找到披露 Joomla 版本的标头或参数。

1.  渗透测试人员的目标是找到漏洞并利用它，以使组织管理层相信不应忽视 Web 应用程序的安全性。在应用程序中设置后门将违反这一逻辑，这是不道德的。

# 第十章

1.  不同的 Drupal 版本具有不同的架构和不同的功能。如果利用漏洞基于 Drupal 的核心组件，它也可以用于旧版本。其他基于模块和插件的漏洞可能在不同的 Drupal 版本中无法工作。

1.  在本地安装 Drupal 以测试漏洞是一个好习惯。如果我们成功地在本地利用 Drupal，那么我们可以在远程 Drupal 站点上使用相同的漏洞。

1.  有时，Web 应用程序防火墙（WAF）放置在 Web 应用程序前面，这意味着漏洞无法成功运行。在这种情况下，我们可以对漏洞中使用的有效载荷进行混淆或编码，并绕过 WAF 保护。

1.  如果我们可以访问 Drupal 管理员帐户，我们可以启用 PHP 过滤器模块并配置其权限。一旦权限设置好，我们就可以在网站上编写一个 Web shell。我们甚至可以通过利用任意文件上传漏洞来上传 Web shell（这在某些 Drupal 版本上有效）。

1.  在执行文件和目录枚举时，如果我们遇到`.swp`文件，我们可以利用这一点。SWP（发音为*swap*）文件是一个存储文件中发生的更改的状态文件。有时，管理员会编辑 Drupal 配置文件（`settings.php`），这意味着会创建一个`.swp`文件。如果我们可以访问`settings.php.swp`文件，我们就可以获取全局设置变量，如数据库用户名和密码，这可以用于进一步的利用。

# 第十一章

JBoss 有不同的版本和发布。社区版是免费下载的，但您需要购买许可证来支持它。您可以在[`www.redhat.com/en/store/red-hat-jboss-enterprise-application-platform?extIdCarryOver=true&sc_cid=701f2000001Css5AAC`](https://www.redhat.com/en/store/red-hat-jboss-enterprise-application-platform?extIdCarryOver=true&sc_cid=701f2000001Css5AAC)查看许可信息。

# 第十二章

1.  您可以使用 Shodan、ZoomEye、Censys.io 和类似的服务来识别它们。您还可以通过执行端口扫描和服务枚举来识别它们。有时，Tomcat 服务可能不会在常用端口（如`80`、`443`、`8080`等）上运行。在这种情况下，执行完整的端口扫描，并通过服务器响应来识别服务。

1.  并不一定。`Release-Notes.txt`和`Changelog.html`文件仅在默认安装时可用。如果服务器管理员已删除这些文件，您需要寻找其他方法（在本章中提到）来检测和识别 Apache Tomcat 实例。

1.  这通常发生在反病毒程序检测到 JSP Web shell 时。为了绕过这样的安全措施，您可以对 Web shell 进行混淆。

1.  在基于 OOB 的 OGNL 注入中，有两种方式可以利用这个漏洞——通过 DNS 交互或通过 HTTP 交互。在这两种情况下，您需要设置自己的实例并配置 DNS 服务器（用于 DNS 交互）或 HTTP Web 服务器（用于 HTTP 交互）。在进行 HTTP 交互攻击时，利用基于 OOB 的 OGNL 更容易。

# 第十三章

1.  您可以使用 Shodan、ZoomEye、Censys 等工具来识别 Jenkins 实例。默认情况下，Jenkins 服务在端口`8080`上运行。

1.  有多种方法可以识别 Jenkins，但最常见的方法是使用 HTTP 标头。`X-Hudson`、`X-Jenkins`、`X-Jenkins-Session`和`X-Permission-Implied-By`标头是 Jenkins 使用的自定义 HTTP 标头。

1.  您可以通过 HTTP 标头来查看是否有任何类型的标头阻止您访问 Jenkins 实例。您还可以添加一个`X-Forwarded-For: 127.0.0.1`标头来绕过任何类型的入口访问限制。

1.  Jenkins 是一个用 Java 构建的开源工具，通过使用基于插件的机制来帮助 CI 和 CD。如果您可以访问 Jenkins 实例，可以中断 CI/CD 流水线以关闭生产/非生产环境。由于 Jenkins 保存了应用程序的所有代码，您可以下载源代码以获取硬编码的凭据和敏感信息，然后可以用于进一步的利用。

# 第十四章

1.  您可以在运行 Web 服务的任何服务器上执行 Web 应用程序模糊测试（包括 SSL）。

1.  Burp Suite 是一个基于 Java 的工具，可以在 Microsoft Windows 上使用，但对于 Wfuzz 和 ffuf，您必须在 Windows 上安装 Python，因为这些工具是基于 Python 的。

1.  不。在常规渗透测试中进行模糊测试是可选的，需要与客户讨论。如果客户要求，那么它将是强制性的；否则，渗透测试可以在不进行模糊测试的情况下进行。然而，总是进行模糊测试是一个好习惯，因为您可能会发现扫描器错过的严重漏洞。

1.  这些漏洞范围从技术漏洞，如远程代码执行（RCE）、SQL 注入（SQLi）和跨站脚本（XSS）到逻辑漏洞，如账户接管、参数操纵、响应操纵和身份验证令牌绕过。

# 第十五章

1.  用于 Microsoft Word 的元语言被设计得尽可能简单，同时还具有足够的功能，可以创建基本的渗透测试报告。这是一种用于在 Serpico 中创建自定义模板的语言（在它们的 GitHub 存储库中定义）。要了解有关 Serpico 中元语言的更多信息，请参阅[`github.com/SerpicoProject/Serpico/wiki/Serpico-Meta-Language-In-Depth`](https://github.com/SerpicoProject/Serpico/wiki/Serpico-Meta-Language-In-Depth)。

1.  通用的渗透测试报告应包括漏洞名称、漏洞描述、受影响的端点、复制步骤（概念验证）、业务影响、纠正措施和参考资料。

1.  Guinevere、Prithvi 和许多其他开源自动化报告工具都是公开可用的，可用于轻松生成报告。

1.  是的。Dradis Framework 和 Serpico 都是用 Ruby 编写的，它们是跨平台支持的工具，可以在 Microsoft Windows 上运行。唯一的要求是 Ruby 软件包需要安装在 Windows 系统上。
