# 第十五章：云计算

云计算是一项新技术，它允许你通过互联网访问计算应用程序、数据存储和网页邮件。云计算的使用使得去中心化的工作团队成为可能，同时降低了运营成本并提供了数据安全性。如今，许多组织由于这些优势，正在将数据和基础设施迁移到云端。然而，云环境同样存在许多潜在的风险和危险。攻击者正在利用云软件中的安全漏洞，非法访问存储在其中的宝贵数据。

云安全对个人和组织变得越来越重要。本章解释了攻击云环境的各种方法，突出了潜在的漏洞。了解这些攻击和漏洞可以帮助**云服务提供商**（**CSPs**）以及云用户制定安全的网络安全措施，以保护其云基础设施。请记住，本章并不是为了告诉你*这就是你需要了解的所有云技术*，而是如何保护它们。

本章将涵盖以下主题：

+   生活在云端

+   攻击云环境

+   攻击者的工具和技术

+   云安全的最佳实践

让我们首先为云计算的概念打下基础。

# 生活在云端

云计算是一种按需交付的 IT 能力，其中 IT 基础设施和应用程序通过网络作为计量服务提供给订阅者。云解决方案的例子包括 Gmail、Facebook、Dropbox 和 [salesforce.com](http://salesforce.com)。

云服务通过互联网技术交付，可以包括公有云、私有云或混合云模式。接下来我们将简要了解这些：

+   **公有云服务**：这些服务由 Amazon、Google 和 Microsoft 等提供商提供，面向公众，任何注册账户的用户都可以使用。服务提供商管理基础设施和应用程序，并按需提供服务。

+   **私人云服务**：这些服务由 IBM、惠普和 Rackspace 等组织提供。它们仅供拥有它们的组织使用，不能公开提供。服务提供商管理基础设施和应用程序，并按需提供服务。

+   **混合云服务**：这是公有云和私有云服务的结合。例如，一个组织可能会使用公有云服务进行电子邮件处理，而使用私有云服务进行存储。

+   **多云服务**：多云是另一种选择。它是由两个或更多的云（私有云、公有云或社区云）组成的云环境，这些云仍然是独立的实体，但通过连接提供多种部署方式的好处。在这种情况下，公司的某些资产在内部提供并由公司管理，而其他资源则是外部的，由其他方处理。微软的 Azure 或 Zymr 就是这方面的一个极好例子。

接下来，让我们讨论一些不同的云计算模型。

## 云计算模型

为了满足企业的不同需求，有几种云计算模型被使用。接下来我们简要讨论这些模型：

+   **软件即服务**（**SaaS**）：SaaS 是最常见的云服务交付模型。通过 SaaS，供应商托管应用程序并通过互联网将其提供给订阅者。订阅者通过网页浏览器访问应用程序，无需安装任何软件。

该应用程序通过供应商提供，按需付费方式提供。SaaS 是希望外包应用程序托管并且不想担心基础设施管理的组织的绝佳选择。

+   **平台即服务**（**PaaS**）：PaaS 是一种云服务交付模型，供应商托管基础设施，并通过互联网将其提供给订阅者。订阅者可以通过网页浏览器访问应用程序，无需安装任何软件。

该应用程序通过供应商提供，按需付费方式提供。PaaS 是一个绝佳的替代选择，适合希望外包应用程序托管但不想处理基础设施管理的公司。

+   **基础设施即服务**（**IaaS**）：IaaS 也是一种通过互联网提供给订阅者的模型。供应商托管基础设施，订阅者通过网页浏览器访问应用程序，无需安装任何软件。

该应用程序也按需付费方式提供。IaaS 是希望外包应用程序托管但不想处理基础设施的公司们的绝佳选择。

+   **身份即服务**（**IDaaS**）：组织订阅由第三方供应商运营的云计算服务，提供身份认证服务，且用于身份和访问管理。它是一个 SaaS 产品，提供**单点登录**（**SSO**）、**多因素认证**（**MFA**）、**身份治理与管理**（**IGA**）、访问管理和情报收集等功能。这些功能使得客户能够更加安全地访问敏感数据，无论是在本地还是在外部。

+   **安全即服务**（**SECaaS**）：在这种云计算模型中，安全服务以成本效益的方式集成到公司基础设施中。它基于 SaaS，并且不需要任何物理硬件或设备。因此，与组织自行创建安全能力时的支出相比，它具有显著的成本节约。它提供渗透测试、身份验证、入侵检测、防恶意软件保护和安全事件响应等服务。

+   **容器即服务**（**CaaS**）：其背后的云计算架构使订阅者能够将容器和集群作为服务来使用。通过 Web 门户或 API，它提供容器引擎、容器管理、应用程序和集群的虚拟化。订阅者可以使用这些工具在云端或本地数据中心创建丰富、可扩展的容器化应用程序。CaaS 结合了 IaaS 和 PaaS 的特点。

+   **功能即服务**（**FaaS**）：这种云计算服务的目标是简化应用程序功能的设计、运营和管理，而无需构建和维护基础设施（无服务器架构）。这种架构在创建微服务应用程序时得到广泛应用。消费者可以按需访问功能，支持的基础设施在闲置时关闭，不会产生费用。它提供的部分数据处理服务包括物联网服务、移动和 Web 应用程序、以及批量和流处理等。

呼！我想这就是所有模型了。哦，我猜你可能还会想到**黑客即服务**（**HaaS**）。虽然这算是一个新概念，但基本上你支付给黑客让他们为你进行钓鱼攻击或设置**分布式拒绝服务**（**DDoS**）攻击服务，甚至就是直接*雇佣黑客*。我知道，挺疯狂的，对吧？

接下来，我们来讨论云计算中的责任分离。

## 云计算中的责任分离

并非所有云计算模型都是一样的。它们在分配云服务交付责任的方式上有所不同。

以下三种模型说明了这种分配是如何进行的：

+   在**提供商管理模型**中，提供商负责从管理应用程序到处理所有客户支持的所有事务。

+   在**自我管理模型**中，客户负责管理应用程序并处理客户支持。

+   在**混合模型**中，使用了提供商管理和自我管理服务的组合。

你选择的模型取决于你所在组织的需求。

提供商管理服务适合那些希望提供商处理所有责任的组织，而自我管理服务则适合那些希望对应用程序拥有更多控制权的组织。如果你不确定哪个模型适合你，混合服务是一个不错的选择，因为它提供了两全其美的优势。

接下来，我们将讨论如何部署云服务。

## 部署模型

一旦你决定了所需的云服务类型，就需要决定部署模型。

以下四种模型是最常见的：

+   **公共云模型**：在此模型中，提供商负责公共云及其 IT 资源的开发和持续维护，因为它们通过互联网向公众提供应用程序、服务器和数据存储等服务。因此，提供商负责创建和维护这些公共云的各个元素。

+   **私有云模型**：私有云，有时称为**内部**云或**企业**云，是由单一公司运行的云基础设施，并设置在公司防火墙内。组织构建私有云基础设施以保持对公司数据的完全控制。此模型使用的软件包括 VMware、SAP 或微软的 System Center 平台。

+   **社区云模型**：社区云是一种由多个具有共同利益的组织共享的私有云，例如确保其数据保持安全或共享基础设施成本。

+   **混合云模型**：混合云是由两个或更多云（私有云、社区云或公共云）组成的，它们仍然是独立的实体，但通过标准化或专有技术将它们绑定在一起，从而实现数据和应用程序在它们之间的可移植性。

组织使用混合云将其私有云的范围扩展到公共云，利用公共云中的规模经济，或结合多个云的优势。适合你的部署模型取决于你的具体需求。

接下来我们来谈谈容器技术的使用。

## 容器技术

这一新兴技术已经专门开发，以解决云部署的需求。它通过将应用程序及其所有依赖项封装成一个自给自足的包，来解决可移植性问题，使其可以在任何平台、任何环境中运行。

容器的一些特点包括：

+   它们是可移植的，因此可以在任何平台或基础设施上运行。

+   它们部署快速，因此你可以迅速启动并运行你的应用程序。

+   它们是轻量级的，因此不会占用大量系统资源。

+   它们是安全的，因为所有应用程序的依赖项都包含在容器中，因此你无需担心安全问题。

+   它们易于管理，因为你可以跟踪部署中的所有容器，并将它们作为一个整体进行管理。

容器技术仍在发展中，但由于其众多优势，已经在云计算领域获得了大量关注。如果你正在寻找一种使云部署更具可移植性和高效性的方法，你应该考虑使用容器。

接下来我们讨论云存储架构。

## 云存储架构

现在我们对云基础系统的工作原理有了基本的了解，接下来我们将看看组成云存储系统的不同组件。主要有三个组件：**前端、中间件和后端**。

前端层是系统中终端用户交互的部分。这可能包括网页界面或移动应用。前端与中间件进行通信，而中间件负责管理前端与后端之间的交互。后端是系统中存储数据的部分。

前端和后端可能位于不同的数据中心，而中间件可能位于第三个数据中心。这样的配置允许通过添加更多的前端或后端来扩展系统。

大多数云存储系统使用客户端/服务器架构。客户端是安装在用户计算机上的部分，服务器是存储数据的部分。

客户端/服务器架构允许通过添加更多客户端或服务器来扩展系统。

接下来我们讨论一下可以使用的一些云存储服务。

## 云存储服务

现在我们对云存储有了基本了解，接下来我们来看一些最流行的云存储服务。

+   **Amazon S3** 是一项云存储服务，允许你将数据存储在云中。该服务基于**Amazon Web Services**（**AWS**）平台。

+   **Azure Blob Storage** 是一项云存储服务，允许你将数据存储在云中。该服务基于 Azure 平台。

+   **Google Cloud Storage** 是一项云存储服务，允许你将数据存储在云中。该服务基于**Google Cloud Platform**（**GCP**）。

+   **IBM Cloud Object Storage** 是一项云存储服务，允许你将数据存储在云中。该服务基于 IBM Cloud 平台。

接下来我们将探讨**美国国家标准与技术研究院**（**NIST**）的云部署参考架构。

## NIST 云部署参考架构

现在我们了解了云存储的基本概念，接下来我们看一下 NIST 云部署参考架构。主要的参与者包括：

+   **云消费者**：个人或组织与云服务提供商签订合同，以便为你的组织使用云服务。

+   **云服务提供商**（**CSP**）：云服务提供商是一个个人或组织，负责购买和管理提供服务所需的计算基础设施，并通过网络接入直接或通过云经纪人将服务提供给有兴趣的客户。

+   **云服务经纪人**：云服务的整合变得太复杂，云消费者难以管理，因此他们转向云经纪人而非 CSP。**云服务经纪人**是一个管理云服务的公司，包括服务的使用、性能和交付，以及 CSP 和云消费者之间的连接。

+   **云审计员**：由云消费者雇佣的组织，负责评估、测试并报告云服务提供商和经纪人，以及云环境的管理和安全性。

+   **云承运商**：提供运输服务的供应商，例如云系统所需的带宽。

接下来我们来谈谈 Docker，以及它如何帮助促进 NIST 架构。

### 什么是 Docker？

**Docker** 的缩写代表 **数字容器**。它是一种软件技术，使容器能够在不同平台上运行。为了确保应用程序的正常运行，所有 Docker 的依赖项都以容器的形式存在。通过操作系统级的虚拟化，Docker 提供了一个 PaaS，交付容器化的软件应用程序。这项技术将应用程序与基础设施隔离开来，从而加速软件交付。Docker 的优势在于它允许应用程序在任何环境中运行，因为它们与依赖项一起打包进 Docker 容器。

### 微服务

微服务是一种软件开发技术，它允许你将应用程序分解成更小、更易管理的模块。每个微服务可以用不同的语言编写，并运行在自己的平台上。这使得它们易于扩展和管理，同时也给予你为每个微服务选择最佳技术的灵活性。微服务非常适合云部署，因为它们使你能够根据需要轻松地扩展或缩减应用程序。

### 理解 Kubernetes

Kubernetes 是一个开源系统，用于大规模管理容器。它由 Google 开发，目前由云原生计算基金会维护。Kubernetes 提供了一个平台，用于部署、管理和扩展容器化应用程序。它可以在本地或云端使用，并支持多种平台，包括 Linux、Windows 和 macOS。

Kubernetes 是一个强大的工具，如果你在云部署中使用容器，应该学习如何使用它。它可以帮助你更有效地管理容器，并根据需要扩展或缩减应用程序。

### 容器安全挑战

尽管容器提供了许多好处，但它们也带来了一些安全挑战。因为容器包含了应用程序的所有依赖项，所以它们可能成为黑客的攻击目标。你需要采取措施确保容器的安全，防止它们受到攻击。

确保容器安全的一种方法是使用身份验证和授权机制。你还可以使用防火墙和其他安全措施来保护容器免受攻击。保持容器镜像的最新也是很重要的，这样你可以应对最新的安全威胁。

### 无服务器计算

无服务器计算是一项新技术，它允许你运行应用程序，而无需担心服务器。通过无服务器计算，服务器被抽象化，你只需要关注代码。这使得部署应用程序变得简单，同时也消除了对服务器管理的需求。

无服务器应用程序并非完全没有服务器；服务器必须存在，但它们对开发人员来说是不可见的。在服务提供商的云托管架构中，应用程序软件在第三方服务提供商的托管基础设施上运行。云服务提供商负责提供、扩展、负载均衡和保护无服务器基础设施。云服务提供商还负责软件和系统的补丁管理，以及底层操作系统、应用程序和服务。

现在我们已经讨论了云的运作方式以及它的功能，接下来让我们谈谈如何攻击云。

# 攻击云

正如我们将要发现的那样，云计算有其安全挑战。让我们讨论一下我们在确保云环境安全时面临的一些挑战。

## 云安全

云计算的最大关注点之一是安全性。当你的数据存储在云中时，你需要确保它是安全的。关于云安全的秘密是：它只是我们可能包括在自己网络中的另一种网络基础设施。因此，我们在内部网络（包括无线网络）中遇到的相同威胁，正是我们在云中面临的威胁。诸如注入攻击、身份验证问题、数据泄漏、配置错误、编码问题、密码和 Web 服务器/应用程序漏洞等问题只是其中的一部分。然而，如果我不至少讨论其中的几个，我就没有做到尽职尽责，所以让我们来谈一谈：

+   确保选择一个声誉良好的云服务提供商，具有良好的安全性口碑。

+   使用强密码和身份验证方法。

+   加密你的数据。

+   避免在云中存储敏感数据。

+   了解云的漏洞以及如何防范它们。

云计算是部署应用程序的绝佳方式，它提供了多个好处，包括灵活性、可扩展性和便利性。但重要的是要意识到使用云计算时涉及的安全挑战，并采取措施保护数据。只要采取正确的预防措施，你可以安全地在云中部署应用程序，并享受它所提供的所有好处。

现在让我们讨论一些可以攻击云的具体方式。

### API 漏洞

如果你想攻击云基础设施，一个好的起点是 API 漏洞。API 是许多基于云的服务的支柱，它们的安全性通常比其他基础设施部分更宽松。通过发现和利用 API 中的漏洞，攻击者可以访问敏感数据或破坏服务的可用性。

API 漏洞可以分为两大类：一类是允许访问敏感数据的漏洞，另一类是允许攻击者发起拒绝服务攻击的漏洞。允许访问敏感数据的 API 漏洞包括 SQL 注入漏洞和**跨站脚本**（**XSS**）漏洞。允许攻击者发起拒绝服务攻击的 API 漏洞包括缓冲区溢出漏洞和**跨站请求伪造**（**CSRF**）漏洞。

攻击者可以使用多种方法定位 API 漏洞，包括挖掘公开可用的信息，如源代码库和漏洞追踪器。攻击者还可以使用自动化工具扫描流行 API 中的已知漏洞。

一旦攻击者发现了 API 中的漏洞，他们可以通过多种方式进行利用。例如，他们可能会利用漏洞访问敏感数据或发起拒绝服务攻击。

为了防止攻击者利用 API 漏洞，组织应该实施一个全面的安全计划，包括 API 的静态和动态测试。静态测试有助于发现潜在的漏洞，而动态测试则有助于验证漏洞是否已被正确修复。

组织还应考虑实施速率限制和其他控制措施，以限制拒绝服务攻击的影响。通过采取这些措施，组织可以帮助保护其基于云的服务免受攻击。

### 使用社会工程学进行服务劫持

是的，这就是“事儿”。坏人们的攻击手段越来越狡猾和阴险。不幸的是，社会工程学是他们最喜欢的工具之一。攻击者通过钓鱼、欺骗、社会工程学或利用软件漏洞窃取 CSP 或客户的凭证，从而进行账户或服务接管。攻击者利用窃取的凭证访问云计算服务，危及数据的机密性、完整性和可用性。攻击者可能会尝试重置密码或 IT 人员访问其云服务以获取密码。猜测密码、键盘记录恶意软件、利用密码破解方法和发送钓鱼邮件是获取密码的其他手段。

### 旁道攻击或跨访客虚拟机（VM）漏洞

恶意内部人员和攻击者可以使用旁道攻击窃取虚拟机中的数据或敏感信息。跨访客虚拟机（VM）漏洞是攻击者可以采用的另一种方式。通过攻破同一物理服务器上其他访客的虚拟机，攻击者可以从同一服务器上其他虚拟机窃取数据或敏感信息。

### 包装攻击

*“这首歌献给屋子里的所有黑客！”*

*即使在快速结算账目时，*

*我们的灾难恢复需要更多的磁盘，*

*把你的比特币拿出来，证明一下，否则你就输了，*

*我拿到了 C64，我们把它送上了轨道*"

*– 双核“万物皆可”* ([`www.youtube.com/watch?v=FoUWHfh733Y`](https://www.youtube.com/watch?v=FoUWHfh733Y))

哦，错的包裹类型。我的错。

在包裹攻击中，攻击者的欺骗行为发生在 **简单对象访问协议** (**SOAP**) 消息在 TLS 中的转换过程中。入侵者复制消息体并将其传输给服务器，仿佛他们是合法用户。服务器通过比较签名值（该值也被复制）与原始签名进行身份验证。然后，攻击者可以突破云端，执行恶意代码，扰乱云服务器的正常运行。

### 云端劫持（MITC）

MITC 攻击是一种攻击方式，攻击者控制或改变云应用程序的行为。攻击者可以利用 MITC 攻击绕过安全控制、将恶意代码注入应用程序并窃取数据。他们还可以利用 MITC 攻击获取其他用户账户的访问权限，进行其他恶意活动。

### 云跳跃攻击

云跳跃攻击是一种复杂的黑客攻击活动，针对使用云服务的组织。云跳跃攻击通常发生在托管服务提供商（MSP）及其客户之间。攻击的目标是窃取这些组织的数据和知识产权。云跳跃攻击使用各种技术，包括恶意软件、钓鱼攻击和社交工程，来获取组织系统的访问权限。一旦获取访问权限，攻击者便窃取数据和知识产权，并转向其他组织进行攻击。

### 云加密劫持

加密劫持是未经授权使用他人计算机进行加密货币挖掘的行为。加密货币挖掘是通过计算机算力解决复杂数学问题，以验证和记录区块链上的交易的过程。由于加密劫持易于执行且不需要太多技术知识，它正成为一种越来越常见的攻击方式。攻击者可以在受害者的计算机上进行加密劫持，偷偷挖掘加密货币，且不被受害者知晓或同意。他们还可以在组织员工的计算机上进行加密劫持，这会导致组织的财务损失，并降低员工的生产力。

### 云端恶意软件

Cloudborne 是一种裸金属云服务器中的安全漏洞，攻击者可以通过该漏洞将恶意后门程序安装到固件中。即使服务器被重新分配给新客户或组织作为 IaaS 使用，安装的恶意软件也能持续存在。物理服务器并不局限于一个客户，可以从一个客户转移到另一个客户。Cloudborne 恶意软件是专为感染基于云的系统而设计的恶意软件。Cloudborne 恶意软件可以用来窃取数据、破坏系统并传播勒索病毒。它还可以用来获得组织系统的访问权限并窃取数据。Cloudborne 恶意软件是一个日益严重的威胁，因为它很难被检测到，并且可以被用来针对各种各样的组织。

### 通过利用 SSRF 漏洞获取访问权限

**服务器端请求伪造** (**SSRF**) 是一种漏洞，攻击者可以利用该漏洞向服务器发送请求，访问服务器本不应能够访问的外部资源。

攻击者利用 SSRF 漏洞的其中一种方式是通过向云存储服务（如 Azure Blob 存储或 Amazon **Simple Storage Service** (**S3**)）发送请求，然后读取服务的响应。这可以通过在 JavaScript 中使用 **fetch** API，或者在 Linux 中使用 **get has** 命令来完成。

一旦攻击者访问到云存储服务的响应，他们就可以下载存储在该服务中的任何文件。

攻击者利用 SSRF 漏洞的另一种方式是通过向托管敏感文件（如配置文件或数据库）的 web 服务器发送请求。然后，攻击者可以使用 Linux 中的 **GET** 命令下载该文件的内容。

通过利用 SSRF 漏洞，攻击者可以访问存储在云中的敏感文件，还可以窃取云端应用程序中的数据。

接下来，我们来谈谈容器漏洞。

## 容器漏洞

容器是云中部署应用程序的常见方式。它们可以将应用程序与底层系统隔离，并且便于将应用程序从一台服务器移动到另一台服务器。然而，容器漏洞可能允许攻击者获得底层系统的访问权限，窃取数据或安装恶意软件。攻击者还可以利用容器隐藏他们的恶意活动，使组织的安全工具难以检测。容器是攻击者的热门目标，因为它们易于利用并且提供了对底层系统的大量访问权限。

以下是一些安全专家应当警惕的常见漏洞：

+   **不安全的容器运行时配置**：如果容器的运行时配置没有正确设置，则容器可能不安全。攻击者可以利用这些漏洞获得对底层系统的访问权限，窃取数据或安装恶意软件。

+   **嵌入式恶意软件**：恶意软件可以嵌入运行在容器中的应用程序代码中。这些恶意软件即使在容器被删除或重新分配给其他客户端后仍然可以保持活动状态。

+   **访问控制不当**：容器通常具有较差的访问控制，这使得攻击者能够访问底层系统并窃取数据或安装恶意软件。

+   **安全控制不足**：容器没有与底层系统相同的安全控制，这使得攻击者能够绕过安全控制并窃取数据或安装恶意软件。

+   **泄露的容器**：容器可能会将数据泄露到底层系统，这可能允许攻击者窃取数据或安装恶意软件。

+   **不安全的数据存储**：容器数据可能在底层系统上不安全地存储，这可能允许攻击者窃取数据或安装恶意软件。

组织应当了解这些漏洞并采取措施进行缓解。安全专业人员也应该意识到这些漏洞，并采取措施保护组织免受其害。

接下来，我们来谈谈攻击者使用的一些具体工具和技术。

# 攻击者的工具和技术

要攻击云，黑客需要相应的工具。在这里，我们将讨论一些常见的可用工具。

## 工具

容器镜像是一个软件包，包含操作系统、应用程序、运行时和其他组件。这些容器在行业中被频繁重用，可能包含具有安全隐患的开源库。这些缺陷不仅危及每个容器的安全，也危及整个容器引擎的安全。像 Clair、Twistlock 和 Trivy 这样的工具是攻击容器的绝佳选择。

想要攻击 Kubernetes，也叫 K8s 吗？我们发现的大多数漏洞都与配置错误有关。Sysdig ([sysdig.com](http://sysdig.com)) 是一个非常好的工具，不仅可以扫描漏洞，还可以验证容器镜像。

不信你看，攻击者使用 Google 黑客技术来识别亚马逊云存储服务（称为 S3 存储桶）！如果你还记得我们的 Google 黑客技巧，可以使用 **inurl** 语法来查找 AWS 使用的子域名。

例如：

```
inurl: s3.amazonaws.com
```

```
inurl: s3.amazonaws.com/ audio/
```

```
inurl: s3.amazonaws.com/video/
```

```
inurl: s3.amazonaws.com/backup/
```

```
inurl: s3.amazonaws.com/movie/
```

```
inurl: s3.amazonaws.com/image/
```

但如果你想要一个更直接的方法，可以查看 S3Scanner ([`github.com/sa7mon/S3Scanner`](https://github.com/sa7mon/S3Scanner)) 来识别云服务（如 AWS）的开放 S3 存储桶，并获取其内容用于*恶意*目的。

接下来，让我们考虑一些额外的工具和这些工具能够帮助我们解决的安全风险。

### 枚举 AWS 账户 ID 和角色

AWS 账户由唯一的 ID 标识，如果这些 ID 被公开，攻击者可能会利用它们来攻击云服务。这些持久性标识符本应私密，但它们经常未经用户同意暴露给公众。攻击者可以利用这些信息泄露，从而进行恶意操作。通过分析 AWS 错误信息，攻击者可以确定哪些 **身份与访问管理**（**IAM**）角色名称存在。AWS 云服务中的错误会泄露用户的存在，错误信息中包含有关用户存在的线索。用户通常可以在 AWS 云服务中承担多个角色。每次 AWS 失败时，都会泄露角色存在的信息。如果 AWS 账户在一定次数的尝试后被封锁，采用暴力破解的方法虽然具有挑战性，但并非不可能。

### CloudGoat AWS

CloudGoat 是一个工具（[rhinosecuritylabs.com](http://rhinosecuritylabs.com)），可以让你测试 AWS 账户的安全性。该工具基于 **开放 Web 应用安全项目**（**OWASP**）的十大安全风险。没错，OWASP 也为云安全提供了清单。

以下是 CloudGoat 测试的十大安全风险：

1.  **注入攻击**：向 Web 应用程序中注入未经授权的代码。

1.  **身份验证和会话管理失效**：不安全的登录凭证和会话 Cookie。

1.  **跨站脚本攻击（XSS）**：恶意代码在用户访问网页时执行。

1.  **不安全的直接对象引用**：未经授权访问敏感数据。

1.  **安全配置错误**：安全设置配置不正确。

1.  **授权和身份验证不足**：缺乏适当的身份验证检查。

1.  **加密不足**：弱加密算法和密钥。

1.  **数据篡改**：篡改信息以改变其完整性。

1.  **跨站请求伪造（CSRF）**：攻击者诱使用户执行他们本不打算做的操作。

1.  **信息泄露和不当授权**：未经授权访问数据。

其他可以用来分析云服务/部署的工具包括：

+   DockerScan

+   GCPBucketBrute

+   AWS pwn

我相信还有数百个其他风险，但这些是你需要关注的，对于你的*近期未来*尤为重要。

接下来我们来探讨一些云安全的最佳实践。

# 云安全最佳实践

提升云端系统安全的第一步是启用 SSL（安全套接字层）和 TLS（传输层安全）加密。这有助于防止数据被攻击者拦截。

你还可以通过使用防火墙和 IDS（入侵检测系统）及 IPS（入侵防御系统）来提升系统的安全性。这些设备有助于保护系统免受恶意流量攻击。

这是你可以做的其他事情的清单：

+   为了保护数据，你应该强制使用数据加密和访问控制。这包括静态数据和传输中的数据。

+   灾难恢复规划是确保云端系统安全的另一个关键因素。你应该有一个应对自然灾害或安全事件的计划。

+   强制执行 SLA，以确保你的云服务提供商符合你已列出的安全要求。

+   使用强有力的 AAA（认证、授权和审计）控制。这些控制措施可以帮助保护你的系统免受未经授权的访问。

+   停止允许员工共享用户凭证。这将有助于减少数据泄露的风险。

+   隔离内存、存储和网络访问。这有助于防止攻击者获取系统的访问权限。

+   了解你的云责任模型。这将帮助你确定谁负责确保云端系统的安全。

+   注意使用云服务所涉及的风险。教育你的员工了解这些风险，并采取措施加以缓解。

为了保护你的云端系统安全，你需要建立并执行云安全政策。这些政策应根据云中存储数据的风险级别来制定。

在制定云安全政策时，你应该考虑以下事项：

+   存储在云中的数据类型

+   数据所需的安全级别

+   数据的访问和使用方式

+   访问数据的认证要求

+   数据的加密要求

+   数据的保存和处置要求

+   针对数据泄露的应急响应计划

+   对违反安全政策的员工采取的纪律处分

+   访问数据的员工的培训要求

你还应该考虑建立一个云安全治理框架。这将有助于确保你的云安全政策得到遵守。

### 重新核对你的合规要求

当你在云中存储数据时，需要确保遵守相关的合规要求。这些要求因组织而异，因此你需要咨询法律部门，以确保你遵守相关规定。

一些适用于基于云的系统的标准合规要求包括：

+   **健康保险流通与问责法案**（**HIPAA**）

+   **萨班斯-奥克斯利法案**（**SOX**）

+   **支付卡行业数据安全标准**（PCI DSS）

+   **格雷姆-利奇-布莱利法案**（**GLBA**）

最后，你应该确保定期更新设备上的软件和固件。这将有助于保护你的系统免受已知漏洞的利用。

通过遵循这些最佳实践，你可以帮助提升基于云的系统的安全性。

# 总结

在这一章节中，我们讨论了云计算如何带来益处，同时也说明了云计算在安全方面可能面临的挑战。我们讨论了云环境易受到攻击的一些方式，分享了攻击者可能使用的工具和技术。最后，我们讲解了一些最佳实践，帮助你确保云环境的安全。

需要记住的重要一点是，云环境中许多我们所看到的弱点和攻击，与我们在常规网络中学到的内容是相同的，这些也同样是攻击者的目标。

在下一章中，我们将讨论攻击者如何看待密码学，以及我们可以采取哪些措施应对。

# 问题

在我们结束时，以下是一些问题，供你测试自己对本章节内容的理解。你可以在*附录*的*评估*部分找到答案：

1.  以下哪些内容在云环境中不能进行配置？

    1.  基础设施即服务（IaaS）

    1.  平台即服务（PaaS）

    1.  软件即服务（SaaS）

    1.  云应用即服务（LaaS）

1.  云托管的 SaaS 环境提供什么？

    1.  开发选项

    1.  测试选项

    1.  软件托管

    1.  改进的安全性

1.  以下哪个是由基于云的防火墙隔离的？

    1.  主机

    1.  网络

    1.  访问控制列表（ACL）

    1.  权限

1.  云托管环境有多少种？

    1.  五个

    1.  四个

    1.  三个

    1.  两个
