# 前言

无线网络已经在今天的世界中无处不在。全球每天有数百万人在家中、办公室和公共热点使用无线网络连接互联网，进行个人和职业工作。尽管无线网络让我们的生活变得极其便捷，提供了极大的流动性，但它也带来了风险。近年来，不安全的无线网络已被用来入侵公司、银行和政府机构。这些攻击的频率只增不减，因为网络管理员仍然对如何以强健和万无一失的方式保护无线网络一无所知。

《Kali Linux 无线渗透测试入门指南》，*第三版*，旨在帮助读者理解与无线网络相关的安全隐患，以及如何进行渗透测试来发现并修复这些漏洞。这本书是希望对无线网络进行安全审计的人必读的书，尤其是那些一直想要一本逐步实践指南的人。通过这本书，您的学习将完整无缺，因为每个无线攻击的讲解后面都会紧跟一个实践演示。

我们选择了 Kali Linux 作为平台，在本书中测试所有的无线攻击。Kali Linux，如你所知，是全球最流行的渗透测试发行版。它包含了成百上千的安全和黑客工具，其中一些我们将在本书中使用。

# 本书内容概览

第一章，*无线实验室搭建*，展示了如何使用现成的硬件和开源软件创建一个无线测试实验室。为了能够尝试本书中的几十个练习，您需要搭建一个无线实验室。我们将首先关注硬件需求，包括无线网卡、天线、接入点以及其他支持 Wi-Fi 的设备。接下来，我们将转向软件需求，包括操作系统、Wi-Fi 驱动程序和安全工具。最后，我们将创建一个实验平台，并在其上验证不同的无线配置。

第二章，*WLAN 及其固有的不安全性*，重点讲解了无线网络中固有的设计缺陷，这些缺陷使得无线网络从一开始就不安全。我们将使用名为 Wireshark 的网络分析工具快速回顾 802.11 WLAN 协议。这将使我们对这些协议的工作原理有一个实际的了解。最重要的是，我们将通过分析管理帧、控制帧和数据帧，看到客户端与接入点之间的通信如何在数据包层面上运作。然后，我们将学习如何进行数据包注入和数据包嗅探，并探讨一些能够帮助我们实现这些功能的工具。

第三章，*绕过 WLAN 认证*，展示了如何突破 WLAN 认证机制！我们将一步一步地探讨如何颠覆开放认证和共享密钥认证。在这个过程中，你将学习如何分析无线数据包，找出网络的认证机制。我们还将讨论如何突破启用了隐藏 SSID 和 MAC 过滤的网络。这两种机制是网络管理员常用来让无线网络更加隐秘和难以渗透的方法，然而，这些方法非常容易绕过。

第四章，*WLAN 加密缺陷*，描述了 WLAN 协议中最脆弱的部分之一——加密方案——包括 WEP、WPA 和 WPA2。在过去的十年里，黑客发现了这些加密方案的多个漏洞，并编写了公开的破解软件来解密数据。此外，尽管 WPA/WPA2 在设计上是安全的，但错误配置会导致安全漏洞，这些漏洞很容易被利用。在本章中，你将了解这些加密方案的安全隐患，并进行实操演示，展示如何破解它们。

第五章，*WLAN 基础设施攻击*，将焦点转向 WLAN 基础设施的漏洞。我们将探讨由配置和设计问题引发的漏洞。我们还将进行实际的攻击演示，包括接入点 MAC 欺骗、比特翻转和重放攻击、恶意接入点、模糊测试和拒绝服务攻击。本章将使你对如何进行 WLAN 基础设施渗透测试有一个扎实的理解。

第六章，*攻击客户端*，如果你一直认为无线客户端安全不需要担心，那么这章可能会让你大开眼界！大多数人在考虑 WLAN 安全时，都会把客户端排除在外。本章将毫无疑问地证明，客户端在渗透测试 WLAN 网络时和接入点一样重要。我们将探讨如何通过客户端攻击手段（如错误关联、Caffe Latte、去关联、对等连接、模糊测试和蜜罐）来危害安全。

第七章，*高级 WLAN 攻击*，在我们已经涵盖了基础设施和客户端的基本攻击之后，继续讨论更高级的攻击。这些攻击通常涉及将多个基础攻击结合使用，在更具挑战性的场景中突破安全防护。这些攻击包括无线设备指纹识别、无线中间人攻击、规避无线入侵检测与防御系统，以及使用自定义协议的恶意接入点操作。本章展示了现实世界中的无线攻击最前沿技术。

第八章，*KRACK 攻击*，探讨了 2017 年发现的一组新漏洞，涉及 WPA2 握手。你将复习并详细检查 WPA2 握手，了解这些新攻击是如何应用的。

第九章，*攻击 WPA-Enterprise 和 RADIUS*，通过介绍对 WPA-Enterprise 和 RADIUS 服务器设置的高级攻击，将你带入下一个层次。当你需要对依赖 WPA-Enterprise 和 RADIUS 身份验证来提供安全保障的大型企业网络进行渗透测试时，这些攻击会派上用场。

第十章，*WLAN 渗透测试方法论*，将前几章的所有学习内容汇集在一起，我们将系统性和有条理地学习如何进行无线渗透测试。你将了解渗透测试的各个阶段——规划、发现、攻击和报告，并将其应用到无线渗透测试中。我们还将了解如何在无线渗透测试后提出建议和最佳实践。

第十一章，*WPS 和探测*，涵盖了自初版发布以来，业界发展出的两种新攻击——WPS 暴力破解和探测嗅探监控。

# 本书所需内容

要跟随并重现本书中的实际操作，你将需要两台内置 Wi-Fi 卡的笔记本电脑、一只 USB 无线 Wi-Fi 适配器、Kali Linux 及一些其他硬件和软件。我们在第一章，*无线实验室设置*中已经详细说明了这些内容。

作为替代方案，你也可以创建一个虚拟机来运行 Kali Linux，并通过 USB 接口将 Wi-Fi 卡连接到虚拟机。这样可以帮助你更快地开始使用本书，但我们建议在实际评估中，使用一台专门运行 Kali Linux 的设备。

从前提角度来看，你应该了解无线网络的基础知识。这包括对 802.11 协议以及客户端-接入点通信的基础了解。尽管我们会在搭建实验室时简要涉及这些内容，但预期你已经掌握了这些概念。

# 本书适合谁阅读

虽然本书是初学者系列，但适用于所有水平的用户，从业余爱好者到无线安全专家。每个人都能从中受益。本书从简单的攻击开始，然后逐步讲解更复杂的攻击，最后讨论前沿攻击和研究。由于所有攻击都是通过实际演示进行讲解的，因此各个水平的读者都可以轻松地自己尝试这些攻击。请注意，尽管本书强调了可以针对无线网络发起的不同攻击，但真正的目的是教育用户成为一名无线渗透测试员。一位熟练的渗透测试员将理解书中的所有攻击，并能够在客户要求时轻松演示它们。

# 各章节

本书中有多个经常出现的标题（*行动时间*、*发生了什么？*、*小测试*、*挑战英雄*）。

为了提供清晰的操作步骤或任务完成指南，我们将这些部分按以下方式呈现：

# 行动时间 – 标题

1.  行动 1

1.  行动 2

1.  行动 3

指令通常需要一些额外的解释，以确保它们的意义清晰，因此这些部分后面会跟随更多的说明：

## *发生了什么？*

本节解释了你刚刚完成的任务或指令的工作原理。

本书中还包括一些其他的学习辅助工具，例如：

## 小测试 – 标题

这些是简短的选择题，旨在帮助你测试自己对内容的理解。

## 挑战英雄 – 标题

这些是实际的挑战，能够为你提供实验和应用所学知识的灵感。

# 约定

你还会发现一些文本样式，用以区分不同类型的信息。以下是这些样式的示例及其含义的解释。

书中的代码字、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入以及 Twitter 用户名等内容，格式如下所示：“将卡插入 Kali 笔记本的一个 USB 端口并启动它。登录后，打开一个终端并输入`iwconfig`。”

代码块如下所示：

```
import subprocess
import datetime
results = open("results.txt", "a")
while 1:
    cmd = subprocess.check_output(["tshark –n –i wlan0mon –T fields -e wlan.sa –e wlan.ssid –c 100"], shell=True)
    split = cmd.split("\n")
    for value in split[:-1]:
           if value.strip():
                   splitvalue = value.split("\t")
                   MAC = str(splitvalue[0])
                   SSID = str(splitvalue[1])
                   time = str(datetime.datetime.now())
                   results.write(MAC+" "+SSID+" "+time+"\r\n")
```

当我们希望特别引起你对某一代码块的注意时，相关行或项目将以粗体显示：

```
import subprocess
import datetime
results = open("results.txt", "a")
while 1:
    cmd = subprocess.check_output(["tshark –n –i wlan0mon –T fields -e wlan.sa –e wlan.ssid –c 100"], shell=True)
    split = cmd.split("\n")
    for value in split[:-1]:
           if value.strip():
 **splitvalue = value.split("\t")**
 **MAC = str(splitvalue[0])**
 **SSID = str(splitvalue[1])**
                   time = str(datetime.datetime.now())
                   results.write(MAC+" "+SSID+" "+time+"\r\n")
```

任何命令行输入或输出将按以下格式书写：

```
**ifconfig wlan0 up**

```

**新** **术语**和**重要** **词汇**以粗体显示。你在屏幕上看到的单词、菜单或对话框中的词汇，如：“用此 DVD 启动笔记本并从**启动菜单**中选择**安装**选项”。

### 注意

警告或重要提示通常会出现在像这样的小框中。

### 提示

提示和技巧像这样显示。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们你对本书的看法——你喜欢或不喜欢的部分。读者反馈对我们非常重要，它帮助我们开发你真正能够从中受益的书籍。

要向我们发送一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并在邮件主题中提到书籍标题。

如果你在某个领域具有专业知识，并且有兴趣编写或贡献书籍，请参阅我们的作者指南：[www.packtpub.com/authors](http://www.packtpub.com/authors)。

# 客户支持

现在你已经成为一本 Packt 书籍的骄傲拥有者，我们为你提供了很多帮助，以便你能从购买中获得最大收益。

## 下载示例代码

你可以从[`www.packtpub.com`](http://www.packtpub.com)的账户中下载本书的示例代码文件。如果你从其他地方购买了本书，你可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)，并注册以便将文件直接通过电子邮件发送给你。

你可以按照以下步骤下载代码文件：

1.  使用你的电子邮件地址和密码登录或注册我们的官网。

1.  将鼠标指针悬停在顶部的**支持**选项卡上。

1.  点击**代码下载与勘误表**。

1.  在**搜索**框中输入书名。

1.  选择你想要下载代码文件的书籍。

1.  从下拉菜单中选择你购买本书的地方。

1.  点击**代码下载**。

你也可以通过点击书籍网页上的**代码文件**按钮来下载代码文件。此页面可以通过在**搜索**框中输入书名来访问。请注意，你需要登录到你的 Packt 账户。

文件下载完成后，请确保使用最新版本的工具解压或提取文件夹：

+   适用于 Windows 的 WinRAR / 7-Zip

+   适用于 Mac 的 Zipeg / iZip / UnRarX

+   适用于 Linux 的 7-Zip / PeaZip

本书的代码包也托管在 GitHub 上：[`github.com/PacktPublishing/Kali-Linux-Wireless-Penetration-Testing-Beginners-Guide-Third-Edition`](https://github.com/PacktPublishing/Kali-Linux-Wireless-Penetration-Testing-Beginners-Guide-Third-Edition)。我们还提供了其他书籍和视频的代码包，详情请访问[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。快去看看吧！

## 下载本书的彩色图片

我们还为你提供了一份包含本书中使用的截图/图表彩色图片的 PDF 文件。这些彩色图片将帮助你更好地理解输出的变化。你可以从 [`www.packtpub.com/sites/default/files/downloads/KaliLinuxWirelessPenetrationTestingBeginnersGuideThirdEdition_ColorImages.pdf`](https://www.packtpub.com/sites/default/files/downloads/KaliLinuxWirelessPenetrationTestingBeginnersGuideThirdEdition_ColorImages.pdf) 下载该文件。

## 勘误

尽管我们已经尽力确保内容的准确性，但错误仍然可能发生。如果你在我们的书籍中发现任何错误——可能是文本或代码中的错误——我们将非常感激你能向我们报告。通过这样做，你可以帮助其他读者避免困扰，并帮助我们改进该书的后续版本。如果你发现任何勘误，请访问 [`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata) 进行报告，选择你的书籍，点击**勘误提交表单**链接，并填写勘误详情。一旦你的勘误被验证，你的提交将被接受，勘误将会上传到我们的网站或添加到该书勘误部分的现有勘误列表中。

要查看之前提交的勘误表，请访问 [`www.packtpub.com/books/content/support`](https://www.packtpub.com/books/content/support)，并在搜索框中输入书名。所需信息将显示在**勘误**部分。

## 盗版

互联网盗版问题在所有媒体中都普遍存在。在 Packt，我们非常重视版权和许可的保护。如果你在互联网上发现任何形式的非法复制品，请立即提供该网址或网站名称，以便我们采取措施。

请通过 `<copyright@packtpub.com>` 与我们联系，提供涉嫌盗版材料的链接。

感谢你在保护我们的作者和我们提供有价值内容方面的帮助。

## 问题

如果你对本书的任何部分有问题，可以通过 `<questions@packtpub.com>` 与我们联系，我们将尽力解决问题。
